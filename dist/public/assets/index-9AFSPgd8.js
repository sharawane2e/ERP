function Hj(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var f7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gg={exports:{}},qf={},Kg={exports:{}},hn={};var I2;function Wj(){if(I2)return hn;I2=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function A(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,S={};function E(j,x,C){this.props=j,this.context=x,this.refs=S,this.updater=C||y}E.prototype.isReactComponent={},E.prototype.setState=function(j,x){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,x,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function _(){}_.prototype=E.prototype;function O(j,x,C){this.props=j,this.context=x,this.refs=S,this.updater=C||y}var T=O.prototype=new _;T.constructor=O,D(T,E.prototype),T.isPureReactComponent=!0;var z=Array.isArray,re=Object.prototype.hasOwnProperty,ae={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(j,x,C){var M,H={},ie=null,oe=null;if(x!=null)for(M in x.ref!==void 0&&(oe=x.ref),x.key!==void 0&&(ie=""+x.key),x)re.call(x,M)&&!W.hasOwnProperty(M)&&(H[M]=x[M]);var ve=arguments.length-2;if(ve===1)H.children=C;else if(1<ve){for(var Ce=Array(ve),Le=0;Le<ve;Le++)Ce[Le]=arguments[Le+2];H.children=Ce}if(j&&j.defaultProps)for(M in ve=j.defaultProps,ve)H[M]===void 0&&(H[M]=ve[M]);return{$$typeof:t,type:j,key:ie,ref:oe,props:H,_owner:ae.current}}function Q(j,x){return{$$typeof:t,type:j.type,key:x,ref:j.ref,props:j.props,_owner:j._owner}}function fe(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function U(j){var x={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(C){return x[C]})}var F=/\/+/g;function X(j,x){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):x.toString(36)}function Y(j,x,C,M,H){var ie=typeof j;(ie==="undefined"||ie==="boolean")&&(j=null);var oe=!1;if(j===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(j.$$typeof){case t:case e:oe=!0}}if(oe)return oe=j,H=H(oe),j=M===""?"."+X(oe,0):M,z(H)?(C="",j!=null&&(C=j.replace(F,"$&/")+"/"),Y(H,x,C,"",function(Le){return Le})):H!=null&&(fe(H)&&(H=Q(H,C+(!H.key||oe&&oe.key===H.key?"":(""+H.key).replace(F,"$&/")+"/")+j)),x.push(H)),1;if(oe=0,M=M===""?".":M+":",z(j))for(var ve=0;ve<j.length;ve++){ie=j[ve];var Ce=M+X(ie,ve);oe+=Y(ie,x,C,Ce,H)}else if(Ce=A(j),typeof Ce=="function")for(j=Ce.call(j),ve=0;!(ie=j.next()).done;)ie=ie.value,Ce=M+X(ie,ve++),oe+=Y(ie,x,C,Ce,H);else if(ie==="object")throw x=String(j),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.");return oe}function Ne(j,x,C){if(j==null)return j;var M=[],H=0;return Y(j,M,"","",function(ie){return x.call(C,ie,H++)}),M}function be(j){if(j._status===-1){var x=j._result;x=x(),x.then(function(C){(j._status===0||j._status===-1)&&(j._status=1,j._result=C)},function(C){(j._status===0||j._status===-1)&&(j._status=2,j._result=C)}),j._status===-1&&(j._status=0,j._result=x)}if(j._status===1)return j._result.default;throw j._result}var we={current:null},se={transition:null},me={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:se,ReactCurrentOwner:ae};function I(){throw Error("act(...) is not supported in production builds of React.")}return hn.Children={map:Ne,forEach:function(j,x,C){Ne(j,function(){x.apply(this,arguments)},C)},count:function(j){var x=0;return Ne(j,function(){x++}),x},toArray:function(j){return Ne(j,function(x){return x})||[]},only:function(j){if(!fe(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},hn.Component=E,hn.Fragment=r,hn.Profiler=a,hn.PureComponent=O,hn.StrictMode=n,hn.Suspense=f,hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,hn.act=I,hn.cloneElement=function(j,x,C){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var M=D({},j.props),H=j.key,ie=j.ref,oe=j._owner;if(x!=null){if(x.ref!==void 0&&(ie=x.ref,oe=ae.current),x.key!==void 0&&(H=""+x.key),j.type&&j.type.defaultProps)var ve=j.type.defaultProps;for(Ce in x)re.call(x,Ce)&&!W.hasOwnProperty(Ce)&&(M[Ce]=x[Ce]===void 0&&ve!==void 0?ve[Ce]:x[Ce])}var Ce=arguments.length-2;if(Ce===1)M.children=C;else if(1<Ce){ve=Array(Ce);for(var Le=0;Le<Ce;Le++)ve[Le]=arguments[Le+2];M.children=ve}return{$$typeof:t,type:j.type,key:H,ref:ie,props:M,_owner:oe}},hn.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:o,_context:j},j.Consumer=j},hn.createElement=te,hn.createFactory=function(j){var x=te.bind(null,j);return x.type=j,x},hn.createRef=function(){return{current:null}},hn.forwardRef=function(j){return{$$typeof:c,render:j}},hn.isValidElement=fe,hn.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:be}},hn.memo=function(j,x){return{$$typeof:p,type:j,compare:x===void 0?null:x}},hn.startTransition=function(j){var x=se.transition;se.transition={};try{j()}finally{se.transition=x}},hn.unstable_act=I,hn.useCallback=function(j,x){return we.current.useCallback(j,x)},hn.useContext=function(j){return we.current.useContext(j)},hn.useDebugValue=function(){},hn.useDeferredValue=function(j){return we.current.useDeferredValue(j)},hn.useEffect=function(j,x){return we.current.useEffect(j,x)},hn.useId=function(){return we.current.useId()},hn.useImperativeHandle=function(j,x,C){return we.current.useImperativeHandle(j,x,C)},hn.useInsertionEffect=function(j,x){return we.current.useInsertionEffect(j,x)},hn.useLayoutEffect=function(j,x){return we.current.useLayoutEffect(j,x)},hn.useMemo=function(j,x){return we.current.useMemo(j,x)},hn.useReducer=function(j,x,C){return we.current.useReducer(j,x,C)},hn.useRef=function(j){return we.current.useRef(j)},hn.useState=function(j){return we.current.useState(j)},hn.useSyncExternalStore=function(j,x,C){return we.current.useSyncExternalStore(j,x,C)},hn.useTransition=function(){return we.current.useTransition()},hn.version="18.3.1",hn}var F2;function Tm(){return F2||(F2=1,Kg.exports=Wj()),Kg.exports}var O2;function Gj(){if(O2)return qf;O2=1;var t=Tm(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,b={},A=null,y=null;p!==void 0&&(A=""+p),f.key!==void 0&&(A=""+f.key),f.ref!==void 0&&(y=f.ref);for(m in f)n.call(f,m)&&!o.hasOwnProperty(m)&&(b[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)b[m]===void 0&&(b[m]=f[m]);return{$$typeof:e,type:c,key:A,ref:y,props:b,_owner:a.current}}return qf.Fragment=r,qf.jsx=u,qf.jsxs=u,qf}var M2;function Kj(){return M2||(M2=1,Gg.exports=Gj()),Gg.exports}var i=Kj(),bp={},Qg={exports:{}},Fa={},Zg={exports:{}},Yg={};var B2;function Qj(){return B2||(B2=1,(function(t){function e(se,me){var I=se.length;se.push(me);e:for(;0<I;){var j=I-1>>>1,x=se[j];if(0<a(x,me))se[j]=me,se[I]=x,I=j;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var me=se[0],I=se.pop();if(I!==me){se[0]=I;e:for(var j=0,x=se.length,C=x>>>1;j<C;){var M=2*(j+1)-1,H=se[M],ie=M+1,oe=se[ie];if(0>a(H,I))ie<x&&0>a(oe,H)?(se[j]=oe,se[ie]=I,j=ie):(se[j]=H,se[M]=I,j=M);else if(ie<x&&0>a(oe,I))se[j]=oe,se[ie]=I,j=ie;else break e}}return me}function a(se,me){var I=se.sortIndex-me.sortIndex;return I!==0?I:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,b=null,A=3,y=!1,D=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(se){for(var me=r(p);me!==null;){if(me.callback===null)n(p);else if(me.startTime<=se)n(p),me.sortIndex=me.expirationTime,e(f,me);else break;me=r(p)}}function z(se){if(S=!1,T(se),!D)if(r(f)!==null)D=!0,be(re);else{var me=r(p);me!==null&&we(z,me.startTime-se)}}function re(se,me){D=!1,S&&(S=!1,_(te),te=-1),y=!0;var I=A;try{for(T(me),b=r(f);b!==null&&(!(b.expirationTime>me)||se&&!U());){var j=b.callback;if(typeof j=="function"){b.callback=null,A=b.priorityLevel;var x=j(b.expirationTime<=me);me=t.unstable_now(),typeof x=="function"?b.callback=x:b===r(f)&&n(f),T(me)}else n(f);b=r(f)}if(b!==null)var C=!0;else{var M=r(p);M!==null&&we(z,M.startTime-me),C=!1}return C}finally{b=null,A=I,y=!1}}var ae=!1,W=null,te=-1,Q=5,fe=-1;function U(){return!(t.unstable_now()-fe<Q)}function F(){if(W!==null){var se=t.unstable_now();fe=se;var me=!0;try{me=W(!0,se)}finally{me?X():(ae=!1,W=null)}}else ae=!1}var X;if(typeof O=="function")X=function(){O(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Ne=Y.port2;Y.port1.onmessage=F,X=function(){Ne.postMessage(null)}}else X=function(){E(F,0)};function be(se){W=se,ae||(ae=!0,X())}function we(se,me){te=E(function(){se(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){D||y||(D=!0,be(re))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(f)},t.unstable_next=function(se){switch(A){case 1:case 2:case 3:var me=3;break;default:me=A}var I=A;A=me;try{return se()}finally{A=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var I=A;A=se;try{return me()}finally{A=I}},t.unstable_scheduleCallback=function(se,me,I){var j=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?j+I:j):I=j,se){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=I+x,se={id:m++,callback:me,priorityLevel:se,startTime:I,expirationTime:x,sortIndex:-1},I>j?(se.sortIndex=I,e(p,se),r(f)===null&&se===r(p)&&(S?(_(te),te=-1):S=!0,we(z,I-j))):(se.sortIndex=x,e(f,se),D||y||(D=!0,be(re))),se},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(se){var me=A;return function(){var I=A;A=me;try{return se.apply(this,arguments)}finally{A=I}}}})(Yg)),Yg}var q2;function Zj(){return q2||(q2=1,Zg.exports=Qj()),Zg.exports}var U2;function Yj(){if(U2)return Fa;U2=1;var t=Tm(),e=Zj();function r(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function o(s,l){u(s,l),u(s+"Capture",l)}function u(s,l){for(a[s]=l,s=0;s<l.length;s++)n.add(l[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},b={};function A(s){return f.call(b,s)?!0:f.call(m,s)?!1:p.test(s)?b[s]=!0:(m[s]=!0,!1)}function y(s,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,l,d,g){if(l===null||typeof l>"u"||y(s,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(s,l,d,g,N,k,G){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=k,this.removeEmptyString=G}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];E[l]=new S(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function O(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(_,O);E[l]=new S(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(_,O);E[l]=new S(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(_,O);E[l]=new S(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function T(s,l,d,g){var N=E.hasOwnProperty(l)?E[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,d,N,g)&&(d=null),g||N===null?A(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):N.mustUseProperty?s[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,g=N.attributeNamespace,d===null?s.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,g?s.setAttributeNS(g,l,d):s.setAttribute(l,d))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ae=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),se=Symbol.iterator;function me(s){return s===null||typeof s!="object"?null:(s=se&&s[se]||s["@@iterator"],typeof s=="function"?s:null)}var I=Object.assign,j;function x(s){if(j===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);j=l&&l[1]||""}return`
`+j+s}var C=!1;function M(s,l){if(!s||C)return"";C=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(He){var g=He}Reflect.construct(s,[],l)}else{try{l.call()}catch(He){g=He}s.call(l.prototype)}else{try{throw Error()}catch(He){g=He}s()}}catch(He){if(He&&g&&typeof He.stack=="string"){for(var N=He.stack.split(`
`),k=g.stack.split(`
`),G=N.length-1,ge=k.length-1;1<=G&&0<=ge&&N[G]!==k[ge];)ge--;for(;1<=G&&0<=ge;G--,ge--)if(N[G]!==k[ge]){if(G!==1||ge!==1)do if(G--,ge--,0>ge||N[G]!==k[ge]){var Ae=`
`+N[G].replace(" at new "," at ");return s.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",s.displayName)),Ae}while(1<=G&&0<=ge);break}}}finally{C=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?x(s):""}function H(s){switch(s.tag){case 5:return x(s.type);case 16:return x("Lazy");case 13:return x("Suspense");case 19:return x("SuspenseList");case 0:case 2:case 15:return s=M(s.type,!1),s;case 11:return s=M(s.type.render,!1),s;case 1:return s=M(s.type,!0),s;default:return""}}function ie(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case W:return"Fragment";case ae:return"Portal";case Q:return"Profiler";case te:return"StrictMode";case X:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case U:return(s.displayName||"Context")+".Consumer";case fe:return(s._context.displayName||"Context")+".Provider";case F:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ne:return l=s.displayName||null,l!==null?l:ie(s.type)||"Memo";case be:l=s._payload,s=s._init;try{return ie(s(l))}catch{}}return null}function oe(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ce(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Le(s){var l=Ce(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,k=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return N.call(this)},set:function(G){g=""+G,k.call(this,G)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(G){g=""+G},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ge(s){s._valueTracker||(s._valueTracker=Le(s))}function lt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=Ce(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function tt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ct(s,l){var d=l.checked;return I({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function ee(s,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=ve(l.value!=null?l.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Re(s,l){l=l.checked,l!=null&&T(s,"checked",l,!1)}function We(s,l){Re(s,l);var d=ve(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?rt(s,l.type,d):l.hasOwnProperty("defaultValue")&&rt(s,l.type,ve(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Ee(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function rt(s,l,d){(l!=="number"||tt(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var At=Array.isArray;function Ct(s,l,d,g){if(s=s.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<s.length;d++)N=l.hasOwnProperty("$"+s[d].value),s[d].selected!==N&&(s[d].selected=N),N&&g&&(s[d].defaultSelected=!0)}else{for(d=""+ve(d),l=null,N=0;N<s.length;N++){if(s[N].value===d){s[N].selected=!0,g&&(s[N].defaultSelected=!0);return}l!==null||s[N].disabled||(l=s[N])}l!==null&&(l.selected=!0)}}function ue(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return I({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function he(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(r(92));if(At(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:ve(d)}}function Ie(s,l){var d=ve(l.value),g=ve(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function Ze(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Ve(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Ve(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ot,ft=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,N){MSApp.execUnsafeLocalFunction(function(){return s(l,d,g,N)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ot.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Et(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yn=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(s){yn.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),St[l]=St[s]})});function Cr(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||St.hasOwnProperty(s)&&St[s]?(""+l).trim():l+"px"}function yr(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,N=Cr(d,l[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,N):s[d]=N}}var ur=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wr(s,l){if(l){if(ur[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function Dt(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=null;function ir(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var gr=null,ln=null,mr=null;function Vt(s){if(s=Pc(s)){if(typeof gr!="function")throw Error(r(280));var l=s.stateNode;l&&(l=Su(l),gr(s.stateNode,s.type,l))}}function fr(s){ln?mr?mr.push(s):mr=[s]:ln=s}function ss(){if(ln){var s=ln,l=mr;if(mr=ln=null,Vt(s),l)for(s=0;s<l.length;s++)Vt(l[s])}}function En(s,l){return s(l)}function Js(){}var ys=!1;function Kt(s,l,d){if(ys)return s(l,d);ys=!0;try{return En(s,l,d)}finally{ys=!1,(ln!==null||mr!==null)&&(Js(),ss())}}function _n(s,l){var d=s.stateNode;if(d===null)return null;var g=Su(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var qt=!1;if(c)try{var br={};Object.defineProperty(br,"passive",{get:function(){qt=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{qt=!1}function hr(s,l,d,g,N,k,G,ge,Ae){var He=Array.prototype.slice.call(arguments,3);try{l.apply(d,He)}catch(mt){this.onError(mt)}}var Pt=!1,vr=null,ut=!1,et=null,it={onError:function(s){Pt=!0,vr=s}};function Qe(s,l,d,g,N,k,G,ge,Ae){Pt=!1,vr=null,hr.apply(it,arguments)}function st(s,l,d,g,N,k,G,ge,Ae){if(Qe.apply(this,arguments),Pt){if(Pt){var He=vr;Pt=!1,vr=null}else throw Error(r(198));ut||(ut=!0,et=He)}}function vt(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function wt(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function kt(s){if(vt(s)!==s)throw Error(r(188))}function Lt(s){var l=s.alternate;if(!l){if(l=vt(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,g=l;;){var N=d.return;if(N===null)break;var k=N.alternate;if(k===null){if(g=N.return,g!==null){d=g;continue}break}if(N.child===k.child){for(k=N.child;k;){if(k===d)return kt(N),s;if(k===g)return kt(N),l;k=k.sibling}throw Error(r(188))}if(d.return!==g.return)d=N,g=k;else{for(var G=!1,ge=N.child;ge;){if(ge===d){G=!0,d=N,g=k;break}if(ge===g){G=!0,g=N,d=k;break}ge=ge.sibling}if(!G){for(ge=k.child;ge;){if(ge===d){G=!0,d=k,g=N;break}if(ge===g){G=!0,g=k,d=N;break}ge=ge.sibling}if(!G)throw Error(r(189))}}if(d.alternate!==g)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function It(s){return s=Lt(s),s!==null?$t(s):null}function $t(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=$t(s);if(l!==null)return l;s=s.sibling}return null}var Ht=e.unstable_scheduleCallback,Qt=e.unstable_cancelCallback,Yt=e.unstable_shouldYield,Ar=e.unstable_requestPaint,wr=e.unstable_now,zr=e.unstable_getCurrentPriorityLevel,Pr=e.unstable_ImmediatePriority,tr=e.unstable_UserBlockingPriority,ar=e.unstable_NormalPriority,rr=e.unstable_LowPriority,Nr=e.unstable_IdlePriority,Or=null,Xr=null;function Us(s){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Or,s,void 0,(s.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Gr,ei=Math.log,Gn=Math.LN2;function Gr(s){return s>>>=0,s===0?32:31-(ei(s)/Gn|0)|0}var Fn=64,is=4194304;function bi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function wo(s,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,N=s.suspendedLanes,k=s.pingedLanes,G=d&268435455;if(G!==0){var ge=G&~N;ge!==0?g=bi(ge):(k&=G,k!==0&&(g=bi(k)))}else G=d&~N,G!==0?g=bi(G):k!==0&&(g=bi(k));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,k=l&-l,N>=k||N===16&&(k&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)d=31-bn(l),N=1<<d,g|=s[d],l&=~N;return g}function Ui(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bs(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,N=s.expirationTimes,k=s.pendingLanes;0<k;){var G=31-bn(k),ge=1<<G,Ae=N[G];Ae===-1?((ge&d)===0||(ge&g)!==0)&&(N[G]=Ui(ge,l)):Ae<=l&&(s.expiredLanes|=ge),k&=~ge}}function da(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ol(){var s=Fn;return Fn<<=1,(Fn&4194240)===0&&(Fn=64),s}function zs(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function q(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-bn(l),s[l]=d}function pe(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var N=31-bn(d),k=1<<N;l[N]=0,g[N]=-1,s[N]=-1,d&=~k}}function ye(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-bn(d),N=1<<g;N&l|s[g]&l&&(s[g]|=l),d&=~N}}var Pe=0;function je(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Wt,On,pr,Kn,Ls,us=!1,ws=[],ti=null,$s=null,wi=null,xt=new Map,_t=new Map,zi=[],Ml="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nl(s,l){switch(s){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":xt.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(l.pointerId)}}function ci(s,l,d,g,N,k){return s===null||s.nativeEvent!==k?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:k,targetContainers:[N]},l!==null&&(l=Pc(l),l!==null&&On(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),s)}function Ni(s,l,d,g,N){switch(l){case"focusin":return ti=ci(ti,s,l,d,g,N),!0;case"dragenter":return $s=ci($s,s,l,d,g,N),!0;case"mouseover":return wi=ci(wi,s,l,d,g,N),!0;case"pointerover":var k=N.pointerId;return xt.set(k,ci(xt.get(k)||null,s,l,d,g,N)),!0;case"gotpointercapture":return k=N.pointerId,_t.set(k,ci(_t.get(k)||null,s,l,d,g,N)),!0}return!1}function $n(s){var l=ml(s.target);if(l!==null){var d=vt(l);if(d!==null){if(l=d.tag,l===13){if(l=wt(d),l!==null){s.blockedOn=l,Ls(s.priority,function(){pr(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ds(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=ri(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);_r=g,d.target.dispatchEvent(g),_r=null}else return l=Pc(d),l!==null&&On(l),s.blockedOn=d,!1;l.shift()}return!0}function ui(s,l,d){ds(s)&&d.delete(l)}function $i(){us=!1,ti!==null&&ds(ti)&&(ti=null),$s!==null&&ds($s)&&($s=null),wi!==null&&ds(wi)&&(wi=null),xt.forEach(ui),_t.forEach(ui)}function fa(s,l){s.blockedOn===l&&(s.blockedOn=null,us||(us=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$i)))}function No(s){function l(N){return fa(N,s)}if(0<ws.length){fa(ws[0],s);for(var d=1;d<ws.length;d++){var g=ws[d];g.blockedOn===s&&(g.blockedOn=null)}}for(ti!==null&&fa(ti,s),$s!==null&&fa($s,s),wi!==null&&fa(wi,s),xt.forEach(l),_t.forEach(l),d=0;d<zi.length;d++)g=zi[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<zi.length&&(d=zi[0],d.blockedOn===null);)$n(d),d.blockedOn===null&&zi.shift()}var di=z.ReactCurrentBatchConfig,sl=!0;function Bl(s,l,d,g){var N=Pe,k=di.transition;di.transition=null;try{Pe=1,jo(s,l,d,g)}finally{Pe=N,di.transition=k}}function So(s,l,d,g){var N=Pe,k=di.transition;di.transition=null;try{Pe=4,jo(s,l,d,g)}finally{Pe=N,di.transition=k}}function jo(s,l,d,g){if(sl){var N=ri(s,l,d,g);if(N===null)bu(s,l,g,as,d),nl(s,g);else if(Ni(N,s,l,d,g))g.stopPropagation();else if(nl(s,g),l&4&&-1<Ml.indexOf(s)){for(;N!==null;){var k=Pc(N);if(k!==null&&Wt(k),k=ri(s,l,d,g),k===null&&bu(s,l,g,as,d),k===N)break;N=k}N!==null&&g.stopPropagation()}else bu(s,l,g,null,d)}}var as=null;function ri(s,l,d,g){if(as=null,s=ir(g),s=ml(s),s!==null)if(l=vt(s),l===null)s=null;else if(d=l.tag,d===13){if(s=wt(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return as=s,null}function io(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zr()){case Pr:return 1;case tr:return 4;case ar:case rr:return 16;case Nr:return 536870912;default:return 16}default:return 16}}var Ri=null,Ns=null,Rs=null;function Si(){if(Rs)return Rs;var s,l=Ns,d=l.length,g,N="value"in Ri?Ri.value:Ri.textContent,k=N.length;for(s=0;s<d&&l[s]===N[s];s++);var G=d-s;for(g=1;g<=G&&l[d-g]===N[k-g];g++);return Rs=N.slice(s,1<g?1-g:void 0)}function Ua(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Vi(){return!0}function Pa(){return!1}function ni(s){function l(d,g,N,k,G){this._reactName=d,this._targetInst=N,this.type=g,this.nativeEvent=k,this.target=G,this.currentTarget=null;for(var ge in s)s.hasOwnProperty(ge)&&(d=s[ge],this[ge]=d?d(k):k[ge]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Vi:Pa,this.isPropagationStopped=Pa,this}return I(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),l}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},il=ni(Hi),w=I({},Hi,{view:0,detail:0}),$=ni(w),de,Se,xe,qe=I({},w,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xe&&(xe&&s.type==="mousemove"?(de=s.screenX-xe.screenX,Se=s.screenY-xe.screenY):Se=de=0,xe=s),de)},movementY:function(s){return"movementY"in s?s.movementY:Se}}),$e=ni(qe),gt=I({},qe,{dataTransfer:0}),jt=ni(gt),Xt=I({},w,{relatedTarget:0}),dr=ni(Xt),Er=I({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),dn=ni(Er),pn=I({},Hi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),cn=ni(pn),Vn=I({},Hi,{data:0}),vn=ni(Vn),Rt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function za(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=hi[s])?!!l[s]:!1}function Co(){return za}var vc=I({},w,{key:function(s){if(s.key){var l=Rt[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?fi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(s){return s.type==="keypress"?Ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),al=ni(vc),ql=I({},qe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=ni(ql),ll=I({},w,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),pi=ni(ll),Ul=I({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zl=ni(Ul),fu=I({},qe,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),hu=ni(fu),Di=[9,13,27,32],$a=c&&"CompositionEvent"in window,ao=null;c&&"documentMode"in document&&(ao=document.documentMode);var Ju=c&&"TextEvent"in window&&!ao,ha=c&&(!$a||ao&&8<ao&&11>=ao),cl=" ",xc=!1;function yc(s,l){switch(s){case"keyup":return Di.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _o(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ka=!1;function pa(s,l){switch(s){case"compositionend":return _o(l);case"keypress":return l.which!==32?null:(xc=!0,cl);case"textInput":return s=l.data,s===cl&&xc?null:s;default:return null}}function ma(s,l){if(ka)return s==="compositionend"||!$a&&yc(s,l)?(s=Si(),Rs=Ns=Ri=null,ka=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ha&&l.locale!=="ko"?null:l.data;default:return null}}var ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oo(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!ul[s.type]:l==="textarea"}function Ao(s,l,d,g){fr(g),l=sd(l,"onChange"),0<l.length&&(d=new il("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var Po=null,lo=null;function Ss(s){xu(s,0)}function $l(s){var l=Jl(s);if(lt(l))return s}function co(s,l){if(s==="change")return l}var Va=!1;if(c){var Vl;if(c){var Hl="oninput"in document;if(!Hl){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Hl=typeof bc.oninput=="function"}Vl=Hl}else Vl=!1;Va=Vl&&(!document.documentMode||9<document.documentMode)}function wc(){Po&&(Po.detachEvent("onpropertychange",ko),lo=Po=null)}function ko(s){if(s.propertyName==="value"&&$l(lo)){var l=[];Ao(l,lo,s,ir(s)),Kt(Ss,l)}}function dl(s,l,d){s==="focusin"?(wc(),Po=l,lo=d,Po.attachEvent("onpropertychange",ko)):s==="focusout"&&wc()}function fl(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $l(lo)}function Wl(s,l){if(s==="click")return $l(l)}function hl(s,l){if(s==="input"||s==="change")return $l(l)}function Gl(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var fs=typeof Object.is=="function"?Object.is:Gl;function Wi(s,l){if(fs(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var N=d[g];if(!f.call(l,N)||!fs(s[N],l[N]))return!1}return!0}function wn(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ln(s,l){var d=wn(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wn(d)}}function hs(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?hs(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Ds(){for(var s=window,l=tt();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=tt(s.document)}return l}function Ha(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function pu(s){var l=Ds(),d=s.focusedElem,g=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&hs(d.ownerDocument.documentElement,d)){if(g!==null&&Ha(d)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var N=d.textContent.length,k=Math.min(g.start,N);g=g.end===void 0?k:Math.min(g.end,N),!s.extend&&k>g&&(N=g,g=k,k=N),N=Ln(d,k);var G=Ln(d,g);N&&G&&(s.rangeCount!==1||s.anchorNode!==N.node||s.anchorOffset!==N.offset||s.focusNode!==G.node||s.focusOffset!==G.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),s.removeAllRanges(),k>g?(s.addRange(l),s.extend(G.node,G.offset)):(l.setEnd(G.node,G.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Nc=c&&"documentMode"in document&&11>=document.documentMode,To=null,ed=null,Sc=null,td=!1;function gf(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;td||To==null||To!==tt(g)||(g=To,"selectionStart"in g&&Ha(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Sc&&Wi(Sc,g)||(Sc=g,g=sd(ed,"onSelect"),0<g.length&&(l=new il("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=To)))}function mu(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Kl={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},Ql={},vf={};c&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function gu(s){if(Ql[s])return Ql[s];if(!Kl[s])return s;var l=Kl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in vf)return Ql[s]=l[d];return s}var xf=gu("animationend"),yf=gu("animationiteration"),bf=gu("animationstart"),wf=gu("transitionend"),Nf=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(s,l){Nf.set(s,l),o(l,[s])}for(var jc=0;jc<Sf.length;jc++){var Ii=Sf[jc],Ta=Ii.toLowerCase(),rd=Ii[0].toUpperCase()+Ii.slice(1);uo(Ta,"on"+rd)}uo(xf,"onAnimationEnd"),uo(yf,"onAnimationIteration"),uo(bf,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(wf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function vu(s,l,d){var g=s.type||"unknown-event";s.currentTarget=d,st(g,l,void 0,s),s.currentTarget=null}function xu(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],N=g.event;g=g.listeners;e:{var k=void 0;if(l)for(var G=g.length-1;0<=G;G--){var ge=g[G],Ae=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Ae!==k&&N.isPropagationStopped())break e;vu(N,ge,He),k=Ae}else for(G=0;G<g.length;G++){if(ge=g[G],Ae=ge.instance,He=ge.currentTarget,ge=ge.listener,Ae!==k&&N.isPropagationStopped())break e;vu(N,ge,He),k=Ae}}}if(ut)throw s=et,ut=!1,et=null,s}function Mn(s,l){var d=l[Ki];d===void 0&&(d=l[Ki]=new Set);var g=s+"__bubble";d.has(g)||(yu(l,s,2,!1),d.add(g))}function nd(s,l,d){var g=0;l&&(g|=4),yu(d,s,g,l)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Zl(s){if(!s[Cc]){s[Cc]=!0,n.forEach(function(d){d!=="selectionchange"&&(qh.has(d)||nd(d,!1,s),nd(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Cc]||(l[Cc]=!0,nd("selectionchange",!1,l))}}function yu(s,l,d,g){switch(io(l)){case 1:var N=Bl;break;case 4:N=So;break;default:N=jo}d=N.bind(null,l,d,s),N=void 0,!qt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?s.addEventListener(l,d,{capture:!0,passive:N}):s.addEventListener(l,d,!0):N!==void 0?s.addEventListener(l,d,{passive:N}):s.addEventListener(l,d,!1)}function bu(s,l,d,g,N){var k=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var G=g.tag;if(G===3||G===4){var ge=g.stateNode.containerInfo;if(ge===N||ge.nodeType===8&&ge.parentNode===N)break;if(G===4)for(G=g.return;G!==null;){var Ae=G.tag;if((Ae===3||Ae===4)&&(Ae=G.stateNode.containerInfo,Ae===N||Ae.nodeType===8&&Ae.parentNode===N))return;G=G.return}for(;ge!==null;){if(G=ml(ge),G===null)return;if(Ae=G.tag,Ae===5||Ae===6){g=k=G;continue e}ge=ge.parentNode}}g=g.return}Kt(function(){var He=k,mt=ir(d),yt=[];e:{var ht=Nf.get(s);if(ht!==void 0){var Mt=il,Jt=s;switch(s){case"keypress":if(Ua(d)===0)break e;case"keydown":case"keyup":Mt=al;break;case"focusin":Jt="focus",Mt=dr;break;case"focusout":Jt="blur",Mt=dr;break;case"beforeblur":case"afterblur":Mt=dr;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=jt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=pi;break;case xf:case yf:case bf:Mt=dn;break;case wf:Mt=zl;break;case"scroll":Mt=$;break;case"wheel":Mt=hu;break;case"copy":case"cut":case"paste":Mt=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=ol}var nr=(l&4)!==0,Ws=!nr&&s==="scroll",Me=nr?ht!==null?ht+"Capture":null:ht;nr=[];for(var Te=He,Ue;Te!==null;){Ue=Te;var Nt=Ue.stateNode;if(Ue.tag===5&&Nt!==null&&(Ue=Nt,Me!==null&&(Nt=_n(Te,Me),Nt!=null&&nr.push(wu(Te,Nt,Ue)))),Ws)break;Te=Te.return}0<nr.length&&(ht=new Mt(ht,Jt,null,d,mt),yt.push({event:ht,listeners:nr}))}}if((l&7)===0){e:{if(ht=s==="mouseover"||s==="pointerover",Mt=s==="mouseout"||s==="pointerout",ht&&d!==_r&&(Jt=d.relatedTarget||d.fromElement)&&(ml(Jt)||Jt[ji]))break e;if((Mt||ht)&&(ht=mt.window===mt?mt:(ht=mt.ownerDocument)?ht.defaultView||ht.parentWindow:window,Mt?(Jt=d.relatedTarget||d.toElement,Mt=He,Jt=Jt?ml(Jt):null,Jt!==null&&(Ws=vt(Jt),Jt!==Ws||Jt.tag!==5&&Jt.tag!==6)&&(Jt=null)):(Mt=null,Jt=He),Mt!==Jt)){if(nr=$e,Nt="onMouseLeave",Me="onMouseEnter",Te="mouse",(s==="pointerout"||s==="pointerover")&&(nr=ol,Nt="onPointerLeave",Me="onPointerEnter",Te="pointer"),Ws=Mt==null?ht:Jl(Mt),Ue=Jt==null?ht:Jl(Jt),ht=new nr(Nt,Te+"leave",Mt,d,mt),ht.target=Ws,ht.relatedTarget=Ue,Nt=null,ml(mt)===He&&(nr=new nr(Me,Te+"enter",Jt,d,mt),nr.target=Ue,nr.relatedTarget=Ws,Nt=nr),Ws=Nt,Mt&&Jt)t:{for(nr=Mt,Me=Jt,Te=0,Ue=nr;Ue;Ue=Yl(Ue))Te++;for(Ue=0,Nt=Me;Nt;Nt=Yl(Nt))Ue++;for(;0<Te-Ue;)nr=Yl(nr),Te--;for(;0<Ue-Te;)Me=Yl(Me),Ue--;for(;Te--;){if(nr===Me||Me!==null&&nr===Me.alternate)break t;nr=Yl(nr),Me=Yl(Me)}nr=null}else nr=null;Mt!==null&&Uh(yt,ht,Mt,nr,!1),Jt!==null&&Ws!==null&&Uh(yt,Ws,Jt,nr,!0)}}e:{if(ht=He?Jl(He):window,Mt=ht.nodeName&&ht.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&ht.type==="file")var lr=co;else if(oo(ht))if(Va)lr=hl;else{lr=fl;var Sr=dl}else(Mt=ht.nodeName)&&Mt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(lr=Wl);if(lr&&(lr=lr(s,He))){Ao(yt,lr,d,mt);break e}Sr&&Sr(s,ht,He),s==="focusout"&&(Sr=ht._wrapperState)&&Sr.controlled&&ht.type==="number"&&rt(ht,"number",ht.value)}switch(Sr=He?Jl(He):window,s){case"focusin":(oo(Sr)||Sr.contentEditable==="true")&&(To=Sr,ed=He,Sc=null);break;case"focusout":Sc=ed=To=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,gf(yt,d,mt);break;case"selectionchange":if(Nc)break;case"keydown":case"keyup":gf(yt,d,mt)}var jr;if($a)e:{switch(s){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else ka?yc(s,d)&&(Mr="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Mr="onCompositionStart");Mr&&(ha&&d.locale!=="ko"&&(ka||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&ka&&(jr=Si()):(Ri=mt,Ns="value"in Ri?Ri.value:Ri.textContent,ka=!0)),Sr=sd(He,Mr),0<Sr.length&&(Mr=new vn(Mr,s,null,d,mt),yt.push({event:Mr,listeners:Sr}),jr?Mr.data=jr:(jr=_o(d),jr!==null&&(Mr.data=jr)))),(jr=Ju?pa(s,d):ma(s,d))&&(He=sd(He,"onBeforeInput"),0<He.length&&(mt=new vn("onBeforeInput","beforeinput",null,d,mt),yt.push({event:mt,listeners:He}),mt.data=jr))}xu(yt,l)})}function wu(s,l,d){return{instance:s,listener:l,currentTarget:d}}function sd(s,l){for(var d=l+"Capture",g=[];s!==null;){var N=s,k=N.stateNode;N.tag===5&&k!==null&&(N=k,k=_n(s,d),k!=null&&g.unshift(wu(s,k,N)),k=_n(s,l),k!=null&&g.push(wu(s,k,N))),s=s.return}return g}function Yl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Uh(s,l,d,g,N){for(var k=l._reactName,G=[];d!==null&&d!==g;){var ge=d,Ae=ge.alternate,He=ge.stateNode;if(Ae!==null&&Ae===g)break;ge.tag===5&&He!==null&&(ge=He,N?(Ae=_n(d,k),Ae!=null&&G.unshift(wu(d,Ae,ge))):N||(Ae=_n(d,k),Ae!=null&&G.push(wu(d,Ae,ge)))),d=d.return}G.length!==0&&s.push({event:l,listeners:G})}var og=/\r\n?/g,lg=/\u0000|\uFFFD/g;function zh(s){return(typeof s=="string"?s:""+s).replace(og,`
`).replace(lg,"")}function id(s,l,d){if(l=zh(l),zh(s)!==l&&d)throw Error(r(425))}function _c(){}var Nu=null,Xl=null;function jf(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cf=typeof setTimeout=="function"?setTimeout:void 0,$h=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,cg=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(s){return Vh.resolve(null).then(s).catch(ug)}:Cf;function ug(s){setTimeout(function(){throw s})}function _f(s,l){var d=l,g=0;do{var N=d.nextSibling;if(s.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(g===0){s.removeChild(N),No(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=N}while(d);No(l)}function Fi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Ea(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),fo="__reactFiber$"+Gi,Ac="__reactProps$"+Gi,ji="__reactContainer$"+Gi,Ki="__reactEvents$"+Gi,dg="__reactListeners$"+Gi,fg="__reactHandles$"+Gi;function ml(s){var l=s[fo];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ji]||d[fo]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=Ea(s);s!==null;){if(d=s[fo])return d;s=Ea(s)}return l}s=d,d=s.parentNode}return null}function Pc(s){return s=s[fo]||s[ji],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Jl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function Su(s){return s[Ac]||null}var Af=[],Eo=-1;function Wa(s){return{current:s}}function Tn(s){0>Eo||(s.current=Af[Eo],Af[Eo]=null,Eo--)}function Rn(s,l){Eo++,Af[Eo]=s.current,s.current=l}var gl={},mi=Wa(gl),Qi=Wa(!1),ec=gl;function kc(s,l){var d=s.type.contextTypes;if(!d)return gl;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},k;for(k in d)N[k]=l[k];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=N),N}function Zi(s){return s=s.childContextTypes,s!=null}function ad(){Tn(Qi),Tn(mi)}function Hh(s,l,d){if(mi.current!==gl)throw Error(r(168));Rn(mi,l),Rn(Qi,d)}function Pf(s,l,d){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(r(108,oe(s)||"Unknown",N));return I({},d,g)}function tc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||gl,ec=mi.current,Rn(mi,s),Rn(Qi,Qi.current),!0}function Wh(s,l,d){var g=s.stateNode;if(!g)throw Error(r(169));d?(s=Pf(s,l,ec),g.__reactInternalMemoizedMergedChildContext=s,Tn(Qi),Tn(mi),Rn(mi,s)):Tn(Qi),Rn(Qi,d)}var Lo=null,ju=!1,h=!1;function v(s){Lo===null?Lo=[s]:Lo.push(s)}function P(s){ju=!0,v(s)}function R(){if(!h&&Lo!==null){h=!0;var s=0,l=Pe;try{var d=Lo;for(Pe=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Lo=null,ju=!1}catch(N){throw Lo!==null&&(Lo=Lo.slice(s+1)),Ht(Pr,R),N}finally{Pe=l,h=!1}}return null}var V=[],K=0,Z=null,J=0,ne=[],le=0,_e=null,Fe=1,ce="";function ke(s,l){V[K++]=J,V[K++]=Z,Z=s,J=l}function De(s,l,d){ne[le++]=Fe,ne[le++]=ce,ne[le++]=_e,_e=s;var g=Fe;s=ce;var N=32-bn(g)-1;g&=~(1<<N),d+=1;var k=32-bn(l)+N;if(30<k){var G=N-N%5;k=(g&(1<<G)-1).toString(32),g>>=G,N-=G,Fe=1<<32-bn(l)+N|d<<N|g,ce=k+s}else Fe=1<<k|d<<N|g,ce=s}function Xe(s){s.return!==null&&(ke(s,1),De(s,1,0))}function Be(s){for(;s===Z;)Z=V[--K],V[K]=null,J=V[--K],V[K]=null;for(;s===_e;)_e=ne[--le],ne[le]=null,ce=ne[--le],ne[le]=null,Fe=ne[--le],ne[le]=null}var Ke=null,Ye=null,nt=!1,at=null;function or(s,l){var d=vo(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function Ut(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Ke=s,Ye=Fi(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Ke=s,Ye=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=_e!==null?{id:Fe,overflow:ce}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=vo(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,Ke=s,Ye=null,!0):!1;default:return!1}}function Vr(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Zt(s){if(nt){var l=Ye;if(l){var d=l;if(!Ut(s,l)){if(Vr(s))throw Error(r(418));l=Fi(d.nextSibling);var g=Ke;l&&Ut(s,l)?or(g,d):(s.flags=s.flags&-4097|2,nt=!1,Ke=s)}}else{if(Vr(s))throw Error(r(418));s.flags=s.flags&-4097|2,nt=!1,Ke=s}}}function fn(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ke=s}function ps(s){if(s!==Ke)return!1;if(!nt)return fn(s),nt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!jf(s.type,s.memoizedProps)),l&&(l=Ye)){if(Vr(s))throw Kr(),Error(r(418));for(;l;)or(s,l),l=Fi(l.nextSibling)}if(fn(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Ye=Fi(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Ye=null}}else Ye=Ke?Fi(s.stateNode.nextSibling):null;return!0}function Kr(){for(var s=Ye;s;)s=Fi(s.nextSibling)}function zt(){Ye=Ke=null,nt=!1}function Tt(s){at===null?at=[s]:at.push(s)}var js=z.ReactCurrentBatchConfig;function Lr(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(r(309));var g=d.stateNode}if(!g)throw Error(r(147,s));var N=g,k=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===k?l.ref:(l=function(G){var ge=N.refs;G===null?delete ge[k]:ge[k]=G},l._stringRef=k,l)}if(typeof s!="string")throw Error(r(284));if(!d._owner)throw Error(r(290,s))}return s}function un(s,l){throw s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Hn(s){var l=s._init;return l(s._payload)}function si(s){function l(Me,Te){if(s){var Ue=Me.deletions;Ue===null?(Me.deletions=[Te],Me.flags|=16):Ue.push(Te)}}function d(Me,Te){if(!s)return null;for(;Te!==null;)l(Me,Te),Te=Te.sibling;return null}function g(Me,Te){for(Me=new Map;Te!==null;)Te.key!==null?Me.set(Te.key,Te):Me.set(Te.index,Te),Te=Te.sibling;return Me}function N(Me,Te){return Me=Bc(Me,Te),Me.index=0,Me.sibling=null,Me}function k(Me,Te,Ue){return Me.index=Ue,s?(Ue=Me.alternate,Ue!==null?(Ue=Ue.index,Ue<Te?(Me.flags|=2,Te):Ue):(Me.flags|=2,Te)):(Me.flags|=1048576,Te)}function G(Me){return s&&Me.alternate===null&&(Me.flags|=2),Me}function ge(Me,Te,Ue,Nt){return Te===null||Te.tag!==6?(Te=Ug(Ue,Me.mode,Nt),Te.return=Me,Te):(Te=N(Te,Ue),Te.return=Me,Te)}function Ae(Me,Te,Ue,Nt){var lr=Ue.type;return lr===W?mt(Me,Te,Ue.props.children,Nt,Ue.key):Te!==null&&(Te.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===be&&Hn(lr)===Te.type)?(Nt=N(Te,Ue.props),Nt.ref=Lr(Me,Te,Ue),Nt.return=Me,Nt):(Nt=fp(Ue.type,Ue.key,Ue.props,null,Me.mode,Nt),Nt.ref=Lr(Me,Te,Ue),Nt.return=Me,Nt)}function He(Me,Te,Ue,Nt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Ue.containerInfo||Te.stateNode.implementation!==Ue.implementation?(Te=zg(Ue,Me.mode,Nt),Te.return=Me,Te):(Te=N(Te,Ue.children||[]),Te.return=Me,Te)}function mt(Me,Te,Ue,Nt,lr){return Te===null||Te.tag!==7?(Te=Lu(Ue,Me.mode,Nt,lr),Te.return=Me,Te):(Te=N(Te,Ue),Te.return=Me,Te)}function yt(Me,Te,Ue){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=Ug(""+Te,Me.mode,Ue),Te.return=Me,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case re:return Ue=fp(Te.type,Te.key,Te.props,null,Me.mode,Ue),Ue.ref=Lr(Me,null,Te),Ue.return=Me,Ue;case ae:return Te=zg(Te,Me.mode,Ue),Te.return=Me,Te;case be:var Nt=Te._init;return yt(Me,Nt(Te._payload),Ue)}if(At(Te)||me(Te))return Te=Lu(Te,Me.mode,Ue,null),Te.return=Me,Te;un(Me,Te)}return null}function ht(Me,Te,Ue,Nt){var lr=Te!==null?Te.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return lr!==null?null:ge(Me,Te,""+Ue,Nt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case re:return Ue.key===lr?Ae(Me,Te,Ue,Nt):null;case ae:return Ue.key===lr?He(Me,Te,Ue,Nt):null;case be:return lr=Ue._init,ht(Me,Te,lr(Ue._payload),Nt)}if(At(Ue)||me(Ue))return lr!==null?null:mt(Me,Te,Ue,Nt,null);un(Me,Ue)}return null}function Mt(Me,Te,Ue,Nt,lr){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Me=Me.get(Ue)||null,ge(Te,Me,""+Nt,lr);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case re:return Me=Me.get(Nt.key===null?Ue:Nt.key)||null,Ae(Te,Me,Nt,lr);case ae:return Me=Me.get(Nt.key===null?Ue:Nt.key)||null,He(Te,Me,Nt,lr);case be:var Sr=Nt._init;return Mt(Me,Te,Ue,Sr(Nt._payload),lr)}if(At(Nt)||me(Nt))return Me=Me.get(Ue)||null,mt(Te,Me,Nt,lr,null);un(Te,Nt)}return null}function Jt(Me,Te,Ue,Nt){for(var lr=null,Sr=null,jr=Te,Mr=Te=0,ki=null;jr!==null&&Mr<Ue.length;Mr++){jr.index>Mr?(ki=jr,jr=null):ki=jr.sibling;var An=ht(Me,jr,Ue[Mr],Nt);if(An===null){jr===null&&(jr=ki);break}s&&jr&&An.alternate===null&&l(Me,jr),Te=k(An,Te,Mr),Sr===null?lr=An:Sr.sibling=An,Sr=An,jr=ki}if(Mr===Ue.length)return d(Me,jr),nt&&ke(Me,Mr),lr;if(jr===null){for(;Mr<Ue.length;Mr++)jr=yt(Me,Ue[Mr],Nt),jr!==null&&(Te=k(jr,Te,Mr),Sr===null?lr=jr:Sr.sibling=jr,Sr=jr);return nt&&ke(Me,Mr),lr}for(jr=g(Me,jr);Mr<Ue.length;Mr++)ki=Mt(jr,Me,Mr,Ue[Mr],Nt),ki!==null&&(s&&ki.alternate!==null&&jr.delete(ki.key===null?Mr:ki.key),Te=k(ki,Te,Mr),Sr===null?lr=ki:Sr.sibling=ki,Sr=ki);return s&&jr.forEach(function(qc){return l(Me,qc)}),nt&&ke(Me,Mr),lr}function nr(Me,Te,Ue,Nt){var lr=me(Ue);if(typeof lr!="function")throw Error(r(150));if(Ue=lr.call(Ue),Ue==null)throw Error(r(151));for(var Sr=lr=null,jr=Te,Mr=Te=0,ki=null,An=Ue.next();jr!==null&&!An.done;Mr++,An=Ue.next()){jr.index>Mr?(ki=jr,jr=null):ki=jr.sibling;var qc=ht(Me,jr,An.value,Nt);if(qc===null){jr===null&&(jr=ki);break}s&&jr&&qc.alternate===null&&l(Me,jr),Te=k(qc,Te,Mr),Sr===null?lr=qc:Sr.sibling=qc,Sr=qc,jr=ki}if(An.done)return d(Me,jr),nt&&ke(Me,Mr),lr;if(jr===null){for(;!An.done;Mr++,An=Ue.next())An=yt(Me,An.value,Nt),An!==null&&(Te=k(An,Te,Mr),Sr===null?lr=An:Sr.sibling=An,Sr=An);return nt&&ke(Me,Mr),lr}for(jr=g(Me,jr);!An.done;Mr++,An=Ue.next())An=Mt(jr,Me,Mr,An.value,Nt),An!==null&&(s&&An.alternate!==null&&jr.delete(An.key===null?Mr:An.key),Te=k(An,Te,Mr),Sr===null?lr=An:Sr.sibling=An,Sr=An);return s&&jr.forEach(function(Vj){return l(Me,Vj)}),nt&&ke(Me,Mr),lr}function Ws(Me,Te,Ue,Nt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===W&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case re:e:{for(var lr=Ue.key,Sr=Te;Sr!==null;){if(Sr.key===lr){if(lr=Ue.type,lr===W){if(Sr.tag===7){d(Me,Sr.sibling),Te=N(Sr,Ue.props.children),Te.return=Me,Me=Te;break e}}else if(Sr.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===be&&Hn(lr)===Sr.type){d(Me,Sr.sibling),Te=N(Sr,Ue.props),Te.ref=Lr(Me,Sr,Ue),Te.return=Me,Me=Te;break e}d(Me,Sr);break}else l(Me,Sr);Sr=Sr.sibling}Ue.type===W?(Te=Lu(Ue.props.children,Me.mode,Nt,Ue.key),Te.return=Me,Me=Te):(Nt=fp(Ue.type,Ue.key,Ue.props,null,Me.mode,Nt),Nt.ref=Lr(Me,Te,Ue),Nt.return=Me,Me=Nt)}return G(Me);case ae:e:{for(Sr=Ue.key;Te!==null;){if(Te.key===Sr)if(Te.tag===4&&Te.stateNode.containerInfo===Ue.containerInfo&&Te.stateNode.implementation===Ue.implementation){d(Me,Te.sibling),Te=N(Te,Ue.children||[]),Te.return=Me,Me=Te;break e}else{d(Me,Te);break}else l(Me,Te);Te=Te.sibling}Te=zg(Ue,Me.mode,Nt),Te.return=Me,Me=Te}return G(Me);case be:return Sr=Ue._init,Ws(Me,Te,Sr(Ue._payload),Nt)}if(At(Ue))return Jt(Me,Te,Ue,Nt);if(me(Ue))return nr(Me,Te,Ue,Nt);un(Me,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,Te!==null&&Te.tag===6?(d(Me,Te.sibling),Te=N(Te,Ue),Te.return=Me,Me=Te):(d(Me,Te),Te=Ug(Ue,Me.mode,Nt),Te.return=Me,Me=Te),G(Me)):d(Me,Te)}return Ws}var Is=si(!0),os=si(!1),Vs=Wa(null),ii=null,Jn=null,mn=null;function Nn(){mn=Jn=ii=null}function es(s){var l=Vs.current;Tn(Vs),s._currentValue=l}function Sn(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function ms(s,l){ii=s,mn=Jn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Ra=!0),s.firstContext=null)}function gs(s){var l=s._currentValue;if(mn!==s)if(s={context:s,memoizedValue:l,next:null},Jn===null){if(ii===null)throw Error(r(308));Jn=s,ii.dependencies={lanes:0,firstContext:s}}else Jn=Jn.next=s;return l}var Bn=null;function Ci(s){Bn===null?Bn=[s]:Bn.push(s)}function Dn(s,l,d,g){var N=l.interleaved;return N===null?(d.next=d,Ci(l)):(d.next=N.next,N.next=d),l.interleaved=d,qn(s,g)}function qn(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Fs=!1;function gi(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yi(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Cs(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function _s(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(jn&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,qn(s,d)}return N=g.interleaved,N===null?(l.next=l,Ci(g)):(l.next=N.next,N.next=l),g.interleaved=l,qn(s,d)}function _i(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,ye(s,d)}}function Un(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var N=null,k=null;if(d=d.firstBaseUpdate,d!==null){do{var G={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};k===null?N=k=G:k=k.next=G,d=d.next}while(d!==null);k===null?N=k=l:k=k.next=l}else N=k=l;d={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:k,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Ai(s,l,d,g){var N=s.updateQueue;Fs=!1;var k=N.firstBaseUpdate,G=N.lastBaseUpdate,ge=N.shared.pending;if(ge!==null){N.shared.pending=null;var Ae=ge,He=Ae.next;Ae.next=null,G===null?k=He:G.next=He,G=Ae;var mt=s.alternate;mt!==null&&(mt=mt.updateQueue,ge=mt.lastBaseUpdate,ge!==G&&(ge===null?mt.firstBaseUpdate=He:ge.next=He,mt.lastBaseUpdate=Ae))}if(k!==null){var yt=N.baseState;G=0,mt=He=Ae=null,ge=k;do{var ht=ge.lane,Mt=ge.eventTime;if((g&ht)===ht){mt!==null&&(mt=mt.next={eventTime:Mt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Jt=s,nr=ge;switch(ht=l,Mt=d,nr.tag){case 1:if(Jt=nr.payload,typeof Jt=="function"){yt=Jt.call(Mt,yt,ht);break e}yt=Jt;break e;case 3:Jt.flags=Jt.flags&-65537|128;case 0:if(Jt=nr.payload,ht=typeof Jt=="function"?Jt.call(Mt,yt,ht):Jt,ht==null)break e;yt=I({},yt,ht);break e;case 2:Fs=!0}}ge.callback!==null&&ge.lane!==0&&(s.flags|=64,ht=N.effects,ht===null?N.effects=[ge]:ht.push(ge))}else Mt={eventTime:Mt,lane:ht,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},mt===null?(He=mt=Mt,Ae=yt):mt=mt.next=Mt,G|=ht;if(ge=ge.next,ge===null){if(ge=N.shared.pending,ge===null)break;ht=ge,ge=ht.next,ht.next=null,N.lastBaseUpdate=ht,N.shared.pending=null}}while(!0);if(mt===null&&(Ae=yt),N.baseState=Ae,N.firstBaseUpdate=He,N.lastBaseUpdate=mt,l=N.shared.interleaved,l!==null){N=l;do G|=N.lane,N=N.next;while(N!==l)}else k===null&&(N.shared.lanes=0);Pu|=G,s.lanes=G,s.memoizedState=yt}}function La(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],N=g.callback;if(N!==null){if(g.callback=null,g=d,typeof N!="function")throw Error(r(191,N));N.call(g)}}}var Ga={},ai=Wa(Ga),As=Wa(Ga),vl=Wa(Ga);function Ro(s){if(s===Ga)throw Error(r(174));return s}function Tc(s,l){switch(Rn(vl,l),Rn(As,s),Rn(ai,Ga),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ze(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=ze(l,s)}Tn(ai),Rn(ai,l)}function ho(){Tn(ai),Tn(As),Tn(vl)}function Gh(s){Ro(vl.current);var l=Ro(ai.current),d=ze(l,s.type);l!==d&&(Rn(As,s),Rn(ai,d))}function kf(s){As.current===s&&(Tn(ai),Tn(As))}var Qn=Wa(0);function Ka(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Tf=[];function Ef(){for(var s=0;s<Tf.length;s++)Tf[s]._workInProgressVersionPrimary=null;Tf.length=0}var od=z.ReactCurrentDispatcher,ld=z.ReactCurrentBatchConfig,po=0,ts=null,Os=null,Ps=null,Ec=!1,Do=!1,Lc=0,hg=0;function Hs(){throw Error(r(321))}function cd(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!fs(s[d],l[d]))return!1;return!0}function Cu(s,l,d,g,N,k){if(po=k,ts=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,od.current=s===null||s.memoizedState===null?gj:vj,s=d(g,N),Do){k=0;do{if(Do=!1,Lc=0,25<=k)throw Error(r(301));k+=1,Ps=Os=null,l.updateQueue=null,od.current=xj,s=d(g,N)}while(Do)}if(od.current=Xh,l=Os!==null&&Os.next!==null,po=0,Ps=Os=ts=null,Ec=!1,l)throw Error(r(300));return s}function mo(){var s=Lc!==0;return Lc=0,s}function Qa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?ts.memoizedState=Ps=s:Ps=Ps.next=s,Ps}function ga(){if(Os===null){var s=ts.alternate;s=s!==null?s.memoizedState:null}else s=Os.next;var l=Ps===null?ts.memoizedState:Ps.next;if(l!==null)Ps=l,Os=s;else{if(s===null)throw Error(r(310));Os=s,s={memoizedState:Os.memoizedState,baseState:Os.baseState,baseQueue:Os.baseQueue,queue:Os.queue,next:null},Ps===null?ts.memoizedState=Ps=s:Ps=Ps.next=s}return Ps}function _u(s,l){return typeof l=="function"?l(s):l}function ud(s){var l=ga(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var g=Os,N=g.baseQueue,k=d.pending;if(k!==null){if(N!==null){var G=N.next;N.next=k.next,k.next=G}g.baseQueue=N=k,d.pending=null}if(N!==null){k=N.next,g=g.baseState;var ge=G=null,Ae=null,He=k;do{var mt=He.lane;if((po&mt)===mt)Ae!==null&&(Ae=Ae.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),g=He.hasEagerState?He.eagerState:s(g,He.action);else{var yt={lane:mt,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Ae===null?(ge=Ae=yt,G=g):Ae=Ae.next=yt,ts.lanes|=mt,Pu|=mt}He=He.next}while(He!==null&&He!==k);Ae===null?G=g:Ae.next=ge,fs(g,l.memoizedState)||(Ra=!0),l.memoizedState=g,l.baseState=G,l.baseQueue=Ae,d.lastRenderedState=g}if(s=d.interleaved,s!==null){N=s;do k=N.lane,ts.lanes|=k,Pu|=k,N=N.next;while(N!==s)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function xl(s){var l=ga(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var g=d.dispatch,N=d.pending,k=l.memoizedState;if(N!==null){d.pending=null;var G=N=N.next;do k=s(k,G.action),G=G.next;while(G!==N);fs(k,l.memoizedState)||(Ra=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),d.lastRenderedState=k}return[k,g]}function Kh(){}function Lf(s,l){var d=ts,g=ga(),N=l(),k=!fs(g.memoizedState,N);if(k&&(g.memoizedState=N,Ra=!0),g=g.queue,hd(Zh.bind(null,d,g,s),[s]),g.getSnapshot!==l||k||Ps!==null&&Ps.memoizedState.tag&1){if(d.flags|=2048,va(9,Rf.bind(null,d,g,N,l),void 0,null),Pi===null)throw Error(r(349));(po&30)!==0||Qh(d,l,N)}return N}function Qh(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=ts.updateQueue,l===null?(l={lastEffect:null,stores:null},ts.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Rf(s,l,d,g){l.value=d,l.getSnapshot=g,Rc(l)&&dd(s)}function Zh(s,l,d){return d(function(){Rc(l)&&dd(s)})}function Rc(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!fs(s,d)}catch{return!0}}function dd(s){var l=qn(s,1);l!==null&&Bo(l,s,1,-1)}function Au(s){var l=Qa();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:s},l.queue=s,s=s.dispatch=mj.bind(null,ts,s),[l.memoizedState,s]}function va(s,l,d,g){return s={tag:s,create:l,destroy:d,deps:g,next:null},l=ts.updateQueue,l===null?(l={lastEffect:null,stores:null},ts.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s)),s}function Io(){return ga().memoizedState}function Za(s,l,d,g){var N=Qa();ts.flags|=s,N.memoizedState=va(1|l,d,void 0,g===void 0?null:g)}function rc(s,l,d,g){var N=ga();g=g===void 0?null:g;var k=void 0;if(Os!==null){var G=Os.memoizedState;if(k=G.destroy,g!==null&&cd(g,G.deps)){N.memoizedState=va(l,d,k,g);return}}ts.flags|=s,N.memoizedState=va(1|l,d,k,g)}function fd(s,l){return Za(8390656,8,s,l)}function hd(s,l){return rc(2048,8,s,l)}function Yh(s,l){return rc(4,2,s,l)}function pd(s,l){return rc(4,4,s,l)}function md(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function R1(s,l,d){return d=d!=null?d.concat([s]):null,rc(4,4,md.bind(null,l,s),d)}function pg(){}function D1(s,l){var d=ga();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&cd(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function I1(s,l){var d=ga();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&cd(l,g[1])?g[0]:(s=s(),d.memoizedState=[s,l],s)}function F1(s,l,d){return(po&21)===0?(s.baseState&&(s.baseState=!1,Ra=!0),s.memoizedState=d):(fs(d,l)||(d=Ol(),ts.lanes|=d,Pu|=d,s.baseState=!0),l)}function hj(s,l){var d=Pe;Pe=d!==0&&4>d?d:4,s(!0);var g=ld.transition;ld.transition={};try{s(!1),l()}finally{Pe=d,ld.transition=g}}function O1(){return ga().memoizedState}function pj(s,l,d){var g=Oc(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},M1(s))B1(l,d);else if(d=Dn(s,l,d,g),d!==null){var N=ya();Bo(d,s,g,N),q1(d,l,g)}}function mj(s,l,d){var g=Oc(s),N={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(M1(s))B1(l,N);else{var k=s.alternate;if(s.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var G=l.lastRenderedState,ge=k(G,d);if(N.hasEagerState=!0,N.eagerState=ge,fs(ge,G)){var Ae=l.interleaved;Ae===null?(N.next=N,Ci(l)):(N.next=Ae.next,Ae.next=N),l.interleaved=N;return}}catch{}d=Dn(s,l,N,g),d!==null&&(N=ya(),Bo(d,s,g,N),q1(d,l,g))}}function M1(s){var l=s.alternate;return s===ts||l!==null&&l===ts}function B1(s,l){Do=Ec=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function q1(s,l,d){if((d&4194240)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,ye(s,d)}}var Xh={readContext:gs,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},gj={readContext:gs,useCallback:function(s,l){return Qa().memoizedState=[s,l===void 0?null:l],s},useContext:gs,useEffect:fd,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,Za(4194308,4,md.bind(null,l,s),d)},useLayoutEffect:function(s,l){return Za(4194308,4,s,l)},useInsertionEffect:function(s,l){return Za(4,2,s,l)},useMemo:function(s,l){var d=Qa();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var g=Qa();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=pj.bind(null,ts,s),[g.memoizedState,s]},useRef:function(s){var l=Qa();return s={current:s},l.memoizedState=s},useState:Au,useDebugValue:pg,useDeferredValue:function(s){return Qa().memoizedState=s},useTransition:function(){var s=Au(!1),l=s[0];return s=hj.bind(null,s[1]),Qa().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var g=ts,N=Qa();if(nt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Pi===null)throw Error(r(349));(po&30)!==0||Qh(g,l,d)}N.memoizedState=d;var k={value:d,getSnapshot:l};return N.queue=k,fd(Zh.bind(null,g,k,s),[s]),g.flags|=2048,va(9,Rf.bind(null,g,k,d,l),void 0,null),d},useId:function(){var s=Qa(),l=Pi.identifierPrefix;if(nt){var d=ce,g=Fe;d=(g&~(1<<32-bn(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Lc++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=hg++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},vj={readContext:gs,useCallback:D1,useContext:gs,useEffect:hd,useImperativeHandle:R1,useInsertionEffect:Yh,useLayoutEffect:pd,useMemo:I1,useReducer:ud,useRef:Io,useState:function(){return ud(_u)},useDebugValue:pg,useDeferredValue:function(s){var l=ga();return F1(l,Os.memoizedState,s)},useTransition:function(){var s=ud(_u)[0],l=ga().memoizedState;return[s,l]},useMutableSource:Kh,useSyncExternalStore:Lf,useId:O1,unstable_isNewReconciler:!1},xj={readContext:gs,useCallback:D1,useContext:gs,useEffect:hd,useImperativeHandle:R1,useInsertionEffect:Yh,useLayoutEffect:pd,useMemo:I1,useReducer:xl,useRef:Io,useState:function(){return xl(_u)},useDebugValue:pg,useDeferredValue:function(s){var l=ga();return Os===null?l.memoizedState=s:F1(l,Os.memoizedState,s)},useTransition:function(){var s=xl(_u)[0],l=ga().memoizedState;return[s,l]},useMutableSource:Kh,useSyncExternalStore:Lf,useId:O1,unstable_isNewReconciler:!1};function Fo(s,l){if(s&&s.defaultProps){l=I({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function mg(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:I({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Jh={isMounted:function(s){return(s=s._reactInternals)?vt(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var g=ya(),N=Oc(s),k=Cs(g,N);k.payload=l,d!=null&&(k.callback=d),l=_s(s,k,N),l!==null&&(Bo(l,s,N,g),_i(l,s,N))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=ya(),N=Oc(s),k=Cs(g,N);k.tag=1,k.payload=l,d!=null&&(k.callback=d),l=_s(s,k,N),l!==null&&(Bo(l,s,N,g),_i(l,s,N))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=ya(),g=Oc(s),N=Cs(d,g);N.tag=2,l!=null&&(N.callback=l),l=_s(s,N,g),l!==null&&(Bo(l,s,g,d),_i(l,s,g))}};function U1(s,l,d,g,N,k,G){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,k,G):l.prototype&&l.prototype.isPureReactComponent?!Wi(d,g)||!Wi(N,k):!0}function z1(s,l,d){var g=!1,N=gl,k=l.contextType;return typeof k=="object"&&k!==null?k=gs(k):(N=Zi(l)?ec:mi.current,g=l.contextTypes,k=(g=g!=null)?kc(s,N):gl),l=new l(d,k),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Jh,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=N,s.__reactInternalMemoizedMaskedChildContext=k),l}function $1(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&Jh.enqueueReplaceState(l,l.state,null)}function gg(s,l,d,g){var N=s.stateNode;N.props=d,N.state=s.memoizedState,N.refs={},gi(s);var k=l.contextType;typeof k=="object"&&k!==null?N.context=gs(k):(k=Zi(l)?ec:mi.current,N.context=kc(s,k)),N.state=s.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(mg(s,l,k,d),N.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&Jh.enqueueReplaceState(N,N.state,null),Ai(s,d,N,g),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308)}function gd(s,l){try{var d="",g=l;do d+=H(g),g=g.return;while(g);var N=d}catch(k){N=`
Error generating stack: `+k.message+`
`+k.stack}return{value:s,source:l,stack:N,digest:null}}function vg(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function xg(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var yj=typeof WeakMap=="function"?WeakMap:Map;function V1(s,l,d){d=Cs(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){ap||(ap=!0,Rg=g),xg(s,l)},d}function H1(s,l,d){d=Cs(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;d.payload=function(){return g(N)},d.callback=function(){xg(s,l)}}var k=s.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(d.callback=function(){xg(s,l),typeof g!="function"&&(Ic===null?Ic=new Set([this]):Ic.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})}),d}function W1(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new yj;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(d)||(N.add(d),s=Rj.bind(null,s,l,d),l.then(s,s))}function G1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function K1(s,l,d,g,N){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Cs(-1,1),l.tag=2,_s(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=N,s)}var bj=z.ReactCurrentOwner,Ra=!1;function xa(s,l,d,g){l.child=s===null?os(l,null,d,g):Is(l,s.child,d,g)}function Q1(s,l,d,g,N){d=d.render;var k=l.ref;return ms(l,N),g=Cu(s,l,d,g,k,N),d=mo(),s!==null&&!Ra?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~N,nc(s,l,N)):(nt&&d&&Xe(l),l.flags|=1,xa(s,l,g,N),l.child)}function Z1(s,l,d,g,N){if(s===null){var k=d.type;return typeof k=="function"&&!qg(k)&&k.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=k,Y1(s,l,k,g,N)):(s=fp(d.type,null,g,l,l.mode,N),s.ref=l.ref,s.return=l,l.child=s)}if(k=s.child,(s.lanes&N)===0){var G=k.memoizedProps;if(d=d.compare,d=d!==null?d:Wi,d(G,g)&&s.ref===l.ref)return nc(s,l,N)}return l.flags|=1,s=Bc(k,g),s.ref=l.ref,s.return=l,l.child=s}function Y1(s,l,d,g,N){if(s!==null){var k=s.memoizedProps;if(Wi(k,g)&&s.ref===l.ref)if(Ra=!1,l.pendingProps=g=k,(s.lanes&N)!==0)(s.flags&131072)!==0&&(Ra=!0);else return l.lanes=s.lanes,nc(s,l,N)}return yg(s,l,d,g,N)}function X1(s,l,d){var g=l.pendingProps,N=g.children,k=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(xd,Ya),Ya|=d;else{if((d&1073741824)===0)return s=k!==null?k.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Rn(xd,Ya),Ya|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:d,Rn(xd,Ya),Ya|=g}else k!==null?(g=k.baseLanes|d,l.memoizedState=null):g=d,Rn(xd,Ya),Ya|=g;return xa(s,l,N,d),l.child}function J1(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function yg(s,l,d,g,N){var k=Zi(d)?ec:mi.current;return k=kc(l,k),ms(l,N),d=Cu(s,l,d,g,k,N),g=mo(),s!==null&&!Ra?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~N,nc(s,l,N)):(nt&&g&&Xe(l),l.flags|=1,xa(s,l,d,N),l.child)}function e2(s,l,d,g,N){if(Zi(d)){var k=!0;tc(l)}else k=!1;if(ms(l,N),l.stateNode===null)tp(s,l),z1(l,d,g),gg(l,d,g,N),g=!0;else if(s===null){var G=l.stateNode,ge=l.memoizedProps;G.props=ge;var Ae=G.context,He=d.contextType;typeof He=="object"&&He!==null?He=gs(He):(He=Zi(d)?ec:mi.current,He=kc(l,He));var mt=d.getDerivedStateFromProps,yt=typeof mt=="function"||typeof G.getSnapshotBeforeUpdate=="function";yt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ge!==g||Ae!==He)&&$1(l,G,g,He),Fs=!1;var ht=l.memoizedState;G.state=ht,Ai(l,g,G,N),Ae=l.memoizedState,ge!==g||ht!==Ae||Qi.current||Fs?(typeof mt=="function"&&(mg(l,d,mt,g),Ae=l.memoizedState),(ge=Fs||U1(l,d,ge,g,ht,Ae,He))?(yt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(l.flags|=4194308)):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Ae),G.props=g,G.state=Ae,G.context=He,g=ge):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{G=l.stateNode,Yi(s,l),ge=l.memoizedProps,He=l.type===l.elementType?ge:Fo(l.type,ge),G.props=He,yt=l.pendingProps,ht=G.context,Ae=d.contextType,typeof Ae=="object"&&Ae!==null?Ae=gs(Ae):(Ae=Zi(d)?ec:mi.current,Ae=kc(l,Ae));var Mt=d.getDerivedStateFromProps;(mt=typeof Mt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ge!==yt||ht!==Ae)&&$1(l,G,g,Ae),Fs=!1,ht=l.memoizedState,G.state=ht,Ai(l,g,G,N);var Jt=l.memoizedState;ge!==yt||ht!==Jt||Qi.current||Fs?(typeof Mt=="function"&&(mg(l,d,Mt,g),Jt=l.memoizedState),(He=Fs||U1(l,d,He,g,ht,Jt,Ae)||!1)?(mt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(g,Jt,Ae),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(g,Jt,Ae)),typeof G.componentDidUpdate=="function"&&(l.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof G.componentDidUpdate!="function"||ge===s.memoizedProps&&ht===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ge===s.memoizedProps&&ht===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Jt),G.props=g,G.state=Jt,G.context=Ae,g=He):(typeof G.componentDidUpdate!="function"||ge===s.memoizedProps&&ht===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ge===s.memoizedProps&&ht===s.memoizedState||(l.flags|=1024),g=!1)}return bg(s,l,d,g,k,N)}function bg(s,l,d,g,N,k){J1(s,l);var G=(l.flags&128)!==0;if(!g&&!G)return N&&Wh(l,d,!1),nc(s,l,k);g=l.stateNode,bj.current=l;var ge=G&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&G?(l.child=Is(l,s.child,null,k),l.child=Is(l,null,ge,k)):xa(s,l,ge,k),l.memoizedState=g.state,N&&Wh(l,d,!0),l.child}function t2(s){var l=s.stateNode;l.pendingContext?Hh(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Hh(s,l.context,!1),Tc(s,l.containerInfo)}function r2(s,l,d,g,N){return zt(),Tt(N),l.flags|=256,xa(s,l,d,g),l.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function Ng(s){return{baseLanes:s,cachePool:null,transitions:null}}function n2(s,l,d){var g=l.pendingProps,N=Qn.current,k=!1,G=(l.flags&128)!==0,ge;if((ge=G)||(ge=s!==null&&s.memoizedState===null?!1:(N&2)!==0),ge?(k=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(N|=1),Rn(Qn,N&1),s===null)return Zt(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(G=g.children,s=g.fallback,k?(g=l.mode,k=l.child,G={mode:"hidden",children:G},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=G):k=hp(G,g,0,null),s=Lu(s,g,d,null),k.return=l,s.return=l,k.sibling=s,l.child=k,l.child.memoizedState=Ng(d),l.memoizedState=wg,s):Sg(l,G));if(N=s.memoizedState,N!==null&&(ge=N.dehydrated,ge!==null))return wj(s,l,G,g,ge,N,d);if(k){k=g.fallback,G=l.mode,N=s.child,ge=N.sibling;var Ae={mode:"hidden",children:g.children};return(G&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=Ae,l.deletions=null):(g=Bc(N,Ae),g.subtreeFlags=N.subtreeFlags&14680064),ge!==null?k=Bc(ge,k):(k=Lu(k,G,d,null),k.flags|=2),k.return=l,g.return=l,g.sibling=k,l.child=g,g=k,k=l.child,G=s.child.memoizedState,G=G===null?Ng(d):{baseLanes:G.baseLanes|d,cachePool:null,transitions:G.transitions},k.memoizedState=G,k.childLanes=s.childLanes&~d,l.memoizedState=wg,g}return k=s.child,s=k.sibling,g=Bc(k,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=g,l.memoizedState=null,g}function Sg(s,l){return l=hp({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function ep(s,l,d,g){return g!==null&&Tt(g),Is(l,s.child,null,d),s=Sg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function wj(s,l,d,g,N,k,G){if(d)return l.flags&256?(l.flags&=-257,g=vg(Error(r(422))),ep(s,l,G,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(k=g.fallback,N=l.mode,g=hp({mode:"visible",children:g.children},N,0,null),k=Lu(k,N,G,null),k.flags|=2,g.return=l,k.return=l,g.sibling=k,l.child=g,(l.mode&1)!==0&&Is(l,s.child,null,G),l.child.memoizedState=Ng(G),l.memoizedState=wg,k);if((l.mode&1)===0)return ep(s,l,G,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var ge=g.dgst;return g=ge,k=Error(r(419)),g=vg(k,g,void 0),ep(s,l,G,g)}if(ge=(G&s.childLanes)!==0,Ra||ge){if(g=Pi,g!==null){switch(G&-G){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|G))!==0?0:N,N!==0&&N!==k.retryLane&&(k.retryLane=N,qn(s,N),Bo(g,s,N,-1))}return Bg(),g=vg(Error(r(421))),ep(s,l,G,g)}return N.data==="$?"?(l.flags|=128,l.child=s.child,l=Dj.bind(null,s),N._reactRetry=l,null):(s=k.treeContext,Ye=Fi(N.nextSibling),Ke=l,nt=!0,at=null,s!==null&&(ne[le++]=Fe,ne[le++]=ce,ne[le++]=_e,Fe=s.id,ce=s.overflow,_e=l),l=Sg(l,g.children),l.flags|=4096,l)}function s2(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Sn(s.return,l,d)}function jg(s,l,d,g,N){var k=s.memoizedState;k===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:N}:(k.isBackwards=l,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=d,k.tailMode=N)}function i2(s,l,d){var g=l.pendingProps,N=g.revealOrder,k=g.tail;if(xa(s,l,g.children,d),g=Qn.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&s2(s,d,l);else if(s.tag===19)s2(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Rn(Qn,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)s=d.alternate,s!==null&&Ka(s)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),jg(l,!1,N,d,k);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(s=N.alternate,s!==null&&Ka(s)===null){l.child=N;break}s=N.sibling,N.sibling=d,d=N,N=s}jg(l,!0,d,null,k);break;case"together":jg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function tp(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function nc(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Pu|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=Bc(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Bc(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Nj(s,l,d){switch(l.tag){case 3:t2(l),zt();break;case 5:Gh(l);break;case 1:Zi(l.type)&&tc(l);break;case 4:Tc(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;Rn(Vs,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Rn(Qn,Qn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?n2(s,l,d):(Rn(Qn,Qn.current&1),s=nc(s,l,d),s!==null?s.sibling:null);Rn(Qn,Qn.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(s.flags&128)!==0){if(g)return i2(s,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Rn(Qn,Qn.current),g)break;return null;case 22:case 23:return l.lanes=0,X1(s,l,d)}return nc(s,l,d)}var a2,Cg,o2,l2;a2=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Cg=function(){},o2=function(s,l,d,g){var N=s.memoizedProps;if(N!==g){s=l.stateNode,Ro(ai.current);var k=null;switch(d){case"input":N=ct(s,N),g=ct(s,g),k=[];break;case"select":N=I({},N,{value:void 0}),g=I({},g,{value:void 0}),k=[];break;case"textarea":N=ue(s,N),g=ue(s,g),k=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=_c)}Wr(d,g);var G;d=null;for(He in N)if(!g.hasOwnProperty(He)&&N.hasOwnProperty(He)&&N[He]!=null)if(He==="style"){var ge=N[He];for(G in ge)ge.hasOwnProperty(G)&&(d||(d={}),d[G]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(a.hasOwnProperty(He)?k||(k=[]):(k=k||[]).push(He,null));for(He in g){var Ae=g[He];if(ge=N?.[He],g.hasOwnProperty(He)&&Ae!==ge&&(Ae!=null||ge!=null))if(He==="style")if(ge){for(G in ge)!ge.hasOwnProperty(G)||Ae&&Ae.hasOwnProperty(G)||(d||(d={}),d[G]="");for(G in Ae)Ae.hasOwnProperty(G)&&ge[G]!==Ae[G]&&(d||(d={}),d[G]=Ae[G])}else d||(k||(k=[]),k.push(He,d)),d=Ae;else He==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,ge=ge?ge.__html:void 0,Ae!=null&&ge!==Ae&&(k=k||[]).push(He,Ae)):He==="children"?typeof Ae!="string"&&typeof Ae!="number"||(k=k||[]).push(He,""+Ae):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(a.hasOwnProperty(He)?(Ae!=null&&He==="onScroll"&&Mn("scroll",s),k||ge===Ae||(k=[])):(k=k||[]).push(He,Ae))}d&&(k=k||[]).push("style",d);var He=k;(l.updateQueue=He)&&(l.flags|=4)}},l2=function(s,l,d,g){d!==g&&(l.flags|=4)};function Df(s,l){if(!nt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Xi(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var N=s.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=s,N=N.sibling;else for(N=s.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=s,N=N.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function Sj(s,l,d){var g=l.pendingProps;switch(Be(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(l),null;case 1:return Zi(l.type)&&ad(),Xi(l),null;case 3:return g=l.stateNode,ho(),Tn(Qi),Tn(mi),Ef(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(ps(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,at!==null&&(Fg(at),at=null))),Cg(s,l),Xi(l),null;case 5:kf(l);var N=Ro(vl.current);if(d=l.type,s!==null&&l.stateNode!=null)o2(s,l,d,g,N),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Xi(l),null}if(s=Ro(ai.current),ps(l)){g=l.stateNode,d=l.type;var k=l.memoizedProps;switch(g[fo]=l,g[Ac]=k,s=(l.mode&1)!==0,d){case"dialog":Mn("cancel",g),Mn("close",g);break;case"iframe":case"object":case"embed":Mn("load",g);break;case"video":case"audio":for(N=0;N<pl.length;N++)Mn(pl[N],g);break;case"source":Mn("error",g);break;case"img":case"image":case"link":Mn("error",g),Mn("load",g);break;case"details":Mn("toggle",g);break;case"input":ee(g,k),Mn("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},Mn("invalid",g);break;case"textarea":he(g,k),Mn("invalid",g)}Wr(d,k),N=null;for(var G in k)if(k.hasOwnProperty(G)){var ge=k[G];G==="children"?typeof ge=="string"?g.textContent!==ge&&(k.suppressHydrationWarning!==!0&&id(g.textContent,ge,s),N=["children",ge]):typeof ge=="number"&&g.textContent!==""+ge&&(k.suppressHydrationWarning!==!0&&id(g.textContent,ge,s),N=["children",""+ge]):a.hasOwnProperty(G)&&ge!=null&&G==="onScroll"&&Mn("scroll",g)}switch(d){case"input":Ge(g),Ee(g,k,!0);break;case"textarea":Ge(g),Ze(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=_c)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{G=N.nodeType===9?N:N.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ve(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=G.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=G.createElement(d,{is:g.is}):(s=G.createElement(d),d==="select"&&(G=s,g.multiple?G.multiple=!0:g.size&&(G.size=g.size))):s=G.createElementNS(s,d),s[fo]=l,s[Ac]=g,a2(s,l,!1,!1),l.stateNode=s;e:{switch(G=Dt(d,g),d){case"dialog":Mn("cancel",s),Mn("close",s),N=g;break;case"iframe":case"object":case"embed":Mn("load",s),N=g;break;case"video":case"audio":for(N=0;N<pl.length;N++)Mn(pl[N],s);N=g;break;case"source":Mn("error",s),N=g;break;case"img":case"image":case"link":Mn("error",s),Mn("load",s),N=g;break;case"details":Mn("toggle",s),N=g;break;case"input":ee(s,g),N=ct(s,g),Mn("invalid",s);break;case"option":N=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},N=I({},g,{value:void 0}),Mn("invalid",s);break;case"textarea":he(s,g),N=ue(s,g),Mn("invalid",s);break;default:N=g}Wr(d,N),ge=N;for(k in ge)if(ge.hasOwnProperty(k)){var Ae=ge[k];k==="style"?yr(s,Ae):k==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Ae!=null&&ft(s,Ae)):k==="children"?typeof Ae=="string"?(d!=="textarea"||Ae!=="")&&Et(s,Ae):typeof Ae=="number"&&Et(s,""+Ae):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?Ae!=null&&k==="onScroll"&&Mn("scroll",s):Ae!=null&&T(s,k,Ae,G))}switch(d){case"input":Ge(s),Ee(s,g,!1);break;case"textarea":Ge(s),Ze(s);break;case"option":g.value!=null&&s.setAttribute("value",""+ve(g.value));break;case"select":s.multiple=!!g.multiple,k=g.value,k!=null?Ct(s,!!g.multiple,k,!1):g.defaultValue!=null&&Ct(s,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(s.onclick=_c)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Xi(l),null;case 6:if(s&&l.stateNode!=null)l2(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(d=Ro(vl.current),Ro(ai.current),ps(l)){if(g=l.stateNode,d=l.memoizedProps,g[fo]=l,(k=g.nodeValue!==d)&&(s=Ke,s!==null))switch(s.tag){case 3:id(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&id(g.nodeValue,d,(s.mode&1)!==0)}k&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[fo]=l,l.stateNode=g}return Xi(l),null;case 13:if(Tn(Qn),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(nt&&Ye!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Kr(),zt(),l.flags|=98560,k=!1;else if(k=ps(l),g!==null&&g.dehydrated!==null){if(s===null){if(!k)throw Error(r(318));if(k=l.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[fo]=l}else zt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xi(l),k=!1}else at!==null&&(Fg(at),at=null),k=!0;if(!k)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Qn.current&1)!==0?vi===0&&(vi=3):Bg())),l.updateQueue!==null&&(l.flags|=4),Xi(l),null);case 4:return ho(),Cg(s,l),s===null&&Zl(l.stateNode.containerInfo),Xi(l),null;case 10:return es(l.type._context),Xi(l),null;case 17:return Zi(l.type)&&ad(),Xi(l),null;case 19:if(Tn(Qn),k=l.memoizedState,k===null)return Xi(l),null;if(g=(l.flags&128)!==0,G=k.rendering,G===null)if(g)Df(k,!1);else{if(vi!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(G=Ka(s),G!==null){for(l.flags|=128,Df(k,!1),g=G.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)k=d,s=g,k.flags&=14680066,G=k.alternate,G===null?(k.childLanes=0,k.lanes=s,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=G.childLanes,k.lanes=G.lanes,k.child=G.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=G.memoizedProps,k.memoizedState=G.memoizedState,k.updateQueue=G.updateQueue,k.type=G.type,s=G.dependencies,k.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Rn(Qn,Qn.current&1|2),l.child}s=s.sibling}k.tail!==null&&wr()>yd&&(l.flags|=128,g=!0,Df(k,!1),l.lanes=4194304)}else{if(!g)if(s=Ka(G),s!==null){if(l.flags|=128,g=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Df(k,!0),k.tail===null&&k.tailMode==="hidden"&&!G.alternate&&!nt)return Xi(l),null}else 2*wr()-k.renderingStartTime>yd&&d!==1073741824&&(l.flags|=128,g=!0,Df(k,!1),l.lanes=4194304);k.isBackwards?(G.sibling=l.child,l.child=G):(d=k.last,d!==null?d.sibling=G:l.child=G,k.last=G)}return k.tail!==null?(l=k.tail,k.rendering=l,k.tail=l.sibling,k.renderingStartTime=wr(),l.sibling=null,d=Qn.current,Rn(Qn,g?d&1|2:d&1),l):(Xi(l),null);case 22:case 23:return Mg(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Ya&1073741824)!==0&&(Xi(l),l.subtreeFlags&6&&(l.flags|=8192)):Xi(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function jj(s,l){switch(Be(l),l.tag){case 1:return Zi(l.type)&&ad(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ho(),Tn(Qi),Tn(mi),Ef(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return kf(l),null;case 13:if(Tn(Qn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));zt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Tn(Qn),null;case 4:return ho(),null;case 10:return es(l.type._context),null;case 22:case 23:return Mg(),null;case 24:return null;default:return null}}var rp=!1,Ji=!1,Cj=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function vd(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ms(s,l,g)}else d.current=null}function _g(s,l,d){try{d()}catch(g){Ms(s,l,g)}}var c2=!1;function _j(s,l){if(Nu=sl,s=Ds(),Ha(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var N=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{d.nodeType,k.nodeType}catch{d=null;break e}var G=0,ge=-1,Ae=-1,He=0,mt=0,yt=s,ht=null;t:for(;;){for(var Mt;yt!==d||N!==0&&yt.nodeType!==3||(ge=G+N),yt!==k||g!==0&&yt.nodeType!==3||(Ae=G+g),yt.nodeType===3&&(G+=yt.nodeValue.length),(Mt=yt.firstChild)!==null;)ht=yt,yt=Mt;for(;;){if(yt===s)break t;if(ht===d&&++He===N&&(ge=G),ht===k&&++mt===g&&(Ae=G),(Mt=yt.nextSibling)!==null)break;yt=ht,ht=yt.parentNode}yt=Mt}d=ge===-1||Ae===-1?null:{start:ge,end:Ae}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xl={focusedElem:s,selectionRange:d},sl=!1,Gt=l;Gt!==null;)if(l=Gt,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Gt=s;else for(;Gt!==null;){l=Gt;try{var Jt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Jt!==null){var nr=Jt.memoizedProps,Ws=Jt.memoizedState,Me=l.stateNode,Te=Me.getSnapshotBeforeUpdate(l.elementType===l.type?nr:Fo(l.type,nr),Ws);Me.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Ue=l.stateNode.containerInfo;Ue.nodeType===1?Ue.textContent="":Ue.nodeType===9&&Ue.documentElement&&Ue.removeChild(Ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Nt){Ms(l,l.return,Nt)}if(s=l.sibling,s!==null){s.return=l.return,Gt=s;break}Gt=l.return}return Jt=c2,c2=!1,Jt}function If(s,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&s)===s){var k=N.destroy;N.destroy=void 0,k!==void 0&&_g(l,d,k)}N=N.next}while(N!==g)}}function np(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Ag(s){var l=s.ref;if(l!==null){var d=s.stateNode;s.tag,s=d,typeof l=="function"?l(s):l.current=s}}function u2(s){var l=s.alternate;l!==null&&(s.alternate=null,u2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[fo],delete l[Ac],delete l[Ki],delete l[dg],delete l[fg])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function d2(s){return s.tag===5||s.tag===3||s.tag===4}function f2(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||d2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Pg(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=_c));else if(g!==4&&(s=s.child,s!==null))for(Pg(s,l,d),s=s.sibling;s!==null;)Pg(s,l,d),s=s.sibling}function kg(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(kg(s,l,d),s=s.sibling;s!==null;)kg(s,l,d),s=s.sibling}var Oi=null,Oo=!1;function Dc(s,l,d){for(d=d.child;d!==null;)h2(s,l,d),d=d.sibling}function h2(s,l,d){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Or,d)}catch{}switch(d.tag){case 5:Ji||vd(d,l);case 6:var g=Oi,N=Oo;Oi=null,Dc(s,l,d),Oi=g,Oo=N,Oi!==null&&(Oo?(s=Oi,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Oi.removeChild(d.stateNode));break;case 18:Oi!==null&&(Oo?(s=Oi,d=d.stateNode,s.nodeType===8?_f(s.parentNode,d):s.nodeType===1&&_f(s,d),No(s)):_f(Oi,d.stateNode));break;case 4:g=Oi,N=Oo,Oi=d.stateNode.containerInfo,Oo=!0,Dc(s,l,d),Oi=g,Oo=N;break;case 0:case 11:case 14:case 15:if(!Ji&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var k=N,G=k.destroy;k=k.tag,G!==void 0&&((k&2)!==0||(k&4)!==0)&&_g(d,l,G),N=N.next}while(N!==g)}Dc(s,l,d);break;case 1:if(!Ji&&(vd(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(ge){Ms(d,l,ge)}Dc(s,l,d);break;case 21:Dc(s,l,d);break;case 22:d.mode&1?(Ji=(g=Ji)||d.memoizedState!==null,Dc(s,l,d),Ji=g):Dc(s,l,d);break;default:Dc(s,l,d)}}function p2(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new Cj),l.forEach(function(g){var N=Ij.bind(null,s,g);d.has(g)||(d.add(g),g.then(N,N))})}}function Mo(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var N=d[g];try{var k=s,G=l,ge=G;e:for(;ge!==null;){switch(ge.tag){case 5:Oi=ge.stateNode,Oo=!1;break e;case 3:Oi=ge.stateNode.containerInfo,Oo=!0;break e;case 4:Oi=ge.stateNode.containerInfo,Oo=!0;break e}ge=ge.return}if(Oi===null)throw Error(r(160));h2(k,G,N),Oi=null,Oo=!1;var Ae=N.alternate;Ae!==null&&(Ae.return=null),N.return=null}catch(He){Ms(N,l,He)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)m2(l,s),l=l.sibling}function m2(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Mo(l,s),yl(s),g&4){try{If(3,s,s.return),np(3,s)}catch(nr){Ms(s,s.return,nr)}try{If(5,s,s.return)}catch(nr){Ms(s,s.return,nr)}}break;case 1:Mo(l,s),yl(s),g&512&&d!==null&&vd(d,d.return);break;case 5:if(Mo(l,s),yl(s),g&512&&d!==null&&vd(d,d.return),s.flags&32){var N=s.stateNode;try{Et(N,"")}catch(nr){Ms(s,s.return,nr)}}if(g&4&&(N=s.stateNode,N!=null)){var k=s.memoizedProps,G=d!==null?d.memoizedProps:k,ge=s.type,Ae=s.updateQueue;if(s.updateQueue=null,Ae!==null)try{ge==="input"&&k.type==="radio"&&k.name!=null&&Re(N,k),Dt(ge,G);var He=Dt(ge,k);for(G=0;G<Ae.length;G+=2){var mt=Ae[G],yt=Ae[G+1];mt==="style"?yr(N,yt):mt==="dangerouslySetInnerHTML"?ft(N,yt):mt==="children"?Et(N,yt):T(N,mt,yt,He)}switch(ge){case"input":We(N,k);break;case"textarea":Ie(N,k);break;case"select":var ht=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!k.multiple;var Mt=k.value;Mt!=null?Ct(N,!!k.multiple,Mt,!1):ht!==!!k.multiple&&(k.defaultValue!=null?Ct(N,!!k.multiple,k.defaultValue,!0):Ct(N,!!k.multiple,k.multiple?[]:"",!1))}N[Ac]=k}catch(nr){Ms(s,s.return,nr)}}break;case 6:if(Mo(l,s),yl(s),g&4){if(s.stateNode===null)throw Error(r(162));N=s.stateNode,k=s.memoizedProps;try{N.nodeValue=k}catch(nr){Ms(s,s.return,nr)}}break;case 3:if(Mo(l,s),yl(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{No(l.containerInfo)}catch(nr){Ms(s,s.return,nr)}break;case 4:Mo(l,s),yl(s);break;case 13:Mo(l,s),yl(s),N=s.child,N.flags&8192&&(k=N.memoizedState!==null,N.stateNode.isHidden=k,!k||N.alternate!==null&&N.alternate.memoizedState!==null||(Lg=wr())),g&4&&p2(s);break;case 22:if(mt=d!==null&&d.memoizedState!==null,s.mode&1?(Ji=(He=Ji)||mt,Mo(l,s),Ji=He):Mo(l,s),yl(s),g&8192){if(He=s.memoizedState!==null,(s.stateNode.isHidden=He)&&!mt&&(s.mode&1)!==0)for(Gt=s,mt=s.child;mt!==null;){for(yt=Gt=mt;Gt!==null;){switch(ht=Gt,Mt=ht.child,ht.tag){case 0:case 11:case 14:case 15:If(4,ht,ht.return);break;case 1:vd(ht,ht.return);var Jt=ht.stateNode;if(typeof Jt.componentWillUnmount=="function"){g=ht,d=ht.return;try{l=g,Jt.props=l.memoizedProps,Jt.state=l.memoizedState,Jt.componentWillUnmount()}catch(nr){Ms(g,d,nr)}}break;case 5:vd(ht,ht.return);break;case 22:if(ht.memoizedState!==null){x2(yt);continue}}Mt!==null?(Mt.return=ht,Gt=Mt):x2(yt)}mt=mt.sibling}e:for(mt=null,yt=s;;){if(yt.tag===5){if(mt===null){mt=yt;try{N=yt.stateNode,He?(k=N.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(ge=yt.stateNode,Ae=yt.memoizedProps.style,G=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null,ge.style.display=Cr("display",G))}catch(nr){Ms(s,s.return,nr)}}}else if(yt.tag===6){if(mt===null)try{yt.stateNode.nodeValue=He?"":yt.memoizedProps}catch(nr){Ms(s,s.return,nr)}}else if((yt.tag!==22&&yt.tag!==23||yt.memoizedState===null||yt===s)&&yt.child!==null){yt.child.return=yt,yt=yt.child;continue}if(yt===s)break e;for(;yt.sibling===null;){if(yt.return===null||yt.return===s)break e;mt===yt&&(mt=null),yt=yt.return}mt===yt&&(mt=null),yt.sibling.return=yt.return,yt=yt.sibling}}break;case 19:Mo(l,s),yl(s),g&4&&p2(s);break;case 21:break;default:Mo(l,s),yl(s)}}function yl(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(d2(d)){var g=d;break e}d=d.return}throw Error(r(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(Et(N,""),g.flags&=-33);var k=f2(s);kg(s,k,N);break;case 3:case 4:var G=g.stateNode.containerInfo,ge=f2(s);Pg(s,ge,G);break;default:throw Error(r(161))}}catch(Ae){Ms(s,s.return,Ae)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Aj(s,l,d){Gt=s,g2(s)}function g2(s,l,d){for(var g=(s.mode&1)!==0;Gt!==null;){var N=Gt,k=N.child;if(N.tag===22&&g){var G=N.memoizedState!==null||rp;if(!G){var ge=N.alternate,Ae=ge!==null&&ge.memoizedState!==null||Ji;ge=rp;var He=Ji;if(rp=G,(Ji=Ae)&&!He)for(Gt=N;Gt!==null;)G=Gt,Ae=G.child,G.tag===22&&G.memoizedState!==null?y2(N):Ae!==null?(Ae.return=G,Gt=Ae):y2(N);for(;k!==null;)Gt=k,g2(k),k=k.sibling;Gt=N,rp=ge,Ji=He}v2(s)}else(N.subtreeFlags&8772)!==0&&k!==null?(k.return=N,Gt=k):v2(s)}}function v2(s){for(;Gt!==null;){var l=Gt;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ji||np(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Ji)if(d===null)g.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:Fo(l.type,d.memoizedProps);g.componentDidUpdate(N,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=l.updateQueue;k!==null&&La(l,k,g);break;case 3:var G=l.updateQueue;if(G!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}La(l,G,d)}break;case 5:var ge=l.stateNode;if(d===null&&l.flags&4){d=ge;var Ae=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Ae.autoFocus&&d.focus();break;case"img":Ae.src&&(d.src=Ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var He=l.alternate;if(He!==null){var mt=He.memoizedState;if(mt!==null){var yt=mt.dehydrated;yt!==null&&No(yt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ji||l.flags&512&&Ag(l)}catch(ht){Ms(l,l.return,ht)}}if(l===s){Gt=null;break}if(d=l.sibling,d!==null){d.return=l.return,Gt=d;break}Gt=l.return}}function x2(s){for(;Gt!==null;){var l=Gt;if(l===s){Gt=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Gt=d;break}Gt=l.return}}function y2(s){for(;Gt!==null;){var l=Gt;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{np(4,l)}catch(Ae){Ms(l,d,Ae)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(Ae){Ms(l,N,Ae)}}var k=l.return;try{Ag(l)}catch(Ae){Ms(l,k,Ae)}break;case 5:var G=l.return;try{Ag(l)}catch(Ae){Ms(l,G,Ae)}}}catch(Ae){Ms(l,l.return,Ae)}if(l===s){Gt=null;break}var ge=l.sibling;if(ge!==null){ge.return=l.return,Gt=ge;break}Gt=l.return}}var Pj=Math.ceil,sp=z.ReactCurrentDispatcher,Tg=z.ReactCurrentOwner,go=z.ReactCurrentBatchConfig,jn=0,Pi=null,oi=null,Mi=0,Ya=0,xd=Wa(0),vi=0,Ff=null,Pu=0,ip=0,Eg=0,Of=null,Da=null,Lg=0,yd=1/0,sc=null,ap=!1,Rg=null,Ic=null,op=!1,Fc=null,lp=0,Mf=0,Dg=null,cp=-1,up=0;function ya(){return(jn&6)!==0?wr():cp!==-1?cp:cp=wr()}function Oc(s){return(s.mode&1)===0?1:(jn&2)!==0&&Mi!==0?Mi&-Mi:js.transition!==null?(up===0&&(up=Ol()),up):(s=Pe,s!==0||(s=window.event,s=s===void 0?16:io(s.type)),s)}function Bo(s,l,d,g){if(50<Mf)throw Mf=0,Dg=null,Error(r(185));q(s,d,g),((jn&2)===0||s!==Pi)&&(s===Pi&&((jn&2)===0&&(ip|=d),vi===4&&Mc(s,Mi)),Ia(s,g),d===1&&jn===0&&(l.mode&1)===0&&(yd=wr()+500,ju&&R()))}function Ia(s,l){var d=s.callbackNode;bs(s,l);var g=wo(s,s===Pi?Mi:0);if(g===0)d!==null&&Qt(d),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(d!=null&&Qt(d),l===1)s.tag===0?P(w2.bind(null,s)):v(w2.bind(null,s)),cg(function(){(jn&6)===0&&R()}),d=null;else{switch(je(g)){case 1:d=Pr;break;case 4:d=tr;break;case 16:d=ar;break;case 536870912:d=Nr;break;default:d=ar}d=k2(d,b2.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function b2(s,l){if(cp=-1,up=0,(jn&6)!==0)throw Error(r(327));var d=s.callbackNode;if(bd()&&s.callbackNode!==d)return null;var g=wo(s,s===Pi?Mi:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||l)l=dp(s,g);else{l=g;var N=jn;jn|=2;var k=S2();(Pi!==s||Mi!==l)&&(sc=null,yd=wr()+500,Tu(s,l));do try{Ej();break}catch(ge){N2(s,ge)}while(!0);Nn(),sp.current=k,jn=N,oi!==null?l=0:(Pi=null,Mi=0,l=vi)}if(l!==0){if(l===2&&(N=da(s),N!==0&&(g=N,l=Ig(s,N))),l===1)throw d=Ff,Tu(s,0),Mc(s,g),Ia(s,wr()),d;if(l===6)Mc(s,g);else{if(N=s.current.alternate,(g&30)===0&&!kj(N)&&(l=dp(s,g),l===2&&(k=da(s),k!==0&&(g=k,l=Ig(s,k))),l===1))throw d=Ff,Tu(s,0),Mc(s,g),Ia(s,wr()),d;switch(s.finishedWork=N,s.finishedLanes=g,l){case 0:case 1:throw Error(r(345));case 2:Eu(s,Da,sc);break;case 3:if(Mc(s,g),(g&130023424)===g&&(l=Lg+500-wr(),10<l)){if(wo(s,0)!==0)break;if(N=s.suspendedLanes,(N&g)!==g){ya(),s.pingedLanes|=s.suspendedLanes&N;break}s.timeoutHandle=Cf(Eu.bind(null,s,Da,sc),l);break}Eu(s,Da,sc);break;case 4:if(Mc(s,g),(g&4194240)===g)break;for(l=s.eventTimes,N=-1;0<g;){var G=31-bn(g);k=1<<G,G=l[G],G>N&&(N=G),g&=~k}if(g=N,g=wr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Pj(g/1960))-g,10<g){s.timeoutHandle=Cf(Eu.bind(null,s,Da,sc),g);break}Eu(s,Da,sc);break;case 5:Eu(s,Da,sc);break;default:throw Error(r(329))}}}return Ia(s,wr()),s.callbackNode===d?b2.bind(null,s):null}function Ig(s,l){var d=Of;return s.current.memoizedState.isDehydrated&&(Tu(s,l).flags|=256),s=dp(s,l),s!==2&&(l=Da,Da=d,l!==null&&Fg(l)),s}function Fg(s){Da===null?Da=s:Da.push.apply(Da,s)}function kj(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var N=d[g],k=N.getSnapshot;N=N.value;try{if(!fs(k(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mc(s,l){for(l&=~Eg,l&=~ip,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-bn(l),g=1<<d;s[d]=-1,l&=~g}}function w2(s){if((jn&6)!==0)throw Error(r(327));bd();var l=wo(s,0);if((l&1)===0)return Ia(s,wr()),null;var d=dp(s,l);if(s.tag!==0&&d===2){var g=da(s);g!==0&&(l=g,d=Ig(s,g))}if(d===1)throw d=Ff,Tu(s,0),Mc(s,l),Ia(s,wr()),d;if(d===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Eu(s,Da,sc),Ia(s,wr()),null}function Og(s,l){var d=jn;jn|=1;try{return s(l)}finally{jn=d,jn===0&&(yd=wr()+500,ju&&R())}}function ku(s){Fc!==null&&Fc.tag===0&&(jn&6)===0&&bd();var l=jn;jn|=1;var d=go.transition,g=Pe;try{if(go.transition=null,Pe=1,s)return s()}finally{Pe=g,go.transition=d,jn=l,(jn&6)===0&&R()}}function Mg(){Ya=xd.current,Tn(xd)}function Tu(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,$h(d)),oi!==null)for(d=oi.return;d!==null;){var g=d;switch(Be(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ad();break;case 3:ho(),Tn(Qi),Tn(mi),Ef();break;case 5:kf(g);break;case 4:ho();break;case 13:Tn(Qn);break;case 19:Tn(Qn);break;case 10:es(g.type._context);break;case 22:case 23:Mg()}d=d.return}if(Pi=s,oi=s=Bc(s.current,null),Mi=Ya=l,vi=0,Ff=null,Eg=ip=Pu=0,Da=Of=null,Bn!==null){for(l=0;l<Bn.length;l++)if(d=Bn[l],g=d.interleaved,g!==null){d.interleaved=null;var N=g.next,k=d.pending;if(k!==null){var G=k.next;k.next=N,g.next=G}d.pending=g}Bn=null}return s}function N2(s,l){do{var d=oi;try{if(Nn(),od.current=Xh,Ec){for(var g=ts.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}Ec=!1}if(po=0,Ps=Os=ts=null,Do=!1,Lc=0,Tg.current=null,d===null||d.return===null){vi=1,Ff=l,oi=null;break}e:{var k=s,G=d.return,ge=d,Ae=l;if(l=Mi,ge.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var He=Ae,mt=ge,yt=mt.tag;if((mt.mode&1)===0&&(yt===0||yt===11||yt===15)){var ht=mt.alternate;ht?(mt.updateQueue=ht.updateQueue,mt.memoizedState=ht.memoizedState,mt.lanes=ht.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var Mt=G1(G);if(Mt!==null){Mt.flags&=-257,K1(Mt,G,ge,k,l),Mt.mode&1&&W1(k,He,l),l=Mt,Ae=He;var Jt=l.updateQueue;if(Jt===null){var nr=new Set;nr.add(Ae),l.updateQueue=nr}else Jt.add(Ae);break e}else{if((l&1)===0){W1(k,He,l),Bg();break e}Ae=Error(r(426))}}else if(nt&&ge.mode&1){var Ws=G1(G);if(Ws!==null){(Ws.flags&65536)===0&&(Ws.flags|=256),K1(Ws,G,ge,k,l),Tt(gd(Ae,ge));break e}}k=Ae=gd(Ae,ge),vi!==4&&(vi=2),Of===null?Of=[k]:Of.push(k),k=G;do{switch(k.tag){case 3:k.flags|=65536,l&=-l,k.lanes|=l;var Me=V1(k,Ae,l);Un(k,Me);break e;case 1:ge=Ae;var Te=k.type,Ue=k.stateNode;if((k.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(Ic===null||!Ic.has(Ue)))){k.flags|=65536,l&=-l,k.lanes|=l;var Nt=H1(k,ge,l);Un(k,Nt);break e}}k=k.return}while(k!==null)}C2(d)}catch(lr){l=lr,oi===d&&d!==null&&(oi=d=d.return);continue}break}while(!0)}function S2(){var s=sp.current;return sp.current=Xh,s===null?Xh:s}function Bg(){(vi===0||vi===3||vi===2)&&(vi=4),Pi===null||(Pu&268435455)===0&&(ip&268435455)===0||Mc(Pi,Mi)}function dp(s,l){var d=jn;jn|=2;var g=S2();(Pi!==s||Mi!==l)&&(sc=null,Tu(s,l));do try{Tj();break}catch(N){N2(s,N)}while(!0);if(Nn(),jn=d,sp.current=g,oi!==null)throw Error(r(261));return Pi=null,Mi=0,vi}function Tj(){for(;oi!==null;)j2(oi)}function Ej(){for(;oi!==null&&!Yt();)j2(oi)}function j2(s){var l=P2(s.alternate,s,Ya);s.memoizedProps=s.pendingProps,l===null?C2(s):oi=l,Tg.current=null}function C2(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=Sj(d,l,Ya),d!==null){oi=d;return}}else{if(d=jj(d,l),d!==null){d.flags&=32767,oi=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{vi=6,oi=null;return}}if(l=l.sibling,l!==null){oi=l;return}oi=l=s}while(l!==null);vi===0&&(vi=5)}function Eu(s,l,d){var g=Pe,N=go.transition;try{go.transition=null,Pe=1,Lj(s,l,d,g)}finally{go.transition=N,Pe=g}return null}function Lj(s,l,d,g){do bd();while(Fc!==null);if((jn&6)!==0)throw Error(r(327));d=s.finishedWork;var N=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var k=d.lanes|d.childLanes;if(pe(s,k),s===Pi&&(oi=Pi=null,Mi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||op||(op=!0,k2(ar,function(){return bd(),null})),k=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||k){k=go.transition,go.transition=null;var G=Pe;Pe=1;var ge=jn;jn|=4,Tg.current=null,_j(s,d),m2(d,s),pu(Xl),sl=!!Nu,Xl=Nu=null,s.current=d,Aj(d),Ar(),jn=ge,Pe=G,go.transition=k}else s.current=d;if(op&&(op=!1,Fc=s,lp=N),k=s.pendingLanes,k===0&&(Ic=null),Us(d.stateNode),Ia(s,wr()),l!==null)for(g=s.onRecoverableError,d=0;d<l.length;d++)N=l[d],g(N.value,{componentStack:N.stack,digest:N.digest});if(ap)throw ap=!1,s=Rg,Rg=null,s;return(lp&1)!==0&&s.tag!==0&&bd(),k=s.pendingLanes,(k&1)!==0?s===Dg?Mf++:(Mf=0,Dg=s):Mf=0,R(),null}function bd(){if(Fc!==null){var s=je(lp),l=go.transition,d=Pe;try{if(go.transition=null,Pe=16>s?16:s,Fc===null)var g=!1;else{if(s=Fc,Fc=null,lp=0,(jn&6)!==0)throw Error(r(331));var N=jn;for(jn|=4,Gt=s.current;Gt!==null;){var k=Gt,G=k.child;if((Gt.flags&16)!==0){var ge=k.deletions;if(ge!==null){for(var Ae=0;Ae<ge.length;Ae++){var He=ge[Ae];for(Gt=He;Gt!==null;){var mt=Gt;switch(mt.tag){case 0:case 11:case 15:If(8,mt,k)}var yt=mt.child;if(yt!==null)yt.return=mt,Gt=yt;else for(;Gt!==null;){mt=Gt;var ht=mt.sibling,Mt=mt.return;if(u2(mt),mt===He){Gt=null;break}if(ht!==null){ht.return=Mt,Gt=ht;break}Gt=Mt}}}var Jt=k.alternate;if(Jt!==null){var nr=Jt.child;if(nr!==null){Jt.child=null;do{var Ws=nr.sibling;nr.sibling=null,nr=Ws}while(nr!==null)}}Gt=k}}if((k.subtreeFlags&2064)!==0&&G!==null)G.return=k,Gt=G;else e:for(;Gt!==null;){if(k=Gt,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:If(9,k,k.return)}var Me=k.sibling;if(Me!==null){Me.return=k.return,Gt=Me;break e}Gt=k.return}}var Te=s.current;for(Gt=Te;Gt!==null;){G=Gt;var Ue=G.child;if((G.subtreeFlags&2064)!==0&&Ue!==null)Ue.return=G,Gt=Ue;else e:for(G=Te;Gt!==null;){if(ge=Gt,(ge.flags&2048)!==0)try{switch(ge.tag){case 0:case 11:case 15:np(9,ge)}}catch(lr){Ms(ge,ge.return,lr)}if(ge===G){Gt=null;break e}var Nt=ge.sibling;if(Nt!==null){Nt.return=ge.return,Gt=Nt;break e}Gt=ge.return}}if(jn=N,R(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Or,s)}catch{}g=!0}return g}finally{Pe=d,go.transition=l}}return!1}function _2(s,l,d){l=gd(d,l),l=V1(s,l,1),s=_s(s,l,1),l=ya(),s!==null&&(q(s,1,l),Ia(s,l))}function Ms(s,l,d){if(s.tag===3)_2(s,s,d);else for(;l!==null;){if(l.tag===3){_2(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ic===null||!Ic.has(g))){s=gd(d,s),s=H1(l,s,1),l=_s(l,s,1),s=ya(),l!==null&&(q(l,1,s),Ia(l,s));break}}l=l.return}}function Rj(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),l=ya(),s.pingedLanes|=s.suspendedLanes&d,Pi===s&&(Mi&d)===d&&(vi===4||vi===3&&(Mi&130023424)===Mi&&500>wr()-Lg?Tu(s,0):Eg|=d),Ia(s,l)}function A2(s,l){l===0&&((s.mode&1)===0?l=1:(l=is,is<<=1,(is&130023424)===0&&(is=4194304)));var d=ya();s=qn(s,l),s!==null&&(q(s,l,d),Ia(s,d))}function Dj(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),A2(s,d)}function Ij(s,l){var d=0;switch(s.tag){case 13:var g=s.stateNode,N=s.memoizedState;N!==null&&(d=N.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(l),A2(s,d)}var P2;P2=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||Qi.current)Ra=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return Ra=!1,Nj(s,l,d);Ra=(s.flags&131072)!==0}else Ra=!1,nt&&(l.flags&1048576)!==0&&De(l,J,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;tp(s,l),s=l.pendingProps;var N=kc(l,mi.current);ms(l,d),N=Cu(null,l,g,s,N,d);var k=mo();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Zi(g)?(k=!0,tc(l)):k=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,gi(l),N.updater=Jh,l.stateNode=N,N._reactInternals=l,gg(l,g,s,d),l=bg(null,l,g,!0,k,d)):(l.tag=0,nt&&k&&Xe(l),xa(null,l,N,d),l=l.child),l;case 16:g=l.elementType;e:{switch(tp(s,l),s=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=Oj(g),s=Fo(g,s),N){case 0:l=yg(null,l,g,s,d);break e;case 1:l=e2(null,l,g,s,d);break e;case 11:l=Q1(null,l,g,s,d);break e;case 14:l=Z1(null,l,g,Fo(g.type,s),d);break e}throw Error(r(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Fo(g,N),yg(s,l,g,N,d);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Fo(g,N),e2(s,l,g,N,d);case 3:e:{if(t2(l),s===null)throw Error(r(387));g=l.pendingProps,k=l.memoizedState,N=k.element,Yi(s,l),Ai(l,g,null,d);var G=l.memoizedState;if(g=G.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){N=gd(Error(r(423)),l),l=r2(s,l,g,d,N);break e}else if(g!==N){N=gd(Error(r(424)),l),l=r2(s,l,g,d,N);break e}else for(Ye=Fi(l.stateNode.containerInfo.firstChild),Ke=l,nt=!0,at=null,d=os(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(zt(),g===N){l=nc(s,l,d);break e}xa(s,l,g,d)}l=l.child}return l;case 5:return Gh(l),s===null&&Zt(l),g=l.type,N=l.pendingProps,k=s!==null?s.memoizedProps:null,G=N.children,jf(g,N)?G=null:k!==null&&jf(g,k)&&(l.flags|=32),J1(s,l),xa(s,l,G,d),l.child;case 6:return s===null&&Zt(l),null;case 13:return n2(s,l,d);case 4:return Tc(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Is(l,null,g,d):xa(s,l,g,d),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Fo(g,N),Q1(s,l,g,N,d);case 7:return xa(s,l,l.pendingProps,d),l.child;case 8:return xa(s,l,l.pendingProps.children,d),l.child;case 12:return xa(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,k=l.memoizedProps,G=N.value,Rn(Vs,g._currentValue),g._currentValue=G,k!==null)if(fs(k.value,G)){if(k.children===N.children&&!Qi.current){l=nc(s,l,d);break e}}else for(k=l.child,k!==null&&(k.return=l);k!==null;){var ge=k.dependencies;if(ge!==null){G=k.child;for(var Ae=ge.firstContext;Ae!==null;){if(Ae.context===g){if(k.tag===1){Ae=Cs(-1,d&-d),Ae.tag=2;var He=k.updateQueue;if(He!==null){He=He.shared;var mt=He.pending;mt===null?Ae.next=Ae:(Ae.next=mt.next,mt.next=Ae),He.pending=Ae}}k.lanes|=d,Ae=k.alternate,Ae!==null&&(Ae.lanes|=d),Sn(k.return,d,l),ge.lanes|=d;break}Ae=Ae.next}}else if(k.tag===10)G=k.type===l.type?null:k.child;else if(k.tag===18){if(G=k.return,G===null)throw Error(r(341));G.lanes|=d,ge=G.alternate,ge!==null&&(ge.lanes|=d),Sn(G,d,l),G=k.sibling}else G=k.child;if(G!==null)G.return=k;else for(G=k;G!==null;){if(G===l){G=null;break}if(k=G.sibling,k!==null){k.return=G.return,G=k;break}G=G.return}k=G}xa(s,l,N.children,d),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,ms(l,d),N=gs(N),g=g(N),l.flags|=1,xa(s,l,g,d),l.child;case 14:return g=l.type,N=Fo(g,l.pendingProps),N=Fo(g.type,N),Z1(s,l,g,N,d);case 15:return Y1(s,l,l.type,l.pendingProps,d);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Fo(g,N),tp(s,l),l.tag=1,Zi(g)?(s=!0,tc(l)):s=!1,ms(l,d),z1(l,g,N),gg(l,g,N,d),bg(null,l,g,!0,s,d);case 19:return i2(s,l,d);case 22:return X1(s,l,d)}throw Error(r(156,l.tag))};function k2(s,l){return Ht(s,l)}function Fj(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vo(s,l,d,g){return new Fj(s,l,d,g)}function qg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Oj(s){if(typeof s=="function")return qg(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===Ne)return 14}return 2}function Bc(s,l){var d=s.alternate;return d===null?(d=vo(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function fp(s,l,d,g,N,k){var G=2;if(g=s,typeof s=="function")qg(s)&&(G=1);else if(typeof s=="string")G=5;else e:switch(s){case W:return Lu(d.children,N,k,l);case te:G=8,N|=8;break;case Q:return s=vo(12,d,l,N|2),s.elementType=Q,s.lanes=k,s;case X:return s=vo(13,d,l,N),s.elementType=X,s.lanes=k,s;case Y:return s=vo(19,d,l,N),s.elementType=Y,s.lanes=k,s;case we:return hp(d,N,k,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case fe:G=10;break e;case U:G=9;break e;case F:G=11;break e;case Ne:G=14;break e;case be:G=16,g=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return l=vo(G,d,l,N),l.elementType=s,l.type=g,l.lanes=k,l}function Lu(s,l,d,g){return s=vo(7,s,g,l),s.lanes=d,s}function hp(s,l,d,g){return s=vo(22,s,g,l),s.elementType=we,s.lanes=d,s.stateNode={isHidden:!1},s}function Ug(s,l,d){return s=vo(6,s,null,l),s.lanes=d,s}function zg(s,l,d){return l=vo(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Mj(s,l,d,g,N){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zs(0),this.expirationTimes=zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function $g(s,l,d,g,N,k,G,ge,Ae){return s=new Mj(s,l,d,ge,Ae),l===1?(l=1,k===!0&&(l|=8)):l=0,k=vo(3,null,null,l),s.current=k,k.stateNode=s,k.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},gi(k),s}function Bj(s,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:g==null?null:""+g,children:s,containerInfo:l,implementation:d}}function T2(s){if(!s)return gl;s=s._reactInternals;e:{if(vt(s)!==s||s.tag!==1)throw Error(r(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Zi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(s.tag===1){var d=s.type;if(Zi(d))return Pf(s,d,l)}return l}function E2(s,l,d,g,N,k,G,ge,Ae){return s=$g(d,g,!0,s,N,k,G,ge,Ae),s.context=T2(null),d=s.current,g=ya(),N=Oc(d),k=Cs(g,N),k.callback=l??null,_s(d,k,N),s.current.lanes=N,q(s,N,g),Ia(s,g),s}function pp(s,l,d,g){var N=l.current,k=ya(),G=Oc(N);return d=T2(d),l.context===null?l.context=d:l.pendingContext=d,l=Cs(k,G),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=_s(N,l,G),s!==null&&(Bo(s,N,G,k),_i(s,N,G)),G}function mp(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function L2(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Vg(s,l){L2(s,l),(s=s.alternate)&&L2(s,l)}function qj(){return null}var R2=typeof reportError=="function"?reportError:function(s){console.error(s)};function Hg(s){this._internalRoot=s}gp.prototype.render=Hg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));pp(s,l,null,null)},gp.prototype.unmount=Hg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;ku(function(){pp(null,s,null,null)}),l[ji]=null}};function gp(s){this._internalRoot=s}gp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Kn();s={blockedOn:null,target:s,priority:l};for(var d=0;d<zi.length&&l!==0&&l<zi[d].priority;d++);zi.splice(d,0,s),d===0&&$n(s)}};function Wg(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function vp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function D2(){}function Uj(s,l,d,g,N){if(N){if(typeof g=="function"){var k=g;g=function(){var He=mp(G);k.call(He)}}var G=E2(l,g,s,0,null,!1,!1,"",D2);return s._reactRootContainer=G,s[ji]=G.current,Zl(s.nodeType===8?s.parentNode:s),ku(),G}for(;N=s.lastChild;)s.removeChild(N);if(typeof g=="function"){var ge=g;g=function(){var He=mp(Ae);ge.call(He)}}var Ae=$g(s,0,!1,null,null,!1,!1,"",D2);return s._reactRootContainer=Ae,s[ji]=Ae.current,Zl(s.nodeType===8?s.parentNode:s),ku(function(){pp(l,Ae,d,g)}),Ae}function xp(s,l,d,g,N){var k=d._reactRootContainer;if(k){var G=k;if(typeof N=="function"){var ge=N;N=function(){var Ae=mp(G);ge.call(Ae)}}pp(l,G,s,N)}else G=Uj(d,l,s,N,g);return mp(G)}Wt=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=bi(l.pendingLanes);d!==0&&(ye(l,d|1),Ia(l,wr()),(jn&6)===0&&(yd=wr()+500,R()))}break;case 13:ku(function(){var g=qn(s,1);if(g!==null){var N=ya();Bo(g,s,1,N)}}),Vg(s,1)}},On=function(s){if(s.tag===13){var l=qn(s,134217728);if(l!==null){var d=ya();Bo(l,s,134217728,d)}Vg(s,134217728)}},pr=function(s){if(s.tag===13){var l=Oc(s),d=qn(s,l);if(d!==null){var g=ya();Bo(d,s,l,g)}Vg(s,l)}},Kn=function(){return Pe},Ls=function(s,l){var d=Pe;try{return Pe=s,l()}finally{Pe=d}},gr=function(s,l,d){switch(l){case"input":if(We(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var N=Su(g);if(!N)throw Error(r(90));lt(g),We(g,N)}}}break;case"textarea":Ie(s,d);break;case"select":l=d.value,l!=null&&Ct(s,!!d.multiple,l,!1)}},En=Og,Js=ku;var zj={usingClientEntryPoint:!1,Events:[Pc,Jl,Su,fr,ss,Og]},Bf={findFiberByHostInstance:ml,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$j={bundleType:Bf.bundleType,version:Bf.version,rendererPackageName:Bf.rendererPackageName,rendererConfig:Bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=It(s),s===null?null:s.stateNode},findFiberByHostInstance:Bf.findFiberByHostInstance||qj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yp.isDisabled&&yp.supportsFiber)try{Or=yp.inject($j),Xr=yp}catch{}}return Fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zj,Fa.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(l))throw Error(r(200));return Bj(s,l,null,d)},Fa.createRoot=function(s,l){if(!Wg(s))throw Error(r(299));var d=!1,g="",N=R2;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=$g(s,1,!1,null,null,d,!1,g,N),s[ji]=l.current,Zl(s.nodeType===8?s.parentNode:s),new Hg(l)},Fa.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=It(l),s=s===null?null:s.stateNode,s},Fa.flushSync=function(s){return ku(s)},Fa.hydrate=function(s,l,d){if(!vp(l))throw Error(r(200));return xp(null,s,l,!0,d)},Fa.hydrateRoot=function(s,l,d){if(!Wg(s))throw Error(r(405));var g=d!=null&&d.hydratedSources||null,N=!1,k="",G=R2;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(k=d.identifierPrefix),d.onRecoverableError!==void 0&&(G=d.onRecoverableError)),l=E2(l,null,s,1,d??null,N,!1,k,G),s[ji]=l.current,Zl(s),g)for(s=0;s<g.length;s++)d=g[s],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new gp(l)},Fa.render=function(s,l,d){if(!vp(l))throw Error(r(200));return xp(null,s,l,!1,d)},Fa.unmountComponentAtNode=function(s){if(!vp(s))throw Error(r(40));return s._reactRootContainer?(ku(function(){xp(null,null,s,!1,function(){s._reactRootContainer=null,s[ji]=null})}),!0):!1},Fa.unstable_batchedUpdates=Og,Fa.unstable_renderSubtreeIntoContainer=function(s,l,d,g){if(!vp(d))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return xp(s,l,d,!1,g)},Fa.version="18.3.1-next-f1338f8080-20240426",Fa}var z2;function E5(){if(z2)return Qg.exports;z2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qg.exports=Yj(),Qg.exports}var $2;function Xj(){if($2)return bp;$2=1;var t=E5();return bp.createRoot=t.createRoot,bp.hydrateRoot=t.hydrateRoot,bp}var Jj=Xj();function e3(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,a,o,u=[],c="",f=t.split("/");for(f[0]||f.shift();a=f.shift();)r=a[0],r==="*"?(u.push(r),c+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),o=a.indexOf(".",1),u.push(a.substring(1,~n?n:~o?o:a.length)),c+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~n?"?":"")+"\\"+a.substring(o))):c+="/"+a;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var L=Tm();const xr=T5(L),L5=Hj({__proto__:null,default:xr},[L]);var Xg={exports:{}},Jg={};var V2;function t3(){if(V2)return Jg;V2=1;var t=Tm();function e(b,A){return b===A&&(b!==0||1/b===1/A)||b!==b&&A!==A}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(b,A){var y=A(),D=n({inst:{value:y,getSnapshot:A}}),S=D[0].inst,E=D[1];return o(function(){S.value=y,S.getSnapshot=A,f(S)&&E({inst:S})},[b,y,A]),a(function(){return f(S)&&E({inst:S}),b(function(){f(S)&&E({inst:S})})},[b]),u(y),y}function f(b){var A=b.getSnapshot;b=b.value;try{var y=A();return!r(b,y)}catch{return!0}}function p(b,A){return A()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return Jg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Jg}var H2;function r3(){return H2||(H2=1,Xg.exports=t3()),Xg.exports}var n3=r3();const s3=L5.useInsertionEffect,i3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R5=i3?L.useLayoutEffect:L.useEffect,a3=s3||R5,Iv=t=>{const e=L.useRef([t,(...r)=>e[0](...r)]).current;return a3(()=>{e[0]=t}),e[1]},o3="popstate",Fv="pushState",Ov="replaceState",l3="hashchange",W2=[o3,Fv,Ov,l3],c3=t=>{for(const e of W2)addEventListener(e,t);return()=>{for(const e of W2)removeEventListener(e,t)}},D5=(t,e)=>n3.useSyncExternalStore(c3,t,e),u3=()=>location.search,d3=({ssrSearch:t=""}={})=>D5(u3,()=>t),G2=()=>location.pathname,f3=({ssrPath:t}={})=>D5(G2,t?()=>t:G2),h3=(t,{replace:e=!1,state:r=null}={})=>history[e?Ov:Fv](r,"",t),p3=(t={})=>[f3(t),h3],K2=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[K2]>"u"){for(const t of[Fv,Ov]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,K2,{value:!0})}const m3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",I5=(t="")=>t==="/"?"":t,g3=(t,e)=>t[0]==="~"?t.slice(1):I5(e)+t,v3=(t="",e)=>m3(Q2(I5(t)),Q2(e)),Q2=t=>{try{return decodeURI(t)}catch{return t}},F5={hook:p3,searchHook:d3,parser:e3,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},O5=L.createContext(F5),kh=()=>L.useContext(O5),M5={},B5=L.createContext(M5),Qu=()=>L.useContext(B5),Em=t=>{const[e,r]=t.hook(t);return[v3(t.base,e),Iv((n,a)=>r(g3(n,t.base),a))]},Ma=()=>Em(kh()),q5=(t,e,r,n)=>{const{pattern:a,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),u=a.exec(r)||[],[c,...f]=u;return c!==void 0?[!0,(()=>{const p=o!==!1?Object.fromEntries(o.map((b,A)=>[b,f[A]])):u.groups;let m={...f};return p&&Object.assign(m,p),m})(),...n?[c]:[]]:[!1,null]},x3=({children:t,...e})=>{const r=kh(),n=e.hook?F5:r;let a=n;const[o,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??e.hook?.hrefs;let c=L.useRef({}),f=c.current,p=f;for(let m in n){const b=m==="base"?n[m]+(e[m]||""):e[m]||n[m];f===p&&b!==p[m]&&(c.current=p={...p}),p[m]=b,b!==n[m]&&(a=p)}return L.createElement(O5.Provider,{value:a,children:t})},Z2=({children:t,component:e},r)=>e?L.createElement(e,{params:r}):typeof t=="function"?t(r):t,y3=t=>{let e=L.useRef(M5),r=e.current;for(const n in t)t[n]!==r[n]&&(r=t);return Object.keys(t).length===0&&(r=t),e.current=r},Ti=({path:t,nest:e,match:r,...n})=>{const a=kh(),[o]=Em(a),[u,c,f]=r??q5(a.parser,t,o,e),p=y3({...Qu(),...c});if(!u)return null;const m=f?L.createElement(x3,{base:f},Z2(n,p)):Z2(n,p);return L.createElement(B5.Provider,{value:p,children:m})},U5=L.forwardRef((t,e)=>{const r=kh(),[n,a]=Em(r),{to:o="",href:u=o,onClick:c,asChild:f,children:p,className:m,replace:b,state:A,...y}=t,D=Iv(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(c?.(E),E.defaultPrevented||(E.preventDefault(),a(u,t)))}),S=r.hrefs(u[0]==="~"?u.slice(1):r.base+u,r);return f&&L.isValidElement(p)?L.cloneElement(p,{onClick:D,href:S}):L.createElement("a",{...y,onClick:D,href:S,className:m?.call?m(n===u):m,children:p,ref:e})}),z5=t=>Array.isArray(t)?t.flatMap(e=>z5(e&&e.type===L.Fragment?e.props.children:e)):[t],b3=({children:t,location:e})=>{const r=kh(),[n]=Em(r);for(const a of z5(t)){let o=0;if(L.isValidElement(a)&&(o=q5(r.parser,a.props.path,e||n,a.props.nest))[0])return L.cloneElement(a,{match:o})}return null},w3=t=>{const{to:e,href:r=e}=t,[,n]=Ma(),a=Iv(()=>n(e||r,t));return R5(()=>{a()},[]),null};var rf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mu=typeof window>"u"||"Deno"in globalThis;function xo(){}function N3(t,e){return typeof t=="function"?t(e):t}function z0(t){return typeof t=="number"&&t>=0&&t!==1/0}function $5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fd(t,e){return typeof t=="function"?t(e):t}function $o(t,e){return typeof t=="function"?t(e):t}function Y2(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:u,stale:c}=t;if(u){if(n){if(e.queryHash!==Mv(u,e.options))return!1}else if(!ih(e.queryKey,u))return!1}if(r!=="all"){const f=e.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function X2(t,e){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Bu(e.options.mutationKey)!==Bu(o))return!1}else if(!ih(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function Mv(t,e){return(e?.queryKeyHashFn||Bu)(t)}function Bu(t){return JSON.stringify(t,(e,r)=>$0(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function ih(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ih(t[r],e[r])):!1}function V5(t,e){if(t===e)return t;const r=J2(t)&&J2(e);if(r||$0(t)&&$0(e)){const n=r?t:Object.keys(t),a=n.length,o=r?e:Object.keys(e),u=o.length,c=r?[]:{};let f=0;for(let p=0;p<u;p++){const m=r?p:o[p];(!r&&n.includes(m)||r)&&t[m]===void 0&&e[m]===void 0?(c[m]=void 0,f++):(c[m]=V5(t[m],e[m]),c[m]===t[m]&&t[m]!==void 0&&f++)}return a===u&&f===a?t:c}return e}function tm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function J2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $0(t){if(!ex(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!ex(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ex(t){return Object.prototype.toString.call(t)==="[object Object]"}function S3(t){return new Promise(e=>{setTimeout(e,t)})}function V0(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?V5(t,e):e}function j3(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function C3(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Bv=Symbol();function H5(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Bv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _3=class extends rf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Mu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},qv=new _3,A3=class extends rf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Mu&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},rm=new A3;function H0(){let t,e;const r=new Promise((a,o)=>{t=a,e=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}function P3(t){return Math.min(1e3*2**t,3e4)}function W5(t){return(t??"online")==="online"?rm.isOnline():!0}var G5=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function e0(t){return t instanceof G5}function K5(t){let e=!1,r=0,n=!1,a;const o=H0(),u=S=>{n||(A(new G5(S)),t.abort?.())},c=()=>{e=!0},f=()=>{e=!1},p=()=>qv.isFocused()&&(t.networkMode==="always"||rm.isOnline())&&t.canRun(),m=()=>W5(t.networkMode)&&t.canRun(),b=S=>{n||(n=!0,t.onSuccess?.(S),a?.(),o.resolve(S))},A=S=>{n||(n=!0,t.onError?.(S),a?.(),o.reject(S))},y=()=>new Promise(S=>{a=E=>{(n||p())&&S(E)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),D=()=>{if(n)return;let S;const E=r===0?t.initialPromise:void 0;try{S=E??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(b).catch(_=>{if(n)return;const O=t.retry??(Mu?0:3),T=t.retryDelay??P3,z=typeof T=="function"?T(r,_):T,re=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,_);if(e||!re){A(_);return}r++,t.onFail?.(r,_),S3(z).then(()=>p()?void 0:y()).then(()=>{e?A(_):D()})})};return{promise:o,cancel:u,continue:()=>(a?.(),o),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?D():y().then(D),o)}}function k3(){let t=[],e=0,r=c=>{c()},n=c=>{c()},a=c=>setTimeout(c,0);const o=c=>{e?t.push(c):a(()=>{r(c)})},u=()=>{const c=t;t=[],c.length&&a(()=>{n(()=>{c.forEach(f=>{r(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||u()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{a=c}}}var yi=k3(),Q5=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z0(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},T3=class extends Q5{#e;#t;#n;#r;#a;#i;constructor(t){super(),this.#i=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=E3(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const r=V0(this.state.data,t,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(xo).catch(xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>$o(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},a=()=>{const c=H5(this.options,e),f={queryKey:this.queryKey,meta:this.meta};return n(f),this.#i=!1,this.options.persister?this.options.persister(c,f,this):c(f)},o={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const u=c=>{e0(c)&&c.silent||this.#s({type:"error",error:c}),e0(c)||(this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#r=K5({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(f){u(f);return}this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,f)=>{this.#s({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#r.start()}#s(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Z5(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return e0(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),yi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Z5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function E3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var L3=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,a=e.queryHash??Mv(n,e);let o=this.get(a);return o||(o=new T3({cache:this,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>Y2(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>Y2(t,r)):e}notify(t){yi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},R3=class extends Q5{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||Y5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=K5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,a)=>{this.#r({type:"failed",failureCount:n,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",r=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#r({type:"pending",context:a,variables:t,isPaused:r})}const n=await this.#n.start();return await this.#t.config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),this.#r({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{this.#r({type:"error",error:n})}}finally{this.#t.runNext(this)}}#r(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),yi.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function Y5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var D3=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,r){const n=new R3({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){const e=wp(t),r=this.#e.get(e)??[];r.push(t),this.#e.set(e,r),this.notify({type:"added",mutation:t})}remove(t){const e=wp(t);if(this.#e.has(e)){const r=this.#e.get(e)?.filter(n=>n!==t);r&&(r.length===0?this.#e.delete(e):this.#e.set(e,r))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(wp(t))?.find(r=>r.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(wp(t))?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){yi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(r=>X2(e,r))}findAll(t={}){return this.getAll().filter(e=>X2(t,e))}notify(t){yi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return yi.batch(()=>Promise.all(t.map(e=>e.continue().catch(xo))))}};function wp(t){return t.options.scope?.id??String(t.mutationId)}function tx(t){return{onFetch:(e,r)=>{const n=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const p=async()=>{let m=!1;const b=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},A=H5(e.options,e.fetchOptions),y=async(D,S,E)=>{if(m)return Promise.reject();if(S==null&&D.pages.length)return Promise.resolve(D);const _={queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};b(_);const O=await A(_),{maxPages:T}=e.options,z=E?C3:j3;return{pages:z(D.pages,O,T),pageParams:z(D.pageParams,S,T)}};if(a&&o.length){const D=a==="backward",S=D?I3:rx,E={pages:o,pageParams:u},_=S(n,E);c=await y(E,_,D)}else{const D=t??o.length;do{const S=f===0?u[0]??n.initialPageParam:rx(n,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<D)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=p}}}function rx(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function I3(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var F3=class{#e;#t;#n;#r;#a;#i;#s;#o;constructor(t={}){this.#e=t.queryCache||new L3,this.#t=t.mutationCache||new D3,this.#n=t.defaultOptions||{},this.#r=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=qv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=this.#e.build(this,r);return t.revalidateIfStale&&n.isStaleByTime(Fd(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(n.queryHash)?.state.data,u=N3(e,o);if(u!==void 0)return this.#e.build(this,n).setData(u,{...r,manual:!0})}setQueriesData(t,e,r){return yi.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;yi.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e,n={type:"active",...t};return yi.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=yi.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(xo).catch(xo)}invalidateQueries(t={},e={}){return yi.batch(()=>{if(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:e?.cancelRefetch??!0},n=yi.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(xo)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(xo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(Fd(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xo).catch(xo)}fetchInfiniteQuery(t){return t.behavior=tx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xo).catch(xo)}ensureInfiniteQueryData(t){return t.behavior=tx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rm.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Bu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()];let r={};return e.forEach(n=>{ih(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){this.#a.set(Bu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()];let r={};return e.forEach(n=>{ih(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Mv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Bv&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},O3=class extends rf{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#s=H0(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#a;#i;#s;#o;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),nx(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return W0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return W0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const r=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $o(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),r._defaulted&&!tm(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&sx(this.#t,n,this.options,r)&&this.#d(),this.updateResult(e),a&&(this.#t!==n||$o(this.options.enabled,this.#t)!==$o(r.enabled,this.#t)||Fd(this.options.staleTime,this.#t)!==Fd(r.staleTime,this.#t))&&this.#g();const o=this.#v();a&&(this.#t!==n||$o(this.options.enabled,this.#t)!==$o(r.enabled,this.#t)||o!==this.#l)&&this.#x(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(e,t);return B3(this,r)&&(this.#r=r,this.#i=this.options,this.#a=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e?.(n),t[n])})}),r}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#N();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(xo)),e}#g(){this.#b();const t=Fd(this.options.staleTime,this.#t);if(Mu||this.#r.isStale||!z0(t))return;const r=$5(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(t){this.#w(),this.#l=t,!(Mu||$o(this.options.enabled,this.#t)===!1||!z0(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||qv.isFocused())&&this.#d()},this.#l))}#y(){this.#g(),this.#x(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const r=this.#t,n=this.options,a=this.#r,o=this.#a,u=this.#i,f=t!==r?t.state:this.#n,{state:p}=t;let m={...p},b=!1,A;if(e._optimisticResults){const W=this.hasListeners(),te=!W&&nx(t,e),Q=W&&sx(t,r,e,n);(te||Q)&&(m={...m,...Z5(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:D,status:S}=m;if(e.select&&m.data!==void 0)if(a&&m.data===o?.data&&e.select===this.#m)A=this.#f;else try{this.#m=e.select,A=e.select(m.data),A=V0(a?.data,A,e),this.#f=A,this.#o=null}catch(W){this.#o=W}else A=m.data;if(e.placeholderData!==void 0&&A===void 0&&S==="pending"){let W;if(a?.isPlaceholderData&&e.placeholderData===u?.placeholderData)W=a.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#o=null}catch(te){this.#o=te}W!==void 0&&(S="success",A=V0(a?.data,W,e),b=!0)}this.#o&&(y=this.#o,A=this.#f,D=Date.now(),S="error");const E=m.fetchStatus==="fetching",_=S==="pending",O=S==="error",T=_&&E,z=A!==void 0,ae={status:S,fetchStatus:m.fetchStatus,isPending:_,isSuccess:S==="success",isError:O,isInitialLoading:T,isLoading:T,data:A,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:D,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:E,isRefetching:E&&!_,isLoadingError:O&&!z,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:O&&z,isStale:Uv(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const W=fe=>{ae.status==="error"?fe.reject(ae.error):ae.data!==void 0&&fe.resolve(ae.data)},te=()=>{const fe=this.#s=ae.promise=H0();W(fe)},Q=this.#s;switch(Q.status){case"pending":t.queryHash===r.queryHash&&W(Q);break;case"fulfilled":(ae.status==="error"||ae.data!==Q.value)&&te();break;case"rejected":(ae.status!=="error"||ae.error!==Q.reason)&&te();break}}return ae}updateResult(t){const e=this.#r,r=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#h=this.#t),tm(r,e))return;this.#r=r;const n={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!this.#p.size)return!0;const c=new Set(u??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#r).some(f=>{const p=f;return this.#r[p]!==e[p]&&c.has(p)})};t?.listeners!==!1&&a()&&(n.listeners=!0),this.#S({...n,...t})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(t){yi.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function M3(t,e){return $o(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function nx(t,e){return M3(t,e)||t.state.data!==void 0&&W0(t,e,e.refetchOnMount)}function W0(t,e,r){if($o(e.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Uv(t,e)}return!1}function sx(t,e,r,n){return(t!==e||$o(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Uv(t,r)}function Uv(t,e){return $o(e.enabled,t)!==!1&&t.isStaleByTime(Fd(e.staleTime,t))}function B3(t,e){return!tm(t.getCurrentResult(),e)}var q3=class extends rf{#e;#t=void 0;#n;#r;constructor(e,r){super(),this.#e=e,this.setOptions(r),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const r=this.options;this.options=this.#e.defaultMutationOptions(e),tm(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Bu(r.mutationKey)!==Bu(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#i()}mutate(e,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#a(){const e=this.#n?.state??Y5();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){yi.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,r,n),this.#r.onSettled?.(e.data,null,r,n)):e?.type==="error"&&(this.#r.onError?.(e.error,r,n),this.#r.onSettled?.(void 0,e.error,r,n))}this.listeners.forEach(r=>{r(this.#t)})})}},X5=L.createContext(void 0),Lm=t=>{const e=L.useContext(X5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},U3=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(X5.Provider,{value:t,children:e})),J5=L.createContext(!1),z3=()=>L.useContext(J5);J5.Provider;function $3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var V3=L.createContext($3()),H3=()=>L.useContext(V3);function eb(t,e){return typeof t=="function"?t(...e):!!t}function G0(){}var W3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},G3=t=>{L.useEffect(()=>{t.clearReset()},[t])},K3=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&eb(r,[t.error,n]),Q3=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Z3=(t,e)=>t.isLoading&&t.isFetching&&!e,Y3=(t,e)=>t?.suspense&&e.isPending,ix=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function X3(t,e,r){const n=Lm(),a=z3(),o=H3(),u=n.defaultQueryOptions(t);n.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=a?"isRestoring":"optimistic",Q3(u),W3(u,o),G3(o);const c=!n.getQueryCache().get(u.queryHash),[f]=L.useState(()=>new e(n,u)),p=f.getOptimisticResult(u);if(L.useSyncExternalStore(L.useCallback(m=>{const b=a?G0:f.subscribe(yi.batchCalls(m));return f.updateResult(),b},[f,a]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),L.useEffect(()=>{f.setOptions(u,{listeners:!1})},[u,f]),Y3(u,p))throw ix(u,f,o);if(K3({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:n.getQueryCache().get(u.queryHash)}))throw p.error;return n.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!Mu&&Z3(p,a)&&(c?ix(u,f,o):n.getQueryCache().get(u.queryHash)?.promise)?.catch(G0).finally(()=>{f.updateResult()}),u.notifyOnChangeProps?p:f.trackResult(p)}function Ir(t,e){return X3(t,O3)}function kn(t,e){const r=Lm(),[n]=L.useState(()=>new q3(r,t));L.useEffect(()=>{n.setOptions(t)},[n,t]);const a=L.useSyncExternalStore(L.useCallback(u=>n.subscribe(yi.batchCalls(u)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=L.useCallback((u,c)=>{n.mutate(u,c).catch(G0)},[n]);if(a.error&&eb(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function tb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function kr(t,e,r){const n=await fetch(e,{method:t,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await tb(n),n}const J3=({on401:t})=>async({queryKey:e})=>{const r=await fetch(e.join("/revira"),{credentials:"include"});return await tb(r),await r.json()},Rr=new F3({defaultOptions:{queries:{queryFn:J3({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),eC=1,tC=1e6;let t0=0;function rC(){return t0=(t0+1)%Number.MAX_SAFE_INTEGER,t0.toString()}const r0=new Map,ax=t=>{if(r0.has(t))return;const e=setTimeout(()=>{r0.delete(t),Jf({type:"REMOVE_TOAST",toastId:t})},tC);r0.set(t,e)},nC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,eC)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?ax(r):t.toasts.forEach(n=>{ax(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Bp=[];let qp={toasts:[]};function Jf(t){qp=nC(qp,t),Bp.forEach(e=>{e(qp)})}function sC({...t}){const e=rC(),r=a=>Jf({type:"UPDATE_TOAST",toast:{...a,id:e}}),n=()=>Jf({type:"DISMISS_TOAST",toastId:e});return Jf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||n()}}}),{id:e,dismiss:n,update:r}}function Ba(){const[t,e]=L.useState(qp);return L.useEffect(()=>(Bp.push(e),()=>{const r=Bp.indexOf(e);r>-1&&Bp.splice(r,1)}),[t]),{...t,toast:sC,dismiss:r=>Jf({type:"DISMISS_TOAST",toastId:r})}}var nf=E5();const iC=T5(nf);function Hr(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return e?.(a)}}function ox(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function rb(...t){return e=>{let r=!1;const n=t.map(a=>{const o=ox(a,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():ox(t[a],null)}}}}function Wn(...t){return L.useCallback(rb(...t),t)}function aC(t,e){const r=L.createContext(e),n=o=>{const{children:u,...c}=o,f=L.useMemo(()=>c,Object.values(c));return i.jsx(r.Provider,{value:f,children:u})};n.displayName=t+"Provider";function a(o){const u=L.useContext(r);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,a]}function Rl(t,e=[]){let r=[];function n(o,u){const c=L.createContext(u),f=r.length;r=[...r,u];const p=b=>{const{scope:A,children:y,...D}=b,S=A?.[t]?.[f]||c,E=L.useMemo(()=>D,Object.values(D));return i.jsx(S.Provider,{value:E,children:y})};p.displayName=o+"Provider";function m(b,A){const y=A?.[t]?.[f]||c,D=L.useContext(y);if(D)return D;if(u!==void 0)return u;throw new Error(`\`${b}\` must be used within \`${o}\``)}return[p,m]}const a=()=>{const o=r.map(u=>L.createContext(u));return function(c){const f=c?.[t]||o;return L.useMemo(()=>({[`__scope${t}`]:{...c,[t]:f}}),[c,f])}};return a.scopeName=t,[n,oC(a,...e)]}function oC(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const u=n.reduce((c,{useScope:f,scopeName:p})=>{const b=f(o)[`__scope${p}`];return{...c,...b}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return r.scopeName=e.scopeName,r}function Kd(t){const e=lC(t),r=L.forwardRef((n,a)=>{const{children:o,...u}=n,c=L.Children.toArray(o),f=c.find(uC);if(f){const p=f.props.children,m=c.map(b=>b===f?L.Children.count(p)>1?L.Children.only(null):L.isValidElement(p)?p.props.children:null:b);return i.jsx(e,{...u,ref:a,children:L.isValidElement(p)?L.cloneElement(p,void 0,m):null})}return i.jsx(e,{...u,ref:a,children:o})});return r.displayName=`${t}.Slot`,r}var nb=Kd("Slot");function lC(t){const e=L.forwardRef((r,n)=>{const{children:a,...o}=r;if(L.isValidElement(a)){const u=fC(a),c=dC(o,a.props);return a.type!==L.Fragment&&(c.ref=n?rb(n,u):u),L.cloneElement(a,c)}return L.Children.count(a)>1?L.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var sb=Symbol("radix.slottable");function cC(t){const e=({children:r})=>i.jsx(i.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=sb,e}function uC(t){return L.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sb}function dC(t,e){const r={...e};for(const n in e){const a=t[n],o=e[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...c)=>{o(...c),a(...c)}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...t,...r}}function fC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function zv(t){const e=t+"CollectionProvider",[r,n]=Rl(e),[a,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:E,children:_}=S,O=xr.useRef(null),T=xr.useRef(new Map).current;return i.jsx(a,{scope:E,itemMap:T,collectionRef:O,children:_})};u.displayName=e;const c=t+"CollectionSlot",f=Kd(c),p=xr.forwardRef((S,E)=>{const{scope:_,children:O}=S,T=o(c,_),z=Wn(E,T.collectionRef);return i.jsx(f,{ref:z,children:O})});p.displayName=c;const m=t+"CollectionItemSlot",b="data-radix-collection-item",A=Kd(m),y=xr.forwardRef((S,E)=>{const{scope:_,children:O,...T}=S,z=xr.useRef(null),re=Wn(E,z),ae=o(m,_);return xr.useEffect(()=>(ae.itemMap.set(z,{ref:z,...T}),()=>{ae.itemMap.delete(z)})),i.jsx(A,{[b]:"",ref:re,children:O})});y.displayName=m;function D(S){const E=o(t+"CollectionConsumer",S);return xr.useCallback(()=>{const O=E.collectionRef.current;if(!O)return[];const T=Array.from(O.querySelectorAll(`[${b}]`));return Array.from(E.itemMap.values()).sort((ae,W)=>T.indexOf(ae.ref.current)-T.indexOf(W.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:u,Slot:p,ItemSlot:y},D,n]}var hC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Zr=hC.reduce((t,e)=>{const r=Kd(`Primitive.${e}`),n=L.forwardRef((a,o)=>{const{asChild:u,...c}=a,f=u?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(f,{...c,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ib(t,e){t&&nf.flushSync(()=>t.dispatchEvent(e))}function Oa(t){const e=L.useRef(t);return L.useEffect(()=>{e.current=t}),L.useMemo(()=>(...r)=>e.current?.(...r),[])}function pC(t,e=globalThis?.document){const r=Oa(t);L.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var mC="DismissableLayer",K0="dismissableLayer.update",gC="dismissableLayer.pointerDownOutside",vC="dismissableLayer.focusOutside",lx,ab=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Th=L.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:u,onDismiss:c,...f}=t,p=L.useContext(ab),[m,b]=L.useState(null),A=m?.ownerDocument??globalThis?.document,[,y]=L.useState({}),D=Wn(e,W=>b(W)),S=Array.from(p.layers),[E]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),_=S.indexOf(E),O=m?S.indexOf(m):-1,T=p.layersWithOutsidePointerEventsDisabled.size>0,z=O>=_,re=yC(W=>{const te=W.target,Q=[...p.branches].some(fe=>fe.contains(te));!z||Q||(a?.(W),u?.(W),W.defaultPrevented||c?.())},A),ae=bC(W=>{const te=W.target;[...p.branches].some(fe=>fe.contains(te))||(o?.(W),u?.(W),W.defaultPrevented||c?.())},A);return pC(W=>{O===p.layers.size-1&&(n?.(W),!W.defaultPrevented&&c&&(W.preventDefault(),c()))},A),L.useEffect(()=>{if(m)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(lx=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),cx(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=lx)}},[m,A,r,p]),L.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),cx())},[m,p]),L.useEffect(()=>{const W=()=>y({});return document.addEventListener(K0,W),()=>document.removeEventListener(K0,W)},[]),i.jsx(Zr.div,{...f,ref:D,style:{pointerEvents:T?z?"auto":"none":void 0,...t.style},onFocusCapture:Hr(t.onFocusCapture,ae.onFocusCapture),onBlurCapture:Hr(t.onBlurCapture,ae.onBlurCapture),onPointerDownCapture:Hr(t.onPointerDownCapture,re.onPointerDownCapture)})});Th.displayName=mC;var xC="DismissableLayerBranch",ob=L.forwardRef((t,e)=>{const r=L.useContext(ab),n=L.useRef(null),a=Wn(e,n);return L.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(Zr.div,{...t,ref:a})});ob.displayName=xC;function yC(t,e=globalThis?.document){const r=Oa(t),n=L.useRef(!1),a=L.useRef(()=>{});return L.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let f=function(){lb(gC,r,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=f,e.addEventListener("click",a.current,{once:!0})):f()}else e.removeEventListener("click",a.current);n.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function bC(t,e=globalThis?.document){const r=Oa(t),n=L.useRef(!1);return L.useEffect(()=>{const a=o=>{o.target&&!n.current&&lb(vC,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cx(){const t=new CustomEvent(K0);document.dispatchEvent(t)}function lb(t,e,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?ib(a,o):a.dispatchEvent(o)}var wC=Th,NC=ob,li=globalThis?.document?L.useLayoutEffect:()=>{},SC="Portal",Rm=L.forwardRef((t,e)=>{const{container:r,...n}=t,[a,o]=L.useState(!1);li(()=>o(!0),[]);const u=r||a&&globalThis?.document?.body;return u?iC.createPortal(i.jsx(Zr.div,{...n,ref:e}),u):null});Rm.displayName=SC;function jC(t,e){return L.useReducer((r,n)=>e[r][n]??r,t)}var cu=t=>{const{present:e,children:r}=t,n=CC(e),a=typeof r=="function"?r({present:n.isPresent}):L.Children.only(r),o=Wn(n.ref,_C(a));return typeof r=="function"||n.isPresent?L.cloneElement(a,{ref:o}):null};cu.displayName="Presence";function CC(t){const[e,r]=L.useState(),n=L.useRef({}),a=L.useRef(t),o=L.useRef("none"),u=t?"mounted":"unmounted",[c,f]=jC(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const p=Np(n.current);o.current=c==="mounted"?p:"none"},[c]),li(()=>{const p=n.current,m=a.current;if(m!==t){const A=o.current,y=Np(p);t?f("MOUNT"):y==="none"||p?.display==="none"?f("UNMOUNT"):f(m&&A!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,f]),li(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,b=y=>{const S=Np(n.current).includes(y.animationName);if(y.target===e&&S&&(f("ANIMATION_END"),!a.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},A=y=>{y.target===e&&(o.current=Np(n.current))};return e.addEventListener("animationstart",A),e.addEventListener("animationcancel",b),e.addEventListener("animationend",b),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",A),e.removeEventListener("animationcancel",b),e.removeEventListener("animationend",b)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:L.useCallback(p=>{p&&(n.current=getComputedStyle(p)),r(p)},[])}}function Np(t){return t?.animationName||"none"}function _C(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Jc({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,a]=AC({defaultProp:e,onChange:r}),o=t!==void 0,u=o?t:n,c=Oa(r),f=L.useCallback(p=>{if(o){const b=typeof p=="function"?p(t):p;b!==t&&c(b)}else a(p)},[o,t,a,c]);return[u,f]}function AC({defaultProp:t,onChange:e}){const r=L.useState(t),[n]=r,a=L.useRef(n),o=Oa(e);return L.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}var PC="VisuallyHidden",Eh=L.forwardRef((t,e)=>i.jsx(Zr.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Eh.displayName=PC;var kC=Eh,$v="ToastProvider",[Vv,TC,EC]=zv("Toast"),[cb]=Rl("Toast",[EC]),[LC,Dm]=cb($v),ub=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:u}=t,[c,f]=L.useState(null),[p,m]=L.useState(0),b=L.useRef(!1),A=L.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${$v}\`. Expected non-empty \`string\`.`),i.jsx(Vv.Provider,{scope:e,children:i.jsx(LC,{scope:e,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:c,onViewportChange:f,onToastAdd:L.useCallback(()=>m(y=>y+1),[]),onToastRemove:L.useCallback(()=>m(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:A,children:u})})};ub.displayName=$v;var db="ToastViewport",RC=["F8"],Q0="toast.viewportPause",Z0="toast.viewportResume",fb=L.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=RC,label:a="Notifications ({hotkey})",...o}=t,u=Dm(db,r),c=TC(r),f=L.useRef(null),p=L.useRef(null),m=L.useRef(null),b=L.useRef(null),A=Wn(e,b,u.onViewportChange),y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=u.toastCount>0;L.useEffect(()=>{const E=_=>{n.length!==0&&n.every(T=>_[T]||_.code===T)&&b.current?.focus()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[n]),L.useEffect(()=>{const E=f.current,_=b.current;if(D&&E&&_){const O=()=>{if(!u.isClosePausedRef.current){const ae=new CustomEvent(Q0);_.dispatchEvent(ae),u.isClosePausedRef.current=!0}},T=()=>{if(u.isClosePausedRef.current){const ae=new CustomEvent(Z0);_.dispatchEvent(ae),u.isClosePausedRef.current=!1}},z=ae=>{!E.contains(ae.relatedTarget)&&T()},re=()=>{E.contains(document.activeElement)||T()};return E.addEventListener("focusin",O),E.addEventListener("focusout",z),E.addEventListener("pointermove",O),E.addEventListener("pointerleave",re),window.addEventListener("blur",O),window.addEventListener("focus",T),()=>{E.removeEventListener("focusin",O),E.removeEventListener("focusout",z),E.removeEventListener("pointermove",O),E.removeEventListener("pointerleave",re),window.removeEventListener("blur",O),window.removeEventListener("focus",T)}}},[D,u.isClosePausedRef]);const S=L.useCallback(({tabbingDirection:E})=>{const O=c().map(T=>{const z=T.ref.current,re=[z,...WC(z)];return E==="forwards"?re:re.reverse()});return(E==="forwards"?O.reverse():O).flat()},[c]);return L.useEffect(()=>{const E=b.current;if(E){const _=O=>{const T=O.altKey||O.ctrlKey||O.metaKey;if(O.key==="Tab"&&!T){const re=document.activeElement,ae=O.shiftKey;if(O.target===E&&ae){p.current?.focus();return}const Q=S({tabbingDirection:ae?"backwards":"forwards"}),fe=Q.findIndex(U=>U===re);n0(Q.slice(fe+1))?O.preventDefault():ae?p.current?.focus():m.current?.focus()}};return E.addEventListener("keydown",_),()=>E.removeEventListener("keydown",_)}},[c,S]),i.jsxs(NC,{ref:f,role:"region","aria-label":a.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&i.jsx(Y0,{ref:p,onFocusFromOutsideViewport:()=>{const E=S({tabbingDirection:"forwards"});n0(E)}}),i.jsx(Vv.Slot,{scope:r,children:i.jsx(Zr.ol,{tabIndex:-1,...o,ref:A})}),D&&i.jsx(Y0,{ref:m,onFocusFromOutsideViewport:()=>{const E=S({tabbingDirection:"backwards"});n0(E)}})]})});fb.displayName=db;var hb="ToastFocusProxy",Y0=L.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,o=Dm(hb,r);return i.jsx(Eh,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:u=>{const c=u.relatedTarget;!o.viewport?.contains(c)&&n()}})});Y0.displayName=hb;var Im="Toast",DC="toast.swipeStart",IC="toast.swipeMove",FC="toast.swipeCancel",OC="toast.swipeEnd",pb=L.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...u}=t,[c=!0,f]=Jc({prop:n,defaultProp:a,onChange:o});return i.jsx(cu,{present:r||c,children:i.jsx(qC,{open:c,...u,ref:e,onClose:()=>f(!1),onPause:Oa(t.onPause),onResume:Oa(t.onResume),onSwipeStart:Hr(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Hr(t.onSwipeMove,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${b}px`)}),onSwipeCancel:Hr(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Hr(t.onSwipeEnd,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${b}px`),f(!1)})})})});pb.displayName=Im;var[MC,BC]=cb(Im,{onClose(){}}),qC=L.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:u,onEscapeKeyDown:c,onPause:f,onResume:p,onSwipeStart:m,onSwipeMove:b,onSwipeCancel:A,onSwipeEnd:y,...D}=t,S=Dm(Im,r),[E,_]=L.useState(null),O=Wn(e,Y=>_(Y)),T=L.useRef(null),z=L.useRef(null),re=a||S.duration,ae=L.useRef(0),W=L.useRef(re),te=L.useRef(0),{onToastAdd:Q,onToastRemove:fe}=S,U=Oa(()=>{E?.contains(document.activeElement)&&S.viewport?.focus(),u()}),F=L.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(te.current),ae.current=new Date().getTime(),te.current=window.setTimeout(U,Y))},[U]);L.useEffect(()=>{const Y=S.viewport;if(Y){const Ne=()=>{F(W.current),p?.()},be=()=>{const we=new Date().getTime()-ae.current;W.current=W.current-we,window.clearTimeout(te.current),f?.()};return Y.addEventListener(Q0,be),Y.addEventListener(Z0,Ne),()=>{Y.removeEventListener(Q0,be),Y.removeEventListener(Z0,Ne)}}},[S.viewport,re,f,p,F]),L.useEffect(()=>{o&&!S.isClosePausedRef.current&&F(re)},[o,re,S.isClosePausedRef,F]),L.useEffect(()=>(Q(),()=>fe()),[Q,fe]);const X=L.useMemo(()=>E?wb(E):null,[E]);return S.viewport?i.jsxs(i.Fragment,{children:[X&&i.jsx(UC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:X}),i.jsx(MC,{scope:r,onClose:U,children:nf.createPortal(i.jsx(Vv.ItemSlot,{scope:r,children:i.jsx(wC,{asChild:!0,onEscapeKeyDown:Hr(c,()=>{S.isFocusedToastEscapeKeyDownRef.current||U(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Zr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...D,ref:O,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Hr(t.onKeyDown,Y=>{Y.key==="Escape"&&(c?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:Hr(t.onPointerDown,Y=>{Y.button===0&&(T.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:Hr(t.onPointerMove,Y=>{if(!T.current)return;const Ne=Y.clientX-T.current.x,be=Y.clientY-T.current.y,we=!!z.current,se=["left","right"].includes(S.swipeDirection),me=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,I=se?me(0,Ne):0,j=se?0:me(0,be),x=Y.pointerType==="touch"?10:2,C={x:I,y:j},M={originalEvent:Y,delta:C};we?(z.current=C,Sp(IC,b,M,{discrete:!1})):ux(C,S.swipeDirection,x)?(z.current=C,Sp(DC,m,M,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(Ne)>x||Math.abs(be)>x)&&(T.current=null)}),onPointerUp:Hr(t.onPointerUp,Y=>{const Ne=z.current,be=Y.target;if(be.hasPointerCapture(Y.pointerId)&&be.releasePointerCapture(Y.pointerId),z.current=null,T.current=null,Ne){const we=Y.currentTarget,se={originalEvent:Y,delta:Ne};ux(Ne,S.swipeDirection,S.swipeThreshold)?Sp(OC,y,se,{discrete:!0}):Sp(FC,A,se,{discrete:!0}),we.addEventListener("click",me=>me.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),UC=t=>{const{__scopeToast:e,children:r,...n}=t,a=Dm(Im,e),[o,u]=L.useState(!1),[c,f]=L.useState(!1);return VC(()=>u(!0)),L.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),c?null:i.jsx(Rm,{asChild:!0,children:i.jsx(Eh,{...n,children:o&&i.jsxs(i.Fragment,{children:[a.label," ",r]})})})},zC="ToastTitle",mb=L.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(Zr.div,{...n,ref:e})});mb.displayName=zC;var $C="ToastDescription",gb=L.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(Zr.div,{...n,ref:e})});gb.displayName=$C;var vb="ToastAction",xb=L.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?i.jsx(bb,{altText:r,asChild:!0,children:i.jsx(Hv,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${vb}\`. Expected non-empty \`string\`.`),null)});xb.displayName=vb;var yb="ToastClose",Hv=L.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,a=BC(yb,r);return i.jsx(bb,{asChild:!0,children:i.jsx(Zr.button,{type:"button",...n,ref:e,onClick:Hr(t.onClick,a.onClose)})})});Hv.displayName=yb;var bb=L.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...a}=t;return i.jsx(Zr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function wb(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),HC(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const u=n.dataset.radixToastAnnounceAlt;u&&e.push(u)}else e.push(...wb(n))}}),e}function Sp(t,e,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?ib(a,o):a.dispatchEvent(o)}var ux=(t,e,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),o=n>a;return e==="left"||e==="right"?o&&n>r:!o&&a>r};function VC(t=()=>{}){const e=Oa(t);li(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function HC(t){return t.nodeType===t.ELEMENT_NODE}function WC(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function n0(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var GC=ub,Nb=fb,Sb=pb,jb=mb,Cb=gb,_b=xb,Ab=Hv;function Pb(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Pb(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function kb(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Pb(t))&&(n&&(n+=" "),n+=e);return n}const dx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,fx=kb,Fm=(t,e)=>r=>{var n;if(e?.variants==null)return fx(t,r?.class,r?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const m=r?.[p],b=o?.[p];if(m===null)return null;const A=dx(m)||dx(b);return a[p][A]}),c=r&&Object.entries(r).reduce((p,m)=>{let[b,A]=m;return A===void 0||(p[b]=A),p},{}),f=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((p,m)=>{let{class:b,className:A,...y}=m;return Object.entries(y).every(D=>{let[S,E]=D;return Array.isArray(E)?E.includes({...o,...c}[S]):{...o,...c}[S]===E})?[...p,b,A]:p},[]);return fx(t,u,f,r?.class,r?.className)};const KC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tb=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");var QC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZC=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:u,...c},f)=>L.createElement("svg",{ref:f,...QC,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Tb("lucide",a),...c},[...u.map(([p,m])=>L.createElement(p,m)),...Array.isArray(o)?o:[o]]));const Tr=(t,e)=>{const r=L.forwardRef(({className:n,...a},o)=>L.createElement(ZC,{ref:o,iconNode:e,className:Tb(`lucide-${KC(t)}`,n),...a}));return r.displayName=`${t}`,r};const sf=Tr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const YC=Tr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const XC=Tr("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const JC=Tr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const hx=Tr("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Wv=Tr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const e_=Tr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Rd=Tr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Od=Tr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Up=Tr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const t_=Tr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const X0=Tr("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const ah=Tr("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const J0=Tr("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);const Lh=Tr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Om=Tr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Uc=Tr("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const Na=Tr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const nm=Tr("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const Eb=Tr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const px=Tr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const r_=Tr("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);const sm=Tr("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const n_=Tr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ev=Tr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const s_=Tr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Rh=Tr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const eu=Tr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const i_=Tr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const a_=Tr("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const tv=Tr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const ic=Tr("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const qu=Tr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Lb=Tr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const xs=Tr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const rv=Tr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const af=Tr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const o_=Tr("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Gv=Tr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const l_=Tr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const c_=Tr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const u_=Tr("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);const Pn=Tr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const d_=Tr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const f_=Tr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const zc=Tr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const h_=Tr("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const oh=Tr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const p_=Tr("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const of=Tr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kv="-",m_=t=>{const e=v_(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:u=>{const c=u.split(Kv);return c[0]===""&&c.length!==1&&c.shift(),Rb(c,e)||g_(u)},getConflictingClassGroupIds:(u,c)=>{const f=r[u]||[];return c&&n[u]?[...f,...n[u]]:f}}},Rb=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),a=n?Rb(t.slice(1),n):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(Kv);return e.validators.find(({validator:u})=>u(o))?.classGroupId},mx=/^\[(.+)\]$/,g_=t=>{if(mx.test(t)){const e=mx.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},v_=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return y_(Object.entries(t.classGroups),r).forEach(([o,u])=>{nv(u,n,o,e)}),n},nv=(t,e,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:gx(e,a);o.classGroupId=r;return}if(typeof a=="function"){if(x_(a)){nv(a(n),e,r,n);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,u])=>{nv(u,gx(e,o),r,n)})})},gx=(t,e)=>{let r=t;return e.split(Kv).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},x_=t=>t.isThemeGetter,y_=(t,e)=>e?t.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([u,c])=>[e+u,c])):o);return[r,a]}):t,b_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const a=(o,u)=>{r.set(o,u),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let u=r.get(o);if(u!==void 0)return u;if((u=n.get(o))!==void 0)return a(o,u),u},set(o,u){r.has(o)?r.set(o,u):a(o,u)}}},Db="!",w_=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,a=e[0],o=e.length,u=c=>{const f=[];let p=0,m=0,b;for(let E=0;E<c.length;E++){let _=c[E];if(p===0){if(_===a&&(n||c.slice(E,E+o)===e)){f.push(c.slice(m,E)),m=E+o;continue}if(_==="/"){b=E;continue}}_==="["?p++:_==="]"&&p--}const A=f.length===0?c:c.substring(m),y=A.startsWith(Db),D=y?A.substring(1):A,S=b&&b>m?b-m:void 0;return{modifiers:f,hasImportantModifier:y,baseClassName:D,maybePostfixModifierPosition:S}};return r?c=>r({className:c,parseClassName:u}):u},N_=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},S_=t=>({cache:b_(t.cacheSize),parseClassName:w_(t),...m_(t)}),j_=/\s+/,C_=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=e,o=[],u=t.trim().split(j_);let c="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{modifiers:m,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:y}=r(p);let D=!!y,S=n(D?A.substring(0,y):A);if(!S){if(!D){c=p+(c.length>0?" "+c:c);continue}if(S=n(A),!S){c=p+(c.length>0?" "+c:c);continue}D=!1}const E=N_(m).join(":"),_=b?E+Db:E,O=_+S;if(o.includes(O))continue;o.push(O);const T=a(S,D);for(let z=0;z<T.length;++z){const re=T[z];o.push(_+re)}c=p+(c.length>0?" "+c:c)}return c};function __(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Ib(e))&&(n&&(n+=" "),n+=r);return n}const Ib=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=Ib(t[n]))&&(r&&(r+=" "),r+=e);return r};function A_(t,...e){let r,n,a,o=u;function u(f){const p=e.reduce((m,b)=>b(m),t());return r=S_(p),n=r.cache.get,a=r.cache.set,o=c,c(f)}function c(f){const p=n(f);if(p)return p;const m=C_(f,r);return a(f,m),m}return function(){return o(__.apply(null,arguments))}}const ls=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},Fb=/^\[(?:([a-z-]+):)?(.+)\]$/i,P_=/^\d+\/\d+$/,k_=new Set(["px","full","screen"]),T_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,L_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ac=t=>Md(t)||k_.has(t)||P_.test(t),$c=t=>lf(t,"length",z_),Md=t=>!!t&&!Number.isNaN(Number(t)),s0=t=>lf(t,"number",Md),Uf=t=>!!t&&Number.isInteger(Number(t)),I_=t=>t.endsWith("%")&&Md(t.slice(0,-1)),Jr=t=>Fb.test(t),Vc=t=>T_.test(t),F_=new Set(["length","size","percentage"]),O_=t=>lf(t,F_,Ob),M_=t=>lf(t,"position",Ob),B_=new Set(["image","url"]),q_=t=>lf(t,B_,V_),U_=t=>lf(t,"",$_),zf=()=>!0,lf=(t,e,r)=>{const n=Fb.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},z_=t=>E_.test(t)&&!L_.test(t),Ob=()=>!1,$_=t=>R_.test(t),V_=t=>D_.test(t),H_=()=>{const t=ls("colors"),e=ls("spacing"),r=ls("blur"),n=ls("brightness"),a=ls("borderColor"),o=ls("borderRadius"),u=ls("borderSpacing"),c=ls("borderWidth"),f=ls("contrast"),p=ls("grayscale"),m=ls("hueRotate"),b=ls("invert"),A=ls("gap"),y=ls("gradientColorStops"),D=ls("gradientColorStopPositions"),S=ls("inset"),E=ls("margin"),_=ls("opacity"),O=ls("padding"),T=ls("saturate"),z=ls("scale"),re=ls("sepia"),ae=ls("skew"),W=ls("space"),te=ls("translate"),Q=()=>["auto","contain","none"],fe=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Jr,e],F=()=>[Jr,e],X=()=>["",ac,$c],Y=()=>["auto",Md,Jr],Ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],be=()=>["solid","dashed","dotted","double","none"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],me=()=>["","0",Jr],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>[Md,Jr];return{cacheSize:500,separator:":",theme:{colors:[zf],spacing:[ac,$c],blur:["none","",Vc,Jr],brightness:j(),borderColor:[t],borderRadius:["none","","full",Vc,Jr],borderSpacing:F(),borderWidth:X(),contrast:j(),grayscale:me(),hueRotate:j(),invert:me(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[I_,$c],inset:U(),margin:U(),opacity:j(),padding:F(),saturate:j(),scale:j(),sepia:me(),skew:j(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Jr]}],container:["container"],columns:[{columns:[Vc]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ne(),Jr]}],overflow:[{overflow:fe()}],"overflow-x":[{"overflow-x":fe()}],"overflow-y":[{"overflow-y":fe()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uf,Jr]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jr]}],grow:[{grow:me()}],shrink:[{shrink:me()}],order:[{order:["first","last","none",Uf,Jr]}],"grid-cols":[{"grid-cols":[zf]}],"col-start-end":[{col:["auto",{span:["full",Uf,Jr]},Jr]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[zf]}],"row-start-end":[{row:["auto",{span:[Uf,Jr]},Jr]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jr]}],gap:[{gap:[A]}],"gap-x":[{"gap-x":[A]}],"gap-y":[{"gap-y":[A]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jr,e]}],"min-w":[{"min-w":[Jr,e,"min","max","fit"]}],"max-w":[{"max-w":[Jr,e,"none","full","min","max","fit","prose",{screen:[Vc]},Vc]}],h:[{h:[Jr,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jr,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jr,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jr,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vc,$c]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s0]}],"font-family":[{font:[zf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jr]}],"line-clamp":[{"line-clamp":["none",Md,s0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ac,Jr]}],"list-image":[{"list-image":["none",Jr]}],"list-style-type":[{list:["none","disc","decimal",Jr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ac,$c]}],"underline-offset":[{"underline-offset":["auto",ac,Jr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ne(),M_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",O_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},q_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...be(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:be()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...be()]}],"outline-offset":[{"outline-offset":[ac,Jr]}],"outline-w":[{outline:[ac,$c]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ac,$c]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vc,U_]}],"shadow-color":[{shadow:[zf]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...we(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":we()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Vc,Jr]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[b]}],saturate:[{saturate:[T]}],sepia:[{sepia:[re]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jr]}],duration:[{duration:j()}],ease:[{ease:["linear","in","out","in-out",Jr]}],delay:[{delay:j()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[Uf,Jr]}],"translate-x":[{"translate-x":[te]}],"translate-y":[{"translate-y":[te]}],"skew-x":[{"skew-x":[ae]}],"skew-y":[{"skew-y":[ae]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jr]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ac,$c,s0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},W_=A_(H_);function $r(...t){return W_(kb(t))}const G_=GC,Mb=L.forwardRef(({className:t,...e},r)=>i.jsx(Nb,{ref:r,className:$r("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Mb.displayName=Nb.displayName;const K_=Fm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Bb=L.forwardRef(({className:t,variant:e,...r},n)=>i.jsx(Sb,{ref:n,className:$r(K_({variant:e}),t),...r}));Bb.displayName=Sb.displayName;const Q_=L.forwardRef(({className:t,...e},r)=>i.jsx(_b,{ref:r,className:$r("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Q_.displayName=_b.displayName;const qb=L.forwardRef(({className:t,...e},r)=>i.jsx(Ab,{ref:r,className:$r("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(of,{className:"h-4 w-4"})}));qb.displayName=Ab.displayName;const Ub=L.forwardRef(({className:t,...e},r)=>i.jsx(jb,{ref:r,className:$r("text-sm font-semibold",t),...e}));Ub.displayName=jb.displayName;const zb=L.forwardRef(({className:t,...e},r)=>i.jsx(Cb,{ref:r,className:$r("text-sm opacity-90",t),...e}));zb.displayName=Cb.displayName;function Z_(){const{toasts:t}=Ba();return i.jsxs(G_,{children:[t.map(function({id:e,title:r,description:n,action:a,...o}){return i.jsxs(Bb,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(Ub,{children:r}),n&&i.jsx(zb,{children:n})]}),a,i.jsx(qb,{})]},e)}),i.jsx(Mb,{})]})}var Y_=L5[" useId ".trim().toString()]||(()=>{}),X_=0;function Yc(t){const[e,r]=L.useState(Y_());return li(()=>{r(n=>n??String(X_++))},[t]),e?`radix-${e}`:""}const J_=["top","right","bottom","left"],tu=Math.min,eo=Math.max,im=Math.round,jp=Math.floor,_l=t=>({x:t,y:t}),e6={left:"right",right:"left",bottom:"top",top:"bottom"},t6={start:"end",end:"start"};function sv(t,e,r){return eo(t,tu(e,r))}function hc(t,e){return typeof t=="function"?t(e):t}function pc(t){return t.split("-")[0]}function cf(t){return t.split("-")[1]}function Qv(t){return t==="x"?"y":"x"}function Zv(t){return t==="y"?"height":"width"}function ru(t){return["top","bottom"].includes(pc(t))?"y":"x"}function Yv(t){return Qv(ru(t))}function r6(t,e,r){r===void 0&&(r=!1);const n=cf(t),a=Yv(t),o=Zv(a);let u=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(u=am(u)),[u,am(u)]}function n6(t){const e=am(t);return[iv(t),e,iv(e)]}function iv(t){return t.replace(/start|end/g,e=>t6[e])}function s6(t,e,r){const n=["left","right"],a=["right","left"],o=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return r?e?a:n:e?n:a;case"left":case"right":return e?o:u;default:return[]}}function i6(t,e,r,n){const a=cf(t);let o=s6(pc(t),r==="start",n);return a&&(o=o.map(u=>u+"-"+a),e&&(o=o.concat(o.map(iv)))),o}function am(t){return t.replace(/left|right|bottom|top/g,e=>e6[e])}function a6(t){return{top:0,right:0,bottom:0,left:0,...t}}function $b(t){return typeof t!="number"?a6(t):{top:t,right:t,bottom:t,left:t}}function om(t){const{x:e,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:e,right:e+n,bottom:r+a,x:e,y:r}}function vx(t,e,r){let{reference:n,floating:a}=t;const o=ru(e),u=Yv(e),c=Zv(u),f=pc(e),p=o==="y",m=n.x+n.width/2-a.width/2,b=n.y+n.height/2-a.height/2,A=n[c]/2-a[c]/2;let y;switch(f){case"top":y={x:m,y:n.y-a.height};break;case"bottom":y={x:m,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:b};break;case"left":y={x:n.x-a.width,y:b};break;default:y={x:n.x,y:n.y}}switch(cf(e)){case"start":y[u]-=A*(r&&p?-1:1);break;case"end":y[u]+=A*(r&&p?-1:1);break}return y}const o6=async(t,e,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:u}=r,c=o.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:b}=vx(p,n,f),A=n,y={},D=0;for(let S=0;S<c.length;S++){const{name:E,fn:_}=c[S],{x:O,y:T,data:z,reset:re}=await _({x:m,y:b,initialPlacement:n,placement:A,strategy:a,middlewareData:y,rects:p,platform:u,elements:{reference:t,floating:e}});m=O??m,b=T??b,y={...y,[E]:{...y[E],...z}},re&&D<=50&&(D++,typeof re=="object"&&(re.placement&&(A=re.placement),re.rects&&(p=re.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:a}):re.rects),{x:m,y:b}=vx(p,A,f)),S=-1)}return{x:m,y:b,placement:A,strategy:a,middlewareData:y}};async function lh(t,e){var r;e===void 0&&(e={});const{x:n,y:a,platform:o,rects:u,elements:c,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:b="floating",altBoundary:A=!1,padding:y=0}=hc(e,t),D=$b(y),E=c[A?b==="floating"?"reference":"floating":b],_=om(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(E)))==null||r?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:p,rootBoundary:m,strategy:f})),O=b==="floating"?{x:n,y:a,width:u.floating.width,height:u.floating.height}:u.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),z=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},re=om(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:O,offsetParent:T,strategy:f}):O);return{top:(_.top-re.top+D.top)/z.y,bottom:(re.bottom-_.bottom+D.bottom)/z.y,left:(_.left-re.left+D.left)/z.x,right:(re.right-_.right+D.right)/z.x}}const l6=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:a,rects:o,platform:u,elements:c,middlewareData:f}=e,{element:p,padding:m=0}=hc(t,e)||{};if(p==null)return{};const b=$b(m),A={x:r,y:n},y=Yv(a),D=Zv(y),S=await u.getDimensions(p),E=y==="y",_=E?"top":"left",O=E?"bottom":"right",T=E?"clientHeight":"clientWidth",z=o.reference[D]+o.reference[y]-A[y]-o.floating[D],re=A[y]-o.reference[y],ae=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let W=ae?ae[T]:0;(!W||!await(u.isElement==null?void 0:u.isElement(ae)))&&(W=c.floating[T]||o.floating[D]);const te=z/2-re/2,Q=W/2-S[D]/2-1,fe=tu(b[_],Q),U=tu(b[O],Q),F=fe,X=W-S[D]-U,Y=W/2-S[D]/2+te,Ne=sv(F,Y,X),be=!f.arrow&&cf(a)!=null&&Y!==Ne&&o.reference[D]/2-(Y<F?fe:U)-S[D]/2<0,we=be?Y<F?Y-F:Y-X:0;return{[y]:A[y]+we,data:{[y]:Ne,centerOffset:Y-Ne-we,...be&&{alignmentOffset:we}},reset:be}}}),c6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:a,middlewareData:o,rects:u,initialPlacement:c,platform:f,elements:p}=e,{mainAxis:m=!0,crossAxis:b=!0,fallbackPlacements:A,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:S=!0,...E}=hc(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const _=pc(a),O=ru(c),T=pc(c)===c,z=await(f.isRTL==null?void 0:f.isRTL(p.floating)),re=A||(T||!S?[am(c)]:n6(c)),ae=D!=="none";!A&&ae&&re.push(...i6(c,S,D,z));const W=[c,...re],te=await lh(e,E),Q=[];let fe=((n=o.flip)==null?void 0:n.overflows)||[];if(m&&Q.push(te[_]),b){const Y=r6(a,u,z);Q.push(te[Y[0]],te[Y[1]])}if(fe=[...fe,{placement:a,overflows:Q}],!Q.every(Y=>Y<=0)){var U,F;const Y=(((U=o.flip)==null?void 0:U.index)||0)+1,Ne=W[Y];if(Ne)return{data:{index:Y,overflows:fe},reset:{placement:Ne}};let be=(F=fe.filter(we=>we.overflows[0]<=0).sort((we,se)=>we.overflows[1]-se.overflows[1])[0])==null?void 0:F.placement;if(!be)switch(y){case"bestFit":{var X;const we=(X=fe.filter(se=>{if(ae){const me=ru(se.placement);return me===O||me==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(me=>me>0).reduce((me,I)=>me+I,0)]).sort((se,me)=>se[1]-me[1])[0])==null?void 0:X[0];we&&(be=we);break}case"initialPlacement":be=c;break}if(a!==be)return{reset:{placement:be}}}return{}}}};function xx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function yx(t){return J_.some(e=>t[e]>=0)}const u6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...a}=hc(t,e);switch(n){case"referenceHidden":{const o=await lh(e,{...a,elementContext:"reference"}),u=xx(o,r.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:yx(u)}}}case"escaped":{const o=await lh(e,{...a,altBoundary:!0}),u=xx(o,r.floating);return{data:{escapedOffsets:u,escaped:yx(u)}}}default:return{}}}}};async function d6(t,e){const{placement:r,platform:n,elements:a}=t,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),u=pc(r),c=cf(r),f=ru(r)==="y",p=["left","top"].includes(u)?-1:1,m=o&&f?-1:1,b=hc(e,t);let{mainAxis:A,crossAxis:y,alignmentAxis:D}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return c&&typeof D=="number"&&(y=c==="end"?D*-1:D),f?{x:y*m,y:A*p}:{x:A*p,y:y*m}}const f6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:a,y:o,placement:u,middlewareData:c}=e,f=await d6(e,t);return u===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:u}}}}},h6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:a}=e,{mainAxis:o=!0,crossAxis:u=!1,limiter:c={fn:E=>{let{x:_,y:O}=E;return{x:_,y:O}}},...f}=hc(t,e),p={x:r,y:n},m=await lh(e,f),b=ru(pc(a)),A=Qv(b);let y=p[A],D=p[b];if(o){const E=A==="y"?"top":"left",_=A==="y"?"bottom":"right",O=y+m[E],T=y-m[_];y=sv(O,y,T)}if(u){const E=b==="y"?"top":"left",_=b==="y"?"bottom":"right",O=D+m[E],T=D-m[_];D=sv(O,D,T)}const S=c.fn({...e,[A]:y,[b]:D});return{...S,data:{x:S.x-r,y:S.y-n,enabled:{[A]:o,[b]:u}}}}}},p6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:a,rects:o,middlewareData:u}=e,{offset:c=0,mainAxis:f=!0,crossAxis:p=!0}=hc(t,e),m={x:r,y:n},b=ru(a),A=Qv(b);let y=m[A],D=m[b];const S=hc(c,e),E=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const T=A==="y"?"height":"width",z=o.reference[A]-o.floating[T]+E.mainAxis,re=o.reference[A]+o.reference[T]-E.mainAxis;y<z?y=z:y>re&&(y=re)}if(p){var _,O;const T=A==="y"?"width":"height",z=["top","left"].includes(pc(a)),re=o.reference[b]-o.floating[T]+(z&&((_=u.offset)==null?void 0:_[b])||0)+(z?0:E.crossAxis),ae=o.reference[b]+o.reference[T]+(z?0:((O=u.offset)==null?void 0:O[b])||0)-(z?E.crossAxis:0);D<re?D=re:D>ae&&(D=ae)}return{[A]:y,[b]:D}}}},m6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:a,rects:o,platform:u,elements:c}=e,{apply:f=()=>{},...p}=hc(t,e),m=await lh(e,p),b=pc(a),A=cf(a),y=ru(a)==="y",{width:D,height:S}=o.floating;let E,_;b==="top"||b==="bottom"?(E=b,_=A===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(_=b,E=A==="end"?"top":"bottom");const O=S-m.top-m.bottom,T=D-m.left-m.right,z=tu(S-m[E],O),re=tu(D-m[_],T),ae=!e.middlewareData.shift;let W=z,te=re;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(te=T),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(W=O),ae&&!A){const fe=eo(m.left,0),U=eo(m.right,0),F=eo(m.top,0),X=eo(m.bottom,0);y?te=D-2*(fe!==0||U!==0?fe+U:eo(m.left,m.right)):W=S-2*(F!==0||X!==0?F+X:eo(m.top,m.bottom))}await f({...e,availableWidth:te,availableHeight:W});const Q=await u.getDimensions(c.floating);return D!==Q.width||S!==Q.height?{reset:{rects:!0}}:{}}}};function Mm(){return typeof window<"u"}function uf(t){return Vb(t)?(t.nodeName||"").toLowerCase():"#document"}function no(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Dl(t){var e;return(e=(Vb(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Vb(t){return Mm()?t instanceof Node||t instanceof no(t).Node:!1}function Zo(t){return Mm()?t instanceof Element||t instanceof no(t).Element:!1}function Tl(t){return Mm()?t instanceof HTMLElement||t instanceof no(t).HTMLElement:!1}function bx(t){return!Mm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof no(t).ShadowRoot}function Dh(t){const{overflow:e,overflowX:r,overflowY:n,display:a}=Yo(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(a)}function g6(t){return["table","td","th"].includes(uf(t))}function Bm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Xv(t){const e=Jv(),r=Zo(t)?Yo(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function v6(t){let e=nu(t);for(;Tl(e)&&!Qd(e);){if(Xv(e))return e;if(Bm(e))return null;e=nu(e)}return null}function Jv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qd(t){return["html","body","#document"].includes(uf(t))}function Yo(t){return no(t).getComputedStyle(t)}function qm(t){return Zo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function nu(t){if(uf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||bx(t)&&t.host||Dl(t);return bx(e)?e.host:e}function Hb(t){const e=nu(t);return Qd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Tl(e)&&Dh(e)?e:Hb(e)}function ch(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=Hb(t),o=a===((n=t.ownerDocument)==null?void 0:n.body),u=no(a);if(o){const c=av(u);return e.concat(u,u.visualViewport||[],Dh(a)?a:[],c&&r?ch(c):[])}return e.concat(a,ch(a,[],r))}function av(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Wb(t){const e=Yo(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=Tl(t),o=a?t.offsetWidth:r,u=a?t.offsetHeight:n,c=im(r)!==o||im(n)!==u;return c&&(r=o,n=u),{width:r,height:n,$:c}}function e1(t){return Zo(t)?t:t.contextElement}function Bd(t){const e=e1(t);if(!Tl(e))return _l(1);const r=e.getBoundingClientRect(),{width:n,height:a,$:o}=Wb(e);let u=(o?im(r.width):r.width)/n,c=(o?im(r.height):r.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const x6=_l(0);function Gb(t){const e=no(t);return!Jv()||!e.visualViewport?x6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function y6(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==no(t)?!1:e}function Uu(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),o=e1(t);let u=_l(1);e&&(n?Zo(n)&&(u=Bd(n)):u=Bd(t));const c=y6(o,r,n)?Gb(o):_l(0);let f=(a.left+c.x)/u.x,p=(a.top+c.y)/u.y,m=a.width/u.x,b=a.height/u.y;if(o){const A=no(o),y=n&&Zo(n)?no(n):n;let D=A,S=av(D);for(;S&&n&&y!==D;){const E=Bd(S),_=S.getBoundingClientRect(),O=Yo(S),T=_.left+(S.clientLeft+parseFloat(O.paddingLeft))*E.x,z=_.top+(S.clientTop+parseFloat(O.paddingTop))*E.y;f*=E.x,p*=E.y,m*=E.x,b*=E.y,f+=T,p+=z,D=no(S),S=av(D)}}return om({width:m,height:b,x:f,y:p})}function t1(t,e){const r=qm(t).scrollLeft;return e?e.left+r:Uu(Dl(t)).left+r}function Kb(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+e.scrollLeft-(r?0:t1(t,n)),o=n.top+e.scrollTop;return{x:a,y:o}}function b6(t){let{elements:e,rect:r,offsetParent:n,strategy:a}=t;const o=a==="fixed",u=Dl(n),c=e?Bm(e.floating):!1;if(n===u||c&&o)return r;let f={scrollLeft:0,scrollTop:0},p=_l(1);const m=_l(0),b=Tl(n);if((b||!b&&!o)&&((uf(n)!=="body"||Dh(u))&&(f=qm(n)),Tl(n))){const y=Uu(n);p=Bd(n),m.x=y.x+n.clientLeft,m.y=y.y+n.clientTop}const A=u&&!b&&!o?Kb(u,f,!0):_l(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-f.scrollLeft*p.x+m.x+A.x,y:r.y*p.y-f.scrollTop*p.y+m.y+A.y}}function w6(t){return Array.from(t.getClientRects())}function N6(t){const e=Dl(t),r=qm(t),n=t.ownerDocument.body,a=eo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=eo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let u=-r.scrollLeft+t1(t);const c=-r.scrollTop;return Yo(n).direction==="rtl"&&(u+=eo(e.clientWidth,n.clientWidth)-a),{width:a,height:o,x:u,y:c}}function S6(t,e){const r=no(t),n=Dl(t),a=r.visualViewport;let o=n.clientWidth,u=n.clientHeight,c=0,f=0;if(a){o=a.width,u=a.height;const p=Jv();(!p||p&&e==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:o,height:u,x:c,y:f}}function j6(t,e){const r=Uu(t,!0,e==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,o=Tl(t)?Bd(t):_l(1),u=t.clientWidth*o.x,c=t.clientHeight*o.y,f=a*o.x,p=n*o.y;return{width:u,height:c,x:f,y:p}}function wx(t,e,r){let n;if(e==="viewport")n=S6(t,r);else if(e==="document")n=N6(Dl(t));else if(Zo(e))n=j6(e,r);else{const a=Gb(t);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return om(n)}function Qb(t,e){const r=nu(t);return r===e||!Zo(r)||Qd(r)?!1:Yo(r).position==="fixed"||Qb(r,e)}function C6(t,e){const r=e.get(t);if(r)return r;let n=ch(t,[],!1).filter(c=>Zo(c)&&uf(c)!=="body"),a=null;const o=Yo(t).position==="fixed";let u=o?nu(t):t;for(;Zo(u)&&!Qd(u);){const c=Yo(u),f=Xv(u);!f&&c.position==="fixed"&&(a=null),(o?!f&&!a:!f&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Dh(u)&&!f&&Qb(t,u))?n=n.filter(m=>m!==u):a=c,u=nu(u)}return e.set(t,n),n}function _6(t){let{element:e,boundary:r,rootBoundary:n,strategy:a}=t;const u=[...r==="clippingAncestors"?Bm(e)?[]:C6(e,this._c):[].concat(r),n],c=u[0],f=u.reduce((p,m)=>{const b=wx(e,m,a);return p.top=eo(b.top,p.top),p.right=tu(b.right,p.right),p.bottom=tu(b.bottom,p.bottom),p.left=eo(b.left,p.left),p},wx(e,c,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function A6(t){const{width:e,height:r}=Wb(t);return{width:e,height:r}}function P6(t,e,r){const n=Tl(e),a=Dl(e),o=r==="fixed",u=Uu(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=_l(0);if(n||!n&&!o)if((uf(e)!=="body"||Dh(a))&&(c=qm(e)),n){const A=Uu(e,!0,o,e);f.x=A.x+e.clientLeft,f.y=A.y+e.clientTop}else a&&(f.x=t1(a));const p=a&&!n&&!o?Kb(a,c):_l(0),m=u.left+c.scrollLeft-f.x-p.x,b=u.top+c.scrollTop-f.y-p.y;return{x:m,y:b,width:u.width,height:u.height}}function i0(t){return Yo(t).position==="static"}function Nx(t,e){if(!Tl(t)||Yo(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Dl(t)===r&&(r=r.ownerDocument.body),r}function Zb(t,e){const r=no(t);if(Bm(t))return r;if(!Tl(t)){let a=nu(t);for(;a&&!Qd(a);){if(Zo(a)&&!i0(a))return a;a=nu(a)}return r}let n=Nx(t,e);for(;n&&g6(n)&&i0(n);)n=Nx(n,e);return n&&Qd(n)&&i0(n)&&!Xv(n)?r:n||v6(t)||r}const k6=async function(t){const e=this.getOffsetParent||Zb,r=this.getDimensions,n=await r(t.floating);return{reference:P6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function T6(t){return Yo(t).direction==="rtl"}const E6={convertOffsetParentRelativeRectToViewportRelativeRect:b6,getDocumentElement:Dl,getClippingRect:_6,getOffsetParent:Zb,getElementRects:k6,getClientRects:w6,getDimensions:A6,getScale:Bd,isElement:Zo,isRTL:T6};function Yb(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function L6(t,e){let r=null,n;const a=Dl(t);function o(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function u(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const p=t.getBoundingClientRect(),{left:m,top:b,width:A,height:y}=p;if(c||e(),!A||!y)return;const D=jp(b),S=jp(a.clientWidth-(m+A)),E=jp(a.clientHeight-(b+y)),_=jp(m),T={rootMargin:-D+"px "+-S+"px "+-E+"px "+-_+"px",threshold:eo(0,tu(1,f))||1};let z=!0;function re(ae){const W=ae[0].intersectionRatio;if(W!==f){if(!z)return u();W?u(!1,W):n=setTimeout(()=>{u(!1,1e-7)},1e3)}W===1&&!Yb(p,t.getBoundingClientRect())&&u(),z=!1}try{r=new IntersectionObserver(re,{...T,root:a.ownerDocument})}catch{r=new IntersectionObserver(re,T)}r.observe(t)}return u(!0),o}function R6(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=n,p=e1(t),m=a||o?[...p?ch(p):[],...ch(e)]:[];m.forEach(_=>{a&&_.addEventListener("scroll",r,{passive:!0}),o&&_.addEventListener("resize",r)});const b=p&&c?L6(p,r):null;let A=-1,y=null;u&&(y=new ResizeObserver(_=>{let[O]=_;O&&O.target===p&&y&&(y.unobserve(e),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var T;(T=y)==null||T.observe(e)})),r()}),p&&!f&&y.observe(p),y.observe(e));let D,S=f?Uu(t):null;f&&E();function E(){const _=Uu(t);S&&!Yb(S,_)&&r(),S=_,D=requestAnimationFrame(E)}return r(),()=>{var _;m.forEach(O=>{a&&O.removeEventListener("scroll",r),o&&O.removeEventListener("resize",r)}),b?.(),(_=y)==null||_.disconnect(),y=null,f&&cancelAnimationFrame(D)}}const D6=f6,I6=h6,F6=c6,O6=m6,M6=u6,Sx=l6,B6=p6,q6=(t,e,r)=>{const n=new Map,a={platform:E6,...r},o={...a.platform,_c:n};return o6(t,e,{...a,platform:o})};var zp=typeof document<"u"?L.useLayoutEffect:L.useEffect;function lm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!lm(t[n],e[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,a[n]))return!1;for(n=r;n--!==0;){const o=a[n];if(!(o==="_owner"&&t.$$typeof)&&!lm(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function Xb(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jx(t,e){const r=Xb(t);return Math.round(e*r)/r}function a0(t){const e=L.useRef(t);return zp(()=>{e.current=t}),e}function U6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:u}={},transform:c=!0,whileElementsMounted:f,open:p}=t,[m,b]=L.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[A,y]=L.useState(n);lm(A,n)||y(n);const[D,S]=L.useState(null),[E,_]=L.useState(null),O=L.useCallback(se=>{se!==ae.current&&(ae.current=se,S(se))},[]),T=L.useCallback(se=>{se!==W.current&&(W.current=se,_(se))},[]),z=o||D,re=u||E,ae=L.useRef(null),W=L.useRef(null),te=L.useRef(m),Q=f!=null,fe=a0(f),U=a0(a),F=a0(p),X=L.useCallback(()=>{if(!ae.current||!W.current)return;const se={placement:e,strategy:r,middleware:A};U.current&&(se.platform=U.current),q6(ae.current,W.current,se).then(me=>{const I={...me,isPositioned:F.current!==!1};Y.current&&!lm(te.current,I)&&(te.current=I,nf.flushSync(()=>{b(I)}))})},[A,e,r,U,F]);zp(()=>{p===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,b(se=>({...se,isPositioned:!1})))},[p]);const Y=L.useRef(!1);zp(()=>(Y.current=!0,()=>{Y.current=!1}),[]),zp(()=>{if(z&&(ae.current=z),re&&(W.current=re),z&&re){if(fe.current)return fe.current(z,re,X);X()}},[z,re,X,fe,Q]);const Ne=L.useMemo(()=>({reference:ae,floating:W,setReference:O,setFloating:T}),[O,T]),be=L.useMemo(()=>({reference:z,floating:re}),[z,re]),we=L.useMemo(()=>{const se={position:r,left:0,top:0};if(!be.floating)return se;const me=jx(be.floating,m.x),I=jx(be.floating,m.y);return c?{...se,transform:"translate("+me+"px, "+I+"px)",...Xb(be.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:me,top:I}},[r,c,be.floating,m.x,m.y]);return L.useMemo(()=>({...m,update:X,refs:Ne,elements:be,floatingStyles:we}),[m,X,Ne,be,we])}const z6=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Sx({element:n.current,padding:a}).fn(r):{}:n?Sx({element:n,padding:a}).fn(r):{}}}},$6=(t,e)=>({...D6(t),options:[t,e]}),V6=(t,e)=>({...I6(t),options:[t,e]}),H6=(t,e)=>({...B6(t),options:[t,e]}),W6=(t,e)=>({...F6(t),options:[t,e]}),G6=(t,e)=>({...O6(t),options:[t,e]}),K6=(t,e)=>({...M6(t),options:[t,e]}),Q6=(t,e)=>({...z6(t),options:[t,e]});var Z6="Arrow",Jb=L.forwardRef((t,e)=>{const{children:r,width:n=10,height:a=5,...o}=t;return i.jsx(Zr.svg,{...o,ref:e,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Jb.displayName=Z6;var Y6=Jb;function ew(t){const[e,r]=L.useState(void 0);return li(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let u,c;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;u=p.inlineSize,c=p.blockSize}else u=t.offsetWidth,c=t.offsetHeight;r({width:u,height:c})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var r1="Popper",[tw,Um]=Rl(r1),[X6,rw]=tw(r1),nw=t=>{const{__scopePopper:e,children:r}=t,[n,a]=L.useState(null);return i.jsx(X6,{scope:e,anchor:n,onAnchorChange:a,children:r})};nw.displayName=r1;var sw="PopperAnchor",iw=L.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...a}=t,o=rw(sw,r),u=L.useRef(null),c=Wn(e,u);return L.useEffect(()=>{o.onAnchorChange(n?.current||u.current)}),n?null:i.jsx(Zr.div,{...a,ref:c})});iw.displayName=sw;var n1="PopperContent",[J6,eA]=tw(n1),aw=L.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:b="partial",hideWhenDetached:A=!1,updatePositionStrategy:y="optimized",onPlaced:D,...S}=t,E=rw(n1,r),[_,O]=L.useState(null),T=Wn(e,oe=>O(oe)),[z,re]=L.useState(null),ae=ew(z),W=ae?.width??0,te=ae?.height??0,Q=n+(o!=="center"?"-"+o:""),fe=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},U=Array.isArray(p)?p:[p],F=U.length>0,X={padding:fe,boundary:U.filter(rA),altBoundary:F},{refs:Y,floatingStyles:Ne,placement:be,isPositioned:we,middlewareData:se}=U6({strategy:"fixed",placement:Q,whileElementsMounted:(...oe)=>R6(...oe,{animationFrame:y==="always"}),elements:{reference:E.anchor},middleware:[$6({mainAxis:a+te,alignmentAxis:u}),f&&V6({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?H6():void 0,...X}),f&&W6({...X}),G6({...X,apply:({elements:oe,rects:ve,availableWidth:Ce,availableHeight:Le})=>{const{width:Ge,height:lt}=ve.reference,tt=oe.floating.style;tt.setProperty("--radix-popper-available-width",`${Ce}px`),tt.setProperty("--radix-popper-available-height",`${Le}px`),tt.setProperty("--radix-popper-anchor-width",`${Ge}px`),tt.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),z&&Q6({element:z,padding:c}),nA({arrowWidth:W,arrowHeight:te}),A&&K6({strategy:"referenceHidden",...X})]}),[me,I]=cw(be),j=Oa(D);li(()=>{we&&j?.()},[we,j]);const x=se.arrow?.x,C=se.arrow?.y,M=se.arrow?.centerOffset!==0,[H,ie]=L.useState();return li(()=>{_&&ie(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ne,transform:we?Ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[se.transformOrigin?.x,se.transformOrigin?.y].join(" "),...se.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(J6,{scope:r,placedSide:me,onArrowChange:re,arrowX:x,arrowY:C,shouldHideArrow:M,children:i.jsx(Zr.div,{"data-side":me,"data-align":I,...S,ref:T,style:{...S.style,animation:we?void 0:"none"}})})})});aw.displayName=n1;var ow="PopperArrow",tA={top:"bottom",right:"left",bottom:"top",left:"right"},lw=L.forwardRef(function(e,r){const{__scopePopper:n,...a}=e,o=eA(ow,n),u=tA[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(Y6,{...a,ref:r,style:{...a.style,display:"block"}})})});lw.displayName=ow;function rA(t){return t!==null}var nA=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:a}=e,u=a.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[p,m]=cw(r),b={start:"0%",center:"50%",end:"100%"}[m],A=(a.arrow?.x??0)+c/2,y=(a.arrow?.y??0)+f/2;let D="",S="";return p==="bottom"?(D=u?b:`${A}px`,S=`${-f}px`):p==="top"?(D=u?b:`${A}px`,S=`${n.floating.height+f}px`):p==="right"?(D=`${-f}px`,S=u?b:`${y}px`):p==="left"&&(D=`${n.floating.width+f}px`,S=u?b:`${y}px`),{data:{x:D,y:S}}}});function cw(t){const[e,r="center"]=t.split("-");return[e,r]}var sA=nw,uw=iw,dw=aw,fw=lw,[zm]=Rl("Tooltip",[Um]),s1=Um(),hw="TooltipProvider",iA=700,Cx="tooltip.open",[aA,pw]=zm(hw),mw=t=>{const{__scopeTooltip:e,delayDuration:r=iA,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,u=L.useRef(!0),c=L.useRef(!1),f=L.useRef(0);return L.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),i.jsx(aA,{scope:e,isOpenDelayedRef:u,delayDuration:r,onOpen:L.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:L.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:L.useCallback(p=>{c.current=p},[]),disableHoverableContent:a,children:o})};mw.displayName=hw;var gw="Tooltip",[p7,$m]=zm(gw),ov="TooltipTrigger",oA=L.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=$m(ov,r),o=pw(ov,r),u=s1(r),c=L.useRef(null),f=Wn(e,c,a.onTriggerChange),p=L.useRef(!1),m=L.useRef(!1),b=L.useCallback(()=>p.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),i.jsx(uw,{asChild:!0,...u,children:i.jsx(Zr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:f,onPointerMove:Hr(t.onPointerMove,A=>{A.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:Hr(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:Hr(t.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:Hr(t.onFocus,()=>{p.current||a.onOpen()}),onBlur:Hr(t.onBlur,a.onClose),onClick:Hr(t.onClick,a.onClose)})})});oA.displayName=ov;var lA="TooltipPortal",[m7,cA]=zm(lA,{forceMount:void 0}),Zd="TooltipContent",vw=L.forwardRef((t,e)=>{const r=cA(Zd,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,u=$m(Zd,t.__scopeTooltip);return i.jsx(cu,{present:n||u.open,children:u.disableHoverableContent?i.jsx(xw,{side:a,...o,ref:e}):i.jsx(uA,{side:a,...o,ref:e})})}),uA=L.forwardRef((t,e)=>{const r=$m(Zd,t.__scopeTooltip),n=pw(Zd,t.__scopeTooltip),a=L.useRef(null),o=Wn(e,a),[u,c]=L.useState(null),{trigger:f,onClose:p}=r,m=a.current,{onPointerInTransitChange:b}=n,A=L.useCallback(()=>{c(null),b(!1)},[b]),y=L.useCallback((D,S)=>{const E=D.currentTarget,_={x:D.clientX,y:D.clientY},O=mA(_,E.getBoundingClientRect()),T=gA(_,O),z=vA(S.getBoundingClientRect()),re=yA([...T,...z]);c(re),b(!0)},[b]);return L.useEffect(()=>()=>A(),[A]),L.useEffect(()=>{if(f&&m){const D=E=>y(E,m),S=E=>y(E,f);return f.addEventListener("pointerleave",D),m.addEventListener("pointerleave",S),()=>{f.removeEventListener("pointerleave",D),m.removeEventListener("pointerleave",S)}}},[f,m,y,A]),L.useEffect(()=>{if(u){const D=S=>{const E=S.target,_={x:S.clientX,y:S.clientY},O=f?.contains(E)||m?.contains(E),T=!xA(_,u);O?A():T&&(A(),p())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[f,m,u,p,A]),i.jsx(xw,{...t,ref:o})}),[dA,fA]=zm(gw,{isInside:!1}),hA=cC("TooltipContent"),xw=L.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:u,...c}=t,f=$m(Zd,r),p=s1(r),{onClose:m}=f;return L.useEffect(()=>(document.addEventListener(Cx,m),()=>document.removeEventListener(Cx,m)),[m]),L.useEffect(()=>{if(f.trigger){const b=A=>{A.target?.contains(f.trigger)&&m()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[f.trigger,m]),i.jsx(Th,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:b=>b.preventDefault(),onDismiss:m,children:i.jsxs(dw,{"data-state":f.stateAttribute,...p,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(hA,{children:n}),i.jsx(dA,{scope:r,isInside:!0,children:i.jsx(kC,{id:f.contentId,role:"tooltip",children:a||n})})]})})});vw.displayName=Zd;var yw="TooltipArrow",pA=L.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=s1(r);return fA(yw,r).isInside?null:i.jsx(fw,{...a,...n,ref:e})});pA.displayName=yw;function mA(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function gA(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function vA(t){const{top:e,right:r,bottom:n,left:a}=t;return[{x:a,y:e},{x:r,y:e},{x:r,y:n},{x:a,y:n}]}function xA(t,e){const{x:r,y:n}=t;let a=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const c=e[o].x,f=e[o].y,p=e[u].x,m=e[u].y;f>n!=m>n&&r<(p-c)*(n-f)/(m-f)+c&&(a=!a)}return a}function yA(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),bA(e)}function bA(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const a=t[n];for(;e.length>=2;){const o=e[e.length-1],u=e[e.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],u=r[r.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))r.pop();else break}r.push(a)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var wA=mw,bw=vw;const NA=wA,SA=L.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(bw,{ref:n,sideOffset:e,className:$r("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));SA.displayName=bw.displayName;var xn;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),u={};for(const c of o)u[c]=a[c];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(xn||(xn={}));var lv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(lv||(lv={}));const Bt=xn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dc=t=>{switch(typeof t){case"undefined":return Bt.undefined;case"string":return Bt.string;case"number":return isNaN(t)?Bt.nan:Bt.number;case"boolean":return Bt.boolean;case"function":return Bt.function;case"bigint":return Bt.bigint;case"symbol":return Bt.symbol;case"object":return Array.isArray(t)?Bt.array:t===null?Bt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Bt.promise:typeof Map<"u"&&t instanceof Map?Bt.map:typeof Set<"u"&&t instanceof Set?Bt.set:typeof Date<"u"&&t instanceof Date?Bt.date:Bt.object;default:return Bt.unknown}},bt=xn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jA=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class so extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(o){return o.message},n={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)n._errors.push(r(u));else{let c=n,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(r(u))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return a(this),n}static assert(e){if(!(e instanceof so))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}so.create=t=>new so(t);const Yd=(t,e)=>{let r;switch(t.code){case bt.invalid_type:t.received===Bt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case bt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,xn.jsonStringifyReplacer)}`;break;case bt.unrecognized_keys:r=`Unrecognized key(s) in object: ${xn.joinValues(t.keys,", ")}`;break;case bt.invalid_union:r="Invalid input";break;case bt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${xn.joinValues(t.options)}`;break;case bt.invalid_enum_value:r=`Invalid enum value. Expected ${xn.joinValues(t.options)}, received '${t.received}'`;break;case bt.invalid_arguments:r="Invalid function arguments";break;case bt.invalid_return_type:r="Invalid function return type";break;case bt.invalid_date:r="Invalid date";break;case bt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:xn.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case bt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case bt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case bt.custom:r="Invalid input";break;case bt.invalid_intersection_types:r="Intersection results could not be merged";break;case bt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case bt.not_finite:r="Number must be finite";break;default:r=e.defaultError,xn.assertNever(t)}return{message:r}};let ww=Yd;function CA(t){ww=t}function cm(){return ww}const um=t=>{const{data:e,path:r,errorMaps:n,issueData:a}=t,o=[...r,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="";const f=n.filter(p=>!!p).slice().reverse();for(const p of f)c=p(u,{data:e,defaultError:c}).message;return{...a,path:o,message:c}},_A=[];function Ot(t,e){const r=cm(),n=um({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Yd?void 0:Yd].filter(a=>!!a)});t.common.issues.push(n)}class ca{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const a of r){if(a.status==="aborted")return Fr;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const a of r){const o=await a.key,u=await a.value;n.push({key:o,value:u})}return ca.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const a of r){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return Fr;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(n[o.value]=u.value)}return{status:e.value,value:n}}}const Fr=Object.freeze({status:"aborted"}),Dd=t=>({status:"dirty",value:t}),ja=t=>({status:"valid",value:t}),cv=t=>t.status==="aborted",uv=t=>t.status==="dirty",zu=t=>t.status==="valid",uh=t=>typeof Promise<"u"&&t instanceof Promise;function dm(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Nw(t,e,r,n,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var cr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(cr||(cr={}));var Qf,Zf;class El{constructor(e,r,n,a){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _x=(t,e)=>{if(zu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new so(t.common.issues);return this._error=r,this._error}}};function Yr(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:a}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,c)=>{var f,p;const{message:m}=t;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(f=m??n)!==null&&f!==void 0?f:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??r)!==null&&p!==void 0?p:c.defaultError}},description:a}}class on{get description(){return this._def.description}_getType(e){return dc(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:dc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ca,ctx:{common:e.parent.common,data:e.data,parsedType:dc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(uh(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const a={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dc(e)},o=this._parseSync({data:e,path:a.path,parent:a});return _x(a,o)}"~validate"(e){var r,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dc(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return zu(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>zu(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dc(e)},a=this._parse({data:e,path:n.path,parent:n}),o=await(uh(a)?a:Promise.resolve(a));return _x(n,o)}refine(e,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,o)=>{const u=e(a),c=()=>o.addIssue({code:bt.custom,...n(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(e){return new Xo({schema:this,typeName:Dr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Al.create(this,this._def)}nullable(){return ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Go.create(this)}promise(){return Jd.create(this,this._def)}or(e){return ph.create([this,e],this._def)}and(e){return mh.create(this,e,this._def)}transform(e){return new Xo({...Yr(this._def),schema:this,typeName:Dr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new bh({...Yr(this._def),innerType:this,defaultValue:r,typeName:Dr.ZodDefault})}brand(){return new i1({typeName:Dr.ZodBranded,type:this,...Yr(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new wh({...Yr(this._def),innerType:this,catchValue:r,typeName:Dr.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ih.create(this,e)}readonly(){return Nh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AA=/^c[^\s-]{8,}$/i,PA=/^[0-9a-z]+$/,kA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,TA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,EA=/^[a-z0-9_-]{21}$/i,LA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,DA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let o0;const FA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,MA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Sw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zA=new RegExp(`^${Sw}$`);function jw(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function $A(t){return new RegExp(`^${jw(t)}$`)}function Cw(t){let e=`${Sw}T${jw(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function VA(t,e){return!!((e==="v4"||!e)&&FA.test(t)||(e==="v6"||!e)&&MA.test(t))}function HA(t,e){if(!LA.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function WA(t,e){return!!((e==="v4"||!e)&&OA.test(t)||(e==="v6"||!e)&&BA.test(t))}class Wo extends on{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Bt.string){const o=this._getOrReturnCtx(e);return Ot(o,{code:bt.invalid_type,expected:Bt.string,received:o.parsedType}),Fr}const n=new ca;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(a=this._getOrReturnCtx(e,a),u?Ot(a,{code:bt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&Ot(a,{code:bt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")DA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"email",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")o0||(o0=new RegExp(IA,"u")),o0.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"emoji",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")TA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"uuid",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")EA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"nanoid",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")AA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"cuid",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")PA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"cuid2",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")kA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"ulid",code:bt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Ot(a,{validation:"url",code:bt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"regex",code:bt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Cw(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?zA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?$A(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?RA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"duration",code:bt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?VA(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"ip",code:bt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?HA(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"jwt",code:bt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?WA(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"cidr",code:bt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?qA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"base64",code:bt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?UA.test(e.data)||(a=this._getOrReturnCtx(e,a),Ot(a,{validation:"base64url",code:bt.invalid_string,message:o.message}),n.dirty()):xn.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(a=>e.test(a),{validation:r,code:bt.invalid_string,...cr.errToObj(n)})}_addCheck(e){return new Wo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...cr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...cr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...cr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...cr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...cr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...cr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...cr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...cr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...cr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...cr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...cr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...cr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...cr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...cr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...cr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...cr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...cr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...cr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...cr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...cr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...cr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...cr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...cr.errToObj(r)})}nonempty(e){return this.min(1,cr.errToObj(e))}trim(){return new Wo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Wo.create=t=>{var e;return new Wo({checks:[],typeName:Dr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Yr(t)})};function GA(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=r>n?r:n,o=parseInt(t.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return o%u/Math.pow(10,a)}class su extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Bt.number){const o=this._getOrReturnCtx(e);return Ot(o,{code:bt.invalid_type,expected:Bt.number,received:o.parsedType}),Fr}let n;const a=new ca;for(const o of this._def.checks)o.kind==="int"?xn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?GA(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.not_finite,message:o.message}),a.dirty()):xn.assertNever(o);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,cr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,cr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,cr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,cr.toString(r))}setLimit(e,r,n,a){return new su({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:cr.toString(a)}]})}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:cr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:cr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:cr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:cr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:cr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:cr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:cr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:cr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:cr.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&xn.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}su.create=t=>new su({checks:[],typeName:Dr.ZodNumber,coerce:t?.coerce||!1,...Yr(t)});class iu extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Bt.bigint)return this._getInvalidInput(e);let n;const a=new ca;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ot(n,{code:bt.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):xn.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Ot(r,{code:bt.invalid_type,expected:Bt.bigint,received:r.parsedType}),Fr}gte(e,r){return this.setLimit("min",e,!0,cr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,cr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,cr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,cr.toString(r))}setLimit(e,r,n,a){return new iu({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:cr.toString(a)}]})}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:cr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:cr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:cr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:cr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:cr.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}iu.create=t=>{var e;return new iu({checks:[],typeName:Dr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Yr(t)})};class dh extends on{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Bt.boolean){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.boolean,received:n.parsedType}),Fr}return ja(e.data)}}dh.create=t=>new dh({typeName:Dr.ZodBoolean,coerce:t?.coerce||!1,...Yr(t)});class $u extends on{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Bt.date){const o=this._getOrReturnCtx(e);return Ot(o,{code:bt.invalid_type,expected:Bt.date,received:o.parsedType}),Fr}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Ot(o,{code:bt.invalid_date}),Fr}const n=new ca;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),Ot(a,{code:bt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):xn.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $u({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:cr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:cr.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}$u.create=t=>new $u({checks:[],coerce:t?.coerce||!1,typeName:Dr.ZodDate,...Yr(t)});class fm extends on{_parse(e){if(this._getType(e)!==Bt.symbol){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.symbol,received:n.parsedType}),Fr}return ja(e.data)}}fm.create=t=>new fm({typeName:Dr.ZodSymbol,...Yr(t)});class fh extends on{_parse(e){if(this._getType(e)!==Bt.undefined){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.undefined,received:n.parsedType}),Fr}return ja(e.data)}}fh.create=t=>new fh({typeName:Dr.ZodUndefined,...Yr(t)});class hh extends on{_parse(e){if(this._getType(e)!==Bt.null){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.null,received:n.parsedType}),Fr}return ja(e.data)}}hh.create=t=>new hh({typeName:Dr.ZodNull,...Yr(t)});class Xd extends on{constructor(){super(...arguments),this._any=!0}_parse(e){return ja(e.data)}}Xd.create=t=>new Xd({typeName:Dr.ZodAny,...Yr(t)});class Fu extends on{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ja(e.data)}}Fu.create=t=>new Fu({typeName:Dr.ZodUnknown,...Yr(t)});class mc extends on{_parse(e){const r=this._getOrReturnCtx(e);return Ot(r,{code:bt.invalid_type,expected:Bt.never,received:r.parsedType}),Fr}}mc.create=t=>new mc({typeName:Dr.ZodNever,...Yr(t)});class hm extends on{_parse(e){if(this._getType(e)!==Bt.undefined){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.void,received:n.parsedType}),Fr}return ja(e.data)}}hm.create=t=>new hm({typeName:Dr.ZodVoid,...Yr(t)});class Go extends on{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),a=this._def;if(r.parsedType!==Bt.array)return Ot(r,{code:bt.invalid_type,expected:Bt.array,received:r.parsedType}),Fr;if(a.exactLength!==null){const u=r.data.length>a.exactLength.value,c=r.data.length<a.exactLength.value;(u||c)&&(Ot(r,{code:u?bt.too_big:bt.too_small,minimum:c?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Ot(r,{code:bt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Ot(r,{code:bt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((u,c)=>a.type._parseAsync(new El(r,u,r.path,c)))).then(u=>ca.mergeArray(n,u));const o=[...r.data].map((u,c)=>a.type._parseSync(new El(r,u,r.path,c)));return ca.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new Go({...this._def,minLength:{value:e,message:cr.toString(r)}})}max(e,r){return new Go({...this._def,maxLength:{value:e,message:cr.toString(r)}})}length(e,r){return new Go({...this._def,exactLength:{value:e,message:cr.toString(r)}})}nonempty(e){return this.min(1,e)}}Go.create=(t,e)=>new Go({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dr.ZodArray,...Yr(e)});function Td(t){if(t instanceof Ts){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Al.create(Td(n))}return new Ts({...t._def,shape:()=>e})}else return t instanceof Go?new Go({...t._def,type:Td(t.element)}):t instanceof Al?Al.create(Td(t.unwrap())):t instanceof ou?ou.create(Td(t.unwrap())):t instanceof Ll?Ll.create(t.items.map(e=>Td(e))):t}class Ts extends on{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=xn.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Bt.object){const p=this._getOrReturnCtx(e);return Ot(p,{code:bt.invalid_type,expected:Bt.object,received:p.parsedType}),Fr}const{status:n,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof mc&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||c.push(p);const f=[];for(const p of u){const m=o[p],b=a.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new El(a,b,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof mc){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(p==="strict")c.length>0&&(Ot(a,{code:bt.unrecognized_keys,keys:c}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of c){const b=a.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new El(a,b,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of f){const b=await m.key,A=await m.value;p.push({key:b,value:A,alwaysSet:m.alwaysSet})}return p}).then(p=>ca.mergeObjectSync(n,p)):ca.mergeObjectSync(n,f)}get shape(){return this._def.shape()}strict(e){return cr.errToObj,new Ts({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var a,o,u,c;const f=(u=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,r,n).message)!==null&&u!==void 0?u:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=cr.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new Ts({...this._def,unknownKeys:"strip"})}passthrough(){return new Ts({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ts({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ts({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Dr.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ts({...this._def,catchall:e})}pick(e){const r={};return xn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ts({...this._def,shape:()=>r})}omit(e){const r={};return xn.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ts({...this._def,shape:()=>r})}deepPartial(){return Td(this)}partial(e){const r={};return xn.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?r[n]=a:r[n]=a.optional()}),new Ts({...this._def,shape:()=>r})}required(e){const r={};return xn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Al;)o=o._def.innerType;r[n]=o}}),new Ts({...this._def,shape:()=>r})}keyof(){return _w(xn.objectKeys(this.shape))}}Ts.create=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strip",catchall:mc.create(),typeName:Dr.ZodObject,...Yr(e)});Ts.strictCreate=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strict",catchall:mc.create(),typeName:Dr.ZodObject,...Yr(e)});Ts.lazycreate=(t,e)=>new Ts({shape:t,unknownKeys:"strip",catchall:mc.create(),typeName:Dr.ZodObject,...Yr(e)});class ph extends on{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new so(c.ctx.common.issues));return Ot(r,{code:bt.invalid_union,unionErrors:u}),Fr}if(r.common.async)return Promise.all(n.map(async o=>{const u={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const f of n){const p={...r,common:{...r.common,issues:[]},parent:null},m=f._parseSync({data:r.data,path:r.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new so(f));return Ot(r,{code:bt.invalid_union,unionErrors:c}),Fr}}get options(){return this._def.options}}ph.create=(t,e)=>new ph({options:t,typeName:Dr.ZodUnion,...Yr(e)});const uc=t=>t instanceof vh?uc(t.schema):t instanceof Xo?uc(t.innerType()):t instanceof xh?[t.value]:t instanceof au?t.options:t instanceof yh?xn.objectValues(t.enum):t instanceof bh?uc(t._def.innerType):t instanceof fh?[void 0]:t instanceof hh?[null]:t instanceof Al?[void 0,...uc(t.unwrap())]:t instanceof ou?[null,...uc(t.unwrap())]:t instanceof i1||t instanceof Nh?uc(t.unwrap()):t instanceof wh?uc(t._def.innerType):[];class Vm extends on{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Bt.object)return Ot(r,{code:bt.invalid_type,expected:Bt.object,received:r.parsedType}),Fr;const n=this.discriminator,a=r.data[n],o=this.optionsMap.get(a);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(Ot(r,{code:bt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Fr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const a=new Map;for(const o of r){const u=uc(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of u){if(a.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);a.set(c,o)}}return new Vm({typeName:Dr.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:a,...Yr(n)})}}function dv(t,e){const r=dc(t),n=dc(e);if(t===e)return{valid:!0,data:t};if(r===Bt.object&&n===Bt.object){const a=xn.objectKeys(e),o=xn.objectKeys(t).filter(c=>a.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=dv(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(r===Bt.array&&n===Bt.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=dv(u,c);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return r===Bt.date&&n===Bt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class mh extends on{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),a=(o,u)=>{if(cv(o)||cv(u))return Fr;const c=dv(o.value,u.value);return c.valid?((uv(o)||uv(u))&&r.dirty(),{status:r.value,value:c.data}):(Ot(n,{code:bt.invalid_intersection_types}),Fr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}mh.create=(t,e,r)=>new mh({left:t,right:e,typeName:Dr.ZodIntersection,...Yr(r)});class Ll extends on{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Bt.array)return Ot(n,{code:bt.invalid_type,expected:Bt.array,received:n.parsedType}),Fr;if(n.data.length<this._def.items.length)return Ot(n,{code:bt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fr;!this._def.rest&&n.data.length>this._def.items.length&&(Ot(n,{code:bt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...n.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new El(n,u,n.path,c)):null}).filter(u=>!!u);return n.common.async?Promise.all(o).then(u=>ca.mergeArray(r,u)):ca.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new Ll({...this._def,rest:e})}}Ll.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ll({items:t,typeName:Dr.ZodTuple,rest:null,...Yr(e)})};class gh extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Bt.object)return Ot(n,{code:bt.invalid_type,expected:Bt.object,received:n.parsedType}),Fr;const a=[],o=this._def.keyType,u=this._def.valueType;for(const c in n.data)a.push({key:o._parse(new El(n,c,n.path,c)),value:u._parse(new El(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?ca.mergeObjectAsync(r,a):ca.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof on?new gh({keyType:e,valueType:r,typeName:Dr.ZodRecord,...Yr(n)}):new gh({keyType:Wo.create(),valueType:e,typeName:Dr.ZodRecord,...Yr(r)})}}class pm extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Bt.map)return Ot(n,{code:bt.invalid_type,expected:Bt.map,received:n.parsedType}),Fr;const a=this._def.keyType,o=this._def.valueType,u=[...n.data.entries()].map(([c,f],p)=>({key:a._parse(new El(n,c,n.path,[p,"key"])),value:o._parse(new El(n,f,n.path,[p,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return Fr;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}})}else{const c=new Map;for(const f of u){const p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return Fr;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}}}}pm.create=(t,e,r)=>new pm({valueType:e,keyType:t,typeName:Dr.ZodMap,...Yr(r)});class Vu extends on{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Bt.set)return Ot(n,{code:bt.invalid_type,expected:Bt.set,received:n.parsedType}),Fr;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Ot(n,{code:bt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Ot(n,{code:bt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const m of f){if(m.status==="aborted")return Fr;m.status==="dirty"&&r.dirty(),p.add(m.value)}return{status:r.value,value:p}}const c=[...n.data.values()].map((f,p)=>o._parse(new El(n,f,n.path,p)));return n.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,r){return new Vu({...this._def,minSize:{value:e,message:cr.toString(r)}})}max(e,r){return new Vu({...this._def,maxSize:{value:e,message:cr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Vu.create=(t,e)=>new Vu({valueType:t,minSize:null,maxSize:null,typeName:Dr.ZodSet,...Yr(e)});class qd extends on{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Bt.function)return Ot(r,{code:bt.invalid_type,expected:Bt.function,received:r.parsedType}),Fr;function n(c,f){return um({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cm(),Yd].filter(p=>!!p),issueData:{code:bt.invalid_arguments,argumentsError:f}})}function a(c,f){return um({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cm(),Yd].filter(p=>!!p),issueData:{code:bt.invalid_return_type,returnTypeError:f}})}const o={errorMap:r.common.contextualErrorMap},u=r.data;if(this._def.returns instanceof Jd){const c=this;return ja(async function(...f){const p=new so([]),m=await c._def.args.parseAsync(f,o).catch(y=>{throw p.addIssue(n(f,y)),p}),b=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(b,o).catch(y=>{throw p.addIssue(a(b,y)),p})})}else{const c=this;return ja(function(...f){const p=c._def.args.safeParse(f,o);if(!p.success)throw new so([n(f,p.error)]);const m=Reflect.apply(u,this,p.data),b=c._def.returns.safeParse(m,o);if(!b.success)throw new so([a(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qd({...this._def,args:Ll.create(e).rest(Fu.create())})}returns(e){return new qd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new qd({args:e||Ll.create([]).rest(Fu.create()),returns:r||Fu.create(),typeName:Dr.ZodFunction,...Yr(n)})}}class vh extends on{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}vh.create=(t,e)=>new vh({getter:t,typeName:Dr.ZodLazy,...Yr(e)});class xh extends on{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ot(r,{received:r.data,code:bt.invalid_literal,expected:this._def.value}),Fr}return{status:"valid",value:e.data}}get value(){return this._def.value}}xh.create=(t,e)=>new xh({value:t,typeName:Dr.ZodLiteral,...Yr(e)});function _w(t,e){return new au({values:t,typeName:Dr.ZodEnum,...Yr(e)})}class au extends on{constructor(){super(...arguments),Qf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ot(r,{expected:xn.joinValues(n),received:r.parsedType,code:bt.invalid_type}),Fr}if(dm(this,Qf)||Nw(this,Qf,new Set(this._def.values)),!dm(this,Qf).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ot(r,{received:r.data,code:bt.invalid_enum_value,options:n}),Fr}return ja(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return au.create(e,{...this._def,...r})}exclude(e,r=this._def){return au.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Qf=new WeakMap;au.create=_w;class yh extends on{constructor(){super(...arguments),Zf.set(this,void 0)}_parse(e){const r=xn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Bt.string&&n.parsedType!==Bt.number){const a=xn.objectValues(r);return Ot(n,{expected:xn.joinValues(a),received:n.parsedType,code:bt.invalid_type}),Fr}if(dm(this,Zf)||Nw(this,Zf,new Set(xn.getValidEnumValues(this._def.values))),!dm(this,Zf).has(e.data)){const a=xn.objectValues(r);return Ot(n,{received:n.data,code:bt.invalid_enum_value,options:a}),Fr}return ja(e.data)}get enum(){return this._def.values}}Zf=new WeakMap;yh.create=(t,e)=>new yh({values:t,typeName:Dr.ZodNativeEnum,...Yr(e)});class Jd extends on{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Bt.promise&&r.common.async===!1)return Ot(r,{code:bt.invalid_type,expected:Bt.promise,received:r.parsedType}),Fr;const n=r.parsedType===Bt.promise?r.data:Promise.resolve(r.data);return ja(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Jd.create=(t,e)=>new Jd({type:t,typeName:Dr.ZodPromise,...Yr(e)});class Xo extends on{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{Ot(n,u),u.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(n.data,o);if(n.common.async)return Promise.resolve(u).then(async c=>{if(r.value==="aborted")return Fr;const f=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return f.status==="aborted"?Fr:f.status==="dirty"||r.value==="dirty"?Dd(f.value):f});{if(r.value==="aborted")return Fr;const c=this._def.schema._parseSync({data:u,path:n.path,parent:n});return c.status==="aborted"?Fr:c.status==="dirty"||r.value==="dirty"?Dd(c.value):c}}if(a.type==="refinement"){const u=c=>{const f=a.refinement(c,o);if(n.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?Fr:(c.status==="dirty"&&r.dirty(),u(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?Fr:(c.status==="dirty"&&r.dirty(),u(c.value).then(()=>({status:r.value,value:c.value}))))}if(a.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!zu(u))return u;const c=a.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>zu(u)?Promise.resolve(a.transform(u.value,o)).then(c=>({status:r.value,value:c})):u);xn.assertNever(a)}}Xo.create=(t,e,r)=>new Xo({schema:t,typeName:Dr.ZodEffects,effect:e,...Yr(r)});Xo.createWithPreprocess=(t,e,r)=>new Xo({schema:e,effect:{type:"preprocess",transform:t},typeName:Dr.ZodEffects,...Yr(r)});class Al extends on{_parse(e){return this._getType(e)===Bt.undefined?ja(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Al.create=(t,e)=>new Al({innerType:t,typeName:Dr.ZodOptional,...Yr(e)});class ou extends on{_parse(e){return this._getType(e)===Bt.null?ja(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ou.create=(t,e)=>new ou({innerType:t,typeName:Dr.ZodNullable,...Yr(e)});class bh extends on{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Bt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}bh.create=(t,e)=>new bh({innerType:t,typeName:Dr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Yr(e)});class wh extends on{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return uh(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}wh.create=(t,e)=>new wh({innerType:t,typeName:Dr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Yr(e)});class mm extends on{_parse(e){if(this._getType(e)!==Bt.nan){const n=this._getOrReturnCtx(e);return Ot(n,{code:bt.invalid_type,expected:Bt.nan,received:n.parsedType}),Fr}return{status:"valid",value:e.data}}}mm.create=t=>new mm({typeName:Dr.ZodNaN,...Yr(t)});const KA=Symbol("zod_brand");class i1 extends on{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ih extends on{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Fr:o.status==="dirty"?(r.dirty(),Dd(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Fr:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,r){return new Ih({in:e,out:r,typeName:Dr.ZodPipeline})}}class Nh extends on{_parse(e){const r=this._def.innerType._parse(e),n=a=>(zu(a)&&(a.value=Object.freeze(a.value)),a);return uh(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Nh.create=(t,e)=>new Nh({innerType:t,typeName:Dr.ZodReadonly,...Yr(e)});function Ax(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Aw(t,e={},r){return t?Xd.create().superRefine((n,a)=>{var o,u;const c=t(n);if(c instanceof Promise)return c.then(f=>{var p,m;if(!f){const b=Ax(e,n),A=(m=(p=b.fatal)!==null&&p!==void 0?p:r)!==null&&m!==void 0?m:!0;a.addIssue({code:"custom",...b,fatal:A})}});if(!c){const f=Ax(e,n),p=(u=(o=f.fatal)!==null&&o!==void 0?o:r)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...f,fatal:p})}}):Xd.create()}const QA={object:Ts.lazycreate};var Dr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dr||(Dr={}));const ZA=(t,e={message:`Input not instance of ${t.name}`})=>Aw(r=>r instanceof t,e),Pw=Wo.create,kw=su.create,YA=mm.create,XA=iu.create,Tw=dh.create,JA=$u.create,eP=fm.create,tP=fh.create,rP=hh.create,nP=Xd.create,sP=Fu.create,iP=mc.create,aP=hm.create,oP=Go.create,lP=Ts.create,cP=Ts.strictCreate,uP=ph.create,dP=Vm.create,fP=mh.create,hP=Ll.create,pP=gh.create,mP=pm.create,gP=Vu.create,vP=qd.create,xP=vh.create,yP=xh.create,bP=au.create,wP=yh.create,NP=Jd.create,Px=Xo.create,SP=Al.create,jP=ou.create,CP=Xo.createWithPreprocess,_P=Ih.create,AP=()=>Pw().optional(),PP=()=>kw().optional(),kP=()=>Tw().optional(),TP={string:(t=>Wo.create({...t,coerce:!0})),number:(t=>su.create({...t,coerce:!0})),boolean:(t=>dh.create({...t,coerce:!0})),bigint:(t=>iu.create({...t,coerce:!0})),date:(t=>$u.create({...t,coerce:!0}))},EP=Fr;var B=Object.freeze({__proto__:null,defaultErrorMap:Yd,setErrorMap:CA,getErrorMap:cm,makeIssue:um,EMPTY_PATH:_A,addIssueToContext:Ot,ParseStatus:ca,INVALID:Fr,DIRTY:Dd,OK:ja,isAborted:cv,isDirty:uv,isValid:zu,isAsync:uh,get util(){return xn},get objectUtil(){return lv},ZodParsedType:Bt,getParsedType:dc,ZodType:on,datetimeRegex:Cw,ZodString:Wo,ZodNumber:su,ZodBigInt:iu,ZodBoolean:dh,ZodDate:$u,ZodSymbol:fm,ZodUndefined:fh,ZodNull:hh,ZodAny:Xd,ZodUnknown:Fu,ZodNever:mc,ZodVoid:hm,ZodArray:Go,ZodObject:Ts,ZodUnion:ph,ZodDiscriminatedUnion:Vm,ZodIntersection:mh,ZodTuple:Ll,ZodRecord:gh,ZodMap:pm,ZodSet:Vu,ZodFunction:qd,ZodLazy:vh,ZodLiteral:xh,ZodEnum:au,ZodNativeEnum:yh,ZodPromise:Jd,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:Al,ZodNullable:ou,ZodDefault:bh,ZodCatch:wh,ZodNaN:mm,BRAND:KA,ZodBranded:i1,ZodPipeline:Ih,ZodReadonly:Nh,custom:Aw,Schema:on,ZodSchema:on,late:QA,get ZodFirstPartyTypeKind(){return Dr},coerce:TP,any:nP,array:oP,bigint:XA,boolean:Tw,date:JA,discriminatedUnion:dP,effect:Px,enum:bP,function:vP,instanceof:ZA,intersection:fP,lazy:xP,literal:yP,map:mP,nan:YA,nativeEnum:wP,never:iP,null:rP,nullable:jP,number:kw,object:lP,oboolean:kP,onumber:PP,optional:SP,ostring:AP,pipeline:_P,preprocess:CP,promise:NP,record:pP,set:gP,strictObject:cP,string:Pw,symbol:eP,transformer:Px,tuple:hP,undefined:tP,union:uP,unknown:sP,void:aP,NEVER:EP,ZodIssueCode:bt,quotelessJson:jA,ZodError:so});const pt=Symbol.for("drizzle:entityKind");function qi(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,pt))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(pt in r&&r[pt]===e[pt])return!0;r=Object.getPrototypeOf(r)}return!1}class Sh{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[pt]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class LP{static[pt]="ColumnBuilder";config;constructor(e,r,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const Ud=Symbol.for("drizzle:Name");class RP{static[pt]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{const{name:n,columns:a,foreignColumns:o}=e();return{name:n,columns:a,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new DP(e,this)}}class DP{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[pt]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),a=r.map(c=>c.name),o=n.map(c=>c.name),u=[this.table[Ud],...a,n[0].table[Ud],...o];return e??`${u.join("_")}_fk`}}function IP(t,...e){return t(...e)}function FP(t,e){return`${t[Ud]}_${e.join("_")}_unique`}function kx(t,e,r){for(let n=e;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function Ew(t,e=0){const r=[];let n=e,a=!1;for(;n<t.length;){const o=t[n];if(o===","){(a||n===e)&&r.push(""),a=!0,n++;continue}if(a=!1,o==="\\"){n+=2;continue}if(o==='"'){const[f,p]=kx(t,n+1,!0);r.push(f),n=p;continue}if(o==="}")return[r,n+1];if(o==="{"){const[f,p]=Ew(t,n+1);r.push(f),n=p;continue}const[u,c]=kx(t,n,!1);r.push(u),n=c}return[r,n]}function OP(t){const[e]=Ew(t,1);return e}function Lw(t){return`{${t.map(e=>Array.isArray(e)?Lw(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class Cn extends LP{foreignKeyConfigs=[];static[pt]="PgColumnBuilder";array(e){return new BP(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:n,actions:a})=>IP((o,u)=>{const c=new RP(()=>{const f=o();return{columns:[e],foreignColumns:[f]}});return u.onUpdate&&c.onUpdate(u.onUpdate),u.onDelete&&c.onDelete(u.onDelete),c.build(r)},n,a))}buildExtraConfigColumn(e){return new MP(e,this.config)}}class sn extends Sh{constructor(e,r){r.uniqueName||(r.uniqueName=FP(e,[r.name])),super(e,r),this.table=e}static[pt]="PgColumn"}class MP extends sn{static[pt]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class BP extends Cn{static[pt]="PgArrayBuilder";constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new a1(e,this.config,r)}}class a1 extends sn{constructor(e,r,n,a){super(e,r),this.baseColumn=n,this.range=a,this.size=r.size}size;static[pt]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=OP(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){const n=e.map(a=>a===null?null:qi(this.baseColumn,a1)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return r?n:Lw(n)}}const Tx=Symbol.for("drizzle:isPgEnum");function qP(t){return!!t&&typeof t=="function"&&Tx in t&&t[Tx]===!0}class Rw{static[pt]="Subquery";constructor(e,r,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:a}}}const UP={startActiveSpan(t,e){return e()}},zd=Symbol.for("drizzle:ViewBaseConfig"),l0=Symbol.for("drizzle:Schema"),Ex=Symbol.for("drizzle:Columns"),Lx=Symbol.for("drizzle:ExtraConfigColumns"),c0=Symbol.for("drizzle:OriginalName"),u0=Symbol.for("drizzle:BaseName"),gm=Symbol.for("drizzle:IsAlias"),Rx=Symbol.for("drizzle:ExtraConfigBuilder"),Dw=Symbol.for("drizzle:IsDrizzleTable");class to{static[pt]="Table";static Symbol={Name:Ud,Schema:l0,OriginalName:c0,Columns:Ex,ExtraConfigColumns:Lx,BaseName:u0,IsAlias:gm,ExtraConfigBuilder:Rx};[Ud];[c0];[l0];[Ex];[Lx];[u0];[gm]=!1;[Dw]=!0;[Rx]=void 0;constructor(e,r,n){this[Ud]=this[c0]=e,this[l0]=r,this[u0]=n}}function Iw(t){return typeof t=="object"&&t!==null&&Dw in t}function zP(t){return t!=null&&typeof t.getSQL=="function"}function $P(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}class zo{static[pt]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new qs([this])}}class qs{constructor(e){this.queryChunks=e}static[pt]="SQL";decoder=Fw;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return UP.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:u,prepareTyping:c,inlineParams:f,paramStartIndex:p}=n;return $P(e.map(m=>{if(qi(m,zo))return{sql:m.value.join(""),params:[]};if(qi(m,fv))return{sql:o(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const b=[new zo("(")];for(const[A,y]of m.entries())b.push(y),A<m.length-1&&b.push(new zo(", "));return b.push(new zo(")")),this.buildQueryFromSourceParams(b,n)}if(qi(m,qs))return this.buildQueryFromSourceParams(m.queryChunks,{...n,inlineParams:f||m.shouldInlineParams});if(qi(m,to)){const b=m[to.Symbol.Schema],A=m[to.Symbol.Name];return{sql:b===void 0||m[gm]?o(A):o(b)+"."+o(A),params:[]}}if(qi(m,Sh)){const b=a.getColumnCasing(m);if(r.invokeSource==="indexes")return{sql:o(b),params:[]};const A=m.table[to.Symbol.Schema];return{sql:m.table[gm]||A===void 0?o(m.table[to.Symbol.Name])+"."+o(b):o(A)+"."+o(m.table[to.Symbol.Name])+"."+o(b),params:[]}}if(qi(m,VP)){const b=m[zd].schema,A=m[zd].name;return{sql:b===void 0||m[zd].isAlias?o(A):o(b)+"."+o(A),params:[]}}if(qi(m,Mw)){if(qi(m.value,hv))return{sql:u(p.value++,m),params:[m],typings:["none"]};const b=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(qi(b,qs))return this.buildQueryFromSourceParams([b],n);if(f)return{sql:this.mapInlineParam(b,n),params:[]};let A=["none"];return c&&(A=[c(m.encoder)]),{sql:u(p.value++,b),params:[b],typings:A}}return qi(m,hv)?{sql:u(p.value++,m),params:[m],typings:["none"]}:qi(m,qs.Aliased)&&m.fieldAlias!==void 0?{sql:o(m.fieldAlias),params:[]}:qi(m,Rw)?m._.isWith?{sql:o(m._.alias),params:[]}:this.buildQueryFromSourceParams([new zo("("),m._.sql,new zo(") "),new fv(m._.alias)],n):qP(m)?m.schema?{sql:o(m.schema)+"."+o(m.enumName),params:[]}:{sql:o(m.enumName),params:[]}:zP(m)?m.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([m.getSQL()],n):this.buildQueryFromSourceParams([new zo("("),m.getSQL(),new zo(")")],n):f?{sql:this.mapInlineParam(m,n),params:[]}:{sql:u(p.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new qs.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class fv{constructor(e){this.value=e}static[pt]="Name";brand;getSQL(){return new qs([this])}}const Fw={mapFromDriverValue:t=>t},Ow={mapToDriverValue:t=>t};({...Fw,...Ow});class Mw{constructor(e,r=Ow){this.value=e,this.encoder=r}static[pt]="Param";brand;getSQL(){return new qs([this])}}function vm(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new zo(t[0]));for(const[n,a]of e.entries())r.push(a,new zo(t[n+1]));return new qs(r)}(t=>{function e(){return new qs([])}t.empty=e;function r(f){return new qs(f)}t.fromList=r;function n(f){return new qs([new zo(f)])}t.raw=n;function a(f,p){const m=[];for(const[b,A]of f.entries())b>0&&p!==void 0&&m.push(p),m.push(A);return new qs(m)}t.join=a;function o(f){return new fv(f)}t.identifier=o;function u(f){return new hv(f)}t.placeholder=u;function c(f,p){return new Mw(f,p)}t.param=c})(vm||(vm={}));(t=>{class e{constructor(n,a){this.sql=n,this.fieldAlias=a}static[pt]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(qs||(qs={}));class hv{constructor(e){this.name=e}static[pt]="Placeholder";getSQL(){return new qs([this])}}const Bw=Symbol.for("drizzle:IsDrizzleView");class VP{static[pt]="View";[zd];[Bw]=!0;constructor({name:e,schema:r,selectedFields:n,query:a}){this[zd]={name:e,originalName:e,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new qs([this])}}function HP(t){return typeof t=="object"&&t!==null&&Bw in t}Sh.prototype.getSQL=function(){return new qs([this])};to.prototype.getSQL=function(){return new qs([this])};Rw.prototype.getSQL=function(){return new qs([this])};function WP(t){return t[to.Symbol.Columns]}function GP(t){return t[zd].selectedFields}function Li(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class Hm extends Cn{static[pt]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class KP extends Hm{static[pt]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new QP(e,this.config)}}class QP extends sn{static[pt]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class ZP extends Hm{static[pt]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new YP(e,this.config)}}class YP extends sn{static[pt]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function XP(t,e){const{name:r,config:n}=Li(t,e);return n.mode==="number"?new KP(r):new ZP(r)}class JP extends Cn{static[pt]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ek(e,this.config)}}class ek extends sn{static[pt]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class tk extends Cn{static[pt]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new rk(e,this.config)}}class rk extends sn{static[pt]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function nk(t,e){const{name:r,config:n}=Li(t,e);return n.mode==="number"?new JP(r):new tk(r)}class sk extends Cn{static[pt]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ik(e,this.config)}}class ik extends sn{static[pt]="PgBoolean";getSQLType(){return"boolean"}}function ak(t){return new sk(t??"")}class ok extends Cn{static[pt]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new lk(e,this.config)}}class lk extends sn{static[pt]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function ck(t,e={}){const{name:r,config:n}=Li(t,e);return new ok(r,n)}class uk extends Cn{static[pt]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new dk(e,this.config)}}class dk extends sn{static[pt]="PgCidr";getSQLType(){return"cidr"}}function fk(t){return new uk(t??"")}class hk extends Cn{static[pt]="PgCustomColumnBuilder";constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new pk(e,this.config)}}class pk extends sn{static[pt]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function mk(t){return(e,r)=>{const{name:n,config:a}=Li(e,r);return new hk(n,a,t)}}class Fh extends Cn{static[pt]="PgDateColumnBaseBuilder";defaultNow(){return this.default(vm`now()`)}}class gk extends Fh{static[pt]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new vk(e,this.config)}}class vk extends sn{static[pt]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class xk extends Fh{static[pt]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new yk(e,this.config)}}class yk extends sn{static[pt]="PgDateString";getSQLType(){return"date"}}function bk(t,e){const{name:r,config:n}=Li(t,e);return n?.mode==="date"?new gk(r):new xk(r)}class wk extends Cn{static[pt]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Nk(e,this.config)}}class Nk extends sn{static[pt]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function Sk(t){return new wk(t??"")}class jk extends Cn{static[pt]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Ck(e,this.config)}}class Ck extends sn{static[pt]="PgInet";getSQLType(){return"inet"}}function _k(t){return new jk(t??"")}class Ak extends Hm{static[pt]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Pk(e,this.config)}}class Pk extends sn{static[pt]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function ns(t){return new Ak(t??"")}class kk extends Cn{static[pt]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Tk(e,this.config)}}class Tk extends sn{static[pt]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}}function Ek(t,e={}){const{name:r,config:n}=Li(t,e);return new kk(r,n)}class Lk extends Cn{static[pt]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Rk(e,this.config)}}class Rk extends sn{static[pt]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Dk(t){return new Lk(t??"")}class Ik extends Cn{static[pt]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Fk(e,this.config)}}class Fk extends sn{static[pt]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Ok(t){return new Ik(t??"")}class Mk extends Cn{static[pt]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Bk(e,this.config)}}class Bk extends sn{static[pt]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class qk extends Cn{static[pt]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Uk(e,this.config)}}class Uk extends sn{static[pt]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function zk(t,e){const{name:r,config:n}=Li(t,e);return!n?.mode||n.mode==="tuple"?new Mk(r):new qk(r)}class $k extends Cn{static[pt]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Vk(e,this.config)}}class Vk extends sn{static[pt]="PgMacaddr";getSQLType(){return"macaddr"}}function Hk(t){return new $k(t??"")}class Wk extends Cn{static[pt]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Gk(e,this.config)}}class Gk extends sn{static[pt]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Kk(t){return new Wk(t??"")}class Qk extends Cn{static[pt]="PgNumericBuilder";constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new Zk(e,this.config)}}class Zk extends sn{static[pt]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function qw(t,e){const{name:r,config:n}=Li(t,e);return new Qk(r,n?.precision,n?.scale)}const gn=qw;class Yk extends Cn{static[pt]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Xk(e,this.config)}}class Xk extends sn{static[pt]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class Jk extends Cn{static[pt]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new eT(e,this.config)}}class eT extends sn{static[pt]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function tT(t,e){const{name:r,config:n}=Li(t,e);return!n?.mode||n.mode==="tuple"?new Yk(r):new Jk(r)}function rT(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function Dx(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,t[e+a]);return n.getFloat64(0,!0)}function Uw(t){const e=rT(t);let r=0;const n=e[r];r+=1;const a=new DataView(e.buffer),o=a.getUint32(r,n===1);if(r+=4,o&536870912&&(a.getUint32(r,n===1),r+=4),(o&65535)===1){const u=Dx(e,r);r+=8;const c=Dx(e,r);return r+=8,[u,c]}throw new Error("Unsupported geometry type")}class nT extends Cn{static[pt]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new sT(e,this.config)}}class sT extends sn{static[pt]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Uw(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class iT extends Cn{static[pt]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new aT(e,this.config)}}class aT extends sn{static[pt]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=Uw(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function oT(t,e){const{name:r,config:n}=Li(t,e);return!n?.mode||n.mode==="tuple"?new nT(r):new iT(r)}class lT extends Cn{static[pt]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new cT(e,this.config)}}class cT extends sn{static[pt]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function uT(t){return new lT(t??"")}class dT extends Cn{static[pt]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new fT(e,this.config)}}class fT extends sn{static[pt]="PgSerial";getSQLType(){return"serial"}}function ua(t){return new dT(t??"")}class hT extends Hm{static[pt]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new pT(e,this.config)}}class pT extends sn{static[pt]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function mT(t){return new hT(t??"")}class gT extends Cn{static[pt]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new vT(e,this.config)}}class vT extends sn{static[pt]="PgSmallSerial";getSQLType(){return"smallserial"}}function xT(t){return new gT(t??"")}class yT extends Cn{static[pt]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new bT(e,this.config)}}class bT extends sn{static[pt]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function dt(t,e={}){const{name:r,config:n}=Li(t,e);return new yT(r,n)}class wT extends Fh{constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}static[pt]="PgTimeBuilder";build(e){return new NT(e,this.config)}}class NT extends sn{static[pt]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function ST(t,e={}){const{name:r,config:n}=Li(t,e);return new wT(r,n.withTimezone??!1,n.precision)}class jT extends Fh{static[pt]="PgTimestampBuilder";constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new CT(e,this.config)}}class CT extends sn{static[pt]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class _T extends Fh{static[pt]="PgTimestampStringBuilder";constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new AT(e,this.config)}}class AT extends sn{static[pt]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Il(t,e={}){const{name:r,config:n}=Li(t,e);return n?.mode==="string"?new _T(r,n.withTimezone??!1,n.precision):new jT(r,n?.withTimezone??!1,n?.precision)}class PT extends Cn{static[pt]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(vm`gen_random_uuid()`)}build(e){return new kT(e,this.config)}}class kT extends sn{static[pt]="PgUUID";getSQLType(){return"uuid"}}function TT(t){return new PT(t??"")}class ET extends Cn{static[pt]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new LT(e,this.config)}}class LT extends sn{static[pt]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function RT(t,e={}){const{name:r,config:n}=Li(t,e);return new ET(r,n)}class DT extends Cn{static[pt]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new IT(e,this.config)}}class IT extends sn{static[pt]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function FT(t,e){const{name:r,config:n}=Li(t,e);return new DT(r,n)}class OT extends Cn{static[pt]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new MT(e,this.config)}}class MT extends sn{static[pt]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function BT(t,e){const{name:r,config:n}=Li(t,e);return new OT(r,n)}class qT extends Cn{static[pt]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new UT(e,this.config)}}class UT extends sn{static[pt]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function zT(t,e){const{name:r,config:n}=Li(t,e);return new qT(r,n)}class $T extends Cn{static[pt]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new VT(e,this.config)}}class VT extends sn{static[pt]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function HT(t,e){const{name:r,config:n}=Li(t,e);return new $T(r,n)}function WT(){return{bigint:XP,bigserial:nk,boolean:ak,char:ck,cidr:fk,customType:mk,date:bk,doublePrecision:Sk,inet:_k,integer:ns,interval:Ek,json:Dk,jsonb:Ok,line:zk,macaddr:Hk,macaddr8:Kk,numeric:qw,point:tT,geometry:oT,real:uT,serial:ua,smallint:mT,smallserial:xT,text:dt,time:ST,timestamp:Il,uuid:TT,varchar:RT,bit:FT,halfvec:BT,sparsevec:zT,vector:HT}}const pv=Symbol.for("drizzle:PgInlineForeignKeys"),Ix=Symbol.for("drizzle:EnableRLS");class Fx extends to{static[pt]="PgTable";static Symbol=Object.assign({},to.Symbol,{InlineForeignKeys:pv,EnableRLS:Ix});[pv]=[];[Ix]=!1;[to.Symbol.ExtraConfigBuilder]=void 0}function GT(t,e,r,n,a=t){const o=new Fx(t,n,a),u=typeof e=="function"?e(WT()):e,c=Object.fromEntries(Object.entries(u).map(([m,b])=>{const A=b;A.setName(m);const y=A.build(o);return o[pv].push(...A.buildForeignKeys(y,o)),[m,y]})),f=Object.fromEntries(Object.entries(u).map(([m,b])=>{const A=b;A.setName(m);const y=A.buildExtraConfigColumn(o);return[m,y]})),p=Object.assign(o,c);return p[to.Symbol.Columns]=c,p[to.Symbol.ExtraConfigColumns]=f,Object.assign(p,{enableRLS:()=>(p[Fx.Symbol.EnableRLS]=!0,p)})}const Ca=(t,e,r)=>GT(t,e,r,void 0),ks={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Gs(t,e){return e.includes(t.columnType)}function KT(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const QT=B.union([B.string(),B.number(),B.boolean(),B.null()]),ZT=B.union([QT,B.record(B.any()),B.array(B.any())]),YT=B.custom(t=>t instanceof Buffer);function zw(t,e){const r=e?.zodInstance??B,n=e?.coerce??{};let a;return KT(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(Gs(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):Gs(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):Gs(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):Gs(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):Gs(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):Gs(t,["PgArray"])?(a=r.array(zw(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=XT(t,r,n):t.dataType==="bigint"?a=JT(t,r,n):t.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?a=eE(t,r,n):t.dataType==="json"?a=ZT:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=YT)),a||(a=r.any()),a}function XT(t,e,r){let n=t.getSQLType().includes("unsigned"),a,o,u=!1;Gs(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:ks.INT8_MIN,o=n?ks.INT8_UNSIGNED_MAX:ks.INT8_MAX,u=!0):Gs(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:ks.INT16_MIN,o=n?ks.INT16_UNSIGNED_MAX:ks.INT16_MAX,u=!0):Gs(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:ks.INT24_MIN,o=n?ks.INT24_UNSIGNED_MAX:ks.INT24_MAX,u=Gs(t,["MySqlMediumInt","SingleStoreMediumInt"])):Gs(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:ks.INT32_MIN,o=n?ks.INT32_UNSIGNED_MAX:ks.INT32_MAX,u=!0):Gs(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:ks.INT48_MIN,o=n?ks.INT48_UNSIGNED_MAX:ks.INT48_MAX):Gs(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||Gs(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,u=!0):Gs(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,u=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let c=r===!0||r?.number?e.coerce.number():e.number();return c=c.min(a).max(o),u?c.int():c}function JT(t,e,r){const n=t.getSQLType().includes("unsigned"),a=n?0n:ks.INT64_MIN,o=n?ks.INT64_UNSIGNED_MAX:ks.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function eE(t,e,r){if(Gs(t,["PgUUID"]))return e.string().uuid();let n,a,o=!1;Gs(t,["PgVarchar","SQLiteText"])?n=t.length:Gs(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??ks.INT16_UNSIGNED_MAX:Gs(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=ks.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=ks.INT24_UNSIGNED_MAX:t.textType==="text"?n=ks.INT16_UNSIGNED_MAX:n=ks.INT8_UNSIGNED_MAX),Gs(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,o=!0),Gs(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let u=r===!0||r?.string?e.coerce.string():e.string();return u=a?u.regex(a):u,n&&o?u.length(n):n?u.max(n):u}function $w(t){return Iw(t)?WP(t):GP(t)}function Vw(t,e,r,n){const a={};for(const[o,u]of Object.entries(t)){if(!qi(u,Sh)&&!qi(u,qs)&&!qi(u,qs.Aliased)&&typeof u=="object"){const b=Iw(u)||HP(u)?$w(u):u;a[o]=Vw(b,e[o]??{},r,n);continue}const c=e[o];if(c!==void 0&&typeof c!="function"){a[o]=c;continue}const f=qi(u,Sh)?u:void 0,p=f?zw(f,n):B.any(),m=typeof c=="function"?c(p):p;r.never(f)||(a[o]=m,f&&(r.nullable(f)&&(a[o]=a[o].nullable()),r.optional(f)&&(a[o]=a[o].optional())))}return B.object(a)}const tE={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},_a=(t,e)=>{const r=$w(t);return Vw(r,{},tE)},jh=["Standard","Administrator"],Hw=Ca("users",{id:ua("id").primaryKey(),username:dt("username").notNull().unique(),password:dt("password").notNull(),name:dt("name").notNull().default("Admin"),email:dt("email"),mobile:dt("mobile"),role:dt("role").notNull().default("Standard"),createdAt:Il("created_at").notNull().defaultNow()}),rE=Ca("user_client_assignments",{id:ua("id").primaryKey(),userId:ns("user_id").notNull().references(()=>Hw.id),clientId:ns("client_id").notNull().references(()=>o1.id)}),o1=Ca("clients",{id:ua("id").primaryKey(),name:dt("name").notNull(),location:dt("location").notNull(),gstNo:dt("gst_no").notNull(),contactPerson:dt("contact_person").notNull(),mobileNumber:dt("mobile_number").notNull(),emailAddress:dt("email_address").notNull()}),xm=["Supply and Fabrication","Structural Fabrication","Job Work"],Zu=Ca("projects",{id:ua("id").primaryKey(),projectName:dt("project_name").notNull(),clientId:ns("client_id").notNull().references(()=>o1.id),location:dt("location").notNull(),quotationType:dt("quotation_type").notNull(),createdAt:Il("created_at").notNull().defaultNow()}),Ww=Ca("quotations",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),quotationNumber:dt("quotation_number").notNull(),revision:dt("revision").notNull().default("R-000"),version:ns("version").notNull().default(1),parentQuotationId:ns("parent_quotation_id"),enquiryNumber:dt("enquiry_number").notNull(),subject:dt("subject").notNull(),contactName:dt("contact_name").notNull(),contactMobile:dt("contact_mobile").notNull(),contactEmail:dt("contact_email").notNull(),buildingDescription:dt("building_description"),buildingArea:dt("building_area"),frameType:dt("frame_type"),length:dt("length"),width:dt("width"),clearHeight:dt("clear_height"),roofSlope:dt("roof_slope"),paymentTerms:dt("payment_terms"),notes:dt("notes"),contentSections:dt("content_sections"),createdAt:Il("created_at").notNull().defaultNow()}),nE=Ca("quotation_items",{id:ua("id").primaryKey(),quotationId:ns("quotation_id").notNull().references(()=>Ww.id),serialNo:ns("serial_no").notNull(),description:dt("description").notNull(),unit:dt("unit").notNull(),quantity:gn("quantity",{precision:10,scale:2}).notNull(),rate:gn("rate",{precision:12,scale:2}).notNull(),amount:gn("amount",{precision:14,scale:2}).notNull(),remarks:dt("remarks")}),Gw=Ca("invoices",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),invoiceNumber:dt("invoice_number").notNull(),revision:dt("revision").notNull().default("R-001"),version:ns("version").notNull().default(1),parentInvoiceId:ns("parent_invoice_id"),organisationName:dt("organisation_name").notNull(),registeredAddress:dt("registered_address").notNull(),consigneeAddress:dt("consignee_address").notNull(),clientGstin:dt("client_gstin"),workOrderNo:dt("work_order_no"),dispatchDetails:dt("dispatch_details"),cgstRate:gn("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gn("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gn("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:dt("applied_tax_type").default("igst"),totalAmount:gn("total_amount",{precision:14,scale:2}).default("0"),totalTax:gn("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gn("grand_total",{precision:14,scale:2}).default("0"),contentSections:dt("content_sections"),createdAt:Il("created_at").notNull().defaultNow()}),sE=Ca("invoice_items",{id:ua("id").primaryKey(),invoiceId:ns("invoice_id").notNull().references(()=>Gw.id),serialNo:ns("serial_no").notNull(),description:dt("description").notNull(),hsnCode:dt("hsn_code"),quantity:gn("quantity",{precision:10,scale:3}).notNull(),unit:dt("unit").default("LS"),ratePerUnit:gn("rate_per_unit",{precision:12,scale:2}),percentage:gn("percentage",{precision:5,scale:2}),amount:gn("amount",{precision:14,scale:2}).notNull(),remarks:dt("remarks")}),Kw=Ca("gate_passes",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),gatePassNumber:dt("gate_pass_number").notNull(),revision:dt("revision").notNull().default("R-001"),version:ns("version").notNull().default(1),parentGatePassId:ns("parent_gate_pass_id"),organisationName:dt("organisation_name").notNull(),registeredAddress:dt("registered_address").notNull(),consigneeAddress:dt("consignee_address").notNull(),clientGstin:dt("client_gstin"),workOrderNo:dt("work_order_no"),dispatchDetails:dt("dispatch_details"),cgstRate:gn("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gn("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gn("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:dt("applied_tax_type").default("igst"),totalAmount:gn("total_amount",{precision:14,scale:2}).default("0"),totalTax:gn("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gn("grand_total",{precision:14,scale:2}).default("0"),contentSections:dt("content_sections"),createdAt:Il("created_at").notNull().defaultNow()}),iE=Ca("gate_pass_items",{id:ua("id").primaryKey(),gatePassId:ns("gate_pass_id").notNull().references(()=>Kw.id),serialNo:ns("serial_no").notNull(),description:dt("description").notNull(),hsnCode:dt("hsn_code"),quantity:gn("quantity",{precision:10,scale:3}).notNull(),unit:dt("unit").default("LS"),ratePerUnit:gn("rate_per_unit",{precision:12,scale:2}),percentage:gn("percentage",{precision:5,scale:2}),amount:gn("amount",{precision:14,scale:2}).notNull(),remarks:dt("remarks")}),Qw=Ca("delivery_challans",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),deliveryChallanNumber:dt("delivery_challan_number").notNull(),revision:dt("revision").notNull().default("R-001"),version:ns("version").notNull().default(1),parentDeliveryChallanId:ns("parent_delivery_challan_id"),organisationName:dt("organisation_name").notNull(),registeredAddress:dt("registered_address").notNull(),consigneeAddress:dt("consignee_address").notNull(),clientGstin:dt("client_gstin"),workOrderNo:dt("work_order_no"),dispatchDetails:dt("dispatch_details"),cgstRate:gn("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gn("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gn("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:dt("applied_tax_type").default("igst"),totalAmount:gn("total_amount",{precision:14,scale:2}).default("0"),totalTax:gn("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gn("grand_total",{precision:14,scale:2}).default("0"),contentSections:dt("content_sections"),createdAt:Il("created_at").notNull().defaultNow()}),aE=Ca("delivery_challan_items",{id:ua("id").primaryKey(),deliveryChallanId:ns("delivery_challan_id").notNull().references(()=>Qw.id),serialNo:ns("serial_no").notNull(),description:dt("description").notNull(),hsnCode:dt("hsn_code"),quantity:gn("quantity",{precision:10,scale:3}).notNull(),unit:dt("unit").default("LS"),ratePerUnit:gn("rate_per_unit",{precision:12,scale:2}),percentage:gn("percentage",{precision:5,scale:2}),amount:gn("amount",{precision:14,scale:2}).notNull(),remarks:dt("remarks")}),oE=Ca("project_ledger_budgets",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),projectValue:gn("project_value",{precision:14,scale:2}).notNull().default("0"),updatedAt:Il("updated_at").notNull().defaultNow()}),lE=Ca("project_ledger_entries",{id:ua("id").primaryKey(),projectId:ns("project_id").notNull().references(()=>Zu.id),entryDate:dt("entry_date").notNull(),entryType:dt("entry_type").notNull(),category:dt("category").notNull(),description:dt("description").notNull(),amount:gn("amount",{precision:14,scale:2}).notNull(),paymentMode:dt("payment_mode").notNull(),remarks:dt("remarks"),reference:dt("reference"),receivedAgainst:dt("received_against"),chequeNumber:dt("cheque_number"),bankName:dt("bank_name"),chequeDate:dt("cheque_date"),utrNumber:dt("utr_number"),attachmentUrl:dt("attachment_url"),createdAt:Il("created_at").notNull().defaultNow()}),cE=Ca("branding",{id:ua("id").primaryKey(),logoUrl:dt("logo_url").notNull().default("https://reviranexgen.com/assets/logo-with-name.png"),headerUrl:dt("header_url").notNull().default("https://reviranexgen.com/assets/header.jpg"),footerUrl:dt("footer_url").notNull().default("https://reviranexgen.com/assets/footer.jpg"),stampUrl:dt("stamp_url").notNull().default("https://reviranexgen.com/assets/stamp.png"),storeKeeperSignUrl:dt("store_keeper_sign_url").notNull().default(""),qcEnggSignUrl:dt("qc_engg_sign_url").notNull().default(""),storeInchargeSignUrl:dt("store_incharge_sign_url").notNull().default(""),plantHeadSignUrl:dt("plant_head_sign_url").notNull().default(""),primaryColor:dt("primary_color").notNull().default("#da2032"),secondaryColor:dt("secondary_color").notNull().default("#2f3591"),entityName:dt("entity_name").notNull().default("Revira NexGen Structure Pvt. Ltd."),cin:dt("cin").notNull().default("U16222DL2025PTC459465"),companyGstin:dt("company_gstin").notNull().default("07AAPCR3026H1ZA"),website:dt("website").notNull().default("www.reviranexgen.com"),email:dt("email").notNull().default("info@reviranexgen.com"),headOfficeAddress:dt("head_office_address").notNull().default("28, E2 Block, Shivram Park Nangloi Delhi - 110041"),workshopAddress:dt("workshop_address").notNull().default("Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"),updatedAt:Il("updated_at").notNull().defaultNow()});_a(Hw).omit({id:!0,createdAt:!0});_a(o1);_a(Zu).omit({id:!0,createdAt:!0});_a(Ww).omit({id:!0,createdAt:!0});_a(nE).omit({id:!0});_a(Gw).omit({id:!0,createdAt:!0});_a(sE).omit({id:!0});_a(Kw).omit({id:!0,createdAt:!0});_a(iE).omit({id:!0});_a(Qw).omit({id:!0,createdAt:!0});_a(aE).omit({id:!0});_a(oE).omit({id:!0,updatedAt:!0});_a(lE).omit({id:!0,createdAt:!0});const uE=_a(cE).omit({id:!0,updatedAt:!0});_a(rE).omit({id:!0});B.object({message:B.string()}),B.object({message:B.string()}),B.object({message:B.string()}),B.object({message:B.string()});const yo={auth:{login:{method:"POST",path:"/revira/api/login",input:B.object({username:B.string().email("Please enter a valid email address"),password:B.string().min(1,"Password is required")}),responses:{200:B.custom()}},logout:{method:"POST",path:"/revira/api/logout",responses:{200:B.void()}},me:{path:"/revira/api/user",responses:{200:B.custom()}}},clients:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},create:{input:B.object({name:B.string().min(1,"Client name is required"),location:B.string().min(1,"Location is required"),gstNo:B.string().optional(),contactPerson:B.string().optional(),mobileNumber:B.string().optional(),emailAddress:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({name:B.string().min(1).optional(),location:B.string().min(1).optional(),gstNo:B.string().optional(),contactPerson:B.string().optional(),mobileNumber:B.string().optional(),emailAddress:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},projects:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},create:{input:B.object({projectName:B.string().min(1,"Project name is required"),clientId:B.number().min(1,"Client selection is required"),location:B.string().min(1,"Location is required"),quotationType:B.enum(xm,{errorMap:()=>({message:"Quotation type is required"})})}),responses:{201:B.custom()}},update:{input:B.object({projectName:B.string().min(1).optional(),clientId:B.number().min(1).optional(),location:B.string().min(1).optional(),quotationType:B.enum(xm).optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},quotations:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},getByProject:{responses:{200:B.custom()}},create:{input:B.object({projectId:B.number().min(1),quotationNumber:B.string().min(1),revision:B.string().default("R-000"),enquiryNumber:B.string().min(1),subject:B.string().min(1),contactName:B.string().min(1),contactMobile:B.string().min(1),contactEmail:B.string().email(),buildingDescription:B.string().optional(),buildingArea:B.string().optional(),frameType:B.string().optional(),length:B.string().optional(),width:B.string().optional(),clearHeight:B.string().optional(),roofSlope:B.string().optional(),paymentTerms:B.string().optional(),notes:B.string().optional(),contentSections:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({quotationNumber:B.string().min(1).optional(),revision:B.string().optional(),enquiryNumber:B.string().min(1).optional(),subject:B.string().min(1).optional(),contactName:B.string().min(1).optional(),contactMobile:B.string().min(1).optional(),contactEmail:B.string().email().optional(),buildingDescription:B.string().optional(),buildingArea:B.string().optional(),frameType:B.string().optional(),length:B.string().optional(),width:B.string().optional(),clearHeight:B.string().optional(),roofSlope:B.string().optional(),paymentTerms:B.string().optional(),notes:B.string().optional(),contentSections:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},quotationItems:{list:{responses:{200:B.array(B.custom())}},create:{input:B.object({serialNo:B.number().min(1),description:B.string().min(1),unit:B.string().min(1),quantity:B.string(),rate:B.string(),amount:B.string(),remarks:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({serialNo:B.number().min(1).optional(),description:B.string().min(1).optional(),unit:B.string().min(1).optional(),quantity:B.string().optional(),rate:B.string().optional(),amount:B.string().optional(),remarks:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},branding:{get:{responses:{200:B.custom()}},update:{input:B.object({logoUrl:B.string().optional(),headerUrl:B.string().optional(),footerUrl:B.string().optional(),stampUrl:B.string().optional(),storeKeeperSignUrl:B.string().optional(),qcEnggSignUrl:B.string().optional(),storeInchargeSignUrl:B.string().optional(),plantHeadSignUrl:B.string().optional(),primaryColor:B.string().optional(),secondaryColor:B.string().optional(),entityName:B.string().optional(),cin:B.string().optional(),companyGstin:B.string().optional(),website:B.string().optional(),email:B.string().optional(),headOfficeAddress:B.string().optional(),workshopAddress:B.string().optional()}),responses:{200:B.custom()}}},invoices:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},getByProject:{responses:{200:B.custom()}},create:{input:B.object({projectId:B.number().min(1),invoiceNumber:B.string().min(1),revision:B.string().default("R-001"),organisationName:B.string().min(1),registeredAddress:B.string().min(1),consigneeAddress:B.string().min(1),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({invoiceNumber:B.string().min(1).optional(),revision:B.string().optional(),organisationName:B.string().min(1).optional(),registeredAddress:B.string().min(1).optional(),consigneeAddress:B.string().min(1).optional(),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},invoiceItems:{list:{responses:{200:B.array(B.custom())}},create:{input:B.object({serialNo:B.number().min(1),description:B.string().min(1),hsnCode:B.string().optional(),quantity:B.string(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string(),remarks:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({serialNo:B.number().min(1).optional(),description:B.string().min(1).optional(),hsnCode:B.string().optional(),quantity:B.string().optional(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string().optional(),remarks:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},gatePasses:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},getByProject:{responses:{200:B.custom()}},create:{input:B.object({projectId:B.number().min(1),gatePassNumber:B.string().min(1),revision:B.string().default("R-001"),organisationName:B.string().min(1),registeredAddress:B.string().min(1),consigneeAddress:B.string().min(1),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({gatePassNumber:B.string().min(1).optional(),revision:B.string().optional(),organisationName:B.string().min(1).optional(),registeredAddress:B.string().min(1).optional(),consigneeAddress:B.string().min(1).optional(),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},gatePassItems:{list:{responses:{200:B.array(B.custom())}},create:{input:B.object({serialNo:B.number().min(1),description:B.string().min(1),hsnCode:B.string().optional(),quantity:B.string(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string(),remarks:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({serialNo:B.number().min(1).optional(),description:B.string().min(1).optional(),hsnCode:B.string().optional(),quantity:B.string().optional(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string().optional(),remarks:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},deliveryChallans:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},getByProject:{responses:{200:B.custom()}},create:{input:B.object({projectId:B.number().min(1),deliveryChallanNumber:B.string().min(1),revision:B.string().default("R-001"),organisationName:B.string().min(1),registeredAddress:B.string().min(1),consigneeAddress:B.string().min(1),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({deliveryChallanNumber:B.string().min(1).optional(),revision:B.string().optional(),organisationName:B.string().min(1).optional(),registeredAddress:B.string().min(1).optional(),consigneeAddress:B.string().min(1).optional(),clientGstin:B.string().optional(),workOrderNo:B.string().optional(),dispatchDetails:B.string().optional(),cgstRate:B.string().optional(),sgstRate:B.string().optional(),igstRate:B.string().optional(),appliedTaxType:B.string().optional(),totalAmount:B.string().optional(),totalTax:B.string().optional(),grandTotal:B.string().optional(),contentSections:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},deliveryChallanItems:{list:{responses:{200:B.array(B.custom())}},create:{input:B.object({serialNo:B.number().min(1),description:B.string().min(1),hsnCode:B.string().optional(),quantity:B.string(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string(),remarks:B.string().optional()}),responses:{201:B.custom()}},update:{input:B.object({serialNo:B.number().min(1).optional(),description:B.string().min(1).optional(),hsnCode:B.string().optional(),quantity:B.string().optional(),unit:B.string().optional(),ratePerUnit:B.string().optional(),percentage:B.string().optional(),amount:B.string().optional(),remarks:B.string().optional()}),responses:{200:B.custom()}},delete:{responses:{204:B.void()}}},ledger:{getBudget:{responses:{200:B.custom().nullable()}},upsertBudget:{input:B.object({projectValue:B.string()}),responses:{200:B.custom()}},listEntries:{responses:{200:B.array(B.custom())}},createEntry:{input:B.object({entryDate:B.string().min(1),entryType:B.enum(["expense","receipt"]),category:B.string().min(1),description:B.string().min(1),amount:B.string(),paymentMode:B.string().min(1),remarks:B.string().optional(),reference:B.string().optional(),receivedAgainst:B.string().optional(),chequeNumber:B.string().optional(),bankName:B.string().optional(),chequeDate:B.string().optional(),utrNumber:B.string().optional(),attachmentUrl:B.string().optional()}),responses:{201:B.custom()}},updateEntry:{input:B.object({entryDate:B.string().optional(),entryType:B.enum(["expense","receipt"]).optional(),category:B.string().optional(),description:B.string().optional(),amount:B.string().optional(),paymentMode:B.string().optional(),remarks:B.string().optional(),reference:B.string().optional(),receivedAgainst:B.string().optional(),chequeNumber:B.string().optional(),bankName:B.string().optional(),chequeDate:B.string().optional(),utrNumber:B.string().optional(),attachmentUrl:B.string().optional()}),responses:{200:B.custom()}},deleteEntry:{responses:{204:B.void()}}},users:{list:{responses:{200:B.array(B.custom())}},get:{responses:{200:B.custom()}},create:{input:B.object({username:B.string().email("Please enter a valid email address"),password:B.string().min(6,"Password must be at least 6 characters"),name:B.string().min(1,"Name is required"),email:B.string().email("Please enter a valid email address").optional(),mobile:B.string().min(10,"Valid mobile number is required").optional(),role:B.enum(jh,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:B.array(B.number()).optional()}),responses:{201:B.custom(),403:B.object({message:B.string()})}},update:{input:B.object({username:B.string().email().optional(),password:B.string().min(6).optional(),name:B.string().min(1).optional(),email:B.string().email().optional(),mobile:B.string().min(10).optional(),role:B.enum(jh).optional(),assignedClientIds:B.array(B.number()).optional()}),responses:{200:B.custom(),403:B.object({message:B.string()})}},delete:{responses:{204:B.void(),403:B.object({message:B.string()})}},getClientAssignments:{responses:{200:B.array(B.number())}}}};function Aa(){return Ir({queryKey:[yo.auth.me.path],queryFn:async()=>{const t=await fetch(yo.auth.me.path,{credentials:"include"});if(t.status===401)return null;if(!t.ok)throw new Error("Failed to fetch user");return yo.auth.me.responses[200].parse(await t.json())},retry:(t,e)=>e?.message?.includes("401")?!1:t<3})}function dE(){const t=Lm(),[,e]=Ma(),{toast:r}=Ba();return kn({mutationFn:async n=>{const a=yo.auth.login.input.parse(n),o=await fetch(yo.auth.login.path,{method:yo.auth.login.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!o.ok)throw o.status===401?new Error("Invalid email or password"):new Error("Login failed");return yo.auth.login.responses[200].parse(await o.json())},onSuccess:n=>{t.setQueryData([yo.auth.me.path],n),r({title:"Welcome back!",description:`Successfully logged in as ${n.name}`}),e("/revira/dashboard")},onError:n=>{r({variant:"destructive",title:"Login Failed",description:n.message})}})}function fE(){const t=Lm(),[,e]=Ma(),{toast:r}=Ba();return kn({mutationFn:async()=>{if(!(await fetch(yo.auth.logout.path,{method:yo.auth.logout.method,credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{t.setQueryData([yo.auth.me.path],null),e("/revira"),r({title:"Logged out",description:"You have been successfully logged out."})}})}const Zw=L.createContext({branding:null,isLoading:!0});function hE(){return L.useContext(Zw)}function Ox(t){t=t.replace("#","");const e=parseInt(t.substring(0,2),16)/255,r=parseInt(t.substring(2,4),16)/255,n=parseInt(t.substring(4,6),16)/255,a=Math.max(e,r,n),o=Math.min(e,r,n);let u=0,c=0;const f=(a+o)/2;if(a!==o){const p=a-o;switch(c=f>.5?p/(2-a-o):p/(a+o),a){case e:u=((r-n)/p+(r<n?6:0))/6;break;case r:u=((n-e)/p+2)/6;break;case n:u=((e-r)/p+4)/6;break}}return`${Math.round(u*360)} ${Math.round(c*100)}% ${Math.round(f*100)}%`}function pE({children:t}){const{data:e}=Aa(),{data:r,isLoading:n}=Ir({queryKey:["/revira/api/branding"],staleTime:300*1e3,enabled:!!e,refetchOnMount:!0,refetchOnWindowFocus:!1});return L.useEffect(()=>{if(r){const a=document.documentElement;if(r.primaryColor){const o=Ox(r.primaryColor);a.style.setProperty("--primary",o),a.style.setProperty("--ring",o)}if(r.secondaryColor){const o=Ox(r.secondaryColor);a.style.setProperty("--secondary",o)}}},[r]),i.jsx(Zw.Provider,{value:{branding:r||null,isLoading:n},children:t})}var Oh=t=>t.type==="checkbox",Iu=t=>t instanceof Date,wa=t=>t==null;const Yw=t=>typeof t=="object";var Xs=t=>!wa(t)&&!Array.isArray(t)&&Yw(t)&&!Iu(t),Xw=t=>Xs(t)&&t.target?Oh(t.target)?t.target.checked:t.target.value:t,mE=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Jw=(t,e)=>t.has(mE(e)),gE=t=>{const e=t.constructor&&t.constructor.prototype;return Xs(e)&&e.hasOwnProperty("isPrototypeOf")},l1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bi(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(l1&&(t instanceof Blob||n))&&(r||Xs(t)))if(e=r?[]:{},!r&&!gE(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Bi(t[a]));else return t;return e}var Wm=t=>Array.isArray(t)?t.filter(Boolean):[],Ks=t=>t===void 0,Ft=(t,e,r)=>{if(!e||!Xs(t))return r;const n=Wm(e.split(/[,[\].]+?/)).reduce((a,o)=>wa(a)?a:a[o],t);return Ks(n)||n===t?Ks(t[e])?r:t[e]:n},Ja=t=>typeof t=="boolean",c1=t=>/^\w*$/.test(t),eN=t=>Wm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),In=(t,e,r)=>{let n=-1;const a=c1(e)?[e]:eN(e),o=a.length,u=o-1;for(;++n<o;){const c=a[n];let f=r;if(n!==u){const p=t[c];f=Xs(p)||Array.isArray(p)?p:isNaN(+a[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=f,t=t[c]}};const ym={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Vo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},oc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tN=xr.createContext(null),Gm=()=>xr.useContext(tN),vE=t=>{const{children:e,...r}=t;return xr.createElement(tN.Provider,{value:r},e)};var rN=(t,e,r,n=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==Vo.all&&(e._proxyFormState[u]=!n||Vo.all),r&&(r[u]=!0),t[u]}});return a};function xE(t){const e=Gm(),{control:r=e.control,disabled:n,name:a,exact:o}=t||{},[u,c]=xr.useState(r._formState),f=xr.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=xr.useRef(a);return p.current=a,xr.useEffect(()=>r._subscribe({name:p.current,formState:f.current,exact:o,callback:m=>{!n&&c({...r._formState,...m})}}),[r,n,o]),xr.useEffect(()=>{f.current.isValid&&r._setValid(!0)},[r]),xr.useMemo(()=>rN(u,r,f.current,!1),[u,r])}var jl=t=>typeof t=="string",nN=(t,e,r,n,a)=>jl(t)?(n&&e.watch.add(t),Ft(r,t,a)):Array.isArray(t)?t.map(o=>(n&&e.watch.add(o),Ft(r,o))):(n&&(e.watchAll=!0),r);function yE(t){const e=Gm(),{control:r=e.control,name:n,defaultValue:a,disabled:o,exact:u}=t||{},c=xr.useRef(n),f=xr.useRef(a);c.current=n,xr.useEffect(()=>r._subscribe({name:c.current,formState:{values:!0},exact:u,callback:b=>!o&&m(nN(c.current,r._names,b.values||r._formValues,!1,f.current))}),[r,o,u]);const[p,m]=xr.useState(r._getWatch(n,a));return xr.useEffect(()=>r._removeUnmounted()),p}function bE(t){const e=Gm(),{name:r,disabled:n,control:a=e.control,shouldUnregister:o}=t,u=Jw(a._names.array,r),c=yE({control:a,name:r,defaultValue:Ft(a._formValues,r,Ft(a._defaultValues,r,t.defaultValue)),exact:!0}),f=xE({control:a,name:r,exact:!0}),p=xr.useRef(t),m=xr.useRef(a.register(r,{...t.rules,value:c,...Ja(t.disabled)?{disabled:t.disabled}:{}})),b=xr.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ft(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ft(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ft(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ft(f.validatingFields,r)},error:{enumerable:!0,get:()=>Ft(f.errors,r)}}),[f,r]),A=xr.useCallback(E=>m.current.onChange({target:{value:Xw(E),name:r},type:ym.CHANGE}),[r]),y=xr.useCallback(()=>m.current.onBlur({target:{value:Ft(a._formValues,r),name:r},type:ym.BLUR}),[r,a._formValues]),D=xr.useCallback(E=>{const _=Ft(a._fields,r);_&&E&&(_._f.ref={focus:()=>E.focus(),select:()=>E.select(),setCustomValidity:O=>E.setCustomValidity(O),reportValidity:()=>E.reportValidity()})},[a._fields,r]),S=xr.useMemo(()=>({name:r,value:c,...Ja(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:A,onBlur:y,ref:D}),[r,n,f.disabled,A,y,D,c]);return xr.useEffect(()=>{const E=a._options.shouldUnregister||o;a.register(r,{...p.current.rules,...Ja(p.current.disabled)?{disabled:p.current.disabled}:{}});const _=(O,T)=>{const z=Ft(a._fields,O);z&&z._f&&(z._f.mount=T)};if(_(r,!0),E){const O=Bi(Ft(a._options.defaultValues,r));In(a._defaultValues,r,O),Ks(Ft(a._formValues,r))&&In(a._formValues,r,O)}return!u&&a.register(r),()=>{(u?E&&!a._state.action:E)?a.unregister(r):_(r,!1)}},[r,a,u,o]),xr.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),xr.useMemo(()=>({field:S,formState:f,fieldState:b}),[S,f,b])}const wE=t=>t.render(bE(t));var sN=(t,e,r,n,a)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},eh=t=>Array.isArray(t)?t:[t],Mx=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},mv=t=>wa(t)||!Yw(t);function Qc(t,e){if(mv(t)||mv(e))return t===e;if(Iu(t)&&Iu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const a of r){const o=t[a];if(!n.includes(a))return!1;if(a!=="ref"){const u=e[a];if(Iu(o)&&Iu(u)||Xs(o)&&Xs(u)||Array.isArray(o)&&Array.isArray(u)?!Qc(o,u):o!==u)return!1}}return!0}var ba=t=>Xs(t)&&!Object.keys(t).length,u1=t=>t.type==="file",Ho=t=>typeof t=="function",bm=t=>{if(!l1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},iN=t=>t.type==="select-multiple",d1=t=>t.type==="radio",NE=t=>d1(t)||Oh(t),d0=t=>bm(t)&&t.isConnected;function SE(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Ks(t)?n++:t[e[n++]];return t}function jE(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ks(t[e]))return!1;return!0}function xi(t,e){const r=Array.isArray(e)?e:c1(e)?[e]:eN(e),n=r.length===1?t:SE(t,r),a=r.length-1,o=r[a];return n&&delete n[o],a!==0&&(Xs(n)&&ba(n)||Array.isArray(n)&&jE(n))&&xi(t,r.slice(0,-1)),t}var aN=t=>{for(const e in t)if(Ho(t[e]))return!0;return!1};function wm(t,e={}){const r=Array.isArray(t);if(Xs(t)||r)for(const n in t)Array.isArray(t[n])||Xs(t[n])&&!aN(t[n])?(e[n]=Array.isArray(t[n])?[]:{},wm(t[n],e[n])):wa(t[n])||(e[n]=!0);return e}function oN(t,e,r){const n=Array.isArray(t);if(Xs(t)||n)for(const a in t)Array.isArray(t[a])||Xs(t[a])&&!aN(t[a])?Ks(e)||mv(r[a])?r[a]=Array.isArray(t[a])?wm(t[a],[]):{...wm(t[a])}:oN(t[a],wa(e)?{}:e[a],r[a]):r[a]=!Qc(t[a],e[a]);return r}var $f=(t,e)=>oN(t,e,wm(e));const Bx={value:!1,isValid:!1},qx={value:!0,isValid:!0};var lN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ks(t[0].attributes.value)?Ks(t[0].value)||t[0].value===""?qx:{value:t[0].value,isValid:!0}:qx:Bx}return Bx},cN=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Ks(t)?t:e?t===""?NaN:t&&+t:r&&jl(t)?new Date(t):n?n(t):t;const Ux={isValid:!1,value:null};var uN=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Ux):Ux;function zx(t){const e=t.ref;return u1(e)?e.files:d1(e)?uN(t.refs).value:iN(e)?[...e.selectedOptions].map(({value:r})=>r):Oh(e)?lN(t.refs).value:cN(Ks(e.value)?t.ref.value:e.value,t)}var CE=(t,e,r,n)=>{const a={};for(const o of t){const u=Ft(e,o);u&&In(a,o,u._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},Nm=t=>t instanceof RegExp,Vf=t=>Ks(t)?t:Nm(t)?t.source:Xs(t)?Nm(t.value)?t.value.source:t.value:t,$x=t=>({isOnSubmit:!t||t===Vo.onSubmit,isOnBlur:t===Vo.onBlur,isOnChange:t===Vo.onChange,isOnAll:t===Vo.all,isOnTouch:t===Vo.onTouched});const Vx="AsyncFunction";var _E=t=>!!t&&!!t.validate&&!!(Ho(t.validate)&&t.validate.constructor.name===Vx||Xs(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Vx)),AE=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Hx=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const th=(t,e,r,n)=>{for(const a of r||Object.keys(t)){const o=Ft(t,a);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!n)return!0;if(u.ref&&e(u.ref,u.name)&&!n)return!0;if(th(c,e))break}else if(Xs(c)&&th(c,e))break}}};function Wx(t,e,r){const n=Ft(t,r);if(n||c1(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const o=a.join("."),u=Ft(e,o),c=Ft(t,o);if(u&&!Array.isArray(u)&&r!==o)return{name:r};if(c&&c.type)return{name:o,error:c};a.pop()}return{name:r}}var PE=(t,e,r,n)=>{r(t);const{name:a,...o}=t;return ba(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!n||Vo.all))},kE=(t,e,r)=>!t||!e||t===e||eh(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),TE=(t,e,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(e||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,EE=(t,e)=>!Wm(Ft(t,e)).length&&xi(t,e),LE=(t,e,r)=>{const n=eh(Ft(t,r));return In(n,"root",e[r]),In(t,r,n),t},$p=t=>jl(t);function Gx(t,e,r="validate"){if($p(t)||Array.isArray(t)&&t.every($p)||Ja(t)&&!t)return{type:r,message:$p(t)?t:"",ref:e}}var wd=t=>Xs(t)&&!Nm(t)?t:{value:t,message:""},Kx=async(t,e,r,n,a,o)=>{const{ref:u,refs:c,required:f,maxLength:p,minLength:m,min:b,max:A,pattern:y,validate:D,name:S,valueAsNumber:E,mount:_}=t._f,O=Ft(r,S);if(!_||e.has(S))return{};const T=c?c[0]:u,z=F=>{a&&T.reportValidity&&(T.setCustomValidity(Ja(F)?"":F||""),T.reportValidity())},re={},ae=d1(u),W=Oh(u),te=ae||W,Q=(E||u1(u))&&Ks(u.value)&&Ks(O)||bm(u)&&u.value===""||O===""||Array.isArray(O)&&!O.length,fe=sN.bind(null,S,n,re),U=(F,X,Y,Ne=oc.maxLength,be=oc.minLength)=>{const we=F?X:Y;re[S]={type:F?Ne:be,message:we,ref:u,...fe(F?Ne:be,we)}};if(o?!Array.isArray(O)||!O.length:f&&(!te&&(Q||wa(O))||Ja(O)&&!O||W&&!lN(c).isValid||ae&&!uN(c).isValid)){const{value:F,message:X}=$p(f)?{value:!!f,message:f}:wd(f);if(F&&(re[S]={type:oc.required,message:X,ref:T,...fe(oc.required,X)},!n))return z(X),re}if(!Q&&(!wa(b)||!wa(A))){let F,X;const Y=wd(A),Ne=wd(b);if(!wa(O)&&!isNaN(O)){const be=u.valueAsNumber||O&&+O;wa(Y.value)||(F=be>Y.value),wa(Ne.value)||(X=be<Ne.value)}else{const be=u.valueAsDate||new Date(O),we=I=>new Date(new Date().toDateString()+" "+I),se=u.type=="time",me=u.type=="week";jl(Y.value)&&O&&(F=se?we(O)>we(Y.value):me?O>Y.value:be>new Date(Y.value)),jl(Ne.value)&&O&&(X=se?we(O)<we(Ne.value):me?O<Ne.value:be<new Date(Ne.value))}if((F||X)&&(U(!!F,Y.message,Ne.message,oc.max,oc.min),!n))return z(re[S].message),re}if((p||m)&&!Q&&(jl(O)||o&&Array.isArray(O))){const F=wd(p),X=wd(m),Y=!wa(F.value)&&O.length>+F.value,Ne=!wa(X.value)&&O.length<+X.value;if((Y||Ne)&&(U(Y,F.message,X.message),!n))return z(re[S].message),re}if(y&&!Q&&jl(O)){const{value:F,message:X}=wd(y);if(Nm(F)&&!O.match(F)&&(re[S]={type:oc.pattern,message:X,ref:u,...fe(oc.pattern,X)},!n))return z(X),re}if(D){if(Ho(D)){const F=await D(O,r),X=Gx(F,T);if(X&&(re[S]={...X,...fe(oc.validate,X.message)},!n))return z(X.message),re}else if(Xs(D)){let F={};for(const X in D){if(!ba(F)&&!n)break;const Y=Gx(await D[X](O,r),T,X);Y&&(F={...Y,...fe(X,Y.message)},z(Y.message),n&&(re[S]=F))}if(!ba(F)&&(re[S]={ref:T,...F},!n))return re}}return z(!0),re};const RE={mode:Vo.onSubmit,reValidateMode:Vo.onChange,shouldFocusError:!0};function DE(t={}){let e={...RE,...t},r={submitCount:0,isDirty:!1,isLoading:Ho(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let a=Xs(e.defaultValues)||Xs(e.values)?Bi(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:Bi(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...m};const A={array:Mx(),state:Mx()},y=$x(e.mode),D=$x(e.reValidateMode),S=e.criteriaMode===Vo.all,E=ue=>he=>{clearTimeout(p),p=setTimeout(ue,he)},_=async ue=>{if(!e.disabled&&(m.isValid||b.isValid||ue)){const he=e.resolver?ba((await Q()).errors):await U(n,!0);he!==r.isValid&&A.state.next({isValid:he})}},O=(ue,he)=>{!e.disabled&&(m.isValidating||m.validatingFields||b.isValidating||b.validatingFields)&&((ue||Array.from(c.mount)).forEach(Ie=>{Ie&&(he?In(r.validatingFields,Ie,he):xi(r.validatingFields,Ie))}),A.state.next({validatingFields:r.validatingFields,isValidating:!ba(r.validatingFields)}))},T=(ue,he=[],Ie,Ze,Ve=!0,ze=!0)=>{if(Ze&&Ie&&!e.disabled){if(u.action=!0,ze&&Array.isArray(Ft(n,ue))){const ot=Ie(Ft(n,ue),Ze.argA,Ze.argB);Ve&&In(n,ue,ot)}if(ze&&Array.isArray(Ft(r.errors,ue))){const ot=Ie(Ft(r.errors,ue),Ze.argA,Ze.argB);Ve&&In(r.errors,ue,ot),EE(r.errors,ue)}if((m.touchedFields||b.touchedFields)&&ze&&Array.isArray(Ft(r.touchedFields,ue))){const ot=Ie(Ft(r.touchedFields,ue),Ze.argA,Ze.argB);Ve&&In(r.touchedFields,ue,ot)}(m.dirtyFields||b.dirtyFields)&&(r.dirtyFields=$f(a,o)),A.state.next({name:ue,isDirty:X(ue,he),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else In(o,ue,he)},z=(ue,he)=>{In(r.errors,ue,he),A.state.next({errors:r.errors})},re=ue=>{r.errors=ue,A.state.next({errors:r.errors,isValid:!1})},ae=(ue,he,Ie,Ze)=>{const Ve=Ft(n,ue);if(Ve){const ze=Ft(o,ue,Ks(Ie)?Ft(a,ue):Ie);Ks(ze)||Ze&&Ze.defaultChecked||he?In(o,ue,he?ze:zx(Ve._f)):be(ue,ze),u.mount&&_()}},W=(ue,he,Ie,Ze,Ve)=>{let ze=!1,ot=!1;const ft={name:ue};if(!e.disabled){if(!Ie||Ze){(m.isDirty||b.isDirty)&&(ot=r.isDirty,r.isDirty=ft.isDirty=X(),ze=ot!==ft.isDirty);const Et=Qc(Ft(a,ue),he);ot=!!Ft(r.dirtyFields,ue),Et?xi(r.dirtyFields,ue):In(r.dirtyFields,ue,!0),ft.dirtyFields=r.dirtyFields,ze=ze||(m.dirtyFields||b.dirtyFields)&&ot!==!Et}if(Ie){const Et=Ft(r.touchedFields,ue);Et||(In(r.touchedFields,ue,Ie),ft.touchedFields=r.touchedFields,ze=ze||(m.touchedFields||b.touchedFields)&&Et!==Ie)}ze&&Ve&&A.state.next(ft)}return ze?ft:{}},te=(ue,he,Ie,Ze)=>{const Ve=Ft(r.errors,ue),ze=(m.isValid||b.isValid)&&Ja(he)&&r.isValid!==he;if(e.delayError&&Ie?(f=E(()=>z(ue,Ie)),f(e.delayError)):(clearTimeout(p),f=null,Ie?In(r.errors,ue,Ie):xi(r.errors,ue)),(Ie?!Qc(Ve,Ie):Ve)||!ba(Ze)||ze){const ot={...Ze,...ze&&Ja(he)?{isValid:he}:{},errors:r.errors,name:ue};r={...r,...ot},A.state.next(ot)}},Q=async ue=>{O(ue,!0);const he=await e.resolver(o,e.context,CE(ue||c.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return O(ue),he},fe=async ue=>{const{errors:he}=await Q(ue);if(ue)for(const Ie of ue){const Ze=Ft(he,Ie);Ze?In(r.errors,Ie,Ze):xi(r.errors,Ie)}else r.errors=he;return he},U=async(ue,he,Ie={valid:!0})=>{for(const Ze in ue){const Ve=ue[Ze];if(Ve){const{_f:ze,...ot}=Ve;if(ze){const ft=c.array.has(ze.name),Et=Ve._f&&_E(Ve._f);Et&&m.validatingFields&&O([Ze],!0);const St=await Kx(Ve,c.disabled,o,S,e.shouldUseNativeValidation&&!he,ft);if(Et&&m.validatingFields&&O([Ze]),St[ze.name]&&(Ie.valid=!1,he))break;!he&&(Ft(St,ze.name)?ft?LE(r.errors,St,ze.name):In(r.errors,ze.name,St[ze.name]):xi(r.errors,ze.name))}!ba(ot)&&await U(ot,he,Ie)}}return Ie.valid},F=()=>{for(const ue of c.unMount){const he=Ft(n,ue);he&&(he._f.refs?he._f.refs.every(Ie=>!d0(Ie)):!d0(he._f.ref))&&Ce(ue)}c.unMount=new Set},X=(ue,he)=>!e.disabled&&(ue&&he&&In(o,ue,he),!Qc(x(),a)),Y=(ue,he,Ie)=>nN(ue,c,{...u.mount?o:Ks(he)?a:jl(ue)?{[ue]:he}:he},Ie,he),Ne=ue=>Wm(Ft(u.mount?o:a,ue,e.shouldUnregister?Ft(a,ue,[]):[])),be=(ue,he,Ie={})=>{const Ze=Ft(n,ue);let Ve=he;if(Ze){const ze=Ze._f;ze&&(!ze.disabled&&In(o,ue,cN(he,ze)),Ve=bm(ze.ref)&&wa(he)?"":he,iN(ze.ref)?[...ze.ref.options].forEach(ot=>ot.selected=Ve.includes(ot.value)):ze.refs?Oh(ze.ref)?ze.refs.length>1?ze.refs.forEach(ot=>(!ot.defaultChecked||!ot.disabled)&&(ot.checked=Array.isArray(Ve)?!!Ve.find(ft=>ft===ot.value):Ve===ot.value)):ze.refs[0]&&(ze.refs[0].checked=!!Ve):ze.refs.forEach(ot=>ot.checked=ot.value===Ve):u1(ze.ref)?ze.ref.value="":(ze.ref.value=Ve,ze.ref.type||A.state.next({name:ue,values:Bi(o)})))}(Ie.shouldDirty||Ie.shouldTouch)&&W(ue,Ve,Ie.shouldTouch,Ie.shouldDirty,!0),Ie.shouldValidate&&j(ue)},we=(ue,he,Ie)=>{for(const Ze in he){const Ve=he[Ze],ze=`${ue}.${Ze}`,ot=Ft(n,ze);(c.array.has(ue)||Xs(Ve)||ot&&!ot._f)&&!Iu(Ve)?we(ze,Ve,Ie):be(ze,Ve,Ie)}},se=(ue,he,Ie={})=>{const Ze=Ft(n,ue),Ve=c.array.has(ue),ze=Bi(he);In(o,ue,ze),Ve?(A.array.next({name:ue,values:Bi(o)}),(m.isDirty||m.dirtyFields||b.isDirty||b.dirtyFields)&&Ie.shouldDirty&&A.state.next({name:ue,dirtyFields:$f(a,o),isDirty:X(ue,ze)})):Ze&&!Ze._f&&!wa(ze)?we(ue,ze,Ie):be(ue,ze,Ie),Hx(ue,c)&&A.state.next({...r}),A.state.next({name:u.mount?ue:void 0,values:Bi(o)})},me=async ue=>{u.mount=!0;const he=ue.target;let Ie=he.name,Ze=!0;const Ve=Ft(n,Ie),ze=ot=>{Ze=Number.isNaN(ot)||Iu(ot)&&isNaN(ot.getTime())||Qc(ot,Ft(o,Ie,ot))};if(Ve){let ot,ft;const Et=he.type?zx(Ve._f):Xw(ue),St=ue.type===ym.BLUR||ue.type===ym.FOCUS_OUT,yn=!AE(Ve._f)&&!e.resolver&&!Ft(r.errors,Ie)&&!Ve._f.deps||TE(St,Ft(r.touchedFields,Ie),r.isSubmitted,D,y),Cr=Hx(Ie,c,St);In(o,Ie,Et),St?(Ve._f.onBlur&&Ve._f.onBlur(ue),f&&f(0)):Ve._f.onChange&&Ve._f.onChange(ue);const yr=W(Ie,Et,St),ur=!ba(yr)||Cr;if(!St&&A.state.next({name:Ie,type:ue.type,values:Bi(o)}),yn)return(m.isValid||b.isValid)&&(e.mode==="onBlur"?St&&_():St||_()),ur&&A.state.next({name:Ie,...Cr?{}:yr});if(!St&&Cr&&A.state.next({...r}),e.resolver){const{errors:Wr}=await Q([Ie]);if(ze(Et),Ze){const Dt=Wx(r.errors,n,Ie),_r=Wx(Wr,n,Dt.name||Ie);ot=_r.error,Ie=_r.name,ft=ba(Wr)}}else O([Ie],!0),ot=(await Kx(Ve,c.disabled,o,S,e.shouldUseNativeValidation))[Ie],O([Ie]),ze(Et),Ze&&(ot?ft=!1:(m.isValid||b.isValid)&&(ft=await U(n,!0)));Ze&&(Ve._f.deps&&j(Ve._f.deps),te(Ie,ft,ot,yr))}},I=(ue,he)=>{if(Ft(r.errors,he)&&ue.focus)return ue.focus(),1},j=async(ue,he={})=>{let Ie,Ze;const Ve=eh(ue);if(e.resolver){const ze=await fe(Ks(ue)?ue:Ve);Ie=ba(ze),Ze=ue?!Ve.some(ot=>Ft(ze,ot)):Ie}else ue?(Ze=(await Promise.all(Ve.map(async ze=>{const ot=Ft(n,ze);return await U(ot&&ot._f?{[ze]:ot}:ot)}))).every(Boolean),!(!Ze&&!r.isValid)&&_()):Ze=Ie=await U(n);return A.state.next({...!jl(ue)||(m.isValid||b.isValid)&&Ie!==r.isValid?{}:{name:ue},...e.resolver||!ue?{isValid:Ie}:{},errors:r.errors}),he.shouldFocus&&!Ze&&th(n,I,ue?Ve:c.mount),Ze},x=ue=>{const he={...u.mount?o:a};return Ks(ue)?he:jl(ue)?Ft(he,ue):ue.map(Ie=>Ft(he,Ie))},C=(ue,he)=>({invalid:!!Ft((he||r).errors,ue),isDirty:!!Ft((he||r).dirtyFields,ue),error:Ft((he||r).errors,ue),isValidating:!!Ft(r.validatingFields,ue),isTouched:!!Ft((he||r).touchedFields,ue)}),M=ue=>{ue&&eh(ue).forEach(he=>xi(r.errors,he)),A.state.next({errors:ue?r.errors:{}})},H=(ue,he,Ie)=>{const Ze=(Ft(n,ue,{_f:{}})._f||{}).ref,Ve=Ft(r.errors,ue)||{},{ref:ze,message:ot,type:ft,...Et}=Ve;In(r.errors,ue,{...Et,...he,ref:Ze}),A.state.next({name:ue,errors:r.errors,isValid:!1}),Ie&&Ie.shouldFocus&&Ze&&Ze.focus&&Ze.focus()},ie=(ue,he)=>Ho(ue)?A.state.subscribe({next:Ie=>ue(Y(void 0,he),Ie)}):Y(ue,he,!0),oe=ue=>A.state.subscribe({next:he=>{kE(ue.name,he.name,ue.exact)&&PE(he,ue.formState||m,rt,ue.reRenderRoot)&&ue.callback({values:{...o},...r,...he})}}).unsubscribe,ve=ue=>(u.mount=!0,b={...b,...ue.formState},oe({...ue,formState:b})),Ce=(ue,he={})=>{for(const Ie of ue?eh(ue):c.mount)c.mount.delete(Ie),c.array.delete(Ie),he.keepValue||(xi(n,Ie),xi(o,Ie)),!he.keepError&&xi(r.errors,Ie),!he.keepDirty&&xi(r.dirtyFields,Ie),!he.keepTouched&&xi(r.touchedFields,Ie),!he.keepIsValidating&&xi(r.validatingFields,Ie),!e.shouldUnregister&&!he.keepDefaultValue&&xi(a,Ie);A.state.next({values:Bi(o)}),A.state.next({...r,...he.keepDirty?{isDirty:X()}:{}}),!he.keepIsValid&&_()},Le=({disabled:ue,name:he})=>{(Ja(ue)&&u.mount||ue||c.disabled.has(he))&&(ue?c.disabled.add(he):c.disabled.delete(he))},Ge=(ue,he={})=>{let Ie=Ft(n,ue);const Ze=Ja(he.disabled)||Ja(e.disabled);return In(n,ue,{...Ie||{},_f:{...Ie&&Ie._f?Ie._f:{ref:{name:ue}},name:ue,mount:!0,...he}}),c.mount.add(ue),Ie?Le({disabled:Ja(he.disabled)?he.disabled:e.disabled,name:ue}):ae(ue,!0,he.value),{...Ze?{disabled:he.disabled||e.disabled}:{},...e.progressive?{required:!!he.required,min:Vf(he.min),max:Vf(he.max),minLength:Vf(he.minLength),maxLength:Vf(he.maxLength),pattern:Vf(he.pattern)}:{},name:ue,onChange:me,onBlur:me,ref:Ve=>{if(Ve){Ge(ue,he),Ie=Ft(n,ue);const ze=Ks(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,ot=NE(ze),ft=Ie._f.refs||[];if(ot?ft.find(Et=>Et===ze):ze===Ie._f.ref)return;In(n,ue,{_f:{...Ie._f,...ot?{refs:[...ft.filter(d0),ze,...Array.isArray(Ft(a,ue))?[{}]:[]],ref:{type:ze.type,name:ue}}:{ref:ze}}}),ae(ue,!1,void 0,ze)}else Ie=Ft(n,ue,{}),Ie._f&&(Ie._f.mount=!1),(e.shouldUnregister||he.shouldUnregister)&&!(Jw(c.array,ue)&&u.action)&&c.unMount.add(ue)}}},lt=()=>e.shouldFocusError&&th(n,I,c.mount),tt=ue=>{Ja(ue)&&(A.state.next({disabled:ue}),th(n,(he,Ie)=>{const Ze=Ft(n,Ie);Ze&&(he.disabled=Ze._f.disabled||ue,Array.isArray(Ze._f.refs)&&Ze._f.refs.forEach(Ve=>{Ve.disabled=Ze._f.disabled||ue}))},0,!1))},ct=(ue,he)=>async Ie=>{let Ze;Ie&&(Ie.preventDefault&&Ie.preventDefault(),Ie.persist&&Ie.persist());let Ve=Bi(o);if(A.state.next({isSubmitting:!0}),e.resolver){const{errors:ze,values:ot}=await Q();r.errors=ze,Ve=ot}else await U(n);if(c.disabled.size)for(const ze of c.disabled)In(Ve,ze,void 0);if(xi(r.errors,"root"),ba(r.errors)){A.state.next({errors:{}});try{await ue(Ve,Ie)}catch(ze){Ze=ze}}else he&&await he({...r.errors},Ie),lt(),setTimeout(lt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ba(r.errors)&&!Ze,submitCount:r.submitCount+1,errors:r.errors}),Ze)throw Ze},ee=(ue,he={})=>{Ft(n,ue)&&(Ks(he.defaultValue)?se(ue,Bi(Ft(a,ue))):(se(ue,he.defaultValue),In(a,ue,Bi(he.defaultValue))),he.keepTouched||xi(r.touchedFields,ue),he.keepDirty||(xi(r.dirtyFields,ue),r.isDirty=he.defaultValue?X(ue,Bi(Ft(a,ue))):X()),he.keepError||(xi(r.errors,ue),m.isValid&&_()),A.state.next({...r}))},Re=(ue,he={})=>{const Ie=ue?Bi(ue):a,Ze=Bi(Ie),Ve=ba(ue),ze=Ve?a:Ze;if(he.keepDefaultValues||(a=Ie),!he.keepValues){if(he.keepDirtyValues){const ot=new Set([...c.mount,...Object.keys($f(a,o))]);for(const ft of Array.from(ot))Ft(r.dirtyFields,ft)?In(ze,ft,Ft(o,ft)):se(ft,Ft(ze,ft))}else{if(l1&&Ks(ue))for(const ot of c.mount){const ft=Ft(n,ot);if(ft&&ft._f){const Et=Array.isArray(ft._f.refs)?ft._f.refs[0]:ft._f.ref;if(bm(Et)){const St=Et.closest("form");if(St){St.reset();break}}}}for(const ot of c.mount)se(ot,Ft(ze,ot))}o=Bi(ze),A.array.next({values:{...ze}}),A.state.next({values:{...ze}})}c={mount:he.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!he.keepIsValid||!!he.keepDirtyValues,u.watch=!!e.shouldUnregister,A.state.next({submitCount:he.keepSubmitCount?r.submitCount:0,isDirty:Ve?!1:he.keepDirty?r.isDirty:!!(he.keepDefaultValues&&!Qc(ue,a)),isSubmitted:he.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ve?{}:he.keepDirtyValues?he.keepDefaultValues&&o?$f(a,o):r.dirtyFields:he.keepDefaultValues&&ue?$f(a,ue):he.keepDirty?r.dirtyFields:{},touchedFields:he.keepTouched?r.touchedFields:{},errors:he.keepErrors?r.errors:{},isSubmitSuccessful:he.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},We=(ue,he)=>Re(Ho(ue)?ue(o):ue,he),Ee=(ue,he={})=>{const Ie=Ft(n,ue),Ze=Ie&&Ie._f;if(Ze){const Ve=Ze.refs?Ze.refs[0]:Ze.ref;Ve.focus&&(Ve.focus(),he.shouldSelect&&Ho(Ve.select)&&Ve.select())}},rt=ue=>{r={...r,...ue}},Ct={control:{register:Ge,unregister:Ce,getFieldState:C,handleSubmit:ct,setError:H,_subscribe:oe,_runSchema:Q,_getWatch:Y,_getDirty:X,_setValid:_,_setFieldArray:T,_setDisabledField:Le,_setErrors:re,_getFieldArray:Ne,_reset:Re,_resetDefaultValues:()=>Ho(e.defaultValues)&&e.defaultValues().then(ue=>{We(ue,e.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:tt,_subjects:A,_proxyFormState:m,get _fields(){return n},get _formValues(){return o},get _state(){return u},set _state(ue){u=ue},get _defaultValues(){return a},get _names(){return c},set _names(ue){c=ue},get _formState(){return r},get _options(){return e},set _options(ue){e={...e,...ue}}},subscribe:ve,trigger:j,register:Ge,handleSubmit:ct,watch:ie,setValue:se,getValues:x,reset:We,resetField:ee,clearErrors:M,unregister:Ce,setError:H,setFocus:Ee,getFieldState:C};return{...Ct,formControl:Ct}}function df(t={}){const e=xr.useRef(void 0),r=xr.useRef(void 0),[n,a]=xr.useState({isDirty:!1,isValidating:!1,isLoading:Ho(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ho(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:DE(t),formState:n},t.formControl&&t.defaultValues&&!Ho(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const o=e.current.control;return o._options=t,xr.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0}),[o]),xr.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),xr.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==n.isDirty&&o._subjects.state.next({isDirty:u})}},[o,n.isDirty]),xr.useEffect(()=>{t.values&&!Qc(t.values,r.current)?(o._reset(t.values,o._options.resetOptions),r.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[t.values,o]),xr.useEffect(()=>{t.errors&&!ba(t.errors)&&o._setErrors(t.errors)},[t.errors,o]),xr.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),xr.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=rN(n,o),e.current}const Qx=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Ft(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},dN=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?Qx(n.ref,r,t):n.refs&&n.refs.forEach(a=>Qx(a,r,t))}},IE=(t,e)=>{e.shouldUseNativeValidation&&dN(t,e);const r={};for(const n in t){const a=Ft(e.fields,n),o=Object.assign(t[n]||{},{ref:a&&a.ref});if(FE(e.names||Object.keys(t),n)){const u=Object.assign({},Ft(r,n));In(u,"root",o),In(r,n,u)}else In(r,n,o)}return r},FE=(t,e)=>t.some(r=>r.startsWith(e+"."));var OE=function(t,e){for(var r={};t.length;){var n=t[0],a=n.code,o=n.message,u=n.path.join(".");if(!r[u])if("unionErrors"in n){var c=n.unionErrors[0].errors[0];r[u]={message:c.message,type:c.code}}else r[u]={message:o,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(m){return m.errors.forEach(function(b){return t.push(b)})}),e){var f=r[u].types,p=f&&f[n.code];r[u]=sN(u,e,r,a,p?[].concat(p,n.message):n.message)}t.shift()}return r},ff=function(t,e,r){return r===void 0&&(r={}),function(n,a,o){try{return Promise.resolve((function(u,c){try{var f=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(p){return o.shouldUseNativeValidation&&dN({},o),{errors:{},values:r.raw?n:p}})}catch(p){return c(p)}return f&&f.then?f.then(void 0,c):f})(0,function(u){if((function(c){return Array.isArray(c?.errors)})(u))return{values:{},errors:IE(OE(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}};const ME=Fm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Oe=L.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...a},o)=>{const u=n?nb:"button";return i.jsx(u,{className:$r(ME({variant:e,size:r,className:t})),ref:o,...a})});Oe.displayName="Button";const Je=L.forwardRef(({className:t,type:e,...r},n)=>i.jsx("input",{type:e,className:$r("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Je.displayName="Input";var BE="Label",fN=L.forwardRef((t,e)=>i.jsx(Zr.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));fN.displayName=BE;var hN=fN;const qE=Fm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pN=L.forwardRef(({className:t,...e},r)=>i.jsx(hN,{ref:r,className:$r(qE(),t),...e}));pN.displayName=hN.displayName;const hf=vE,mN=L.createContext({}),an=({...t})=>i.jsx(mN.Provider,{value:{name:t.name},children:i.jsx(wE,{...t})}),Km=()=>{const t=L.useContext(mN),e=L.useContext(gN),{getFieldState:r,formState:n}=Gm(),a=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},gN=L.createContext({}),en=L.forwardRef(({className:t,...e},r)=>{const n=L.useId();return i.jsx(gN.Provider,{value:{id:n},children:i.jsx("div",{ref:r,className:$r("space-y-2",t),...e})})});en.displayName="FormItem";const tn=L.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:a}=Km();return i.jsx(pN,{ref:r,className:$r(n&&"text-destructive",t),htmlFor:a,...e})});tn.displayName="FormLabel";const rn=L.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:o}=Km();return i.jsx(nb,{ref:e,id:n,"aria-describedby":r?`${a} ${o}`:`${a}`,"aria-invalid":!!r,...t})});rn.displayName="FormControl";const UE=L.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=Km();return i.jsx("p",{ref:r,id:n,className:$r("text-sm text-muted-foreground",t),...e})});UE.displayName="FormDescription";const nn=L.forwardRef(({className:t,children:e,...r},n)=>{const{error:a,formMessageId:o}=Km(),u=a?String(a?.message??""):e;return u?i.jsx("p",{ref:n,id:o,className:$r("text-sm font-medium text-destructive",t),...r,children:u}):null});nn.displayName="FormMessage";const zE=yo.auth.login.input;function $E(){const[,t]=Ma(),{data:e,isLoading:r}=Aa(),{mutate:n,isPending:a}=dE(),{data:o}=Ir({queryKey:["/revira/api/branding/public"],staleTime:300*1e3}),u=df({resolver:ff(zE),defaultValues:{username:"",password:""}});L.useEffect(()=>{e&&t("/revira/dashboard")},[e,t]);function c(f){n(f)}return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx(ev,{className:"w-8 h-8 animate-spin text-primary"})}):e?null:i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:[i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:o?.logoUrl?i.jsx("img",{src:o.logoUrl,alt:"Company Logo",className:"h-16 max-w-[280px] object-contain","data-testid":"img-login-logo"}):i.jsx("h1",{className:"font-display font-bold text-3xl text-slate-900",children:"REVIRAAPP"})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"font-display font-bold text-2xl text-slate-900",children:"Welcome Back"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Please enter your details to sign in."})]}),i.jsx(hf,{...u,children:i.jsxs("form",{onSubmit:u.handleSubmit(c),className:"space-y-6",children:[i.jsx(an,{control:u.control,name:"username",render:({field:f})=>i.jsxs(en,{children:[i.jsx(tn,{className:"text-slate-700 font-medium",children:"Email Address"}),i.jsx(rn,{children:i.jsx(Je,{placeholder:"admin@reviranexgen.com",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-username",...f})}),i.jsx(nn,{})]})}),i.jsx(an,{control:u.control,name:"password",render:({field:f})=>i.jsxs(en,{children:[i.jsx(tn,{className:"text-slate-700 font-medium",children:"Password"}),i.jsx(rn,{children:i.jsx(Je,{type:"password",placeholder:"",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-password",...f})}),i.jsx(nn,{})]})}),i.jsx(Oe,{type:"submit",disabled:a,className:"w-full h-12 rounded-xl text-base font-semibold bg-[#da2032] hover:bg-[#c41b2b] text-white transition-all duration-300","data-testid":"button-login",children:a?i.jsxs(i.Fragment,{children:[i.jsx(ev,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx("span",{className:"font-medium text-slate-900",children:"Contact Support"})]})})]}),i.jsxs("div",{className:"fixed bottom-4 right-4 bg-slate-900/90 text-slate-300 p-4 rounded-lg backdrop-blur text-xs hidden lg:block shadow-xl",children:[i.jsx("p",{className:"font-bold text-white mb-1",children:"Demo Credentials:"}),i.jsx("p",{children:"User: admin@reviranexgen.com"}),i.jsx("p",{children:"Pass: Admin@121"})]})]})}var f1="Avatar",[VE]=Rl(f1),[HE,vN]=VE(f1),xN=L.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[a,o]=L.useState("idle");return i.jsx(HE,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:i.jsx(Zr.span,{...n,ref:e})})});xN.displayName=f1;var yN="AvatarImage",bN=L.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=t,u=vN(yN,r),c=WE(n,o),f=Oa(p=>{a(p),u.onImageLoadingStatusChange(p)});return li(()=>{c!=="idle"&&f(c)},[c,f]),c==="loaded"?i.jsx(Zr.img,{...o,ref:e,src:n}):null});bN.displayName=yN;var wN="AvatarFallback",NN=L.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,o=vN(wN,r),[u,c]=L.useState(n===void 0);return L.useEffect(()=>{if(n!==void 0){const f=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(f)}},[n]),u&&o.imageLoadingStatus!=="loaded"?i.jsx(Zr.span,{...a,ref:e}):null});NN.displayName=wN;function Zx(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WE(t,{referrerPolicy:e,crossOrigin:r}){const n=KE(),a=L.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[u,c]=L.useState(()=>Zx(o,t));return li(()=>{c(Zx(o,t))},[o,t]),li(()=>{const f=b=>()=>{c(b)};if(!o)return;const p=f("loaded"),m=f("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,r,e]),u}function GE(){return()=>{}}function KE(){return L.useSyncExternalStore(GE,()=>!0,()=>!1)}var SN=xN,jN=bN,CN=NN;const _N=L.forwardRef(({className:t,...e},r)=>i.jsx(SN,{ref:r,className:$r(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));_N.displayName=SN.displayName;const AN=L.forwardRef(({className:t,...e},r)=>i.jsx(jN,{ref:r,className:$r("aspect-square h-full w-full",t),...e}));AN.displayName=jN.displayName;const PN=L.forwardRef(({className:t,...e},r)=>i.jsx(CN,{ref:r,className:$r("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));PN.displayName=CN.displayName;var f0="focusScope.autoFocusOnMount",h0="focusScope.autoFocusOnUnmount",Yx={bubbles:!1,cancelable:!0},QE="FocusScope",h1=L.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...u}=t,[c,f]=L.useState(null),p=Oa(a),m=Oa(o),b=L.useRef(null),A=Wn(e,S=>f(S)),y=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(n){let S=function(T){if(y.paused||!c)return;const z=T.target;c.contains(z)?b.current=z:Gc(b.current,{select:!0})},E=function(T){if(y.paused||!c)return;const z=T.relatedTarget;z!==null&&(c.contains(z)||Gc(b.current,{select:!0}))},_=function(T){if(document.activeElement===document.body)for(const re of T)re.removedNodes.length>0&&Gc(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",E);const O=new MutationObserver(_);return c&&O.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",E),O.disconnect()}}},[n,c,y.paused]),L.useEffect(()=>{if(c){Jx.add(y);const S=document.activeElement;if(!c.contains(S)){const _=new CustomEvent(f0,Yx);c.addEventListener(f0,p),c.dispatchEvent(_),_.defaultPrevented||(ZE(t8(kN(c)),{select:!0}),document.activeElement===S&&Gc(c))}return()=>{c.removeEventListener(f0,p),setTimeout(()=>{const _=new CustomEvent(h0,Yx);c.addEventListener(h0,m),c.dispatchEvent(_),_.defaultPrevented||Gc(S??document.body,{select:!0}),c.removeEventListener(h0,m),Jx.remove(y)},0)}}},[c,p,m,y]);const D=L.useCallback(S=>{if(!r&&!n||y.paused)return;const E=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,_=document.activeElement;if(E&&_){const O=S.currentTarget,[T,z]=YE(O);T&&z?!S.shiftKey&&_===z?(S.preventDefault(),r&&Gc(T,{select:!0})):S.shiftKey&&_===T&&(S.preventDefault(),r&&Gc(z,{select:!0})):_===O&&S.preventDefault()}},[r,n,y.paused]);return i.jsx(Zr.div,{tabIndex:-1,...u,ref:A,onKeyDown:D})});h1.displayName=QE;function ZE(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Gc(n,{select:e}),document.activeElement!==r)return}function YE(t){const e=kN(t),r=Xx(e,t),n=Xx(e.reverse(),t);return[r,n]}function kN(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Xx(t,e){for(const r of t)if(!XE(r,{upTo:e}))return r}function XE(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JE(t){return t instanceof HTMLInputElement&&"select"in t}function Gc(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&JE(t)&&e&&t.select()}}var Jx=e8();function e8(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=ey(t,e),t.unshift(e)},remove(e){t=ey(t,e),t[0]?.resume()}}}function ey(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function t8(t){return t.filter(e=>e.tagName!=="A")}var p0=0;function TN(){L.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ty()),document.body.insertAdjacentElement("beforeend",t[1]??ty()),p0++,()=>{p0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),p0--}},[])}function ty(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sl=function(){return Sl=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sl.apply(this,arguments)};function EN(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function r8(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var Vp="right-scroll-bar-position",Hp="width-before-scroll-bar",n8="with-scroll-bars-hidden",s8="--removed-body-scroll-bar-size";function m0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function i8(t,e){var r=L.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=e,r.facade}var a8=typeof window<"u"?L.useLayoutEffect:L.useEffect,ry=new WeakMap;function o8(t,e){var r=i8(null,function(n){return t.forEach(function(a){return m0(a,n)})});return a8(function(){var n=ry.get(r);if(n){var a=new Set(n),o=new Set(t),u=r.current;a.forEach(function(c){o.has(c)||m0(c,null)}),o.forEach(function(c){a.has(c)||m0(c,u)})}ry.set(r,t)},[t]),r}function l8(t){return t}function c8(t,e){e===void 0&&(e=l8);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var u=e(o,n);return r.push(u),function(){r=r.filter(function(c){return c!==u})}},assignSyncMedium:function(o){for(n=!0;r.length;){var u=r;r=[],u.forEach(o)}r={push:function(c){return o(c)},filter:function(){return r}}},assignMedium:function(o){n=!0;var u=[];if(r.length){var c=r;r=[],c.forEach(o),u=r}var f=function(){var m=u;u=[],m.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),r={push:function(m){u.push(m),p()},filter:function(m){return u=u.filter(m),r}}}};return a}function u8(t){t===void 0&&(t={});var e=c8(null);return e.options=Sl({async:!0,ssr:!1},t),e}var LN=function(t){var e=t.sideCar,r=EN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return L.createElement(n,Sl({},r))};LN.isSideCarExport=!0;function d8(t,e){return t.useMedium(e),LN}var RN=u8(),g0=function(){},Qm=L.forwardRef(function(t,e){var r=L.useRef(null),n=L.useState({onScrollCapture:g0,onWheelCapture:g0,onTouchMoveCapture:g0}),a=n[0],o=n[1],u=t.forwardProps,c=t.children,f=t.className,p=t.removeScrollBar,m=t.enabled,b=t.shards,A=t.sideCar,y=t.noIsolation,D=t.inert,S=t.allowPinchZoom,E=t.as,_=E===void 0?"div":E,O=t.gapMode,T=EN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=A,re=o8([r,e]),ae=Sl(Sl({},T),a);return L.createElement(L.Fragment,null,m&&L.createElement(z,{sideCar:RN,removeScrollBar:p,shards:b,noIsolation:y,inert:D,setCallbacks:o,allowPinchZoom:!!S,lockRef:r,gapMode:O}),u?L.cloneElement(L.Children.only(c),Sl(Sl({},ae),{ref:re})):L.createElement(_,Sl({},ae,{className:f,ref:re}),c))});Qm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qm.classNames={fullWidth:Hp,zeroRight:Vp};var f8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function h8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=f8();return e&&t.setAttribute("nonce",e),t}function p8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function m8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var g8=function(){var t=0,e=null;return{add:function(r){t==0&&(e=h8())&&(p8(e,r),m8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},v8=function(){var t=g8();return function(e,r){L.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},DN=function(){var t=v8(),e=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return e},x8={left:0,top:0,right:0,gap:0},v0=function(t){return parseInt(t||"",10)||0},y8=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[v0(r),v0(n),v0(a)]},b8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return x8;var e=y8(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},w8=DN(),$d="data-scroll-locked",N8=function(t,e,r,n){var a=t.left,o=t.top,u=t.right,c=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(n8,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat($d,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vp,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Hp,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Vp," .").concat(Vp,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Hp," .").concat(Hp,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat($d,`] {
    `).concat(s8,": ").concat(c,`px;
  }
`)},ny=function(){var t=parseInt(document.body.getAttribute($d)||"0",10);return isFinite(t)?t:0},S8=function(){L.useEffect(function(){return document.body.setAttribute($d,(ny()+1).toString()),function(){var t=ny()-1;t<=0?document.body.removeAttribute($d):document.body.setAttribute($d,t.toString())}},[])},j8=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;S8();var o=L.useMemo(function(){return b8(a)},[a]);return L.createElement(w8,{styles:N8(o,!e,a,r?"":"!important")})},gv=!1;if(typeof window<"u")try{var Cp=Object.defineProperty({},"passive",{get:function(){return gv=!0,!0}});window.addEventListener("test",Cp,Cp),window.removeEventListener("test",Cp,Cp)}catch{gv=!1}var Nd=gv?{passive:!1}:!1,C8=function(t){return t.tagName==="TEXTAREA"},IN=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!C8(t)&&r[e]==="visible")},_8=function(t){return IN(t,"overflowY")},A8=function(t){return IN(t,"overflowX")},sy=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=FN(t,n);if(a){var o=ON(t,n),u=o[1],c=o[2];if(u>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},P8=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},k8=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},FN=function(t,e){return t==="v"?_8(e):A8(e)},ON=function(t,e){return t==="v"?P8(e):k8(e)},T8=function(t,e){return t==="h"&&e==="rtl"?-1:1},E8=function(t,e,r,n,a){var o=T8(t,window.getComputedStyle(e).direction),u=o*n,c=r.target,f=e.contains(c),p=!1,m=u>0,b=0,A=0;do{var y=ON(t,c),D=y[0],S=y[1],E=y[2],_=S-E-o*D;(D||_)&&FN(t,c)&&(b+=_,A+=D),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(e.contains(c)||e===c));return(m&&Math.abs(b)<1||!m&&Math.abs(A)<1)&&(p=!0),p},_p=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},iy=function(t){return[t.deltaX,t.deltaY]},ay=function(t){return t&&"current"in t?t.current:t},L8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},R8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},D8=0,Sd=[];function I8(t){var e=L.useRef([]),r=L.useRef([0,0]),n=L.useRef(),a=L.useState(D8++)[0],o=L.useState(DN)[0],u=L.useRef(t);L.useEffect(function(){u.current=t},[t]),L.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var S=r8([t.lockRef.current],(t.shards||[]).map(ay),!0).filter(Boolean);return S.forEach(function(E){return E.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=L.useCallback(function(S,E){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var _=_p(S),O=r.current,T="deltaX"in S?S.deltaX:O[0]-_[0],z="deltaY"in S?S.deltaY:O[1]-_[1],re,ae=S.target,W=Math.abs(T)>Math.abs(z)?"h":"v";if("touches"in S&&W==="h"&&ae.type==="range")return!1;var te=sy(W,ae);if(!te)return!0;if(te?re=W:(re=W==="v"?"h":"v",te=sy(W,ae)),!te)return!1;if(!n.current&&"changedTouches"in S&&(T||z)&&(n.current=re),!re)return!0;var Q=n.current||re;return E8(Q,E,S,Q==="h"?T:z)},[]),f=L.useCallback(function(S){var E=S;if(!(!Sd.length||Sd[Sd.length-1]!==o)){var _="deltaY"in E?iy(E):_p(E),O=e.current.filter(function(re){return re.name===E.type&&(re.target===E.target||E.target===re.shadowParent)&&L8(re.delta,_)})[0];if(O&&O.should){E.cancelable&&E.preventDefault();return}if(!O){var T=(u.current.shards||[]).map(ay).filter(Boolean).filter(function(re){return re.contains(E.target)}),z=T.length>0?c(E,T[0]):!u.current.noIsolation;z&&E.cancelable&&E.preventDefault()}}},[]),p=L.useCallback(function(S,E,_,O){var T={name:S,delta:E,target:_,should:O,shadowParent:F8(_)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(z){return z!==T})},1)},[]),m=L.useCallback(function(S){r.current=_p(S),n.current=void 0},[]),b=L.useCallback(function(S){p(S.type,iy(S),S.target,c(S,t.lockRef.current))},[]),A=L.useCallback(function(S){p(S.type,_p(S),S.target,c(S,t.lockRef.current))},[]);L.useEffect(function(){return Sd.push(o),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:A}),document.addEventListener("wheel",f,Nd),document.addEventListener("touchmove",f,Nd),document.addEventListener("touchstart",m,Nd),function(){Sd=Sd.filter(function(S){return S!==o}),document.removeEventListener("wheel",f,Nd),document.removeEventListener("touchmove",f,Nd),document.removeEventListener("touchstart",m,Nd)}},[]);var y=t.removeScrollBar,D=t.inert;return L.createElement(L.Fragment,null,D?L.createElement(o,{styles:R8(a)}):null,y?L.createElement(j8,{gapMode:t.gapMode}):null)}function F8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const O8=d8(RN,I8);var p1=L.forwardRef(function(t,e){return L.createElement(Qm,Sl({},t,{ref:e,sideCar:O8}))});p1.classNames=Qm.classNames;var M8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jd=new WeakMap,Ap=new WeakMap,Pp={},x0=0,MN=function(t){return t&&(t.host||MN(t.parentNode))},B8=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=MN(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},q8=function(t,e,r,n){var a=B8(e,Array.isArray(t)?t:[t]);Pp[r]||(Pp[r]=new WeakMap);var o=Pp[r],u=[],c=new Set,f=new Set(a),p=function(b){!b||c.has(b)||(c.add(b),p(b.parentNode))};a.forEach(p);var m=function(b){!b||f.has(b)||Array.prototype.forEach.call(b.children,function(A){if(c.has(A))m(A);else try{var y=A.getAttribute(n),D=y!==null&&y!=="false",S=(jd.get(A)||0)+1,E=(o.get(A)||0)+1;jd.set(A,S),o.set(A,E),u.push(A),S===1&&D&&Ap.set(A,!0),E===1&&A.setAttribute(r,"true"),D||A.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",A,_)}})};return m(e),c.clear(),x0++,function(){u.forEach(function(b){var A=jd.get(b)-1,y=o.get(b)-1;jd.set(b,A),o.set(b,y),A||(Ap.has(b)||b.removeAttribute(n),Ap.delete(b)),y||b.removeAttribute(r)}),x0--,x0||(jd=new WeakMap,jd=new WeakMap,Ap=new WeakMap,Pp={})}},BN=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=M8(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),q8(n,a,r,"aria-hidden")):function(){return null}},m1="Dialog",[qN]=Rl(m1),[U8,el]=qN(m1),UN=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:u=!0}=t,c=L.useRef(null),f=L.useRef(null),[p=!1,m]=Jc({prop:n,defaultProp:a,onChange:o});return i.jsx(U8,{scope:e,triggerRef:c,contentRef:f,contentId:Yc(),titleId:Yc(),descriptionId:Yc(),open:p,onOpenChange:m,onOpenToggle:L.useCallback(()=>m(b=>!b),[m]),modal:u,children:r})};UN.displayName=m1;var zN="DialogTrigger",$N=L.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=el(zN,r),o=Wn(e,a.triggerRef);return i.jsx(Zr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":x1(a.open),...n,ref:o,onClick:Hr(t.onClick,a.onOpenToggle)})});$N.displayName=zN;var g1="DialogPortal",[z8,VN]=qN(g1,{forceMount:void 0}),HN=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:a}=t,o=el(g1,e);return i.jsx(z8,{scope:e,forceMount:r,children:L.Children.map(n,u=>i.jsx(cu,{present:r||o.open,children:i.jsx(Rm,{asChild:!0,container:a,children:u})}))})};HN.displayName=g1;var Sm="DialogOverlay",WN=L.forwardRef((t,e)=>{const r=VN(Sm,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,o=el(Sm,t.__scopeDialog);return o.modal?i.jsx(cu,{present:n||o.open,children:i.jsx(V8,{...a,ref:e})}):null});WN.displayName=Sm;var $8=Kd("DialogOverlay.RemoveScroll"),V8=L.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=el(Sm,r);return i.jsx(p1,{as:$8,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Zr.div,{"data-state":x1(a.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Hu="DialogContent",GN=L.forwardRef((t,e)=>{const r=VN(Hu,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,o=el(Hu,t.__scopeDialog);return i.jsx(cu,{present:n||o.open,children:o.modal?i.jsx(H8,{...a,ref:e}):i.jsx(W8,{...a,ref:e})})});GN.displayName=Hu;var H8=L.forwardRef((t,e)=>{const r=el(Hu,t.__scopeDialog),n=L.useRef(null),a=Wn(e,r.contentRef,n);return L.useEffect(()=>{const o=n.current;if(o)return BN(o)},[]),i.jsx(KN,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Hr(t.onCloseAutoFocus,o=>{o.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Hr(t.onPointerDownOutside,o=>{const u=o.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0;(u.button===2||c)&&o.preventDefault()}),onFocusOutside:Hr(t.onFocusOutside,o=>o.preventDefault())})}),W8=L.forwardRef((t,e)=>{const r=el(Hu,t.__scopeDialog),n=L.useRef(!1),a=L.useRef(!1);return i.jsx(KN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=o.target;r.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),KN=L.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...u}=t,c=el(Hu,r),f=L.useRef(null),p=Wn(e,f);return TN(),i.jsxs(i.Fragment,{children:[i.jsx(h1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:i.jsx(Th,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":x1(c.open),...u,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(G8,{titleId:c.titleId}),i.jsx(Q8,{contentRef:f,descriptionId:c.descriptionId})]})]})}),v1="DialogTitle",QN=L.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=el(v1,r);return i.jsx(Zr.h2,{id:a.titleId,...n,ref:e})});QN.displayName=v1;var ZN="DialogDescription",YN=L.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=el(ZN,r);return i.jsx(Zr.p,{id:a.descriptionId,...n,ref:e})});YN.displayName=ZN;var XN="DialogClose",JN=L.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=el(XN,r);return i.jsx(Zr.button,{type:"button",...n,ref:e,onClick:Hr(t.onClick,()=>a.onOpenChange(!1))})});JN.displayName=XN;function x1(t){return t?"open":"closed"}var eS="DialogTitleWarning",[g7,tS]=aC(eS,{contentName:Hu,titleName:v1,docsSlug:"dialog"}),G8=({titleId:t})=>{const e=tS(eS),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return L.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},K8="DialogDescriptionWarning",Q8=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tS(K8).contentName}}.`;return L.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},rS=UN,nS=$N,sS=HN,Zm=WN,Ym=GN,Xm=QN,Jm=YN,iS=JN;const Z8=rS,Y8=nS,X8=sS,aS=L.forwardRef(({className:t,...e},r)=>i.jsx(Zm,{className:$r("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));aS.displayName=Zm.displayName;const J8=Fm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),oS=L.forwardRef(({side:t="right",className:e,children:r,...n},a)=>i.jsxs(X8,{children:[i.jsx(aS,{}),i.jsxs(Ym,{ref:a,className:$r(J8({side:t}),e),...n,children:[r,i.jsxs(iS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(of,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));oS.displayName=Ym.displayName;const eL=L.forwardRef(({className:t,...e},r)=>i.jsx(Xm,{ref:r,className:$r("text-lg font-semibold text-foreground",t),...e}));eL.displayName=Xm.displayName;const tL=L.forwardRef(({className:t,...e},r)=>i.jsx(Jm,{ref:r,className:$r("text-sm text-muted-foreground",t),...e}));tL.displayName=Jm.displayName;function Es({children:t,user:e}){const[r]=Ma(),{mutate:n}=fE(),[a,o]=L.useState(!1),{branding:u}=hE(),c=[{name:"Dashboard",href:"/revira/dashboard",icon:n_},{name:"Clients",href:"/revira/clients",icon:oh},{name:"Projects",href:"/revira/projects",icon:nm},{name:"User Management",href:"/revira/users",icon:h_},{name:"Branding",href:"/revira/branding",icon:tv},{name:"Settings",href:"/revira/settings",icon:l_}],f=()=>i.jsxs("div",{className:"flex flex-col h-full bg-white",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("div",{className:"flex justify-center",children:u?.logoUrl?i.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-12 max-w-[200px] object-contain","data-testid":"img-sidebar-logo"}):i.jsx("h1",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})})}),i.jsx("div",{className:"flex-1 px-4 py-6 space-y-1",children:c.map(p=>{const m=r===p.href;return i.jsxs(U5,{href:p.href,className:`
              flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 group
              ${m?"bg-[#da2032] text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}
            `,children:[i.jsx(p.icon,{className:`w-5 h-5 ${m?"text-white":"text-slate-500 group-hover:text-slate-900"}`}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsxs("div",{className:"p-4 border-t border-slate-200",children:[i.jsx("div",{className:"p-4 rounded-lg bg-slate-50 border border-slate-200 mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(_N,{className:"h-10 w-10 border-2 border-slate-200",children:[i.jsx(AN,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${e?.name}`}),i.jsx(PN,{className:"bg-slate-200 text-slate-700",children:e?.name?.[0]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:e?.name}),i.jsx("p",{className:"text-xs text-slate-500 truncate",children:e?.username})]})]})}),i.jsxs(Oe,{variant:"outline",className:"w-full justify-start gap-3 text-slate-700 hover:text-slate-900 border-slate-300",onClick:()=>n(),children:[i.jsx(s_,{className:"w-4 h-4"}),"Sign Out"]})]})]});return i.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[i.jsx("aside",{className:"hidden lg:block w-72 h-screen sticky top-0 border-r border-slate-200",children:i.jsx(f,{})}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[i.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 sticky top-0 z-30 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-4 lg:hidden",children:[i.jsxs(Z8,{open:a,onOpenChange:o,children:[i.jsx(Y8,{asChild:!0,children:i.jsx(Oe,{variant:"ghost",size:"icon",className:"-ml-2",children:i.jsx(i_,{className:"w-6 h-6 text-slate-600"})})}),i.jsx(oS,{side:"left",className:"p-0 w-72 border-r-0",children:i.jsx(f,{})})]}),u?.logoUrl?i.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-8 max-w-[140px] object-contain"}):i.jsx("span",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})]}),i.jsx("div",{className:"flex-1 max-w-xl mx-auto hidden lg:block px-8",children:i.jsxs("div",{className:"relative",children:[i.jsx(Gv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-slate-100 border-transparent focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 text-sm"})]})}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(Oe,{variant:"ghost",size:"icon",className:"relative text-slate-500 hover:text-slate-700",children:[i.jsx(JC,{className:"w-5 h-5"}),i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]})})]}),i.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:i.jsx("div",{className:"max-w-7xl mx-auto animate-fade-in",children:t})})]})]})}const qr=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));qr.displayName="Card";const Yn=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("flex flex-col space-y-1.5 p-6",t),...e}));Yn.displayName="CardHeader";const Xn=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("text-2xl font-semibold leading-none tracking-tight",t),...e}));Xn.displayName="CardTitle";const Kc=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("text-sm text-muted-foreground",t),...e}));Kc.displayName="CardDescription";const Ur=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("p-6 pt-0",t),...e}));Ur.displayName="CardContent";const rL=L.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:$r("flex items-center p-6 pt-0",t),...e}));rL.displayName="CardFooter";async function Cd(t){try{const e=await fetch(t,{credentials:"include"});return e.ok?e.json():[]}catch{return[]}}function nL(){const{data:t,isLoading:e}=Aa(),[,r]=Ma(),{data:n=[]}=Ir({queryKey:["/revira/dashboard/clients"],queryFn:()=>Cd("/revira/api/clients"),enabled:!!t}),{data:a=[]}=Ir({queryKey:["/revira/dashboard/projects"],queryFn:()=>Cd("/revira/api/projects"),enabled:!!t}),{data:o=[]}=Ir({queryKey:["/revira/dashboard/quotations"],queryFn:()=>Cd("/revira/api/quotations"),enabled:!!t}),{data:u=[]}=Ir({queryKey:["/revira/dashboard/invoices"],queryFn:()=>Cd("/revira/api/invoices"),enabled:!!t}),{data:c=[]}=Ir({queryKey:["/revira/dashboard/gate-passes"],queryFn:()=>Cd("/revira/api/gate-passes"),enabled:!!t}),{data:f=[]}=Ir({queryKey:["/revira/dashboard/delivery-challans"],queryFn:()=>Cd("/revira/api/delivery-challans"),enabled:!!t}),p=L.useMemo(()=>{const S=new Map;return a.forEach(E=>S.set(E.id,E.projectName)),S},[a]),m=S=>{const E=String(S??"0").replace(/,/g,""),_=Number(E);return Number.isFinite(_)?_:0},b=L.useMemo(()=>u.reduce((S,E)=>S+m(E.grandTotal),0),[u]),A=L.useMemo(()=>{const S=new Set(o.map(re=>re.projectId)),E=new Set(u.map(re=>re.projectId)),_=new Set(c.map(re=>re.projectId)),O=new Set(f.map(re=>re.projectId)),T=a.length||1,z=a.filter(re=>S.has(re.id)&&E.has(re.id)&&_.has(re.id)&&O.has(re.id)).length;return{quotationCoverage:Math.round(S.size/T*100),invoiceCoverage:Math.round(E.size/T*100),gatePassCoverage:Math.round(_.size/T*100),deliveryCoverage:Math.round(O.size/T*100),fullDocProjects:z}},[a,o,u,c,f]),y=L.useMemo(()=>{const S=_=>new Date(_?String(_):0).getTime();return[...o.map(_=>({id:`q-${_.id}`,type:"Quotation",number:_.quotationNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...u.map(_=>({id:`i-${_.id}`,type:"Invoice",number:_.invoiceNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...c.map(_=>({id:`g-${_.id}`,type:"Gate Pass",number:_.gatePassNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...f.map(_=>({id:`d-${_.id}`,type:"Delivery Challan",number:_.deliveryChallanNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt}))].sort((_,O)=>S(O.createdAt)-S(_.createdAt)).slice(0,8)},[o,u,c,f]);if(e)return null;const D=[{title:"Clients",value:n.length,icon:oh,color:"text-blue-600",bg:"bg-blue-50"},{title:"Projects",value:a.length,icon:nm,color:"text-indigo-600",bg:"bg-indigo-50"},{title:"Documents",value:o.length+u.length+c.length+f.length,icon:Na,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Invoice Value",value:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(b),icon:r_,color:"text-amber-600",bg:"bg-amber-50"}];return i.jsx(Es,{user:t,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),i.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome, ",t?.name,". Live snapshot of projects and document flow."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Oe,{variant:"outline",onClick:()=>r("/revira/clients"),children:"Clients"}),i.jsx(Oe,{variant:"outline",onClick:()=>r("/revira/projects"),children:"Projects"})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4",children:D.map(S=>i.jsx(qr,{className:"border-slate-200",children:i.jsx(Ur,{className:"p-5",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:S.title}),i.jsx("p",{className:"mt-2 text-2xl font-bold text-slate-900",children:S.value})]}),i.jsx("div",{className:`rounded-lg p-2.5 ${S.bg}`,children:i.jsx(S.icon,{className:`h-5 w-5 ${S.color}`})})]})})},S.title))}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-3",children:[i.jsxs(qr,{className:"xl:col-span-2 border-slate-200",children:[i.jsx(Yn,{className:"pb-2",children:i.jsx(Xn,{className:"text-base",children:"Recent Document Activity"})}),i.jsx(Ur,{children:y.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No activity yet. Create a project and start with quotation."}):i.jsx("div",{className:"space-y-2",children:y.map(S=>i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 px-3 py-2.5",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[S.type," ",i.jsxs("span",{className:"font-normal text-slate-500",children:["(",S.revision,")"]})]}),i.jsxs("p",{className:"text-xs text-slate-500",children:[S.number," | ",p.get(S.projectId)||"Unknown Project"]})]}),i.jsx("p",{className:"text-xs text-slate-500",children:S.createdAt?new Date(S.createdAt).toLocaleDateString("en-IN"):"-"})]},S.id))})})]}),i.jsxs(qr,{className:"border-slate-200",children:[i.jsx(Yn,{className:"pb-2",children:i.jsx(Xn,{className:"text-base",children:"Documentation Health"})}),i.jsxs(Ur,{className:"space-y-3",children:[i.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Projects with all docs"}),i.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[A.fullDocProjects,"/",a.length]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(Na,{className:"h-4 w-4 text-red-500"})," Quotations"]}),i.jsxs("span",{className:"font-semibold",children:[A.quotationCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(rv,{className:"h-4 w-4 text-green-600"})," Invoices"]}),i.jsxs("span",{className:"font-semibold",children:[A.invoiceCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(J0,{className:"h-4 w-4 text-blue-600"})," Gate Pass"]}),i.jsxs("span",{className:"font-semibold",children:[A.gatePassCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(X0,{className:"h-4 w-4 text-indigo-600"})," Delivery Challan"]}),i.jsxs("span",{className:"font-semibold",children:[A.deliveryCoverage,"%"]})]})]}),i.jsxs(Oe,{className:"w-full mt-2",variant:"outline",onClick:()=>r("/revira/projects"),children:["Review Projects ",i.jsx(YC,{className:"ml-2 h-4 w-4"})]}),i.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-2.5 text-xs text-emerald-700 flex items-center gap-2",children:[i.jsx(XC,{className:"h-4 w-4"}),"Keep all four documents updated for better project traceability."]})]})]})]})]})})}const Sa=rS,Ch=nS,sL=sS,lS=L.forwardRef(({className:t,...e},r)=>i.jsx(Zm,{ref:r,className:$r("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));lS.displayName=Zm.displayName;const aa=L.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(sL,{children:[i.jsx(lS,{}),i.jsxs(Ym,{ref:n,className:$r("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,i.jsxs(iS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(of,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));aa.displayName=Ym.displayName;const oa=({className:t,...e})=>i.jsx("div",{className:$r("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});oa.displayName="DialogHeader";const la=L.forwardRef(({className:t,...e},r)=>i.jsx(Xm,{ref:r,className:$r("text-lg font-semibold leading-none tracking-tight",t),...e}));la.displayName=Xm.displayName;const ef=L.forwardRef(({className:t,...e},r)=>i.jsx(Jm,{ref:r,className:$r("text-sm text-muted-foreground",t),...e}));ef.displayName=Jm.displayName;const iL=B.object({name:B.string().min(1,"Client name is required"),location:B.string(),gstNo:B.string(),contactPerson:B.string(),mobileNumber:B.string().min(10,"Valid mobile number is required"),emailAddress:B.string()}),aL=t=>({...t,gstNo:t.gstNo?.trim()||"NA",contactPerson:t.contactPerson?.trim()||"NA",mobileNumber:t.mobileNumber?.trim()||"0000000000",emailAddress:t.emailAddress?.trim()||"na@example.com"});function oL(){const[t,e]=L.useState(!1),[r,n]=L.useState(null),[a,o]=L.useState(""),[,u]=Ma(),{toast:c}=Ba(),{data:f}=Aa(),{data:p,isLoading:m}=Ir({queryKey:["/revira/api/clients"]}),b=df({resolver:ff(iL),defaultValues:{name:"",location:"",gstNo:"",contactPerson:"",mobileNumber:"",emailAddress:""}}),A=kn({mutationFn:async T=>(await kr("POST","/revira/api/clients",aL(T))).json(),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/clients"]}),b.reset(),e(!1),c({title:"Success",description:"Client created successfully"})},onError:T=>{c({title:"Error",description:T.message,variant:"destructive"})}}),y=kn({mutationFn:async({id:T,data:z})=>(await kr("PUT",`/revira/api/clients/${T}`,z)).json(),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/clients"]}),b.reset(),n(null),e(!1),c({title:"Success",description:"Client updated successfully"})},onError:T=>{c({title:"Error",description:T.message,variant:"destructive"})}}),D=kn({mutationFn:async T=>{await kr("DELETE",`/revira/api/clients/${T}`)},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/clients"]}),c({title:"Success",description:"Client deleted successfully"})},onError:T=>{c({title:"Error",description:T.message,variant:"destructive"})}}),S=T=>{r?y.mutate({id:r.id,data:T}):A.mutate(T)},E=T=>{n(T),b.reset({name:T.name,location:T.location,gstNo:T.gstNo,contactPerson:T.contactPerson,mobileNumber:T.mobileNumber,emailAddress:T.emailAddress}),e(!0)},_=T=>{e(T),T||(n(null),b.reset())},O=L.useMemo(()=>{const T=a.trim().toLowerCase(),z=[...p??[]].sort((re,ae)=>ae.id-re.id);return T?z.filter(re=>[re.name,re.location,re.gstNo,re.contactPerson,re.mobileNumber,re.emailAddress].join(" ").toLowerCase().includes(T)):z},[p,a]);return i.jsxs(Es,{user:f,children:[i.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:i.jsx(oh,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Clients"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your client partners"})]})]}),i.jsxs(Sa,{open:t,onOpenChange:_,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Oe,{"data-testid":"button-add-client",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[i.jsx(xs,{className:"h-4 w-4 mr-2"}),"Add Client"]})}),i.jsxs(aa,{className:"sm:max-w-[500px]",children:[i.jsxs(oa,{children:[i.jsx(la,{children:r?"Edit Client":"Create New Client"}),i.jsx(ef,{children:r?"Update client details below.":"Add a new client partner to your system."})]}),i.jsx(hf,{...b,children:i.jsxs("form",{onSubmit:b.handleSubmit(S),className:"space-y-4",children:[i.jsx(an,{control:b.control,name:"name",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Client Name"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-client-name",placeholder:"Enter client name",...T})}),i.jsx(nn,{})]})}),i.jsx(an,{control:b.control,name:"location",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Location"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-location",placeholder:"Enter location",...T})}),i.jsx(nn,{})]})}),i.jsx(an,{control:b.control,name:"gstNo",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"GST No."}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-gst-no",placeholder:"Enter GST number",...T})}),i.jsx(nn,{})]})}),i.jsx(an,{control:b.control,name:"contactPerson",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Contact Person"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-contact-person",placeholder:"Enter contact person name",...T})}),i.jsx(nn,{})]})}),i.jsx(an,{control:b.control,name:"mobileNumber",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Mobile Number"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-mobile-number",placeholder:"Enter mobile number",...T})}),i.jsx(nn,{})]})}),i.jsx(an,{control:b.control,name:"emailAddress",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Email Address"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-email-address",type:"email",placeholder:"Enter email address",...T})}),i.jsx(nn,{})]})}),i.jsx(Oe,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:A.isPending||y.isPending,"data-testid":"button-submit-client",children:A.isPending||y.isPending?r?"Updating...":"Creating...":r?"Update Client":"Create Client"})]})})]})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Gv,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx(Je,{value:a,onChange:T=>o(T.target.value),placeholder:"Search by name, GST, location, contact...",className:"pl-9","data-testid":"input-search-clients"})]})]}),i.jsx(qr,{className:"border-0 shadow-lg overflow-hidden",children:i.jsxs(Ur,{className:"p-0",children:[i.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Name"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Location"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"GST No."})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Person"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Info"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(T=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},T))}):O.length>0?i.jsxs("div",{className:"divide-y divide-slate-100",children:[O.map(T=>i.jsxs("div",{"data-testid":`row-client-${T.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:i.jsx(Wv,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-semibold text-slate-800 uppercase text-sm","data-testid":`text-client-name-${T.id}`,children:T.name.length>15?T.name.substring(0,15)+"...":T.name})]}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(eu,{className:"w-3.5 h-3.5 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${T.id}`,children:T.location})]}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-700 text-sm font-mono","data-testid":`text-gst-${T.id}`,children:T.gstNo})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-contact-${T.id}`,children:T.contactPerson})}),i.jsxs("div",{className:"col-span-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lb,{className:"w-3 h-3 text-green-500"}),i.jsx("span",{className:"text-slate-600 text-xs","data-testid":`text-mobile-${T.id}`,children:T.mobileNumber})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rh,{className:"w-3 h-3 text-blue-500"}),i.jsx("span",{className:"text-slate-600 text-xs truncate max-w-[140px]","data-testid":`text-email-${T.id}`,title:T.emailAddress,children:T.emailAddress})]})]}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${T.id}/ledger`),"data-testid":`button-ledger-client-${T.id}`,title:"Client Ledger",children:i.jsx(sm,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>E(T),"data-testid":`button-edit-client-${T.id}`,title:"Edit Client",children:i.jsx(qu,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>D.mutate(T.id),disabled:D.isPending,"data-testid":`button-delete-client-${T.id}`,title:"Delete Client",children:i.jsx(Pn,{className:"w-4 h-4"})})]})]},T.id)),O.map(T=>i.jsxs("div",{className:"md:hidden px-4 py-4 space-y-2 hover:bg-slate-50/50","data-testid":`card-client-${T.id}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900 uppercase text-sm",children:T.name}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:T.location})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${T.id}/ledger`),"data-testid":`button-ledger-client-mobile-${T.id}`,title:"Client Ledger",children:i.jsx(sm,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>E(T),"data-testid":`button-edit-client-mobile-${T.id}`,children:i.jsx(qu,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>D.mutate(T.id),disabled:D.isPending,"data-testid":`button-delete-client-mobile-${T.id}`,children:i.jsx(Pn,{className:"w-4 h-4"})})]})]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"GST:"})," ",T.gstNo]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"Contact:"})," ",T.contactPerson]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"Mobile:"})," ",T.mobileNumber]}),i.jsxs("p",{className:"text-xs text-slate-600 break-all",children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",T.emailAddress]})]},`mobile-${T.id}`))]}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-blue-500/10 flex items-center justify-center mb-4",children:i.jsx(oh,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No clients yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first client partner."}),i.jsxs(Oe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[i.jsx(xs,{className:"w-4 h-4 mr-2"}),"Add First Client"]})]})]})})]})}function oy(t,[e,r]){return Math.min(r,Math.max(e,t))}var lL=L.createContext(void 0);function cS(t){const e=L.useContext(lL);return t||e||"ltr"}function uS(t){const e=L.useRef({value:t,previous:t});return L.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var cL=[" ","Enter","ArrowUp","ArrowDown"],uL=[" ","Enter"],Mh="Select",[eg,tg,dL]=zv(Mh),[pf]=Rl(Mh,[dL,Um]),rg=Um(),[fL,uu]=pf(Mh),[hL,pL]=pf(Mh),dS=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:a,onOpenChange:o,value:u,defaultValue:c,onValueChange:f,dir:p,name:m,autoComplete:b,disabled:A,required:y,form:D}=t,S=rg(e),[E,_]=L.useState(null),[O,T]=L.useState(null),[z,re]=L.useState(!1),ae=cS(p),[W=!1,te]=Jc({prop:n,defaultProp:a,onChange:o}),[Q,fe]=Jc({prop:u,defaultProp:c,onChange:f}),U=L.useRef(null),F=E?D||!!E.closest("form"):!0,[X,Y]=L.useState(new Set),Ne=Array.from(X).map(be=>be.props.value).join(";");return i.jsx(sA,{...S,children:i.jsxs(fL,{required:y,scope:e,trigger:E,onTriggerChange:_,valueNode:O,onValueNodeChange:T,valueNodeHasChildren:z,onValueNodeHasChildrenChange:re,contentId:Yc(),value:Q,onValueChange:fe,open:W,onOpenChange:te,dir:ae,triggerPointerDownPosRef:U,disabled:A,children:[i.jsx(eg.Provider,{scope:e,children:i.jsx(hL,{scope:t.__scopeSelect,onNativeOptionAdd:L.useCallback(be=>{Y(we=>new Set(we).add(be))},[]),onNativeOptionRemove:L.useCallback(be=>{Y(we=>{const se=new Set(we);return se.delete(be),se})},[]),children:r})}),F?i.jsxs(FS,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:b,value:Q,onChange:be=>fe(be.target.value),disabled:A,form:D,children:[Q===void 0?i.jsx("option",{value:""}):null,Array.from(X)]},Ne):null]})})};dS.displayName=Mh;var fS="SelectTrigger",hS=L.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,o=rg(r),u=uu(fS,r),c=u.disabled||n,f=Wn(e,u.onTriggerChange),p=tg(r),m=L.useRef("touch"),[b,A,y]=OS(S=>{const E=p().filter(T=>!T.disabled),_=E.find(T=>T.value===u.value),O=MS(E,S,_);O!==void 0&&u.onValueChange(O.value)}),D=S=>{c||(u.onOpenChange(!0),y()),S&&(u.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return i.jsx(uw,{asChild:!0,...o,children:i.jsx(Zr.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":IS(u.value)?"":void 0,...a,ref:f,onClick:Hr(a.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&D(S)}),onPointerDown:Hr(a.onPointerDown,S=>{m.current=S.pointerType;const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(D(S),S.preventDefault())}),onKeyDown:Hr(a.onKeyDown,S=>{const E=b.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&A(S.key),!(E&&S.key===" ")&&cL.includes(S.key)&&(D(),S.preventDefault())})})})});hS.displayName=fS;var pS="SelectValue",mS=L.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:u="",...c}=t,f=uu(pS,r),{onValueNodeHasChildrenChange:p}=f,m=o!==void 0,b=Wn(e,f.onValueNodeChange);return li(()=>{p(m)},[p,m]),i.jsx(Zr.span,{...c,ref:b,style:{pointerEvents:"none"},children:IS(f.value)?i.jsx(i.Fragment,{children:u}):o})});mS.displayName=pS;var mL="SelectIcon",gS=L.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...a}=t;return i.jsx(Zr.span,{"aria-hidden":!0,...a,ref:e,children:n||""})});gS.displayName=mL;var gL="SelectPortal",vS=t=>i.jsx(Rm,{asChild:!0,...t});vS.displayName=gL;var Wu="SelectContent",xS=L.forwardRef((t,e)=>{const r=uu(Wu,t.__scopeSelect),[n,a]=L.useState();if(li(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?nf.createPortal(i.jsx(yS,{scope:t.__scopeSelect,children:i.jsx(eg.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(bS,{...t,ref:e})});xS.displayName=Wu;var Uo=10,[yS,du]=pf(Wu),vL="SelectContentImpl",xL=Kd("SelectContent.RemoveScroll"),bS=L.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:u,side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:A,collisionPadding:y,sticky:D,hideWhenDetached:S,avoidCollisions:E,..._}=t,O=uu(Wu,r),[T,z]=L.useState(null),[re,ae]=L.useState(null),W=Wn(e,oe=>z(oe)),[te,Q]=L.useState(null),[fe,U]=L.useState(null),F=tg(r),[X,Y]=L.useState(!1),Ne=L.useRef(!1);L.useEffect(()=>{if(T)return BN(T)},[T]),TN();const be=L.useCallback(oe=>{const[ve,...Ce]=F().map(lt=>lt.ref.current),[Le]=Ce.slice(-1),Ge=document.activeElement;for(const lt of oe)if(lt===Ge||(lt?.scrollIntoView({block:"nearest"}),lt===ve&&re&&(re.scrollTop=0),lt===Le&&re&&(re.scrollTop=re.scrollHeight),lt?.focus(),document.activeElement!==Ge))return},[F,re]),we=L.useCallback(()=>be([te,T]),[be,te,T]);L.useEffect(()=>{X&&we()},[X,we]);const{onOpenChange:se,triggerPointerDownPosRef:me}=O;L.useEffect(()=>{if(T){let oe={x:0,y:0};const ve=Le=>{oe={x:Math.abs(Math.round(Le.pageX)-(me.current?.x??0)),y:Math.abs(Math.round(Le.pageY)-(me.current?.y??0))}},Ce=Le=>{oe.x<=10&&oe.y<=10?Le.preventDefault():T.contains(Le.target)||se(!1),document.removeEventListener("pointermove",ve),me.current=null};return me.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[T,se,me]),L.useEffect(()=>{const oe=()=>se(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[se]);const[I,j]=OS(oe=>{const ve=F().filter(Ge=>!Ge.disabled),Ce=ve.find(Ge=>Ge.ref.current===document.activeElement),Le=MS(ve,oe,Ce);Le&&setTimeout(()=>Le.ref.current.focus())}),x=L.useCallback((oe,ve,Ce)=>{const Le=!Ne.current&&!Ce;(O.value!==void 0&&O.value===ve||Le)&&(Q(oe),Le&&(Ne.current=!0))},[O.value]),C=L.useCallback(()=>T?.focus(),[T]),M=L.useCallback((oe,ve,Ce)=>{const Le=!Ne.current&&!Ce;(O.value!==void 0&&O.value===ve||Le)&&U(oe)},[O.value]),H=n==="popper"?vv:wS,ie=H===vv?{side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:A,collisionPadding:y,sticky:D,hideWhenDetached:S,avoidCollisions:E}:{};return i.jsx(yS,{scope:r,content:T,viewport:re,onViewportChange:ae,itemRefCallback:x,selectedItem:te,onItemLeave:C,itemTextRefCallback:M,focusSelectedItem:we,selectedItemText:fe,position:n,isPositioned:X,searchRef:I,children:i.jsx(p1,{as:xL,allowPinchZoom:!0,children:i.jsx(h1,{asChild:!0,trapped:O.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:Hr(a,oe=>{O.trigger?.focus({preventScroll:!0}),oe.preventDefault()}),children:i.jsx(Th,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>O.onOpenChange(!1),children:i.jsx(H,{role:"listbox",id:O.contentId,"data-state":O.open?"open":"closed",dir:O.dir,onContextMenu:oe=>oe.preventDefault(),..._,...ie,onPlaced:()=>Y(!0),ref:W,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Hr(_.onKeyDown,oe=>{const ve=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!ve&&oe.key.length===1&&j(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let Le=F().filter(Ge=>!Ge.disabled).map(Ge=>Ge.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Ge=oe.target,lt=Le.indexOf(Ge);Le=Le.slice(lt+1)}setTimeout(()=>be(Le)),oe.preventDefault()}})})})})})})});bS.displayName=vL;var yL="SelectItemAlignedPosition",wS=L.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,o=uu(Wu,r),u=du(Wu,r),[c,f]=L.useState(null),[p,m]=L.useState(null),b=Wn(e,W=>m(W)),A=tg(r),y=L.useRef(!1),D=L.useRef(!0),{viewport:S,selectedItem:E,selectedItemText:_,focusSelectedItem:O}=u,T=L.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&p&&S&&E&&_){const W=o.trigger.getBoundingClientRect(),te=p.getBoundingClientRect(),Q=o.valueNode.getBoundingClientRect(),fe=_.getBoundingClientRect();if(o.dir!=="rtl"){const Ge=fe.left-te.left,lt=Q.left-Ge,tt=W.left-lt,ct=W.width+tt,ee=Math.max(ct,te.width),Re=window.innerWidth-Uo,We=oy(lt,[Uo,Math.max(Uo,Re-ee)]);c.style.minWidth=ct+"px",c.style.left=We+"px"}else{const Ge=te.right-fe.right,lt=window.innerWidth-Q.right-Ge,tt=window.innerWidth-W.right-lt,ct=W.width+tt,ee=Math.max(ct,te.width),Re=window.innerWidth-Uo,We=oy(lt,[Uo,Math.max(Uo,Re-ee)]);c.style.minWidth=ct+"px",c.style.right=We+"px"}const U=A(),F=window.innerHeight-Uo*2,X=S.scrollHeight,Y=window.getComputedStyle(p),Ne=parseInt(Y.borderTopWidth,10),be=parseInt(Y.paddingTop,10),we=parseInt(Y.borderBottomWidth,10),se=parseInt(Y.paddingBottom,10),me=Ne+be+X+se+we,I=Math.min(E.offsetHeight*5,me),j=window.getComputedStyle(S),x=parseInt(j.paddingTop,10),C=parseInt(j.paddingBottom,10),M=W.top+W.height/2-Uo,H=F-M,ie=E.offsetHeight/2,oe=E.offsetTop+ie,ve=Ne+be+oe,Ce=me-ve;if(ve<=M){const Ge=U.length>0&&E===U[U.length-1].ref.current;c.style.bottom="0px";const lt=p.clientHeight-S.offsetTop-S.offsetHeight,tt=Math.max(H,ie+(Ge?C:0)+lt+we),ct=ve+tt;c.style.height=ct+"px"}else{const Ge=U.length>0&&E===U[0].ref.current;c.style.top="0px";const tt=Math.max(M,Ne+S.offsetTop+(Ge?x:0)+ie)+Ce;c.style.height=tt+"px",S.scrollTop=ve-M+S.offsetTop}c.style.margin=`${Uo}px 0`,c.style.minHeight=I+"px",c.style.maxHeight=F+"px",n?.(),requestAnimationFrame(()=>y.current=!0)}},[A,o.trigger,o.valueNode,c,p,S,E,_,o.dir,n]);li(()=>T(),[T]);const[z,re]=L.useState();li(()=>{p&&re(window.getComputedStyle(p).zIndex)},[p]);const ae=L.useCallback(W=>{W&&D.current===!0&&(T(),O?.(),D.current=!1)},[T,O]);return i.jsx(wL,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:ae,children:i.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:z},children:i.jsx(Zr.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});wS.displayName=yL;var bL="SelectPopperPosition",vv=L.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Uo,...o}=t,u=rg(r);return i.jsx(dw,{...u,...o,ref:e,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vv.displayName=bL;var[wL,y1]=pf(Wu,{}),xv="SelectViewport",NS=L.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...a}=t,o=du(xv,r),u=y1(xv,r),c=Wn(e,o.onViewportChange),f=L.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(eg.Slot,{scope:r,children:i.jsx(Zr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Hr(a.onScroll,p=>{const m=p.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:A}=u;if(A?.current&&b){const y=Math.abs(f.current-m.scrollTop);if(y>0){const D=window.innerHeight-Uo*2,S=parseFloat(b.style.minHeight),E=parseFloat(b.style.height),_=Math.max(S,E);if(_<D){const O=_+y,T=Math.min(D,O),z=O-T;b.style.height=T+"px",b.style.bottom==="0px"&&(m.scrollTop=z>0?z:0,b.style.justifyContent="flex-end")}}}f.current=m.scrollTop})})})]})});NS.displayName=xv;var SS="SelectGroup",[NL,SL]=pf(SS),jL=L.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=Yc();return i.jsx(NL,{scope:r,id:a,children:i.jsx(Zr.div,{role:"group","aria-labelledby":a,...n,ref:e})})});jL.displayName=SS;var jS="SelectLabel",CS=L.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=SL(jS,r);return i.jsx(Zr.div,{id:a.id,...n,ref:e})});CS.displayName=jS;var jm="SelectItem",[CL,_S]=pf(jm),AS=L.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...u}=t,c=uu(jm,r),f=du(jm,r),p=c.value===n,[m,b]=L.useState(o??""),[A,y]=L.useState(!1),D=Wn(e,O=>f.itemRefCallback?.(O,n,a)),S=Yc(),E=L.useRef("touch"),_=()=>{a||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(CL,{scope:r,value:n,disabled:a,textId:S,isSelected:p,onItemTextChange:L.useCallback(O=>{b(T=>T||(O?.textContent??"").trim())},[]),children:i.jsx(eg.ItemSlot,{scope:r,value:n,disabled:a,textValue:m,children:i.jsx(Zr.div,{role:"option","aria-labelledby":S,"data-highlighted":A?"":void 0,"aria-selected":p&&A,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...u,ref:D,onFocus:Hr(u.onFocus,()=>y(!0)),onBlur:Hr(u.onBlur,()=>y(!1)),onClick:Hr(u.onClick,()=>{E.current!=="mouse"&&_()}),onPointerUp:Hr(u.onPointerUp,()=>{E.current==="mouse"&&_()}),onPointerDown:Hr(u.onPointerDown,O=>{E.current=O.pointerType}),onPointerMove:Hr(u.onPointerMove,O=>{E.current=O.pointerType,a?f.onItemLeave?.():E.current==="mouse"&&O.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Hr(u.onPointerLeave,O=>{O.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:Hr(u.onKeyDown,O=>{f.searchRef?.current!==""&&O.key===" "||(uL.includes(O.key)&&_(),O.key===" "&&O.preventDefault())})})})})});AS.displayName=jm;var Yf="SelectItemText",PS=L.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:a,...o}=t,u=uu(Yf,r),c=du(Yf,r),f=_S(Yf,r),p=pL(Yf,r),[m,b]=L.useState(null),A=Wn(e,_=>b(_),f.onItemTextChange,_=>c.itemTextRefCallback?.(_,f.value,f.disabled)),y=m?.textContent,D=L.useMemo(()=>i.jsx("option",{value:f.value,disabled:f.disabled,children:y},f.value),[f.disabled,f.value,y]),{onNativeOptionAdd:S,onNativeOptionRemove:E}=p;return li(()=>(S(D),()=>E(D)),[S,E,D]),i.jsxs(i.Fragment,{children:[i.jsx(Zr.span,{id:f.textId,...o,ref:A}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?nf.createPortal(o.children,u.valueNode):null]})});PS.displayName=Yf;var kS="SelectItemIndicator",TS=L.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return _S(kS,r).isSelected?i.jsx(Zr.span,{"aria-hidden":!0,...n,ref:e}):null});TS.displayName=kS;var yv="SelectScrollUpButton",ES=L.forwardRef((t,e)=>{const r=du(yv,t.__scopeSelect),n=y1(yv,t.__scopeSelect),[a,o]=L.useState(!1),u=Wn(e,n.onScrollButtonChange);return li(()=>{if(r.viewport&&r.isPositioned){let c=function(){const p=f.scrollTop>0;o(p)};const f=r.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?i.jsx(RS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=r;c&&f&&(c.scrollTop=c.scrollTop-f.offsetHeight)}}):null});ES.displayName=yv;var bv="SelectScrollDownButton",LS=L.forwardRef((t,e)=>{const r=du(bv,t.__scopeSelect),n=y1(bv,t.__scopeSelect),[a,o]=L.useState(!1),u=Wn(e,n.onScrollButtonChange);return li(()=>{if(r.viewport&&r.isPositioned){let c=function(){const p=f.scrollHeight-f.clientHeight,m=Math.ceil(f.scrollTop)<p;o(m)};const f=r.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?i.jsx(RS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=r;c&&f&&(c.scrollTop=c.scrollTop+f.offsetHeight)}}):null});LS.displayName=bv;var RS=L.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,o=du("SelectScrollButton",r),u=L.useRef(null),c=tg(r),f=L.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return L.useEffect(()=>()=>f(),[f]),li(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),i.jsx(Zr.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Hr(a.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(n,50))}),onPointerMove:Hr(a.onPointerMove,()=>{o.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(n,50))}),onPointerLeave:Hr(a.onPointerLeave,()=>{f()})})}),_L="SelectSeparator",DS=L.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return i.jsx(Zr.div,{"aria-hidden":!0,...n,ref:e})});DS.displayName=_L;var wv="SelectArrow",AL=L.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=rg(r),o=uu(wv,r),u=du(wv,r);return o.open&&u.position==="popper"?i.jsx(fw,{...a,...n,ref:e}):null});AL.displayName=wv;function IS(t){return t===""||t===void 0}var FS=L.forwardRef((t,e)=>{const{value:r,...n}=t,a=L.useRef(null),o=Wn(e,a),u=uS(r);return L.useEffect(()=>{const c=a.current,f=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==r&&m){const b=new Event("change",{bubbles:!0});m.call(c,r),c.dispatchEvent(b)}},[u,r]),i.jsx(Eh,{asChild:!0,children:i.jsx("select",{...n,ref:o,defaultValue:r})})});FS.displayName="BubbleSelect";function OS(t){const e=Oa(t),r=L.useRef(""),n=L.useRef(0),a=L.useCallback(u=>{const c=r.current+u;e(c),(function f(p){r.current=p,window.clearTimeout(n.current),p!==""&&(n.current=window.setTimeout(()=>f(""),1e3))})(c)},[e]),o=L.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function MS(t,e,r){const a=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let u=PL(t,Math.max(o,0));a.length===1&&(u=u.filter(p=>p!==r));const f=u.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function PL(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var kL=dS,BS=hS,TL=mS,EL=gS,LL=vS,qS=xS,RL=NS,US=CS,zS=AS,DL=PS,IL=TS,$S=ES,VS=LS,HS=DS;const Pl=kL,kl=TL,Ko=L.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(BS,{ref:n,className:$r("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,i.jsx(EL,{asChild:!0,children:i.jsx(Od,{className:"h-4 w-4 opacity-50"})})]}));Ko.displayName=BS.displayName;const WS=L.forwardRef(({className:t,...e},r)=>i.jsx($S,{ref:r,className:$r("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Up,{className:"h-4 w-4"})}));WS.displayName=$S.displayName;const GS=L.forwardRef(({className:t,...e},r)=>i.jsx(VS,{ref:r,className:$r("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Od,{className:"h-4 w-4"})}));GS.displayName=VS.displayName;const Qo=L.forwardRef(({className:t,children:e,position:r="popper",...n},a)=>i.jsx(LL,{children:i.jsxs(qS,{ref:a,className:$r("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[i.jsx(WS,{}),i.jsx(RL,{className:$r("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(GS,{})]})}));Qo.displayName=qS.displayName;const FL=L.forwardRef(({className:t,...e},r)=>i.jsx(US,{ref:r,className:$r("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));FL.displayName=US.displayName;const ia=L.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(zS,{ref:n,className:$r("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(IL,{children:i.jsx(Rd,{className:"h-4 w-4"})})}),i.jsx(DL,{children:e})]}));ia.displayName=zS.displayName;const OL=L.forwardRef(({className:t,...e},r)=>i.jsx(HS,{ref:r,className:$r("-mx-1 my-1 h-px bg-muted",t),...e}));OL.displayName=HS.displayName;const ML=B.object({projectName:B.string().min(1,"Project name is required"),clientId:B.string().min(1,"Client selection is required"),location:B.string().min(1,"Location is required"),quotationType:B.enum(xm,{errorMap:()=>({message:"Quotation type is required"})})});function BL(){const[t,e]=L.useState(!1),[r,n]=L.useState(null),[a,o]=L.useState(null),[u,c]=L.useState(""),[,f]=Ma(),{toast:p}=Ba(),{data:m}=Aa(),{data:b,isLoading:A}=Ir({queryKey:["/revira/api/projects"]}),{data:y,isLoading:D}=Ir({queryKey:["/revira/api/clients"]}),S=df({resolver:ff(ML),defaultValues:{projectName:"",clientId:"",location:"",quotationType:void 0}}),E=kn({mutationFn:async F=>kr("POST","/revira/api/projects",{...F,clientId:Number(F.clientId)}),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project created",description:"The project has been created successfully."}),S.reset(),e(!1)},onError:F=>{p({title:"Error",description:F.message||"Failed to create project",variant:"destructive"})}}),_=kn({mutationFn:async({id:F,data:X})=>kr("PUT",`/revira/api/projects/${F}`,{...X,clientId:Number(X.clientId)}),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project updated",description:"The project has been updated successfully."}),S.reset(),n(null),e(!1)},onError:F=>{p({title:"Error",description:F.message||"Failed to update project",variant:"destructive"})}}),O=kn({mutationFn:async F=>kr("DELETE",`/revira/api/projects/${F}`),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project deleted",description:"The project has been deleted successfully."}),o(null)},onError:F=>{p({title:"Error",description:F.message||"Failed to delete project",variant:"destructive"})}}),T=F=>{r?_.mutate({id:r.id,data:F}):E.mutate(F)},z=F=>{n(F),S.reset({projectName:F.projectName,clientId:String(F.clientId),location:F.location,quotationType:F.quotationType}),e(!0)},re=F=>{e(F),F||(n(null),S.reset())},ae=F=>y?.find(Y=>Y.id===F)?.name||"Unknown Client",W=F=>new Date(F).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase(),te=F=>{switch(F){case"Supply and Fabrication":return"text-blue-600";case"Structural Fabrication":return"text-purple-600";case"Job Work":return"text-amber-600";default:return"text-slate-600"}},Q=F=>{switch(F){case"Supply and Fabrication":return"SUPPLY & FAB";case"Structural Fabrication":return"STRUCTURAL";case"Job Work":return"JOB WORK";default:return F.toUpperCase()}},fe=()=>{a&&O.mutate(a.id)},U=L.useMemo(()=>{const F=u.trim().toLowerCase(),X=[...b??[]].sort((Y,Ne)=>{const be=Y.createdAt?new Date(Y.createdAt).getTime():0,we=Ne.createdAt?new Date(Ne.createdAt).getTime():0;return be!==we?we-be:Ne.id-Y.id});return F?X.filter(Y=>[Y.projectName,ae(Y.clientId),Y.location,Y.quotationType].join(" ").toLowerCase().includes(F)):X},[b,u,y]);return i.jsxs(Es,{user:m,children:[i.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:i.jsx(nm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Projects"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your projects and quotations"})]})]}),i.jsxs(Sa,{open:t,onOpenChange:re,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Oe,{"data-testid":"button-add-project",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[i.jsx(xs,{className:"w-4 h-4 mr-2"}),"Add Project"]})}),i.jsxs(aa,{className:"sm:max-w-[500px]",children:[i.jsxs(oa,{children:[i.jsx(la,{children:r?"Edit Project":"Create New Project"}),i.jsx(ef,{children:r?"Update project details below.":"Add a new project with client and quotation details."})]}),i.jsx(hf,{...S,children:i.jsxs("form",{onSubmit:S.handleSubmit(T),className:"space-y-4",children:[i.jsx(an,{control:S.control,name:"projectName",render:({field:F})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Project Name"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-project-name",placeholder:"Enter project name",...F})}),i.jsx(nn,{})]})}),i.jsx(an,{control:S.control,name:"clientId",render:({field:F})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Client Name"}),i.jsxs(Pl,{onValueChange:F.onChange,value:F.value,children:[i.jsx(rn,{children:i.jsx(Ko,{"data-testid":"select-client",children:i.jsx(kl,{placeholder:"Select a client"})})}),i.jsx(Qo,{children:D?i.jsx(ia,{value:"loading",disabled:!0,children:"Loading clients..."}):y&&y.length>0?y.map(X=>i.jsx(ia,{value:String(X.id),"data-testid":`select-client-option-${X.id}`,children:X.name},X.id)):i.jsx(ia,{value:"none",disabled:!0,children:"No clients available. Please add a client first."})})]}),i.jsx(nn,{})]})}),i.jsx(an,{control:S.control,name:"location",render:({field:F})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Location"}),i.jsx(rn,{children:i.jsx(Je,{"data-testid":"input-location",placeholder:"Enter location",...F})}),i.jsx(nn,{})]})}),i.jsx(an,{control:S.control,name:"quotationType",render:({field:F})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Quotation Type"}),i.jsxs(Pl,{onValueChange:F.onChange,value:F.value,children:[i.jsx(rn,{children:i.jsx(Ko,{"data-testid":"select-quotation-type",children:i.jsx(kl,{placeholder:"Select quotation type"})})}),i.jsx(Qo,{children:xm.map(X=>i.jsx(ia,{value:X,"data-testid":`select-quotation-option-${X.replace(/\s+/g,"-").toLowerCase()}`,children:X},X))})]}),i.jsx(nn,{})]})}),i.jsx(Oe,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:E.isPending||_.isPending,"data-testid":"button-submit-project",children:E.isPending||_.isPending?r?"Updating...":"Creating...":r?"Update Project":"Create Project"})]})})]})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Gv,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx(Je,{value:u,onChange:F=>c(F.target.value),placeholder:"Search by project, client, location, type...",className:"pl-9","data-testid":"input-search-projects"})]})]}),i.jsx(qr,{className:"border-0 shadow-lg overflow-hidden",children:i.jsxs(Ur,{className:"p-0",children:[i.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Project Identifier"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Partner"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Geographic Site"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Creation Date"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),A?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(F=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 ml-auto"})})]},F))}):U.length>0?i.jsxs("div",{className:"divide-y divide-slate-100",children:[U.map(F=>i.jsxs("div",{"data-testid":`row-project-${F.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:"P"}),i.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-project-name-${F.id}`,children:F.projectName.length>15?F.projectName.substring(0,15)+"...":F.projectName})]}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"font-semibold text-slate-700 uppercase text-sm","data-testid":`text-client-name-${F.id}`,children:ae(F.clientId)})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${F.id}`,children:F.location})}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(e_,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-created-date-${F.id}`,children:F.createdAt?W(F.createdAt):"N/A"})]}),i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:`font-bold text-xs uppercase tracking-wide ${te(F.quotationType)}`,"data-testid":`text-status-${F.id}`,children:Q(F.quotationType)})}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/revira/projects/${F.id}/quotation`),"data-testid":`button-quotation-${F.id}`,title:"Create Quotation",children:i.jsx(Na,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/revira/projects/${F.id}/invoice`),"data-testid":`button-invoice-${F.id}`,title:"Create Invoice",children:i.jsx(rv,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/revira/projects/${F.id}/gate-pass`),"data-testid":`button-gate-pass-${F.id}`,title:"Create Gate Pass",children:i.jsx(J0,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/revira/projects/${F.id}/delivery-challan`),"data-testid":`button-delivery-challan-${F.id}`,title:"Create Delivery Challan",children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx(Oe,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/revira/projects/${F.id}/ledger`),"data-testid":`button-ledger-${F.id}`,title:"Open Ledger",children:i.jsx(hx,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>z(F),"data-testid":`button-edit-project-${F.id}`,title:"Edit Project",children:i.jsx(qu,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(F),disabled:O.isPending,"data-testid":`button-delete-project-${F.id}`,title:"Delete Project",children:i.jsx(Pn,{className:"w-4 h-4"})})]})]},F.id)),U.map(F=>i.jsxs("div",{className:"md:hidden px-4 py-4 space-y-3 hover:bg-slate-50/50","data-testid":`card-project-${F.id}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900",children:F.projectName}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:ae(F.clientId)}),i.jsx("p",{className:"text-xs text-slate-500",children:F.location})]}),i.jsx("span",{className:`font-bold text-[10px] uppercase tracking-wide ${te(F.quotationType)}`,children:Q(F.quotationType)})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/revira/projects/${F.id}/quotation`),"data-testid":`button-quotation-mobile-${F.id}`,children:i.jsx(Na,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/revira/projects/${F.id}/invoice`),"data-testid":`button-invoice-mobile-${F.id}`,children:i.jsx(rv,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/revira/projects/${F.id}/gate-pass`),"data-testid":`button-gate-pass-mobile-${F.id}`,children:i.jsx(J0,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/revira/projects/${F.id}/delivery-challan`),"data-testid":`button-delivery-challan-mobile-${F.id}`,children:i.jsx(X0,{className:"w-4 h-4"})}),i.jsx(Oe,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/revira/projects/${F.id}/ledger`),"data-testid":`button-ledger-mobile-${F.id}`,title:"Open Ledger",children:i.jsx(hx,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>z(F),"data-testid":`button-edit-project-mobile-${F.id}`,children:i.jsx(qu,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(F),disabled:O.isPending,"data-testid":`button-delete-project-mobile-${F.id}`,children:i.jsx(Pn,{className:"w-4 h-4"})})]})]},`mobile-${F.id}`))]}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-teal-500/10 flex items-center justify-center mb-4",children:i.jsx(nm,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No projects yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by creating your first project. Add clients first if you haven't already."}),i.jsxs(Oe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[i.jsx(xs,{className:"w-4 h-4 mr-2"}),"Create First Project"]})]})]})}),i.jsx(Sa,{open:!!a,onOpenChange:F=>!F&&o(null),children:i.jsxs(aa,{className:"sm:max-w-md",children:[i.jsxs(oa,{children:[i.jsx(la,{children:"Delete Project?"}),i.jsx(ef,{children:a?`Are you sure you want to delete "${a.projectName}"? This action cannot be undone.`:"Are you sure you want to delete this project? This action cannot be undone."})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oe,{type:"button",variant:"outline",onClick:()=>o(null),disabled:O.isPending,"data-testid":"button-cancel-delete-project",children:"Cancel"}),i.jsx(Oe,{type:"button",variant:"destructive",onClick:fe,disabled:O.isPending,"data-testid":"button-confirm-delete-project",children:O.isPending?"Deleting...":"Delete"})]})]})})]})}var b1="Checkbox",[qL]=Rl(b1),[UL,zL]=qL(b1),KS=L.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:u,disabled:c,value:f="on",onCheckedChange:p,form:m,...b}=t,[A,y]=L.useState(null),D=Wn(e,z=>y(z)),S=L.useRef(!1),E=A?m||!!A.closest("form"):!0,[_=!1,O]=Jc({prop:a,defaultProp:o,onChange:p}),T=L.useRef(_);return L.useEffect(()=>{const z=A?.form;if(z){const re=()=>O(T.current);return z.addEventListener("reset",re),()=>z.removeEventListener("reset",re)}},[A,O]),i.jsxs(UL,{scope:r,state:_,disabled:c,children:[i.jsx(Zr.button,{type:"button",role:"checkbox","aria-checked":Xc(_)?"mixed":_,"aria-required":u,"data-state":YS(_),"data-disabled":c?"":void 0,disabled:c,value:f,...b,ref:D,onKeyDown:Hr(t.onKeyDown,z=>{z.key==="Enter"&&z.preventDefault()}),onClick:Hr(t.onClick,z=>{O(re=>Xc(re)?!0:!re),E&&(S.current=z.isPropagationStopped(),S.current||z.stopPropagation())})}),E&&i.jsx($L,{control:A,bubbles:!S.current,name:n,value:f,checked:_,required:u,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:Xc(o)?!1:o})]})});KS.displayName=b1;var QS="CheckboxIndicator",ZS=L.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,o=zL(QS,r);return i.jsx(cu,{present:n||Xc(o.state)||o.state===!0,children:i.jsx(Zr.span,{"data-state":YS(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});ZS.displayName=QS;var $L=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:a,...o}=t,u=L.useRef(null),c=uS(r),f=ew(e);L.useEffect(()=>{const m=u.current,b=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(b,"checked").set;if(c!==r&&y){const D=new Event("click",{bubbles:n});m.indeterminate=Xc(r),y.call(m,Xc(r)?!1:r),m.dispatchEvent(D)}},[c,r,n]);const p=L.useRef(Xc(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,...o,tabIndex:-1,ref:u,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Xc(t){return t==="indeterminate"}function YS(t){return Xc(t)?"indeterminate":t?"checked":"unchecked"}var XS=KS,VL=ZS;const rh=L.forwardRef(({className:t,...e},r)=>i.jsx(XS,{ref:r,className:$r("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(VL,{className:$r("flex items-center justify-center text-current"),children:i.jsx(Rd,{className:"h-4 w-4"})})}));rh.displayName=XS.displayName;const JS=B.object({name:B.string().min(1,"Name is required"),username:B.string().email("Please enter a valid email address"),mobile:B.string().min(10,"Valid mobile number is required"),password:B.string().min(6,"Password must be at least 6 characters"),role:B.enum(jh,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:B.array(B.number()).optional()}),HL=JS.partial().extend({name:B.string().min(1,"Name is required"),username:B.string().email("Please enter a valid email address"),mobile:B.string().min(10,"Valid mobile number is required"),role:B.enum(jh,{errorMap:()=>({message:"Role is required"})}),password:B.string().optional()});function WL(){const[t,e]=L.useState(!1),[r,n]=L.useState(null),[a,o]=L.useState([]),{toast:u}=Ba(),{data:c}=Aa(),f=c?.role==="Administrator",{data:p,isLoading:m}=Ir({queryKey:["/revira/api/users"]}),{data:b}=Ir({queryKey:["/revira/api/clients"]}),A=df({resolver:ff(r?HL:JS),defaultValues:{name:"",username:"",mobile:"",password:"",role:"Standard",assignedClientIds:[]}}),y=A.watch("role"),D=kn({mutationFn:async ae=>kr("POST","/revira/api/users",{...ae,email:ae.username,assignedClientIds:a}),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User created",description:"The user has been created successfully."}),A.reset(),o([]),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to create user",variant:"destructive"})}}),S=kn({mutationFn:async({id:ae,data:W})=>{const te={name:W.name,username:W.username,email:W.username,mobile:W.mobile,role:W.role,assignedClientIds:a};return W.password&&W.password.length>=6&&(te.password=W.password),kr("PUT",`/revira/api/users/${ae}`,te)},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User updated",description:"The user has been updated successfully."}),A.reset(),o([]),n(null),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to update user",variant:"destructive"})}}),E=kn({mutationFn:async ae=>kr("DELETE",`/revira/api/users/${ae}`),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User deleted",description:"The user has been deleted successfully."})},onError:ae=>{u({title:"Error",description:ae.message||"Failed to delete user",variant:"destructive"})}}),_=async ae=>{n(ae),A.reset({name:ae.name,username:ae.username,mobile:ae.mobile||"",password:"",role:ae.role});try{const te=await(await fetch(`/revira/api/users/${ae.id}/clients`)).json();o(te)}catch{o([])}e(!0)},O=ae=>{ae||(A.reset(),n(null),o([])),e(ae)},T=ae=>{r?S.mutate({id:r.id,data:ae}):D.mutate(ae)},z=ae=>{o(W=>W.includes(ae)?W.filter(te=>te!==ae):[...W,ae])},re=ae=>ae==="Administrator"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700";return i.jsxs(Es,{user:c,children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-1","data-testid":"text-page-title",children:"User Management"}),i.jsx("p",{className:"text-slate-500","data-testid":"text-page-description",children:"Manage system users and their access permissions"})]}),f&&i.jsxs(Sa,{open:t,onOpenChange:O,children:[i.jsxs(Oe,{onClick:()=>{n(null),A.reset(),o([]),e(!0)},className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] hover:from-[#b51c2c] hover:to-[#a01827] shadow-lg shadow-red-200/50","data-testid":"button-add-user",children:[i.jsx(xs,{className:"w-4 h-4 mr-2"}),"Add User"]}),i.jsxs(aa,{className:"sm:max-w-[500px]",children:[i.jsxs(oa,{children:[i.jsx(la,{children:r?"Edit User":"Add New User"}),i.jsx(ef,{children:r?"Update the user details below.":"Fill in the details to create a new user account."})]}),i.jsx(hf,{...A,children:i.jsxs("form",{onSubmit:A.handleSubmit(T),className:"space-y-4",children:[i.jsx(an,{control:A.control,name:"name",render:({field:ae})=>i.jsxs(en,{children:[i.jsx(tn,{children:"User Name"}),i.jsx(rn,{children:i.jsx(Je,{placeholder:"Enter full name",...ae,"data-testid":"input-user-name"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:A.control,name:"username",render:({field:ae})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Email ID"}),i.jsx(rn,{children:i.jsx(Je,{type:"email",placeholder:"Enter email address",...ae,"data-testid":"input-user-email"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:A.control,name:"mobile",render:({field:ae})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Mobile No."}),i.jsx(rn,{children:i.jsx(Je,{placeholder:"Enter mobile number",...ae,"data-testid":"input-user-mobile"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:A.control,name:"password",render:({field:ae})=>i.jsxs(en,{children:[i.jsx(tn,{children:r?"New Password (leave blank to keep current)":"Password"}),i.jsx(rn,{children:i.jsx(Je,{type:"password",placeholder:r?"Enter new password (optional)":"Enter password",...ae,"data-testid":"input-user-password"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:A.control,name:"role",render:({field:ae})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Role"}),i.jsxs(Pl,{onValueChange:ae.onChange,value:ae.value,children:[i.jsx(rn,{children:i.jsx(Ko,{"data-testid":"select-user-role",children:i.jsx(kl,{placeholder:"Select role"})})}),i.jsx(Qo,{children:jh.map(W=>i.jsx(ia,{value:W,"data-testid":`option-role-${W.toLowerCase()}`,children:W},W))})]}),i.jsx(nn,{})]})}),y==="Standard"&&b&&b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Assign Clients"}),i.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Standard users can only access projects of assigned clients"}),i.jsx("div",{className:"border rounded-md p-3 max-h-40 overflow-y-auto space-y-2",children:b.map(ae=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(rh,{id:`client-${ae.id}`,checked:a.includes(ae.id),onCheckedChange:()=>z(ae.id),"data-testid":`checkbox-client-${ae.id}`}),i.jsx("label",{htmlFor:`client-${ae.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:ae.name})]},ae.id))})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Oe,{type:"button",variant:"outline",onClick:()=>O(!1),"data-testid":"button-cancel",children:"Cancel"}),i.jsx(Oe,{type:"submit",disabled:D.isPending||S.isPending,className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c]","data-testid":"button-submit-user",children:D.isPending||S.isPending?"Saving...":r?"Update User":"Create User"})]})]})})]})]})]}),i.jsx(qr,{className:"shadow-lg border-slate-200/50 overflow-hidden",children:i.jsxs(Ur,{className:"p-0",children:[i.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mobile"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(ae=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},ae))}):p&&p.length>0?i.jsx("div",{className:"divide-y divide-slate-100",children:p.map(ae=>i.jsxs("div",{"data-testid":`row-user-${ae.id}`,className:"grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:ae.name?.charAt(0).toUpperCase()||"U"}),i.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-user-name-${ae.id}`,children:ae.name})]}),i.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[i.jsx(Rh,{className:"w-4 h-4 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-email-${ae.id}`,children:ae.username})]}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(Lb,{className:"w-4 h-4 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-mobile-${ae.id}`,children:ae.mobile||"-"})]}),i.jsx("div",{className:"col-span-2",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${re(ae.role||"Standard")}`,"data-testid":`text-user-role-${ae.id}`,children:[i.jsx(c_,{className:"w-3 h-3"}),ae.role||"Standard"]})}),i.jsx("div",{className:"col-span-2 flex items-center justify-end gap-1",children:f&&i.jsxs(i.Fragment,{children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>_(ae),"data-testid":`button-edit-user-${ae.id}`,title:"Edit User",children:i.jsx(qu,{className:"w-4 h-4"})}),ae.id!==c?.id&&i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>{confirm(`Are you sure you want to delete ${ae.name}?`)&&E.mutate(ae.id)},disabled:E.isPending,"data-testid":`button-delete-user-${ae.id}`,title:"Delete User",children:i.jsx(Pn,{className:"w-4 h-4"})})]})})]},ae.id))}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-slate-500/10 flex items-center justify-center mb-4",children:i.jsx(oh,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No users yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first user account."}),f&&i.jsxs(Oe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] shadow-lg shadow-red-200/50",children:[i.jsx(xs,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})]})})]})}const rs=L.forwardRef(({className:t,...e},r)=>i.jsx("textarea",{className:$r("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...e}));rs.displayName="Textarea";var w1="Collapsible",[GL,e4]=Rl(w1),[KL,N1]=GL(w1),t4=L.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:o,onOpenChange:u,...c}=t,[f=!1,p]=Jc({prop:n,defaultProp:a,onChange:u});return i.jsx(KL,{scope:r,disabled:o,contentId:Yc(),open:f,onOpenToggle:L.useCallback(()=>p(m=>!m),[p]),children:i.jsx(Zr.div,{"data-state":j1(f),"data-disabled":o?"":void 0,...c,ref:e})})});t4.displayName=w1;var r4="CollapsibleTrigger",n4=L.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,a=N1(r4,r);return i.jsx(Zr.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":j1(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:e,onClick:Hr(t.onClick,a.onOpenToggle)})});n4.displayName=r4;var S1="CollapsibleContent",s4=L.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=N1(S1,t.__scopeCollapsible);return i.jsx(cu,{present:r||a.open,children:({present:o})=>i.jsx(QL,{...n,ref:e,present:o})})});s4.displayName=S1;var QL=L.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:a,...o}=t,u=N1(S1,r),[c,f]=L.useState(n),p=L.useRef(null),m=Wn(e,p),b=L.useRef(0),A=b.current,y=L.useRef(0),D=y.current,S=u.open||c,E=L.useRef(S),_=L.useRef(void 0);return L.useEffect(()=>{const O=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(O)},[]),li(()=>{const O=p.current;if(O){_.current=_.current||{transitionDuration:O.style.transitionDuration,animationName:O.style.animationName},O.style.transitionDuration="0s",O.style.animationName="none";const T=O.getBoundingClientRect();b.current=T.height,y.current=T.width,E.current||(O.style.transitionDuration=_.current.transitionDuration,O.style.animationName=_.current.animationName),f(n)}},[u.open,n]),i.jsx(Zr.div,{"data-state":j1(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":D?`${D}px`:void 0,...t.style},children:S&&a})});function j1(t){return t?"open":"closed"}var ZL=t4,YL=n4,XL=s4,gc="Accordion",JL=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[C1,eR,tR]=zv(gc),[ng]=Rl(gc,[tR,e4]),_1=e4(),i4=xr.forwardRef((t,e)=>{const{type:r,...n}=t,a=n,o=n;return i.jsx(C1.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?i.jsx(iR,{...o,ref:e}):i.jsx(sR,{...a,ref:e})})});i4.displayName=gc;var[a4,rR]=ng(gc),[o4,nR]=ng(gc,{collapsible:!1}),sR=xr.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:o=!1,...u}=t,[c,f]=Jc({prop:r,defaultProp:n,onChange:a});return i.jsx(a4,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:f,onItemClose:xr.useCallback(()=>o&&f(""),[o,f]),children:i.jsx(o4,{scope:t.__scopeAccordion,collapsible:o,children:i.jsx(l4,{...u,ref:e})})})}),iR=xr.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...o}=t,[u=[],c]=Jc({prop:r,defaultProp:n,onChange:a}),f=xr.useCallback(m=>c((b=[])=>[...b,m]),[c]),p=xr.useCallback(m=>c((b=[])=>b.filter(A=>A!==m)),[c]);return i.jsx(a4,{scope:t.__scopeAccordion,value:u,onItemOpen:f,onItemClose:p,children:i.jsx(o4,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(l4,{...o,ref:e})})})}),[aR,sg]=ng(gc),l4=xr.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:o="vertical",...u}=t,c=xr.useRef(null),f=Wn(c,e),p=eR(r),b=cS(a)==="ltr",A=Hr(t.onKeyDown,y=>{if(!JL.includes(y.key))return;const D=y.target,S=p().filter(te=>!te.ref.current?.disabled),E=S.findIndex(te=>te.ref.current===D),_=S.length;if(E===-1)return;y.preventDefault();let O=E;const T=0,z=_-1,re=()=>{O=E+1,O>z&&(O=T)},ae=()=>{O=E-1,O<T&&(O=z)};switch(y.key){case"Home":O=T;break;case"End":O=z;break;case"ArrowRight":o==="horizontal"&&(b?re():ae());break;case"ArrowDown":o==="vertical"&&re();break;case"ArrowLeft":o==="horizontal"&&(b?ae():re());break;case"ArrowUp":o==="vertical"&&ae();break}const W=O%_;S[W].ref.current?.focus()});return i.jsx(aR,{scope:r,disabled:n,direction:a,orientation:o,children:i.jsx(C1.Slot,{scope:r,children:i.jsx(Zr.div,{...u,"data-orientation":o,ref:f,onKeyDown:n?void 0:A})})})}),Cm="AccordionItem",[oR,A1]=ng(Cm),c4=xr.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...a}=t,o=sg(Cm,r),u=rR(Cm,r),c=_1(r),f=Yc(),p=n&&u.value.includes(n)||!1,m=o.disabled||t.disabled;return i.jsx(oR,{scope:r,open:p,disabled:m,triggerId:f,children:i.jsx(ZL,{"data-orientation":o.orientation,"data-state":m4(p),...c,...a,ref:e,disabled:m,open:p,onOpenChange:b=>{b?u.onItemOpen(n):u.onItemClose(n)}})})});c4.displayName=Cm;var u4="AccordionHeader",d4=xr.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,a=sg(gc,r),o=A1(u4,r);return i.jsx(Zr.h3,{"data-orientation":a.orientation,"data-state":m4(o.open),"data-disabled":o.disabled?"":void 0,...n,ref:e})});d4.displayName=u4;var Nv="AccordionTrigger",f4=xr.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,a=sg(gc,r),o=A1(Nv,r),u=nR(Nv,r),c=_1(r);return i.jsx(C1.ItemSlot,{scope:r,children:i.jsx(YL,{"aria-disabled":o.open&&!u.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...n,ref:e})})});f4.displayName=Nv;var h4="AccordionContent",p4=xr.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,a=sg(gc,r),o=A1(h4,r),u=_1(r);return i.jsx(XL,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...u,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});p4.displayName=h4;function m4(t){return t?"open":"closed"}var lR=i4,cR=c4,uR=d4,g4=f4,v4=p4;const y0=lR,Wp=L.forwardRef(({className:t,...e},r)=>i.jsx(cR,{ref:r,className:$r("border-b",t),...e}));Wp.displayName="AccordionItem";const Gp=L.forwardRef(({className:t,children:e,...r},n)=>i.jsx(uR,{className:"flex",children:i.jsxs(g4,{ref:n,className:$r("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,i.jsx(Od,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Gp.displayName=g4.displayName;const Kp=L.forwardRef(({className:t,children:e,...r},n)=>i.jsx(v4,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:$r("pb-4 pt-0",t),children:e})}));Kp.displayName=v4.displayName;const dR="modulepreload",fR=function(t){return"/revira/"+t},ly={},b0=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let f=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(r.map(p=>{if(p=fR(p),p in ly)return;ly[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const A=document.createElement("link");if(A.rel=m?"stylesheet":dR,m||(A.as="script"),A.crossOrigin="",A.href=p,c&&A.setAttribute("nonce",c),document.head.appendChild(A),m)return new Promise((y,D)=>{A.addEventListener("load",y),A.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function zn(t){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(t)}var Jo=Uint8Array,ro=Uint16Array,P1=Int32Array,k1=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T1=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cy=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x4=function(t,e){for(var r=new ro(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new P1(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)a[o]=o-r[n]<<5|n;return{b:r,r:a}},y4=x4(k1,2),hR=y4.b,Sv=y4.r;hR[28]=258,Sv[258]=28;var pR=x4(T1,0),uy=pR.r,jv=new ro(32768);for(var cs=0;cs<32768;++cs){var Hc=(cs&43690)>>1|(cs&21845)<<1;Hc=(Hc&52428)>>2|(Hc&13107)<<2,Hc=(Hc&61680)>>4|(Hc&3855)<<4,jv[cs]=((Hc&65280)>>8|(Hc&255)<<8)>>1}var nh=(function(t,e,r){for(var n=t.length,a=0,o=new ro(e);a<n;++a)t[a]&&++o[t[a]-1];var u=new ro(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(r){c=new ro(1<<e);var f=15-e;for(a=0;a<n;++a)if(t[a])for(var p=a<<4|t[a],m=e-t[a],b=u[t[a]-1]++<<m,A=b|(1<<m)-1;b<=A;++b)c[jv[b]>>f]=p}else for(c=new ro(n),a=0;a<n;++a)t[a]&&(c[a]=jv[u[t[a]-1]++]>>15-t[a]);return c}),Gu=new Jo(288);for(var cs=0;cs<144;++cs)Gu[cs]=8;for(var cs=144;cs<256;++cs)Gu[cs]=9;for(var cs=256;cs<280;++cs)Gu[cs]=7;for(var cs=280;cs<288;++cs)Gu[cs]=8;var _m=new Jo(32);for(var cs=0;cs<32;++cs)_m[cs]=5;var mR=nh(Gu,9,0),gR=nh(_m,5,0),b4=function(t){return(t+7)/8|0},vR=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Jo(t.subarray(e,r))},lc=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Hf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},w0=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,o=r.slice();if(!a)return{t:N4,l:0};if(a==1){var u=new Jo(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function(re,ae){return re.f-ae.f}),r.push({s:-1,f:25001});var c=r[0],f=r[1],p=0,m=1,b=2;for(r[0]={s:-1,f:c.f+f.f,l:c,r:f};m!=a-1;)c=r[r[p].f<r[b].f?p++:b++],f=r[p!=m&&r[p].f<r[b].f?p++:b++],r[m++]={s:-1,f:c.f+f.f,l:c,r:f};for(var A=o[0].s,n=1;n<a;++n)o[n].s>A&&(A=o[n].s);var y=new ro(A+1),D=Cv(r[m-1],y,0);if(D>e){var n=0,S=0,E=D-e,_=1<<E;for(o.sort(function(ae,W){return y[W.s]-y[ae.s]||ae.f-W.f});n<a;++n){var O=o[n].s;if(y[O]>e)S+=_-(1<<D-y[O]),y[O]=e;else break}for(S>>=E;S>0;){var T=o[n].s;y[T]<e?S-=1<<e-y[T]++-1:++n}for(;n>=0&&S;--n){var z=o[n].s;y[z]==e&&(--y[z],++S)}D=e}return{t:new Jo(y),l:D}},Cv=function(t,e,r){return t.s==-1?Math.max(Cv(t.l,e,r+1),Cv(t.r,e,r+1)):e[t.s]=r},dy=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ro(++e),n=0,a=t[0],o=1,u=function(f){r[n++]=f},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=t[c]}return{c:r.subarray(0,n),n:e}},Wf=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},w4=function(t,e,r){var n=r.length,a=b4(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<n;++o)t[a+o+4]=r[o];return(a+4+n)*8},fy=function(t,e,r,n,a,o,u,c,f,p,m){lc(e,m++,r),++a[256];for(var b=w0(a,15),A=b.t,y=b.l,D=w0(o,15),S=D.t,E=D.l,_=dy(A),O=_.c,T=_.n,z=dy(S),re=z.c,ae=z.n,W=new ro(19),te=0;te<O.length;++te)++W[O[te]&31];for(var te=0;te<re.length;++te)++W[re[te]&31];for(var Q=w0(W,7),fe=Q.t,U=Q.l,F=19;F>4&&!fe[cy[F-1]];--F);var X=p+5<<3,Y=Wf(a,Gu)+Wf(o,_m)+u,Ne=Wf(a,A)+Wf(o,S)+u+14+3*F+Wf(W,fe)+2*W[16]+3*W[17]+7*W[18];if(f>=0&&X<=Y&&X<=Ne)return w4(e,m,t.subarray(f,f+p));var be,we,se,me;if(lc(e,m,1+(Ne<Y)),m+=2,Ne<Y){be=nh(A,y,0),we=A,se=nh(S,E,0),me=S;var I=nh(fe,U,0);lc(e,m,T-257),lc(e,m+5,ae-1),lc(e,m+10,F-4),m+=14;for(var te=0;te<F;++te)lc(e,m+3*te,fe[cy[te]]);m+=3*F;for(var j=[O,re],x=0;x<2;++x)for(var C=j[x],te=0;te<C.length;++te){var M=C[te]&31;lc(e,m,I[M]),m+=fe[M],M>15&&(lc(e,m,C[te]>>5&127),m+=C[te]>>12)}}else be=mR,we=Gu,se=gR,me=_m;for(var te=0;te<c;++te){var H=n[te];if(H>255){var M=H>>18&31;Hf(e,m,be[M+257]),m+=we[M+257],M>7&&(lc(e,m,H>>23&31),m+=k1[M]);var ie=H&31;Hf(e,m,se[ie]),m+=me[ie],ie>3&&(Hf(e,m,H>>5&8191),m+=T1[ie])}else Hf(e,m,be[H]),m+=we[H]}return Hf(e,m,be[256]),m+we[256]},xR=new P1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N4=new Jo(0),yR=function(t,e,r,n,a,o){var u=o.z||t.length,c=new Jo(n+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(n,c.length-a),p=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var b=xR[e-1],A=b>>13,y=b&8191,D=(1<<r)-1,S=o.p||new ro(32768),E=o.h||new ro(D+1),_=Math.ceil(r/3),O=2*_,T=function(ct){return(t[ct]^t[ct+1]<<_^t[ct+2]<<O)&D},z=new P1(25e3),re=new ro(288),ae=new ro(32),W=0,te=0,Q=o.i||0,fe=0,U=o.w||0,F=0;Q+2<u;++Q){var X=T(Q),Y=Q&32767,Ne=E[X];if(S[Y]=Ne,E[X]=Y,U<=Q){var be=u-Q;if((W>7e3||fe>24576)&&(be>423||!p)){m=fy(t,f,0,z,re,ae,te,fe,F,Q-F,m),fe=W=te=0,F=Q;for(var we=0;we<286;++we)re[we]=0;for(var we=0;we<30;++we)ae[we]=0}var se=2,me=0,I=y,j=Y-Ne&32767;if(be>2&&X==T(Q-j))for(var x=Math.min(A,be)-1,C=Math.min(32767,Q),M=Math.min(258,be);j<=C&&--I&&Y!=Ne;){if(t[Q+se]==t[Q+se-j]){for(var H=0;H<M&&t[Q+H]==t[Q+H-j];++H);if(H>se){if(se=H,me=j,H>x)break;for(var ie=Math.min(j,H-2),oe=0,we=0;we<ie;++we){var ve=Q-j+we&32767,Ce=S[ve],Le=ve-Ce&32767;Le>oe&&(oe=Le,Ne=ve)}}}Y=Ne,Ne=S[Y],j+=Y-Ne&32767}if(me){z[fe++]=268435456|Sv[se]<<18|uy[me];var Ge=Sv[se]&31,lt=uy[me]&31;te+=k1[Ge]+T1[lt],++re[257+Ge],++ae[lt],U=Q+se,++W}else z[fe++]=t[Q],++re[t[Q]]}}for(Q=Math.max(Q,U);Q<u;++Q)z[fe++]=t[Q],++re[t[Q]];m=fy(t,f,p,z,re,ae,te,fe,F,Q-F,m),p||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=E,o.p=S,o.i=Q,o.w=U)}else{for(var Q=o.w||0;Q<u+p;Q+=65535){var tt=Q+65535;tt>=u&&(f[m/8|0]=p,tt=u),m=w4(f,m+1,t.subarray(Q,tt))}o.i=u}return vR(c,0,n+b4(m)+a)},S4=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,o=r.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=n+=r[u];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bR=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new Jo(o.length+t.length);u.set(o),u.set(t,o.length),t=u,a.w=o.length}return yR(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},j4=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},wR=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=S4();a.p(e.dictionary),j4(t,2,a.d())}};function _v(t,e){e||(e={});var r=S4();r.p(t);var n=bR(t,e,e.dictionary?6:2,4);return wR(n,e),j4(n,n.length-4,r.d()),n}var NR=typeof TextDecoder<"u"&&new TextDecoder,SR=0;try{NR.decode(N4,{stream:!0}),SR=1}catch{}function jR(t){if(Array.isArray(t))return t}function CR(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,u,c=[],f=!0,p=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(f=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);f=!0);}catch(m){p=!0,a=m}finally{try{if(!f&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw a}}return c}}function hy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _R(t,e){if(t){if(typeof t=="string")return hy(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hy(t,e):void 0}}function AR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function py(t,e){return jR(t)||CR(t,e)||_R(t,e)||AR()}function my(t,e="utf8"){return new TextDecoder(e).decode(t)}const PR=new TextEncoder;function kR(t){return PR.encode(t)}const TR=1024*8,ER=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),N0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class E1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=TR,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof E1)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=N0[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+n);if(this.littleEndian===ER&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+n));c.reverse();const f=new N0[r](c.buffer);return this.offset+=n,f.reverse(),f}const u=new N0[r](o);return this.offset+=n,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return my(this.readBytes(e))}decodeText(e=1,r="utf8"){return my(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(kR(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function mf(t){let e=t.length;for(;--e>=0;)t[e]=0}const LR=3,RR=258,C4=29,DR=256,IR=DR+1+C4,_4=30,FR=512,OR=new Array((IR+2)*2);mf(OR);const MR=new Array(_4*2);mf(MR);const BR=new Array(FR);mf(BR);const qR=new Array(RR-LR+1);mf(qR);const UR=new Array(C4);mf(UR);const zR=new Array(_4);mf(zR);const $R=(t,e,r,n)=>{let a=t&65535|0,o=t>>>16&65535|0,u=0;for(;r!==0;){u=r>2e3?2e3:r,r-=u;do a=a+e[n++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Av=$R;const VR=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},HR=new Uint32Array(VR()),WR=(t,e,r,n)=>{const a=HR,o=n+r;t^=-1;for(let u=n;u<o;u++)t=t>>>8^a[(t^e[u])&255];return t^-1};var bl=WR,Pv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},A4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const GR=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var KR=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)GR(r,n)&&(t[n]=r[n])}}return t},QR=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,o=t.length;n<o;n++){let u=t[n];r.set(u,a),a+=u.length}return r},P4={assign:KR,flattenChunks:QR};let k4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{k4=!1}const _h=new Uint8Array(256);for(let t=0;t<256;t++)_h[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_h[254]=_h[254]=1;var ZR=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,o,u=t.length,c=0;for(a=0;a<u;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<u&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<u&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|r&63):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|r&63):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|r&63);return e};const YR=(t,e)=>{if(e<65534&&t.subarray&&k4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var XR=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const o=new Array(r*2);for(a=0,n=0;n<r;){let u=t[n++];if(u<128){o[a++]=u;continue}let c=_h[u];if(c>4){o[a++]=65533,n+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&n<r;)u=u<<6|t[n++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return YR(o,a)},JR=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+_h[t[r]]>e?r:e},kv={string2buf:ZR,buf2string:XR,utf8border:JR};function eD(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tD=eD;const kp=16209,rD=16191;var nD=function(e,r){let n,a,o,u,c,f,p,m,b,A,y,D,S,E,_,O,T,z,re,ae,W,te,Q,fe;const U=e.state;n=e.next_in,Q=e.input,a=n+(e.avail_in-5),o=e.next_out,fe=e.output,u=o-(r-e.avail_out),c=o+(e.avail_out-257),f=U.dmax,p=U.wsize,m=U.whave,b=U.wnext,A=U.window,y=U.hold,D=U.bits,S=U.lencode,E=U.distcode,_=(1<<U.lenbits)-1,O=(1<<U.distbits)-1;e:do{D<15&&(y+=Q[n++]<<D,D+=8,y+=Q[n++]<<D,D+=8),T=S[y&_];t:for(;;){if(z=T>>>24,y>>>=z,D-=z,z=T>>>16&255,z===0)fe[o++]=T&65535;else if(z&16){re=T&65535,z&=15,z&&(D<z&&(y+=Q[n++]<<D,D+=8),re+=y&(1<<z)-1,y>>>=z,D-=z),D<15&&(y+=Q[n++]<<D,D+=8,y+=Q[n++]<<D,D+=8),T=E[y&O];r:for(;;){if(z=T>>>24,y>>>=z,D-=z,z=T>>>16&255,z&16){if(ae=T&65535,z&=15,D<z&&(y+=Q[n++]<<D,D+=8,D<z&&(y+=Q[n++]<<D,D+=8)),ae+=y&(1<<z)-1,ae>f){e.msg="invalid distance too far back",U.mode=kp;break e}if(y>>>=z,D-=z,z=o-u,ae>z){if(z=ae-z,z>m&&U.sane){e.msg="invalid distance too far back",U.mode=kp;break e}if(W=0,te=A,b===0){if(W+=p-z,z<re){re-=z;do fe[o++]=A[W++];while(--z);W=o-ae,te=fe}}else if(b<z){if(W+=p+b-z,z-=b,z<re){re-=z;do fe[o++]=A[W++];while(--z);if(W=0,b<re){z=b,re-=z;do fe[o++]=A[W++];while(--z);W=o-ae,te=fe}}}else if(W+=b-z,z<re){re-=z;do fe[o++]=A[W++];while(--z);W=o-ae,te=fe}for(;re>2;)fe[o++]=te[W++],fe[o++]=te[W++],fe[o++]=te[W++],re-=3;re&&(fe[o++]=te[W++],re>1&&(fe[o++]=te[W++]))}else{W=o-ae;do fe[o++]=fe[W++],fe[o++]=fe[W++],fe[o++]=fe[W++],re-=3;while(re>2);re&&(fe[o++]=fe[W++],re>1&&(fe[o++]=fe[W++]))}}else if((z&64)===0){T=E[(T&65535)+(y&(1<<z)-1)];continue r}else{e.msg="invalid distance code",U.mode=kp;break e}break}}else if((z&64)===0){T=S[(T&65535)+(y&(1<<z)-1)];continue t}else if(z&32){U.mode=rD;break e}else{e.msg="invalid literal/length code",U.mode=kp;break e}break}}while(n<a&&o<c);re=D>>3,n-=re,D-=re<<3,y&=(1<<D)-1,e.next_in=n,e.next_out=o,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=o<c?257+(c-o):257-(o-c),U.hold=y,U.bits=D};const _d=15,gy=852,vy=592,xy=0,S0=1,yy=2,sD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iD=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),aD=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oD=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lD=(t,e,r,n,a,o,u,c)=>{const f=c.bits;let p=0,m=0,b=0,A=0,y=0,D=0,S=0,E=0,_=0,O=0,T,z,re,ae,W,te=null,Q;const fe=new Uint16Array(_d+1),U=new Uint16Array(_d+1);let F=null,X,Y,Ne;for(p=0;p<=_d;p++)fe[p]=0;for(m=0;m<n;m++)fe[e[r+m]]++;for(y=f,A=_d;A>=1&&fe[A]===0;A--);if(y>A&&(y=A),A===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(b=1;b<A&&fe[b]===0;b++);for(y<b&&(y=b),E=1,p=1;p<=_d;p++)if(E<<=1,E-=fe[p],E<0)return-1;if(E>0&&(t===xy||A!==1))return-1;for(U[1]=0,p=1;p<_d;p++)U[p+1]=U[p]+fe[p];for(m=0;m<n;m++)e[r+m]!==0&&(u[U[e[r+m]]++]=m);if(t===xy?(te=F=u,Q=20):t===S0?(te=sD,F=iD,Q=257):(te=aD,F=oD,Q=0),O=0,m=0,p=b,W=o,D=y,S=0,re=-1,_=1<<y,ae=_-1,t===S0&&_>gy||t===yy&&_>vy)return 1;for(;;){X=p-S,u[m]+1<Q?(Y=0,Ne=u[m]):u[m]>=Q?(Y=F[u[m]-Q],Ne=te[u[m]-Q]):(Y=96,Ne=0),T=1<<p-S,z=1<<D,b=z;do z-=T,a[W+(O>>S)+z]=X<<24|Y<<16|Ne|0;while(z!==0);for(T=1<<p-1;O&T;)T>>=1;if(T!==0?(O&=T-1,O+=T):O=0,m++,--fe[p]===0){if(p===A)break;p=e[r+u[m]]}if(p>y&&(O&ae)!==re){for(S===0&&(S=y),W+=b,D=p-S,E=1<<D;D+S<A&&(E-=fe[D+S],!(E<=0));)D++,E<<=1;if(_+=1<<D,t===S0&&_>gy||t===yy&&_>vy)return 1;re=O&ae,a[re]=y<<24|D<<16|W-o|0}}return O!==0&&(a[W+O]=p-S<<24|64<<16|0),c.bits=y,0};var sh=lD;const cD=0,T4=1,E4=2,{Z_FINISH:by,Z_BLOCK:uD,Z_TREES:Tp,Z_OK:Ku,Z_STREAM_END:dD,Z_NEED_DICT:fD,Z_STREAM_ERROR:bo,Z_DATA_ERROR:L4,Z_MEM_ERROR:R4,Z_BUF_ERROR:hD,Z_DEFLATED:wy}=A4,ig=16180,Ny=16181,Sy=16182,jy=16183,Cy=16184,_y=16185,Ay=16186,Py=16187,ky=16188,Ty=16189,Am=16190,cc=16191,j0=16192,Ey=16193,C0=16194,Ly=16195,Ry=16196,Dy=16197,Iy=16198,Ep=16199,Lp=16200,Fy=16201,Oy=16202,My=16203,By=16204,qy=16205,_0=16206,Uy=16207,zy=16208,vs=16209,D4=16210,I4=16211,pD=852,mD=592,gD=15,vD=gD,$y=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function xD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Yu=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<ig||e.mode>I4?1:0},F4=t=>{if(Yu(t))return bo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=ig,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(pD),e.distcode=e.distdyn=new Int32Array(mD),e.sane=1,e.back=-1,Ku},O4=t=>{if(Yu(t))return bo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,F4(t)},M4=(t,e)=>{let r;if(Yu(t))return bo;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?bo:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,O4(t))},B4=(t,e)=>{if(!t)return bo;const r=new xD;t.state=r,r.strm=t,r.window=null,r.mode=ig;const n=M4(t,e);return n!==Ku&&(t.state=null),n},yD=t=>B4(t,vD);let Vy=!0,A0,P0;const bD=t=>{if(Vy){A0=new Int32Array(512),P0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(sh(T4,t.lens,0,288,A0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;sh(E4,t.lens,0,32,P0,0,t.work,{bits:5}),Vy=!1}t.lencode=A0,t.lenbits=9,t.distcode=P0,t.distbits=5},q4=(t,e,r,n)=>{let a;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>n&&(a=n),o.window.set(e.subarray(r-n,r-n+a),o.wnext),n-=a,n?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},wD=(t,e)=>{let r,n,a,o,u,c,f,p,m,b,A,y,D,S,E=0,_,O,T,z,re,ae,W,te;const Q=new Uint8Array(4);let fe,U;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Yu(t)||!t.output||!t.input&&t.avail_in!==0)return bo;r=t.state,r.mode===cc&&(r.mode=j0),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,n=t.input,c=t.avail_in,p=r.hold,m=r.bits,b=c,A=f,te=Ku;e:for(;;)switch(r.mode){case ig:if(r.wrap===0){r.mode=j0;break}for(;m<16;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(r.wrap&2&&p===35615){r.wbits===0&&(r.wbits=15),r.check=0,Q[0]=p&255,Q[1]=p>>>8&255,r.check=bl(r.check,Q,2,0),p=0,m=0,r.mode=Ny;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",r.mode=vs;break}if((p&15)!==wy){t.msg="unknown compression method",r.mode=vs;break}if(p>>>=4,m-=4,W=(p&15)+8,r.wbits===0&&(r.wbits=W),W>15||W>r.wbits){t.msg="invalid window size",r.mode=vs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=p&512?Ty:cc,p=0,m=0;break;case Ny:for(;m<16;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(r.flags=p,(r.flags&255)!==wy){t.msg="unknown compression method",r.mode=vs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=vs;break}r.head&&(r.head.text=p>>8&1),r.flags&512&&r.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,r.check=bl(r.check,Q,2,0)),p=0,m=0,r.mode=Sy;case Sy:for(;m<32;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.head&&(r.head.time=p),r.flags&512&&r.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,Q[2]=p>>>16&255,Q[3]=p>>>24&255,r.check=bl(r.check,Q,4,0)),p=0,m=0,r.mode=jy;case jy:for(;m<16;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.head&&(r.head.xflags=p&255,r.head.os=p>>8),r.flags&512&&r.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,r.check=bl(r.check,Q,2,0)),p=0,m=0,r.mode=Cy;case Cy:if(r.flags&1024){for(;m<16;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.length=p,r.head&&(r.head.extra_len=p),r.flags&512&&r.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,r.check=bl(r.check,Q,2,0)),p=0,m=0}else r.head&&(r.head.extra=null);r.mode=_y;case _y:if(r.flags&1024&&(y=r.length,y>c&&(y=c),y&&(r.head&&(W=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+y),W)),r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,y,o)),c-=y,o+=y,r.length-=y),r.length))break e;r.length=0,r.mode=Ay;case Ay:if(r.flags&2048){if(c===0)break e;y=0;do W=n[o+y++],r.head&&W&&r.length<65536&&(r.head.name+=String.fromCharCode(W));while(W&&y<c);if(r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,y,o)),c-=y,o+=y,W)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Py;case Py:if(r.flags&4096){if(c===0)break e;y=0;do W=n[o+y++],r.head&&W&&r.length<65536&&(r.head.comment+=String.fromCharCode(W));while(W&&y<c);if(r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,y,o)),c-=y,o+=y,W)break e}else r.head&&(r.head.comment=null);r.mode=ky;case ky:if(r.flags&512){for(;m<16;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(r.wrap&4&&p!==(r.check&65535)){t.msg="header crc mismatch",r.mode=vs;break}p=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=cc;break;case Ty:for(;m<32;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}t.adler=r.check=$y(p),p=0,m=0,r.mode=Am;case Am:if(r.havedict===0)return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,r.hold=p,r.bits=m,fD;t.adler=r.check=1,r.mode=cc;case cc:if(e===uD||e===Tp)break e;case j0:if(r.last){p>>>=m&7,m-=m&7,r.mode=_0;break}for(;m<3;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}switch(r.last=p&1,p>>>=1,m-=1,p&3){case 0:r.mode=Ey;break;case 1:if(bD(r),r.mode=Ep,e===Tp){p>>>=2,m-=2;break e}break;case 2:r.mode=Ry;break;case 3:t.msg="invalid block type",r.mode=vs}p>>>=2,m-=2;break;case Ey:for(p>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",r.mode=vs;break}if(r.length=p&65535,p=0,m=0,r.mode=C0,e===Tp)break e;case C0:r.mode=Ly;case Ly:if(y=r.length,y){if(y>c&&(y=c),y>f&&(y=f),y===0)break e;a.set(n.subarray(o,o+y),u),c-=y,o+=y,f-=y,u+=y,r.length-=y;break}r.mode=cc;break;case Ry:for(;m<14;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(r.nlen=(p&31)+257,p>>>=5,m-=5,r.ndist=(p&31)+1,p>>>=5,m-=5,r.ncode=(p&15)+4,p>>>=4,m-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=vs;break}r.have=0,r.mode=Dy;case Dy:for(;r.have<r.ncode;){for(;m<3;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.lens[F[r.have++]]=p&7,p>>>=3,m-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,fe={bits:r.lenbits},te=sh(cD,r.lens,0,19,r.lencode,0,r.work,fe),r.lenbits=fe.bits,te){t.msg="invalid code lengths set",r.mode=vs;break}r.have=0,r.mode=Iy;case Iy:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[p&(1<<r.lenbits)-1],_=E>>>24,O=E>>>16&255,T=E&65535,!(_<=m);){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(T<16)p>>>=_,m-=_,r.lens[r.have++]=T;else{if(T===16){for(U=_+2;m<U;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(p>>>=_,m-=_,r.have===0){t.msg="invalid bit length repeat",r.mode=vs;break}W=r.lens[r.have-1],y=3+(p&3),p>>>=2,m-=2}else if(T===17){for(U=_+3;m<U;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=3+(p&7),p>>>=3,m-=3}else{for(U=_+7;m<U;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=11+(p&127),p>>>=7,m-=7}if(r.have+y>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=vs;break}for(;y--;)r.lens[r.have++]=W}}if(r.mode===vs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=vs;break}if(r.lenbits=9,fe={bits:r.lenbits},te=sh(T4,r.lens,0,r.nlen,r.lencode,0,r.work,fe),r.lenbits=fe.bits,te){t.msg="invalid literal/lengths set",r.mode=vs;break}if(r.distbits=6,r.distcode=r.distdyn,fe={bits:r.distbits},te=sh(E4,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,fe),r.distbits=fe.bits,te){t.msg="invalid distances set",r.mode=vs;break}if(r.mode=Ep,e===Tp)break e;case Ep:r.mode=Lp;case Lp:if(c>=6&&f>=258){t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,r.hold=p,r.bits=m,nD(t,A),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,n=t.input,c=t.avail_in,p=r.hold,m=r.bits,r.mode===cc&&(r.back=-1);break}for(r.back=0;E=r.lencode[p&(1<<r.lenbits)-1],_=E>>>24,O=E>>>16&255,T=E&65535,!(_<=m);){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(O&&(O&240)===0){for(z=_,re=O,ae=T;E=r.lencode[ae+((p&(1<<z+re)-1)>>z)],_=E>>>24,O=E>>>16&255,T=E&65535,!(z+_<=m);){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}p>>>=z,m-=z,r.back+=z}if(p>>>=_,m-=_,r.back+=_,r.length=T,O===0){r.mode=qy;break}if(O&32){r.back=-1,r.mode=cc;break}if(O&64){t.msg="invalid literal/length code",r.mode=vs;break}r.extra=O&15,r.mode=Fy;case Fy:if(r.extra){for(U=r.extra;m<U;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.length+=p&(1<<r.extra)-1,p>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Oy;case Oy:for(;E=r.distcode[p&(1<<r.distbits)-1],_=E>>>24,O=E>>>16&255,T=E&65535,!(_<=m);){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if((O&240)===0){for(z=_,re=O,ae=T;E=r.distcode[ae+((p&(1<<z+re)-1)>>z)],_=E>>>24,O=E>>>16&255,T=E&65535,!(z+_<=m);){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}p>>>=z,m-=z,r.back+=z}if(p>>>=_,m-=_,r.back+=_,O&64){t.msg="invalid distance code",r.mode=vs;break}r.offset=T,r.extra=O&15,r.mode=My;case My:if(r.extra){for(U=r.extra;m<U;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}r.offset+=p&(1<<r.extra)-1,p>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=vs;break}r.mode=By;case By:if(f===0)break e;if(y=A-f,r.offset>y){if(y=r.offset-y,y>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=vs;break}y>r.wnext?(y-=r.wnext,D=r.wsize-y):D=r.wnext-y,y>r.length&&(y=r.length),S=r.window}else S=a,D=u-r.offset,y=r.length;y>f&&(y=f),f-=y,r.length-=y;do a[u++]=S[D++];while(--y);r.length===0&&(r.mode=Lp);break;case qy:if(f===0)break e;a[u++]=r.length,f--,r.mode=Lp;break;case _0:if(r.wrap){for(;m<32;){if(c===0)break e;c--,p|=n[o++]<<m,m+=8}if(A-=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?bl(r.check,a,A,u-A):Av(r.check,a,A,u-A)),A=f,r.wrap&4&&(r.flags?p:$y(p))!==r.check){t.msg="incorrect data check",r.mode=vs;break}p=0,m=0}r.mode=Uy;case Uy:if(r.wrap&&r.flags){for(;m<32;){if(c===0)break e;c--,p+=n[o++]<<m,m+=8}if(r.wrap&4&&p!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=vs;break}p=0,m=0}r.mode=zy;case zy:te=dD;break e;case vs:te=L4;break e;case D4:return R4;case I4:default:return bo}return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,r.hold=p,r.bits=m,(r.wsize||A!==t.avail_out&&r.mode<vs&&(r.mode<_0||e!==by))&&q4(t,t.output,t.next_out,A-t.avail_out),b-=t.avail_in,A-=t.avail_out,t.total_in+=b,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?bl(r.check,a,A,t.next_out-A):Av(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===cc?128:0)+(r.mode===Ep||r.mode===C0?256:0),(b===0&&A===0||e===by)&&te===Ku&&(te=hD),te},ND=t=>{if(Yu(t))return bo;let e=t.state;return e.window&&(e.window=null),t.state=null,Ku},SD=(t,e)=>{if(Yu(t))return bo;const r=t.state;return(r.wrap&2)===0?bo:(r.head=e,e.done=!1,Ku)},jD=(t,e)=>{const r=e.length;let n,a,o;return Yu(t)||(n=t.state,n.wrap!==0&&n.mode!==Am)?bo:n.mode===Am&&(a=1,a=Av(a,e,r,0),a!==n.check)?L4:(o=q4(t,e,r,r),o?(n.mode=D4,R4):(n.havedict=1,Ku))};var CD=O4,_D=M4,AD=F4,PD=yD,kD=B4,TD=wD,ED=ND,LD=SD,RD=jD,DD="pako inflate (from Nodeca project)",fc={inflateReset:CD,inflateReset2:_D,inflateResetKeep:AD,inflateInit:PD,inflateInit2:kD,inflate:TD,inflateEnd:ED,inflateGetHeader:LD,inflateSetDictionary:RD,inflateInfo:DD};function ID(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var FD=ID;const U4=Object.prototype.toString,{Z_NO_FLUSH:OD,Z_FINISH:MD,Z_OK:Ah,Z_STREAM_END:k0,Z_NEED_DICT:T0,Z_STREAM_ERROR:BD,Z_DATA_ERROR:Hy,Z_MEM_ERROR:qD}=A4;function Bh(t){this.options=P4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tD,this.strm.avail_out=0;let r=fc.inflateInit2(this.strm,e.windowBits);if(r!==Ah)throw new Error(Pv[r]);if(this.header=new FD,fc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=kv.string2buf(e.dictionary):U4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=fc.inflateSetDictionary(this.strm,e.dictionary),r!==Ah)))throw new Error(Pv[r])}Bh.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?MD:OD,U4.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=fc.inflate(r,u),o===T0&&a&&(o=fc.inflateSetDictionary(r,a),o===Ah?o=fc.inflate(r,u):o===Hy&&(o=T0));r.avail_in>0&&o===k0&&r.state.wrap>0&&t[r.next_in]!==0;)fc.inflateReset(r),o=fc.inflate(r,u);switch(o){case BD:case Hy:case T0:case qD:return this.onEnd(o),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||o===k0))if(this.options.to==="string"){let f=kv.utf8border(r.output,r.next_out),p=r.next_out-f,m=kv.buf2string(r.output,f);r.next_out=p,r.avail_out=n-p,p&&r.output.set(r.output.subarray(f,f+p),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===Ah&&c===0)){if(o===k0)return o=fc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Bh.prototype.onData=function(t){this.chunks.push(t)};Bh.prototype.onEnd=function(t){t===Ah&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=P4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function UD(t,e){const r=new Bh(e);if(r.push(t),r.err)throw r.msg||Pv[r.err];return r.result}var zD=Bh,$D=UD,VD={Inflate:zD,inflate:$D};const{Inflate:HD,inflate:WD}=VD;var Wy=HD,GD=WD;const z4=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;z4[t]=e}const Gy=4294967295;function KD(t,e,r){let n=t;for(let a=0;a<r;a++)n=z4[(n^e[a])&255]^n>>>8;return n}function QD(t,e){return(KD(Gy,t,e)^Gy)>>>0}function Ky(t,e,r){const n=t.readUint32(),a=QD(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function $4(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function V4(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function H4(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function W4(t,e,r,n,a){let o=0;if(r.length===0){for(;o<a;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=t[o]+(r[o]>>1)&255;for(;o<n;o++)e[o]=t[o]+(e[o-a]+r[o]>>1)&255}}function G4(t,e,r,n,a){let o=0;if(r.length===0){for(;o<a;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=t[o]+r[o]&255;for(;o<n;o++)e[o]=t[o]+ZD(e[o-a],r[o],r[o-a])&255}}function ZD(t,e,r){const n=t+e-r,a=Math.abs(n-t),o=Math.abs(n-e),u=Math.abs(n-r);return a<=o&&a<=u?t:o<=u?e:r}function YD(t,e,r,n,a,o){switch(t){case 0:$4(e,r,a);break;case 1:V4(e,r,a,o);break;case 2:H4(e,r,n,a);break;case 3:W4(e,r,n,a,o);break;case 4:G4(e,r,n,a,o);break;default:throw new Error(`Unsupported filter: ${t}`)}}const XD=new Uint16Array([255]),JD=new Uint8Array(XD.buffer),eI=JD[0]===255;function tI(t){const{data:e,width:r,height:n,channels:a,depth:o}=t,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(n*r*c);let p=0;for(let m=0;m<7;m++){const b=u[m],A=Math.ceil((r-b.x)/b.xStep),y=Math.ceil((n-b.y)/b.yStep);if(A<=0||y<=0)continue;const D=A*c,S=new Uint8Array(D);for(let E=0;E<y;E++){const _=e[p++],O=e.subarray(p,p+D);p+=D;const T=new Uint8Array(D);YD(_,O,T,S,D,c),S.set(T);for(let z=0;z<A;z++){const re=b.x+z*b.xStep,ae=b.y+E*b.yStep;if(!(re>=r||ae>=n))for(let W=0;W<c;W++)f[(ae*r+re)*c+W]=T[z*c+W]}}}if(o===16){const m=new Uint16Array(f.buffer);if(eI)for(let b=0;b<m.length;b++)m[b]=rI(m[b]);return m}else return f}function rI(t){return(t&255)<<8|t>>8&255}const nI=new Uint16Array([255]),sI=new Uint8Array(nI.buffer),iI=sI[0]===255,aI=new Uint8Array(0);function Qy(t){const{data:e,width:r,height:n,channels:a,depth:o}=t,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*r),f=new Uint8Array(n*c);let p=aI,m=0,b,A;for(let y=0;y<n;y++){switch(b=e.subarray(m+1,m+1+c),A=f.subarray(y*c,(y+1)*c),e[m]){case 0:$4(b,A,c);break;case 1:V4(b,A,c,u);break;case 2:H4(b,A,p,c);break;case 3:W4(b,A,p,c,u);break;case 4:G4(b,A,p,c,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=A,m+=c+1}if(o===16){const y=new Uint16Array(f.buffer);if(iI)for(let D=0;D<y.length;D++)y[D]=oI(y[D]);return y}else return f}function oI(t){return(t&255)<<8|t>>8&255}const Qp=Uint8Array.of(137,80,78,71,13,10,26,10);function Zy(t){if(!lI(t.readBytes(Qp.length)))throw new Error("wrong PNG signature")}function lI(t){if(t.length<Qp.length)return!1;for(let e=0;e<Qp.length;e++)if(t[e]!==Qp[e])return!1;return!0}const cI="tEXt",uI=0,K4=new TextDecoder("latin1");function dI(t){if(hI(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const fI=/^[\u0000-\u00FF]*$/;function hI(t){if(!fI.test(t))throw new Error("invalid latin1 text")}function pI(t,e,r){const n=Q4(e);t[n]=mI(e,r-n.length-1)}function Q4(t){for(t.mark();t.readByte()!==uI;);const e=t.offset;t.reset();const r=K4.decode(t.readBytes(e-t.offset-1));return t.skip(1),dI(r),r}function mI(t,e){return K4.decode(t.readBytes(e))}const Xa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},E0={UNKNOWN:-1,DEFLATE:0},Yy={UNKNOWN:-1,ADAPTIVE:0},L0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Rp={NONE:0,BACKGROUND:1,PREVIOUS:2},R0={SOURCE:0,OVER:1};class gI extends E1{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new Wy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=E0.UNKNOWN,this._filterMethod=Yy.UNKNOWN,this._interlaceMethod=L0.UNKNOWN,this._colorType=Xa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Zy(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(Zy(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case cI:pI(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Ky(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Ky(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=vI(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case Xa.GREYSCALE:n=1;break;case Xa.TRUECOLOUR:n=3;break;case Xa.INDEXED_COLOUR:n=1;break;case Xa.GREYSCALE_ALPHA:n=2;break;case Xa.TRUECOLOUR_ALPHA:n=4;break;case Xa.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==E0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<r;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Xa.GREYSCALE:case Xa.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case Xa.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Xa.UNKNOWN:case Xa.GREYSCALE_ALPHA:case Xa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=Q4(this),n=this.readUint8();if(n!==E0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const a=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:GD(a)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=Qy({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(n,a,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case Rp.NONE:break;case Rp.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)n.data[u+c]=0}break;case Rp.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,a=(o,u)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+u)*this._png.channels,f=(o*r.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(r.blendOp){case R0.SOURCE:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++)e.data[c+p]=r.data[f+p]}break;case R0.OVER:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++){const m=r.data[f+this._png.channels-1]/n,b=p%(this._png.channels-1)===0?1:r.data[f+p],A=Math.floor(m*b+(1-m)*e.data[c+p]);e.data[c+p]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Yy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===L0.NO_INTERLACE)this._png.data=Qy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===L0.ADAM7)this._png.data=tI({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Rp.NONE,blendOp:R0.SOURCE,data:e}),this._inflator=new Wy,this._writingDataChunks=!1}}function vI(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Xy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Xy||(Xy={}));function xI(t,e){return new gI(t,e).decode()}var Br=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function D0(){Br.console&&typeof Br.console.log=="function"&&Br.console.log.apply(Br.console,arguments)}var Zn={log:D0,warn:function(t){Br.console&&(typeof Br.console.warn=="function"?Br.console.warn.apply(Br.console,arguments):D0.call(null,arguments))},error:function(t){Br.console&&(typeof Br.console.error=="function"?Br.console.error.apply(Br.console,arguments):D0(t))}};function I0(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Ru(n.response,e,r)},n.onerror=function(){Zn.error("could not download file")},n.send()}function Jy(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ru=Br.saveAs||((typeof window>"u"?"undefined":zn(window))!=="object"||window!==Br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Br.URL||Br.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?Jy(a.href)?I0(t,e,r):Dp(a,a.target="_blank"):Dp(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Dp(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Jy(t))I0(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Dp(n)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:zn(o)!=="object"&&(Zn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return I0(t,e,r);var a=t.type==="application/octet-stream",o=/constructor/i.test(Br.HTMLElement)||Br.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":zn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},c.readAsDataURL(t)}else{var f=Br.URL||Br.webkitURL,p=f.createObjectURL(t);n?n.location=p:location.href=p,n=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function Z4(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,o=r[n].process,u=a.exec(t);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+c+f+p}}var Zp=Br.atob.bind(Br),e5=Br.btoa.bind(Br);function F0(t,e){var r=t[0],n=t[1],a=t[2],o=t[3];r=ea(r,n,a,o,e[0],7,-680876936),o=ea(o,r,n,a,e[1],12,-389564586),a=ea(a,o,r,n,e[2],17,606105819),n=ea(n,a,o,r,e[3],22,-1044525330),r=ea(r,n,a,o,e[4],7,-176418897),o=ea(o,r,n,a,e[5],12,1200080426),a=ea(a,o,r,n,e[6],17,-1473231341),n=ea(n,a,o,r,e[7],22,-45705983),r=ea(r,n,a,o,e[8],7,1770035416),o=ea(o,r,n,a,e[9],12,-1958414417),a=ea(a,o,r,n,e[10],17,-42063),n=ea(n,a,o,r,e[11],22,-1990404162),r=ea(r,n,a,o,e[12],7,1804603682),o=ea(o,r,n,a,e[13],12,-40341101),a=ea(a,o,r,n,e[14],17,-1502002290),r=ta(r,n=ea(n,a,o,r,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ta(o,r,n,a,e[6],9,-1069501632),a=ta(a,o,r,n,e[11],14,643717713),n=ta(n,a,o,r,e[0],20,-373897302),r=ta(r,n,a,o,e[5],5,-701558691),o=ta(o,r,n,a,e[10],9,38016083),a=ta(a,o,r,n,e[15],14,-660478335),n=ta(n,a,o,r,e[4],20,-405537848),r=ta(r,n,a,o,e[9],5,568446438),o=ta(o,r,n,a,e[14],9,-1019803690),a=ta(a,o,r,n,e[3],14,-187363961),n=ta(n,a,o,r,e[8],20,1163531501),r=ta(r,n,a,o,e[13],5,-1444681467),o=ta(o,r,n,a,e[2],9,-51403784),a=ta(a,o,r,n,e[7],14,1735328473),r=ra(r,n=ta(n,a,o,r,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ra(o,r,n,a,e[8],11,-2022574463),a=ra(a,o,r,n,e[11],16,1839030562),n=ra(n,a,o,r,e[14],23,-35309556),r=ra(r,n,a,o,e[1],4,-1530992060),o=ra(o,r,n,a,e[4],11,1272893353),a=ra(a,o,r,n,e[7],16,-155497632),n=ra(n,a,o,r,e[10],23,-1094730640),r=ra(r,n,a,o,e[13],4,681279174),o=ra(o,r,n,a,e[0],11,-358537222),a=ra(a,o,r,n,e[3],16,-722521979),n=ra(n,a,o,r,e[6],23,76029189),r=ra(r,n,a,o,e[9],4,-640364487),o=ra(o,r,n,a,e[12],11,-421815835),a=ra(a,o,r,n,e[15],16,530742520),r=na(r,n=ra(n,a,o,r,e[2],23,-995338651),a,o,e[0],6,-198630844),o=na(o,r,n,a,e[7],10,1126891415),a=na(a,o,r,n,e[14],15,-1416354905),n=na(n,a,o,r,e[5],21,-57434055),r=na(r,n,a,o,e[12],6,1700485571),o=na(o,r,n,a,e[3],10,-1894986606),a=na(a,o,r,n,e[10],15,-1051523),n=na(n,a,o,r,e[1],21,-2054922799),r=na(r,n,a,o,e[8],6,1873313359),o=na(o,r,n,a,e[15],10,-30611744),a=na(a,o,r,n,e[6],15,-1560198380),n=na(n,a,o,r,e[13],21,1309151649),r=na(r,n,a,o,e[4],6,-145523070),o=na(o,r,n,a,e[11],10,-1120210379),a=na(a,o,r,n,e[2],15,718787259),n=na(n,a,o,r,e[9],21,-343485551),t[0]=Zc(r,t[0]),t[1]=Zc(n,t[1]),t[2]=Zc(a,t[2]),t[3]=Zc(o,t[3])}function ag(t,e,r,n,a,o){return e=Zc(Zc(e,t),Zc(n,o)),Zc(e<<a|e>>>32-a,r)}function ea(t,e,r,n,a,o,u){return ag(e&r|~e&n,t,e,a,o,u)}function ta(t,e,r,n,a,o,u){return ag(e&n|r&~n,t,e,a,o,u)}function ra(t,e,r,n,a,o,u){return ag(e^r^n,t,e,a,o,u)}function na(t,e,r,n,a,o,u){return ag(r^(e|~n),t,e,a,o,u)}function Y4(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)F0(n,yI(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(F0(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,F0(n,a),n}function yI(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var t5="0123456789abcdef".split("");function bI(t){for(var e="",r=0;r<4;r++)e+=t5[t>>8*r+4&15]+t5[t>>8*r&15];return e}function wI(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Tv(t){return Y4(t).map(wI).join("")}var NI=(function(t){for(var e=0;e<t.length;e++)t[e]=bI(t[e]);return t.join("")})(Y4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zc(t,e){if(NI){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}function Ev(t,e){var r,n,a,o;if(t!==r){for(var u=(a=t,o=1+(256/t.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var p=0;for(f=0;f<256;f++){var m=c[f];p=(p+m+u.charCodeAt(f))%256,c[f]=c[p],c[p]=m}r=t,n=c}else c=n;var b=e.length,A=0,y=0,D="";for(f=0;f<b;f++)y=(y+(m=c[A=(A+1)%256]))%256,c[A]=c[y],c[y]=m,u=c[(c[A]+c[y])%256],D+=String.fromCharCode(e.charCodeAt(f)^u);return D}var r5={print:4,modify:8,copy:16,"annot-forms":32};function Ed(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(c){if(r5.perm!==void 0)throw new Error("Invalid permission: "+c);a+=r5[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Tv(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ev(this.encryptionKey,this.padding)}function Ld(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function n5(t){if(zn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!a],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[r]){var u=e[r][o];try{u[0].apply(t,n)}catch(c){Br.console&&Zn.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Pm(t){if(!(this instanceof Pm))return new Pm(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function X4(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Du(t,e,r,n,a){if(!(this instanceof Du))return new Du(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,X4.call(this,n,a)}function Id(t,e,r,n,a){if(!(this instanceof Id))return new Id(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,X4.call(this,n,a)}function sr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,p="S",m=null;zn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,o=t.compress||t.compressPdf||o,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),p=t.defaultPathOperation||"S"),u=t.filters||(o===!0?["FlateEncode"]:u),n=n||"mm",r=(""+(r||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,A={},y={internal:{},__private__:{}};y.__private__.PubSub=n5;var D="1.3",S=y.__private__.getPdfVersion=function(){return D};y.__private__.setPdfVersion=function(w){D=w};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return E};var _=y.__private__.getPageFormat=function(w){return E[w]};a=a||"a4";var O="compat",T="advanced",z=O;function re(){this.saveGraphicsState(),ee(new Kt(Et,0,0,-Et,0,Hi()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),p="n",z=T}function ae(){this.restoreGraphicsState(),p="S",z=O}var W=y.__private__.combineFontStyleAndFontWeight=function(w,$){if(w=="bold"&&$=="normal"||w=="bold"&&$==400||w=="normal"&&$=="italic"||w=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(w=$==400||$==="normal"?w==="italic"?"italic":"normal":$!=700&&$!=="bold"||w!=="normal"?($==700?"bold":$)+""+w:"bold"),w};y.advancedAPI=function(w){var $=z===O;return $&&re.call(this),typeof w!="function"||(w(this),$&&ae.call(this)),this},y.compatAPI=function(w){var $=z===T;return $&&ae.call(this),typeof w!="function"||(w(this),$&&re.call(this)),this},y.isAdvancedAPI=function(){return z===T};var te,Q=function(w){if(z!==T)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fe=y.roundToPrecision=y.__private__.roundToPrecision=function(w,$){var de=e||$;if(isNaN(w)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(de).replace(/0+$/,"")};te=y.hpf=y.__private__.hpf=typeof f=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(w,f)}:f==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(w,16)};var U=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return fe(w,2)},F=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return fe(w,3)},X=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return z===O?w*Et:z===T?w:void 0},Y=function(w){return X((function($){return z===O?Hi()-$:z===T?$:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var Ne,be="00000000000000000000000000000000",we=y.__private__.getFileId=function(){return be},se=y.__private__.setFileId=function(w){return be=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():be.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(bs=new Ed(m.userPermissions,m.userPassword,m.ownerPassword,be)),be};y.setFileId=function(w){return se(w),this},y.getFileId=function(){return we()};var me=y.__private__.convertDateToPDFDate=function(w){var $=w.getTimezoneOffset(),de=$<0?"+":"-",Se=Math.floor(Math.abs($/60)),xe=Math.abs($%60),qe=[de,M(Se),"'",M(xe),"'"].join("");return["D:",w.getFullYear(),M(w.getMonth()+1),M(w.getDate()),M(w.getHours()),M(w.getMinutes()),M(w.getSeconds()),qe].join("")},I=y.__private__.convertPDFDateToDate=function(w){var $=parseInt(w.substr(2,4),10),de=parseInt(w.substr(6,2),10)-1,Se=parseInt(w.substr(8,2),10),xe=parseInt(w.substr(10,2),10),qe=parseInt(w.substr(12,2),10),$e=parseInt(w.substr(14,2),10);return new Date($,de,Se,xe,qe,$e,0)},j=y.__private__.setCreationDate=function(w){var $;if(w===void 0&&(w=new Date),w instanceof Date)$=me(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=w}return Ne=$},x=y.__private__.getCreationDate=function(w){var $=Ne;return w==="jsDate"&&($=I(Ne)),$};y.setCreationDate=function(w){return j(w),this},y.getCreationDate=function(w){return x(w)};var C,M=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},H=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ie=0,oe=[],ve=[],Ce=0,Le=[],Ge=[],lt=!1,tt=ve;y.__private__.setCustomOutputDestination=function(w){lt=!0,tt=w};var ct=function(w){lt||(tt=w)};y.__private__.resetCustomOutputDestination=function(){lt=!1,tt=ve};var ee=y.__private__.out=function(w){return w=w.toString(),Ce+=w.length+1,tt.push(w),tt},Re=y.__private__.write=function(w){return ee(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},We=y.__private__.getArrayBuffer=function(w){for(var $=w.length,de=new ArrayBuffer($),Se=new Uint8Array(de);$--;)Se[$]=w.charCodeAt($);return de},Ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Ee};var rt=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return rt=z===T?w/Et:w,this};var At,Ct=y.__private__.getFontSize=y.getFontSize=function(){return z===O?rt:rt*Et},ue=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return ue=w,this},y.__private__.getR2L=y.getR2L=function(){return ue};var he,Ie=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))At=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');At=w}else At=parseInt(w,10)};y.__private__.getZoomMode=function(){return At};var Ze,Ve=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');he=w};y.__private__.getPageMode=function(){return he};var ze=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ze=w};y.__private__.getLayoutMode=function(){return Ze},y.__private__.setDisplayMode=y.setDisplayMode=function(w,$,de){return Ie(w),ze($),Ve(de),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[w]},y.__private__.getDocumentProperties=function(){return ot},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var $ in ot)ot.hasOwnProperty($)&&w[$]&&(ot[$]=w[$]);return this},y.__private__.setDocumentProperty=function(w,$){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[w]=$};var ft,Et,St,yn,Cr,yr={},ur={},Wr=[],Dt={},_r={},ir={},gr={},ln=null,mr=0,Vt=[],fr=new n5(y),ss=t.hotfixes||[],En={},Js={},ys=[],Kt=function w($,de,Se,xe,qe,$e){if(!(this instanceof w))return new w($,de,Se,xe,qe,$e);isNaN($)&&($=1),isNaN(de)&&(de=0),isNaN(Se)&&(Se=0),isNaN(xe)&&(xe=1),isNaN(qe)&&(qe=0),isNaN($e)&&($e=0),this._matrix=[$,de,Se,xe,qe,$e]};Object.defineProperty(Kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Kt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(w)},Kt.prototype.multiply=function(w){var $=w.sx*this.sx+w.shy*this.shx,de=w.sx*this.shy+w.shy*this.sy,Se=w.shx*this.sx+w.sy*this.shx,xe=w.shx*this.shy+w.sy*this.sy,qe=w.tx*this.sx+w.ty*this.shx+this.tx,$e=w.tx*this.shy+w.ty*this.sy+this.ty;return new Kt($,de,Se,xe,qe,$e)},Kt.prototype.decompose=function(){var w=this.sx,$=this.shy,de=this.shx,Se=this.sy,xe=this.tx,qe=this.ty,$e=Math.sqrt(w*w+$*$),gt=(w/=$e)*de+($/=$e)*Se;de-=w*gt,Se-=$*gt;var jt=Math.sqrt(de*de+Se*Se);return gt/=jt,w*(Se/=jt)<$*(de/=jt)&&(w=-w,$=-$,gt=-gt,$e=-$e),{scale:new Kt($e,0,0,jt,0,0),translate:new Kt(1,0,0,1,xe,qe),rotate:new Kt(w,$,-$,w,0,0),skew:new Kt(1,0,gt,1,0,0)}},Kt.prototype.toString=function(w){return this.join(" ")},Kt.prototype.inversed=function(){var w=this.sx,$=this.shy,de=this.shx,Se=this.sy,xe=this.tx,qe=this.ty,$e=1/(w*Se-$*de),gt=Se*$e,jt=-$*$e,Xt=-de*$e,dr=w*$e;return new Kt(gt,jt,Xt,dr,-gt*xe-Xt*qe,-jt*xe-dr*qe)},Kt.prototype.applyToPoint=function(w){var $=w.x*this.sx+w.y*this.shx+this.tx,de=w.x*this.shy+w.y*this.sy+this.ty;return new as($,de)},Kt.prototype.applyToRectangle=function(w){var $=this.applyToPoint(w),de=this.applyToPoint(new as(w.x+w.w,w.y+w.h));return new ri($.x,$.y,de.x-$.x,de.y-$.y)},Kt.prototype.clone=function(){var w=this.sx,$=this.shy,de=this.shx,Se=this.sy,xe=this.tx,qe=this.ty;return new Kt(w,$,de,Se,xe,qe)},y.Matrix=Kt;var _n=y.matrixMult=function(w,$){return $.multiply(w)},qt=new Kt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=qt;var br=function(w,$){if(!_r[w]){var de=($ instanceof Du?"Sh":"P")+(Object.keys(Dt).length+1).toString(10);$.id=de,_r[w]=de,Dt[de]=$,fr.publish("addPattern",$)}};y.ShadingPattern=Du,y.TilingPattern=Id,y.addShadingPattern=function(w,$){return Q("addShadingPattern()"),br(w,$),this},y.beginTilingPattern=function(w){Q("beginTilingPattern()"),Ri(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,$){Q("endTilingPattern()"),$.stream=Ge[C].join(`
`),br(w,$),fr.publish("endTilingPattern",$),ys.pop().restore()};var hr,Pt=y.__private__.newObject=function(){var w=vr();return ut(w,!0),w},vr=y.__private__.newObjectDeferred=function(){return ie++,oe[ie]=function(){return Ce},ie},ut=function(w,$){return $=typeof $=="boolean"&&$,oe[w]=Ce,$&&ee(w+" 0 obj"),w},et=y.__private__.newAdditionalObject=function(){var w={objId:vr(),content:""};return Le.push(w),w},it=vr(),Qe=vr(),st=y.__private__.decodeColorString=function(w){var $=w.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var de=parseFloat($[0]);$=[de,de,de,"r"]}for(var Se="#",xe=0;xe<3;xe++)Se+=("0"+Math.floor(255*parseFloat($[xe])).toString(16)).slice(-2);return Se},vt=y.__private__.encodeColorString=function(w){var $;typeof w=="string"&&(w={ch1:w});var de=w.ch1,Se=w.ch2,xe=w.ch3,qe=w.ch4,$e=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var gt=new Z4(de);if(gt.ok)de=gt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var jt=parseInt(de.substr(1),16);de=jt>>16&255,Se=jt>>8&255,xe=255&jt}if(Se===void 0||qe===void 0&&de===Se&&Se===xe)$=typeof de=="string"?de+" "+$e[0]:w.precision===2?U(de/255)+" "+$e[0]:F(de/255)+" "+$e[0];else if(qe===void 0||zn(qe)==="object"){if(qe&&!isNaN(qe.a)&&qe.a===0)return["1.","1.","1.",$e[1]].join(" ");$=typeof de=="string"?[de,Se,xe,$e[1]].join(" "):w.precision===2?[U(de/255),U(Se/255),U(xe/255),$e[1]].join(" "):[F(de/255),F(Se/255),F(xe/255),$e[1]].join(" ")}else $=typeof de=="string"?[de,Se,xe,qe,$e[2]].join(" "):w.precision===2?[U(de),U(Se),U(xe),U(qe),$e[2]].join(" "):[F(de),F(Se),F(xe),F(qe),$e[2]].join(" ");return $},wt=y.__private__.getFilters=function(){return u},kt=y.__private__.putStream=function(w){var $=(w=w||{}).data||"",de=w.filters||wt(),Se=w.alreadyAppliedFilters||[],xe=w.addLength1||!1,qe=$.length,$e=w.objectId,gt=function(Vn){return Vn};if(m!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(gt=bs.encryptor($e,0));var jt={};de===!0&&(de=["FlateEncode"]);var Xt=w.additionalKeyValues||[],dr=(jt=sr.API.processDataByFilters!==void 0?sr.API.processDataByFilters($,de):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(jt.data.length!==0&&(Xt.push({key:"Length",value:jt.data.length}),xe===!0&&Xt.push({key:"Length1",value:qe})),dr.length!=0)if(dr.split("/").length-1==1)Xt.push({key:"Filter",value:dr});else{Xt.push({key:"Filter",value:"["+dr+"]"});for(var Er=0;Er<Xt.length;Er+=1)if(Xt[Er].key==="DecodeParms"){for(var dn=[],pn=0;pn<jt.reverseChain.split("/").length-1;pn+=1)dn.push("null");dn.push(Xt[Er].value),Xt[Er].value="["+dn.join(" ")+"]"}}ee("<<");for(var cn=0;cn<Xt.length;cn++)ee("/"+Xt[cn].key+" "+Xt[cn].value);ee(">>"),jt.data.length!==0&&(ee("stream"),ee(gt(jt.data)),ee("endstream"))},Lt=y.__private__.putPage=function(w){var $=w.number,de=w.data,Se=w.objId,xe=w.contentsObjId;ut(Se,!0),ee("<</Type /Page"),ee("/Parent "+w.rootDictionaryObjId+" 0 R"),ee("/Resources "+w.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(te(w.mediaBox.bottomLeftX))+" "+parseFloat(te(w.mediaBox.bottomLeftY))+" "+te(w.mediaBox.topRightX)+" "+te(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&ee("/CropBox ["+te(w.cropBox.bottomLeftX)+" "+te(w.cropBox.bottomLeftY)+" "+te(w.cropBox.topRightX)+" "+te(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&ee("/BleedBox ["+te(w.bleedBox.bottomLeftX)+" "+te(w.bleedBox.bottomLeftY)+" "+te(w.bleedBox.topRightX)+" "+te(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&ee("/TrimBox ["+te(w.trimBox.bottomLeftX)+" "+te(w.trimBox.bottomLeftY)+" "+te(w.trimBox.topRightX)+" "+te(w.trimBox.topRightY)+"]"),w.artBox!==null&&ee("/ArtBox ["+te(w.artBox.bottomLeftX)+" "+te(w.artBox.bottomLeftY)+" "+te(w.artBox.topRightX)+" "+te(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&ee("/UserUnit "+w.userUnit),fr.publish("putPage",{objId:Se,pageContext:Vt[$],pageNumber:$,page:de}),ee("/Contents "+xe+" 0 R"),ee(">>"),ee("endobj");var qe=de.join(`
`);return z===T&&(qe+=`
Q`),ut(xe,!0),kt({data:qe,filters:wt(),objectId:xe}),ee("endobj"),Se},It=y.__private__.putPages=function(){var w,$,de=[];for(w=1;w<=mr;w++)Vt[w].objId=vr(),Vt[w].contentsObjId=vr();for(w=1;w<=mr;w++)de.push(Lt({number:w,data:Ge[w],objId:Vt[w].objId,contentsObjId:Vt[w].contentsObjId,mediaBox:Vt[w].mediaBox,cropBox:Vt[w].cropBox,bleedBox:Vt[w].bleedBox,trimBox:Vt[w].trimBox,artBox:Vt[w].artBox,userUnit:Vt[w].userUnit,rootDictionaryObjId:it,resourceDictionaryObjId:Qe}));ut(it,!0),ee("<</Type /Pages");var Se="/Kids [";for($=0;$<mr;$++)Se+=de[$]+" 0 R ";ee(Se+"]"),ee("/Count "+mr),ee(">>"),ee("endobj"),fr.publish("postPutPages")},$t=function(w){fr.publish("putFont",{font:w,out:ee,newObject:Pt,putStream:kt}),w.isAlreadyPutted!==!0&&(w.objectNumber=Pt(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Ld(w.postScriptName)),ee("/Subtype /Type1"),typeof w.encoding=="string"&&ee("/Encoding /"+w.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Ht=function(w){w.objectNumber=Pt();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[te(w.x),te(w.y),te(w.x+w.width),te(w.y+w.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var de=w.pages[1].join(`
`);kt({data:de,additionalKeyValues:$,objectId:w.objectNumber}),ee("endobj")},Qt=function(w,$){$||($=21);var de=Pt(),Se=(function($e,gt){var jt,Xt=[],dr=1/(gt-1);for(jt=0;jt<1;jt+=dr)Xt.push(jt);if(Xt.push(1),$e[0].offset!=0){var Er={offset:0,color:$e[0].color};$e.unshift(Er)}if($e[$e.length-1].offset!=1){var dn={offset:1,color:$e[$e.length-1].color};$e.push(dn)}for(var pn="",cn=0,Vn=0;Vn<Xt.length;Vn++){for(jt=Xt[Vn];jt>$e[cn+1].offset;)cn++;var vn=$e[cn].offset,Rt=(jt-vn)/($e[cn+1].offset-vn),fi=$e[cn].color,hi=$e[cn+1].color;pn+=H(Math.round((1-Rt)*fi[0]+Rt*hi[0]).toString(16))+H(Math.round((1-Rt)*fi[1]+Rt*hi[1]).toString(16))+H(Math.round((1-Rt)*fi[2]+Rt*hi[2]).toString(16))}return pn.trim()})(w.colors,$),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+$+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kt({data:Se,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),ee("endobj"),w.objectNumber=Pt(),ee("<< /ShadingType "+w.type),ee("/ColorSpace /DeviceRGB");var qe="/Coords ["+te(parseFloat(w.coords[0]))+" "+te(parseFloat(w.coords[1]))+" ";w.type===2?qe+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3])):qe+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3]))+" "+te(parseFloat(w.coords[4]))+" "+te(parseFloat(w.coords[5])),ee(qe+="]"),w.matrix&&ee("/Matrix ["+w.matrix.toString()+"]"),ee("/Function "+de+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Yt=function(w,$){var de=vr(),Se=Pt();$.push({resourcesOid:de,objectOid:Se}),w.objectNumber=Se;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+w.boundingBox.map(te).join(" ")+"]"}),xe.push({key:"XStep",value:te(w.xStep)}),xe.push({key:"YStep",value:te(w.yStep)}),xe.push({key:"Resources",value:de+" 0 R"}),w.matrix&&xe.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),kt({data:w.stream,additionalKeyValues:xe,objectId:w.objectNumber}),ee("endobj")},Ar=function(w){for(var $ in w.objectNumber=Pt(),ee("<<"),w)switch($){case"opacity":ee("/ca "+U(w[$]));break;case"stroke-opacity":ee("/CA "+U(w[$]))}ee(">>"),ee("endobj")},wr=function(w){ut(w.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var $ in ee("/Font <<"),yr)yr.hasOwnProperty($)&&(b===!1||b===!0&&A.hasOwnProperty($))&&ee("/"+$+" "+yr[$].objectNumber+" 0 R");ee(">>")})(),(function(){if(Object.keys(Dt).length>0){for(var $ in ee("/Shading <<"),Dt)Dt.hasOwnProperty($)&&Dt[$]instanceof Du&&Dt[$].objectNumber>=0&&ee("/"+$+" "+Dt[$].objectNumber+" 0 R");fr.publish("putShadingPatternDict"),ee(">>")}})(),(function($){if(Object.keys(Dt).length>0){for(var de in ee("/Pattern <<"),Dt)Dt.hasOwnProperty(de)&&Dt[de]instanceof y.TilingPattern&&Dt[de].objectNumber>=0&&Dt[de].objectNumber<$&&ee("/"+de+" "+Dt[de].objectNumber+" 0 R");fr.publish("putTilingPatternDict"),ee(">>")}})(w.objectOid),(function(){if(Object.keys(ir).length>0){var $;for($ in ee("/ExtGState <<"),ir)ir.hasOwnProperty($)&&ir[$].objectNumber>=0&&ee("/"+$+" "+ir[$].objectNumber+" 0 R");fr.publish("putGStateDict"),ee(">>")}})(),(function(){for(var $ in ee("/XObject <<"),En)En.hasOwnProperty($)&&En[$].objectNumber>=0&&ee("/"+$+" "+En[$].objectNumber+" 0 R");fr.publish("putXobjectDict"),ee(">>")})(),ee(">>"),ee("endobj")},zr=function(w){ur[w.fontName]=ur[w.fontName]||{},ur[w.fontName][w.fontStyle]=w.id},Pr=function(w,$,de,Se,xe){var qe={id:"F"+(Object.keys(yr).length+1).toString(10),postScriptName:w,fontName:$,fontStyle:de,encoding:Se,isStandardFont:xe||!1,metadata:{}};return fr.publish("addFont",{font:qe,instance:this}),yr[qe.id]=qe,zr(qe),qe.id},tr=y.__private__.pdfEscape=y.pdfEscape=function(w,$){return(function(de,Se){var xe,qe,$e,gt,jt,Xt,dr,Er,dn;if($e=(Se=Se||{}).sourceEncoding||"Unicode",jt=Se.outputEncoding,(Se.autoencode||jt)&&yr[ft].metadata&&yr[ft].metadata[$e]&&yr[ft].metadata[$e].encoding&&(gt=yr[ft].metadata[$e].encoding,!jt&&yr[ft].encoding&&(jt=yr[ft].encoding),!jt&&gt.codePages&&(jt=gt.codePages[0]),typeof jt=="string"&&(jt=gt[jt]),jt)){for(dr=!1,Xt=[],xe=0,qe=de.length;xe<qe;xe++)(Er=jt[de.charCodeAt(xe)])?Xt.push(String.fromCharCode(Er)):Xt.push(de[xe]),Xt[xe].charCodeAt(0)>>8&&(dr=!0);de=Xt.join("")}for(xe=de.length;dr===void 0&&xe!==0;)de.charCodeAt(xe-1)>>8&&(dr=!0),xe--;if(!dr)return de;for(Xt=Se.noBOM?[]:[254,255],xe=0,qe=de.length;xe<qe;xe++){if((dn=(Er=de.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xt.push(dn),Xt.push(Er-(dn<<8))}return String.fromCharCode.apply(void 0,Xt)})(w,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ar=y.__private__.beginPage=function(w){Ge[++mr]=[],Vt[mr]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},Or(mr),ct(Ge[C])},rr=function(w,$){var de,Se,xe;switch(r=$||r,typeof w=="string"&&(de=_(w.toLowerCase()),Array.isArray(de)&&(Se=de[0],xe=de[1])),Array.isArray(w)&&(Se=w[0]*Et,xe=w[1]*Et),isNaN(Se)&&(Se=a[0],xe=a[1]),(Se>14400||xe>14400)&&(Zn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),xe=Math.min(14400,xe)),a=[Se,xe],r.substr(0,1)){case"l":xe>Se&&(a=[xe,Se]);break;case"p":Se>xe&&(a=[xe,Se])}ar(a),_t(wi),ee(ui),Bl!==0&&ee(Bl+" J"),So!==0&&ee(So+" j"),fr.publish("addPage",{pageNumber:mr})},Nr=function(w){w>0&&w<=mr&&(Ge.splice(w,1),Vt.splice(w,1),mr--,C>mr&&(C=mr),this.setPage(C))},Or=function(w){w>0&&w<=mr&&(C=w)},Xr=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ge.length-1},Us=function(w,$,de){var Se,xe=void 0;return de=de||{},w=w!==void 0?w:yr[ft].fontName,$=$!==void 0?$:yr[ft].fontStyle,Se=w.toLowerCase(),ur[Se]!==void 0&&ur[Se][$]!==void 0?xe=ur[Se][$]:ur[w]!==void 0&&ur[w][$]!==void 0?xe=ur[w][$]:de.disableWarning===!1&&Zn.warn("Unable to look up font label for font '"+w+"', '"+$+"'. Refer to getFontList() for available fonts."),xe||de.noFallback||(xe=ur.times[$])==null&&(xe=ur.times.normal),xe},bn=y.__private__.putInfo=function(){var w=Pt(),$=function(Se){return Se};for(var de in m!==null&&($=bs.encryptor(w,0)),ee("<<"),ee("/Producer ("+tr($("jsPDF "+sr.version))+")"),ot)ot.hasOwnProperty(de)&&ot[de]&&ee("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+tr($(ot[de]))+")");ee("/CreationDate ("+tr($(Ne))+")"),ee(">>"),ee("endobj")},ei=y.__private__.putCatalog=function(w){var $=(w=w||{}).rootDictionaryObjId||it;switch(Pt(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+$+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+At;de.substr(de.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+U(At)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}he&&ee("/PageMode /"+he),fr.publish("putCatalog"),ee(">>"),ee("endobj")},Gn=y.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(ie+1)),ee("/Root "+ie+" 0 R"),ee("/Info "+(ie-1)+" 0 R"),m!==null&&ee("/Encrypt "+bs.oid+" 0 R"),ee("/ID [ <"+be+"> <"+be+"> ]"),ee(">>")},Gr=y.__private__.putHeader=function(){ee("%PDF-"+D),ee("%")},Fn=y.__private__.putXRef=function(){var w="0000000000";ee("xref"),ee("0 "+(ie+1)),ee("0000000000 65535 f ");for(var $=1;$<=ie;$++)typeof oe[$]=="function"?ee((w+oe[$]()).slice(-10)+" 00000 n "):oe[$]!==void 0?ee((w+oe[$]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},is=y.__private__.buildDocument=function(){var w;ie=0,Ce=0,ve=[],oe=[],Le=[],it=vr(),Qe=vr(),ct(ve),fr.publish("buildDocument"),Gr(),It(),(function(){fr.publish("putAdditionalObjects");for(var de=0;de<Le.length;de++){var Se=Le[de];ut(Se.objId,!0),ee(Se.content),ee("endobj")}fr.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var de in yr)yr.hasOwnProperty(de)&&(b===!1||b===!0&&A.hasOwnProperty(de))&&$t(yr[de])})(),(function(){var de;for(de in ir)ir.hasOwnProperty(de)&&Ar(ir[de])})(),(function(){for(var de in En)En.hasOwnProperty(de)&&Ht(En[de])})(),(function(de){var Se;for(Se in Dt)Dt.hasOwnProperty(Se)&&(Dt[Se]instanceof Du?Qt(Dt[Se]):Dt[Se]instanceof Id&&Yt(Dt[Se],de))})(w),fr.publish("putResources"),w.forEach(wr),wr({resourcesOid:Qe,objectOid:Number.MAX_SAFE_INTEGER}),fr.publish("postPutResources"),m!==null&&(bs.oid=Pt(),ee("<<"),ee("/Filter /Standard"),ee("/V "+bs.v),ee("/R "+bs.r),ee("/U <"+bs.toHexString(bs.U)+">"),ee("/O <"+bs.toHexString(bs.O)+">"),ee("/P "+bs.P),ee(">>"),ee("endobj")),bn(),ei();var $=Ce;return Fn(),Gn(),ee("startxref"),ee(""+$),ee("%%EOF"),ct(Ge[C]),ve.join(`
`)},bi=y.__private__.getBlob=function(w){return new Blob([We(w)],{type:"application/pdf"})},wo=y.output=y.__private__.output=(hr=function(w,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",w){case void 0:return is();case"save":y.save($.filename);break;case"arraybuffer":return We(is());case"blob":return bi(is());case"bloburi":case"bloburl":if(Br.URL!==void 0&&typeof Br.URL.createObjectURL=="function")return Br.URL&&Br.URL.createObjectURL(bi(is()))||void 0;Zn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",Se=is();try{de=e5(Se)}catch{de=e5(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+$.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(xe=$.pdfObjectUrl,qe="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",gt=Br.open();return gt!==null&&gt.document.write($e),gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',Xt=Br.open();if(Xt!==null){Xt.document.write(jt);var dr=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=$.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(dr.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',dn=Br.open();if(dn!==null&&(dn.document.write(Er),dn.document.title=$.filename),dn||typeof safari>"u")return dn;break;case"datauri":case"dataurl":return Br.document.location.href=this.output("datauristring",$);default:return null}},hr.foo=function(){try{return hr.apply(this,arguments)}catch(de){var w=de.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var $="Error in function "+w.split(`
`)[0].split("<")[0]+": "+de.message;if(!Br.console)throw new Error($);Br.console.error($,de),Br.alert&&alert($)}},hr.foo.bar=hr,hr.foo),Ui=function(w){return Array.isArray(ss)===!0&&ss.indexOf(w)>-1};switch(n){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=Ui("px_scaling")==1?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Et=n}var bs=null;j(),se();var da=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Vt[w].objId,pageNumber:w,pageContext:Vt[w]}},Ol=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Vt)if(Vt[$].objId===w)break;return da($)},zs=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Vt[C].objId,pageNumber:C,pageContext:Vt[C]}};y.addPage=function(){return rr.apply(this,arguments),this},y.setPage=function(){return Or.apply(this,arguments),ct.call(this,Ge[C]),this},y.insertPage=function(w){return this.addPage(),this.movePage(C,w),this},y.movePage=function(w,$){var de,Se;if(w>$){de=Ge[w],Se=Vt[w];for(var xe=w;xe>$;xe--)Ge[xe]=Ge[xe-1],Vt[xe]=Vt[xe-1];Ge[$]=de,Vt[$]=Se,this.setPage($)}else if(w<$){de=Ge[w],Se=Vt[w];for(var qe=w;qe<$;qe++)Ge[qe]=Ge[qe+1],Vt[qe]=Vt[qe+1];Ge[$]=de,Vt[$]=Se,this.setPage($)}return this},y.deletePage=function(){return Nr.apply(this,arguments),this},y.__private__.text=y.text=function(w,$,de,Se,xe){var qe,$e,gt,jt,Xt,dr,Er,dn,pn,cn=(Se=Se||{}).scope||this;if(typeof w=="number"&&typeof $=="number"&&(typeof de=="string"||Array.isArray(de))){var Vn=de;de=$,$=w,w=Vn}if(arguments[3]instanceof Kt==0?(gt=arguments[4],jt=arguments[5],zn(Er=arguments[3])==="object"&&Er!==null||(typeof gt=="string"&&(jt=gt,gt=null),typeof Er=="string"&&(jt=Er,Er=null),typeof Er=="number"&&(gt=Er,Er=null),Se={flags:Er,angle:gt,align:jt})):(Q("The transform parameter of text() with a Matrix value"),pn=xe),isNaN($)||isNaN(de)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return cn;var vn,Rt="",fi=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:$s,hi=cn.internal.scaleFactor;function za(wn){return wn=wn.split("	").join(Array(Se.TabLen||9).join(" ")),tr(wn,Er)}function Co(wn){for(var Ln,hs=wn.concat(),Ds=[],Ha=hs.length;Ha--;)typeof(Ln=hs.shift())=="string"?Ds.push(Ln):Array.isArray(wn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?Ds.push(Ln[0]):Ds.push([Ln[0],Ln[1],Ln[2]]);return Ds}function vc(wn,Ln){var hs;if(typeof wn=="string")hs=Ln(wn)[0];else if(Array.isArray(wn)){for(var Ds,Ha,pu=wn.concat(),Nc=[],To=pu.length;To--;)typeof(Ds=pu.shift())=="string"?Nc.push(Ln(Ds)[0]):Array.isArray(Ds)&&typeof Ds[0]=="string"&&(Ha=Ln(Ds[0],Ds[1],Ds[2]),Nc.push([Ha[0],Ha[1],Ha[2]]));hs=Nc}return hs}var al=!1,ql=!0;if(typeof w=="string")al=!0;else if(Array.isArray(w)){var ol=w.concat();$e=[];for(var ll,pi=ol.length;pi--;)(typeof(ll=ol.shift())!="string"||Array.isArray(ll)&&typeof ll[0]!="string")&&(ql=!1);al=ql}if(al===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Ul=rt/cn.internal.scaleFactor,zl=Ul*(fi-1);switch(Se.baseline){case"bottom":de-=zl;break;case"top":de+=Ul-zl;break;case"hanging":de+=Ul-2*zl;break;case"middle":de+=Ul/2-zl}if((dr=Se.maxWidth||0)>0&&(typeof w=="string"?w=cn.splitTextToSize(w,dr):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(wn,Ln){return wn.concat(cn.splitTextToSize(Ln,dr))},[]))),qe={text:w,x:$,y:de,options:Se,mutex:{pdfEscape:tr,activeFontKey:ft,fonts:yr,activeFontSize:rt}},fr.publish("preProcessText",qe),w=qe.text,gt=(Se=qe.options).angle,pn instanceof Kt==0&&gt&&typeof gt=="number"){gt*=Math.PI/180,Se.rotationDirection===0&&(gt=-gt),z===T&&(gt=-gt);var fu=Math.cos(gt),hu=Math.sin(gt);pn=new Kt(fu,hu,-hu,fu,0,0)}else gt&&gt instanceof Kt&&(pn=gt);z!==T||pn||(pn=qt),(Xt=Se.charSpace||di)!==void 0&&(Rt+=te(X(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(dn=Se.horizontalScale)!==void 0&&(Rt+=te(100*dn)+` Tz
`),Se.lang;var Di=-1,$a=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,ao=cn.internal.getCurrentPageInfo().pageContext;switch($a){case 0:case!1:case"fill":Di=0;break;case 1:case!0:case"stroke":Di=1;break;case 2:case"fillThenStroke":Di=2;break;case 3:case"invisible":Di=3;break;case 4:case"fillAndAddForClipping":Di=4;break;case 5:case"strokeAndAddPathForClipping":Di=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Di=6;break;case 7:case"addToPathForClipping":Di=7}var Ju=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;Di!==-1?Rt+=Di+` Tr
`:Ju!==-1&&(Rt+=`0 Tr
`),Di!==-1&&(ao.usedRenderingMode=Di),jt=Se.align||"left";var ha,cl=rt*fi,xc=cn.internal.pageSize.getWidth(),yc=yr[ft];Xt=Se.charSpace||di,dr=Se.maxWidth||0,Er=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var _o=[],ka=function(wn){return cn.getStringUnitWidth(wn,{font:yc,charSpace:Xt,fontSize:rt,doKerning:!1})*rt/hi};if(Object.prototype.toString.call(w)==="[object Array]"){var pa;$e=Co(w),jt!=="left"&&(ha=$e.map(ka));var ma,ul=0;if(jt==="right"){$-=ha[0],w=[],pi=$e.length;for(var oo=0;oo<pi;oo++)oo===0?(ma=ci($),pa=Ni(de)):(ma=X(ul-ha[oo]),pa=-cl),w.push([$e[oo],ma,pa]),ul=ha[oo]}else if(jt==="center"){$-=ha[0]/2,w=[],pi=$e.length;for(var Ao=0;Ao<pi;Ao++)Ao===0?(ma=ci($),pa=Ni(de)):(ma=X((ul-ha[Ao])/2),pa=-cl),w.push([$e[Ao],ma,pa]),ul=ha[Ao]}else if(jt==="left"){w=[],pi=$e.length;for(var Po=0;Po<pi;Po++)w.push($e[Po])}else if(jt==="justify"&&yc.encoding==="Identity-H"){w=[],pi=$e.length,dr=dr!==0?dr:xc;for(var lo=0,Ss=0;Ss<pi;Ss++)if(pa=Ss===0?Ni(de):-cl,ma=Ss===0?ci($):lo,Ss<pi-1){var $l=X((dr-ha[Ss])/($e[Ss].split(" ").length-1)),co=$e[Ss].split(" ");w.push([co[0]+" ",ma,pa]),lo=0;for(var Va=1;Va<co.length;Va++){var Vl=(ka(co[Va-1]+" "+co[Va])-ka(co[Va]))*hi+$l;Va==co.length-1?w.push([co[Va],Vl,0]):w.push([co[Va]+" ",Vl,0]),lo-=Vl}}else w.push([$e[Ss],ma,pa]);w.push(["",lo,0])}else{if(jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],pi=$e.length,dr=dr!==0?dr:xc,Ss=0;Ss<pi;Ss++){pa=Ss===0?Ni(de):-cl,ma=Ss===0?ci($):0;var Hl=$e[Ss].split(" ").length-1,bc=Hl>0?(dr-ha[Ss])/Hl:0;Ss<pi-1?_o.push(te(X(bc))):_o.push(0),w.push([$e[Ss],ma,pa])}}}(typeof Se.R2L=="boolean"?Se.R2L:ue)===!0&&(w=vc(w,function(wn,Ln,hs){return[wn.split("").reverse().join(""),Ln,hs]})),qe={text:w,x:$,y:de,options:Se,mutex:{pdfEscape:tr,activeFontKey:ft,fonts:yr,activeFontSize:rt}},fr.publish("postProcessText",qe),w=qe.text,vn=qe.mutex.isHex||!1;var wc=yr[ft].encoding;wc!=="WinAnsiEncoding"&&wc!=="StandardEncoding"||(w=vc(w,function(wn,Ln,hs){return[za(wn),Ln,hs]})),$e=Co(w),w=[];for(var ko,dl,fl,Wl=Array.isArray($e[0])?1:0,hl="",Gl=function(wn,Ln,hs){var Ds="";return hs instanceof Kt?(hs=typeof Se.angle=="number"?_n(hs,new Kt(1,0,0,1,wn,Ln)):_n(new Kt(1,0,0,1,wn,Ln),hs),z===T&&(hs=_n(new Kt(1,0,0,-1,0,0),hs)),Ds=hs.join(" ")+` Tm
`):Ds=te(wn)+" "+te(Ln)+` Td
`,Ds},fs=0;fs<$e.length;fs++){switch(hl="",Wl){case 1:fl=(vn?"<":"(")+$e[fs][0]+(vn?">":")"),ko=parseFloat($e[fs][1]),dl=parseFloat($e[fs][2]);break;case 0:fl=(vn?"<":"(")+$e[fs]+(vn?">":")"),ko=ci($),dl=Ni(de)}_o!==void 0&&_o[fs]!==void 0&&(hl=_o[fs]+` Tw
`),fs===0?w.push(hl+Gl(ko,dl,pn)+fl):Wl===0?w.push(hl+fl):Wl===1&&w.push(hl+Gl(ko,dl,pn)+fl)}w=Wl===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Wi=`BT
/`;return Wi+=ft+" "+rt+` Tf
`,Wi+=te(rt*fi)+` TL
`,Wi+=fa+`
`,Wi+=Rt,Wi+=w,ee(Wi+="ET"),A[ft]=!0,cn};var q=y.__private__.clip=y.clip=function(w){return ee(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return q("evenodd")},y.__private__.discardPath=y.discardPath=function(){return ee("n"),this};var pe=y.__private__.isValidStyle=function(w){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&($=!0),$};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return pe(w)&&(p=w),this};var ye=y.__private__.getStyle=y.getStyle=function(w){var $=p;switch(w){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=w}return $},Pe=y.close=function(){return ee("h"),this};y.stroke=function(){return ee("S"),this},y.fill=function(w){return je("f",w),this},y.fillEvenOdd=function(w){return je("f*",w),this},y.fillStroke=function(w){return je("B",w),this},y.fillStrokeEvenOdd=function(w){return je("B*",w),this};var je=function(w,$){zn($)==="object"?pr($,w):ee(w)},Wt=function(w){w===null||z===T&&w===void 0||(w=ye(w),ee(w))};function On(w,$,de,Se,xe){var qe=new Id($||this.boundingBox,de||this.xStep,Se||this.yStep,this.gState,xe||this.matrix);qe.stream=this.stream;var $e=w+"$$"+this.cloneIndex+++"$$";return br($e,qe),qe}var pr=function(w,$){var de=_r[w.key],Se=Dt[de];if(Se instanceof Du)ee("q"),ee(Kn($)),Se.gState&&y.setGState(Se.gState),ee(w.matrix.toString()+" cm"),ee("/"+de+" sh"),ee("Q");else if(Se instanceof Id){var xe=new Kt(1,0,0,-1,0,Hi());w.matrix&&(xe=xe.multiply(w.matrix||qt),de=On.call(Se,w.key,w.boundingBox,w.xStep,w.yStep,xe).id),ee("q"),ee("/Pattern cs"),ee("/"+de+" scn"),Se.gState&&y.setGState(Se.gState),ee($),ee("Q")}},Kn=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ls=y.moveTo=function(w,$){return ee(te(X(w))+" "+te(Y($))+" m"),this},us=y.lineTo=function(w,$){return ee(te(X(w))+" "+te(Y($))+" l"),this},ws=y.curveTo=function(w,$,de,Se,xe,qe){return ee([te(X(w)),te(Y($)),te(X(de)),te(Y(Se)),te(X(xe)),te(Y(qe)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,$,de,Se,xe){if(isNaN(w)||isNaN($)||isNaN(de)||isNaN(Se)||!pe(xe))throw new Error("Invalid arguments passed to jsPDF.line");return z===O?this.lines([[de-w,Se-$]],w,$,[1,1],xe||"S"):this.lines([[de-w,Se-$]],w,$,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,$,de,Se,xe,qe){var $e,gt,jt,Xt,dr,Er,dn,pn,cn,Vn,vn,Rt;if(typeof w=="number"&&(Rt=de,de=$,$=w,w=Rt),Se=Se||[1,1],qe=qe||!1,isNaN($)||isNaN(de)||!Array.isArray(w)||!Array.isArray(Se)||!pe(xe)||typeof qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ls($,de),$e=Se[0],gt=Se[1],Xt=w.length,Vn=$,vn=de,jt=0;jt<Xt;jt++)(dr=w[jt]).length===2?(Vn=dr[0]*$e+Vn,vn=dr[1]*gt+vn,us(Vn,vn)):(Er=dr[0]*$e+Vn,dn=dr[1]*gt+vn,pn=dr[2]*$e+Vn,cn=dr[3]*gt+vn,Vn=dr[4]*$e+Vn,vn=dr[5]*gt+vn,ws(Er,dn,pn,cn,Vn,vn));return qe&&Pe(),Wt(xe),this},y.path=function(w){for(var $=0;$<w.length;$++){var de=w[$],Se=de.c;switch(de.op){case"m":Ls(Se[0],Se[1]);break;case"l":us(Se[0],Se[1]);break;case"c":ws.apply(this,Se);break;case"h":Pe()}}return this},y.__private__.rect=y.rect=function(w,$,de,Se,xe){if(isNaN(w)||isNaN($)||isNaN(de)||isNaN(Se)||!pe(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return z===O&&(Se=-Se),ee([te(X(w)),te(Y($)),te(X(de)),te(X(Se)),"re"].join(" ")),Wt(xe),this},y.__private__.triangle=y.triangle=function(w,$,de,Se,xe,qe,$e){if(isNaN(w)||isNaN($)||isNaN(de)||isNaN(Se)||isNaN(xe)||isNaN(qe)||!pe($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-w,Se-$],[xe-de,qe-Se],[w-xe,$-qe]],w,$,[1,1],$e,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,$,de,Se,xe,qe,$e){if(isNaN(w)||isNaN($)||isNaN(de)||isNaN(Se)||isNaN(xe)||isNaN(qe)||!pe($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gt=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*de),qe=Math.min(qe,.5*Se),this.lines([[de-2*xe,0],[xe*gt,0,xe,qe-qe*gt,xe,qe],[0,Se-2*qe],[0,qe*gt,-xe*gt,qe,-xe,qe],[2*xe-de,0],[-xe*gt,0,-xe,-qe*gt,-xe,-qe],[0,2*qe-Se],[0,-qe*gt,xe*gt,-qe,xe,-qe]],w+xe,$,[1,1],$e,!0),this},y.__private__.ellipse=y.ellipse=function(w,$,de,Se,xe){if(isNaN(w)||isNaN($)||isNaN(de)||isNaN(Se)||!pe(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qe=4/3*(Math.SQRT2-1)*de,$e=4/3*(Math.SQRT2-1)*Se;return Ls(w+de,$),ws(w+de,$-$e,w+qe,$-Se,w,$-Se),ws(w-qe,$-Se,w-de,$-$e,w-de,$),ws(w-de,$+$e,w-qe,$+Se,w,$+Se),ws(w+qe,$+Se,w+de,$+$e,w+de,$),Wt(xe),this},y.__private__.circle=y.circle=function(w,$,de,Se){if(isNaN(w)||isNaN($)||isNaN(de)||!pe(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,$,de,de,Se)},y.setFont=function(w,$,de){return de&&($=W($,de)),ft=Us(w,$,{disableWarning:!1}),this};var ti=y.__private__.getFont=y.getFont=function(){return yr[Us.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,$,de={};for(w in ur)if(ur.hasOwnProperty(w))for($ in de[w]=[],ur[w])ur[w].hasOwnProperty($)&&de[w].push($);return de},y.addFont=function(w,$,de,Se,xe){var qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qe.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&qe.indexOf(arguments[3])==-1&&(de=W(de,Se)),Pr.call(this,w,$,de,xe=xe||"Identity-H")};var $s,wi=t.lineWidth||.200025,xt=y.__private__.getLineWidth=y.getLineWidth=function(){return wi},_t=y.__private__.setLineWidth=y.setLineWidth=function(w){return wi=w,ee(te(X(w))+" w"),this};y.__private__.setLineDash=sr.API.setLineDash=sr.API.setLineDashPattern=function(w,$){if(w=w||[],$=$||0,isNaN($)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(de){return te(X(de))}).join(" "),$=te(X($)),ee("["+w+"] "+$+" d"),this};var zi=y.__private__.getLineHeight=y.getLineHeight=function(){return rt*$s};y.__private__.getLineHeight=y.getLineHeight=function(){return rt*$s};var Ml=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&($s=w),this},nl=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return $s};Ml(t.lineHeight);var ci=y.__private__.getHorizontalCoordinate=function(w){return X(w)},Ni=y.__private__.getVerticalCoordinate=function(w){return z===T?w:Vt[C].mediaBox.topRightY-Vt[C].mediaBox.bottomLeftY-X(w)},$n=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return te(ci(w))},ds=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return te(Ni(w))},ui=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return st(ui)},y.__private__.setStrokeColor=y.setDrawColor=function(w,$,de,Se){return ui=vt({ch1:w,ch2:$,ch3:de,ch4:Se,pdfColorType:"draw",precision:2}),ee(ui),this};var $i=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return st($i)},y.__private__.setFillColor=y.setFillColor=function(w,$,de,Se){return $i=vt({ch1:w,ch2:$,ch3:de,ch4:Se,pdfColorType:"fill",precision:2}),ee($i),this};var fa=t.textColor||"0 g",No=y.__private__.getTextColor=y.getTextColor=function(){return st(fa)};y.__private__.setTextColor=y.setTextColor=function(w,$,de,Se){return fa=vt({ch1:w,ch2:$,ch3:de,ch4:Se,pdfColorType:"text",precision:3}),this};var di=t.charSpace,sl=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(di||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return di=w,this};var Bl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bl=$,ee($+" J"),this};var So=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return So=$,ee($+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(te(X(w))+" M"),this},y.GState=Pm,y.setGState=function(w){(w=typeof w=="string"?ir[gr[w]]:jo(null,w)).equals(ln)||(ee("/"+w.id+" gs"),ln=w)};var jo=function(w,$){if(!w||!gr[w]){var de=!1;for(var Se in ir)if(ir.hasOwnProperty(Se)&&ir[Se].equals($)){de=!0;break}if(de)$=ir[Se];else{var xe="GS"+(Object.keys(ir).length+1).toString(10);ir[xe]=$,$.id=xe}return w&&(gr[w]=$.id),fr.publish("addGState",$),$}};y.addGState=function(w,$){return jo(w,$),this},y.saveGraphicsState=function(){return ee("q"),Wr.push({key:ft,size:rt,color:fa}),this},y.restoreGraphicsState=function(){ee("Q");var w=Wr.pop();return ft=w.key,rt=w.size,fa=w.color,ln=null,this},y.setCurrentTransformationMatrix=function(w){return ee(w.toString()+" cm"),this},y.comment=function(w){return ee("#"+w),this};var as=function(w,$){var de=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(qe){isNaN(qe)||(de=parseFloat(qe))}});var Se=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(qe){isNaN(qe)||(Se=parseFloat(qe))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(qe){xe=qe.toString()}}),this},ri=function(w,$,de,Se){as.call(this,w,$),this.type="rect";var xe=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function($e){isNaN($e)||(xe=parseFloat($e))}});var qe=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qe},set:function($e){isNaN($e)||(qe=parseFloat($e))}}),this},io=function(){this.page=mr,this.currentPage=C,this.pages=Ge.slice(0),this.pagesContext=Vt.slice(0),this.x=St,this.y=yn,this.matrix=Cr,this.width=Rs(C),this.height=Ua(C),this.outputDestination=tt,this.id="",this.objectNumber=-1};io.prototype.restore=function(){mr=this.page,C=this.currentPage,Vt=this.pagesContext,Ge=this.pages,St=this.x,yn=this.y,Cr=this.matrix,Si(C,this.width),Vi(C,this.height),tt=this.outputDestination};var Ri=function(w,$,de,Se,xe){ys.push(new io),mr=C=0,Ge=[],St=w,yn=$,Cr=xe,ar([de,Se])};for(var Ns in y.beginFormObject=function(w,$,de,Se,xe){return Ri(w,$,de,Se,xe),this},y.endFormObject=function(w){return(function($){if(Js[$])ys.pop().restore();else{var de=new io,Se="Xo"+(Object.keys(En).length+1).toString(10);de.id=Se,Js[$]=Se,En[Se]=de,fr.publish("addFormObject",de),ys.pop().restore()}})(w),this},y.doFormObject=function(w,$){var de=En[Js[w]];return ee("q"),ee($.toString()+" cm"),ee("/"+de.id+" Do"),ee("Q"),this},y.getFormObject=function(w){var $=En[Js[w]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},y.save=function(w,$){return w=w||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Ru(bi(is()),w),typeof Ru.unload=="function"&&Br.setTimeout&&setTimeout(Ru.unload,911),this):new Promise(function(de,Se){try{var xe=Ru(bi(is()),w);typeof Ru.unload=="function"&&Br.setTimeout&&setTimeout(Ru.unload,911),de(xe)}catch(qe){Se(qe.message)}})},sr.API)sr.API.hasOwnProperty(Ns)&&(Ns==="events"&&sr.API.events.length?(function(w,$){var de,Se,xe;for(xe=$.length-1;xe!==-1;xe--)de=$[xe][0],Se=$[xe][1],w.subscribe.apply(w,[de].concat(typeof Se=="function"?[Se]:Se))})(fr,sr.API.events):y[Ns]=sr.API[Ns]);function Rs(w){return Vt[w].mediaBox.topRightX-Vt[w].mediaBox.bottomLeftX}function Si(w,$){Vt[w].mediaBox.topRightX=$+Vt[w].mediaBox.bottomLeftX}function Ua(w){return Vt[w].mediaBox.topRightY-Vt[w].mediaBox.bottomLeftY}function Vi(w,$){Vt[w].mediaBox.topRightY=$+Vt[w].mediaBox.bottomLeftY}var Pa=y.getPageWidth=function(w){return Rs(w=w||C)/Et},ni=y.setPageWidth=function(w,$){Si(w,$*Et)},Hi=y.getPageHeight=function(w){return Ua(w=w||C)/Et},il=y.setPageHeight=function(w,$){Vi(w,$*Et)};return y.internal={pdfEscape:tr,getStyle:ye,getFont:ti,getFontSize:Ct,getCharSpace:sl,getTextColor:No,getLineHeight:zi,getLineHeightFactor:nl,getLineWidth:xt,write:Re,getHorizontalCoordinate:ci,getVerticalCoordinate:Ni,getCoordinateString:$n,getVerticalCoordinateString:ds,collections:{},newObject:Pt,newAdditionalObject:et,newObjectDeferred:vr,newObjectDeferredBegin:ut,getFilters:wt,putStream:kt,events:fr,scaleFactor:Et,pageSize:{getWidth:function(){return Pa(C)},setWidth:function(w){ni(C,w)},getHeight:function(){return Hi(C)},setHeight:function(w){il(C,w)}},encryptionOptions:m,encryption:bs,getEncryptor:function(w){return m!==null?bs.encryptor(w,0):function($){return $}},output:wo,getNumberOfPages:Xr,get pages(){return Ge},out:ee,f2:U,f3:F,getPageInfo:da,getPageInfoByObjId:Ol,getCurrentPageInfo:zs,getPDFVersion:S,Point:as,Rectangle:ri,Matrix:Kt,hasHotfix:Ui},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Pa(C)},set:function(w){ni(C,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Hi(C)},set:function(w){il(C,w)},enumerable:!0,configurable:!0}),(function(w){for(var $=0,de=Ee.length;$<de;$++){var Se=Pr.call(this,w[$][0],w[$][1],w[$][2],Ee[$][3],!0);b===!1&&(A[Se]=!0);var xe=w[$][0].split("-");zr({id:Se,fontName:xe[0],fontStyle:xe[1]||""})}fr.publish("addFonts",{fonts:yr,dictionary:ur})}).call(y,Ee),ft="F1",rr(a,r),fr.publish("initialized"),y}Ed.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ed.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ed.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ed.prototype.processOwnerPassword=function(t,e){return Ev(Tv(e).substr(0,5),t)},Ed.prototype.encryptor=function(t,e){var r=Tv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Ev(r,n)}},Pm.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||zn(t)!==zn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},sr.API={events:[]},sr.version="4.0.0";var Bs=sr.API,L1=1,Xu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ad=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qr=function(t){return t.toFixed(2)},Wc=function(t){return t.toFixed(5)};Bs.__acroform__={};var qa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},s5=function(t){return t*L1},Nl=function(t){var e=new ej,r=er.internal.getHeight(t)||0,n=er.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Qr(n)),Number(Qr(r))],e},SI=Bs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},jI=Bs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},CI=Bs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Qs=Bs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CI(t,e-1)},Zs=Bs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SI(t,e-1)},Ys=Bs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jI(t,e-1)},_I=Bs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],o=t[1],u=t[2],c=t[3],f={};return f.lowerLeft_X=r(a)||0,f.lowerLeft_Y=n(o+c)||0,f.upperRight_X=r(a+u)||0,f.upperRight_Y=n(o)||0,[Number(Qr(f.lowerLeft_X)),Number(Qr(f.lowerLeft_Y)),Number(Qr(f.upperRight_X)),Number(Qr(f.upperRight_Y))]},AI=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Lv(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Qr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Nl(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Lv=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(U){return U.split(`
`)}):a.map(function(U){return[U]});var o=r,u=er.internal.getHeight(t)||0;u=u<0?-u:u;var c=er.internal.getWidth(t)||0;c=c<0?-c:c;var f=function(U,F,X){if(U+1<a.length){var Y=F+" "+a[U+1][0];return Ip(Y,t,X).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,b=Ip("3",t,o).height,A=t.multiline?u-o:(u-b)/2,y=A+=2,D=0,S=0,E=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ip(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var _="",O=0,T=0;T<a.length;T++)if(a.hasOwnProperty(T)){var z=!1;if(a[T].length!==1&&E!==a[T].length-1){if((b+2)*(O+2)+2>u)continue e;_+=a[T][E],z=!0,S=T,T--}else{_=(_+=a[T][E]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var re=parseInt(T),ae=f(re,_,o),W=T>=a.length-1;if(ae&&!W){_+=" ",E=0;continue}if(ae||W){if(W)S=re;else if(t.multiline&&(b+2)*(O+2)+2>u)continue e}else{if(!t.multiline||(b+2)*(O+2)+2>u)continue e;S=re}}for(var te="",Q=D;Q<=S;Q++){var fe=a[Q];if(t.multiline){if(Q===S){te+=fe[E]+" ",E=(E+1)%fe.length;continue}if(Q===D){te+=fe[fe.length-1]+" ";continue}}te+=fe[0]+" "}switch(te=te.substr(te.length-1)==" "?te.substr(0,te.length-1):te,m=Ip(te,t,o).width,t.textAlign){case"right":p=c-m-2;break;case"center":p=(c-m)/2;break;default:p=2}e+=Qr(p)+" "+Qr(y)+` Td
`,e+="("+Xu(te)+`) Tj
`,e+=-Qr(p)+` 0 Td
`,y=-(o+2),m=0,D=z?S:S+1,O++,_=""}break}return n.text=e,n.fontSize=o,n},Ip=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},PI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kI=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},TI=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(tl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(PI)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");L1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];o.objId=void 0,o.hasAnnotation&&kI(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var o=!n;for(var u in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(u)){var c=n[u],f=[],p=c.Rect;if(c.Rect&&(c.Rect=_I(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=er.createDefaultAppearanceStream(c),zn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=p,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=AI(c);f.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var b="";for(var A in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(A)){var y=c.appearanceStreamContent[A];if(b+="/"+A+" ",b+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var D=y[u];typeof D=="function"&&(D=D.call(a,c)),b+="/"+u+" "+D+" ",a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D)}}else typeof(D=y)=="function"&&(D=D.call(a,c)),b+="/"+u+" "+D,a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(S,E){for(var _ in S)if(S.hasOwnProperty(_)){var O=_,T=S[_];E.internal.newObjectDeferredBegin(T.objId,!0),zn(T)==="object"&&typeof T.putStream=="function"&&T.putStream(),delete S[O]}})(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},J4=Bs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(u){return u};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),zn(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Xu(n(t[o].toString()))+")"):a+=t[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},O0=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Xu(n(t))+")"},Cl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Cl.prototype.toString=function(){return this.objId+" 0 R"},Cl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Cl.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:J4(a,this.objId,this.scope)}):a instanceof Cl?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var ej=function(){Cl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};qa(ej,Cl);var tj=function(){Cl.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xu(r(t))+")"}},set:function(r){t=r}})};qa(tj,Cl);var tl=function t(){Cl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qs(e,3)},set:function(_){_?this.F=Zs(e,3):this.F=Ys(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof km)return;o="FieldObject"+t.FieldNum++}var _=function(O){return O};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Xu(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/L1:p},set:function(_){p=_}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof km||this instanceof Ou))return O0(b,this.objId,this.scope)},set:function(_){_=_.toString(),b=_}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Ei==0?O0(A,this.objId,this.scope):A},set:function(_){_=_.toString(),A=this instanceof Ei==0?_.substr(0,1)==="("?Ad(_.substr(1,_.length-2)):Ad(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei==1?Ad(A.substr(1,A.length-1)):A},set:function(_){_=_.toString(),A=this instanceof Ei==1?"/"+_:_}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ei==0?O0(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Ei==0?_.substr(0,1)==="("?Ad(_.substr(1,_.length-2)):Ad(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei==1?Ad(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Ei==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(_){_=!!_,S=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(_){D=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,1)},set:function(_){_?this.Ff=Zs(this.Ff,1):this.Ff=Ys(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,2)},set:function(_){_?this.Ff=Zs(this.Ff,2):this.Ff=Ys(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,3)},set:function(_){_?this.Ff=Zs(this.Ff,3):this.Ff=Ys(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');E=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(E){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:E=2;break;case"center":case 1:E=1;break;default:E=0}}})};qa(tl,Cl);var Vd=function(){tl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return J4(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,p=[];f=u.exec(o);)p.push(f[c]);return p})(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,18)},set:function(r){r?this.Ff=Zs(this.Ff,18):this.Ff=Ys(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Zs(this.Ff,19):this.Ff=Ys(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,20)},set:function(r){r?(this.Ff=Zs(this.Ff,20),e.sort()):this.Ff=Ys(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,22)},set:function(r){r?this.Ff=Zs(this.Ff,22):this.Ff=Ys(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(r){r?this.Ff=Zs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,27)},set:function(r){r?this.Ff=Zs(this.Ff,27):this.Ff=Ys(this.Ff,27)}}),this.hasAppearanceStream=!1};qa(Vd,tl);var Hd=function(){Vd.call(this),this.fontName="helvetica",this.combo=!1};qa(Hd,Vd);var Wd=function(){Hd.call(this),this.combo=!0};qa(Wd,Hd);var Yp=function(){Wd.call(this),this.edit=!0};qa(Yp,Wd);var Ei=function(){tl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,15)},set:function(r){r?this.Ff=Zs(this.Ff,15):this.Ff=Ys(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,16)},set:function(r){r?this.Ff=Zs(this.Ff,16):this.Ff=Ys(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,17)},set:function(r){r?this.Ff=Zs(this.Ff,17):this.Ff=Ys(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(r){r?this.Ff=Zs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Xu(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){zn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};qa(Ei,tl);var Xp=function(){Ei.call(this),this.pushButton=!0};qa(Xp,Ei);var Gd=function(){Ei.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};qa(Gd,Ei);var km=function(){var t,e;tl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),n)u.push("/"+o+" ("+Xu(a(n[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){zn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=er.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qa(km,tl),Gd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Gd.prototype.createOption=function(t){var e=new km;return e.Parent=this,e.optionName=t,this.Kids.push(e),EI.call(this.scope,e),e};var Jp=function(){Ei.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=er.CheckBox.createAppearanceStream()};qa(Jp,Ei);var Ou=function(){tl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,13)},set:function(e){e?this.Ff=Zs(this.Ff,13):this.Ff=Ys(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,21)},set:function(e){e?this.Ff=Zs(this.Ff,21):this.Ff=Ys(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(e){e?this.Ff=Zs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,24)},set:function(e){e?this.Ff=Zs(this.Ff,24):this.Ff=Ys(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,25)},set:function(e){e?this.Ff=Zs(this.Ff,25):this.Ff=Ys(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(e){e?this.Ff=Zs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qa(Ou,tl);var em=function(){Ou.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,14)},set:function(t){t?this.Ff=Zs(this.Ff,14):this.Ff=Ys(this.Ff,14)}}),this.password=!0};qa(em,Ou);var er={CheckBox:{createAppearanceStream:function(){return{N:{On:er.CheckBox.YesNormal},D:{On:er.CheckBox.YesPushDown,Off:er.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=Lv(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Qr(er.internal.getWidth(t))+" "+Qr(er.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Qr(o.fontSize)+" Tf "+a),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Nl(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],o=er.internal.getHeight(t),u=er.internal.getWidth(t),c=Lv(t,t.caption);return a.push("1 g"),a.push("0 0 "+Qr(u)+" "+Qr(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Qr(u-1)+" "+Qr(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Qr(c.fontSize)+" Tf "+n),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Qr(er.internal.getWidth(t))+" "+Qr(er.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:er.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=er.RadioButton.Circle.YesNormal,e.D[t]=er.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Nl(t);e.scope=t.scope;var r=[],n=er.internal.getWidth(t)<=er.internal.getHeight(t)?er.internal.getWidth(t)/4:er.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=er.internal.Bezier_C,o=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wc(er.internal.getWidth(t)/2)+" "+Wc(er.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=[],n=er.internal.getWidth(t)<=er.internal.getHeight(t)?er.internal.getWidth(t)/4:er.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),o=Number((a*er.internal.Bezier_C).toFixed(5)),u=Number((n*er.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wc(er.internal.getWidth(t)/2)+" "+Wc(er.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wc(er.internal.getWidth(t)/2)+" "+Wc(er.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=[],n=er.internal.getWidth(t)<=er.internal.getHeight(t)?er.internal.getWidth(t)/4:er.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),o=Number((a*er.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wc(er.internal.getWidth(t)/2)+" "+Wc(er.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:er.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=er.RadioButton.Cross.YesNormal,e.D[t]=er.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Nl(t);e.scope=t.scope;var r=[],n=er.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Qr(er.internal.getWidth(t)-2)+" "+Qr(er.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Qr(n.x1.x)+" "+Qr(n.x1.y)+" m"),r.push(Qr(n.x2.x)+" "+Qr(n.x2.y)+" l"),r.push(Qr(n.x4.x)+" "+Qr(n.x4.y)+" m"),r.push(Qr(n.x3.x)+" "+Qr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=er.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Qr(er.internal.getWidth(t))+" "+Qr(er.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Qr(er.internal.getWidth(t)-2)+" "+Qr(er.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Qr(r.x1.x)+" "+Qr(r.x1.y)+" m"),n.push(Qr(r.x2.x)+" "+Qr(r.x2.y)+" l"),n.push(Qr(r.x4.x)+" "+Qr(r.x4.y)+" m"),n.push(Qr(r.x3.x)+" "+Qr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Nl(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Qr(er.internal.getWidth(t))+" "+Qr(er.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};er.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=er.internal.getWidth(t),r=er.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},er.internal.getWidth=function(t){var e=0;return zn(t)==="object"&&(e=s5(t.Rect[2])),e},er.internal.getHeight=function(t){var e=0;return zn(t)==="object"&&(e=s5(t.Rect[3])),e};var EI=Bs.addField=function(t){if(TI(this,t),!(t instanceof tl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Bs.AcroFormChoiceField=Vd,Bs.AcroFormListBox=Hd,Bs.AcroFormComboBox=Wd,Bs.AcroFormEditBox=Yp,Bs.AcroFormButton=Ei,Bs.AcroFormPushButton=Xp,Bs.AcroFormRadioButton=Gd,Bs.AcroFormCheckBox=Jp,Bs.AcroFormTextField=Ou,Bs.AcroFormPasswordField=em,Bs.AcroFormAppearance=er,Bs.AcroForm={ChoiceField:Vd,ListBox:Hd,ComboBox:Wd,EditBox:Yp,Button:Ei,PushButton:Xp,RadioButton:Gd,CheckBox:Jp,TextField:Ou,PasswordField:em,Appearance:er},sr.AcroForm={ChoiceField:Vd,ListBox:Hd,ComboBox:Wd,EditBox:Yp,Button:Ei,PushButton:Xp,RadioButton:Gd,CheckBox:Jp,TextField:Ou,PasswordField:em,Appearance:er};sr.AcroForm;function rj(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(U,F){var X,Y,Ne,be,we,se=r;if((F=F||r)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(ae(U))for(we in n)for(Ne=n[we],X=0;X<Ne.length;X+=1){for(be=!0,Y=0;Y<Ne[X].length;Y+=1)if(Ne[X][Y]!==void 0&&Ne[X][Y]!==U[Y]){be=!1;break}if(be===!0){se=we;break}}else for(we in n)for(Ne=n[we],X=0;X<Ne.length;X+=1){for(be=!0,Y=0;Y<Ne[X].length;Y+=1)if(Ne[X][Y]!==void 0&&Ne[X][Y]!==U.charCodeAt(Y)){be=!1;break}if(be===!0){se=we;break}}return se===r&&F!==r&&(se=F),se},o=function U(F){for(var X=this.internal.write,Y=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var be=[];if(be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Image"}),be.push({key:"Width",value:F.width}),be.push({key:"Height",value:F.height}),F.colorSpace===_.INDEXED?be.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(be.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===_.DEVICE_CMYK&&be.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),be.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&be.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var we="",se=0,me=F.transparency.length;se<me;se++)we+=F.transparency[se]+" "+F.transparency[se]+" ";be.push({key:"Mask",value:"["+we+"]"})}F.sMask!==void 0&&be.push({key:"SMask",value:F.objectId+1+" 0 R"});var I=F.filter!==void 0?["/"+F.filter]:void 0;if(Y({data:F.data,additionalKeyValues:be,alreadyAppliedFilters:I,objectId:F.objectId}),X("endobj"),"sMask"in F&&F.sMask!==void 0){var j,x=(j=F.sMaskBitsPerComponent)!==null&&j!==void 0?j:F.bitsPerComponent,C={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:x,data:F.sMask};"filter"in F&&(C.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(x," /Columns ").concat(F.width),C.filter=F.filter),U.call(this,C)}if(F.colorSpace===_.INDEXED){var M=this.internal.newObject();Y({data:te(new Uint8Array(F.palette)),objectId:M}),X("endobj")}},u=function(){var U=this.internal.collections[e+"images"];for(var F in U)o.call(this,U[F])},c=function(){var U,F=this.internal.collections[e+"images"],X=this.internal.write;for(var Y in F)X("/I"+(U=F[Y]).index,U.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},p=function(){var U=this.internal.collections[e+"images"];return f.call(this),U},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(U){return typeof t["process"+U.toUpperCase()]=="function"},A=function(U){return zn(U)==="object"&&U.nodeType===1},y=function(U,F){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var X=""+U.getAttribute("src");if(X.indexOf("data:image/")===0)return Zp(unescape(X).split("base64,").pop());var Y=t.loadFile(X,!0);if(Y!==void 0)return Y}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var Ne;switch(F){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return Zp(U.toDataURL(Ne,1).split("base64,").pop())}},D=function(U){var F=this.internal.collections[e+"images"];if(F){for(var X in F)if(U===F[X].alias)return F[X]}},S=function(U,F,X){return U||F||(U=-96,F=-96),U<0&&(U=-1*X.width*72/U/this.internal.scaleFactor),F<0&&(F=-1*X.height*72/F/this.internal.scaleFactor),U===0&&(U=F*X.width/X.height),F===0&&(F=U*X.height/X.width),[U,F]},E=function(U,F,X,Y,Ne,be){var we=S.call(this,X,Y,Ne),se=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,I=p.call(this);if(X=we[0],Y=we[1],I[Ne.index]=Ne,be){be*=Math.PI/180;var j=Math.cos(be),x=Math.sin(be),C=function(H){return H.toFixed(4)},M=[C(j),C(x),C(-1*x),C(j),0,0,"cm"]}this.internal.write("q"),be?(this.internal.write([1,"0","0",1,se(U),me(F+Y),"cm"].join(" ")),this.internal.write(M.join(" ")),this.internal.write([se(X),"0","0",se(Y),"0","0","cm"].join(" "))):this.internal.write([se(X),"0","0",se(Y),se(U),me(F+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(U){var F,X,Y=0;if(typeof U=="string")for(X=U.length,F=0;F<X;F++)Y=(Y<<5)-Y+U.charCodeAt(F),Y|=0;else if(ae(U))for(X=U.byteLength/2,F=0;F<X;F++)Y=(Y<<5)-Y+U[F],Y|=0;return Y},z=t.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var F=!0;return U.length===0&&(F=!1),U.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(F=!1),F},re=t.__addimage__.extractImageFromDataUrl=function(U){if(U==null||!(U=U.trim()).startsWith("data:"))return null;var F=U.indexOf(",");return F<0?null:U.substring(0,F).trim().endsWith("base64")?U.substring(F+1):null};t.__addimage__.isArrayBuffer=function(U){return U instanceof ArrayBuffer};var ae=t.__addimage__.isArrayBufferView=function(U){return U instanceof Int8Array||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array},W=t.__addimage__.binaryStringToUint8Array=function(U){for(var F=U.length,X=new Uint8Array(F),Y=0;Y<F;Y++)X[Y]=U.charCodeAt(Y);return X},te=t.__addimage__.arrayBufferToBinaryString=function(U){for(var F="",X=ae(U)?U:new Uint8Array(U),Y=0;Y<X.length;Y+=8192)F+=String.fromCharCode.apply(null,X.subarray(Y,Y+8192));return F};t.addImage=function(){var U,F,X,Y,Ne,be,we,se,me;if(typeof arguments[1]=="number"?(F=r,X=arguments[1],Y=arguments[2],Ne=arguments[3],be=arguments[4],we=arguments[5],se=arguments[6],me=arguments[7]):(F=arguments[1],X=arguments[2],Y=arguments[3],Ne=arguments[4],be=arguments[5],we=arguments[6],se=arguments[7],me=arguments[8]),zn(U=arguments[0])==="object"&&!A(U)&&"imageData"in U){var I=U;U=I.imageData,F=I.format||F||r,X=I.x||X||0,Y=I.y||Y||0,Ne=I.w||I.width||Ne,be=I.h||I.height||be,we=I.alias||we,se=I.compression||se,me=I.rotation||I.angle||me}var j=this.internal.getFilters();if(se===void 0&&j.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(X)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var x=Q.call(this,U,F,we,se);return E.call(this,X,Y,Ne,be,x,me),this};var Q=function(U,F,X,Y){var Ne,be,we;if(typeof U=="string"&&a(U)===r){U=unescape(U);var se=fe(U,!1);(se!==""||(se=t.loadFile(U,!0))!==void 0)&&(U=se)}if(A(U)&&(U=y(U,F)),F=a(U,F),!b(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((we=X)==null||we.length===0)&&(X=(function(me){return typeof me=="string"||ae(me)?T(me):ae(me.data)?T(me.data):null})(U)),(Ne=D.call(this,X))||(U instanceof Uint8Array||F==="RGBA"||(be=U,U=W(U)),Ne=this["process"+F.toUpperCase()](U,m.call(this),X,(function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in t.image_compression?me:O.NONE})(Y),be)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},fe=t.__addimage__.convertBase64ToBinaryString=function(U,F){F=typeof F!="boolean"||F;var X,Y="";if(typeof U=="string"){var Ne;X=(Ne=re(U))!==null&&Ne!==void 0?Ne:U;try{Y=Zp(X)}catch(be){if(F)throw z(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+be.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(U){var F,X,Y="";if(A(U)&&(U=y(U)),typeof U=="string"&&a(U)===r&&((Y=fe(U,!1))===""&&(Y=t.loadFile(U)||""),U=Y),X=a(U),!b(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(U instanceof Uint8Array||(U=W(U)),!(F=this["process"+X.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=X,F}})(sr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};sr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(r.objId),p=r.pageContext.annotations,m=!1,b=0;b<p.length&&!m;b++)switch((n=p[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var A=0;A<p.length;A++){n=p[A];var y=this.internal.pdfEscape,D=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(S.objId),O=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+y(_(n.contents))+")",o+=" /Popup "+E.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(_(O))+") >>",S.content=o;var T=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+T,n.open&&(o+=" /Open true"),o+=" >>",E.content=o,this.internal.write(S.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+u(n.bounds.x)+" "+c(n.bounds.y)+" "+u(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var z=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(D(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var re=this.annotations._nameMap[n.options.name];n.options.pageNumber=re.page,n.options.top=re.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(D(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var ae=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ae+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(r),y:p(n),w:f(r+a),h:p(n+o)},options:u,type:"link"})},t.textWithLink=function(r,n,a,o){var u,c,f=this.getTextWidth(r),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(r,c).length;u=Math.ceil(p*m)}else c=f,u=p;return this.text(r,n,a,o),a+=.2*p,o.align==="center"&&(n-=f/2),o.align==="right"&&(n-=f),this.link(n,a-p,c,u,o),f},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(sr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(S){return u(S)&&a.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(S){var E=0,_=r,O="",T=0;for(E=0;E<S.length;E+=1)_[S.charCodeAt(E)]!==void 0?(T++,typeof(_=_[S.charCodeAt(E)])=="number"&&(O+=String.fromCharCode(_),_=r,T=0),E===S.length-1&&(_=r,O+=S.charAt(E-(T-1)),E-=T-1,T=0)):(_=r,O+=S.charAt(E-T),E-=T,T=0);return O};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&n[S.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(S,E,_){return u(S)?o(S)===!1?-1:!p(S)||!u(E)&&!u(_)||!u(_)&&c(E)||c(S)&&!u(E)||c(S)&&f(E)||c(S)&&c(E)?0:m(S)&&u(E)&&!c(E)&&u(_)&&p(_)?3:c(S)||!u(_)?1:2:-1},y=function(S){var E=0,_=0,O=0,T="",z="",re="",ae=(S=S||"").split("\\s+"),W=[];for(E=0;E<ae.length;E+=1){for(W.push(""),_=0;_<ae[E].length;_+=1)T=ae[E][_],z=ae[E][_-1],re=ae[E][_+1],u(T)?(O=A(T,z,re),W[E]+=O!==-1?String.fromCharCode(e[T.charCodeAt(0)][O]):T):W[E]+=T;W[E]=b(W[E])}return W.join(" ")},D=t.__arabicParser__.processArabic=t.processArabic=function(){var S,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(E)){var O=0;for(_=[],O=0;O<E.length;O+=1)Array.isArray(E[O])?_.push([y(E[O][0]),E[O][1],E[O][2]]):_.push([y(E[O])]);S=_}else S=y(E);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",D])})(sr.API),sr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(sr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(S){b=S}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(S){A=S}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(S){D=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,p){n.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),A=p.scaleFactor||this.internal.scaleFactor,y=0,D=0,S=0,E=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var _=p.maxWidth;_>0?typeof f=="string"?f=this.splitTextToSize(f,_):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(T,z){return T.concat(E.splitTextToSize(z,_))},[])):f=Array.isArray(f)?f:[f];for(var O=0;O<f.length;O++)y<(S=this.getStringUnitWidth(f[O],{font:b})*m)&&(y=S);return y!==0&&(D=f.length),{w:y/=A,h:Math.max((D*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,y&&A&&(this.printHeaderRow(f.lineNumber,!0),f.y+=A[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,r===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};t.table=function(f,p,m,b,A){if(n.call(this),!m)throw new Error("No data for PDF table.");var y,D,S,E,_=[],O=[],T=[],z={},re={},ae=[],W=[],te=(A=A||{}).autoSize||!1,Q=A.printHeaders!==!1,fe=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,U=A.margins||Object.assign({width:this.getPageWidth()},e),F=typeof A.padding=="number"?A.padding:3,X=A.headerBackgroundColor||"#c8c8c8",Y=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=fe,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=Y,this.setFontSize(fe),b==null)O=_=Object.keys(m[0]),T=_.map(function(){return"left"});else if(Array.isArray(b)&&zn(b[0])==="object")for(_=b.map(function(I){return I.name}),O=b.map(function(I){return I.prompt||I.name||""}),T=b.map(function(I){return I.align||"left"}),y=0;y<b.length;y+=1)re[b[y].name]=.7499990551181103*b[y].width;else Array.isArray(b)&&typeof b[0]=="string"&&(O=_=b,T=_.map(function(){return"left"}));if(te||Array.isArray(b)&&typeof b[0]=="string")for(y=0;y<_.length;y+=1){for(z[E=_[y]]=m.map(function(I){return I[E]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(O[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=z[E],this.setFont(void 0,"normal"),S=0;S<D.length;S+=1)ae.push(this.getTextDimensions(D[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);re[E]=Math.max.apply(null,ae)+F+F,ae=[]}if(Q){var Ne={};for(y=0;y<_.length;y+=1)Ne[_[y]]={},Ne[_[y]].text=O[y],Ne[_[y]].align=T[y];var be=c.call(this,Ne,re);W=_.map(function(I){return new o(f,p,re[I],be,Ne[I].text,void 0,Ne[I].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var we=b.reduce(function(I,j){return I[j.name]=j.align,I},{});for(y=0;y<m.length;y+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:y,data:m[y]},this);var se=c.call(this,m[y],re);for(S=0;S<_.length;S+=1){var me=m[y][_[S]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:y,col:S,data:me},this),u.call(this,new o(f,p,re[_[S]],se,me,y+2,we[_[S]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var c=function(f,p){var m=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(f).map(function(y){var D=f[y];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,p[y]-m-m)},this).map(function(y){return this.getLineHeightFactor()*y.length*b/A+m+m},this).reduce(function(y,D){return Math.max(y,D)},0)};t.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,p){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){m=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,A.push(m)),m.lineNumber=f;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(D)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}})(sr.API);var nj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rv=rj(sj),ij=[100,200,300,400,500,600,700,800,900],LI=rj(ij);function M0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return nj[o=o||"normal"]?o:"normal"})(t.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(t.weight),a=(function(o){return typeof Rv[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function i5(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var RI={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},a5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function l5(t){return t.trimLeft()}function DI(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function II(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Fp,c5,u5,Pd,Op,d5,f5,h5,B0=["times"];function p5(t,e,r,n,a){var o=4,u=g5;switch(a){case sr.API.image_compression.FAST:o=1,u=m5;break;case sr.API.image_compression.MEDIUM:o=6,u=v5;break;case sr.API.image_compression.SLOW:o=9,u=x5}t=(function(f,p,m,b){for(var A,y=f.length/p,D=new Uint8Array(f.length+y),S=[FI,m5,g5,v5,x5],E=0;E<y;E+=1){var _=E*p,O=f.subarray(_,_+p);if(b)D.set(b(O,m,A),_+E);else{for(var T=S.length,z=[],re=0;re<T;re+=1)z[re]=S[re](O,m,A);var ae=MI(z.concat());D.set(z[ae],_+E)}A=O}return D})(t,e,Math.ceil(r*n/8),u);var c=_v(t,{level:o});return sr.API.__addimage__.arrayBufferToBinaryString(c)}function FI(t){var e=Array.apply([],t);return e.unshift(0),e}function m5(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var o=t[a-e]||0;n[a+1]=t[a]-o+256&255}return n}function g5(t,e,r){var n=t.length,a=[];a[0]=2;for(var o=0;o<n;o+=1){var u=r&&r[o]||0;a[o+1]=t[o]-u+256&255}return a}function v5(t,e,r){var n=t.length,a=[];a[0]=3;for(var o=0;o<n;o+=1){var u=t[o-e]||0,c=r&&r[o]||0;a[o+1]=t[o]+256-(u+c>>>1)&255}return a}function x5(t,e,r){var n=t.length,a=[];a[0]=4;for(var o=0;o<n;o+=1){var u=OI(t[o-e]||0,r&&r[o]||0,r&&r[o-e]||0);a[o+1]=t[o]-u+256&255}return a}function OI(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),o=Math.abs(t+e-r-r);return n<=a&&n<=o?t:a<=o?e:r}function MI(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function q0(t,e,r){var n=e*r,a=Math.floor(n/8),o=16-(n-8*a+r),u=(1<<r)-1;return aj(t,a)>>o&u}function y5(t,e,r,n){var a=r*n,o=Math.floor(a/8),u=16-(a-8*o+n),c=(1<<n)-1,f=(e&c)<<u;(function(p,m,b){if(m+1<p.byteLength)p.setUint16(m,b,!1);else{var A=b>>8&255;p.setUint8(m,A)}})(t,o,aj(t,o)&~(c<<u)&65535|f)}function aj(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function BI(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,u=1<<1+(7&a);t[e++],t[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var p=!0,m=[],b=0,A=null,y=0,D=null;for(this.width=r,this.height=n;p&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,D=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];b=t[e++]|t[e++]<<8,A=t[e++],1&S||(A=null),y=S>>2&7,e++;break;case 254:for(;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,z=t[e++],re=z>>6&1,ae=1<<1+(7&z),W=c,te=f,Q=!1;z>>7&&(Q=!0,W=e,te=ae,e+=3*ae);var fe=e;for(e++;;){var U;if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}m.push({x:E,y:_,width:O,height:T,has_local_palette:Q,palette_offset:W,palette_size:te,data_offset:fe,data_length:e-fe,transparent_index:A,interlaced:!!re,delay:b,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return D},this.frameInfo=function(F){if(F<0||F>=m.length)throw new Error("Frame index out of range.");return m[F]},this.decodeAndBlitFrameBGRA=function(F,X){var Y=this.frameInfo(F),Ne=Y.width*Y.height,be=new Uint8Array(Ne);b5(t,Y.data_offset,be,Ne);var we=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var me=Y.width,I=r-me,j=me,x=4*(Y.y*r+Y.x),C=4*((Y.y+Y.height)*r+Y.x),M=x,H=4*I;Y.interlaced===!0&&(H+=4*r*7);for(var ie=8,oe=0,ve=be.length;oe<ve;++oe){var Ce=be[oe];if(j===0&&(j=me,(M+=H)>=C&&(H=4*I+4*r*(ie-1),M=x+(me+I)*(ie<<1),ie>>=1)),Ce===se)M+=4;else{var Le=t[we+3*Ce],Ge=t[we+3*Ce+1],lt=t[we+3*Ce+2];X[M++]=lt,X[M++]=Ge,X[M++]=Le,X[M++]=255}--j}},this.decodeAndBlitFrameRGBA=function(F,X){var Y=this.frameInfo(F),Ne=Y.width*Y.height,be=new Uint8Array(Ne);b5(t,Y.data_offset,be,Ne);var we=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var me=Y.width,I=r-me,j=me,x=4*(Y.y*r+Y.x),C=4*((Y.y+Y.height)*r+Y.x),M=x,H=4*I;Y.interlaced===!0&&(H+=4*r*7);for(var ie=8,oe=0,ve=be.length;oe<ve;++oe){var Ce=be[oe];if(j===0&&(j=me,(M+=H)>=C&&(H=4*I+4*r*(ie-1),M=x+(me+I)*(ie<<1),ie>>=1)),Ce===se)M+=4;else{var Le=t[we+3*Ce],Ge=t[we+3*Ce+1],lt=t[we+3*Ce+2];X[M++]=Le,X[M++]=Ge,X[M++]=lt,X[M++]=255}--j}}}function b5(t,e,r,n){for(var a=t[e++],o=1<<a,u=o+1,c=u+1,f=a+1,p=(1<<f)-1,m=0,b=0,A=0,y=t[e++],D=new Int32Array(4096),S=null;;){for(;m<16&&y!==0;)b|=t[e++]<<m,m+=8,y===1?y=t[e++]:--y;if(m<f)break;var E=b&p;if(b>>=f,m-=f,E!==o){if(E===u)break;for(var _=E<c?E:S,O=0,T=_;T>o;)T=D[T]>>8,++O;var z=T;if(A+O+(_!==E?1:0)>n)return void Zn.log("Warning, gif stream longer than expected.");r[A++]=z;var re=A+=O;for(_!==E&&(r[A++]=z),T=_;O--;)T=D[T],r[--re]=255&T,T>>=8;S!==null&&c<4096&&(D[c++]=S<<8|z,c>=p+1&&f<12&&(++f,p=p<<1|1)),S=E}else c=u+1,p=(1<<(f=a+1))-1,S=null}return A!==n&&Zn.log("Warning, gif stream shorter than expected."),r}function U0(t){var e,r,n,a,o,u=Math.floor,c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),A=new Array(65535),y=new Array(64),D=new Array(64),S=[],E=0,_=7,O=new Array(64),T=new Array(64),z=new Array(64),re=new Array(256),ae=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],te=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],fe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function be(x,C){for(var M=0,H=0,ie=new Array,oe=1;oe<=16;oe++){for(var ve=1;ve<=x[oe];ve++)ie[C[H]]=[],ie[C[H]][0]=M,ie[C[H]][1]=oe,H++,M++;M*=2}return ie}function we(x){for(var C=x[0],M=x[1]-1;M>=0;)C&1<<M&&(E|=1<<_),M--,--_<0&&(E==255?(se(255),se(0)):se(E),_=7,E=0)}function se(x){S.push(x)}function me(x){se(x>>8&255),se(255&x)}function I(x,C,M,H,ie){for(var oe,ve=ie[0],Ce=ie[240],Le=(function(rt,At){var Ct,ue,he,Ie,Ze,Ve,ze,ot,ft,Et,St=0;for(ft=0;ft<8;++ft){Ct=rt[St],ue=rt[St+1],he=rt[St+2],Ie=rt[St+3],Ze=rt[St+4],Ve=rt[St+5],ze=rt[St+6];var yn=Ct+(ot=rt[St+7]),Cr=Ct-ot,yr=ue+ze,ur=ue-ze,Wr=he+Ve,Dt=he-Ve,_r=Ie+Ze,ir=Ie-Ze,gr=yn+_r,ln=yn-_r,mr=yr+Wr,Vt=yr-Wr;rt[St]=gr+mr,rt[St+4]=gr-mr;var fr=.707106781*(Vt+ln);rt[St+2]=ln+fr,rt[St+6]=ln-fr;var ss=.382683433*((gr=ir+Dt)-(Vt=ur+Cr)),En=.5411961*gr+ss,Js=1.306562965*Vt+ss,ys=.707106781*(mr=Dt+ur),Kt=Cr+ys,_n=Cr-ys;rt[St+5]=_n+En,rt[St+3]=_n-En,rt[St+1]=Kt+Js,rt[St+7]=Kt-Js,St+=8}for(St=0,ft=0;ft<8;++ft){Ct=rt[St],ue=rt[St+8],he=rt[St+16],Ie=rt[St+24],Ze=rt[St+32],Ve=rt[St+40],ze=rt[St+48];var qt=Ct+(ot=rt[St+56]),br=Ct-ot,hr=ue+ze,Pt=ue-ze,vr=he+Ve,ut=he-Ve,et=Ie+Ze,it=Ie-Ze,Qe=qt+et,st=qt-et,vt=hr+vr,wt=hr-vr;rt[St]=Qe+vt,rt[St+32]=Qe-vt;var kt=.707106781*(wt+st);rt[St+16]=st+kt,rt[St+48]=st-kt;var Lt=.382683433*((Qe=it+ut)-(wt=Pt+br)),It=.5411961*Qe+Lt,$t=1.306562965*wt+Lt,Ht=.707106781*(vt=ut+Pt),Qt=br+Ht,Yt=br-Ht;rt[St+40]=Yt+It,rt[St+24]=Yt-It,rt[St+8]=Qt+$t,rt[St+56]=Qt-$t,St++}for(ft=0;ft<64;++ft)Et=rt[ft]*At[ft],y[ft]=Et>0?Et+.5|0:Et-.5|0;return y})(x,C),Ge=0;Ge<64;++Ge)D[W[Ge]]=Le[Ge];var lt=D[0]-M;M=D[0],lt==0?we(H[0]):(we(H[A[oe=32767+lt]]),we(b[oe]));for(var tt=63;tt>0&&D[tt]==0;)tt--;if(tt==0)return we(ve),M;for(var ct,ee=1;ee<=tt;){for(var Re=ee;D[ee]==0&&ee<=tt;)++ee;var We=ee-Re;if(We>=16){ct=We>>4;for(var Ee=1;Ee<=ct;++Ee)we(Ce);We&=15}oe=32767+D[ee],we(ie[(We<<4)+A[oe]]),we(b[oe]),ee++}return tt!=63&&we(ve),M}function j(x){x=Math.min(Math.max(x,1),100),o!=x&&((function(C){for(var M=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var ie=u((M[H]*C+50)/100);ie=Math.min(Math.max(ie,1),255),c[W[H]]=ie}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var Ce=u((oe[ve]*C+50)/100);Ce=Math.min(Math.max(Ce,1),255),f[W[ve]]=Ce}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ge=0,lt=0;lt<8;lt++)for(var tt=0;tt<8;tt++)p[Ge]=1/(c[W[Ge]]*Le[lt]*Le[tt]*8),m[Ge]=1/(f[W[Ge]]*Le[lt]*Le[tt]*8),Ge++})(x<50?Math.floor(5e3/x):Math.floor(200-2*x)),o=x)}this.encode=function(x,C){C&&j(C),S=new Array,E=0,_=7,me(65496),me(65504),me(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),me(1),me(1),se(0),se(0),(function(){me(65499),me(132),se(0);for(var ue=0;ue<64;ue++)se(c[ue]);se(1);for(var he=0;he<64;he++)se(f[he])})(),(function(ue,he){me(65472),me(17),se(8),me(he),me(ue),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)})(x.width,x.height),(function(){me(65476),me(418),se(0);for(var ue=0;ue<16;ue++)se(te[ue+1]);for(var he=0;he<=11;he++)se(Q[he]);se(16);for(var Ie=0;Ie<16;Ie++)se(fe[Ie+1]);for(var Ze=0;Ze<=161;Ze++)se(U[Ze]);se(1);for(var Ve=0;Ve<16;Ve++)se(F[Ve+1]);for(var ze=0;ze<=11;ze++)se(X[ze]);se(17);for(var ot=0;ot<16;ot++)se(Y[ot+1]);for(var ft=0;ft<=161;ft++)se(Ne[ft])})(),me(65498),me(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var M=0,H=0,ie=0;E=0,_=7,this.encode.displayName="_encode_";for(var oe,ve,Ce,Le,Ge,lt,tt,ct,ee,Re=x.data,We=x.width,Ee=x.height,rt=4*We,At=0;At<Ee;){for(oe=0;oe<rt;){for(Ge=rt*At+oe,tt=-1,ct=0,ee=0;ee<64;ee++)lt=Ge+(ct=ee>>3)*rt+(tt=4*(7&ee)),At+ct>=Ee&&(lt-=rt*(At+1+ct-Ee)),oe+tt>=rt&&(lt-=oe+tt-rt+4),ve=Re[lt++],Ce=Re[lt++],Le=Re[lt++],O[ee]=(ae[ve]+ae[Ce+256|0]+ae[Le+512|0]>>16)-128,T[ee]=(ae[ve+768|0]+ae[Ce+1024|0]+ae[Le+1280|0]>>16)-128,z[ee]=(ae[ve+1280|0]+ae[Ce+1536|0]+ae[Le+1792|0]>>16)-128;M=I(O,p,M,e,n),H=I(T,m,H,r,a),ie=I(z,m,ie,r,a),oe+=32}At+=8}if(_>=0){var Ct=[];Ct[1]=_+1,Ct[0]=(1<<_+1)-1,we(Ct)}return me(65497),new Uint8Array(S)},t=t||50,(function(){for(var x=String.fromCharCode,C=0;C<256;C++)re[C]=x(C)})(),e=be(te,Q),r=be(F,X),n=be(fe,U),a=be(Y,Ne),(function(){for(var x=1,C=2,M=1;M<=15;M++){for(var H=x;H<C;H++)A[32767+H]=M,b[32767+H]=[],b[32767+H][1]=M,b[32767+H][0]=H;for(var ie=-(C-1);ie<=-x;ie++)A[32767+ie]=M,b[32767+ie]=[],b[32767+ie][1]=M,b[32767+ie][0]=C-1+ie;x<<=1,C<<=1}})(),(function(){for(var x=0;x<256;x++)ae[x]=19595*x,ae[x+256|0]=38470*x,ae[x+512|0]=7471*x+32768,ae[x+768|0]=-11059*x,ae[x+1024|0]=-21709*x,ae[x+1280|0]=32768*x+8421375,ae[x+1536|0]=-27439*x,ae[x+1792|0]=-5329*x})(),j(t)}function qo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function w5(t){function e(Q){if(!Q)throw Error("assert :P")}function r(Q,fe,U){for(var F=0;4>F;F++)if(Q[fe+F]!=U.charCodeAt(F))return!0;return!1}function n(Q,fe,U,F,X){for(var Y=0;Y<X;Y++)Q[fe+Y]=U[F+Y]}function a(Q,fe,U,F){for(var X=0;X<F;X++)Q[fe+X]=U}function o(Q){return new Int32Array(Q)}function u(Q,fe){for(var U=[],F=0;F<Q;F++)U.push(new fe);return U}function c(Q,fe){var U=[];return(function F(X,Y,Ne){for(var be=Ne[Y],we=0;we<be&&(X.push(Ne.length>Y+1?[]:new fe),!(Ne.length<Y+1));we++)F(X[we],Y+1,Ne)})(U,0,Q),U}var f=function(){var Q=this;function fe(h,v){for(var P=1<<v-1>>>0;h&P;)P>>>=1;return P?(h&P-1)+P:h}function U(h,v,P,R,V){e(!(R%P));do h[v+(R-=P)]=V;while(0<R)}function F(h,v,P,R,V){if(e(2328>=V),512>=V)var K=o(512);else if((K=o(V))==null)return 0;return(function(Z,J,ne,le,_e,Fe){var ce,ke,De=J,Xe=1<<ne,Be=o(16),Ke=o(16);for(e(_e!=0),e(le!=null),e(Z!=null),e(0<ne),ke=0;ke<_e;++ke){if(15<le[ke])return 0;++Be[le[ke]]}if(Be[0]==_e)return 0;for(Ke[1]=0,ce=1;15>ce;++ce){if(Be[ce]>1<<ce)return 0;Ke[ce+1]=Ke[ce]+Be[ce]}for(ke=0;ke<_e;++ke)ce=le[ke],0<le[ke]&&(Fe[Ke[ce]++]=ke);if(Ke[15]==1)return(le=new X).g=0,le.value=Fe[0],U(Z,De,1,Xe,le),Xe;var Ye,nt=-1,at=Xe-1,or=0,Ut=1,Vr=1,Zt=1<<ne;for(ke=0,ce=1,_e=2;ce<=ne;++ce,_e<<=1){if(Ut+=Vr<<=1,0>(Vr-=Be[ce]))return 0;for(;0<Be[ce];--Be[ce])(le=new X).g=ce,le.value=Fe[ke++],U(Z,De+or,_e,Zt,le),or=fe(or,ce)}for(ce=ne+1,_e=2;15>=ce;++ce,_e<<=1){if(Ut+=Vr<<=1,0>(Vr-=Be[ce]))return 0;for(;0<Be[ce];--Be[ce]){if(le=new X,(or&at)!=nt){for(De+=Zt,Ye=1<<(nt=ce)-ne;15>nt&&!(0>=(Ye-=Be[nt]));)++nt,Ye<<=1;Xe+=Zt=1<<(Ye=nt-ne),Z[J+(nt=or&at)].g=Ye+ne,Z[J+nt].value=De-J-nt}le.g=ce-ne,le.value=Fe[ke++],U(Z,De+(or>>ne),_e,Zt,le),or=fe(or,ce)}}return Ut!=2*Ke[15]-1?0:Xe})(h,v,P,R,V,K)}function X(){this.value=this.g=0}function Y(){this.value=this.g=0}function Ne(){this.G=u(5,X),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(ka,Y)}function be(h,v,P,R){e(h!=null),e(v!=null),e(2147483648>R),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=P,h.Jd=v,h.Yc=P+R,h.Zc=4<=R?P+R-4+1:P,ve(h)}function we(h,v){for(var P=0;0<v--;)P|=Le(h,128)<<v;return P}function se(h,v){var P=we(h,v);return Ce(h)?-P:P}function me(h,v,P,R){var V,K=0;for(e(h!=null),e(v!=null),e(4294967288>R),h.Sb=R,h.Ra=0,h.u=0,h.h=0,4<R&&(R=4),V=0;V<R;++V)K+=v[P+V]<<8*V;h.Ra=K,h.bb=R,h.oa=v,h.pa=P}function I(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ul-8>>>0,++h.bb,h.u-=8;H(h)&&(h.h=1,h.u=0)}function j(h,v){if(e(0<=v),!h.h&&v<=ma){var P=M(h)&pa[v];return h.u+=v,I(h),P}return h.h=1,h.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function M(h){return h.Ra>>>(h.u&ul-1)>>>0}function H(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ul}function ie(h,v){h.u=v,h.h=H(h)}function oe(h){h.u>=oo&&(e(h.u>=oo),I(h))}function ve(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ce(h){return we(h,1)}function Le(h,v){var P=h.Ca;0>h.b&&ve(h);var R=h.b,V=P*v>>>8,K=(h.I>>>R>V)+0;for(K?(P-=V,h.I-=V+1<<R>>>0):P=V+1,R=P,V=0;256<=R;)V+=8,R>>=8;return R=7^V+Ao[R],h.b-=R,h.Ca=(P<<R)-1,K}function Ge(h,v,P){h[v+0]=P>>24&255,h[v+1]=P>>16&255,h[v+2]=P>>8&255,h[v+3]=255&P}function lt(h,v){return h[v+0]|h[v+1]<<8}function tt(h,v){return lt(h,v)|h[v+2]<<16}function ct(h,v){return lt(h,v)|lt(h,v+2)<<16}function ee(h,v){var P=1<<v;return e(h!=null),e(0<v),h.X=o(P),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function Re(h,v){e(h!=null),e(v!=null),e(h.Xa==v.Xa),n(v.X,0,h.X,0,1<<v.Xa)}function We(){this.X=[],this.Xa=this.Mb=0}function Ee(h,v,P,R){e(P!=null),e(R!=null);var V=P[0],K=R[0];return V==0&&(V=(h*K+v/2)/v),K==0&&(K=(v*V+h/2)/h),0>=V||0>=K?0:(P[0]=V,R[0]=K,1)}function rt(h,v){return h+(1<<v)-1>>>v}function At(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Ct(h,v){Q[v]=function(P,R,V,K,Z,J,ne){var le;for(le=0;le<Z;++le){var _e=Q[h](J[ne+le-1],V,K+le);J[ne+le]=At(P[R+le],_e)}}}function ue(){this.ud=this.hd=this.jd=0}function he(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function Ie(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ze(h,v){return Ie(h+(h-v+.5>>1))}function Ve(h,v,P){return Math.abs(v-P)-Math.abs(h-P)}function ze(h,v,P,R,V,K,Z){for(R=K[Z-1],P=0;P<V;++P)K[Z+P]=R=At(h[v+P],R)}function ot(h,v,P,R,V){var K;for(K=0;K<P;++K){var Z=h[v+K],J=Z>>8&255,ne=16711935&(ne=(ne=16711935&Z)+((J<<16)+J));R[V+K]=(4278255360&Z)+ne>>>0}}function ft(h,v){v.jd=255&h,v.hd=h>>8&255,v.ud=h>>16&255}function Et(h,v,P,R,V,K){var Z;for(Z=0;Z<R;++Z){var J=v[P+Z],ne=J>>>8,le=J,_e=255&(_e=(_e=J>>>16)+((h.jd<<24>>24)*(ne<<24>>24)>>>5));le=255&(le=(le+=(h.hd<<24>>24)*(ne<<24>>24)>>>5)+((h.ud<<24>>24)*(_e<<24>>24)>>>5)),V[K+Z]=(4278255360&J)+(_e<<16)+le}}function St(h,v,P,R,V){Q[v]=function(K,Z,J,ne,le,_e,Fe,ce,ke){for(ne=Fe;ne<ce;++ne)for(Fe=0;Fe<ke;++Fe)le[_e++]=V(J[R(K[Z++])])},Q[h]=function(K,Z,J,ne,le,_e,Fe){var ce=8>>K.b,ke=K.Ea,De=K.K[0],Xe=K.w;if(8>ce)for(K=(1<<K.b)-1,Xe=(1<<ce)-1;Z<J;++Z){var Be,Ke=0;for(Be=0;Be<ke;++Be)Be&K||(Ke=R(ne[le++])),_e[Fe++]=V(De[Ke&Xe]),Ke>>=ce}else Q["VP8LMapColor"+P](ne,le,De,Xe,_e,Fe,Z,J,ke)}}function yn(h,v,P,R,V){for(P=v+P;v<P;){var K=h[v++];R[V++]=K>>16&255,R[V++]=K>>8&255,R[V++]=255&K}}function Cr(h,v,P,R,V){for(P=v+P;v<P;){var K=h[v++];R[V++]=K>>16&255,R[V++]=K>>8&255,R[V++]=255&K,R[V++]=K>>24&255}}function yr(h,v,P,R,V){for(P=v+P;v<P;){var K=(Z=h[v++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;R[V++]=K,R[V++]=Z}}function ur(h,v,P,R,V){for(P=v+P;v<P;){var K=(Z=h[v++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;R[V++]=K,R[V++]=Z}}function Wr(h,v,P,R,V){for(P=v+P;v<P;){var K=h[v++];R[V++]=255&K,R[V++]=K>>8&255,R[V++]=K>>16&255}}function Dt(h,v,P,R,V,K){if(K==0)for(P=v+P;v<P;)Ge(R,((K=h[v++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else n(R,V,h,v,P)}function _r(h,v){Q[v][0]=Q[h+"0"],Q[v][1]=Q[h+"1"],Q[v][2]=Q[h+"2"],Q[v][3]=Q[h+"3"],Q[v][4]=Q[h+"4"],Q[v][5]=Q[h+"5"],Q[v][6]=Q[h+"6"],Q[v][7]=Q[h+"7"],Q[v][8]=Q[h+"8"],Q[v][9]=Q[h+"9"],Q[v][10]=Q[h+"10"],Q[v][11]=Q[h+"11"],Q[v][12]=Q[h+"12"],Q[v][13]=Q[h+"13"],Q[v][14]=Q[h+"0"],Q[v][15]=Q[h+"0"]}function ir(h){return h==Cc||h==Zl||h==yu||h==bu}function gr(){this.eb=[],this.size=this.A=this.fb=0}function ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function mr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gr,this.f.kb=new ln,this.sd=null}function Vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function fr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ss(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function En(h,v){var P=h.T,R=v.ba.f.RGBA,V=R.eb,K=R.fb+h.ka*R.A,Z=Ki[v.ba.S],J=h.y,ne=h.O,le=h.f,_e=h.N,Fe=h.ea,ce=h.W,ke=v.cc,De=v.dc,Xe=v.Mc,Be=v.Nc,Ke=h.ka,Ye=h.ka+h.T,nt=h.U,at=nt+1>>1;for(Ke==0?Z(J,ne,null,null,le,_e,Fe,ce,le,_e,Fe,ce,V,K,null,null,nt):(Z(v.ec,v.fc,J,ne,ke,De,Xe,Be,le,_e,Fe,ce,V,K-R.A,V,K,nt),++P);Ke+2<Ye;Ke+=2)ke=le,De=_e,Xe=Fe,Be=ce,_e+=h.Rc,ce+=h.Rc,K+=2*R.A,Z(J,(ne+=2*h.fa)-h.fa,J,ne,ke,De,Xe,Be,le,_e,Fe,ce,V,K-R.A,V,K,nt);return ne+=h.fa,h.j+Ye<h.o?(n(v.ec,v.fc,J,ne,nt),n(v.cc,v.dc,le,_e,at),n(v.Mc,v.Nc,Fe,ce,at),P--):1&Ye||Z(J,ne,null,null,le,_e,Fe,ce,le,_e,Fe,ce,V,K+R.A,null,null,nt),P}function Js(h,v,P){var R=h.F,V=[h.J];if(R!=null){var K=h.U,Z=v.ba.S,J=Z==xu||Z==yu;v=v.ba.f.RGBA;var ne=[0],le=h.ka;ne[0]=h.T,h.Kb&&(le==0?--ne[0]:(--le,V[0]-=h.width),h.j+h.ka+h.T==h.o&&(ne[0]=h.o-h.j-le));var _e=v.eb;le=v.fb+le*v.A,h=gu(R,V[0],h.width,K,ne,_e,le+(J?0:3),v.A),e(P==ne),h&&ir(Z)&&Ql(_e,le,J,K,ne,v.A)}return 0}function ys(h){var v=h.ma,P=v.ba.S,R=11>P,V=P==pl||P==vu||P==xu||P==Mn||P==12||ir(P);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!xc(v.Oa,h,V?11:12))return 0;if(V&&ir(P)&&Co(),h.da)alert("todo:use_scaling");else{if(R){if(v.Ib=ss,h.Kb){if(P=h.U+1>>1,v.memory=o(h.U+2*P),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+P,v.Ib=En,Co()}}else alert("todo:EmitYUV");V&&(v.Jb=Js,R&&hi())}if(R&&!mi){for(h=0;256>h;++h)Qi[h]=89858*(h-128)+Wa>>Eo,Zi[h]=-22014*(h-128)+Wa,kc[h]=-45773*(h-128),ec[h]=113618*(h-128)+Wa>>Eo;for(h=Tn;h<Rn;++h)v=76283*(h-16)+Wa>>Eo,ad[h-Tn]=bn(v,255),Hh[h-Tn]=bn(v+8>>4,15);mi=1}return 1}function Kt(h){var v=h.ma,P=h.U,R=h.T;return e(!(1&h.ka)),0>=P||0>=R?0:(P=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,P),v.Dc+=P,1)}function _n(h){h.ma.memory=null}function qt(h,v,P,R){return j(h,8)!=47?0:(v[0]=j(h,14)+1,P[0]=j(h,14)+1,R[0]=j(h,1),j(h,3)!=0?0:!h.h)}function br(h,v){if(4>h)return h+1;var P=h-2>>1;return(2+(1&h)<<P)+j(v,P)+1}function hr(h,v){return 120<v?v-120:1<=(P=((P=lg[v-1])>>4)*h+(8-(15&P)))?P:1;var P}function Pt(h,v,P){var R=M(P),V=h[v+=255&R].g-8;return 0<V&&(ie(P,P.u+8),R=M(P),v+=h[v].value,v+=R&(1<<V)-1),ie(P,P.u+h[v].g),h[v].value}function vr(h,v,P){return P.g+=h.g,P.value+=h.value<<v>>>0,e(8>=P.g),h.g}function ut(h,v,P){var R=h.xc;return e((v=R==0?0:h.vc[h.md*(P>>R)+(v>>R)])<h.Wb),h.Ya[v]}function et(h,v,P,R){var V=h.ab,K=h.c*v,Z=h.C;v=Z+v;var J=P,ne=R;for(R=h.Ta,P=h.Ua;0<V--;){var le=h.gc[V],_e=Z,Fe=v,ce=J,ke=ne,De=(ne=R,J=P,le.Ea);switch(e(_e<Fe),e(Fe<=le.nc),le.hc){case 2:Ss(ce,ke,(Fe-_e)*De,ne,J);break;case 0:var Xe=_e,Be=Fe,Ke=ne,Ye=J,nt=(Zt=le).Ea;Xe==0&&(Po(ce,ke,null,null,1,Ke,Ye),ze(ce,ke+1,0,0,nt-1,Ke,Ye+1),ke+=nt,Ye+=nt,++Xe);for(var at=1<<Zt.b,or=at-1,Ut=rt(nt,Zt.b),Vr=Zt.K,Zt=Zt.w+(Xe>>Zt.b)*Ut;Xe<Be;){var fn=Vr,ps=Zt,Kr=1;for(lo(ce,ke,Ke,Ye-nt,1,Ke,Ye);Kr<nt;){var zt=(Kr&~or)+at;zt>nt&&(zt=nt),(0,Hl[fn[ps++]>>8&15])(ce,ke+ +Kr,Ke,Ye+Kr-nt,zt-Kr,Ke,Ye+Kr),Kr=zt}ke+=nt,Ye+=nt,++Xe&or||(Zt+=Ut)}Fe!=le.nc&&n(ne,J-De,ne,J+(Fe-_e-1)*De,De);break;case 1:for(De=ce,Be=ke,nt=(ce=le.Ea)-(Ye=ce&~(Ke=(ke=1<<le.b)-1)),Xe=rt(ce,le.b),at=le.K,le=le.w+(_e>>le.b)*Xe;_e<Fe;){for(or=at,Ut=le,Vr=new ue,Zt=Be+Ye,fn=Be+ce;Be<Zt;)ft(or[Ut++],Vr),bc(Vr,De,Be,ke,ne,J),Be+=ke,J+=ke;Be<fn&&(ft(or[Ut++],Vr),bc(Vr,De,Be,nt,ne,J),Be+=nt,J+=nt),++_e&Ke||(le+=Xe)}break;case 3:if(ce==ne&&ke==J&&0<le.b){for(Be=ne,ce=De=J+(Fe-_e)*De-(Ye=(Fe-_e)*rt(le.Ea,le.b)),ke=ne,Ke=J,Xe=[],Ye=(nt=Ye)-1;0<=Ye;--Ye)Xe[Ye]=ke[Ke+Ye];for(Ye=nt-1;0<=Ye;--Ye)Be[ce+Ye]=Xe[Ye];$l(le,_e,Fe,ne,De,ne,J)}else $l(le,_e,Fe,ce,ke,ne,J)}J=R,ne=P}ne!=P&&n(R,P,J,ne,K)}function it(h,v){var P=h.V,R=h.Ba+h.c*h.C,V=v-h.C;if(e(v<=h.l.o),e(16>=V),0<V){var K=h.l,Z=h.Ta,J=h.Ua,ne=K.width;if(et(h,V,P,R),V=J=[J],e((P=h.C)<(R=v)),e(K.v<K.va),R>K.o&&(R=K.o),P<K.j){var le=K.j-P;P=K.j,V[0]+=le*ne}if(P>=R?P=0:(V[0]+=4*K.v,K.ka=P-K.j,K.U=K.va-K.v,K.T=R-P,P=1),P){if(J=J[0],11>(P=h.ca).S){var _e=P.f.RGBA,Fe=(R=P.S,V=K.U,K=K.T,le=_e.eb,_e.A),ce=K;for(_e=_e.fb+h.Ma*_e.A;0<ce--;){var ke=Z,De=J,Xe=V,Be=le,Ke=_e;switch(R){case rd:wc(ke,De,Xe,Be,Ke);break;case pl:ko(ke,De,Xe,Be,Ke);break;case Cc:ko(ke,De,Xe,Be,Ke),Ql(Be,Ke,0,Xe,1,0);break;case qh:Wl(ke,De,Xe,Be,Ke);break;case vu:Dt(ke,De,Xe,Be,Ke,1);break;case Zl:Dt(ke,De,Xe,Be,Ke,1),Ql(Be,Ke,0,Xe,1,0);break;case xu:Dt(ke,De,Xe,Be,Ke,0);break;case yu:Dt(ke,De,Xe,Be,Ke,0),Ql(Be,Ke,1,Xe,1,0);break;case Mn:dl(ke,De,Xe,Be,Ke);break;case bu:dl(ke,De,Xe,Be,Ke),vf(Be,Ke,Xe,1,0);break;case nd:fl(ke,De,Xe,Be,Ke);break;default:e(0)}J+=ne,_e+=Fe}h.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=P.height)}}h.C=v,e(h.C<=h.i)}function Qe(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var P=h.Ya[v].G,R=h.Ya[v].H;if(0<P[1][R[1]+0].g||0<P[2][R[2]+0].g||0<P[3][R[3]+0].g)return 0}return 1}function st(h,v,P,R,V,K){if(h.Z!=0){var Z=h.qd,J=h.rd;for(e(ji[h.Z]!=null);v<P;++v)ji[h.Z](Z,J,R,V,R,V,K),Z=R,J=V,V+=K;h.qd=Z,h.rd=J}}function vt(h,v){var P=h.l.ma,R=P.Z==0||P.Z==1?h.l.j:h.C;if(R=h.C<R?R:h.C,e(v<=h.l.o),v>R){var V=h.l.width,K=P.ca,Z=P.tb+V*R,J=h.V,ne=h.Ba+h.c*R,le=h.gc;e(h.ab==1),e(le[0].hc==3),Va(le[0],R,v,J,ne,K,Z),st(P,R,v,K,Z,V)}h.C=h.Ma=v}function wt(h,v,P,R,V,K,Z){var J=h.$/R,ne=h.$%R,le=h.m,_e=h.s,Fe=P+h.$,ce=Fe;V=P+R*V;var ke=P+R*K,De=280+_e.ua,Xe=h.Pb?J:16777216,Be=0<_e.ua?_e.Wa:null,Ke=_e.wc,Ye=Fe<ke?ut(_e,ne,J):null;e(h.C<K),e(ke<=V);var nt=!1;e:for(;;){for(;nt||Fe<ke;){var at=0;if(J>=Xe){var or=Fe-P;e((Xe=h).Pb),Xe.wd=Xe.m,Xe.xd=or,0<Xe.s.ua&&Re(Xe.s.Wa,Xe.s.vb),Xe=J+id}if(ne&Ke||(Ye=ut(_e,ne,J)),e(Ye!=null),Ye.Qb&&(v[Fe]=Ye.qb,nt=!0),!nt)if(oe(le),Ye.jc){at=le,or=v;var Ut=Fe,Vr=Ye.pd[M(at)&ka-1];e(Ye.jc),256>Vr.g?(ie(at,at.u+Vr.g),or[Ut]=Vr.value,at=0):(ie(at,at.u+Vr.g-256),e(256<=Vr.value),at=Vr.value),at==0&&(nt=!0)}else at=Pt(Ye.G[0],Ye.H[0],le);if(le.h)break;if(nt||256>at){if(!nt)if(Ye.nd)v[Fe]=(Ye.qb|at<<8)>>>0;else{if(oe(le),nt=Pt(Ye.G[1],Ye.H[1],le),oe(le),or=Pt(Ye.G[2],Ye.H[2],le),Ut=Pt(Ye.G[3],Ye.H[3],le),le.h)break;v[Fe]=(Ut<<24|nt<<16|at<<8|or)>>>0}if(nt=!1,++Fe,++ne>=R&&(ne=0,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J),Be!=null))for(;ce<Fe;)at=v[ce++],Be.X[(506832829*at&4294967295)>>>Be.Mb]=at}else if(280>at){if(at=br(at-256,le),or=Pt(Ye.G[4],Ye.H[4],le),oe(le),or=hr(R,or=br(or,le)),le.h)break;if(Fe-P<or||V-Fe<at)break e;for(Ut=0;Ut<at;++Ut)v[Fe+Ut]=v[Fe+Ut-or];for(Fe+=at,ne+=at;ne>=R;)ne-=R,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J);if(e(Fe<=V),ne&Ke&&(Ye=ut(_e,ne,J)),Be!=null)for(;ce<Fe;)at=v[ce++],Be.X[(506832829*at&4294967295)>>>Be.Mb]=at}else{if(!(at<De))break e;for(nt=at-280,e(Be!=null);ce<Fe;)at=v[ce++],Be.X[(506832829*at&4294967295)>>>Be.Mb]=at;at=Fe,e(!(nt>>>(or=Be).Xa)),v[at]=or.X[nt],nt=!0}nt||e(le.h==H(le))}if(h.Pb&&le.h&&Fe<V)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Re(h.s.vb,h.s.Wa);else{if(le.h)break e;Z?.(h,J>K?K:J),h.a=0,h.$=Fe-P}return 1}return h.a=3,0}function kt(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,e(h!=null)}function Lt(){var h=new Xt;return h==null?null:(h.a=0,h.xb=Ac,_r("Predictor","VP8LPredictors"),_r("Predictor","VP8LPredictors_C"),_r("PredictorAdd","VP8LPredictorsAdd"),_r("PredictorAdd","VP8LPredictorsAdd_C"),Ss=ot,bc=Et,wc=yn,ko=Cr,dl=yr,fl=ur,Wl=Wr,Q.VP8LMapColor32b=co,Q.VP8LMapColor8b=Vl,h)}function It(h,v,P,R,V){var K=1,Z=[h],J=[v],ne=R.m,le=R.s,_e=null,Fe=0;e:for(;;){if(P)for(;K&&j(ne,1);){var ce=Z,ke=J,De=R,Xe=1,Be=De.m,Ke=De.gc[De.ab],Ye=j(Be,2);if(De.Oc&1<<Ye)K=0;else{switch(De.Oc|=1<<Ye,Ke.hc=Ye,Ke.Ea=ce[0],Ke.nc=ke[0],Ke.K=[null],++De.ab,e(4>=De.ab),Ye){case 0:case 1:Ke.b=j(Be,3)+2,Xe=It(rt(Ke.Ea,Ke.b),rt(Ke.nc,Ke.b),0,De,Ke.K),Ke.K=Ke.K[0];break;case 3:var nt,at=j(Be,8)+1,or=16<at?0:4<at?1:2<at?2:3;if(ce[0]=rt(Ke.Ea,or),Ke.b=or,nt=Xe=It(at,1,0,De,Ke.K)){var Ut,Vr=at,Zt=Ke,fn=1<<(8>>Zt.b),ps=o(fn);if(ps==null)nt=0;else{var Kr=Zt.K[0],zt=Zt.w;for(ps[0]=Zt.K[0][0],Ut=1;Ut<1*Vr;++Ut)ps[Ut]=At(Kr[zt+Ut],ps[Ut-1]);for(;Ut<4*fn;++Ut)ps[Ut]=0;Zt.K[0]=null,Zt.K[0]=ps,nt=1}}Xe=nt;break;case 2:break;default:e(0)}K=Xe}}if(Z=Z[0],J=J[0],K&&j(ne,1)&&!(K=1<=(Fe=j(ne,4))&&11>=Fe)){R.a=3;break e}var Tt;if(Tt=K)t:{var js,Lr,un,Hn=R,si=Z,Is=J,os=Fe,Vs=P,ii=Hn.m,Jn=Hn.s,mn=[null],Nn=1,es=0,Sn=zh[os];r:for(;;){if(Vs&&j(ii,1)){var ms=j(ii,3)+2,gs=rt(si,ms),Bn=rt(Is,ms),Ci=gs*Bn;if(!It(gs,Bn,0,Hn,mn))break r;for(mn=mn[0],Jn.xc=ms,js=0;js<Ci;++js){var Dn=mn[js]>>8&65535;mn[js]=Dn,Dn>=Nn&&(Nn=Dn+1)}}if(ii.h)break r;for(Lr=0;5>Lr;++Lr){var qn=Yl[Lr];!Lr&&0<os&&(qn+=1<<os),es<qn&&(es=qn)}var Fs=u(Nn*Sn,X),gi=Nn,Yi=u(gi,Ne);if(Yi==null)var Cs=null;else e(65536>=gi),Cs=Yi;var _s=o(es);if(Cs==null||_s==null||Fs==null){Hn.a=1;break r}var _i=Fs;for(js=un=0;js<Nn;++js){var Un=Cs[js],Ai=Un.G,La=Un.H,Ga=0,ai=1,As=0;for(Lr=0;5>Lr;++Lr){qn=Yl[Lr],Ai[Lr]=_i,La[Lr]=un,!Lr&&0<os&&(qn+=1<<os);s:{var vl,Ro=qn,Tc=Hn,ho=_s,Gh=_i,kf=un,Qn=0,Ka=Tc.m,Tf=j(Ka,1);if(a(ho,0,0,Ro),Tf){var Ef=j(Ka,1)+1,od=j(Ka,1),ld=j(Ka,od==0?1:8);ho[ld]=1,Ef==2&&(ho[ld=j(Ka,8)]=1);var po=1}else{var ts=o(19),Os=j(Ka,4)+4;if(19<Os){Tc.a=3;var Ps=0;break s}for(vl=0;vl<Os;++vl)ts[og[vl]]=j(Ka,3);var Ec=void 0,Do=void 0,Lc=Tc,hg=ts,Hs=Ro,cd=ho,Cu=0,mo=Lc.m,Qa=8,ga=u(128,X);n:for(;F(ga,0,7,hg,19);){if(j(mo,1)){var _u=2+2*j(mo,3);if((Ec=2+j(mo,_u))>Hs)break n}else Ec=Hs;for(Do=0;Do<Hs&&Ec--;){oe(mo);var ud=ga[0+(127&M(mo))];ie(mo,mo.u+ud.g);var xl=ud.value;if(16>xl)cd[Do++]=xl,xl!=0&&(Qa=xl);else{var Kh=xl==16,Lf=xl-16,Qh=sd[Lf],Rf=j(mo,wu[Lf])+Qh;if(Do+Rf>Hs)break n;for(var Zh=Kh?Qa:0;0<Rf--;)cd[Do++]=Zh}}Cu=1;break n}Cu||(Lc.a=3),po=Cu}(po=po&&!Ka.h)&&(Qn=F(Gh,kf,8,ho,Ro)),po&&Qn!=0?Ps=Qn:(Tc.a=3,Ps=0)}if(Ps==0)break r;if(ai&&Uh[Lr]==1&&(ai=_i[un].g==0),Ga+=_i[un].g,un+=Ps,3>=Lr){var Rc,dd=_s[0];for(Rc=1;Rc<qn;++Rc)_s[Rc]>dd&&(dd=_s[Rc]);As+=dd}}if(Un.nd=ai,Un.Qb=0,ai&&(Un.qb=(Ai[3][La[3]+0].value<<24|Ai[1][La[1]+0].value<<16|Ai[2][La[2]+0].value)>>>0,Ga==0&&256>Ai[0][La[0]+0].value&&(Un.Qb=1,Un.qb+=Ai[0][La[0]+0].value<<8)),Un.jc=!Un.Qb&&6>As,Un.jc){var Au,va=Un;for(Au=0;Au<ka;++Au){var Io=Au,Za=va.pd[Io],rc=va.G[0][va.H[0]+Io];256<=rc.value?(Za.g=rc.g+256,Za.value=rc.value):(Za.g=0,Za.value=0,Io>>=vr(rc,8,Za),Io>>=vr(va.G[1][va.H[1]+Io],16,Za),Io>>=vr(va.G[2][va.H[2]+Io],0,Za),vr(va.G[3][va.H[3]+Io],24,Za))}}}Jn.vc=mn,Jn.Wb=Nn,Jn.Ya=Cs,Jn.yc=Fs,Tt=1;break t}Tt=0}if(!(K=Tt)){R.a=3;break e}if(0<Fe){if(le.ua=1<<Fe,!ee(le.Wa,Fe)){R.a=1,K=0;break e}}else le.ua=0;var fd=R,hd=Z,Yh=J,pd=fd.s,md=pd.xc;if(fd.c=hd,fd.i=Yh,pd.md=rt(hd,md),pd.wc=md==0?-1:(1<<md)-1,P){R.xb=fo;break e}if((_e=o(Z*J))==null){R.a=1,K=0;break e}K=(K=wt(R,_e,0,Z,J,J,null))&&!ne.h;break e}return K?(V!=null?V[0]=_e:(e(_e==null),e(P)),R.$=0,P||kt(le)):kt(le),K}function $t(h,v){var P=h.c*h.i,R=P+v+16*v;return e(h.c<=v),h.V=o(R),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+P+v,1)}function Ht(h,v){var P=h.C,R=v-P,V=h.V,K=h.Ba+h.c*P;for(e(v<=h.l.o);0<R;){var Z=16<R?16:R,J=h.l.ma,ne=h.l.width,le=ne*Z,_e=J.ca,Fe=J.tb+ne*P,ce=h.Ta,ke=h.Ua;et(h,Z,V,K),xf(ce,ke,_e,Fe,le),st(J,P,P+Z,_e,Fe,ne),R-=Z,V+=Z*h.c,P+=Z}e(P==v),h.C=h.Ma=v}function Qt(){this.ub=this.yd=this.td=this.Rb=0}function Yt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ar(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function wr(){this.Yb=(function(){var h=[];return(function v(P,R,V){for(var K=V[R],Z=0;Z<K&&(P.push(V.length>R+1?[]:0),!(V.length<R+1));Z++)v(P[Z],R+1,V)})(h,0,[3,11]),h})()}function zr(){this.jb=o(3),this.Wc=c([4,8],wr),this.Xc=c([4,17],wr)}function Pr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function tr(){this.ld=this.La=this.dd=this.tc=0}function ar(){this.Na=this.la=0}function rr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Nr(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Or(){this.uc=this.M=this.Nb=0,this.wa=Array(new tr),this.Y=0,this.ya=Array(new Nr),this.aa=0,this.l=new ei}function Xr(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Us(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Qt,this.Kc=new Yt,this.ed=new Pr,this.Qa=new Ar,this.Ic=this.$c=this.Aa=0,this.D=new Or,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,x),this.ia=0,this.pb=u(4,rr),this.Pa=new zr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xr),this.Hd=0,this.rb=Array(new ar),this.sb=0,this.wa=Array(new tr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Nr),this.L=this.aa=0,this.gd=c([4,2],tr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bn(h,v){return 0>h?0:h>v?v:h}function ei(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gn(){var h=new Us;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Xl||(Xl=bi)),h}function Gr(h,v,P){return h.a==0&&(h.a=v,h.sc=P,h.cb=0),0}function Fn(h,v,P){return 3<=P&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function is(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return Gr(h,2,"null VP8Io passed to VP8GetHeaders()");var P=v.data,R=v.w,V=v.ha;if(4>V)return Gr(h,7,"Truncated header.");var K=P[R+0]|P[R+1]<<8|P[R+2]<<16,Z=h.Od;if(Z.Rb=!(1&K),Z.td=K>>1&7,Z.yd=K>>4&1,Z.ub=K>>5,3<Z.td)return Gr(h,3,"Incorrect keyframe parameters.");if(!Z.yd)return Gr(h,4,"Frame not displayable.");R+=3,V-=3;var J=h.Kc;if(Z.Rb){if(7>V)return Gr(h,7,"cannot parse picture header");if(!Fn(P,R,V))return Gr(h,3,"Bad code word");J.c=16383&(P[R+4]<<8|P[R+3]),J.Td=P[R+4]>>6,J.i=16383&(P[R+6]<<8|P[R+5]),J.Ud=P[R+6]>>6,R+=7,V-=7,h.za=J.c+15>>4,h.Ub=J.i+15>>4,v.width=J.c,v.height=J.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a((K=h.Pa).jb,0,255,K.jb.length),e((K=h.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,a(K.Zb,0,0,K.Zb.length),a(K.Lb,0,0,K.Lb)}if(Z.ub>V)return Gr(h,7,"bad partition length");be(K=h.m,P,R,Z.ub),R+=Z.ub,V-=Z.ub,Z.Rb&&(J.Ld=Ce(K),J.Kd=Ce(K)),J=h.Qa;var ne,le=h.Pa;if(e(K!=null),e(J!=null),J.Cb=Ce(K),J.Cb){if(J.Bb=Ce(K),Ce(K)){for(J.Fb=Ce(K),ne=0;4>ne;++ne)J.Zb[ne]=Ce(K)?se(K,7):0;for(ne=0;4>ne;++ne)J.Lb[ne]=Ce(K)?se(K,6):0}if(J.Bb)for(ne=0;3>ne;++ne)le.jb[ne]=Ce(K)?we(K,8):255}else J.Bb=0;if(K.Ka)return Gr(h,3,"cannot parse segment header");if((J=h.ed).zd=Ce(K),J.Tb=we(K,6),J.wb=we(K,3),J.Pc=Ce(K),J.Pc&&Ce(K)){for(le=0;4>le;++le)Ce(K)&&(J.vd[le]=se(K,6));for(le=0;4>le;++le)Ce(K)&&(J.od[le]=se(K,6))}if(h.L=J.Tb==0?0:J.zd?1:2,K.Ka)return Gr(h,3,"cannot parse filter header");var _e=V;if(V=ne=R,R=ne+_e,J=_e,h.Xb=(1<<we(h.m,2))-1,_e<3*(le=h.Xb))P=7;else{for(ne+=3*le,J-=3*le,_e=0;_e<le;++_e){var Fe=P[V+0]|P[V+1]<<8|P[V+2]<<16;Fe>J&&(Fe=J),be(h.Jc[+_e],P,ne,Fe),ne+=Fe,J-=Fe,V+=3}be(h.Jc[+le],P,ne,J),P=ne<R?0:5}if(P!=0)return Gr(h,P,"cannot parse partitions");for(P=we(ne=h.m,7),V=Ce(ne)?se(ne,4):0,R=Ce(ne)?se(ne,4):0,J=Ce(ne)?se(ne,4):0,le=Ce(ne)?se(ne,4):0,ne=Ce(ne)?se(ne,4):0,_e=h.Qa,Fe=0;4>Fe;++Fe){if(_e.Cb){var ce=_e.Zb[Fe];_e.Fb||(ce+=P)}else{if(0<Fe){h.pb[Fe]=h.pb[0];continue}ce=P}var ke=h.pb[Fe];ke.Sc[0]=_c[bn(ce+V,127)],ke.Sc[1]=Nu[bn(ce+0,127)],ke.Eb[0]=2*_c[bn(ce+R,127)],ke.Eb[1]=101581*Nu[bn(ce+J,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=_c[bn(ce+le,117)],ke.Qc[1]=Nu[bn(ce+ne,127)],ke.lc=ce+ne}if(!Z.Rb)return Gr(h,4,"Not a key frame.");for(Ce(K),Z=h.Pa,P=0;4>P;++P){for(V=0;8>V;++V)for(R=0;3>R;++R)for(J=0;11>J;++J)le=Le(K,ug[P][V][R][J])?we(K,8):Vh[P][V][R][J],Z.Wc[P][V].Yb[R][J]=le;for(V=0;17>V;++V)Z.Xc[P][V]=Z.Wc[P][_f[V]]}return h.kc=Ce(K),h.kc&&(h.Bd=we(K,8)),h.cb=1}function bi(h,v,P,R,V,K,Z){var J=v[V].Yb[P];for(P=0;16>V;++V){if(!Le(h,J[P+0]))return V;for(;!Le(h,J[P+1]);)if(J=v[++V].Yb[0],P=0,V==16)return 16;var ne=v[V+1].Yb;if(Le(h,J[P+2])){var le=h,_e=0;if(Le(le,(ce=J)[(Fe=P)+3]))if(Le(le,ce[Fe+6])){for(J=0,Fe=2*(_e=Le(le,ce[Fe+8]))+(ce=Le(le,ce[Fe+9+_e])),_e=0,ce=jf[Fe];ce[J];++J)_e+=_e+Le(le,ce[J]);_e+=3+(8<<Fe)}else Le(le,ce[Fe+7])?(_e=7+2*Le(le,165),_e+=Le(le,145)):_e=5+Le(le,159);else _e=Le(le,ce[Fe+4])?3+Le(le,ce[Fe+5]):2;J=ne[2]}else _e=1,J=ne[1];ne=Z+Cf[V],0>(le=h).b&&ve(le);var Fe,ce=le.b,ke=(Fe=le.Ca>>1)-(le.I>>ce)>>31;--le.b,le.Ca+=ke,le.Ca|=1,le.I-=(Fe+1&ke)<<ce,K[ne]=((_e^ke)-ke)*R[(0<V)+0]}return 16}function wo(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function Ui(h,v,P,R,V){V=h[v+P+32*R]+(V>>3),h[v+P+32*R]=-256&V?0>V?0:255:V}function bs(h,v,P,R,V,K){Ui(h,v,0,P,R+V),Ui(h,v,1,P,R+K),Ui(h,v,2,P,R-K),Ui(h,v,3,P,R-V)}function da(h){return(20091*h>>16)+h}function Ol(h,v,P,R){var V,K=0,Z=o(16);for(V=0;4>V;++V){var J=h[v+0]+h[v+8],ne=h[v+0]-h[v+8],le=(35468*h[v+4]>>16)-da(h[v+12]),_e=da(h[v+4])+(35468*h[v+12]>>16);Z[K+0]=J+_e,Z[K+1]=ne+le,Z[K+2]=ne-le,Z[K+3]=J-_e,K+=4,v++}for(V=K=0;4>V;++V)J=(h=Z[K+0]+4)+Z[K+8],ne=h-Z[K+8],le=(35468*Z[K+4]>>16)-da(Z[K+12]),Ui(P,R,0,0,J+(_e=da(Z[K+4])+(35468*Z[K+12]>>16))),Ui(P,R,1,0,ne+le),Ui(P,R,2,0,ne-le),Ui(P,R,3,0,J-_e),K++,R+=32}function zs(h,v,P,R){var V=h[v+0]+4,K=35468*h[v+4]>>16,Z=da(h[v+4]),J=35468*h[v+1]>>16;bs(P,R,0,V+Z,h=da(h[v+1]),J),bs(P,R,1,V+K,h,J),bs(P,R,2,V-K,h,J),bs(P,R,3,V-Z,h,J)}function q(h,v,P,R,V){Ol(h,v,P,R),V&&Ol(h,v+16,P,R+4)}function pe(h,v,P,R){Gl(h,v+0,P,R,1),Gl(h,v+32,P,R+128,1)}function ye(h,v,P,R){var V;for(h=h[v+0]+4,V=0;4>V;++V)for(v=0;4>v;++v)Ui(P,R,v,V,h)}function Pe(h,v,P,R){h[v+0]&&wn(h,v+0,P,R),h[v+16]&&wn(h,v+16,P,R+4),h[v+32]&&wn(h,v+32,P,R+128),h[v+48]&&wn(h,v+48,P,R+128+4)}function je(h,v,P,R){var V,K=o(16);for(V=0;4>V;++V){var Z=h[v+0+V]+h[v+12+V],J=h[v+4+V]+h[v+8+V],ne=h[v+4+V]-h[v+8+V],le=h[v+0+V]-h[v+12+V];K[0+V]=Z+J,K[8+V]=Z-J,K[4+V]=le+ne,K[12+V]=le-ne}for(V=0;4>V;++V)Z=(h=K[0+4*V]+3)+K[3+4*V],J=K[1+4*V]+K[2+4*V],ne=K[1+4*V]-K[2+4*V],le=h-K[3+4*V],P[R+0]=Z+J>>3,P[R+16]=le+ne>>3,P[R+32]=Z-J>>3,P[R+48]=le-ne>>3,R+=64}function Wt(h,v,P){var R,V=v-32,K=Ii,Z=255-h[V-1];for(R=0;R<P;++R){var J,ne=K,le=Z+h[v-1];for(J=0;J<P;++J)h[v+J]=ne[le+h[V+J]];v+=32}}function On(h,v){Wt(h,v,4)}function pr(h,v){Wt(h,v,8)}function Kn(h,v){Wt(h,v,16)}function Ls(h,v){var P;for(P=0;16>P;++P)n(h,v+32*P,h,v-32,16)}function us(h,v){var P;for(P=16;0<P;--P)a(h,v,h[v-1],16),v+=32}function ws(h,v,P){var R;for(R=0;16>R;++R)a(v,P+32*R,h,16)}function ti(h,v){var P,R=16;for(P=0;16>P;++P)R+=h[v-1+32*P]+h[v+P-32];ws(R>>5,h,v)}function $s(h,v){var P,R=8;for(P=0;16>P;++P)R+=h[v-1+32*P];ws(R>>4,h,v)}function wi(h,v){var P,R=8;for(P=0;16>P;++P)R+=h[v+P-32];ws(R>>4,h,v)}function xt(h,v){ws(128,h,v)}function _t(h,v,P){return h+2*v+P+2>>2}function zi(h,v){var P,R=v-32;for(R=new Uint8Array([_t(h[R-1],h[R+0],h[R+1]),_t(h[R+0],h[R+1],h[R+2]),_t(h[R+1],h[R+2],h[R+3]),_t(h[R+2],h[R+3],h[R+4])]),P=0;4>P;++P)n(h,v+32*P,R,0,R.length)}function Ml(h,v){var P=h[v-1],R=h[v-1+32],V=h[v-1+64],K=h[v-1+96];Ge(h,v+0,16843009*_t(h[v-1-32],P,R)),Ge(h,v+32,16843009*_t(P,R,V)),Ge(h,v+64,16843009*_t(R,V,K)),Ge(h,v+96,16843009*_t(V,K,K))}function nl(h,v){var P,R=4;for(P=0;4>P;++P)R+=h[v+P-32]+h[v-1+32*P];for(R>>=3,P=0;4>P;++P)a(h,v+32*P,R,4)}function ci(h,v){var P=h[v-1+0],R=h[v-1+32],V=h[v-1+64],K=h[v-1-32],Z=h[v+0-32],J=h[v+1-32],ne=h[v+2-32],le=h[v+3-32];h[v+0+96]=_t(R,V,h[v-1+96]),h[v+1+96]=h[v+0+64]=_t(P,R,V),h[v+2+96]=h[v+1+64]=h[v+0+32]=_t(K,P,R),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=_t(Z,K,P),h[v+3+64]=h[v+2+32]=h[v+1+0]=_t(J,Z,K),h[v+3+32]=h[v+2+0]=_t(ne,J,Z),h[v+3+0]=_t(le,ne,J)}function Ni(h,v){var P=h[v+1-32],R=h[v+2-32],V=h[v+3-32],K=h[v+4-32],Z=h[v+5-32],J=h[v+6-32],ne=h[v+7-32];h[v+0+0]=_t(h[v+0-32],P,R),h[v+1+0]=h[v+0+32]=_t(P,R,V),h[v+2+0]=h[v+1+32]=h[v+0+64]=_t(R,V,K),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=_t(V,K,Z),h[v+3+32]=h[v+2+64]=h[v+1+96]=_t(K,Z,J),h[v+3+64]=h[v+2+96]=_t(Z,J,ne),h[v+3+96]=_t(J,ne,ne)}function $n(h,v){var P=h[v-1+0],R=h[v-1+32],V=h[v-1+64],K=h[v-1-32],Z=h[v+0-32],J=h[v+1-32],ne=h[v+2-32],le=h[v+3-32];h[v+0+0]=h[v+1+64]=K+Z+1>>1,h[v+1+0]=h[v+2+64]=Z+J+1>>1,h[v+2+0]=h[v+3+64]=J+ne+1>>1,h[v+3+0]=ne+le+1>>1,h[v+0+96]=_t(V,R,P),h[v+0+64]=_t(R,P,K),h[v+0+32]=h[v+1+96]=_t(P,K,Z),h[v+1+32]=h[v+2+96]=_t(K,Z,J),h[v+2+32]=h[v+3+96]=_t(Z,J,ne),h[v+3+32]=_t(J,ne,le)}function ds(h,v){var P=h[v+0-32],R=h[v+1-32],V=h[v+2-32],K=h[v+3-32],Z=h[v+4-32],J=h[v+5-32],ne=h[v+6-32],le=h[v+7-32];h[v+0+0]=P+R+1>>1,h[v+1+0]=h[v+0+64]=R+V+1>>1,h[v+2+0]=h[v+1+64]=V+K+1>>1,h[v+3+0]=h[v+2+64]=K+Z+1>>1,h[v+0+32]=_t(P,R,V),h[v+1+32]=h[v+0+96]=_t(R,V,K),h[v+2+32]=h[v+1+96]=_t(V,K,Z),h[v+3+32]=h[v+2+96]=_t(K,Z,J),h[v+3+64]=_t(Z,J,ne),h[v+3+96]=_t(J,ne,le)}function ui(h,v){var P=h[v-1+0],R=h[v-1+32],V=h[v-1+64],K=h[v-1+96];h[v+0+0]=P+R+1>>1,h[v+2+0]=h[v+0+32]=R+V+1>>1,h[v+2+32]=h[v+0+64]=V+K+1>>1,h[v+1+0]=_t(P,R,V),h[v+3+0]=h[v+1+32]=_t(R,V,K),h[v+3+32]=h[v+1+64]=_t(V,K,K),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=K}function $i(h,v){var P=h[v-1+0],R=h[v-1+32],V=h[v-1+64],K=h[v-1+96],Z=h[v-1-32],J=h[v+0-32],ne=h[v+1-32],le=h[v+2-32];h[v+0+0]=h[v+2+32]=P+Z+1>>1,h[v+0+32]=h[v+2+64]=R+P+1>>1,h[v+0+64]=h[v+2+96]=V+R+1>>1,h[v+0+96]=K+V+1>>1,h[v+3+0]=_t(J,ne,le),h[v+2+0]=_t(Z,J,ne),h[v+1+0]=h[v+3+32]=_t(P,Z,J),h[v+1+32]=h[v+3+64]=_t(R,P,Z),h[v+1+64]=h[v+3+96]=_t(V,R,P),h[v+1+96]=_t(K,V,R)}function fa(h,v){var P;for(P=0;8>P;++P)n(h,v+32*P,h,v-32,8)}function No(h,v){var P;for(P=0;8>P;++P)a(h,v,h[v-1],8),v+=32}function di(h,v,P){var R;for(R=0;8>R;++R)a(v,P+32*R,h,8)}function sl(h,v){var P,R=8;for(P=0;8>P;++P)R+=h[v+P-32]+h[v-1+32*P];di(R>>4,h,v)}function Bl(h,v){var P,R=4;for(P=0;8>P;++P)R+=h[v+P-32];di(R>>3,h,v)}function So(h,v){var P,R=4;for(P=0;8>P;++P)R+=h[v-1+32*P];di(R>>3,h,v)}function jo(h,v){di(128,h,v)}function as(h,v,P){var R=h[v-P],V=h[v+0],K=3*(V-R)+uo[1020+h[v-2*P]-h[v+P]],Z=jc[112+(K+4>>3)];h[v-P]=Ii[255+R+jc[112+(K+3>>3)]],h[v+0]=Ii[255+V-Z]}function ri(h,v,P,R){var V=h[v+0],K=h[v+P];return Ta[255+h[v-2*P]-h[v-P]]>R||Ta[255+K-V]>R}function io(h,v,P,R){return 4*Ta[255+h[v-P]-h[v+0]]+Ta[255+h[v-2*P]-h[v+P]]<=R}function Ri(h,v,P,R,V){var K=h[v-3*P],Z=h[v-2*P],J=h[v-P],ne=h[v+0],le=h[v+P],_e=h[v+2*P],Fe=h[v+3*P];return 4*Ta[255+J-ne]+Ta[255+Z-le]>R?0:Ta[255+h[v-4*P]-K]<=V&&Ta[255+K-Z]<=V&&Ta[255+Z-J]<=V&&Ta[255+Fe-_e]<=V&&Ta[255+_e-le]<=V&&Ta[255+le-ne]<=V}function Ns(h,v,P,R){var V=2*R+1;for(R=0;16>R;++R)io(h,v+R,P,V)&&as(h,v+R,P)}function Rs(h,v,P,R){var V=2*R+1;for(R=0;16>R;++R)io(h,v+R*P,1,V)&&as(h,v+R*P,1)}function Si(h,v,P,R){var V;for(V=3;0<V;--V)Ns(h,v+=4*P,P,R)}function Ua(h,v,P,R){var V;for(V=3;0<V;--V)Rs(h,v+=4,P,R)}function Vi(h,v,P,R,V,K,Z,J){for(K=2*K+1;0<V--;){if(Ri(h,v,P,K,Z))if(ri(h,v,P,J))as(h,v,P);else{var ne=h,le=v,_e=P,Fe=ne[le-2*_e],ce=ne[le-_e],ke=ne[le+0],De=ne[le+_e],Xe=ne[le+2*_e],Be=27*(Ye=uo[1020+3*(ke-ce)+uo[1020+Fe-De]])+63>>7,Ke=18*Ye+63>>7,Ye=9*Ye+63>>7;ne[le-3*_e]=Ii[255+ne[le-3*_e]+Ye],ne[le-2*_e]=Ii[255+Fe+Ke],ne[le-_e]=Ii[255+ce+Be],ne[le+0]=Ii[255+ke-Be],ne[le+_e]=Ii[255+De-Ke],ne[le+2*_e]=Ii[255+Xe-Ye]}v+=R}}function Pa(h,v,P,R,V,K,Z,J){for(K=2*K+1;0<V--;){if(Ri(h,v,P,K,Z))if(ri(h,v,P,J))as(h,v,P);else{var ne=h,le=v,_e=P,Fe=ne[le-_e],ce=ne[le+0],ke=ne[le+_e],De=jc[112+(4+(Xe=3*(ce-Fe))>>3)],Xe=jc[112+(Xe+3>>3)],Be=De+1>>1;ne[le-2*_e]=Ii[255+ne[le-2*_e]+Be],ne[le-_e]=Ii[255+Fe+Xe],ne[le+0]=Ii[255+ce-De],ne[le+_e]=Ii[255+ke-Be]}v+=R}}function ni(h,v,P,R,V,K){Vi(h,v,P,1,16,R,V,K)}function Hi(h,v,P,R,V,K){Vi(h,v,1,P,16,R,V,K)}function il(h,v,P,R,V,K){var Z;for(Z=3;0<Z;--Z)Pa(h,v+=4*P,P,1,16,R,V,K)}function w(h,v,P,R,V,K){var Z;for(Z=3;0<Z;--Z)Pa(h,v+=4,1,P,16,R,V,K)}function $(h,v,P,R,V,K,Z,J){Vi(h,v,V,1,8,K,Z,J),Vi(P,R,V,1,8,K,Z,J)}function de(h,v,P,R,V,K,Z,J){Vi(h,v,1,V,8,K,Z,J),Vi(P,R,1,V,8,K,Z,J)}function Se(h,v,P,R,V,K,Z,J){Pa(h,v+4*V,V,1,8,K,Z,J),Pa(P,R+4*V,V,1,8,K,Z,J)}function xe(h,v,P,R,V,K,Z,J){Pa(h,v+4,1,V,8,K,Z,J),Pa(P,R+4,1,V,8,K,Z,J)}function qe(){this.ba=new mr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new fr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jt(){this.ua=0,this.Wa=new We,this.vb=new We,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new X}function Xt(){this.xb=this.a=0,this.l=new ei,this.ca=new mr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jt,this.ab=0,this.gc=u(4,gt),this.Oc=0}function dr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ei,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Er(h,v,P,R,V,K,Z){for(h=h==null?0:h[v+0],v=0;v<Z;++v)V[K+v]=h+P[R+v]&255,h=V[K+v]}function dn(h,v,P,R,V,K,Z){var J;if(h==null)Er(null,null,P,R,V,K,Z);else for(J=0;J<Z;++J)V[K+J]=h[v+J]+P[R+J]&255}function pn(h,v,P,R,V,K,Z){if(h==null)Er(null,null,P,R,V,K,Z);else{var J,ne=h[v+0],le=ne,_e=ne;for(J=0;J<Z;++J)le=_e+(ne=h[v+J])-le,_e=P[R+J]+(-256&le?0>le?0:255:le)&255,le=ne,V[K+J]=_e}}function cn(h,v,P,R){var V=v.width,K=v.o;if(e(h!=null&&v!=null),0>P||0>=R||P+R>K)return null;if(!h.Cc){if(h.ga==null){var Z;if(h.ga=new dr,(Z=h.ga==null)||(Z=v.width*v.o,e(h.Gb.length==0),h.Gb=o(Z),h.Uc=0,h.Gb==null?Z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,Z=1),Z=!Z),!Z){Z=h.ga;var J=h.Fa,ne=h.P,le=h.qc,_e=h.mb,Fe=h.nb,ce=ne+1,ke=le-1,De=Z.l;if(e(J!=null&&_e!=null&&v!=null),ji[0]=null,ji[1]=Er,ji[2]=dn,ji[3]=pn,Z.ca=_e,Z.tb=Fe,Z.c=v.width,Z.i=v.height,e(0<Z.c&&0<Z.i),1>=le)v=0;else if(Z.$a=3&J[ne+0],Z.Z=J[ne+0]>>2&3,Z.Lc=J[ne+0]>>4&3,ne=J[ne+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||ne)v=0;else if(De.put=Kt,De.ac=ys,De.bc=_n,De.ma=Z,De.width=v.width,De.height=v.height,De.Da=v.Da,De.v=v.v,De.va=v.va,De.j=v.j,De.o=v.o,Z.$a)e:{e(Z.$a==1),v=Lt();t:for(;;){if(v==null){v=0;break e}if(e(Z!=null),Z.mc=v,v.c=Z.c,v.i=Z.i,v.l=Z.l,v.l.ma=Z,v.l.width=Z.c,v.l.height=Z.i,v.a=0,me(v.m,J,ce,ke),!It(Z.c,Z.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Qe(v.s)?(Z.ic=1,J=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(J),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(Z.ic=0,v=$t(v,Z.c)),!v))break t;v=1;break e}Z.mc=null,v=0}else v=ke>=Z.c*Z.i;Z=!v}if(Z)return null;h.ga.Lc!=1?h.Ga=0:R=K-P}e(h.ga!=null),e(P+R<=K);e:{if(v=(J=h.ga).c,K=J.l.o,J.$a==0){if(ce=h.rc,ke=h.Vc,De=h.Fa,ne=h.P+1+P*v,le=h.mb,_e=h.nb+P*v,e(ne<=h.P+h.qc),J.Z!=0)for(e(ji[J.Z]!=null),Z=0;Z<R;++Z)ji[J.Z](ce,ke,De,ne,le,_e,v),ce=le,ke=_e,_e+=v,ne+=v;else for(Z=0;Z<R;++Z)n(le,_e,De,ne,v),ce=le,ke=_e,_e+=v,ne+=v;h.rc=ce,h.Vc=ke}else{if(e(J.mc!=null),v=P+R,e((Z=J.mc)!=null),e(v<=Z.i),Z.C>=v)v=1;else if(J.ic||hi(),J.ic){J=Z.V,ce=Z.Ba,ke=Z.c;var Xe=Z.i,Be=(De=1,ne=Z.$/ke,le=Z.$%ke,_e=Z.m,Fe=Z.s,Z.$),Ke=ke*Xe,Ye=ke*v,nt=Fe.wc,at=Be<Ye?ut(Fe,le,ne):null;e(Be<=Ke),e(v<=Xe),e(Qe(Fe));t:for(;;){for(;!_e.h&&Be<Ye;){if(le&nt||(at=ut(Fe,le,ne)),e(at!=null),oe(_e),256>(Xe=Pt(at.G[0],at.H[0],_e)))J[ce+Be]=Xe,++Be,++le>=ke&&(le=0,++ne<=v&&!(ne%16)&&vt(Z,ne));else{if(!(280>Xe)){De=0;break t}Xe=br(Xe-256,_e);var or,Ut=Pt(at.G[4],at.H[4],_e);if(oe(_e),!(Be>=(Ut=hr(ke,Ut=br(Ut,_e)))&&Ke-Be>=Xe)){De=0;break t}for(or=0;or<Xe;++or)J[ce+Be+or]=J[ce+Be+or-Ut];for(Be+=Xe,le+=Xe;le>=ke;)le-=ke,++ne<=v&&!(ne%16)&&vt(Z,ne);Be<Ye&&le&nt&&(at=ut(Fe,le,ne))}e(_e.h==H(_e))}vt(Z,ne>v?v:ne);break t}!De||_e.h&&Be<Ke?(De=0,Z.a=_e.h?5:3):Z.$=Be,v=De}else v=wt(Z,Z.V,Z.Ba,Z.c,Z.i,v,Ht);if(!v){R=0;break e}}P+R>=K&&(h.Cc=1),R=1}if(!R)return null;if(h.Cc&&((R=h.ga)!=null&&(R.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+P*V}function Vn(h,v,P,R,V,K){for(;0<V--;){var Z,J=h,ne=v+(P?1:0),le=h,_e=v+(P?0:3);for(Z=0;Z<R;++Z){var Fe=le[_e+4*Z];Fe!=255&&(Fe*=32897,J[ne+4*Z+0]=J[ne+4*Z+0]*Fe>>23,J[ne+4*Z+1]=J[ne+4*Z+1]*Fe>>23,J[ne+4*Z+2]=J[ne+4*Z+2]*Fe>>23)}v+=K}}function vn(h,v,P,R,V){for(;0<R--;){var K;for(K=0;K<P;++K){var Z=h[v+2*K+0],J=15&(le=h[v+2*K+1]),ne=4369*J,le=(240&le|le>>4)*ne>>16;h[v+2*K+0]=(240&Z|Z>>4)*ne>>16&240|(15&Z|Z<<4)*ne>>16>>4&15,h[v+2*K+1]=240&le|J}v+=V}}function Rt(h,v,P,R,V,K,Z,J){var ne,le,_e=255;for(le=0;le<V;++le){for(ne=0;ne<R;++ne){var Fe=h[v+ne];K[Z+4*ne]=Fe,_e&=Fe}v+=P,Z+=J}return _e!=255}function fi(h,v,P,R,V){var K;for(K=0;K<V;++K)P[R+K]=h[v+K]>>8}function hi(){Ql=Vn,vf=vn,gu=Rt,xf=fi}function za(h,v,P){Q[h]=function(R,V,K,Z,J,ne,le,_e,Fe,ce,ke,De,Xe,Be,Ke,Ye,nt){var at,or=nt-1>>1,Ut=J[ne+0]|le[_e+0]<<16,Vr=Fe[ce+0]|ke[De+0]<<16;e(R!=null);var Zt=3*Ut+Vr+131074>>2;for(v(R[V+0],255&Zt,Zt>>16,Xe,Be),K!=null&&(Zt=3*Vr+Ut+131074>>2,v(K[Z+0],255&Zt,Zt>>16,Ke,Ye)),at=1;at<=or;++at){var fn=J[ne+at]|le[_e+at]<<16,ps=Fe[ce+at]|ke[De+at]<<16,Kr=Ut+fn+Vr+ps+524296,zt=Kr+2*(fn+Vr)>>3;Zt=zt+Ut>>1,Ut=(Kr=Kr+2*(Ut+ps)>>3)+fn>>1,v(R[V+2*at-1],255&Zt,Zt>>16,Xe,Be+(2*at-1)*P),v(R[V+2*at-0],255&Ut,Ut>>16,Xe,Be+(2*at-0)*P),K!=null&&(Zt=Kr+Vr>>1,Ut=zt+ps>>1,v(K[Z+2*at-1],255&Zt,Zt>>16,Ke,Ye+(2*at-1)*P),v(K[Z+2*at+0],255&Ut,Ut>>16,Ke,Ye+(2*at+0)*P)),Ut=fn,Vr=ps}1&nt||(Zt=3*Ut+Vr+131074>>2,v(R[V+nt-1],255&Zt,Zt>>16,Xe,Be+(nt-1)*P),K!=null&&(Zt=3*Vr+Ut+131074>>2,v(K[Z+nt-1],255&Zt,Zt>>16,Ke,Ye+(nt-1)*P)))}}function Co(){Ki[rd]=dg,Ki[pl]=ml,Ki[qh]=fg,Ki[vu]=Pc,Ki[xu]=Jl,Ki[Mn]=Su,Ki[nd]=Af,Ki[Cc]=ml,Ki[Zl]=Pc,Ki[yu]=Jl,Ki[bu]=Su}function vc(h){return h&-16384?0>h?0:255:h>>gl}function al(h,v){return vc((19077*h>>8)+(26149*v>>8)-14234)}function ql(h,v,P){return vc((19077*h>>8)-(6419*v>>8)-(13320*P>>8)+8708)}function ol(h,v){return vc((19077*h>>8)+(33050*v>>8)-17685)}function ll(h,v,P,R,V){R[V+0]=al(h,P),R[V+1]=ql(h,v,P),R[V+2]=ol(h,v)}function pi(h,v,P,R,V){R[V+0]=ol(h,v),R[V+1]=ql(h,v,P),R[V+2]=al(h,P)}function Ul(h,v,P,R,V){var K=ql(h,v,P);v=K<<3&224|ol(h,v)>>3,R[V+0]=248&al(h,P)|K>>5,R[V+1]=v}function zl(h,v,P,R,V){var K=240&ol(h,v)|15;R[V+0]=240&al(h,P)|ql(h,v,P)>>4,R[V+1]=K}function fu(h,v,P,R,V){R[V+0]=255,ll(h,v,P,R,V+1)}function hu(h,v,P,R,V){pi(h,v,P,R,V),R[V+3]=255}function Di(h,v,P,R,V){ll(h,v,P,R,V),R[V+3]=255}function $a(h,v,P){Q[h]=function(R,V,K,Z,J,ne,le,_e,Fe){for(var ce=_e+(-2&Fe)*P;_e!=ce;)v(R[V+0],K[Z+0],J[ne+0],le,_e),v(R[V+1],K[Z+0],J[ne+0],le,_e+P),V+=2,++Z,++ne,_e+=2*P;1&Fe&&v(R[V+0],K[Z+0],J[ne+0],le,_e)}}function ao(h,v,P){return P==0?h==0?v==0?6:5:v==0?4:0:P}function Ju(h,v,P,R,V){switch(h>>>30){case 3:Gl(v,P,R,V,0);break;case 2:fs(v,P,R,V);break;case 1:wn(v,P,R,V)}}function ha(h,v){var P,R,V=v.M,K=v.Nb,Z=h.oc,J=h.pc+40,ne=h.oc,le=h.pc+584,_e=h.oc,Fe=h.pc+600;for(P=0;16>P;++P)Z[J+32*P-1]=129;for(P=0;8>P;++P)ne[le+32*P-1]=129,_e[Fe+32*P-1]=129;for(0<V?Z[J-1-32]=ne[le-1-32]=_e[Fe-1-32]=129:(a(Z,J-32-1,127,21),a(ne,le-32-1,127,9),a(_e,Fe-32-1,127,9)),R=0;R<h.za;++R){var ce=v.ya[v.aa+R];if(0<R){for(P=-1;16>P;++P)n(Z,J+32*P-4,Z,J+32*P+12,4);for(P=-1;8>P;++P)n(ne,le+32*P-4,ne,le+32*P+4,4),n(_e,Fe+32*P-4,_e,Fe+32*P+4,4)}var ke=h.Gd,De=h.Hd+R,Xe=ce.ad,Be=ce.Hc;if(0<V&&(n(Z,J-32,ke[De].y,0,16),n(ne,le-32,ke[De].f,0,8),n(_e,Fe-32,ke[De].ea,0,8)),ce.Za){var Ke=Z,Ye=J-32+16;for(0<V&&(R>=h.za-1?a(Ke,Ye,ke[De].y[15],4):n(Ke,Ye,ke[De+1].y,0,4)),P=0;4>P;P++)Ke[Ye+128+P]=Ke[Ye+256+P]=Ke[Ye+384+P]=Ke[Ye+0+P];for(P=0;16>P;++P,Be<<=2)Ke=Z,Ye=J+Pf[P],Ea[ce.Ob[P]](Ke,Ye),Ju(Be,Xe,16*+P,Ke,Ye)}else if(Ke=ao(R,V,ce.Ob[0]),Fi[Ke](Z,J),Be!=0)for(P=0;16>P;++P,Be<<=2)Ju(Be,Xe,16*+P,Z,J+Pf[P]);for(P=ce.Gc,Ke=ao(R,V,ce.Dd),Gi[Ke](ne,le),Gi[Ke](_e,Fe),Be=Xe,Ke=ne,Ye=le,255&(ce=0|P)&&(170&ce?Wi(Be,256,Ke,Ye):Ln(Be,256,Ke,Ye)),ce=_e,Be=Fe,255&(P>>=8)&&(170&P?Wi(Xe,320,ce,Be):Ln(Xe,320,ce,Be)),V<h.Ub-1&&(n(ke[De].y,0,Z,J+480,16),n(ke[De].f,0,ne,le+224,8),n(ke[De].ea,0,_e,Fe+224,8)),P=8*K*h.B,ke=h.sa,De=h.ta+16*R+16*K*h.R,Xe=h.qa,ce=h.ra+8*R+P,Be=h.Ha,Ke=h.Ia+8*R+P,P=0;16>P;++P)n(ke,De+P*h.R,Z,J+32*P,16);for(P=0;8>P;++P)n(Xe,ce+P*h.B,ne,le+32*P,8),n(Be,Ke+P*h.B,_e,Fe+32*P,8)}}function cl(h,v,P,R,V,K,Z,J,ne){var le=[0],_e=[0],Fe=0,ce=ne!=null?ne.kd:0,ke=ne??new $e;if(h==null||12>P)return 7;ke.data=h,ke.w=v,ke.ha=P,v=[v],P=[P],ke.gb=[ke.gb];e:{var De=v,Xe=P,Be=ke.gb;if(e(h!=null),e(Xe!=null),e(Be!=null),Be[0]=0,12<=Xe[0]&&!r(h,De[0],"RIFF")){if(r(h,De[0]+8,"WEBP")){Be=3;break e}var Ke=ct(h,De[0]+4);if(12>Ke||4294967286<Ke){Be=3;break e}if(ce&&Ke>Xe[0]-8){Be=7;break e}Be[0]=Ke,De[0]+=12,Xe[0]-=12}Be=0}if(Be!=0)return Be;for(Ke=0<ke.gb[0],P=P[0];;){e:{var Ye=h;Xe=v,Be=P;var nt=le,at=_e,or=De=[0];if((Zt=Fe=[Fe])[0]=0,8>Be[0])Be=7;else{if(!r(Ye,Xe[0],"VP8X")){if(ct(Ye,Xe[0]+4)!=10){Be=3;break e}if(18>Be[0]){Be=7;break e}var Ut=ct(Ye,Xe[0]+8),Vr=1+tt(Ye,Xe[0]+12);if(2147483648<=Vr*(Ye=1+tt(Ye,Xe[0]+15))){Be=3;break e}or!=null&&(or[0]=Ut),nt!=null&&(nt[0]=Vr),at!=null&&(at[0]=Ye),Xe[0]+=18,Be[0]-=18,Zt[0]=1}Be=0}}if(Fe=Fe[0],De=De[0],Be!=0)return Be;if(Xe=!!(2&De),!Ke&&Fe)return 3;if(K!=null&&(K[0]=!!(16&De)),Z!=null&&(Z[0]=Xe),J!=null&&(J[0]=0),Z=le[0],De=_e[0],Fe&&Xe&&ne==null){Be=0;break}if(4>P){Be=7;break}if(Ke&&Fe||!Ke&&!Fe&&!r(h,v[0],"ALPH")){P=[P],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{Ut=h,Be=v,Ke=P;var Zt=ke.gb;nt=ke.na,at=ke.P,or=ke.Sa,Vr=22,e(Ut!=null),e(Ke!=null),Ye=Be[0];var fn=Ke[0];for(e(nt!=null),e(or!=null),nt[0]=null,at[0]=null,or[0]=0;;){if(Be[0]=Ye,Ke[0]=fn,8>fn){Be=7;break e}var ps=ct(Ut,Ye+4);if(4294967286<ps){Be=3;break e}var Kr=8+ps+1&-2;if(Vr+=Kr,0<Zt&&Vr>Zt){Be=3;break e}if(!r(Ut,Ye,"VP8 ")||!r(Ut,Ye,"VP8L")){Be=0;break e}if(fn[0]<Kr){Be=7;break e}r(Ut,Ye,"ALPH")||(nt[0]=Ut,at[0]=Ye+8,or[0]=ps),Ye+=Kr,fn-=Kr}}if(P=P[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],Be!=0)break}P=[P],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(Zt=h,Be=v,Ke=P,nt=ke.gb[0],at=ke.Ja,or=ke.xa,Ut=Be[0],Ye=!r(Zt,Ut,"VP8 "),Vr=!r(Zt,Ut,"VP8L"),e(Zt!=null),e(Ke!=null),e(at!=null),e(or!=null),8>Ke[0])Be=7;else{if(Ye||Vr){if(Zt=ct(Zt,Ut+4),12<=nt&&Zt>nt-12){Be=3;break e}if(ce&&Zt>Ke[0]-8){Be=7;break e}at[0]=Zt,Be[0]+=8,Ke[0]-=8,or[0]=Vr}else or[0]=5<=Ke[0]&&Zt[Ut+0]==47&&!(Zt[Ut+4]>>5),at[0]=Ke[0];Be=0}if(P=P[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],v=v[0],Be!=0)break;if(4294967286<ke.Ja)return 3;if(J==null||Xe||(J[0]=ke.xa?2:1),Z=[Z],De=[De],ke.xa){if(5>P){Be=7;break}J=Z,ce=De,Xe=K,h==null||5>P?h=0:5<=P&&h[v+0]==47&&!(h[v+4]>>5)?(Ke=[0],Zt=[0],nt=[0],me(at=new C,h,v,P),qt(at,Ke,Zt,nt)?(J!=null&&(J[0]=Ke[0]),ce!=null&&(ce[0]=Zt[0]),Xe!=null&&(Xe[0]=nt[0]),h=1):h=0):h=0}else{if(10>P){Be=7;break}J=De,h==null||10>P||!Fn(h,v+3,P-3)?h=0:(ce=h[v+0]|h[v+1]<<8|h[v+2]<<16,Xe=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=ke.Ja||!Xe||!h?h=0:(Z&&(Z[0]=Xe),J&&(J[0]=h),h=1))}if(!h||(Z=Z[0],De=De[0],Fe&&(le[0]!=Z||_e[0]!=De)))return 3;ne!=null&&(ne[0]=ke,ne.offset=v-ne.w,e(4294967286>v-ne.w),e(ne.offset==ne.ha-P));break}return Be==0||Be==7&&Fe&&ne==null?(K!=null&&(K[0]|=ke.na!=null&&0<ke.na.length),R!=null&&(R[0]=Z),V!=null&&(V[0]=De),0):Be}function xc(h,v,P){var R=v.width,V=v.height,K=0,Z=0,J=R,ne=V;if(v.Da=h!=null&&0<h.Da,v.Da&&(J=h.cd,ne=h.bd,K=h.v,Z=h.j,11>P||(K&=-2,Z&=-2),0>K||0>Z||0>=J||0>=ne||K+J>R||Z+ne>V))return 0;if(v.v=K,v.j=Z,v.va=K+J,v.o=Z+ne,v.U=J,v.T=ne,v.da=h!=null&&0<h.da,v.da){if(!Ee(J,ne,P=[h.ib],K=[h.hb]))return 0;v.ib=P[0],v.hb=K[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*R/4&&v.hb<3*V/4,v.Kb=0),1}function yc(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function _o(h,v,P,R){if(R==null||0>=h||0>=v)return 2;if(P!=null){if(P.Da){var V=P.cd,K=P.bd,Z=-2&P.v,J=-2&P.j;if(0>Z||0>J||0>=V||0>=K||Z+V>h||J+K>v)return 2;h=V,v=K}if(P.da){if(!Ee(h,v,V=[P.ib],K=[P.hb]))return 2;h=V[0],v=K[0]}}R.width=h,R.height=v;e:{var ne=R.width,le=R.height;if(h=R.S,0>=ne||0>=le||!(h>=rd&&13>h))h=2;else{if(0>=R.Rd&&R.sd==null){Z=K=V=v=0;var _e=(J=ne*ju[h])*le;if(11>h||(K=(le+1)/2*(v=(ne+1)/2),h==12&&(Z=(V=ne)*le)),(le=o(_e+2*K+Z))==null){h=1;break e}R.sd=le,11>h?((ne=R.f.RGBA).eb=le,ne.fb=0,ne.A=J,ne.size=_e):((ne=R.f.kb).y=le,ne.O=0,ne.fa=J,ne.Fd=_e,ne.f=le,ne.N=0+_e,ne.Ab=v,ne.Cd=K,ne.ea=le,ne.W=0+_e+K,ne.Db=v,ne.Ed=K,h==12&&(ne.F=le,ne.J=0+_e+2*K),ne.Tc=Z,ne.lb=V)}if(v=1,V=R.S,K=R.width,Z=R.height,V>=rd&&13>V)if(11>V)h=R.f.RGBA,v&=(J=Math.abs(h.A))*(Z-1)+K<=h.size,v&=J>=K*ju[V],v&=h.eb!=null;else{h=R.f.kb,J=(K+1)/2,_e=(Z+1)/2,ne=Math.abs(h.fa),le=Math.abs(h.Ab);var Fe=Math.abs(h.Db),ce=Math.abs(h.lb),ke=ce*(Z-1)+K;v&=ne*(Z-1)+K<=h.Fd,v&=le*(_e-1)+J<=h.Cd,v=(v&=Fe*(_e-1)+J<=h.Ed)&ne>=K&le>=J&Fe>=J,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,V==12&&(v&=ce>=K,v&=ke<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||P!=null&&P.fd&&(h=yc(R)),h}var ka=64,pa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ma=24,ul=32,oo=8,Ao=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ct("Predictor0","PredictorAdd0"),Q.Predictor0=function(){return 4278190080},Q.Predictor1=function(h){return h},Q.Predictor2=function(h,v,P){return v[P+0]},Q.Predictor3=function(h,v,P){return v[P+1]},Q.Predictor4=function(h,v,P){return v[P-1]},Q.Predictor5=function(h,v,P){return he(he(h,v[P+1]),v[P+0])},Q.Predictor6=function(h,v,P){return he(h,v[P-1])},Q.Predictor7=function(h,v,P){return he(h,v[P+0])},Q.Predictor8=function(h,v,P){return he(v[P-1],v[P+0])},Q.Predictor9=function(h,v,P){return he(v[P+0],v[P+1])},Q.Predictor10=function(h,v,P){return he(he(h,v[P-1]),he(v[P+0],v[P+1]))},Q.Predictor11=function(h,v,P){var R=v[P+0];return 0>=Ve(R>>24&255,h>>24&255,(v=v[P-1])>>24&255)+Ve(R>>16&255,h>>16&255,v>>16&255)+Ve(R>>8&255,h>>8&255,v>>8&255)+Ve(255&R,255&h,255&v)?R:h},Q.Predictor12=function(h,v,P){var R=v[P+0];return(Ie((h>>24&255)+(R>>24&255)-((v=v[P-1])>>24&255))<<24|Ie((h>>16&255)+(R>>16&255)-(v>>16&255))<<16|Ie((h>>8&255)+(R>>8&255)-(v>>8&255))<<8|Ie((255&h)+(255&R)-(255&v)))>>>0},Q.Predictor13=function(h,v,P){var R=v[P-1];return(Ze((h=he(h,v[P+0]))>>24&255,R>>24&255)<<24|Ze(h>>16&255,R>>16&255)<<16|Ze(h>>8&255,R>>8&255)<<8|Ze(255&h,255&R))>>>0};var Po=Q.PredictorAdd0;Q.PredictorAdd1=ze,Ct("Predictor2","PredictorAdd2"),Ct("Predictor3","PredictorAdd3"),Ct("Predictor4","PredictorAdd4"),Ct("Predictor5","PredictorAdd5"),Ct("Predictor6","PredictorAdd6"),Ct("Predictor7","PredictorAdd7"),Ct("Predictor8","PredictorAdd8"),Ct("Predictor9","PredictorAdd9"),Ct("Predictor10","PredictorAdd10"),Ct("Predictor11","PredictorAdd11"),Ct("Predictor12","PredictorAdd12"),Ct("Predictor13","PredictorAdd13");var lo=Q.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Ss,$l=Q.ColorIndexInverseTransform,co=Q.MapARGB,Va=Q.VP8LColorIndexInverseTransformAlpha,Vl=Q.MapAlpha,Hl=Q.VP8LPredictorsAdd=[];Hl.length=16,(Q.VP8LPredictors=[]).length=16,(Q.VP8LPredictorsAdd_C=[]).length=16,(Q.VP8LPredictors_C=[]).length=16;var bc,wc,ko,dl,fl,Wl,hl,Gl,fs,Wi,wn,Ln,hs,Ds,Ha,pu,Nc,To,ed,Sc,td,gf,mu,Kl,Ql,vf,gu,xf,yf=o(511),bf=o(2041),wf=o(225),Nf=o(767),Sf=0,uo=bf,jc=wf,Ii=Nf,Ta=yf,rd=0,pl=1,qh=2,vu=3,xu=4,Mn=5,nd=6,Cc=7,Zl=8,yu=9,bu=10,wu=[2,3,7],sd=[3,3,11],Yl=[280,256,256,256,40],Uh=[0,1,1,1,0],og=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],id=8,_c=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xl=null,jf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Cf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$h=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Vh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ug=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_f=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fi=[],Ea=[],Gi=[],fo=1,Ac=2,ji=[],Ki=[];za("UpsampleRgbLinePair",ll,3),za("UpsampleBgrLinePair",pi,3),za("UpsampleRgbaLinePair",Di,4),za("UpsampleBgraLinePair",hu,4),za("UpsampleArgbLinePair",fu,4),za("UpsampleRgba4444LinePair",zl,2),za("UpsampleRgb565LinePair",Ul,2);var dg=Q.UpsampleRgbLinePair,fg=Q.UpsampleBgrLinePair,ml=Q.UpsampleRgbaLinePair,Pc=Q.UpsampleBgraLinePair,Jl=Q.UpsampleArgbLinePair,Su=Q.UpsampleRgba4444LinePair,Af=Q.UpsampleRgb565LinePair,Eo=16,Wa=1<<Eo-1,Tn=-227,Rn=482,gl=6,mi=0,Qi=o(256),ec=o(256),kc=o(256),Zi=o(256),ad=o(Rn-Tn),Hh=o(Rn-Tn);$a("YuvToRgbRow",ll,3),$a("YuvToBgrRow",pi,3),$a("YuvToRgbaRow",Di,4),$a("YuvToBgraRow",hu,4),$a("YuvToArgbRow",fu,4),$a("YuvToRgba4444Row",zl,2),$a("YuvToRgb565Row",Ul,2);var Pf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tc=[0,2,8],Wh=[8,7,6,4,4,2,2,2,1,1,1,1],Lo=1;this.WebPDecodeRGBA=function(h,v,P,R,V){var K=pl,Z=new qe,J=new mr;Z.ba=J,J.S=K,J.width=[J.width],J.height=[J.height];var ne=J.width,le=J.height,_e=new Vt;if(_e==null||h==null)var Fe=2;else e(_e!=null),Fe=cl(h,v,P,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Fe!=0?ne=0:(ne!=null&&(ne[0]=_e.width[0]),le!=null&&(le[0]=_e.height[0]),ne=1),ne){J.width=J.width[0],J.height=J.height[0],R!=null&&(R[0]=J.width),V!=null&&(V[0]=J.height);e:{if(R=new ei,(V=new $e).data=h,V.w=v,V.ha=P,V.kd=1,v=[0],e(V!=null),((h=cl(V.data,V.w,V.ha,null,null,null,v,null,V))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(e(Z!=null),R.data=V.data,R.w=V.w+V.offset,R.ha=V.ha-V.offset,R.put=Kt,R.ac=ys,R.bc=_n,R.ma=Z,V.xa){if((h=Lt())==null){Z=1;break e}if((function(ce,ke){var De=[0],Xe=[0],Be=[0];t:for(;;){if(ce==null)return 0;if(ke==null)return ce.a=2,0;if(ce.l=ke,ce.a=0,me(ce.m,ke.data,ke.w,ke.ha),!qt(ce.m,De,Xe,Be)){ce.a=3;break t}if(ce.xb=Ac,ke.width=De[0],ke.height=Xe[0],!It(De[0],Xe[0],1,ce,null))break t;return 1}return e(ce.a!=0),0})(h,R)){if(R=(v=_o(R.width,R.height,Z.Oa,Z.ba))==0){t:{R=h;r:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((P=R.l)!=null),e((V=P.ma)!=null),R.xb!=0){if(R.ca=V.ba,R.tb=V.tb,e(R.ca!=null),!xc(V.Oa,P,vu)){R.a=2;break r}if(!$t(R,P.width)||P.da)break r;if((P.da||ir(R.ca.S))&&hi(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&hi()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!ee(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!wt(R,R.V,R.Ba,R.c,R.i,P.o,it))break r;V.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(v=h.a)}else v=h.a}else{if((h=new Gn)==null){Z=1;break e}if(h.Fa=V.na,h.P=V.P,h.qc=V.Sa,is(h,R)){if((v=_o(R.width,R.height,Z.Oa,Z.ba))==0){if(h.Aa=0,P=Z.Oa,e((V=h)!=null),P!=null){if(0<(ne=0>(ne=P.Md)?0:100<ne?255:255*ne/100)){for(le=_e=0;4>le;++le)12>(Fe=V.pb[le]).lc&&(Fe.ia=ne*Wh[0>Fe.lc?0:Fe.lc]>>3),_e|=Fe.ia;_e&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=P.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(ce,ke){if(ce==null)return 0;if(ke==null)return Gr(ce,2,"NULL VP8Io parameter in VP8Decode().");if(!ce.cb&&!is(ce,ke))return 0;if(e(ce.cb),ke.ac==null||ke.ac(ke)){ke.ob&&(ce.L=0);var De=tc[ce.L];if(ce.L==2?(ce.yb=0,ce.zb=0):(ce.yb=ke.v-De>>4,ce.zb=ke.j-De>>4,0>ce.yb&&(ce.yb=0),0>ce.zb&&(ce.zb=0)),ce.Va=ke.o+15+De>>4,ce.Hb=ke.va+15+De>>4,ce.Hb>ce.za&&(ce.Hb=ce.za),ce.Va>ce.Ub&&(ce.Va=ce.Ub),0<ce.L){var Xe=ce.ed;for(De=0;4>De;++De){var Be;if(ce.Qa.Cb){var Ke=ce.Qa.Lb[De];ce.Qa.Fb||(Ke+=Xe.Tb)}else Ke=Xe.Tb;for(Be=0;1>=Be;++Be){var Ye=ce.gd[De][Be],nt=Ke;if(Xe.Pc&&(nt+=Xe.vd[0],Be&&(nt+=Xe.od[0])),0<(nt=0>nt?0:63<nt?63:nt)){var at=nt;0<Xe.wb&&(at=4<Xe.wb?at>>2:at>>1)>9-Xe.wb&&(at=9-Xe.wb),1>at&&(at=1),Ye.dd=at,Ye.tc=2*nt+at,Ye.ld=40<=nt?2:15<=nt?1:0}else Ye.tc=0;Ye.La=Be}}}De=0}else Gr(ce,6,"Frame setup failed"),De=ce.a;if(De=De==0){if(De){ce.$c=0,0<ce.Aa||(ce.Ic=Lo);t:{De=ce.Ic,Xe=4*(at=ce.za);var or=32*at,Ut=at+1,Vr=0<ce.L?at*(0<ce.Aa?2:1):0,Zt=(ce.Aa==2?2:1)*at;if((Ye=Xe+832+(Be=3*(16*De+tc[ce.L])/2*or)+(Ke=ce.Fa!=null&&0<ce.Fa.length?ce.Kc.c*ce.Kc.i:0))!=Ye)De=0;else{if(Ye>ce.Vb){if(ce.Vb=0,ce.Ec=o(Ye),ce.Fc=0,ce.Ec==null){De=Gr(ce,1,"no memory during frame initialization.");break t}ce.Vb=Ye}Ye=ce.Ec,nt=ce.Fc,ce.Ac=Ye,ce.Bc=nt,nt+=Xe,ce.Gd=u(or,Xr),ce.Hd=0,ce.rb=u(Ut+1,ar),ce.sb=1,ce.wa=Vr?u(Vr,tr):null,ce.Y=0,ce.D.Nb=0,ce.D.wa=ce.wa,ce.D.Y=ce.Y,0<ce.Aa&&(ce.D.Y+=at),e(!0),ce.oc=Ye,ce.pc=nt,nt+=832,ce.ya=u(Zt,Nr),ce.aa=0,ce.D.ya=ce.ya,ce.D.aa=ce.aa,ce.Aa==2&&(ce.D.aa+=at),ce.R=16*at,ce.B=8*at,at=(or=tc[ce.L])*ce.R,or=or/2*ce.B,ce.sa=Ye,ce.ta=nt+at,ce.qa=ce.sa,ce.ra=ce.ta+16*De*ce.R+or,ce.Ha=ce.qa,ce.Ia=ce.ra+8*De*ce.B+or,ce.$c=0,nt+=Be,ce.mb=Ke?Ye:null,ce.nb=Ke?nt:null,e(nt+Ke<=ce.Fc+ce.Vb),wo(ce),a(ce.Ac,ce.Bc,0,Xe),De=1}}if(De){if(ke.ka=0,ke.y=ce.sa,ke.O=ce.ta,ke.f=ce.qa,ke.N=ce.ra,ke.ea=ce.Ha,ke.Vd=ce.Ia,ke.fa=ce.R,ke.Rc=ce.B,ke.F=null,ke.J=0,!Sf){for(De=-255;255>=De;++De)yf[255+De]=0>De?-De:De;for(De=-1020;1020>=De;++De)bf[1020+De]=-128>De?-128:127<De?127:De;for(De=-112;112>=De;++De)wf[112+De]=-16>De?-16:15<De?15:De;for(De=-255;510>=De;++De)Nf[255+De]=0>De?0:255<De?255:De;Sf=1}hl=je,Gl=q,Wi=pe,wn=ye,Ln=Pe,fs=zs,hs=ni,Ds=Hi,Ha=$,pu=de,Nc=il,To=w,ed=Se,Sc=xe,td=Ns,gf=Rs,mu=Si,Kl=Ua,Ea[0]=nl,Ea[1]=On,Ea[2]=zi,Ea[3]=Ml,Ea[4]=ci,Ea[5]=$n,Ea[6]=Ni,Ea[7]=ds,Ea[8]=$i,Ea[9]=ui,Fi[0]=ti,Fi[1]=Kn,Fi[2]=Ls,Fi[3]=us,Fi[4]=$s,Fi[5]=wi,Fi[6]=xt,Gi[0]=sl,Gi[1]=pr,Gi[2]=fa,Gi[3]=No,Gi[4]=So,Gi[5]=Bl,Gi[6]=jo,De=1}else De=0}De&&(De=(function(fn,ps){for(fn.M=0;fn.M<fn.Va;++fn.M){var Kr,zt=fn.Jc[fn.M&fn.Xb],Tt=fn.m,js=fn;for(Kr=0;Kr<js.za;++Kr){var Lr=Tt,un=js,Hn=un.Ac,si=un.Bc+4*Kr,Is=un.zc,os=un.ya[un.aa+Kr];if(un.Qa.Bb?os.$b=Le(Lr,un.Pa.jb[0])?2+Le(Lr,un.Pa.jb[2]):Le(Lr,un.Pa.jb[1]):os.$b=0,un.kc&&(os.Ad=Le(Lr,un.Bd)),os.Za=!Le(Lr,145)+0,os.Za){var Vs=os.Ob,ii=0;for(un=0;4>un;++un){var Jn,mn=Is[0+un];for(Jn=0;4>Jn;++Jn){mn=cg[Hn[si+Jn]][mn];for(var Nn=$h[Le(Lr,mn[0])];0<Nn;)Nn=$h[2*Nn+Le(Lr,mn[Nn])];mn=-Nn,Hn[si+Jn]=mn}n(Vs,ii,Hn,si,4),ii+=4,Is[0+un]=mn}}else mn=Le(Lr,156)?Le(Lr,128)?1:3:Le(Lr,163)?2:0,os.Ob[0]=mn,a(Hn,si,mn,4),a(Is,0,mn,4);os.Dd=Le(Lr,142)?Le(Lr,114)?Le(Lr,183)?1:3:2:0}if(js.m.Ka)return Gr(fn,7,"Premature end-of-partition0 encountered.");for(;fn.ja<fn.za;++fn.ja){if(js=zt,Lr=(Tt=fn).rb[Tt.sb-1],Hn=Tt.rb[Tt.sb+Tt.ja],Kr=Tt.ya[Tt.aa+Tt.ja],si=Tt.kc?Kr.Ad:0)Lr.la=Hn.la=0,Kr.Za||(Lr.Na=Hn.Na=0),Kr.Hc=0,Kr.Gc=0,Kr.ia=0;else{var es,Sn;if(Lr=Hn,Hn=js,si=Tt.Pa.Xc,Is=Tt.ya[Tt.aa+Tt.ja],os=Tt.pb[Is.$b],un=Is.ad,Vs=0,ii=Tt.rb[Tt.sb-1],mn=Jn=0,a(un,Vs,0,384),Is.Za)var ms=0,gs=si[3];else{Nn=o(16);var Bn=Lr.Na+ii.Na;if(Bn=Xl(Hn,si[1],Bn,os.Eb,0,Nn,0),Lr.Na=ii.Na=(0<Bn)+0,1<Bn)hl(Nn,0,un,Vs);else{var Ci=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)un[Vs+Nn]=Ci}ms=1,gs=si[0]}var Dn=15&Lr.la,qn=15&ii.la;for(Nn=0;4>Nn;++Nn){var Fs=1&qn;for(Ci=Sn=0;4>Ci;++Ci)Dn=Dn>>1|(Fs=(Bn=Xl(Hn,gs,Bn=Fs+(1&Dn),os.Sc,ms,un,Vs))>ms)<<7,Sn=Sn<<2|(3<Bn?3:1<Bn?2:un[Vs+0]!=0),Vs+=16;Dn>>=4,qn=qn>>1|Fs<<7,Jn=(Jn<<8|Sn)>>>0}for(gs=Dn,ms=qn>>4,es=0;4>es;es+=2){for(Sn=0,Dn=Lr.la>>4+es,qn=ii.la>>4+es,Nn=0;2>Nn;++Nn){for(Fs=1&qn,Ci=0;2>Ci;++Ci)Bn=Fs+(1&Dn),Dn=Dn>>1|(Fs=0<(Bn=Xl(Hn,si[2],Bn,os.Qc,0,un,Vs)))<<3,Sn=Sn<<2|(3<Bn?3:1<Bn?2:un[Vs+0]!=0),Vs+=16;Dn>>=2,qn=qn>>1|Fs<<5}mn|=Sn<<4*es,gs|=Dn<<4<<es,ms|=(240&qn)<<es}Lr.la=gs,ii.la=ms,Is.Hc=Jn,Is.Gc=mn,Is.ia=43690&mn?0:os.ia,si=!(Jn|mn)}if(0<Tt.L&&(Tt.wa[Tt.Y+Tt.ja]=Tt.gd[Kr.$b][Kr.Za],Tt.wa[Tt.Y+Tt.ja].La|=!si),js.Ka)return Gr(fn,7,"Premature end-of-file encountered.")}if(wo(fn),Tt=ps,js=1,Kr=(zt=fn).D,Lr=0<zt.L&&zt.M>=zt.zb&&zt.M<=zt.Va,zt.Aa==0)t:{if(Kr.M=zt.M,Kr.uc=Lr,ha(zt,Kr),js=1,Kr=(Sn=zt.D).Nb,Lr=(mn=tc[zt.L])*zt.R,Hn=mn/2*zt.B,Nn=16*Kr*zt.R,Ci=8*Kr*zt.B,si=zt.sa,Is=zt.ta-Lr+Nn,os=zt.qa,un=zt.ra-Hn+Ci,Vs=zt.Ha,ii=zt.Ia-Hn+Ci,qn=(Dn=Sn.M)==0,Jn=Dn>=zt.Va-1,zt.Aa==2&&ha(zt,Sn),Sn.uc)for(Fs=(Bn=zt).D.M,e(Bn.D.uc),Sn=Bn.yb;Sn<Bn.Hb;++Sn){ms=Sn,gs=Fs;var gi=(Yi=(As=Bn).D).Nb;es=As.R;var Yi=Yi.wa[Yi.Y+ms],Cs=As.sa,_s=As.ta+16*gi*es+16*ms,_i=Yi.dd,Un=Yi.tc;if(Un!=0)if(e(3<=Un),As.L==1)0<ms&&gf(Cs,_s,es,Un+4),Yi.La&&Kl(Cs,_s,es,Un),0<gs&&td(Cs,_s,es,Un+4),Yi.La&&mu(Cs,_s,es,Un);else{var Ai=As.B,La=As.qa,Ga=As.ra+8*gi*Ai+8*ms,ai=As.Ha,As=As.Ia+8*gi*Ai+8*ms;gi=Yi.ld,0<ms&&(Ds(Cs,_s,es,Un+4,_i,gi),pu(La,Ga,ai,As,Ai,Un+4,_i,gi)),Yi.La&&(To(Cs,_s,es,Un,_i,gi),Sc(La,Ga,ai,As,Ai,Un,_i,gi)),0<gs&&(hs(Cs,_s,es,Un+4,_i,gi),Ha(La,Ga,ai,As,Ai,Un+4,_i,gi)),Yi.La&&(Nc(Cs,_s,es,Un,_i,gi),ed(La,Ga,ai,As,Ai,Un,_i,gi))}}if(zt.ia&&alert("todo:DitherRow"),Tt.put!=null){if(Sn=16*Dn,Dn=16*(Dn+1),qn?(Tt.y=zt.sa,Tt.O=zt.ta+Nn,Tt.f=zt.qa,Tt.N=zt.ra+Ci,Tt.ea=zt.Ha,Tt.W=zt.Ia+Ci):(Sn-=mn,Tt.y=si,Tt.O=Is,Tt.f=os,Tt.N=un,Tt.ea=Vs,Tt.W=ii),Jn||(Dn-=mn),Dn>Tt.o&&(Dn=Tt.o),Tt.F=null,Tt.J=null,zt.Fa!=null&&0<zt.Fa.length&&Sn<Dn&&(Tt.J=cn(zt,Tt,Sn,Dn-Sn),Tt.F=zt.mb,Tt.F==null&&Tt.F.length==0)){js=Gr(zt,3,"Could not decode alpha data.");break t}Sn<Tt.j&&(mn=Tt.j-Sn,Sn=Tt.j,e(!(1&mn)),Tt.O+=zt.R*mn,Tt.N+=zt.B*(mn>>1),Tt.W+=zt.B*(mn>>1),Tt.F!=null&&(Tt.J+=Tt.width*mn)),Sn<Dn&&(Tt.O+=Tt.v,Tt.N+=Tt.v>>1,Tt.W+=Tt.v>>1,Tt.F!=null&&(Tt.J+=Tt.v),Tt.ka=Sn-Tt.j,Tt.U=Tt.va-Tt.v,Tt.T=Dn-Sn,js=Tt.put(Tt))}Kr+1!=zt.Ic||Jn||(n(zt.sa,zt.ta-Lr,si,Is+16*zt.R,Lr),n(zt.qa,zt.ra-Hn,os,un+8*zt.B,Hn),n(zt.Ha,zt.Ia-Hn,Vs,ii+8*zt.B,Hn))}if(!js)return Gr(fn,6,"Output aborted.")}return 1})(ce,ke)),ke.bc!=null&&ke.bc(ke),De&=1}return De?(ce.cb=0,De):0})(h,R)||(v=h.a)}}else v=h.a}v==0&&Z.Oa!=null&&Z.Oa.fd&&(v=yc(Z.ba))}Z=v}K=Z!=0?null:11>K?J.f.RGBA.eb:J.f.kb.y}else K=null;return K};var ju=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(Q,fe){for(var U="",F=0;F<4;F++)U+=String.fromCharCode(Q[fe++]);return U}function m(Q,fe){return Q[fe+0]|Q[fe+1]<<8}function b(Q,fe){return(Q[fe+0]|Q[fe+1]<<8|Q[fe+2]<<16)>>>0}function A(Q,fe){return(Q[fe+0]|Q[fe+1]<<8|Q[fe+2]<<16|Q[fe+3]<<24)>>>0}new f;var y=[0],D=[0],S=[],E=new f,_=t,O=(function(Q,fe){var U={},F=0,X=!1,Y=0,Ne=0;if(U.frames=[],!(function(x,C){for(var M=0;M<4;M++)if(x[C+M]!="RIFF".charCodeAt(M))return!0;return!1})(Q,fe)){for(A(Q,fe+=4),fe+=8;fe<Q.length;){var be=p(Q,fe),we=A(Q,fe+=4);fe+=4;var se=we+(1&we);switch(be){case"VP8 ":case"VP8L":U.frames[F]===void 0&&(U.frames[F]={}),(j=U.frames[F]).src_off=X?Ne:fe-8,j.src_size=Y+we+8,F++,X&&(X=!1,Y=0,Ne=0);break;case"VP8X":(j=U.header={}).feature_flags=Q[fe];var me=fe+4;j.canvas_width=1+b(Q,me),me+=3,j.canvas_height=1+b(Q,me),me+=3;break;case"ALPH":X=!0,Y=se+8,Ne=fe-8;break;case"ANIM":(j=U.header).bgcolor=A(Q,fe),me=fe+4,j.loop_count=m(Q,me),me+=2;break;case"ANMF":var I,j;(j=U.frames[F]={}).offset_x=2*b(Q,fe),fe+=3,j.offset_y=2*b(Q,fe),fe+=3,j.width=1+b(Q,fe),fe+=3,j.height=1+b(Q,fe),fe+=3,j.duration=b(Q,fe),fe+=3,I=Q[fe++],j.dispose=1&I,j.blend=I>>1&1}be!="ANMF"&&(fe+=se)}return U}})(_,0);O.response=_,O.rgbaoutput=!0,O.dataurl=!1;var T=O.header?O.header:null,z=O.frames?O.frames:null;if(T){T.loop_counter=T.loop_count,y=[T.canvas_height],D=[T.canvas_width];for(var re=0;re<z.length&&z[re].blend!=0;re++);}var ae=z[0],W=E.WebPDecodeRGBA(_,ae.src_off,ae.src_size,D,y);ae.rgba=W,ae.imgwidth=D[0],ae.imgheight=y[0];for(var te=0;te<D[0]*y[0]*4;te++)S[te]=W[te];return this.width=D,this.height=y,this.data=S,this}(function(t){var e,r,n,a,o,u,c,f,p,m=function(x){return x=x||{},this.isStrokeTransparent=x.isStrokeTransparent||!1,this.strokeOpacity=x.strokeOpacity||1,this.strokeStyle=x.strokeStyle||"#000000",this.fillStyle=x.fillStyle||"#000000",this.isFillTransparent=x.isFillTransparent||!1,this.fillOpacity=x.fillOpacity||1,this.font=x.font||"10px sans-serif",this.textBaseline=x.textBaseline||"alphabetic",this.textAlign=x.textAlign||"left",this.lineWidth=x.lineWidth||1,this.lineJoin=x.lineJoin||"miter",this.lineCap=x.lineCap||"butt",this.path=x.path||[],this.transform=x.transform!==void 0?x.transform.clone():new f,this.globalCompositeOperation=x.globalCompositeOperation||"normal",this.globalAlpha=x.globalAlpha||1,this.clip_path=x.clip_path||[],this.currentPoint=x.currentPoint||new u,this.miterLimit=x.miterLimit||10,this.lastPoint=x.lastPoint||new u,this.lineDashOffset=x.lineDashOffset||0,this.lineDash=x.lineDash||[],this.margin=x.margin||[0,0,0,0],this.prevPageLastElemOffset=x.prevPageLastElemOffset||0,this.ignoreClearRect=typeof x.ignoreClearRect!="boolean"||x.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,p=new m}]);var b=function(x){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var C=x;Object.defineProperty(this,"pdf",{get:function(){return C}});var M=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return M},set:function(ee){M=!!ee}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ee){H=!!ee}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(ee){isNaN(ee)||(ie=ee)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(ee){isNaN(ee)||(oe=ee)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(ee){var Re;typeof ee=="number"?Re=[ee,ee,ee,ee]:((Re=new Array(4))[0]=ee[0],Re[1]=ee.length>=2?ee[1]:Re[0],Re[2]=ee.length>=3?ee[2]:Re[0],Re[3]=ee.length>=4?ee[3]:Re[1]),p.margin=Re}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(ee){ve=ee}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(ee){Ce=ee}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(ee){Le=ee}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(ee){ee instanceof m&&(p=ee)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(ee){p.path=ee}});var Ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ge},set:function(ee){Ge=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Re;Re=A(ee),this.ctx.fillStyle=Re.style,this.ctx.isFillTransparent=Re.a===0,this.ctx.fillOpacity=Re.a,this.pdf.setFillColor(Re.r,Re.g,Re.b,{a:Re.a}),this.pdf.setTextColor(Re.r,Re.g,Re.b,{a:Re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Re=A(ee);this.ctx.strokeStyle=Re.style,this.ctx.isStrokeTransparent=Re.a===0,this.ctx.strokeOpacity=Re.a,Re.a===0?this.pdf.setDrawColor(255,255,255):(Re.a,this.pdf.setDrawColor(Re.r,Re.g,Re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var lt=null,tt=null,ct=null;Object.defineProperty(this,"fontFaces",{get:function(){return ct},set:function(ee){lt=null,tt=null,ct=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Re;if(this.ctx.font=ee,(Re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var We=Re[1];Re[2];var Ee=Re[3],rt=Re[4];Re[5];var At=Re[6],Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(Ct==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var ue=(function(St){var yn,Cr,yr=[],ur=St.trim();if(ur==="")return B0;if(ur in a5)return[a5[ur]];for(;ur!=="";){switch(Cr=null,yn=(ur=l5(ur)).charAt(0)){case'"':case"'":Cr=DI(ur.substring(1),yn);break;default:Cr=II(ur)}if(Cr===null||(yr.push(Cr[0]),(ur=l5(Cr[1]))!==""&&ur.charAt(0)!==","))return B0;ur=ur.replace(/^,/,"")}return yr})(At);if(this.fontFaces){var he=(function(St,yn){var Cr=St.getFontList(),yr=JSON.stringify(Cr);if(lt===null||tt!==yr){var ur=(function(Wr){var Dt=[];return Object.keys(Wr).forEach(function(_r){Wr[_r].forEach(function(ir){var gr=null;switch(ir){case"bold":gr={family:_r,weight:"bold"};break;case"italic":gr={family:_r,style:"italic"};break;case"bolditalic":gr={family:_r,weight:"bold",style:"italic"};break;case"":case"normal":gr={family:_r}}gr!==null&&(gr.ref={name:_r,style:ir},Dt.push(gr))})}),Dt})(Cr);lt=(function(Wr){for(var Dt={},_r=0;_r<Wr.length;++_r){var ir=M0(Wr[_r]),gr=ir.family,ln=ir.stretch,mr=ir.style,Vt=ir.weight;Dt[gr]=Dt[gr]||{},Dt[gr][ln]=Dt[gr][ln]||{},Dt[gr][ln][mr]=Dt[gr][ln][mr]||{},Dt[gr][ln][mr][Vt]=ir}return Dt})(ur.concat(yn)),tt=yr}return lt})(this.pdf,this.fontFaces),Ie=ue.map(function(St){return{family:St,stretch:"normal",weight:Ee,style:We}}),Ze=(function(St,yn,Cr){for(var yr=(Cr=Cr||{}).defaultFontFamily||"times",ur=Object.assign({},RI,Cr.genericFontFamilies||{}),Wr=null,Dt=null,_r=0;_r<yn.length;++_r)if(ur[(Wr=M0(yn[_r])).family]&&(Wr.family=ur[Wr.family]),St.hasOwnProperty(Wr.family)){Dt=St[Wr.family];break}if(!(Dt=Dt||St[yr]))throw new Error("Could not find a font-family for the rule '"+o5(Wr)+"' and default family '"+yr+"'.");if(Dt=(function(ir,gr){if(gr[ir])return gr[ir];var ln=Rv[ir],mr=ln<=Rv.normal?-1:1,Vt=i5(gr,sj,ln,mr);if(!Vt)throw new Error("Could not find a matching font-stretch value for "+ir);return Vt})(Wr.stretch,Dt),Dt=(function(ir,gr){if(gr[ir])return gr[ir];for(var ln=nj[ir],mr=0;mr<ln.length;++mr)if(gr[ln[mr]])return gr[ln[mr]];throw new Error("Could not find a matching font-style for "+ir)})(Wr.style,Dt),!(Dt=(function(ir,gr){if(gr[ir])return gr[ir];if(ir===400&&gr[500])return gr[500];if(ir===500&&gr[400])return gr[400];var ln=LI[ir],mr=i5(gr,ij,ln,ir<400?-1:1);if(!mr)throw new Error("Could not find a matching font-weight for value "+ir);return mr})(Wr.weight,Dt)))throw new Error("Failed to resolve a font for the rule '"+o5(Wr)+"'.");return Dt})(he,Ie);this.pdf.setFont(Ze.ref.name,Ze.ref.style)}else{var Ve="";(Ee==="bold"||parseInt(Ee,10)>=700||We==="bold")&&(Ve="bold"),We==="italic"&&(Ve+="italic"),Ve.length===0&&(Ve="normal");for(var ze="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<ue.length;ft++){if(this.pdf.internal.getFont(ue[ft],Ve,{noFallback:!0,disableWarning:!0})!==void 0){ze=ue[ft];break}if(Ve==="bolditalic"&&this.pdf.internal.getFont(ue[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ze=ue[ft],Ve="bold";else if(this.pdf.internal.getFont(ue[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ze=ue[ft],Ve="normal";break}}if(ze===""){for(var Et=0;Et<ue.length;Et++)if(ot[ue[Et]]){ze=ot[ue[Et]];break}}ze=ze===""?"Times":ze,this.pdf.setFont(ze,Ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,j.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,j.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};b.prototype.setLineDash=function(x){this.lineDash=x},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){z.call(this,"fill",!1)},b.prototype.stroke=function(){z.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(x,C){if(isNaN(x)||isNaN(C))throw Zn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var M=this.ctx.transform.applyToPoint(new u(x,C));this.path.push({type:"mt",x:M.x,y:M.y}),this.ctx.lastPoint=new u(x,C)},b.prototype.closePath=function(){var x=new u(0,0),C=0;for(C=this.path.length-1;C!==-1;C--)if(this.path[C].type==="begin"&&zn(this.path[C+1])==="object"&&typeof this.path[C+1].x=="number"){x=new u(this.path[C+1].x,this.path[C+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(x.x,x.y)},b.prototype.lineTo=function(x,C){if(isNaN(x)||isNaN(C))throw Zn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var M=this.ctx.transform.applyToPoint(new u(x,C));this.path.push({type:"lt",x:M.x,y:M.y}),this.ctx.lastPoint=new u(M.x,M.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},b.prototype.quadraticCurveTo=function(x,C,M,H){if(isNaN(M)||isNaN(H)||isNaN(x)||isNaN(C))throw Zn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new u(M,H)),oe=this.ctx.transform.applyToPoint(new u(x,C));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new u(ie.x,ie.y)},b.prototype.bezierCurveTo=function(x,C,M,H,ie,oe){if(isNaN(ie)||isNaN(oe)||isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H))throw Zn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new u(ie,oe)),Ce=this.ctx.transform.applyToPoint(new u(x,C)),Le=this.ctx.transform.applyToPoint(new u(M,H));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Le.x,y2:Le.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new u(ve.x,ve.y)},b.prototype.arc=function(x,C,M,H,ie,oe){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H)||isNaN(ie))throw Zn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new u(x,C));x=ve.x,C=ve.y;var Ce=this.ctx.transform.applyToPoint(new u(0,M)),Le=this.ctx.transform.applyToPoint(new u(0,0));M=Math.sqrt(Math.pow(Ce.x-Le.x,2)+Math.pow(Ce.y-Le.y,2))}Math.abs(ie-H)>=2*Math.PI&&(H=0,ie=2*Math.PI),this.path.push({type:"arc",x,y:C,radius:M,startAngle:H,endAngle:ie,counterclockwise:oe})},b.prototype.arcTo=function(x,C,M,H,ie){throw new Error("arcTo not implemented.")},b.prototype.rect=function(x,C,M,H){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H))throw Zn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(x,C),this.lineTo(x+M,C),this.lineTo(x+M,C+H),this.lineTo(x,C+H),this.lineTo(x,C),this.lineTo(x+M,C),this.lineTo(x,C)},b.prototype.fillRect=function(x,C,M,H){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H))throw Zn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(x,C,M,H),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},b.prototype.strokeRect=function(x,C,M,H){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H))throw Zn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(x,C,M,H),this.stroke())},b.prototype.clearRect=function(x,C,M,H){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H))throw Zn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(x,C,M,H))},b.prototype.save=function(x){x=typeof x!="boolean"||x;for(var C=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("q");if(this.pdf.setPage(C),x){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},b.prototype.restore=function(x){x=typeof x!="boolean"||x;for(var C=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("Q");this.pdf.setPage(C),x&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(x){var C,M,H,ie;if(x.isCanvasGradient===!0&&(x=x.getColor()),!x)return{r:0,g:0,b:0,a:0,style:x};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(x))C=0,M=0,H=0,ie=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(x);if(oe!==null)C=parseInt(oe[1]),M=parseInt(oe[2]),H=parseInt(oe[3]),ie=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(x))!==null)C=parseInt(oe[1]),M=parseInt(oe[2]),H=parseInt(oe[3]),ie=parseFloat(oe[4]);else{if(ie=1,typeof x=="string"&&x.charAt(0)!=="#"){var ve=new Z4(x);x=ve.ok?ve.toHex():"#000000"}x.length===4?(C=x.substring(1,2),C+=C,M=x.substring(2,3),M+=M,H=x.substring(3,4),H+=H):(C=x.substring(1,3),M=x.substring(3,5),H=x.substring(5,7)),C=parseInt(C,16),M=parseInt(M,16),H=parseInt(H,16)}}return{r:C,g:M,b:H,a:ie,style:x}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(x,C,M,H){if(isNaN(C)||isNaN(M)||typeof x!="string")throw Zn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!y.call(this)){var ie=se(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;F.call(this,{text:x,x:C,y:M,scale:oe,angle:ie,align:this.textAlign,maxWidth:H})}},b.prototype.strokeText=function(x,C,M,H){if(isNaN(C)||isNaN(M)||typeof x!="string")throw Zn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){H=isNaN(H)?void 0:H;var ie=se(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;F.call(this,{text:x,x:C,y:M,scale:oe,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:H})}},b.prototype.measureText=function(x){if(typeof x!="string")throw Zn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var C=this.pdf,M=this.pdf.internal.scaleFactor,H=C.internal.getFontSize(),ie=C.getStringUnitWidth(x)*H/C.internal.scaleFactor;return new function(oe){var ve=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:ie*=Math.round(96*M/72*1e4)/1e4})},b.prototype.scale=function(x,C){if(isNaN(x)||isNaN(C))throw Zn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var M=new f(x,0,0,C,0,0);this.ctx.transform=this.ctx.transform.multiply(M)},b.prototype.rotate=function(x){if(isNaN(x))throw Zn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var C=new f(Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x),0,0);this.ctx.transform=this.ctx.transform.multiply(C)},b.prototype.translate=function(x,C){if(isNaN(x)||isNaN(C))throw Zn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var M=new f(1,0,0,1,x,C);this.ctx.transform=this.ctx.transform.multiply(M)},b.prototype.transform=function(x,C,M,H,ie,oe){if(isNaN(x)||isNaN(C)||isNaN(M)||isNaN(H)||isNaN(ie)||isNaN(oe))throw Zn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new f(x,C,M,H,ie,oe);this.ctx.transform=this.ctx.transform.multiply(ve)},b.prototype.setTransform=function(x,C,M,H,ie,oe){x=isNaN(x)?1:x,C=isNaN(C)?0:C,M=isNaN(M)?0:M,H=isNaN(H)?1:H,ie=isNaN(ie)?0:ie,oe=isNaN(oe)?0:oe,this.ctx.transform=new f(x,C,M,H,ie,oe)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(x,C,M,H,ie,oe,ve,Ce,Le){var Ge=this.pdf.getImageProperties(x),lt=1,tt=1,ct=1,ee=1;H!==void 0&&Ce!==void 0&&(ct=Ce/H,ee=Le/ie,lt=Ge.width/H*Ce/H,tt=Ge.height/ie*Le/ie),oe===void 0&&(oe=C,ve=M,C=0,M=0),H!==void 0&&Ce===void 0&&(Ce=H,Le=ie),H===void 0&&Ce===void 0&&(Ce=Ge.width,Le=Ge.height);var Re=this.ctx.transform.decompose(),We=se(Re.rotate.shx),Ee=new f,rt=(Ee=(Ee=(Ee=Ee.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new c(oe-C*ct,ve-M*ee,H*lt,ie*tt));if(this.autoPaging){for(var At,Ct=E.call(this,rt),ue=[],he=0;he<Ct.length;he+=1)ue.indexOf(Ct[he])===-1&&ue.push(Ct[he]);T(ue);for(var Ie=ue[0],Ze=ue[ue.length-1],Ve=Ie;Ve<Ze+1;Ve++){this.pdf.setPage(Ve);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Ve===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Ve===1?0:ft+(Ve-2)*Et;if(this.ctx.clip_path.length!==0){var yn=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(At,this.posX+this.margin[3],-St+ot+this.ctx.prevPageLastElemOffset),re.call(this,"fill",!0),this.path=yn}var Cr=JSON.parse(JSON.stringify(rt));Cr=O([Cr],this.posX+this.margin[3],-St+ot+this.ctx.prevPageLastElemOffset)[0];var yr=(Ve>Ie||Ve<Ze)&&S.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Et,null).clip().discardPath()),this.pdf.addImage(x,"JPEG",Cr.x,Cr.y,Cr.w,Cr.h,null,null,We),yr&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(x,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,We)};var E=function(x,C,M){var H=[];C=C||this.pdf.internal.pageSize.width,M=M||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(x.type){default:case"mt":case"lt":H.push(Math.floor((x.y+ie)/M)+1);break;case"arc":H.push(Math.floor((x.y+ie-x.radius)/M)+1),H.push(Math.floor((x.y+ie+x.radius)/M)+1);break;case"qct":var oe=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x,x.y);H.push(Math.floor((oe.y+ie)/M)+1),H.push(Math.floor((oe.y+oe.h+ie)/M)+1);break;case"bct":var ve=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,x.x1,x.y1,x.x2,x.y2,x.x,x.y);H.push(Math.floor((ve.y+ie)/M)+1),H.push(Math.floor((ve.y+ve.h+ie)/M)+1);break;case"rect":H.push(Math.floor((x.y+ie)/M)+1),H.push(Math.floor((x.y+x.h+ie)/M)+1)}for(var Ce=0;Ce<H.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<H[Ce];)_.call(this);return H},_=function(){var x=this.fillStyle,C=this.strokeStyle,M=this.font,H=this.lineCap,ie=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=x,this.strokeStyle=C,this.font=M,this.lineCap=H,this.lineWidth=ie,this.lineJoin=oe},O=function(x,C,M){for(var H=0;H<x.length;H++)switch(x[H].type){case"bct":x[H].x2+=C,x[H].y2+=M;case"qct":x[H].x1+=C,x[H].y1+=M;default:x[H].x+=C,x[H].y+=M}return x},T=function(x){return x.sort(function(C,M){return C-M})},z=function(x,C){var M=this.fillStyle,H=this.strokeStyle,ie=this.lineCap,oe=this.lineWidth,ve=Math.abs(oe*this.ctx.transform.scaleX),Ce=this.lineJoin;if(this.autoPaging){for(var Le,Ge,lt=JSON.parse(JSON.stringify(this.path)),tt=JSON.parse(JSON.stringify(this.path)),ct=[],ee=0;ee<tt.length;ee++)if(tt[ee].x!==void 0)for(var Re=E.call(this,tt[ee]),We=0;We<Re.length;We+=1)ct.indexOf(Re[We])===-1&&ct.push(Re[We]);for(var Ee=0;Ee<ct.length;Ee++)for(;this.pdf.internal.getNumberOfPages()<ct[Ee];)_.call(this);T(ct);for(var rt=ct[0],At=ct[ct.length-1],Ct=rt;Ct<At+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=M,this.strokeStyle=H,this.lineCap=ie,this.lineWidth=ve,this.lineJoin=Ce;var ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],he=Ct===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=Ct===1?0:Ie+(Ct-2)*Ze;if(this.ctx.clip_path.length!==0){var ze=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Le,this.posX+this.margin[3],-Ve+he+this.ctx.prevPageLastElemOffset),re.call(this,x,!0),this.path=ze}if(Ge=JSON.parse(JSON.stringify(lt)),this.path=O(Ge,this.posX+this.margin[3],-Ve+he+this.ctx.prevPageLastElemOffset),C===!1||Ct===0){var ot=(Ct>rt||Ct<At)&&S.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ue,Ze,null).clip().discardPath()),re.call(this,x,C),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}this.path=lt}else this.lineWidth=ve,re.call(this,x,C),this.lineWidth=oe},re=function(x,C){if((x!=="stroke"||C||!D.call(this))&&(x==="stroke"||C||!y.call(this))){for(var M,H,ie=[],oe=this.path,ve=0;ve<oe.length;ve++){var Ce=oe[ve];switch(Ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Le=ie.length;if(oe[ve-1]&&!isNaN(oe[ve-1].x)&&(M=[Ce.x-oe[ve-1].x,Ce.y-oe[ve-1].y],Le>0)){for(;Le>=0;Le--)if(ie[Le-1].close!==!0&&ie[Le-1].begin!==!0){ie[Le-1].deltas.push(M),ie[Le-1].abs.push(Ce);break}}break;case"bct":M=[Ce.x1-oe[ve-1].x,Ce.y1-oe[ve-1].y,Ce.x2-oe[ve-1].x,Ce.y2-oe[ve-1].y,Ce.x-oe[ve-1].x,Ce.y-oe[ve-1].y],ie[ie.length-1].deltas.push(M);break;case"qct":var Ge=oe[ve-1].x+2/3*(Ce.x1-oe[ve-1].x),lt=oe[ve-1].y+2/3*(Ce.y1-oe[ve-1].y),tt=Ce.x+2/3*(Ce.x1-Ce.x),ct=Ce.y+2/3*(Ce.y1-Ce.y),ee=Ce.x,Re=Ce.y;M=[Ge-oe[ve-1].x,lt-oe[ve-1].y,tt-oe[ve-1].x,ct-oe[ve-1].y,ee-oe[ve-1].x,Re-oe[ve-1].y],ie[ie.length-1].deltas.push(M);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(Ce)}}H=C?null:x==="stroke"?"stroke":"fill";for(var We=!1,Ee=0;Ee<ie.length;Ee++)if(ie[Ee].arc)for(var rt=ie[Ee].abs,At=0;At<rt.length;At++){var Ct=rt[At];Ct.type==="arc"?te.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,C,!We):X.call(this,Ct.x,Ct.y),We=!0}else if(ie[Ee].close===!0)this.pdf.internal.out("h"),We=!1;else if(ie[Ee].begin!==!0){var ue=ie[Ee].start.x,he=ie[Ee].start.y;Y.call(this,ie[Ee].deltas,ue,he),We=!0}H&&Q.call(this,H),C&&fe.call(this)}},ae=function(x){var C=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,M=C*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return x-M;case"top":return x+C-M;case"hanging":return x+C-2*M;case"middle":return x+C/2-M;default:return x}},W=function(x){return x+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var x=function(){};return x.colorStops=[],x.addColorStop=function(C,M){this.colorStops.push([C,M])},x.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},x.isCanvasGradient=!0,x},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var te=function(x,C,M,H,ie,oe,ve,Ce,Le){for(var Ge=be.call(this,M,H,ie,oe),lt=0;lt<Ge.length;lt++){var tt=Ge[lt];lt===0&&(Le?U.call(this,tt.x1+x,tt.y1+C):X.call(this,tt.x1+x,tt.y1+C)),Ne.call(this,x,C,tt.x2,tt.y2,tt.x3,tt.y3,tt.x4,tt.y4)}Ce?fe.call(this):Q.call(this,ve)},Q=function(x){switch(x){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},fe=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(x,C){this.pdf.internal.out(r(x)+" "+n(C)+" m")},F=function(x){var C;switch(x.align){case"right":case"end":C="right";break;case"center":C="center";break;default:C="left"}var M,H,ie,oe=this.pdf.getTextDimensions(x.text),ve=ae.call(this,x.y),Ce=W.call(this,ve)-oe.h,Le=this.ctx.transform.applyToPoint(new u(x.x,ve));if(this.autoPaging){var Ge=this.ctx.transform.decompose(),lt=new f;lt=(lt=(lt=lt.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale);for(var tt=this.ctx.transform.applyToRectangle(new c(x.x,ve,oe.w,oe.h)),ct=lt.applyToRectangle(new c(x.x,Ce,oe.w,oe.h)),ee=E.call(this,ct),Re=[],We=0;We<ee.length;We+=1)Re.indexOf(ee[We])===-1&&Re.push(ee[We]);T(Re);for(var Ee=Re[0],rt=Re[Re.length-1],At=Ee;At<rt+1;At++){this.pdf.setPage(At);var Ct=At===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[2],Ie=he-this.margin[0],Ze=this.pdf.internal.pageSize.width-this.margin[1],Ve=Ze-this.margin[3],ze=At===1?0:ue+(At-2)*Ie;if(this.ctx.clip_path.length!==0){var ot=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(M,this.posX+this.margin[3],-1*ze+Ct),re.call(this,"fill",!0),this.path=ot}var ft=O([JSON.parse(JSON.stringify(ct))],this.posX+this.margin[3],-ze+Ct+this.ctx.prevPageLastElemOffset)[0];x.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*x.scale),ie=this.lineWidth,this.lineWidth=ie*x.scale);var Et=this.autoPaging!=="text";if(Et||ft.y+ft.h<=he){if(Et||ft.y>=Ct&&ft.x<=Ze){var St=Et?x.text:this.pdf.splitTextToSize(x.text,x.maxWidth||Ze-ft.x)[0],yn=O([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-ze+Ct+this.ctx.prevPageLastElemOffset)[0],Cr=Et&&(At>Ee||At<rt)&&S.call(this);Cr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,Ie,null).clip().discardPath()),this.pdf.text(St,yn.x,yn.y,{angle:x.angle,align:C,renderingMode:x.renderingMode}),Cr&&this.pdf.restoreGraphicsState()}}else ft.y<he&&(this.ctx.prevPageLastElemOffset+=he-ft.y);x.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=ie)}}else x.scale>=.01&&(H=this.pdf.internal.getFontSize(),this.pdf.setFontSize(H*x.scale),ie=this.lineWidth,this.lineWidth=ie*x.scale),this.pdf.text(x.text,Le.x+this.posX,Le.y+this.posY,{angle:x.angle,align:C,renderingMode:x.renderingMode,maxWidth:x.maxWidth}),x.scale>=.01&&(this.pdf.setFontSize(H),this.lineWidth=ie)},X=function(x,C,M,H){M=M||0,H=H||0,this.pdf.internal.out(r(x+M)+" "+n(C+H)+" l")},Y=function(x,C,M){return this.pdf.lines(x,C,M,null,null)},Ne=function(x,C,M,H,ie,oe,ve,Ce){this.pdf.internal.out([e(a(M+x)),e(o(H+C)),e(a(ie+x)),e(o(oe+C)),e(a(ve+x)),e(o(Ce+C)),"c"].join(" "))},be=function(x,C,M,H){for(var ie=2*Math.PI,oe=Math.PI/2;C>M;)C-=ie;var ve=Math.abs(M-C);ve<ie&&H&&(ve=ie-ve);for(var Ce=[],Le=H?-1:1,Ge=C;ve>1e-5;){var lt=Ge+Le*Math.min(ve,oe);Ce.push(we.call(this,x,Ge,lt)),ve-=Math.abs(lt-Ge),Ge=lt}return Ce},we=function(x,C,M){var H=(M-C)/2,ie=x*Math.cos(H),oe=x*Math.sin(H),ve=ie,Ce=-oe,Le=ve*ve+Ce*Ce,Ge=Le+ve*ie+Ce*oe,lt=4/3*(Math.sqrt(2*Le*Ge)-Ge)/(ve*oe-Ce*ie),tt=ve-lt*Ce,ct=Ce+lt*ve,ee=tt,Re=-ct,We=H+C,Ee=Math.cos(We),rt=Math.sin(We);return{x1:x*Math.cos(C),y1:x*Math.sin(C),x2:tt*Ee-ct*rt,y2:tt*rt+ct*Ee,x3:ee*Ee-Re*rt,y3:ee*rt+Re*Ee,x4:x*Math.cos(M),y4:x*Math.sin(M)}},se=function(x){return 180*x/Math.PI},me=function(x,C,M,H,ie,oe){var ve=x+.5*(M-x),Ce=C+.5*(H-C),Le=ie+.5*(M-ie),Ge=oe+.5*(H-oe),lt=Math.min(x,ie,ve,Le),tt=Math.max(x,ie,ve,Le),ct=Math.min(C,oe,Ce,Ge),ee=Math.max(C,oe,Ce,Ge);return new c(lt,ct,tt-lt,ee-ct)},I=function(x,C,M,H,ie,oe,ve,Ce){var Le,Ge,lt,tt,ct,ee,Re,We,Ee,rt,At,Ct,ue,he,Ie=M-x,Ze=H-C,Ve=ie-M,ze=oe-H,ot=ve-ie,ft=Ce-oe;for(Ge=0;Ge<41;Ge++)Ee=(Re=(lt=x+(Le=Ge/40)*Ie)+Le*((ct=M+Le*Ve)-lt))+Le*(ct+Le*(ie+Le*ot-ct)-Re),rt=(We=(tt=C+Le*Ze)+Le*((ee=H+Le*ze)-tt))+Le*(ee+Le*(oe+Le*ft-ee)-We),Ge==0?(At=Ee,Ct=rt,ue=Ee,he=rt):(At=Math.min(At,Ee),Ct=Math.min(Ct,rt),ue=Math.max(ue,Ee),he=Math.max(he,rt));return new c(Math.round(At),Math.round(Ct),Math.round(ue-At),Math.round(he-Ct))},j=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var x,C,M=(x=this.ctx.lineDash,C=this.ctx.lineDashOffset,JSON.stringify({lineDash:x,lineDashOffset:C}));this.prevLineDash!==M&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=M)}}})(sr.API),(function(t){var e=function(u){var c,f,p,m,b,A,y,D,S,E;for(f=[],p=0,m=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(b=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(A=(b=((b=((b=((b=(b-(E=b%85))/85)-(S=b%85))/85)-(D=b%85))/85)-(y=b%85))/85)%85,f.push(A+33,y+33,D+33,S+33,E+33)):f.push(122);return(function(_,O){for(var T=O;T>0;T--)_.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},r=function(u){var c,f,p,m,b,A=String,y="length",D=255,S="charCodeAt",E="slice",_="replace";for(u[E](-2),u=u[E](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),p=[],m=0,b=(u+=c="uuuuu"[E](u[y]%5||5))[y];b>m;m+=5)f=52200625*(u[S](m)-33)+614125*(u[S](m+1)-33)+7225*(u[S](m+2)-33)+85*(u[S](m+3)-33)+(u[S](m+4)-33),p.push(D&f>>24,D&f>>16,D&f>>8,D&f);return(function(O,T){for(var z=T;z>0;z--)O.pop()})(p,c[y]),A.fromCharCode.apply(A,p)},n=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=_v(c)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(u,c){var f=0,p=u||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":p=r(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=a(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=n(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(sr.API),(function(t){t.loadFile=function(e,r,n){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,p,m){var b=new XMLHttpRequest,A=0,y=function(D){var S=D.length,E=[],_=String.fromCharCode;for(A=0;A<S;A+=1)E.push(_(255&D.charCodeAt(A)));return E.join("")};if(b.open("GET",f,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?m(y(this.responseText)):m(void 0)}),b.send(null),p&&b.status===200)return y(b.responseText)})(a,o,u)}catch{}return c})(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(sr.API),(function(t){function e(){return(Br.html2canvas?Promise.resolve(Br.html2canvas):b0(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(Br.DOMPurify?Promise.resolve(Br.DOMPurify):b0(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var f=zn(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var p=document.createElement(c);for(var m in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[m]=f.style[m];return p},o=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(c(b,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function c(f){var p=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),p);return(m=m.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(p){switch(n(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(r).then(function(p){return this.set({src:a("div",{innerHTML:c,dompurify:p})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=this.opt.jsPDF,m=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var y=0;y<m.length;++y){var D=m[y],S=D.src.find(function(E){return E.format==="truetype"});S&&p.addFont(S.url,D.ref.name,D.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,p.context2d.save(!0),f(this.prop.container,A)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(n(c)!=="object")return this;var f=Object.keys(c||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=c[p]};switch(p){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[p]=c[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var p=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(p):p})},u.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(c=c||sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,p,m){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,p,m){return this.setProgress(c?this.progress.val+c:null,f||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(c,f){var p=this;return this.thenCore(c,f,function(m,b){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(A){return p.updateProgress(null,m),A}).then(m,b).then(function(A){return p.updateProgress(1),A})})},u.prototype.thenCore=function(c,f,p){p=p||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),f&&(f=f.bind(m));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),A=p.call(b,c,f);return u.convert(A,m.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,sr.getPageSize=function(c,f,p){if(zn(c)==="object"){var m=c;c=m.orientation,f=m.unit||f,p=m.format||p}f=f||"mm",p=p||"a4",c=(""+(c||"P")).toLowerCase();var b,A=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var D,S=0,E=0;if(y.hasOwnProperty(A))S=y[A][1]/b,E=y[A][0]/b;else try{S=p[1],E=p[0]}catch{throw new Error("Invalid format: "+p)}if(c==="p"||c==="portrait")c="p",E>S&&(D=E,E=S,S=D);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",S>E&&(D=E,E=S,S=D)}return{width:E,height:S,unit:f,k:b,orientation:c}},t.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(M0):null;var p=new u(f);return f.worker?p:p.from(c).doCallback()}})(sr.API),sr.API.addJS=function(t){return u5=t,this.internal.events.subscribe("postPutResources",function(){Fp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),c5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+u5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fp!==void 0&&c5!==void 0&&this.internal.out("/Names <</JavaScript "+Fp+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=n.exec(u);if(c!=null){var f=c[1];r.internal.newObjectDeferredBegin(f,!1)}r.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var b=r.internal.newObject();m.push(b);var A=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var y=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<m.length;o++)r.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+y+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,o){var u={title:a,options:o,children:[]};return n==null&&(n=this.root),n.children.push(u),u},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var u=n.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=r.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var p=0;p<n.children.length;p++)this.renderItems(n.children[p])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var o=0;o<a.children.length;o++)n.count++,this.count_r(n,a.children[o]);return n.count}}])})(sr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,o,u,c){var f,p=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=u||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,f=(function(b){for(var A,y=256*b.charCodeAt(4)+b.charCodeAt(5),D=b.length,S={width:0,height:0,numcomponents:1},E=4;E<D;E+=2){if(E+=y,e.indexOf(b.charCodeAt(E+1))!==-1){A=256*b.charCodeAt(E+5)+b.charCodeAt(E+6),S={width:256*b.charCodeAt(E+7)+b.charCodeAt(E+8),height:A,numcomponents:b.charCodeAt(E+9)};break}y=256*b.charCodeAt(E+2)+b.charCodeAt(E+3)}return S})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:r,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:p,index:n,alias:a}}return m}})(sr.API),sr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,o=xI(t,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,p=o.palette,m=o.depth;a=p&&f===1?(function(te){for(var Q=te.width,fe=te.height,U=te.data,F=te.palette,X=te.depth,Y=!1,Ne=[],be=[],we=void 0,se=!1,me=0,I=0;I<F.length;I++){var j=py(F[I],4),x=j[0],C=j[1],M=j[2],H=j[3];Ne.push(x,C,M),H!=null&&(H===0?(me++,be.length<1&&be.push(I)):H<255&&(se=!0))}if(se||me>1){Y=!0,be=void 0;var ie=Q*fe;we=new Uint8Array(ie);for(var oe=new DataView(U.buffer),ve=0;ve<ie;ve++){var Ce=q0(oe,ve,X),Le=py(F[Ce],4)[3];we[ve]=Le}}else me===0&&(be=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:U,alphaBytes:we,needSMask:Y,palette:Ne,mask:be}})(o):f===2||f===4?(function(te){for(var Q=te.data,fe=te.width,U=te.height,F=te.channels,X=te.depth,Y=F===2?"DeviceGray":"DeviceRGB",Ne=F-1,be=fe*U,we=Ne,se=be*we,me=1*be,I=Math.ceil(se*X/8),j=Math.ceil(me*X/8),x=new Uint8Array(I),C=new Uint8Array(j),M=new DataView(Q.buffer),H=new DataView(x.buffer),ie=new DataView(C.buffer),oe=!1,ve=0;ve<be;ve++){for(var Ce=ve*F,Le=0;Le<we;Le++)y5(H,q0(M,Ce+Le,X),ve*we+Le,X);var Ge=q0(M,Ce+we,X);Ge<(1<<X)-1&&(oe=!0),y5(ie,Ge,1*ve,X)}return{colorSpace:Y,colorsPerPixel:Ne,sMaskBitsPerComponent:oe?X:void 0,colorBytes:x,alphaBytes:C,needSMask:oe}})(o):(function(te){var Q=te.data,fe=te.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:fe,colorsPerPixel:fe==="DeviceGray"?1:3,colorBytes:Q instanceof Uint16Array?(function(U){for(var F=U.length,X=new Uint8Array(2*F),Y=new DataView(X.buffer,X.byteOffset,X.byteLength),Ne=0;Ne<F;Ne++)Y.setUint16(2*Ne,U[Ne],!1);return X})(Q):Q,needSMask:!1}})(o);var b,A,y,D=a,S=D.colorSpace,E=D.colorsPerPixel,_=D.sMaskBitsPerComponent,O=D.colorBytes,T=D.alphaBytes,z=D.needSMask,re=D.palette,ae=D.mask,W=null;return n!==sr.API.image_compression.NONE&&typeof _v=="function"?(W=(function(te){var Q;switch(te){case sr.API.image_compression.FAST:Q=11;break;case sr.API.image_compression.MEDIUM:Q=13;break;case sr.API.image_compression.SLOW:Q=14;break;default:Q=12}return Q})(n),b=this.decode.FLATE_DECODE,A="/Predictor ".concat(W," /Colors ").concat(E," /BitsPerComponent ").concat(m," /Columns ").concat(u),t=p5(O,Math.ceil(u*E*m/8),E,m,n),z&&(y=p5(T,Math.ceil(u*_/8),1,_,n))):(b=void 0,A=void 0,t=O,z&&(y=T)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:r,data:t,index:e,filter:b,decodeParameters:A,transparency:ae,palette:re,sMask:y,predictor:W,width:u,height:c,bitsPerComponent:m,sMaskBitsPerComponent:_,colorSpace:S}}},(function(t){t.processGIF89A=function(e,r,n,a){var o=new BI(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:c},m=new U0(100).encode(p,100);return t.processJPEG.call(this,m,r,n,a)},t.processGIF87A=t.processGIF89A})(sr.API),qo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Zn.log("bit decode error:"+r)}},qo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}r!==0&&(this.pos+=4-r)}},qo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+2*a*4,c=o>>4,f=15&o,p=this.palette[c];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*a+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},qo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},qo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,m=n*this.width*4+4*a;this.data[m]=f,this.data[m+1]=c,this.data[m+2]=u,this.data[m+3]=p}this.pos+=t}},qo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&r)/r*255|0,p=(u>>11)/e*255|0,m=a*this.width*4+4*o;this.data[m]=p,this.data[m+1]=f,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},qo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*r;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=n,this.data[u+3]=255}this.pos+=this.width%4}},qo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=u}},qo.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,a){var o=new qo(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new U0(100).encode(f,100);return t.processJPEG.call(this,p,r,n,a)}})(sr.API),w5.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,a){var o=new w5(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new U0(100).encode(f,100);return t.processJPEG.call(this,p,r,n,a)}})(sr.API),sr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,p=0;p<a;p+=4){var m=n[p],b=n[p+1],A=n[p+2],y=n[p+3];o[c++]=m,o[c++]=b,o[c++]=A,u[f++]=y}var D=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:D,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},sr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pd=sr.API,Op=Pd.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,p=e.kerning?e.kerning:a.metadata.Unicode.kerning,m=p.fof?p.fof:1,b=e.doKerning!==!1,A=0,y=t.length,D=0,S=c[0]||f,E=[];for(r=0;r<y;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+u*(1e3/o)||0)/1e3):(A=b&&zn(p[n])==="object"&&!isNaN(parseInt(p[n][D],10))?p[n][D]/m:0,E.push((c[n]||S)/f+A)),D=n;return E},d5=Pd.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Pd.processArabic&&(t=Pd.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:Op.apply(this,arguments).reduce(function(o,u){return o+u},0)},f5=function(t,e,r,n){for(var a=[],o=0,u=t.length,c=0;o!==u&&c+e[o]<r;)c+=e[o],o++;a.push(t.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>n&&(a.push(t.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(t.slice(f,o)),a},h5=function(t,e,r){r||(r={});var n,a,o,u,c,f,p,m=[],b=[m],A=r.textIndent||0,y=0,D=0,S=t.split(" "),E=Op.apply(this,[" ",r])[0];if(f=r.lineIndent===-1?S[0].length+2:r.lineIndent||0){var _=Array(f).join(" "),O=[];S.map(function(z){(z=z.split(/\s*\n/)).length>1?O=O.concat(z.map(function(re,ae){return(ae&&re.length?`
`:"")+re})):O.push(z[0])}),S=O,f=d5.apply(this,[_,r])}for(o=0,u=S.length;o<u;o++){var T=0;if(n=S[o],f&&n[0]==`
`&&(n=n.substr(1),T=1),A+y+(D=(a=Op.apply(this,[n,r])).reduce(function(z,re){return z+re},0))>e||T){if(D>e){for(c=f5.apply(this,[n,a,e-(A+y),e]),m.push(c.shift()),m=[c.pop()];c.length;)b.push([c.shift()]);D=a.slice(n.length-(m[0]?m[0].length:0)).reduce(function(z,re){return z+re},0)}else m=[n];b.push(m),A=D+f,y=E}else m.push(n),A+=y+D,y=E}return p=f?function(z,re){return(re?_:"")+z.join(" ")}:function(z){return z.join(" ")},b.map(p)},Pd.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var b=this.internal.getFont(m.fontName,m.fontStyle),A="Unicode";return b.metadata[A]?{widths:b.metadata[A].widths||{0:1},kerning:b.metadata[A].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=r.lineIndent;var c,f,p=[];for(c=0,f=n.length;c<f;c++)p=p.concat(h5.apply(this,[n[c],u,o]));return p},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},o=0;o<16;o++)n[r[o]]=e[o],a[e[o]]=r[o];var u=function(A){return"0x"+parseInt(A,10).toString(16)},c=t.__fontmetrics__.compress=function(A){var y,D,S,E,_=["{"];for(var O in A){if(y=A[O],isNaN(parseInt(O,10))?D="'"+O+"'":(O=parseInt(O,10),D=(D=u(O).slice(2)).slice(0,-1)+a[D.slice(-1)]),typeof y=="number")y<0?(S=u(y).slice(3),E="-"):(S=u(y).slice(2),E=""),S=E+S.slice(0,-1)+a[S.slice(-1)];else{if(zn(y)!=="object")throw new Error("Don't know what to do with value type "+zn(y)+".");S=c(y)}_.push(D+S)}return _.push("}"),_.join("")},f=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,D,S,E,_={},O=1,T=_,z=[],re="",ae="",W=A.length-1,te=1;te<W;te+=1)(E=A[te])=="'"?y?(S=y.join(""),y=void 0):y=[]:y?y.push(E):E=="{"?(z.push([T,S]),T={},S=void 0):E=="}"?((D=z.pop())[0][D[1]]=T,S=void 0,T=D[0]):E=="-"?O=-1:S===void 0?n.hasOwnProperty(E)?(re+=n[E],S=parseInt(re,16)*O,O=1,re=""):re+=E:n.hasOwnProperty(E)?(ae+=n[E],T[S]=parseInt(ae,16)*O,O=1,S=void 0,ae=""):ae+=E;return _},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var y=A.font,D=b.Unicode[y.postScriptName];D&&(y.metadata.Unicode={},y.metadata.Unicode.widths=D.widths,y.metadata.Unicode.kerning=D.kerning);var S=m.Unicode[y.postScriptName];S&&(y.metadata.Unicode.encoding=S,y.encoding=S.codePages[0])}])})(sr.API),(function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),o=0;o<n;o++)a[o]=r.charCodeAt(o);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,o=r.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Zp(c)),u.metadata=t.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,n)}}])})(sr),sr.API.addSvgAsImage=function(t,e,r,n,a,o,u,c){if(isNaN(e)||isNaN(r))throw Zn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Zn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=n,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Br.canvg?Promise.resolve(Br.canvg):b0(()=>import("./index.es-CF_qO3Mu.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(m)}).then(function(){b.addImage(f.toDataURL("image/jpeg",1),e,r,n,a,u,c)})},sr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},sr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],p=0,m=0,b=0;function A(D,S){var E,_=!1;for(E=0;E<D.length;E+=1)D[E]===S&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=c.length;for(b=0;b<y;b+=1)r[c[b]].value=r[c[b]].defaultValue,r[c[b]].explicitSet=!1}if(zn(t)==="object"){for(a in t)if(o=t[a],A(c,a)&&o!==void 0){if(r[a].type==="boolean"&&typeof o=="boolean")r[a].value=o;else if(r[a].type==="name"&&A(r[a].valueSet,o))r[a].value=o;else if(r[a].type==="integer"&&Number.isInteger(o))r[a].value=o;else if(r[a].type==="array"){for(p=0;p<o.length;p+=1)if(n=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(n=!1);n===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}r[a].value="["+f.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,S=[];for(D in r)r[D].explicitSet===!0&&(r[D].type==="name"?S.push("/"+D+" /"+r[D].value):S.push("/"+D+" "+r[D].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(sr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],b=0,A=o.length;b<A;++b){if(c=u.metadata.characterToGlyph(o.charCodeAt(b)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(b),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(p[4-c.length],c)}return m.join("")},n=function(o){var u,c,f,p,m,b,A;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,A=(c=Object.keys(o).sort(function(y,D){return y-D})).length;b<A;b++)u=c[b],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,A=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),y="",D=0;D<A.length;D++)y+=String.fromCharCode(A[D]);var S=p();m({data:y,addLength1:!0,objectId:S}),f("endobj");var E=p();m({data:n(c.metadata.toUnicode),addLength1:!0,objectId:E}),f("endobj");var _=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Ld(c.fontName)),f("/FontFile2 "+S+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var O=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Ld(c.fontName)),f("/FontDescriptor "+_+" 0 R"),f("/W "+t.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+E+" 0 R"),f("/BaseFont /"+Ld(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+O+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,A="",y=0;y<b.length;y++)A+=String.fromCharCode(b[y]);var D=p();m({data:A,addLength1:!0,objectId:D}),f("endobj");var S=p();m({data:n(c.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var E=p();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+D+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+Ld(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=p();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ld(c.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,p=o.y,m=o.options||{},b=o.mutex||{},A=b.pdfEscape,y=b.activeFontKey,D=b.fonts,S=y,E="",_=0,O="",T=D[S].encoding;if(D[S].encoding!=="Identity-H")return{text:c,x:f,y:p,options:m,mutex:b};for(O=c,S=y,Array.isArray(c)&&(O=c[0]),_=0;_<O.length;_+=1)D[S].metadata.hasOwnProperty("cmap")&&(u=D[S].metadata.cmap.unicode.codeMap[O[_].charCodeAt(0)]),u||O[_].charCodeAt(0)<256&&D[S].metadata.hasOwnProperty("Unicode")?E+=O[_]:E+="";var z="";return parseInt(S.slice(1))<14||T==="WinAnsiEncoding"?z=A(E,S).split("").map(function(re){return re.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(z=r(E,D[S])),b.isHex=!0,{text:z,x:f,y:p,options:m,mutex:b}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?c.push([a(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):c.push(a(Object.assign({},f,{text:u[p]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(sr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(sr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,o,u,c,f,p,m,b=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,T=0;this.__bidiEngine__={};var z=function(U){var F=U.charCodeAt(),X=F>>8,Y=S[X];return Y!==void 0?b[256*Y+(255&F)]:X===252||X===253?"AL":_.test(X)?"L":X===8?"R":"N"},re=function(U){for(var F,X=0;X<U.length;X++){if((F=z(U.charAt(X)))==="L")return!1;if(F==="R")return!0}return!1},ae=function(U,F,X,Y){var Ne,be,we,se,me=F[Y];switch(me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(me="AN");break;case"AL":O=!0,me="R";break;case"WS":case"BN":me="N";break;case"CS":Y<1||Y+1>=F.length||(Ne=X[Y-1])!=="EN"&&Ne!=="AN"||(be=F[Y+1])!=="EN"&&be!=="AN"?me="N":O&&(be="AN"),me=be===Ne?be:"N";break;case"ES":me=(Ne=Y>0?X[Y-1]:"B")==="EN"&&Y+1<F.length&&F[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&X[Y-1]==="EN"){me="EN";break}if(O){me="N";break}for(we=Y+1,se=F.length;we<se&&F[we]==="ET";)we++;me=we<se&&F[we]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(se=F.length,we=Y+1;we<se&&F[we]==="NSM";)we++;if(we<se){var I=U[Y],j=I>=1425&&I<=2303||I===64286;if(Ne=F[we],j&&(Ne==="R"||Ne==="AL")){me="R";break}}}me=Y<1||(Ne=F[Y-1])==="B"?"N":X[Y-1];break;case"B":O=!1,a=!0,me=T;break;case"S":o=!0,me="N"}return me},W=function(U,F,X){var Y=U.split("");return X&&te(Y,X,{hiLevel:T}),Y.reverse(),F&&F.reverse(),Y.join("")},te=function(U,F,X){var Y,Ne,be,we,se,me=-1,I=U.length,j=0,x=[],C=T?y:A,M=[];for(O=!1,a=!1,o=!1,Ne=0;Ne<I;Ne++)M[Ne]=z(U[Ne]);for(be=0;be<I;be++){if(se=j,x[be]=ae(U,M,x,be),Y=240&(j=C[se][D[x[be]]]),j&=15,F[be]=we=C[j][5],Y>0)if(Y===16){for(Ne=me;Ne<be;Ne++)F[Ne]=1;me=-1}else me=-1;if(C[j][6])me===-1&&(me=be);else if(me>-1){for(Ne=me;Ne<be;Ne++)F[Ne]=we;me=-1}M[be]==="B"&&(F[be]=0),X.hiLevel|=we}o&&(function(H,ie,oe){for(var ve=0;ve<oe;ve++)if(H[ve]==="S"){ie[ve]=T;for(var Ce=ve-1;Ce>=0&&H[Ce]==="WS";Ce--)ie[Ce]=T}})(M,F,I)},Q=function(U,F,X,Y,Ne){if(!(Ne.hiLevel<U)){if(U===1&&T===1&&!a)return F.reverse(),void(X&&X.reverse());for(var be,we,se,me,I=F.length,j=0;j<I;){if(Y[j]>=U){for(se=j+1;se<I&&Y[se]>=U;)se++;for(me=j,we=se-1;me<we;me++,we--)be=F[me],F[me]=F[we],F[we]=be,X&&(be=X[me],X[me]=X[we],X[we]=be);j=se}j++}}},fe=function(U,F,X){var Y=U.split(""),Ne={hiLevel:T};return X||(X=[]),te(Y,X,Ne),(function(be,we,se){if(se.hiLevel!==0&&m)for(var me,I=0;I<be.length;I++)we[I]===1&&(me=E.indexOf(be[I]))>=0&&(be[I]=E[me+1])})(Y,X,Ne),Q(2,Y,F,X,Ne),Q(1,Y,F,X,Ne),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(U,F,X){if((function(Ne,be){if(be)for(var we=0;we<Ne.length;we++)be[we]=we;c===void 0&&(c=re(Ne)),p===void 0&&(p=re(Ne))})(U,F),u||!f||p)if(u&&f&&c^p)T=c?1:0,U=W(U,F,X);else if(!u&&f&&p)T=c?1:0,U=fe(U,F,X),U=W(U,F);else if(!u||c||f||p){if(u&&!f&&c^p)U=W(U,F),c?(T=0,U=fe(U,F,X)):(T=1,U=fe(U,F,X),U=W(U,F));else if(u&&c&&!f&&p)T=1,U=fe(U,F,X),U=W(U,F);else if(!u&&!f&&c^p){var Y=m;c?(T=1,U=fe(U,F,X),T=0,m=!1,U=fe(U,F,X),m=Y):(T=0,U=fe(U,F,X),U=W(U,F),T=1,m=!1,U=fe(U,F,X),m=Y,U=W(U,F))}}else T=0,U=fe(U,F,X);else T=c?1:0,U=fe(U,F,X);return U},this.__bidiEngine__.setOptions=function(U){U&&(u=U.isInputVisual,f=U.isOutputVisual,c=U.isInputRtl,p=U.isOutputRtl,m=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([r.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([r.doBidiReorder(a[c])]);n.text=u}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(sr),sr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new lu(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new e7(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new qI(this.contents),this.head=new zI(this),this.name=new GI(this),this.cmap=new oj(this),this.toUnicode={},this.hhea=new $I(this),this.maxp=new KI(this),this.hmtx=new QI(this),this.post=new HI(this),this.os2=new VI(this),this.loca=new JI(this),this.glyf=new ZI(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,p;for(p=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return u*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var rl,lu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,o,u,c,f;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*o+65536*u+256*c+f},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,o;for(o=[],n=0,a=e.length;n<a;n++)r=e[n],o.push(this.writeByte(r));return o},t})(),qI=(function(){var t;function e(r){var n,a,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,o,u,c,f,p,m,b,A,y,D,S;for(S in y=Object.keys(r).length,f=Math.log(2),b=16*Math.floor(Math.log(y)/f),u=Math.floor(b/f),m=16*y-b,(a=new lu).writeInt(this.scalarType),a.writeShort(y),a.writeShort(b),a.writeShort(u),a.writeShort(m),o=16*y,p=a.pos+o,c=null,D=[],r)for(A=r[S],a.writeString(S),a.writeInt(t(A)),a.writeInt(p),a.writeInt(A.length),D=D.concat(A),S==="head"&&(c=p),p+=A.length;p%4;)D.push(0),p++;return a.write(D),n=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(n),a.data},t=function(r){var n,a,o,u;for(r=lj.call(r);r.length%4;)r.push(0);for(o=new lu(r),a=0,n=0,u=r.length;n<u;n=n+=4)a+=o.readUInt32();return 4294967295&a},e})(),UI={}.hasOwnProperty,Fl=function(t,e){for(var r in e)UI.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};rl=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var zI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new lu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),N5=(function(){function t(e,r){var n,a,o,u,c,f,p,m,b,A,y,D,S,E,_,O,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),A=y/2,e.pos+=6,o=(function(){var z,re;for(re=[],f=z=0;0<=A?z<A:z>A;f=0<=A?++z:--z)re.push(e.readUInt16());return re})(),e.pos+=2,S=(function(){var z,re;for(re=[],f=z=0;0<=A?z<A:z>A;f=0<=A?++z:--z)re.push(e.readUInt16());return re})(),p=(function(){var z,re;for(re=[],f=z=0;0<=A?z<A:z>A;f=0<=A?++z:--z)re.push(e.readUInt16());return re})(),m=(function(){var z,re;for(re=[],f=z=0;0<=A?z<A:z>A;f=0<=A?++z:--z)re.push(e.readUInt16());return re})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var z,re;for(re=[],f=z=0;0<=a?z<a:z>a;f=0<=a?++z:--z)re.push(e.readUInt16());return re})(),f=_=0,T=o.length;_<T;f=++_)for(E=o[f],n=O=D=S[f];D<=E?O<=E:O>=E;n=D<=E?++O:--O)m[f]===0?u=n+p[f]:(u=c[m[f]/2+(n-D)-(A-f)]||0)!==0&&(u+=p[f]),this.codeMap[n]=65535&u}e.pos=b}return t.encode=function(e,r){var n,a,o,u,c,f,p,m,b,A,y,D,S,E,_,O,T,z,re,ae,W,te,Q,fe,U,F,X,Y,Ne,be,we,se,me,I,j,x,C,M,H,ie,oe,ve,Ce,Le,Ge,lt;switch(Y=new lu,u=Object.keys(e).sort(function(tt,ct){return tt-ct}),r){case"macroman":for(S=0,E=(function(){var tt=[];for(D=0;D<256;++D)tt.push(0);return tt})(),O={0:0},o={},Ne=0,me=u.length;Ne<me;Ne++)O[Ce=e[a=u[Ne]]]==null&&(O[Ce]=++S),o[a]={old:e[a],new:O[e[a]]},E[a]=O[e[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(E),{charMap:o,subtable:Y.data,maxGlyphID:S+1};case"unicode":for(F=[],b=[],T=0,O={},n={},_=p=null,be=0,I=u.length;be<I;be++)O[re=e[a=u[be]]]==null&&(O[re]=++T),n[a]={old:re,new:O[re]},c=O[re]-a,_!=null&&c===p||(_&&b.push(_),F.push(a),p=c),_=a;for(_&&b.push(_),b.push(65535),F.push(65535),fe=2*(Q=F.length),te=2*Math.pow(Math.log(Q)/Math.LN2,2),A=Math.log(te/2)/Math.LN2,W=2*Q-te,f=[],ae=[],y=[],D=we=0,j=F.length;we<j;D=++we){if(U=F[D],m=b[D],U===65535){f.push(0),ae.push(0);break}if(U-(X=n[U].new)>=32768)for(f.push(0),ae.push(2*(y.length+Q-D)),a=se=U;U<=m?se<=m:se>=m;a=U<=m?++se:--se)y.push(n[a].new);else f.push(X-U),ae.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*Q+2*y.length),Y.writeUInt16(0),Y.writeUInt16(fe),Y.writeUInt16(te),Y.writeUInt16(A),Y.writeUInt16(W),oe=0,x=b.length;oe<x;oe++)a=b[oe],Y.writeUInt16(a);for(Y.writeUInt16(0),ve=0,C=F.length;ve<C;ve++)a=F[ve],Y.writeUInt16(a);for(Le=0,M=f.length;Le<M;Le++)c=f[Le],Y.writeUInt16(c);for(Ge=0,H=ae.length;Ge<H;Ge++)z=ae[Ge],Y.writeUInt16(z);for(lt=0,ie=y.length;lt<ie;lt++)S=y[lt],Y.writeUInt16(S);return{charMap:n,subtable:Y.data,maxGlyphID:T+1}}},t})(),oj=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new N5(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=N5.encode(e,r),(a=new lu).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t})(),$I=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),VI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),HI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},t})(),WI=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},GI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,o,u,c,f,p,m,b,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),c=e.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=m=0,b=n.length;m<b;o=++m)a=n[o],e.pos=a.offset,p=e.readString(a.length),u=new WI(p,a),f[A=a.nameID]==null&&(f[A]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t})(),KI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),QI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],r=p=0;0<=a?p<a:p>a;r=0<=a?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,b,A;for(A=[],p=0,m=(b=this.metrics).length;p<m;p++)o=b[p],A.push(o.advance);return A}).call(this),n=this.widths[this.widths.length-1],f=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)f.push(this.widths.push(n));return f},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),lj=[].slice,ZI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,o,u,c,f,p,m,b;return e in this.cache?this.cache[e]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,u=(c=new lu(r.read(a))).readShort(),p=c.readShort(),b=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[e]=u===-1?new XI(c,p,b,f,m):new YI(c,u,p,b,f,m),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,o,u,c,f;for(u=[],o=[],c=0,f=r.length;c<f;c++)a=e[r[c]],o.push(u.length),a&&(u=u.concat(a.encode(n)));return o.push(u.length),{table:u,offsets:o}},t})(),YI=(function(){function t(e,r,n,a,o,u){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),XI=(function(){function t(e,r,n,a,o){var u,c;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new lu(lj.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),JI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Fl(t,rl),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],n=0,a=this.length;n<a;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],n=0,a=this.length;n<a;n+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<n.length;++u)if(n[u]=a,o<r.length&&r[o]==u){++o,n[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var p=new Array(4*n.length),m=0;m<n.length;++m)p[4*m+3]=255&n[m],p[4*m+2]=(65280&n[m])>>8,p[4*m+1]=(16711680&n[m])>>16,p[4*m]=(4278190080&n[m])>>24;return p},t})(),e7=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,o;for(r in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in r=[],a)(n=a[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in f=this.glyphsFor(r))n=f[o],a[o]=n;return a},t.prototype.encode=function(e,r){var n,a,o,u,c,f,p,m,b,A,y,D,S,E,_;for(a in n=oj.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},_=n.charMap)y[(f=_[a]).old]=f.new;for(D in A=n.maxGlyphID,u)D in y||(y[D]=A++);return m=(function(O){var T,z;for(T in z={},O)z[O[T]]=T;return z})(y),b=Object.keys(m).sort(function(O,T){return O-T}),S=(function(){var O,T,z;for(z=[],O=0,T=b.length;O<T;O++)c=b[O],z.push(m[c]);return z})(),o=this.font.glyf.encode(u,S,y),p=this.font.loca.encode(o.offsets,S),E={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t})();sr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,o,u;if(Array.isArray(r))return"["+(function(){var c,f,p;for(p=[],c=0,f=r.length;c<f;c++)n=r[c],p.push(e.convert(n));return p})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in o=["<<"],r)u=r[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+r},e})();const kd=L.memo(function({data:e,section:r,showAddButton:n=!0,onUpdateRow:a,onRemoveRow:o,onAddRow:u}){return i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Details"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:e.map((c,f)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:c.slNo}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:c.description,onChange:p=>a(r,f,"description",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${r}-desc-${f}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:c.details,onChange:p=>a(r,f,"details",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${r}-details-${f}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>o(r,f),disabled:e.length===1,className:"h-8 w-8 text-red-500","data-testid":`button-remove-${r}-${f}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},`${r}-${f}`))})]}),n&&i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>u(r),className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":`button-add-${r}`,children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})}),Ph=()=>({id:`drawing-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fileName:"",mimeType:"",dataUrl:""}),cj=t=>{if(!Array.isArray(t)||t.length===0)return[Ph()];const e=t.filter(r=>!!(r&&typeof r=="object")).map((r,n)=>({id:typeof r.id=="string"&&r.id.trim()?r.id:`drawing-${Date.now()}-${n}`,fileName:typeof r.fileName=="string"?r.fileName:"",mimeType:typeof r.mimeType=="string"?r.mimeType:"",dataUrl:typeof r.dataUrl=="string"?r.dataUrl:""}));return e.length>0?e:[Ph()]},Gf=t=>cj(t),tf=(t,e)=>({id:`payment-section-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,heading:t,terms:e}),uj=()=>[tf("Supply and Erection",["20% advance on confirmation of order/PO.","40% after finalisation & submission of GA drawing.","30% before dispatch of material.","5% after Structure Erection.","5% after Building Handing over."]),tf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])],wl=(t,e)=>{const r=(n,a)=>{const o=n.trim();return o?o.toLowerCase()==="peb - supply and erection"?"Supply and Erection":o:`Heading ${a+1}`};if(Array.isArray(t)&&t.length>0){const n=t.filter(a=>!!(a&&typeof a=="object")).map((a,o)=>({id:typeof a.id=="string"&&a.id.trim()?a.id:`payment-section-${Date.now()}-${o}`,heading:r(typeof a.heading=="string"?a.heading:"",o),terms:Array.isArray(a.terms)?a.terms.filter(u=>typeof u=="string"):[]})).filter(a=>a.terms.length>0||a.heading.trim().length>0);if(n.length>0)return n}return Array.isArray(e)&&e.length>0?[tf("Supply and Erection",e),tf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])]:uj()},S5={proposalTitle:"Techno-Commercial Offer",introSections:[{id:"intro1",type:"paragraph",content:"We are pleased to submit our proposal for the supply & erection of steel Structure against your subject enquiry."},{id:"intro2",type:"paragraph",content:"Our area of expertise is in complete design, manufacture, installation & commissioning of Heavy Structural Fabrication & Pre-Engineered Building."},{id:"intro3",type:"paragraph",content:"This proposal is detailed for your ready reference and includes scope of supply, building description, design loads/criteria, material specifications, time delivery, etc complete."},{id:"intro4",type:"paragraph",content:"We trust you will find that our proposal is in line with your requirements and we look forward to your valued order."}],paymentTerms:["15% advance on confirmation of Work order before Labour mobilization.","85% after fabrication Completion"],notes:["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables.","All Machines, Hydra, EOT cranes, raw materials, consumables, bed material. Skids for fabrication."],closingParagraphs:[{id:"closing1",type:"paragraph",content:"We hope you'll find our offer in line with your requirement & place your valued WO on us giving us an opportunity to serve you. However, please feel free to contact us for any sort of additional information that you may feel is required pertaining to this offer. We assure you our best support at all times."}],closingThanks:"Thanking you",closingCompanyName:"Revira Nexgen Structures Pvt. Ltd.",scopeBriefDetails:[{slNo:1,description:"Building Nos.",details:"01"},{slNo:2,description:"Building Description",details:"PEB Shed"},{slNo:3,description:"Building built-up Area",details:"15494 SQF"}],scopeBasicBuilding:[{slNo:1,description:"Frame Type",details:"RF/MF"},{slNo:2,description:"Length (M)",details:"36"},{slNo:3,description:"Width (M) or Span",details:"21"},{slNo:4,description:"Clear Height (M)",details:"9.0"},{slNo:5,description:"Brick Wall Height (M)",details:"3.0"},{slNo:6,description:"Side wall Column Spacing (M)",details:"As Per Drawing"},{slNo:7,description:"Roof Slope",details:"1:10"},{slNo:8,description:"End Wall Column Spacing (M)",details:"As Per GA"},{slNo:9,description:"Bay Spacing (M)",details:"As Per GA"},{slNo:10,description:"Type of end frames",details:"Non-Expandable Frames"},{slNo:11,description:"Wind bracing",details:"As per GA drawing"},{slNo:12,description:"Roof cladding",details:"As per GA drawing"},{slNo:13,description:"Wall cladding",details:"As per GA drawing"}],scopeBuildingAdditions:[{slNo:1,description:"Canopy - Location",details:"As per approved drawing"},{slNo:2,description:"Framed openings",details:"As per approved drawing"}],steelWorkFinish:[{slNo:1,description:"Welding",details:"Continuous FCAW welding along with Intermediate, AWS D1.1"},{slNo:2,description:"Frames, Built-up / HR sections/Bracings",details:"Mechanical Cleaning with swipe blast on heavy mill scale and one coat of primer and one coat of Finish Enamel paint"},{slNo:3,description:"Purlins / Girts",details:"ASTM A653"},{slNo:4,description:"Profile sheets",details:"Bare-0.47 mm thk and colour -0.5 mm thk blue RAL5012"}],designLoads:[{slNo:1,description:"Dead load",details:"0.15 KN/M2"},{slNo:2,description:"Live load",details:"0.57 KN/M2"},{slNo:3,description:"Crane Capacity",details:"-"},{slNo:4,description:"Wind load (Kmph or m/sec)",details:"44 M/sec"},{slNo:5,description:"Mezzanine Load -Kg/SQM",details:"-"},{slNo:6,description:"Slab Thickness (MM)",details:"-"},{slNo:7,description:"Seismic load (Zone no.)",details:"III"}],applicableCodes:["Frame members are designed in accordance with AISC-LRFD (American Institute of Steel Construction).","Cold Formed members are designed in accordance with the AISC For Use of Cold-Formed Light Gauge Steel Structural Member's In General Building Construction.","Deflection as per IS 800-2007.","All welding is done in accordance with the 2000 Edition of the American Welding Society (AWS D1.1).","Structural Welding Code-Steel. All Welders are qualified for the type of welds performed.",'Manufacturing dimensional tolerances are in accordance with the requirements of the 1996 Edition of the Metal Building Manufacturer Association (MBMA) of the USA.; "Low rise building systems Manual".'],materialSpecs:[{slNo:1,description:"Primary Members - Built up sections (Make  SAIL/JINDAL/TATA)",details:"Min. Y.S. 350 MPA"},{slNo:2,description:"Hot Rolled Sections - Channels (Make  TATA/Apollo/SAIL)",details:"IS: 2062 / A 572, Grade 36, Min. Y.S. 250 MPA"},{slNo:3,description:"Purlins/Girts (Make  JSW/TATA)",details:"ASTM A653"},{slNo:4,description:"Anchor bolts",details:"IS 2062 E250A"},{slNo:5,description:"Primary Connection bolts Electroplated/Pre galvanised",details:"High Strength Bolts, IS: 1367 / 8.8 Grade"},{slNo:6,description:"Secondary connection bolts Pre galvanised",details:"Bolt as per ASTM A 325, Grade 4.6"}],drawingsDelivery:["RNSPL will issue shop Approval Drawings within 1 week from date of signing contract/issue of Purchase Order and receipt of advance payment.","BUYER must return the accepted approval drawings preferably within 1 week thereafter; otherwise, may result in revision to delivery commitment.","Anchor bolts & Layout drawings for fixing anchor bolts will be provided within 10 days from the date of receipt of Advance payment.","Dispatch of materials will start as per agreed time frame from the date of receipt of signed Approval drawings with receipt of payment as per agreed terms."],erectionScopeClient:["After completion of Anchor bolt fixing, back filling of the murum up to the FFL level & rolling is under the scope of the client.","Anchor bolt shall be provided to site and fixing in presence of our engineer at site only.","Minimum 15 days curing time is to be given after Anchor Bolt Casting is done.","Free Power and water to be provided close to site.","If power not available, DG has to be provided.","We assumed that, crane can move inside the proposed building while erecting the main frames.","Security of the material is under the scope of the client.","Shelter/accommodation to be provided to the workers till completion of the work."],erectionScopeCompany:["Unloading and stacking of the material at site, Erection of material as per RNSPL specifications.","Anchor Bolt Supply & Periodic Supervision is in our Scope.","Alignment of columns and rafters.","Plumb and checking water level of columns & Portal frame.","Cleaning and touch up paint work for the structure on damaged surfaces during transportation and site movement.","Alignment of Purlins and Girts.","Fixing of roof sheeting, wall sheeting and accessories."],paymentTermSections:uj(),commercialTerms:[{slNo:1,description:"Payment Terms including taxes",conditions:"Above mentioned."},{slNo:2,description:"Delivery period",conditions:"Delivery as per mutually agreed from the date of receipt of signed approved drawings and receipt of payment as per agreed terms."},{slNo:3,description:"Erection period",conditions:"Erection Period as per mutually agreed after delivery of complete material."},{slNo:4,description:"GST",conditions:"Extra @ 18% for supply and Erection both."},{slNo:5,description:"Scope of contract",conditions:"This Contract is the only Agreement between the SELLER & BUYER and the terms which have been Expressly stated will be binding."},{slNo:6,description:"Proposal validity",conditions:"This proposal is valid for (5) days from the date of this proposal."},{slNo:7,description:"Erection drawing",conditions:"The SELLER will furnish the BUYER with all standard erection drawings required for erection of buildings."},{slNo:8,description:"Specification changes",conditions:"SELLER reserves the right to modify design and substitute material equal or superior to originally specified."},{slNo:9,description:"Change in scope",conditions:"Any change to the stated scope of supply may lead to variation in price and delivery period."},{slNo:10,description:"Our liability",conditions:"SELLER liability is restricted to scope of this contract only."},{slNo:11,description:"Ownership Of Un-Approved Material",conditions:"All unapproved material supplied to site shall be the property of SELLER."},{slNo:12,description:"Warranty",conditions:"Products supplied are warranted against defective material & workmanship for One year."},{slNo:13,description:"Permits",conditions:"SELLER shall not be responsible for obtaining permits to erect or install any product."},{slNo:14,description:"Force Majeure",conditions:"SELLER shall not be liable for delays due to circumstances beyond control."},{slNo:15,description:"Weighment",conditions:"Weight mentioned in SELLER Bill of Supply will be final for billing purposes."},{slNo:16,description:"Safety at site",conditions:"BUYER shall provide secured area for unloading and storing all material."},{slNo:17,description:"Exclusions",conditions:"Anything not mentioned in the offer."}],bankDetails:[{particular:"Account holder",value:"REVIRA NEXGEN STRUCTURES PRIVATE LIMITED"},{particular:"Bank Name",value:"YES Bank"},{particular:"A/C No.",value:"073361900002657"},{particular:"IFSC Code",value:"YESB0000733"}],uploadDrawings:[Ph()]},j5=[{serialNo:1,description:"Fabrication of Structural steel hot rolled section on job work-labour basis i.e. Pipe rack str excluding detailing.",unit:"Rs/MT",quantity:600,rate:7440,amount:4464e3,remarks:""}],t7=["Supply and Fabrication","Structural Fabrication","Job Work"],dj=["scopeBrief","scopeBasic","scopeAdditions","steelWork","designLoads","applicableCodes","materialSpecs","drawingsDelivery","erectionScopeClient","erectionScopeCompany","commercialPrice","paymentTerms","commercialTerms"],fj=["commercialPrice","paymentTerms"],Xf={scopeBrief:"SCOPE OF SUPPLY - BRIEF DETAILS",scopeBasic:"SCOPE OF SUPPLY - BASIC BUILDING DESCRIPTION",scopeAdditions:"STANDARD BUILDING ADDITIONS (CANOPY / FASCIA / LINER / PARTITIONS)",steelWork:"STEEL WORK FINISH",designLoads:"DESIGN LOADS",applicableCodes:"APPLICABLE CODES for Design",materialSpecs:"MATERIAL SPECIFICATIONS",drawingsDelivery:"DRAWINGS & DELIVERY",erectionScopeClient:"ERECTION SCOPES - SCOPE OF CLIENT",erectionScopeCompany:"ERECTION SCOPES - SCOPE OF COMPANY",commercialPrice:"COMMERCIAL PRICE & PAYMENT",paymentTerms:"PAYMENT TERMS",commercialTerms:"COMMERCIAL TERMS & CONDITIONS"},Kf=t=>(t?dj:fj).map((r,n)=>({id:`${r}-${n+1}`,type:r,heading:Xf[r]}));function C5(){const{projectId:t,quotationId:e}=Qu(),[,r]=Ma(),{toast:n}=Ba(),{data:a}=Aa(),o=L.useRef(null),[u,c]=L.useState({quotationNumber:"",revision:"R-001",enquiryNumber:"",subject:"Supply & erection of Steel Structures for PEB Shed",contactName:"Hareram R Sharma",contactMobile:"8390491843",contactEmail:"Hareram.sharma@reviranexgen.com",buildingDescription:"PEB Shed",buildingArea:"",frameType:"RF/MF",length:"",width:"",clearHeight:"",roofSlope:"1:10",paymentTerms:"",notes:"",proposalTitle:"Techno-Commercial Offer",toLabel:"To",msLabel:"M/s"}),[f,p]=L.useState([...j5]),[m,b]=L.useState(S5),[A,y]=L.useState(null),[D,S]=L.useState(null),[E,_]=L.useState(null),[O,T]=L.useState(null),[z,re]=L.useState({}),[ae,W]=L.useState(null),[te,Q]=L.useState(null),[fe,U]=L.useState(!1),[F,X]=L.useState(!1),[Y,Ne]=L.useState("Supply and Fabrication"),[be,we]=L.useState(!1),[se,me]=L.useState(!1),[I,j]=L.useState(!1),[x,C]=L.useState(!1),[M,H]=L.useState(!1),[ie,oe]=L.useState(!1),[ve,Ce]=L.useState({to:"",subject:"",message:""}),[Le,Ge]=L.useState({mobile:"",message:""}),[lt,tt]=L.useState(null),[ct,ee]=L.useState([]),[Re,We]=L.useState({}),{data:Ee,isLoading:rt}=Ir({queryKey:["/revira/api/projects",t],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${t}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch project");return q.json()},enabled:!!t}),{data:At,isLoading:Ct}=Ir({queryKey:["/revira/api/clients",Ee?.clientId],queryFn:async()=>{const q=await fetch(`/revira/api/clients/${Ee?.clientId}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch client");return q.json()},enabled:!!Ee?.clientId}),{data:ue}=Ir({queryKey:["/revira/api/branding"],enabled:!!a}),{data:he}=Ir({queryKey:["/revira/api/projects",t,"quotation",e||"latest"],queryFn:async()=>{if(e){const pe=await fetch(`/revira/api/quotations/${e}`,{credentials:"include"});if(!pe.ok)throw new Error("Failed to fetch quotation");return pe.json()}const q=await fetch(`/revira/api/projects/${t}/quotation`,{credentials:"include"});if(!q.ok){if(q.status===404)return null;throw new Error("Failed to fetch quotation")}return q.json()},enabled:!!t}),{data:Ie}=Ir({queryKey:["/revira/api/quotations",he?.id,"items"],queryFn:async()=>{const q=await fetch(`/revira/api/quotations/${he?.id}/items`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch items");return q.json()},enabled:!!he?.id}),{data:Ze}=Ir({queryKey:["/revira/api/projects",t,"quotation-versions"],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${t}/quotation-versions`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch versions");return q.json()},enabled:!!t}),Ve=L.useCallback(()=>Ee?.quotationType==="Supply and Fabrication"?dj:fj,[Ee?.quotationType]),ze=L.useCallback(q=>{const pe=new Set(Ve());if(!Array.isArray(q))return Kf(Ee?.quotationType==="Supply and Fabrication");const ye=q.filter(Pe=>!!(Pe&&typeof Pe=="object"&&"id"in Pe&&"type"in Pe&&typeof Pe.id=="string"&&typeof Pe.type=="string")).filter(Pe=>pe.has(Pe.type)).map(Pe=>({id:Pe.id,type:Pe.type,heading:typeof Pe.heading=="string"&&Pe.heading.trim().length>0?Pe.heading:Xf[Pe.type]}));if(!ye.some(Pe=>Pe.type==="paymentTerms")&&pe.has("paymentTerms")){const Pe={id:`paymentTerms-${Date.now()}`,type:"paymentTerms",heading:Xf.paymentTerms},je=ye.findIndex(Wt=>Wt.type==="commercialPrice");je>=0?ye.splice(je+1,0,Pe):ye.push(Pe)}return ye.map(Pe=>{if(Pe.type!=="commercialPrice")return Pe;const je=Pe.heading.trim().toUpperCase();return je==="COMMERCIAL PRICE"||je==="COMMERCIAL PRICE & PAYMENT TERMS"?{...Pe,heading:"COMMERCIAL PRICE & PAYMENT"}:Pe})},[Ve,Ee?.quotationType]);L.useEffect(()=>{if(Ee&&At&&!he){const q=Ee.quotationType==="Supply and Fabrication"?"RNS-Peb":Ee.quotationType==="Structural Fabrication"?"RNS-SF":"RNS-JW",ye=new Date().toLocaleString("en-US",{month:"short",year:"numeric"}).toUpperCase().replace(" ","-"),Pe=Ee.quotationType==="Supply and Fabrication"?"Supply & erection of Steel Structures for PEB Shed":Ee.quotationType==="Structural Fabrication"?"Structural Fabrication - Steel Structures":"Job Work - Steel Structures";c(je=>({...je,quotationNumber:`RNS/${ye}/${At.name}/RNS-${String(Ee.id).padStart(3,"0")}`,enquiryNumber:`${q}-RNS-${String(Ee.id).padStart(3,"0")}`,subject:Pe})),ee(Kf(Ee.quotationType==="Supply and Fabrication"))}},[Ee,At,he]),L.useEffect(()=>{if(he){let q=null;if(he.contentSections)try{q=JSON.parse(he.contentSections);const pe=Array.isArray(q?.paymentTerms)?q.paymentTerms.filter(ye=>typeof ye=="string"):[];b(ye=>({...ye,...q,paymentTermSections:wl(q?.paymentTermSections,pe),uploadDrawings:cj(q?.uploadDrawings)})),ee(ze(q?.accordionBlocks))}catch(pe){console.error("Failed to parse content sections:",pe),ee(Kf(Ee?.quotationType==="Supply and Fabrication"))}else ee(Kf(Ee?.quotationType==="Supply and Fabrication"));c({quotationNumber:he.quotationNumber,revision:he.revision,enquiryNumber:he.enquiryNumber,subject:he.subject,contactName:he.contactName,contactMobile:he.contactMobile,contactEmail:he.contactEmail,buildingDescription:he.buildingDescription||"",buildingArea:he.buildingArea||"",frameType:he.frameType||"",length:he.length||"",width:he.width||"",clearHeight:he.clearHeight||"",roofSlope:he.roofSlope||"",paymentTerms:he.paymentTerms||"",notes:he.notes||"",proposalTitle:q?.proposalTitle||"Techno-Commercial Offer",toLabel:q?.toLabel||"To",msLabel:q?.msLabel||"M/s"})}},[he,ze,Ee?.quotationType]),L.useEffect(()=>{Ie&&Ie.length>0&&p(Ie.map(q=>({id:q.id,serialNo:q.serialNo,description:q.description,unit:q.unit,quantity:Number(q.quantity)||0,rate:Number(q.rate)||0,amount:Number(q.amount)||0,remarks:q.remarks||""})))},[Ie]),L.useEffect(()=>{We(q=>{const pe={};return ct.forEach(ye=>{pe[ye.id]=q[ye.id]??!0}),pe})},[ct]),L.useEffect(()=>{const q=wl(m.paymentTermSections,m.paymentTerms);re(pe=>{const ye={};return q.forEach(Pe=>{ye[Pe.id]=pe[Pe.id]??!0}),ye})},[m.paymentTermSections,m.paymentTerms]);const ot=kn({mutationFn:async()=>{const pe=await(await kr("POST","/revira/api/quotations",{projectId:Number(t),...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:ct})})).json();for(const ye of f)ye.description.trim()&&await kr("POST",`/revira/api/quotations/${pe.id}/items`,{serialNo:ye.serialNo,description:ye.description,unit:ye.unit,quantity:String(ye.quantity),rate:String(ye.rate),amount:String(ye.amount),remarks:ye.remarks});return pe},onSuccess:q=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation","latest"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",q.id]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),r(`/revira/projects/${t}/quotation/${q.id}`),n({title:"Quotation saved",description:"The quotation has been created successfully."})},onError:q=>{n({title:"Error",description:q.message||"Failed to create quotation",variant:"destructive"})}}),ft=kn({mutationFn:async()=>{if(he){if(await kr("PUT",`/revira/api/quotations/${he.id}`,{...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:ct})}),Ie)for(const q of Ie)await kr("DELETE",`/revira/api/quotation-items/${q.id}`);for(const q of f)q.description.trim()&&await kr("POST",`/revira/api/quotations/${he.id}/items`,{serialNo:q.serialNo,description:q.description,unit:q.unit,quantity:String(q.quantity),rate:String(q.rate),amount:String(q.amount),remarks:q.remarks})}},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",e||"latest"]}),Rr.invalidateQueries({queryKey:["/revira/api/quotations",he?.id,"items"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),n({title:"Quotation updated",description:"The quotation has been updated successfully."})},onError:q=>{n({title:"Error",description:q.message||"Failed to update quotation",variant:"destructive"})}}),Et=kn({mutationFn:async()=>{if(!he)throw new Error("No quotation to duplicate");return(await kr("POST",`/revira/api/quotations/${he.id}/duplicate`)).json()},onSuccess:q=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),n({title:"Quotation duplicated",description:`Created new version: ${q.revision}`}),r(`/revira/projects/${t}/quotation/${q.id}`)},onError:q=>{n({title:"Error",description:q.message||"Failed to duplicate quotation",variant:"destructive"})}}),St=async()=>{if(!(!Ee||!At)){we(!0);try{await kr("PUT",`/revira/api/projects/${Ee.id}`,{quotationType:Y});const q=Y==="Supply and Fabrication",pe=Y==="Supply and Fabrication"?"RNS-Peb":Y==="Structural Fabrication"?"RNS-SF":"RNS-JW",ye=Y==="Supply and Fabrication"?"Supply & erection of Steel Structures for PEB Shed":Y==="Structural Fabrication"?"Structural Fabrication - Steel Structures":"Job Work - Steel Structures",Wt={quotationNumber:`RNS/${new Date().toLocaleString("en-US",{month:"short",year:"numeric"}).toUpperCase().replace(" ","-")}/${At.name}/RNS-${String(Ee.id).padStart(3,"0")}`,revision:"R-001",enquiryNumber:`${pe}-RNS-${String(Ee.id).padStart(3,"0")}`,subject:ye,contactName:u.contactName,contactMobile:u.contactMobile,contactEmail:u.contactEmail,buildingDescription:u.buildingDescription,buildingArea:u.buildingArea,frameType:u.frameType,length:u.length,width:u.width,clearHeight:u.clearHeight,roofSlope:u.roofSlope,paymentTerms:u.paymentTerms,notes:u.notes,proposalTitle:"Techno-Commercial Offer",toLabel:"To",msLabel:"M/s"},On={...JSON.parse(JSON.stringify(S5)),proposalTitle:Wt.proposalTitle,toLabel:Wt.toLabel,msLabel:Wt.msLabel},pr=Kf(q),Ls=await(await kr("POST","/revira/api/quotations",{projectId:Number(t),...Wt,contentSections:JSON.stringify({...On,accordionBlocks:pr})})).json();for(const us of j5)await kr("POST",`/revira/api/quotations/${Ls.id}/items`,{serialNo:us.serialNo,description:us.description,unit:us.unit,quantity:String(us.quantity),rate:String(us.rate),amount:String(us.amount),remarks:us.remarks});Rr.invalidateQueries({queryKey:["/revira/api/projects",t]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation","latest"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),X(!1),r(`/revira/projects/${t}/quotation/${Ls.id}`),n({title:"New quotation created",description:`${Y} quotation is ready for edit/export.`})}catch(q){n({title:"Create failed",description:q?.message||"Failed to create new quotation.",variant:"destructive"})}finally{we(!1)}}},yn=()=>{he?ft.mutate():ot.mutate()},Cr=()=>{p([...f,{serialNo:f.length+1,description:"",unit:"Rs/MT",quantity:0,rate:0,amount:0,remarks:""}])},yr=q=>{if(f.length>1){const pe=f.filter((ye,Pe)=>Pe!==q).map((ye,Pe)=>({...ye,serialNo:Pe+1}));p(pe)}},ur=(q,pe,ye)=>{const Pe=[...f];if(pe==="quantity"||pe==="rate"||pe==="amount"?Pe[q]={...Pe[q],[pe]:Number(ye)||0}:Pe[q]={...Pe[q],[pe]:ye},pe==="quantity"||pe==="rate"){const je=Pe[q].quantity,Wt=Pe[q].rate;Pe[q].amount=je*Wt}p(Pe)},Wr=()=>f.reduce((q,pe)=>q+pe.amount,0),Dt=q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(q).replace(""," "),_r=()=>new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),ir=(q,pe)=>{b(ye=>({...ye,introSections:ye.introSections.map(Pe=>Pe.id===q?{...Pe,content:pe}:Pe)}))},gr=()=>{const q=`intro${Date.now()}`;b(pe=>({...pe,introSections:[...pe.introSections,{id:q,type:"paragraph",content:"New paragraph..."}]}))},ln=q=>{b(pe=>({...pe,introSections:pe.introSections.filter(ye=>ye.id!==q)}))},mr=()=>{b(q=>({...q,notes:[...q.notes,"New note..."]})),S(m.notes.length)},Vt=(q,pe)=>{b(ye=>({...ye,notes:ye.notes.map((Pe,je)=>je===q?pe:Pe)}))},fr=q=>{b(pe=>({...pe,notes:pe.notes.filter((ye,Pe)=>Pe!==q)}))},ss=()=>{b(q=>({...q,paymentTermSections:[...wl(q.paymentTermSections),tf("New Heading",["New payment term..."])]}))},En=(q,pe)=>{b(ye=>({...ye,paymentTermSections:wl(ye.paymentTermSections).map(Pe=>Pe.id===q?{...Pe,heading:pe}:Pe)}))},Js=q=>{b(pe=>({...pe,paymentTermSections:(()=>{const ye=wl(pe.paymentTermSections).filter(Pe=>Pe.id!==q);return ye.length>0?ye:[tf("New Heading",["New payment term..."])]})()}))},ys=q=>{b(pe=>({...pe,paymentTermSections:wl(pe.paymentTermSections).map(ye=>ye.id===q?{...ye,terms:[...ye.terms,"New payment term..."]}:ye)}))},Kt=(q,pe,ye)=>{b(Pe=>({...Pe,paymentTermSections:wl(Pe.paymentTermSections).map(je=>je.id===q?{...je,terms:je.terms.map((Wt,On)=>On===pe?ye:Wt)}:je)}))},_n=(q,pe)=>{b(ye=>({...ye,paymentTermSections:wl(ye.paymentTermSections).map(Pe=>Pe.id===q?{...Pe,terms:Pe.terms.filter((je,Wt)=>Wt!==pe)}:Pe)}))},qt=()=>{b(q=>({...q,drawingsDelivery:[...q.drawingsDelivery,"New drawings/delivery item..."]}))},br=(q,pe)=>{b(ye=>({...ye,drawingsDelivery:ye.drawingsDelivery.map((Pe,je)=>je===q?pe:Pe)}))},hr=q=>{b(pe=>({...pe,drawingsDelivery:pe.drawingsDelivery.filter((ye,Pe)=>Pe!==q)}))},Pt=()=>{b(q=>({...q,erectionScopeClient:[...q.erectionScopeClient,"New client scope item..."]}))},vr=(q,pe)=>{b(ye=>({...ye,erectionScopeClient:ye.erectionScopeClient.map((Pe,je)=>je===q?pe:Pe)}))},ut=q=>{b(pe=>({...pe,erectionScopeClient:pe.erectionScopeClient.filter((ye,Pe)=>Pe!==q)}))},et=()=>{b(q=>({...q,erectionScopeCompany:[...q.erectionScopeCompany,"New company scope item..."]}))},it=(q,pe)=>{b(ye=>({...ye,erectionScopeCompany:ye.erectionScopeCompany.map((Pe,je)=>je===q?pe:Pe)}))},Qe=q=>{b(pe=>({...pe,erectionScopeCompany:pe.erectionScopeCompany.filter((ye,Pe)=>Pe!==q)}))},st=()=>{b(q=>({...q,applicableCodes:[...q.applicableCodes,"New applicable code..."]}))},vt=(q,pe)=>{b(ye=>({...ye,applicableCodes:ye.applicableCodes.map((Pe,je)=>je===q?pe:Pe)}))},wt=q=>{b(pe=>({...pe,applicableCodes:pe.applicableCodes.filter((ye,Pe)=>Pe!==q)}))},kt=()=>{const q=m.commercialTerms.length+1;b(pe=>({...pe,commercialTerms:[...pe.commercialTerms,{slNo:q,description:"New Term",conditions:"Enter conditions..."}]})),W(m.commercialTerms.length)},Lt=(q,pe,ye)=>{b(Pe=>({...Pe,commercialTerms:Pe.commercialTerms.map((je,Wt)=>Wt===q?{...je,[pe]:ye}:je)}))},It=q=>{b(pe=>({...pe,commercialTerms:pe.commercialTerms.filter((ye,Pe)=>Pe!==q).map((ye,Pe)=>({...ye,slNo:Pe+1}))}))},$t=()=>{b(q=>({...q,bankDetails:[...q.bankDetails,{particular:"New Field",value:"Enter value..."}]})),Q(m.bankDetails.length)},Ht=(q,pe,ye)=>{b(Pe=>({...Pe,bankDetails:Pe.bankDetails.map((je,Wt)=>Wt===q?{...je,[pe]:ye}:je)}))},Qt=q=>{b(pe=>({...pe,bankDetails:pe.bankDetails.filter((ye,Pe)=>Pe!==q)}))},Yt=(q,pe)=>{b(ye=>({...ye,closingParagraphs:ye.closingParagraphs.map(Pe=>Pe.id===q?{...Pe,content:pe}:Pe)}))},Ar=(q,pe)=>{const ye=pe.target.files?.[0];if(!ye)return;const Pe=ye.type.startsWith("image/"),je=ye.type==="application/pdf"||ye.name.toLowerCase().endsWith(".pdf");if(!Pe&&!je){n({title:"Unsupported file type",description:"Please upload an image or a PDF file.",variant:"destructive"});return}if(ye.size>10*1024*1024){n({title:"File too large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}const Wt=new FileReader;Wt.onloadend=()=>{const On=typeof Wt.result=="string"?Wt.result:"";b(pr=>({...pr,uploadDrawings:Gf(pr.uploadDrawings).map(Kn=>Kn.id===q?{...Kn,fileName:ye.name,mimeType:je?"application/pdf":ye.type||"image/png",dataUrl:On}:Kn)}))},Wt.readAsDataURL(ye)},wr=()=>{b(q=>({...q,uploadDrawings:[...Gf(q.uploadDrawings),Ph()]}))},zr=q=>{b(pe=>{const ye=Gf(pe.uploadDrawings).filter(Pe=>Pe.id!==q);return{...pe,uploadDrawings:ye.length>0?ye:[Ph()]}})},Pr=L.useCallback((q,pe,ye,Pe)=>{b(je=>({...je,[q]:je[q].map((Wt,On)=>On===pe?{...Wt,[ye]:Pe}:Wt)}))},[]),tr=L.useCallback(q=>{b(pe=>{const ye=pe[q];return{...pe,[q]:[...ye,{slNo:ye.length+1,description:"",details:""}]}})},[]),ar=L.useCallback((q,pe)=>{b(ye=>{const Pe=ye[q];return Pe.length>1?{...ye,[q]:Pe.filter((je,Wt)=>Wt!==pe).map((je,Wt)=>({...je,slNo:Wt+1}))}:ye})},[]),rr=L.useCallback(q=>Re[q]??!0,[Re]),Nr=L.useCallback(q=>{We(pe=>({...pe,[q]:!(pe[q]??!0)}))},[]),Or=L.useCallback((q,pe)=>{We(ye=>({...ye,[q]:pe}))},[]),Xr=L.useCallback((q,pe)=>{q===pe||q<0||pe<0||ee(ye=>{if(q>=ye.length||pe>=ye.length)return ye;const Pe=[...ye],[je]=Pe.splice(q,1);return Pe.splice(pe,0,je),Pe})},[]),Us=L.useCallback(q=>{ee(pe=>pe.filter(ye=>ye.id!==q)),We(pe=>{const{[q]:ye,...Pe}=pe;return Pe})},[]),bn=L.useCallback(q=>{let pe=null;ee(ye=>{const Pe=ye.findIndex(pr=>pr.id===q);if(Pe===-1)return ye;const je=ye[Pe],Wt={id:`${je.type}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,type:je.type,heading:je.heading};pe=Wt.id;const On=[...ye];return On.splice(Pe+1,0,Wt),On}),pe&&We(ye=>({...ye,[pe]:!0}))},[]),ei=L.useCallback((q,pe)=>{ee(ye=>ye.map(Pe=>Pe.id===q?{...Pe,heading:pe}:Pe))},[]),Gn=L.useCallback(q=>ct.filter(pe=>pe.type===q),[ct]),Gr=L.useCallback(q=>ct.findIndex(pe=>pe.id===q),[ct]),Fn=L.useCallback(q=>{const pe=Gr(q.id);return{isEditingHeading:lt===q.id,onStartEditHeading:()=>tt(q.id),onHeadingChange:Pe=>ei(q.id,Pe),onHeadingBlur:()=>{const Pe=ct.find(je=>je.id===q.id);Pe&&!Pe.heading.trim()&&ei(q.id,Xf[q.type]),tt(null)},onMoveUp:pe>0?()=>Xr(pe,pe-1):void 0,onMoveDown:pe>=0&&pe<ct.length-1?()=>Xr(pe,pe+1):void 0,onDuplicate:()=>bn(q.id),onDelete:()=>Us(q.id),canMoveUp:pe>0,canMoveDown:pe>=0&&pe<ct.length-1}},[ct,bn,lt,Gr,Xr,Us,ei]),is=async q=>{const pe=q?.save??!0,ye=q?.silent??!1,Pe=q?.returnDataUri??!1;C(!0);try{const je=new sr({orientation:"portrait",unit:"mm",format:"a4"}),Wt=210,On=297,pr=15,Kn=Wt-pr*2,Ls=35,us=30,ws=xe=>xe*.2646,ti=ws(80),$s=ws(50),wi=ws(80);let xt=Ls+10,_t=1;const zi=xe=>new Promise((qe,$e)=>{const gt=new Image;gt.crossOrigin="anonymous",gt.onload=()=>{const jt=document.createElement("canvas");jt.width=gt.width,jt.height=gt.height,jt.getContext("2d")?.drawImage(gt,0,0),qe(jt.toDataURL("image/png"))},gt.onerror=$e,gt.src=xe});let Ml=null,nl=null,ci=null;try{ue?.headerUrl&&(Ml=await zi(ue.headerUrl)),ue?.footerUrl&&(nl=await zi(ue.footerUrl)),ue?.stampUrl&&(ci=await zi(ue.stampUrl))}catch(xe){console.warn("Failed to load branding images:",xe)}const Ni=xe=>{Ml&&je.addImage(Ml,"PNG",0,0,Wt,Ls),nl&&je.addImage(nl,"PNG",0,On-us,Wt,us),ci&&je.addImage(ci,"PNG",Wt-$s-ti,On-wi-ti,ti,ti),je.setFontSize(8),je.setTextColor(128,128,128),je.text(`Page ${xe}`,Wt/2,On-8,{align:"center"})},$n=xe=>xt+xe>On-us-10?(je.addPage(),_t++,Ni(_t),xt=Ls+10,!0):!1,ds=(xe,qe=14,$e="#1e3a5f",gt=!0)=>{xt+=10,$n(15),gt&&qe>=12?(je.setFillColor("#d92134"),je.rect(pr,xt-4,4,5,"F"),je.setFontSize(qe),je.setTextColor($e),je.setFont("helvetica","bold"),je.text(xe,pr+7,xt)):(je.setFontSize(qe),je.setTextColor($e),je.setFont("helvetica","bold"),je.text(xe,pr,xt)),xt+=5.5},ui=(xe,qe=10,$e=0)=>{je.setFontSize(qe),je.setTextColor(0,0,0),je.setFont("helvetica","normal"),je.splitTextToSize(xe,Kn).forEach(jt=>{$n(6),je.text(jt,pr+$e,xt),xt+=5})},$i=(xe,qe,$e)=>{xt+=3;const gt=8,jt=2,Xt="#fff5f5",dr="#eeb7b7";$n(gt+5),je.setFillColor(Xt),je.rect(pr,xt-5,Kn,gt,"F"),je.setDrawColor(dr),je.setLineWidth(.2),je.rect(pr,xt-5,Kn,gt,"S");let Er=pr;je.setFontSize(9),je.setTextColor(0,0,0),je.setFont("helvetica","bold"),xe.forEach((dn,pn)=>{je.line(Er,xt-5,Er,xt-5+gt),je.text(dn,Er+jt,xt),Er+=$e[pn]}),je.line(Er,xt-5,Er,xt-5+gt),xt+=gt,je.setFont("helvetica","normal"),qe.forEach((dn,pn)=>{const cn=dn.map((fi,hi)=>je.splitTextToSize(fi,$e[hi]-jt*2)),Vn=Math.max(...cn.map(fi=>fi.length)),vn=Math.max(gt,Vn*4+jt);$n(vn),pn%2===0&&(je.setFillColor(245,245,245),je.rect(pr,xt-5,Kn,vn,"F")),je.setDrawColor(dr),je.rect(pr,xt-5,Kn,vn,"S");let Rt=pr;cn.forEach((fi,hi)=>{je.line(Rt,xt-5,Rt,xt-5+vn),fi.forEach((za,Co)=>{je.text(za,Rt+jt,xt-1+Co*4)}),Rt+=$e[hi]}),je.line(Rt,xt-5,Rt,xt-5+vn),xt+=vn}),xt+=1.5},fa=async()=>{const xe=window.pdfjsLib;if(xe)return xe;await new Promise(($e,gt)=>{const jt=document.querySelector('script[data-pdfjs="true"]');if(jt){jt.addEventListener("load",()=>$e(),{once:!0}),jt.addEventListener("error",()=>gt(new Error("Failed to load PDF renderer.")),{once:!0});return}const Xt=document.createElement("script");Xt.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",Xt.async=!0,Xt.dataset.pdfjs="true",Xt.onload=()=>$e(),Xt.onerror=()=>gt(new Error("Failed to load PDF renderer.")),document.head.appendChild(Xt)});const qe=window.pdfjsLib;if(!qe)throw new Error("PDF renderer is unavailable.");return qe.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",qe},No=async xe=>{const qe=await fa(),$e=await(await fetch(xe)).arrayBuffer(),gt=await qe.getDocument({data:$e}).promise,jt=[],Xt=Math.min(gt.numPages,30);for(let dr=1;dr<=Xt;dr++){const Er=await gt.getPage(dr),dn=Er.getViewport({scale:1.5}),pn=document.createElement("canvas");pn.width=dn.width,pn.height=dn.height;const cn=pn.getContext("2d");cn&&(await Er.render({canvasContext:cn,viewport:dn}).promise,jt.push(pn.toDataURL("image/jpeg",.9)))}return jt},di=(xe,qe)=>{je.addPage(),_t++,Ni(_t),xt=Ls+10,je.setFont("helvetica","bold"),je.setFontSize(10),je.setTextColor(30,58,95),je.splitTextToSize(qe,Kn).forEach(Rt=>{je.text(Rt,pr,xt),xt+=5}),xt+=1;const gt=je.getImageProperties(xe),jt=Kn,Xt=On-us-xt-8,dr=jt/gt.width,Er=Xt/gt.height,dn=Math.min(dr,Er),pn=gt.width*dn,cn=gt.height*dn,Vn=pr+(jt-pn)/2,vn=xe.startsWith("data:image/png")?"PNG":"JPEG";je.addImage(xe,vn,Vn,xt,pn,cn)};Ni(1),je.setFontSize(10),je.setTextColor(0,0,0),je.text(`Ref.: ${u.quotationNumber}`,pr,xt),je.text(`Date: ${new Date().toLocaleDateString("en-IN")}, Revision: ${u.revision}`,Wt-pr,xt,{align:"right"}),xt+=8,je.text(`Enquiry no.: ${u.enquiryNumber}`,pr,xt),xt+=8,je.text(`Project Location: ${Ee?.location||"-"}`,pr,xt),xt+=15,je.setFontSize(18),je.setTextColor("#da2032"),je.setFont("helvetica","bold"),je.text(u.proposalTitle||"Techno-Commercial Offer",Wt/2,xt,{align:"center"}),xt+=15,je.setFontSize(12),je.setTextColor(0,0,0),je.setFont("helvetica","bold"),je.text(u.toLabel||"To",pr,xt),xt+=6,je.setFont("helvetica","normal"),je.text(`${u.msLabel||"M/s"} ${At?.name||"-"}`,pr,xt),xt+=6,je.setFontSize(10),je.setFont("helvetica","normal"),je.text(`${At?.location||""}`,pr,xt),xt+=12,je.setFont("helvetica","bold"),je.text(`Subject: ${u.subject}`,pr,xt),xt+=12,je.setFont("helvetica","normal"),m.introSections.forEach(xe=>{ui(xe.content,10,0)}),xt+=7,je.setFont("helvetica","normal"),je.setFontSize(10),je.text("Regards,",pr,xt),xt+=6,je.setFont("helvetica","bold"),je.text(u.contactName,pr,xt),xt+=5,je.setFont("helvetica","normal"),je.text(`Mo: ${u.contactMobile}`,pr,xt),xt+=5,je.text(`Email: ${u.contactEmail}`,pr,xt),xt+=5.5,je.addPage(),_t++,Ni(_t),xt=Ls+10;const sl=_t;je.setFontSize(16),je.setTextColor("#1e3a5f"),je.setFont("helvetica","bold"),je.text("INDEX",Wt/2,xt,{align:"center"}),xt+=15;const Bl=xt,So=[];xt+=80,je.addPage(),_t++,Ni(_t),xt=Ls+10,ct.forEach((xe,qe)=>{const $e=xe.heading&&xe.heading.trim().length>0?xe.heading:Xf[xe.type]||`Section ${qe+1}`,gt=$e,jt=ct.slice(0,qe).filter(dr=>dr.heading===xe.heading).length,Xt=jt>0?`${gt} (${jt+1})`:gt;switch(So.push({title:Xt,page:_t}),xe.type){case"scopeBrief":$n(50),ds($e,14,"#1e3a5f"),$i(["Sl. No.","Description","Details"],m.scopeBriefDetails.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[25,90,65]);break;case"scopeBasic":$n(50),ds($e,14,"#1e3a5f"),$i(["Sl. No.","Description","Details"],m.scopeBasicBuilding.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[25,90,65]);break;case"scopeAdditions":$n(50),ds($e,14,"#1e3a5f"),$i(["Sr. No.","Description","Details"],m.scopeBuildingAdditions.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[25,90,65]);break;case"steelWork":$n(50),ds($e,14,"#1e3a5f"),$i(["No.","Description","Details"],m.steelWorkFinish.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[20,80,80]);break;case"designLoads":$n(50),ds($e,14,"#1e3a5f"),$i(["Sr. No.","Description","Details"],m.designLoads.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[25,90,65]);break;case"applicableCodes":$n(45),ds($e,14,"#1e3a5f"),m.applicableCodes.forEach(Rt=>{ui(` ${Rt}`,9,5)});break;case"materialSpecs":$n(50),ds($e,14,"#1e3a5f"),$i(["SI. No.","Structural Components","Details"],m.materialSpecs.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.details]),[25,90,65]);break;case"drawingsDelivery":$n(45),ds($e,14,"#1e3a5f"),m.drawingsDelivery.forEach(Rt=>{ui(` ${Rt}`,9,5)});break;case"erectionScopeClient":$n(45),ds($e,14,"#1e3a5f"),m.erectionScopeClient.forEach(Rt=>{ui(` ${Rt}`,9,5)});break;case"erectionScopeCompany":$n(45),ds($e,14,"#1e3a5f"),m.erectionScopeCompany.forEach(Rt=>{ui(` ${Rt}`,9,5)});break;case"commercialPrice":$n(60),ds($e,14,"#1e3a5f");const dr=["S.N.","Description","UOM","QTY","Rate","Amount","Remarks"],Er=f.map(Rt=>[Rt.serialNo.toString(),Rt.description,Rt.unit,Rt.quantity.toString(),`Rs.${Rt.rate.toLocaleString("en-IN")}`,`Rs.${Rt.amount.toLocaleString("en-IN")}`,Rt.remarks||""]);$i(dr,Er,[15,55,20,20,25,30,15]);const dn=Wr();$n(18);const pn=75,cn=9,Vn=Wt-pr-pn;je.setFillColor("#fff5f5"),je.setDrawColor("#eeb7b7"),je.setLineWidth(.2),je.rect(Vn,xt-3,pn,cn,"FD"),je.setFont("helvetica","bold"),je.setFontSize(10),je.setTextColor(0,0,0);const vn=dn.toLocaleString("en-IN");je.text(`Total Amount: ${vn}.`,Vn+3,xt+2),xt+=cn+2;break;case"paymentTerms":$n(50),ds($e,14,"#1e3a5f"),wl(m.paymentTermSections,m.paymentTerms).forEach(Rt=>{$n(8),je.setFont("helvetica","bold"),je.setFontSize(10),je.setTextColor(0,0,0),je.text(Rt.heading,pr,xt),xt+=5,Rt.terms.forEach((fi,hi)=>{ui(`${hi+1}. ${fi}`,9,5)}),xt+=2}),ds("BANK DETAILS",11,"#1e3a5f"),m.bankDetails.forEach(Rt=>{ui(`${Rt.particular}: ${Rt.value}`,9,0)});break;case"commercialTerms":$n(80),ds($e,14,"#1e3a5f"),$i(["SI. No.","Description","Conditions"],m.commercialTerms.map(Rt=>[Rt.slNo.toString(),Rt.description,Rt.conditions]),[20,45,115]);break;default:break}}),$n(30),ds("Notes:",11,"#333333"),m.notes.forEach((xe,qe)=>{ui(`${qe+1}. ${xe}`,9,5)}),xt+=7,$n(20),m.closingParagraphs.forEach(xe=>{ui(xe.content,10,0)}),xt+=3.5,xt+=7,xt+=10,je.setFont("helvetica","bold"),je.setFontSize(11),je.setTextColor(0,0,0),je.text(m.closingThanks||"Thanking you",pr,xt),xt+=6,je.setTextColor("#da2032"),je.text(m.closingCompanyName||"Revira Nexgen Structures Pvt. Ltd.",pr,xt);const jo=Gf(m.uploadDrawings).filter(xe=>xe.dataUrl);if(jo.length>0){So.push({title:"Upload a Drawing",page:_t+1});for(const xe of jo)if(xe.mimeType==="application/pdf")try{const qe=await No(xe.dataUrl);if(qe.length===0)throw new Error("No pages rendered");for(let $e=0;$e<qe.length;$e++)di(qe[$e],`${xe.fileName||"Uploaded PDF"} - Page ${$e+1}`)}catch(qe){je.addPage(),_t++,Ni(_t),xt=Ls+10,je.setFont("helvetica","bold"),je.setFontSize(11),je.setTextColor(218,32,50),je.text("Uploaded PDF could not be rendered",pr,xt),xt+=7,je.setFont("helvetica","normal"),je.setFontSize(10),je.setTextColor(0,0,0),je.text(`File: ${xe.fileName||"Attachment"}`,pr,xt),xt+=6,je.splitTextToSize("PDF pages were skipped because the renderer could not be loaded in this browser/session.",Kn).forEach(gt=>{je.text(gt,pr,xt),xt+=5}),console.warn("Failed to render PDF attachment:",qe)}else xe.dataUrl.startsWith("data:image/")&&di(xe.dataUrl,xe.fileName||"Uploaded image")}je.setPage(sl);const as=Bl,ri=8,io="#eeb7b7",Ri=[25,120,Kn-145];let Ns=pr;je.setFillColor("#fff5f5"),je.rect(pr,as-5,Kn,ri,"F"),je.setDrawColor(io),je.setLineWidth(.3),je.rect(pr,as-5,Kn,ri,"S");let Rs=pr;Ri.forEach(xe=>{je.line(Rs,as-5,Rs,as-5+ri),Rs+=xe}),je.line(Rs,as-5,Rs,as-5+ri),je.setFontSize(9),je.setTextColor(0,0,0),je.setFont("helvetica","bold"),je.text("Sl. No.",Ns+2,as),Ns+=25,je.text("Subject",Ns+2,as),Ns+=120,je.text("Page No.",Ns+2,as);let Si=as+ri;je.setTextColor(0,0,0),je.setFont("helvetica","normal"),So.forEach((xe,qe)=>{Ns=pr,qe%2===0&&(je.setFillColor(245,245,245),je.rect(pr,Si-5,Kn,ri,"F")),je.setDrawColor(io),je.rect(pr,Si-5,Kn,ri,"S"),Rs=pr,Ri.forEach($e=>{je.line(Rs,Si-5,Rs,Si-5+ri),Rs+=$e}),je.line(Rs,Si-5,Rs,Si-5+ri),je.text((qe+1).toString(),Ns+2,Si),Ns+=25,je.text(xe.title,Ns+2,Si),Ns+=120,je.text(xe.page?.toString()||"-",Ns+2,Si),Si+=ri});const Ua=new Date,Vi=String(Ua.getDate()).padStart(2,"0"),Pa=String(Ua.getMonth()+1).padStart(2,"0"),ni=Ua.getFullYear(),Hi=`${Vi}${Pa}${ni}`,il=At?.name?At.name.split(/\s+/).map(xe=>xe.charAt(0).toUpperCase()).join(""):"COMPANY",w=Ee?.quotationType==="Supply and Fabrication"?"Peb":Ee?.quotationType==="Structural Fabrication"?"SF":"JW",$=String(Ee?.id||1).padStart(3,"0"),de=`RNS_${Hi}_${il}_${w}-${$}_${u.revision}.pdf`,Se=Pe?je.output("datauristring",{filename:de}):void 0;return pe&&je.save(de),ye||n({title:pe?"PDF exported":"PDF generated",description:pe?"The quotation has been exported as PDF.":"The quotation PDF is ready."}),{filename:de,dataUri:Se}}catch(je){return console.error("PDF export error:",je),ye||n({title:"Export failed",description:"Failed to export PDF. Please try again.",variant:"destructive"}),null}finally{C(!1)}},bi=()=>{const q=u.quotationNumber||"-",pe=u.revision||"-",ye=At?.name||"Client";return`Quotation ${q} (${pe}) for ${ye} is ready. Please find the exported PDF attached.`},wo="9968422442",Ui=()=>{if(!he?.id){n({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}Ce({to:At?.emailAddress||"",subject:`Quotation ${u.quotationNumber||""} ${u.revision||""}`.trim(),message:`${bi()}

Project: ${Ee?.projectName||"-"}
Client: ${At?.name||"-"}
Date: ${new Date().toLocaleDateString("en-GB")}`}),me(!0)},bs=async()=>{if(!he?.id){n({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}const q=ve.to.split(",").map(Pe=>Pe.trim()).filter(Boolean);if(q.length===0){n({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!ve.subject.trim()){n({title:"Subject required",description:"Please enter email subject.",variant:"destructive"});return}if(!ve.message.trim()){n({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}H(!0);const pe=await is({save:!1,silent:!0,returnDataUri:!0});if(!pe?.dataUri){H(!1),n({title:"PDF failed",description:"Unable to generate quotation PDF for email.",variant:"destructive"});return}const ye=pe.dataUri.split(",")[1]||"";try{await kr("POST",`/revira/api/quotations/${he.id}/send-email`,{to:q,subject:ve.subject.trim(),message:ve.message.trim(),fileName:pe.filename,pdfBase64:ye}),n({title:"Email sent",description:`Quotation emailed to ${q.join(", ")}.`}),me(!1)}catch(Pe){n({title:"Send failed",description:Pe?.message||"Failed to send email.",variant:"destructive"})}finally{H(!1)}},da=()=>{if(!he?.id){n({title:"Save required",description:"Please save quotation first, then send on WhatsApp.",variant:"destructive"});return}const q=(At?.mobileNumber||"").replace(/\D/g,""),pe=q.length===10?`91${q}`:q;Ge({mobile:pe,message:`${bi()}
Project: ${Ee?.projectName||"-"}
Client: ${At?.name||"-"}
From: ${wo}`}),j(!0)},Ol=async()=>{const q=Le.mobile.replace(/\D/g,"");if(!q){n({title:"Mobile required",description:"Please enter mobile number.",variant:"destructive"});return}if(!Le.message.trim()){n({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}oe(!0);const pe=await is({save:!1,silent:!0,returnDataUri:!0});if(!pe?.dataUri){oe(!1),n({title:"PDF failed",description:"Unable to generate quotation PDF for WhatsApp send.",variant:"destructive"});return}const ye=pe.dataUri.split(",")[1]||"";try{await kr("POST",`/revira/api/quotations/${he?.id}/send-whatsapp`,{to:q,message:Le.message.trim(),fileName:pe.filename,pdfBase64:ye}),n({title:"WhatsApp sent",description:`Quotation sent to ${q}.`}),j(!1)}catch(Pe){n({title:"Send failed",description:Pe?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{oe(!1)}},zs=({title:q,number:pe,expanded:ye,onToggle:Pe,onAdd:je,testId:Wt,isEditingHeading:On,onStartEditHeading:pr,onHeadingChange:Kn,onHeadingBlur:Ls,onMoveUp:us,onMoveDown:ws,onDuplicate:ti,onDelete:$s,canMoveUp:wi=!0,canMoveDown:xt=!0})=>i.jsxs("div",{className:"flex items-center gap-3 bg-[#d92134] text-white px-4 py-3 rounded-lg cursor-pointer",onClick:Pe,"data-testid":Wt||`section-header-${pe}`,children:[i.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white text-[#d92134] rounded font-bold text-sm",children:pe}),On?i.jsx(Je,{value:q,onChange:_t=>Kn?.(_t.target.value),onBlur:Ls,onKeyDown:_t=>{(_t.key==="Enter"||_t.key==="Escape")&&Ls?.()},autoFocus:!0,className:"h-8 flex-1 text-slate-900 bg-white",onClick:_t=>_t.stopPropagation()}):i.jsx("span",{className:"font-semibold flex-1",children:q}),pr&&!On&&i.jsx(Oe,{variant:"ghost",size:"icon",onClick:_t=>{_t.stopPropagation(),pr()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Edit heading",children:i.jsx(ic,{className:"h-4 w-4"})}),je&&i.jsxs(Oe,{variant:"ghost",size:"sm",onClick:_t=>{_t.stopPropagation(),je()},className:"text-white hover:bg-white/20 h-7",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add"]}),us&&i.jsx(Oe,{variant:"ghost",size:"icon",onClick:_t=>{_t.stopPropagation(),us()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!wi,title:"Move up",children:i.jsx(Up,{className:"h-4 w-4"})}),ws&&i.jsx(Oe,{variant:"ghost",size:"icon",onClick:_t=>{_t.stopPropagation(),ws()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!xt,title:"Move down",children:i.jsx(Od,{className:"h-4 w-4"})}),ti&&i.jsx(Oe,{variant:"ghost",size:"icon",onClick:_t=>{_t.stopPropagation(),ti()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Duplicate block",children:i.jsx(ah,{className:"h-4 w-4"})}),$s&&i.jsx(Oe,{variant:"ghost",size:"icon",onClick:_t=>{_t.stopPropagation(),$s()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Delete block",children:i.jsx(Pn,{className:"h-4 w-4"})}),ye?i.jsx(Up,{className:"h-5 w-5"}):i.jsx(Od,{className:"h-5 w-5"})]});return rt||Ct?i.jsx(Es,{user:a,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):!Ee||!At?i.jsx(Es,{user:a,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),i.jsx(Oe,{onClick:()=>r("/revira/projects"),className:"mt-4",children:"Back to Projects"})]})}):i.jsxs(Es,{user:a,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:Ee.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),Ee.location]})]})]}),i.jsxs(Oe,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>{Ne(Ee?.quotationType||"Supply and Fabrication"),X(!0)},"data-testid":"button-new-quotation",children:[i.jsx(Na,{className:"w-4 h-4 mr-2"}),"New Quotation"]})]}),i.jsx("div",{className:"bg-[#d92134] rounded-2xl p-3 md:p-4 mb-6 border border-[#c31d2f] shadow-sm",children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{className:"inline-flex items-center gap-3 cursor-pointer hover:opacity-90 bg-white/10 px-3 py-2 rounded-xl w-fit",onClick:()=>U(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-semibold",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded-lg font-bold shadow-sm",children:he?.revision||u.revision||"R-001"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:justify-end",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-white/10 border border-white/20 rounded-xl p-1",children:[i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-transparent border-white/30 text-white hover:bg-white/20",onClick:()=>U(!0),"data-testid":"button-view-versions",title:"View versions",children:i.jsx(Om,{className:"h-4 w-4"})}),he&&i.jsx(Oe,{variant:"outline",size:"icon",onClick:()=>Et.mutate(),disabled:Et.isPending,className:"bg-transparent border-white/30 text-white hover:bg-white/20","data-testid":"button-duplicate",title:"Duplicate quotation",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"outline",size:"icon",onClick:Ui,disabled:x,className:"bg-transparent border-white/30 text-white hover:bg-white/20","data-testid":"button-send-email",title:"Send quotation by email",children:i.jsx(Rh,{className:"w-4 h-4"})}),i.jsx(Oe,{variant:"outline",size:"icon",onClick:da,disabled:x,className:"bg-transparent border-white/30 text-white hover:bg-white/20","data-testid":"button-send-whatsapp",title:"Send quotation on WhatsApp",children:i.jsx(a_,{className:"w-4 h-4"})})]}),i.jsxs(Oe,{onClick:()=>{is()},disabled:x,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white min-w-[150px]","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),x?"Exporting...":"Export PDF"]}),i.jsxs(Oe,{variant:"outline",onClick:yn,disabled:ot.isPending||ft.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20 min-w-[170px]","data-testid":"button-save-quotation",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),ot.isPending||ft.isPending?"Saving...":"Save Changes"]}),he&&Ze&&Ze.length>1&&i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{if(confirm(`Are you sure you want to delete this quotation (${he.revision})?`))try{await kr("DELETE",`/revira/api/quotations/${he.id}`),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]});const q=Ze.filter(pe=>pe.id!==he.id);q.length>0?r(`/revira/projects/${t}/quotation/${q[0].id}`):r(`/revira/projects/${t}/quotation`),n({title:"Quotation deleted",description:`${he.revision} has been deleted.`})}catch{n({title:"Error",description:"Failed to delete quotation.",variant:"destructive"})}},"data-testid":"button-delete-quotation",title:"Delete quotation",children:i.jsx(Pn,{className:"h-4 w-4"})})]})]})}),i.jsxs("div",{ref:o,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#da2032] rounded",children:i.jsx(Na,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Technical Proposal Metadata"})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Ref ID"}),i.jsx(Je,{value:u.quotationNumber,onChange:q=>c({...u,quotationNumber:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-quotation-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Creation Date"}),i.jsx(Je,{value:_r(),readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Enquiry Ref"}),i.jsx(Je,{value:u.enquiryNumber,onChange:q=>c({...u,enquiryNumber:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-enquiry-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Project Site (Legacy)"}),i.jsx(Je,{value:Ee.location,readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Proposal Header Title"}),i.jsx(Je,{value:u.proposalTitle,onChange:q=>c({...u,proposalTitle:q.target.value}),className:"mt-2 text-lg font-bold bg-white border-slate-200","data-testid":"input-proposal-title"})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Client Subject Specification"}),i.jsx(Je,{value:u.subject,onChange:q=>c({...u,subject:q.target.value}),className:"mt-2 bg-white border-slate-200","data-testid":"input-subject"})]})]})]}),i.jsxs(qr,{className:"shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:i.jsx(Na,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Main Covering Letter"})]}),i.jsxs(Ur,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500",children:"To Label"}),i.jsx(Je,{value:u.toLabel,onChange:q=>c({...u,toLabel:q.target.value}),className:"mt-1","data-testid":"input-to-label"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500",children:"M/s Label"}),i.jsx(Je,{value:u.msLabel,onChange:q=>c({...u,msLabel:q.target.value}),className:"mt-1","data-testid":"input-ms-label"})]})]}),i.jsxs("p",{className:"font-semibold text-slate-700",children:[u.toLabel||"To",","]}),i.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:(u.msLabel||"M/s")+" "+At.name}),i.jsx("p",{className:"text-slate-600 text-slate-700 mt-1",children:At.location})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-slate-700",children:"Subject: "}),i.jsx("span",{className:"text-slate-600",children:u.subject})]}),i.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[i.jsx("p",{children:"Dear Sir,"}),m.introSections.map((q,pe)=>i.jsx("div",{className:"group relative",children:A===q.id?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rs,{value:q.content,onChange:ye=>ir(q.id,ye.target.value),className:"flex-1 min-h-[60px]",autoFocus:!0}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(Oe,{size:"icon",variant:"ghost",onClick:()=>y(null),children:i.jsx(Rd,{className:"h-4 w-4 text-green-600"})}),i.jsx(Oe,{size:"icon",variant:"ghost",onClick:()=>ln(q.id),children:i.jsx(Pn,{className:"h-4 w-4 text-red-600"})})]})]}):i.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(q.id),children:[q.content,i.jsx(ic,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},q.id)),i.jsxs(Oe,{variant:"ghost",size:"sm",onClick:gr,className:"text-[#da2032]","data-testid":"button-add-intro",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Paragraph"]})]})]})]}),i.jsxs(qr,{className:"shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:i.jsx(Na,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Master Signatory Authority"})]}),i.jsx(Ur,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Full Legal Name"}),i.jsx(Je,{value:u.contactName,onChange:q=>c({...u,contactName:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Contact Handset"}),i.jsx(Je,{value:u.contactMobile,onChange:q=>c({...u,contactMobile:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-mobile"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Official Email Address"}),i.jsx(Je,{value:u.contactEmail,onChange:q=>c({...u,contactEmail:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-email"})]})]})})]}),i.jsxs("div",{className:"flex flex-col gap-4",children:[Ee?.quotationType==="Supply and Fabrication"&&i.jsxs(i.Fragment,{children:[Gn("scopeBrief").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"01",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.scopeBriefDetails,section:"scopeBriefDetails",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("scopeBasic").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"02",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.scopeBasicBuilding,section:"scopeBasicBuilding",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("scopeAdditions").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"03",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.scopeBuildingAdditions,section:"scopeBuildingAdditions",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("steelWork").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"04",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.steelWorkFinish,section:"steelWorkFinish",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("designLoads").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"05",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.designLoads,section:"designLoads",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("applicableCodes").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Applicable Code"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:m.applicableCodes.map((pe,ye)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:ye+1}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:pe,onChange:Pe=>vt(ye,Pe.target.value),className:"min-h-[56px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-applicable-code-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>wt(ye),disabled:m.applicableCodes.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-applicable-code-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},`applicable-code-${ye}`))})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:st,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-applicable-code-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})]},q.id)),Gn("materialSpecs").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"06",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsx(kd,{data:m.materialSpecs,section:"materialSpecs",onUpdateRow:Pr,onRemoveRow:ar,onAddRow:tr})]},q.id)),Gn("drawingsDelivery").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"09",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Drawings & Delivery"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:m.drawingsDelivery.map((pe,ye)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:ye+1}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:pe,onChange:Pe=>br(ye,Pe.target.value),className:"min-h-[56px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-drawings-delivery-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>hr(ye),disabled:m.drawingsDelivery.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-drawings-delivery-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},`drawings-delivery-${ye}`))})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:qt,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-drawings-delivery-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})]},q.id)),Gn("erectionScopeClient").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"10",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Scope of Client"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:m.erectionScopeClient.map((pe,ye)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:ye+1}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:pe,onChange:Pe=>vr(ye,Pe.target.value),className:"min-h-[56px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-erection-client-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>ut(ye),disabled:m.erectionScopeClient.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-erection-client-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},`erection-client-${ye}`))})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:Pt,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-erection-client-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})]},q.id)),Gn("erectionScopeCompany").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Gr(q.id)},children:[i.jsx(zs,{title:q.heading,number:"11",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)}),rr(q.id)&&i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Scope of Company"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:m.erectionScopeCompany.map((pe,ye)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:ye+1}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:pe,onChange:Pe=>it(ye,Pe.target.value),className:"min-h-[56px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-erection-company-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>Qe(ye),disabled:m.erectionScopeCompany.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-erection-company-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},`erection-company-${ye}`))})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:et,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-erection-company-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})]},q.id))]}),Gn("commercialPrice").map(q=>i.jsx(y0,{type:"single",collapsible:!0,value:rr(q.id)?`commercial-price-${q.id}`:"",onValueChange:pe=>Or(q.id,pe===`commercial-price-${q.id}`),style:{order:Gr(q.id)},children:i.jsxs(Wp,{value:`commercial-price-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(zs,{title:q.heading,number:Ee?.quotationType==="Supply and Fabrication"?"12":"01",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"S.N."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 w-24 text-slate-600 font-medium",children:"Unit"}),i.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Quantity"}),i.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Rate"}),i.jsx("th",{className:"text-right p-3 w-32 text-slate-600 font-medium",children:"Amount"}),i.jsx("th",{className:"text-left p-3 w-32 text-slate-600 font-medium",children:"Remarks"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsxs("tbody",{children:[f.map((pe,ye)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:pe.serialNo}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:pe.description,onChange:Pe=>ur(ye,"description",Pe.target.value),className:"min-h-[60px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-desc-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:pe.unit,onChange:Pe=>ur(ye,"unit",Pe.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-unit-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:pe.quantity,onChange:Pe=>ur(ye,"quantity",Pe.target.value),className:"h-8 text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-qty-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:pe.rate,onChange:Pe=>ur(ye,"rate",Pe.target.value),className:"h-8 min-w-[90px] text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-rate-${ye}`})}),i.jsx("td",{className:"p-3 text-right font-medium",children:Dt(pe.amount)}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:pe.remarks,onChange:Pe=>ur(ye,"remarks",Pe.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-remarks-${ye}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>yr(ye),disabled:f.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})})]},ye)),i.jsxs("tr",{className:"bg-slate-50 font-semibold",children:[i.jsx("td",{colSpan:5,className:"p-3 text-right",children:"Total:"}),i.jsx("td",{className:"p-3 text-right",children:Dt(Wr())}),i.jsx("td",{colSpan:2})]})]})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:Cr,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})})})]})},q.id)),Gn("paymentTerms").map(q=>i.jsx(y0,{type:"single",collapsible:!0,value:rr(q.id)?`payment-terms-${q.id}`:"",onValueChange:pe=>Or(q.id,pe===`payment-terms-${q.id}`),style:{order:Gr(q.id)},children:i.jsxs(Wp,{value:`payment-terms-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(zs,{title:q.heading,number:"PT",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx(qr,{className:"shadow-sm",children:i.jsxs(Ur,{className:"p-6 space-y-4",children:[wl(m.paymentTermSections,m.paymentTerms).map((pe,ye)=>{const Pe=z[pe.id]??!0;return i.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[i.jsxs("div",{className:"group flex items-center gap-2",children:[i.jsx(Oe,{type:"button",size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>re(je=>({...je,[pe.id]:!(je[pe.id]??!0)})),"data-testid":`button-toggle-payment-heading-${ye}`,children:Pe?i.jsx(Up,{className:"h-4 w-4 text-slate-500"}):i.jsx(Od,{className:"h-4 w-4 text-slate-500"})}),E===pe.id?i.jsxs(i.Fragment,{children:[i.jsx(Je,{value:pe.heading,onChange:je=>En(pe.id,je.target.value),className:"h-8 font-semibold flex-1",placeholder:"Heading",autoFocus:!0,onBlur:()=>_(null),onKeyDown:je=>je.key==="Enter"&&_(null),"data-testid":`input-payment-heading-${ye}`}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>Js(pe.id),"data-testid":`button-remove-payment-heading-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded font-semibold text-slate-700",onClick:()=>_(pe.id),children:pe.heading}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>_(pe.id),children:i.jsx(ic,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>Js(pe.id),"data-testid":`button-remove-payment-heading-${ye}`,children:i.jsx(Pn,{className:"h-4 w-4"})})]})]}),Pe&&i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"space-y-3 text-sm",children:pe.terms.map((je,Wt)=>i.jsx("li",{className:"flex items-start gap-2 group",children:O?.sectionId===pe.id&&O?.termIndex===Wt?i.jsxs(i.Fragment,{children:[i.jsx(rs,{value:je,onChange:On=>Kt(pe.id,Wt,On.target.value),onBlur:()=>T(null),autoFocus:!0,className:"flex-1 min-h-[60px]","data-testid":`input-payment-term-${ye}-${Wt}`}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>_n(pe.id,Wt),"data-testid":`button-remove-payment-term-${ye}-${Wt}`,children:i.jsx(Pn,{className:"h-4 w-4 text-red-600"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"w-6 text-slate-400",children:[Wt+1,"."]}),i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded text-slate-700",onClick:()=>T({sectionId:pe.id,termIndex:Wt}),children:je}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>T({sectionId:pe.id,termIndex:Wt}),children:i.jsx(ic,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>_n(pe.id,Wt),"data-testid":`button-remove-payment-term-${ye}-${Wt}`,children:i.jsx(Pn,{className:"h-4 w-4 text-red-600"})})]})},`${pe.id}-${Wt}`))}),i.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>ys(pe.id),className:"text-[#da2032]","data-testid":`button-add-payment-term-${ye}`,children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Term"]})]})]},pe.id)}),i.jsxs("div",{className:"pt-2 border-t space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3 py-1",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:ss,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-payment-heading-bottom",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add New Heading"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]}),i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold text-slate-700",children:"Bank Details:"}),i.jsxs(Oe,{variant:"ghost",size:"sm",onClick:$t,className:"text-[#da2032]","data-testid":"button-add-bank-detail",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-1/3",children:"Particulars"}),i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium",children:"Value"}),i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-20",children:"Actions"})]})}),i.jsx("tbody",{children:m.bankDetails.map((pe,ye)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-2",children:te===ye?i.jsx(Je,{value:pe.particular,onChange:Pe=>Ht(ye,"particular",Pe.target.value),className:"text-slate-600","data-testid":`input-bank-particular-${ye}`}):i.jsxs("span",{className:"text-slate-600 cursor-pointer hover:text-[#d92134]",onClick:()=>Q(ye),children:[pe.particular,":"]})}),i.jsx("td",{className:"p-2",children:te===ye?i.jsx(Je,{value:pe.value,onChange:Pe=>Ht(ye,"value",Pe.target.value),"data-testid":`input-bank-value-${ye}`}):i.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Q(ye),children:pe.value})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-1",children:[te===ye?i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Q(null),children:i.jsx(Rd,{className:"h-4 w-4 text-green-600"})}):i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Q(ye),children:i.jsx(ic,{className:"h-4 w-4"})}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Qt(ye),children:i.jsx(Pn,{className:"h-4 w-4 text-red-500"})})]})})]},ye))})]})]})]})})})]})},q.id)),Ee?.quotationType==="Supply and Fabrication"&&Gn("commercialTerms").map(q=>i.jsx(y0,{type:"single",collapsible:!0,value:rr(q.id)?`terms-conditions-${q.id}`:"",onValueChange:pe=>Or(q.id,pe===`terms-conditions-${q.id}`),style:{order:Gr(q.id)},children:i.jsxs(Wp,{value:`terms-conditions-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(zs,{title:q.heading,number:"08",expanded:rr(q.id),onToggle:()=>Nr(q.id),...Fn(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx(qr,{className:"shadow-sm",children:i.jsxs(Ur,{className:"p-0",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"SI. No."}),i.jsx("th",{className:"text-left p-3 w-48 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Conditions"}),i.jsx("th",{className:"text-left p-3 w-20 text-slate-600 font-medium",children:"Actions"})]})}),i.jsx("tbody",{className:"text-slate-700",children:m.commercialTerms.map((pe,ye)=>i.jsxs("tr",{className:`border-b ${ye%2===1?"bg-slate-50/50":""}`,children:[i.jsx("td",{className:"p-3 align-top",children:pe.slNo}),i.jsx("td",{className:"p-3 align-top",children:ae===ye?i.jsx(Je,{value:pe.description,onChange:Pe=>Lt(ye,"description",Pe.target.value),className:"font-medium","data-testid":`input-term-desc-${ye}`}):i.jsx("span",{className:"font-medium cursor-pointer hover:text-[#d92134]",onClick:()=>W(ye),children:pe.description})}),i.jsx("td",{className:"p-3 align-top",children:ae===ye?i.jsx(rs,{value:pe.conditions,onChange:Pe=>Lt(ye,"conditions",Pe.target.value),className:"min-h-[80px]","data-testid":`input-term-cond-${ye}`}):i.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>W(ye),children:pe.conditions})}),i.jsx("td",{className:"p-3 align-top",children:i.jsxs("div",{className:"flex gap-1",children:[ae===ye?i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>W(null),children:i.jsx(Rd,{className:"h-4 w-4 text-green-600"})}):i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>W(ye),children:i.jsx(ic,{className:"h-4 w-4"})}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>It(ye),children:i.jsx(Pn,{className:"h-4 w-4 text-red-500"})})]})})]},ye))})]})}),i.jsx("div",{className:"p-3 border-t bg-slate-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:kt,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-commercial-term-row",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add Row"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})})]})})})]})},q.id))]}),i.jsxs(qr,{className:"shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 border-b bg-slate-50",children:i.jsx("h3",{className:"font-semibold text-slate-700",children:"Notes"})}),i.jsxs(Ur,{className:"p-6 space-y-3",children:[i.jsx("ul",{className:"space-y-2 text-sm",children:m.notes.map((q,pe)=>i.jsx("li",{className:"group flex items-start gap-2",children:D===pe?i.jsxs(i.Fragment,{children:[i.jsx(rs,{value:q,onChange:ye=>Vt(pe,ye.target.value),className:"flex-1 min-h-[40px]",autoFocus:!0,onBlur:()=>S(null)}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>fr(pe),children:i.jsx(Pn,{className:"h-4 w-4 text-red-600"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"w-6 text-slate-400",children:[pe+1,"."]}),i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded",onClick:()=>S(pe),children:q}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>S(pe),children:i.jsx(ic,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Oe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>fr(pe),children:i.jsx(Pn,{className:"h-4 w-4 text-red-600"})})]})},pe))}),i.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t",children:[i.jsx("div",{className:"h-px flex-1 bg-slate-200"}),i.jsxs(Oe,{variant:"outline",size:"sm",onClick:mr,className:"rounded-full border-dashed border-[#da2032]/50 text-[#da2032] bg-white hover:bg-red-50 px-4","data-testid":"button-add-note",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add New Note"]}),i.jsx("div",{className:"h-px flex-1 bg-slate-200"})]})]})]}),i.jsx(qr,{className:"shadow-sm",children:i.jsxs(Ur,{className:"p-6 space-y-4",children:[m.closingParagraphs.map(q=>i.jsx("div",{className:"group relative text-sm text-slate-700",children:A===q.id?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rs,{value:q.content,onChange:pe=>Yt(q.id,pe.target.value),className:"flex-1 min-h-[80px]",autoFocus:!0}),i.jsx(Oe,{size:"icon",variant:"ghost",onClick:()=>y(null),children:i.jsx(Rd,{className:"h-4 w-4 text-green-600"})})]}):i.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(q.id),children:[q.content,i.jsx(ic,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},q.id)),i.jsxs("div",{className:"pt-4 border-t space-y-2",children:[i.jsx("div",{className:"group",children:i.jsx(Je,{value:m.closingThanks,onChange:q=>b(pe=>({...pe,closingThanks:q.target.value})),className:"font-semibold text-slate-700 bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-full","data-testid":"input-closing-thanks"})}),i.jsx("div",{className:"group",children:i.jsx(Je,{value:m.closingCompanyName,onChange:q=>b(pe=>({...pe,closingCompanyName:q.target.value})),className:"font-bold text-[#da2032] bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-full","data-testid":"input-closing-company"})})]})]})}),i.jsx(qr,{className:"shadow-sm",children:i.jsxs(Ur,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Upload a Drawing"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:wr,"data-testid":"button-add-drawing-upload-field",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"})," Add uploader field"]})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"Upload images or PDF files. These will be appended in exported quotation PDF after End of Documents."}),i.jsx("div",{className:"space-y-3",children:Gf(m.uploadDrawings).map((q,pe)=>i.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsx(Je,{type:"file",accept:"image/*,.pdf",onChange:ye=>Ar(q.id,ye),"data-testid":`input-drawing-upload-${pe}`}),i.jsx(Oe,{type:"button",variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>zr(q.id),"data-testid":`button-remove-drawing-upload-${pe}`,children:i.jsx(Pn,{className:"h-4 w-4"})})]}),q.fileName?i.jsxs("p",{className:"text-xs text-slate-600",children:["Selected: ",q.fileName]}):i.jsx("p",{className:"text-xs text-slate-400",children:"No file selected"})]},q.id))})]})}),i.jsx("div",{className:"text-center py-6 text-sm text-slate-500",children:i.jsx("p",{children:"!! End of Documents !!"})})]})]}),i.jsx(Sa,{open:fe,onOpenChange:U,children:i.jsxs(aa,{className:"max-w-lg",children:[i.jsx(oa,{children:i.jsx(la,{children:"Quotation Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ze?.map(q=>i.jsxs("div",{className:`p-3 border rounded-lg ${he?.id===q.id?"border-[#d92134] bg-red-50":"hover:bg-slate-50"}`,children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-[#d92134]",children:q.revision}),he?.id===q.id&&i.jsx("span",{className:"text-xs bg-[#d92134] text-white px-2 py-0.5 rounded",children:"Current"})]})}),i.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-0.5",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-slate-500",children:"Enquiry Ref:"})," ",q.enquiryNumber||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-slate-500",children:"Created:"})," ",new Date(q.createdAt).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsxs(Oe,{size:"sm",variant:he?.id===q.id?"secondary":"default",className:he?.id===q.id?"":"bg-[#d92134] hover:bg-[#b91c2c]",onClick:()=>{r(`/revira/projects/${t}/quotation/${q.id}`),U(!1)},"data-testid":`button-edit-version-${q.id}`,children:[i.jsx(ic,{className:"h-4 w-4 mr-1"}),he?.id===q.id?"Editing":"Edit"]}),Ze&&Ze.length>1&&i.jsxs(Oe,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:async pe=>{if(pe.stopPropagation(),confirm(`Are you sure you want to delete ${q.revision}?`))try{if(await kr("DELETE",`/revira/api/quotations/${q.id}`),Rr.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),he?.id===q.id){const ye=Ze.filter(Pe=>Pe.id!==q.id);ye.length>0?r(`/revira/projects/${t}/quotation/${ye[0].id}`):r(`/revira/projects/${t}/quotation`)}n({title:"Version deleted",description:`${q.revision} has been deleted.`})}catch{n({title:"Error",description:"Failed to delete version.",variant:"destructive"})}},"data-testid":`button-delete-version-${q.id}`,children:[i.jsx(Pn,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},q.id))})]})}),i.jsx(Sa,{open:F,onOpenChange:X,children:i.jsxs(aa,{className:"sm:max-w-lg",children:[i.jsx(oa,{children:i.jsx(la,{children:"Select Quotation Type"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"grid gap-2",children:t7.map(q=>i.jsx(Oe,{type:"button",variant:Y===q?"default":"outline",className:`justify-start ${Y===q?"bg-[#d92134] hover:bg-[#b51c2c]":""}`,onClick:()=>Ne(q),"data-testid":`button-new-quotation-type-${q.replace(/\s+/g,"-").toLowerCase()}`,children:q},q))}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oe,{type:"button",variant:"outline",disabled:be,onClick:()=>X(!1),"data-testid":"button-new-quotation-cancel",children:"Cancel"}),i.jsx(Oe,{type:"button",disabled:be,onClick:()=>{St()},"data-testid":"button-new-quotation-create",children:be?"Creating...":"Create Quotation"})]})]})]})}),i.jsx(Sa,{open:se,onOpenChange:me,children:i.jsxs(aa,{className:"sm:max-w-xl",children:[i.jsx(oa,{children:i.jsx(la,{children:"Send Quotation by Email"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email id"}),i.jsx(Je,{value:ve.to,onChange:q=>Ce(pe=>({...pe,to:q.target.value})),placeholder:"recipient@example.com","data-testid":"input-send-email-to"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),i.jsx(Je,{value:ve.subject,onChange:q=>Ce(pe=>({...pe,subject:q.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),i.jsx(rs,{value:ve.message,onChange:q=>Ce(pe=>({...pe,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oe,{type:"button",variant:"outline",onClick:()=>me(!1),disabled:M,"data-testid":"button-send-email-cancel",children:"Cancel"}),i.jsx(Oe,{type:"button",onClick:bs,disabled:M,"data-testid":"button-send-email-submit",children:M?"Sending...":"Submit"})]})]})]})}),i.jsx(Sa,{open:I,onOpenChange:j,children:i.jsxs(aa,{className:"sm:max-w-lg",children:[i.jsx(oa,{children:i.jsx(la,{children:"Send Quotation on WhatsApp"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number"}),i.jsx(Je,{value:Le.mobile,onChange:q=>Ge(pe=>({...pe,mobile:q.target.value})),placeholder:"919876543210","data-testid":"input-send-whatsapp-mobile"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),i.jsx(rs,{value:Le.message,onChange:q=>Ge(pe=>({...pe,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oe,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:ie,"data-testid":"button-send-whatsapp-cancel",children:"Cancel"}),i.jsx(Oe,{type:"button",onClick:Ol,disabled:ie,"data-testid":"button-send-whatsapp-submit",children:ie?"Sending...":"Submit"})]})]})]})})]})}function _5(){const t=Qu(),e=t.id,r=t.invoiceId,[,n]=Ma(),{toast:a}=Ba(),[o,u]=L.useState(!1),[c,f]=L.useState({invoiceNumber:"",revision:"R-001",invoiceType:"PROFORMA INVOICE",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),[p,m]=L.useState([{id:1,serialNo:1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}]),{data:b}=Aa(),{data:A}=Ir({queryKey:["/revira/api/projects",e],queryFn:async()=>{const I=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!I.ok)throw new Error("Failed to fetch project");return I.json()},enabled:!!e}),{data:y}=Ir({queryKey:["/revira/api/clients",A?.clientId],queryFn:async()=>{const I=await fetch(`/revira/api/clients/${A?.clientId}`,{credentials:"include"});if(!I.ok)throw new Error("Failed to fetch client");return I.json()},enabled:!!A?.clientId}),{data:D}=Ir({queryKey:["/revira/api/branding"],enabled:!!b}),{data:S}=Ir({queryKey:["/revira/api/invoices",r],queryFn:async()=>{if(r){const j=await fetch(`/revira/api/invoices/${r}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch invoice");return j.json()}const I=await fetch(`/revira/api/projects/${e}/invoice`,{credentials:"include"});if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch invoice")}return I.json()},enabled:!!e}),{data:E}=Ir({queryKey:["/revira/api/invoices",S?.id,"items"],queryFn:async()=>{const I=await fetch(`/revira/api/invoices/${S?.id}/items`,{credentials:"include"});if(!I.ok)throw new Error("Failed to fetch items");return I.json()},enabled:!!S?.id}),{data:_}=Ir({queryKey:["/revira/api/projects",e,"invoice-versions"],queryFn:async()=>{const I=await fetch(`/revira/api/projects/${e}/invoice-versions`,{credentials:"include"});return I.ok?I.json():[]},enabled:!!e}),O=I=>{if(!I)return{};try{const j=JSON.parse(I);return j&&typeof j=="object"?j:{}}catch{return{}}},T=L.useCallback(()=>c.orderReferenceType==="po"?c.purchaseOrderNo||"-":c.workOrderNo||"-",[c.orderReferenceType,c.workOrderNo,c.purchaseOrderNo]),z=L.useCallback(()=>{const I=[];return c.vehicleNo.trim()&&I.push(`Vehicle No.: ${c.vehicleNo.trim()}`),c.showDispatchLrNo&&I.push(`L.R. No.: ${c.dispatchLrNo||"-"}`),c.showDispatchPo&&I.push(`P.O.: ${c.dispatchPoNo||"-"}`),c.showDispatchGatePass&&I.push(`Gate Pass: ${c.dispatchGatePass||"-"}`),I.length?I.join(" | "):"-"},[c.vehicleNo,c.showDispatchLrNo,c.dispatchLrNo,c.showDispatchPo,c.dispatchPoNo,c.showDispatchGatePass,c.dispatchGatePass]),re=L.useCallback(()=>{const I={invoiceType:c.invoiceType,orderReferenceType:c.orderReferenceType,showWorkOrderNo:c.orderReferenceType==="wo",showPurchaseOrderNo:c.orderReferenceType==="po",purchaseOrderNo:c.purchaseOrderNo,vehicleNo:c.vehicleNo,showDispatchLrNo:c.showDispatchLrNo,showDispatchPo:c.showDispatchPo,showDispatchGatePass:c.showDispatchGatePass,dispatchLrNo:c.dispatchLrNo,dispatchPoNo:c.dispatchPoNo,dispatchGatePass:c.dispatchGatePass};return JSON.stringify(I)},[c]);L.useEffect(()=>{if(A&&y&&!S){const I=new Date,j=I.getMonth()>=3?`${I.getFullYear()}-${(I.getFullYear()+1).toString().slice(-2)}`:`${I.getFullYear()-1}-${I.getFullYear().toString().slice(-2)}`;f(x=>({...x,invoiceNumber:`RNS/${j}/RNS-SL-${String(A.id).padStart(3,"0")}`,organisationName:`M/s ${y.name}`,registeredAddress:y.location,consigneeAddress:`M/s ${y.name}, ${y.location}`,clientGstin:y.gstNo||""}))}},[A,y,S]),L.useEffect(()=>{if(S){const I=O(S.contentSections),j=M=>(M||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),x=I.orderReferenceType||(I.showPurchaseOrderNo?"po":"wo"),C=I.vehicleNo!==void 0||I.showDispatchLrNo!==void 0||I.showDispatchPo!==void 0||I.showDispatchGatePass!==void 0||I.dispatchLrNo!==void 0||I.dispatchPoNo!==void 0||I.dispatchGatePass!==void 0;f({invoiceNumber:S.invoiceNumber,revision:S.revision,invoiceType:I.invoiceType||"PROFORMA INVOICE",organisationName:S.organisationName,registeredAddress:S.registeredAddress,consigneeAddress:S.consigneeAddress,clientGstin:S.clientGstin||"",workOrderNo:j(S.workOrderNo)||"NIL",orderReferenceType:x,purchaseOrderNo:I.purchaseOrderNo||(x==="po"?j(S.workOrderNo):""),dispatchDetails:S.dispatchDetails||"-",vehicleNo:I.vehicleNo||(!C&&S.dispatchDetails&&S.dispatchDetails!=="-"?S.dispatchDetails:""),showDispatchLrNo:I.showDispatchLrNo??!1,showDispatchPo:I.showDispatchPo??!1,showDispatchGatePass:I.showDispatchGatePass??!1,dispatchLrNo:I.dispatchLrNo||"",dispatchPoNo:I.dispatchPoNo||"",dispatchGatePass:I.dispatchGatePass||"",appliedTaxType:S.appliedTaxType||"igst",cgstRate:S.cgstRate||"9",sgstRate:S.sgstRate||"9",igstRate:S.igstRate||"18"})}},[S]),L.useEffect(()=>{E&&E.length>0&&m(E.map(I=>({id:I.id,serialNo:I.serialNo,description:I.description,hsnCode:I.hsnCode||"940610",quantity:Number(I.quantity)||1,unit:I.unit||"LS",ratePerUnit:Number(I.ratePerUnit)||0,percentage:Number(I.percentage)||0,amount:Number(I.amount)||0,remarks:I.remarks||""})))},[E]);const W=L.useCallback(()=>{const I=p.reduce((ie,oe)=>ie+(Number(oe.amount)||0),0);let j=0,x=0,C=0;c.appliedTaxType==="cgst_sgst"?(j=I*(Number(c.cgstRate)/100),x=I*(Number(c.sgstRate)/100)):C=I*(Number(c.igstRate)/100);const M=j+x+C,H=I+M;return{totalAmount:I,cgstAmount:j,sgstAmount:x,igstAmount:C,totalTax:M,grandTotal:H}},[p,c.appliedTaxType,c.cgstRate,c.sgstRate,c.igstRate])(),te=L.useCallback(()=>p.filter(I=>I.description.trim()),[p]),Q=I=>{const j=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],x=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(I===0)return"Zero";const C=ve=>ve===0?"":ve<20?j[ve]:ve<100?x[Math.floor(ve/10)]+(ve%10!==0?" "+j[ve%10]:""):j[Math.floor(ve/100)]+" Hundred"+(ve%100!==0?" "+C(ve%100):""),M=ve=>{if(ve===0)return"";const Ce=Math.floor(ve/1e7),Le=Math.floor(ve%1e7/1e5),Ge=Math.floor(ve%1e5/1e3),lt=ve%1e3;let tt="";return Ce>0&&(tt+=C(Ce)+" Crore "),Le>0&&(tt+=C(Le)+" Lakh "),Ge>0&&(tt+=C(Ge)+" Thousand "),lt>0&&(tt+=C(lt)),tt.trim()},H=Math.floor(I),ie=Math.round((I-H)*100);let oe=M(H)+" Rupees";return ie>0&&(oe+=" and "+C(ie)+" Paise"),oe+=" Only",oe},fe=kn({mutationFn:async()=>{const I=te(),x=await(await kr("POST","/revira/api/invoices",{projectId:Number(e),invoiceNumber:c.invoiceNumber,revision:c.revision,organisationName:c.organisationName,registeredAddress:c.registeredAddress,consigneeAddress:c.consigneeAddress,clientGstin:c.clientGstin,workOrderNo:T(),dispatchDetails:z(),appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)})).json();for(const C of I)await kr("POST",`/revira/api/invoices/${x.id}/items`,{serialNo:C.serialNo,description:C.description,hsnCode:C.hsnCode,quantity:String(C.quantity),unit:C.unit,ratePerUnit:String(C.ratePerUnit),percentage:String(C.percentage),amount:String(C.amount),remarks:C.remarks});return x},onSuccess:I=>{Rr.invalidateQueries({queryKey:["/revira/api/invoices"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),n(`/revira/projects/${e}/invoice/${I.id}`),a({title:"Invoice saved",description:"The invoice has been created successfully."})},onError:I=>{a({title:"Error",description:I.message||"Failed to create invoice",variant:"destructive"})}}),U=kn({mutationFn:async()=>{const I=te();await kr("PUT",`/revira/api/invoices/${S?.id}`,{invoiceNumber:c.invoiceNumber,revision:c.revision,organisationName:c.organisationName,registeredAddress:c.registeredAddress,consigneeAddress:c.consigneeAddress,clientGstin:c.clientGstin,workOrderNo:T(),dispatchDetails:z(),appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)});let j=E||[];if(!j.length){const x=await fetch(`/revira/api/invoices/${S?.id}/items`,{credentials:"include"});x.ok&&(j=await x.json())}for(const x of j)await kr("DELETE",`/revira/api/invoice-items/${x.id}`);for(const x of I)await kr("POST",`/revira/api/invoices/${S?.id}/items`,{serialNo:x.serialNo,description:x.description,hsnCode:x.hsnCode,quantity:String(x.quantity),unit:x.unit,ratePerUnit:String(x.ratePerUnit),percentage:String(x.percentage),amount:String(x.amount),remarks:x.remarks})},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/invoices"]}),Rr.invalidateQueries({queryKey:["/revira/api/invoices",S?.id,"items"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice updated",description:"The invoice has been updated successfully."})},onError:I=>{a({title:"Error",description:I.message||"Failed to update invoice",variant:"destructive"})}}),F=kn({mutationFn:async()=>(await kr("POST",`/revira/api/invoices/${S?.id}/duplicate`,{})).json(),onSuccess:I=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),n(`/revira/projects/${e}/invoice/${I.id}`),a({title:"Invoice duplicated",description:`Created new version: ${I.revision}`})},onError:I=>{a({title:"Error",description:I.message||"Failed to duplicate invoice",variant:"destructive"})}}),X=kn({mutationFn:async I=>{await kr("DELETE",`/revira/api/invoices/${I}`,void 0)},onSuccess:()=>{if(Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice deleted",description:"The invoice version has been deleted."}),u(!1),_&&_.length>1){const I=_.filter(j=>j.id!==S?.id);I.length>0?n(`/revira/projects/${e}/invoice/${I[0].id}`):n(`/revira/projects/${e}/invoice`)}else n(`/revira/projects/${e}/invoice`)},onError:I=>{a({title:"Error",description:I.message||"Failed to delete invoice",variant:"destructive"})}}),Y=()=>{S?U.mutate():fe.mutate()},Ne=()=>{const I=Math.max(...p.map(j=>j.id),0)+1;m([...p,{id:I,serialNo:p.length+1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}])},be=I=>{if(p.length>1){const j=p.filter(x=>x.id!==I);m(j.map((x,C)=>({...x,serialNo:C+1})))}},we=(I,j,x)=>{m(C=>C.map(M=>{if(M.id===I){const H={...M,[j]:x};return(j==="quantity"||j==="ratePerUnit")&&(H.amount=Number(H.quantity)*Number(H.ratePerUnit)),H}return M}))},se=I=>`${I.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,me=async()=>{try{const I=new sr({orientation:"portrait",unit:"mm",format:"a4"}),j=210,x=297,C=15,M=j-C*2,H=35,ie=30,oe=qt=>qt*.2646,ve=oe(80),Ce=oe(50),Le=oe(80),Ge=oe(10),lt=oe(3),tt=oe(3),ct="#eeb7b7",ee="#fff5f5";let Re=H+10,We=1;const Ee=qt=>qt.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),rt=qt=>Ee(qt),At=qt=>new Promise((br,hr)=>{const Pt=new Image;Pt.crossOrigin="anonymous",Pt.onload=()=>{const vr=document.createElement("canvas");vr.width=Pt.width,vr.height=Pt.height,vr.getContext("2d")?.drawImage(Pt,0,0),br(vr.toDataURL("image/png"))},Pt.onerror=hr,Pt.src=qt});let Ct=null,ue=null,he=null;try{D?.headerUrl&&(Ct=await At(D.headerUrl)),D?.footerUrl&&(ue=await At(D.footerUrl)),D?.stampUrl&&(he=await At(D.stampUrl))}catch(qt){console.warn("Failed to load branding images:",qt)}const Ie=qt=>{Ct&&I.addImage(Ct,"PNG",0,0,j,H),ue&&I.addImage(ue,"PNG",0,x-ie,j,ie),he&&I.addImage(he,"PNG",j-Ce-ve,x-Le-ve,ve,ve),I.setFontSize(8),I.setTextColor(128,128,128),I.text(`Page ${qt}`,j/2,x-8,{align:"center"})},Ze=qt=>Re+qt>x-ie-10?(I.addPage(),We++,Ie(We),Re=H+10,!0):!1,Ve=(qt,br=12)=>{Re+=4,Ze(12),I.setFillColor("#d92134"),I.rect(C,Re-3.5,4,5,"F"),I.setFont("helvetica","bold"),I.setFontSize(br),I.setTextColor("#1e3a5f"),I.text(qt,C+7,Re),Re+=5.5},ze=(qt,br,hr=[])=>{const Pt=[32,63,32,63],vr=5.8,ut=tt,et=oe(3),it=wt=>wt-3,Qe=(wt,kt=0)=>it(wt)+et+2.5+kt*3.2;Ze(vr+4),I.setFont("helvetica","normal"),I.setFontSize(8.5);let st=0;const vt=wt=>wt.forEach(([kt,Lt])=>{const It=I.splitTextToSize(kt,Pt[0]-ut*2),$t=I.splitTextToSize(Lt||"-",Pt[1]+Pt[2]+Pt[3]-ut*2),Ht=Math.max(It.length||1,$t.length||1),Qt=Math.max(vr,Ht*3.2+1.2);if(Ze(Qt+2),st%2===0&&(I.setFillColor(245,245,245),I.rect(C,it(Re),M,Qt,"F")),I.setDrawColor(ct),I.rect(C,it(Re),M,Qt,"S"),I.line(C+Pt[0],it(Re),C+Pt[0],it(Re)+Qt),I.setFont("helvetica","bold"),It.forEach((Yt,Ar)=>{I.text(Yt,C+ut,Qe(Re,Ar))}),kt==="Dispatch Details"&&Lt){const Yt=Lt.split(",").map(tr=>tr.trim()).filter(Boolean),Ar=C+Pt[0]+ut,wr=C+Pt[0]+Pt[1]+Pt[2]+Pt[3]-ut;let zr=Ar,Pr=Qe(Re,0);Yt.forEach((tr,ar)=>{const rr=ar<Yt.length-1?", ":"",Nr=tr.indexOf(" - "),Or=Nr>-1?tr.slice(0,Nr):tr,Xr=Nr>-1?tr.slice(Nr):"",Us=I.getTextWidth(Or),bn=I.getTextWidth(Xr+rr);zr+Us+bn>wr&&(zr=Ar,Pr+=3.2),I.setFont("helvetica","bold"),I.text(Or,zr,Pr),zr+=Us,I.setFont("helvetica","normal"),I.text(Xr+rr,zr,Pr),zr+=bn})}else I.setFont("helvetica","normal"),$t.forEach((Yt,Ar)=>{I.text(Yt,C+Pt[0]+ut,Qe(Re,Ar))});Re+=Qt,st+=1});vt(qt),br.forEach(wt=>{const[kt,Lt]=wt,It=I.splitTextToSize(kt?.[0]||"",Pt[0]-ut*2),$t=I.splitTextToSize(kt?.[1]||"-",Pt[1]-ut*2),Ht=I.splitTextToSize(Lt?.[0]||"",Pt[2]-ut*2),Qt=I.splitTextToSize(Lt?.[1]||"",Pt[3]-ut*2),Yt=Math.max(It.length||1,$t.length||1,Ht.length||1,Qt.length||1),Ar=Math.max(vr,Yt*3.2+1.2);Ze(Ar+2),st%2===0&&(I.setFillColor(245,245,245),I.rect(C,it(Re),M,Ar,"F")),I.setDrawColor(ct),I.rect(C,it(Re),M,Ar,"S");let wr=C;for(let zr=0;zr<3;zr++)wr+=Pt[zr],I.line(wr,it(Re),wr,it(Re)+Ar);I.setFont("helvetica","bold"),It.forEach((zr,Pr)=>I.text(zr,C+ut,Qe(Re,Pr))),Ht.forEach((zr,Pr)=>I.text(zr,C+Pt[0]+Pt[1]+ut,Qe(Re,Pr))),I.setFont("helvetica","normal"),$t.forEach((zr,Pr)=>I.text(zr,C+Pt[0]+ut,Qe(Re,Pr))),Qt.forEach((zr,Pr)=>I.text(zr,C+Pt[0]+Pt[1]+Pt[2]+ut,Qe(Re,Pr))),Re+=Ar,st+=1}),vt(hr)},ot=qt=>{const br=[32,75,32,51],hr=5.8,Pt=tt,vr=oe(3),ut=it=>it-3,et=(it,Qe=0)=>ut(it)+vr+2.5+Qe*3.2;Ze(hr+4),I.setFont("helvetica","normal"),I.setFontSize(8.5),qt.forEach((it,Qe)=>{const[st,vt]=it,wt=I.splitTextToSize(st?.[0]||"",br[0]-Pt*2),kt=I.splitTextToSize(st?.[1]||"-",br[1]-Pt*2),Lt=I.splitTextToSize(vt?.[0]||"",br[2]-Pt*2),It=I.splitTextToSize(vt?.[1]||"",br[3]-Pt*2),$t=Math.max(wt.length||1,kt.length||1,Lt.length||1,It.length||1),Ht=Math.max(hr,$t*3.2+1.2);Ze(Ht+2),Qe%2===0&&(I.setFillColor(245,245,245),I.rect(C,ut(Re),M,Ht,"F")),I.setDrawColor(ct),I.rect(C,ut(Re),M,Ht,"S");let Qt=C;for(let Yt=0;Yt<3;Yt++)Qt+=br[Yt],I.line(Qt,ut(Re),Qt,ut(Re)+Ht);I.setFont("helvetica","bold"),wt.forEach((Yt,Ar)=>I.text(Yt,C+Pt,et(Re,Ar))),Lt.forEach((Yt,Ar)=>I.text(Yt,C+br[0]+br[1]+Pt,et(Re,Ar))),I.setFont("helvetica","normal"),kt.forEach((Yt,Ar)=>I.text(Yt,C+br[0]+Pt,et(Re,Ar))),It.forEach((Yt,Ar)=>I.text(Yt,C+br[0]+br[1]+br[2]+Pt,et(Re,Ar))),Re+=Ht})},ft=(qt,br)=>{const hr=[95,55,M-150],Pt=5.8,vr=tt;Ze(Pt+6),I.setFillColor(ee),I.setDrawColor(ct),I.setLineWidth(.2),I.rect(C,Re-3.2,M,Pt,"FD"),I.setFont("helvetica","bold"),I.setFontSize(8.5),I.text("Total Amount In Words",C+tt,Re+.8),I.text("Details",C+hr[0]+tt,Re+.8),I.text("Amount",C+hr[0]+hr[1]+tt,Re+.8),I.line(C+hr[0],Re-3.2,C+hr[0],Re-3.2+Pt),I.line(C+hr[0]+hr[1],Re-3.2,C+hr[0]+hr[1],Re-3.2+Pt),Re+=Pt,I.setFont("helvetica","normal"),I.setFontSize(8.5);const ut=br.map(st=>{const vt=I.splitTextToSize(st.detail,hr[1]-vr*2),wt=I.splitTextToSize(st.value,hr[2]-vr*2),kt=Math.max(vt.length||1,wt.length||1),Lt=Math.max(Pt,kt*3.2+1.2);return{detailLines:vt,valueLines:wt,rowHeight:Lt}}),et=ut.reduce((st,vt)=>st+vt.rowHeight,0);Ze(et+2),I.setDrawColor(ct),I.rect(C,Re-3.2,hr[0],et,"S");const it=I.splitTextToSize(qt,hr[0]-vr*3);I.setFont("helvetica","bold"),it.forEach((st,vt)=>{I.text(st,C+vr,Re+.1+lt+vt*3.2)});let Qe=Re;ut.forEach((st,vt)=>{vt%2===0&&(I.setFillColor(245,245,245),I.rect(C+hr[0],Qe-3.2,hr[1]+hr[2],st.rowHeight,"F")),I.setDrawColor(ct),I.rect(C+hr[0],Qe-3.2,hr[1]+hr[2],st.rowHeight,"S"),I.line(C+hr[0]+hr[1],Qe-3.2,C+hr[0]+hr[1],Qe-3.2+st.rowHeight),(br[vt]?.detail||"").trim().toLowerCase()==="grand total"?I.setFont("helvetica","bold"):I.setFont("helvetica","normal"),st.detailLines.forEach((wt,kt)=>{I.text(wt,C+hr[0]+vr,Qe+.1+lt+kt*3.2)}),(br[vt]?.detail||"").trim().toLowerCase()==="grand total"?I.setFont("helvetica","bold"):I.setFont("helvetica","normal"),st.valueLines.forEach((wt,kt)=>{I.text(wt,C+hr[0]+hr[1]+vr,Qe+.1+lt+kt*3.2)}),Qe+=st.rowHeight}),Re=Qe},Et=c.invoiceType||"PROFORMA INVOICE",St=Et==="TAX INVOICE"?"T.I. No":"P.I No",yn=Et==="TAX INVOICE"?"TI":"PI",Cr=new Date,yr=Cr.getMonth()>=3?`${Cr.getFullYear()}-${String(Cr.getFullYear()+1).slice(-2)}`:`${Cr.getFullYear()-1}-${String(Cr.getFullYear()).slice(-2)}`,ur=String(A?.id||0).padStart(3,"0"),Wr=`RNS/${yr}/RNS-${yn}-${ur}`,Dt=[["GSTIN",c.clientGstin||""]],_r=[];c.orderReferenceType==="po"?Dt.push(["P.O. No.",c.purchaseOrderNo||"-"]):Dt.push(["W.O. No.",c.workOrderNo||"-"]),c.vehicleNo.trim()&&_r.push(`Vehicle No. - ${c.vehicleNo.trim()}`),c.showDispatchLrNo&&_r.push(`L.R. No. - ${c.dispatchLrNo||"-"}`),c.showDispatchPo&&_r.push(`D.C No. - ${c.dispatchPoNo||"-"}`),c.showDispatchGatePass&&_r.push(`Gate Pass - ${c.dispatchGatePass||"-"}`);const ir=_r.length?_r.join(",    "):"-",gr=[];for(let qt=0;qt<Dt.length;qt+=2)gr.push([Dt[qt],Dt[qt+1]]);Ie(We),I.setFontSize(16),I.setFont("helvetica","bold"),I.setTextColor("#da2032"),I.text(Et,j/2,Re,{align:"center"}),Re+=10,I.setFont("helvetica","normal"),I.setTextColor(0,0,0),I.setFontSize(9),I.text(`CIN: ${D?.cin||""}`,C,Re),I.text(`Company GSTIN: ${D?.companyGstin||"07AAPCR3026H1ZA"}`,j/2-20,Re),I.text(`${St}: ${Wr}`,j-C-50,Re),Re+=5,I.text(`Email: ${D?.email||"sales@reviranexgen.com"}`,j/2-20,Re),I.text(`Date: ${new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,j-C-50,Re),Re+=8,Ve("Client Details",11),ze([["Organisation Name",c.organisationName],["Registered Address",c.registeredAddress],["Consignee Address",c.consigneeAddress]],gr,[["Dispatch Details",ir]]),Re+=Ge;const ln=["Sr.No.","Description of Goods","HSN Code","Qty.","Unit","Rate","%age","Basic Amount (INR)"],mr=[12,55,20,13,13,20,14,43],Vt=p.filter(qt=>qt.description.trim()).map(qt=>[String(qt.serialNo),qt.description,qt.hsnCode,String(qt.quantity),qt.unit||"LS",Ee(Number(qt.ratePerUnit)||0),`${Number(qt.percentage)||0}%`,Ee(Number(qt.amount)||0)]);Ze(15),I.setFillColor(ee),I.setDrawColor(ct),I.setLineWidth(.2),I.rect(C,Re-3,M,5.8,"FD"),I.setFont("helvetica","bold"),I.setFontSize(8);let fr=C;ln.forEach((qt,br)=>{I.line(fr,Re-3,fr,Re+2.8),I.text(qt,fr+tt,Re+.8),fr+=mr[br]}),I.line(fr,Re-3,fr,Re+2.8),Re+=5.8,I.setFont("helvetica","normal"),Vt.forEach((qt,br)=>{const hr=qt.map((et,it)=>I.splitTextToSize(et,mr[it]-tt*2)),Pt=Math.max(...hr.map(et=>et.length)),vr=Math.max(5.8,Pt*3.2+1.2);Ze(vr+2),br%2===0&&(I.setFillColor(245,245,245),I.rect(C,Re-3,M,vr,"F")),I.setDrawColor(ct),I.rect(C,Re-3,M,vr,"S");let ut=C;hr.forEach((et,it)=>{I.line(ut,Re-3,ut,Re-3+vr),it===0?I.setFont("helvetica","bold"):I.setFont("helvetica","normal"),et.forEach((Qe,st)=>{I.text(Qe,ut+tt,Re+.1+lt+st*3.2)}),ut+=mr[it]}),I.line(ut,Re-3,ut,Re-3+vr),Re+=vr}),Re+=Ge;const ss=[{detail:"Total Amount (INR)",value:rt(W.totalAmount)},{detail:"Total Amount before Tax",value:rt(W.totalAmount)},{detail:"(1) Add: CGST",value:rt(W.cgstAmount)},{detail:"(2) Add: SGST",value:rt(W.sgstAmount)},{detail:"(3) Add: IGST",value:rt(W.igstAmount)},{detail:"Total GST",value:rt(W.totalTax)},{detail:"Grand Total",value:rt(W.grandTotal)}];ft(Q(W.grandTotal),ss),Re+=Ge,Ve("Bank Details",11),ot([[["Account Name",D?.entityName||"Revira NexGen Structures Pvt. Ltd"],["Account Number","73361900002657"]],[["Address",D?.headOfficeAddress||"28, E2 Block, Shivram Park Nangloi Delhi - 110041"],["IFSC Code","YESB0000733"]]]),Re+=Ge,Ze(20),I.text(`For, ${D?.entityName||"Revira NexGen Structures Pvt. Ltd"}`,j-C-60,Re),Re+=18,I.text("Authorised Signatory",j-C-50,Re);const En=new Date,Js=`${String(En.getDate()).padStart(2,"0")}${String(En.getMonth()+1).padStart(2,"0")}${En.getFullYear()}`,ys=(D?.entityName||"RNS").split(" ").map(qt=>qt[0]).join(""),_n=`${Et==="TAX INVOICE"?"TAX_INVOICE":"PROFORMA_INVOICE"}_${Js}_${ys}_${c.revision}.pdf`;I.save(_n),a({title:"PDF exported",description:`Invoice saved as ${_n}`})}catch(I){console.error("PDF export error:",I),a({title:"Export failed",description:"Failed to export invoice PDF. Please try again.",variant:"destructive"})}};return!A||!y||!b?i.jsx(Es,{user:b,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Es,{user:b,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),"data-testid":"button-back",children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:A.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),A.location]})]})]}),i.jsxs(Oe,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-invoice",children:[i.jsx(Na,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:S?.revision||c.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),S&&i.jsx(Oe,{variant:"outline",size:"icon",onClick:()=>F.mutate(),disabled:F.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Oe,{onClick:me,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsxs(Oe,{variant:"outline",onClick:Y,disabled:fe.isPending||U.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-invoice",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),fe.isPending||U.isPending?"Saving...":"Save Changes"]}),S&&_&&_.length>1&&i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this invoice (${S.revision})?`)&&X.mutate(S.id)},"data-testid":"button-delete-invoice",children:i.jsx(Pn,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsxs(Xn,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(Na,{className:"w-5 h-5"}),"INVOICE DETAILS"]})}),i.jsxs(Ur,{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Invoice Type"}),i.jsxs(Pl,{value:c.invoiceType,onValueChange:I=>f({...c,invoiceType:I}),children:[i.jsx(Ko,{"data-testid":"select-invoice-type",children:i.jsx(kl,{})}),i.jsxs(Qo,{children:[i.jsx(ia,{value:"PROFORMA INVOICE",children:"PROFORMA INVOICE"}),i.jsx(ia,{value:"TAX INVOICE",children:"TAX INVOICE"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Invoice No."}),i.jsx(Je,{value:c.invoiceNumber,onChange:I=>f({...c,invoiceNumber:I.target.value}),"data-testid":"input-invoice-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(Je,{value:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),disabled:!0})]})]})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"CLIENT DETAILS"})}),i.jsxs(Ur,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Organisation Name"}),i.jsx(Je,{value:c.organisationName,onChange:I=>f({...c,organisationName:I.target.value}),"data-testid":"input-organisation-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Client GSTIN"}),i.jsx(Je,{value:c.clientGstin,onChange:I=>f({...c,clientGstin:I.target.value}),"data-testid":"input-client-gstin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Registered Address"}),i.jsx(Je,{value:c.registeredAddress,onChange:I=>f({...c,registeredAddress:I.target.value}),"data-testid":"input-registered-address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Consignee Address"}),i.jsx(rs,{value:c.consigneeAddress,onChange:I=>f({...c,consigneeAddress:I.target.value}),rows:2,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Order Reference Selection"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Reference Type"}),i.jsxs(Pl,{value:c.orderReferenceType,onValueChange:I=>f({...c,orderReferenceType:I}),children:[i.jsx(Ko,{"data-testid":"select-order-reference-type",children:i.jsx(kl,{})}),i.jsxs(Qo,{children:[i.jsx(ia,{value:"wo",children:"W.O. No."}),i.jsx(ia,{value:"po",children:"P.O. No."})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:c.orderReferenceType==="po"?"P.O. No.":"W.O. No."}),i.jsx(Je,{value:c.orderReferenceType==="po"?c.purchaseOrderNo:c.workOrderNo,onChange:I=>f({...c,...c.orderReferenceType==="po"?{purchaseOrderNo:I.target.value}:{workOrderNo:I.target.value}}),"data-testid":c.orderReferenceType==="po"?"input-po-number":"input-work-order"})]})]})]}),i.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Dispatch Details"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(Je,{value:c.vehicleNo,onChange:I=>f({...c,vehicleNo:I.target.value}),"data-testid":"input-vehicle-no"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(rh,{checked:c.showDispatchLrNo,onCheckedChange:I=>f({...c,showDispatchLrNo:I===!0}),"data-testid":"checkbox-dispatch-lr"}),"L.R. No."]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(rh,{checked:c.showDispatchPo,onCheckedChange:I=>f({...c,showDispatchPo:I===!0}),"data-testid":"checkbox-dispatch-po"}),"D.C No."]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(rh,{checked:c.showDispatchGatePass,onCheckedChange:I=>f({...c,showDispatchGatePass:I===!0}),"data-testid":"checkbox-dispatch-gate-pass"}),"Gate Pass"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.showDispatchLrNo&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"L.R. No."}),i.jsx(Je,{value:c.dispatchLrNo,onChange:I=>f({...c,dispatchLrNo:I.target.value}),"data-testid":"input-dispatch-lr"})]}),c.showDispatchPo&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"D.C No."}),i.jsx(Je,{value:c.dispatchPoNo,onChange:I=>f({...c,dispatchPoNo:I.target.value}),"data-testid":"input-dispatch-po"})]}),c.showDispatchGatePass&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Gate Pass"}),i.jsx(Je,{value:c.dispatchGatePass,onChange:I=>f({...c,dispatchGatePass:I.target.value}),"data-testid":"input-dispatch-gate-pass"})]})]})]})]})]}),i.jsxs(qr,{children:[i.jsxs(Yn,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(Xn,{className:"text-lg text-slate-700",children:"INVOICE ITEMS"}),i.jsxs(Oe,{size:"sm",onClick:Ne,"data-testid":"button-add-item",children:[i.jsx(xs,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(Ur,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"Sr."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600",children:"Description"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"HSN Code"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Qty"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Unit"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"Rate"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"Amount"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsx("tbody",{children:p.map(I=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:I.serialNo,onChange:j=>we(I.id,"serialNo",parseInt(j.target.value)||1),className:"w-14 text-center","data-testid":`input-serial-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(rs,{value:I.description,onChange:j=>we(I.id,"description",j.target.value),rows:2,placeholder:"Description","data-testid":`input-description-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:I.hsnCode,onChange:j=>we(I.id,"hsnCode",j.target.value),"data-testid":`input-hsn-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:I.quantity,onChange:j=>we(I.id,"quantity",parseFloat(j.target.value)||0),"data-testid":`input-qty-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:I.unit,onChange:j=>we(I.id,"unit",j.target.value),"data-testid":`input-unit-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:I.ratePerUnit,onChange:j=>we(I.id,"ratePerUnit",parseFloat(j.target.value)||0),"data-testid":`input-rate-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:I.amount,onChange:j=>we(I.id,"amount",parseFloat(j.target.value)||0),"data-testid":`input-amount-${I.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>be(I.id),disabled:p.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${I.id}`,children:i.jsx(of,{className:"w-4 h-4"})})})]},I.id))})]})})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"TAX & TOTALS"})}),i.jsx(Ur,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Tax Type"}),i.jsxs(Pl,{value:c.appliedTaxType,onValueChange:I=>f({...c,appliedTaxType:I}),children:[i.jsx(Ko,{"data-testid":"select-tax-type",children:i.jsx(kl,{})}),i.jsxs(Qo,{children:[i.jsx(ia,{value:"igst",children:"IGST (Interstate)"}),i.jsx(ia,{value:"cgst_sgst",children:"CGST + SGST (Intrastate)"})]})]})]}),c.appliedTaxType==="cgst_sgst"?i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CGST Rate (%)"}),i.jsx(Je,{type:"number",value:c.cgstRate,onChange:I=>f({...c,cgstRate:I.target.value}),"data-testid":"input-cgst-rate"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"SGST Rate (%)"}),i.jsx(Je,{type:"number",value:c.sgstRate,onChange:I=>f({...c,sgstRate:I.target.value}),"data-testid":"input-sgst-rate"})]})]}):i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"IGST Rate (%)"}),i.jsx(Je,{type:"number",value:c.igstRate,onChange:I=>f({...c,igstRate:I.target.value}),"data-testid":"input-igst-rate"})]})]}),i.jsxs("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Total Amount"}),i.jsx("span",{className:"font-medium",children:se(W.totalAmount)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Amount before Tax"}),i.jsx("span",{className:"font-medium",children:se(W.totalAmount)})]}),c.appliedTaxType==="cgst_sgst"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"CGST"}),i.jsx("span",{children:se(W.cgstAmount)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"SGST"}),i.jsx("span",{children:se(W.sgstAmount)})]})]}):i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"IGST"}),i.jsx("span",{children:se(W.igstAmount)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-2",children:[i.jsx("span",{className:"text-slate-600",children:"Total Tax"}),i.jsx("span",{className:"font-medium",children:se(W.totalTax)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-2 text-lg",children:[i.jsx("span",{className:"font-bold text-slate-700",children:"Grand Total"}),i.jsx("span",{className:"font-bold text-blue-600",children:se(W.grandTotal)})]}),i.jsx("div",{className:"text-sm text-slate-500 mt-2",children:Q(W.grandTotal)})]})]})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"BANK DETAILS"})}),i.jsx(Ur,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Account Name:"}),i.jsx("span",{className:"ml-2 font-medium",children:D?.entityName||"Revira NexGen Structures Pvt. Ltd"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Account Number:"}),i.jsx("span",{className:"ml-2 font-medium",children:"073361900002657"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Bank Address:"}),i.jsx("span",{className:"ml-2 font-medium",children:D?.headOfficeAddress||"28 E2 Block, Shivram Park, Nangloi, Delhi 41"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"IFSC Code:"}),i.jsx("span",{className:"ml-2 font-medium",children:"YESB0000733"})]})]})})]})]})]}),i.jsx(Sa,{open:o,onOpenChange:u,children:i.jsxs(aa,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsx(la,{children:"Invoice Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:_?.map(I=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${I.id===S?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{n(`/revira/projects/${e}/invoice/${I.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:I.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(I.createdAt).toLocaleDateString()})]}),_&&_.length>1&&i.jsx(Oe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:j=>{j.stopPropagation(),confirm(`Are you sure you want to delete version ${I.revision}?`)&&X.mutate(I.id)},"data-testid":`button-delete-version-${I.id}`,children:i.jsx(Pn,{className:"w-4 h-4"})})]})},I.id))})]})})]})}function A5(){const t=Qu(),e=t.id,r=t.gatePassId,[,n]=Ma(),{toast:a}=Ba(),[o,u]=L.useState(!1),[c,f]=L.useState({gatePassNumber:"",revision:"R-001",gatePassType:"GATE PASS",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),p=j=>{const x=j.split(/\s+/).map(C=>C.trim()).filter(Boolean);return x.length?x.map(C=>C[0]).join("").toUpperCase():"PROJECT"},m=j=>{const x=String(j.getDate()).padStart(2,"0"),C=String(j.getMonth()+1).padStart(2,"0"),M=String(j.getFullYear()).slice(-2);return`${x}-${C}-${M}`},[b,A]=L.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:y}=Aa(),{data:D}=Ir({queryKey:["/revira/api/projects",e],queryFn:async()=>{const j=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch project");return j.json()},enabled:!!e}),{data:S}=Ir({queryKey:["/revira/api/clients",D?.clientId],queryFn:async()=>{const j=await fetch(`/revira/api/clients/${D?.clientId}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch client");return j.json()},enabled:!!D?.clientId}),{data:E}=Ir({queryKey:["/revira/api/branding"],enabled:!!y}),{data:_}=Ir({queryKey:["/revira/api/gate-passes",r],queryFn:async()=>{if(r){const x=await fetch(`/revira/api/gate-passes/${r}`,{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch gate pass");return x.json()}const j=await fetch(`/revira/api/projects/${e}/gate-pass`,{credentials:"include"});if(!j.ok){if(j.status===404)return null;throw new Error("Failed to fetch gate pass")}return j.json()},enabled:!!e}),{data:O}=Ir({queryKey:["/revira/api/gate-passes",_?.id,"items"],queryFn:async()=>{const j=await fetch(`/revira/api/gate-passes/${_?.id}/items`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch items");return j.json()},enabled:!!_?.id}),{data:T}=Ir({queryKey:["/revira/api/projects",e,"gate-pass-versions"],queryFn:async()=>{const j=await fetch(`/revira/api/projects/${e}/gate-pass-versions`,{credentials:"include"});return j.ok?j.json():[]},enabled:!!e}),z=j=>{if(!j)return{};try{const x=JSON.parse(j);return x&&typeof x=="object"?x:{}}catch{return{}}};L.useCallback(()=>c.orderReferenceType==="po"?c.purchaseOrderNo||"-":c.workOrderNo||"-",[c.orderReferenceType,c.workOrderNo,c.purchaseOrderNo]),L.useCallback(()=>{const j=[];return c.vehicleNo.trim()&&j.push(`Vehicle No.: ${c.vehicleNo.trim()}`),c.showDispatchLrNo&&j.push(`L.R. No.: ${c.dispatchLrNo||"-"}`),c.showDispatchPo&&j.push(`P.O.: ${c.dispatchPoNo||"-"}`),c.showDispatchGatePass&&j.push(`Gate Pass: ${c.dispatchGatePass||"-"}`),j.length?j.join(" | "):"-"},[c.vehicleNo,c.showDispatchLrNo,c.dispatchLrNo,c.showDispatchPo,c.dispatchPoNo,c.showDispatchGatePass,c.dispatchGatePass]);const re=L.useCallback(()=>{const j={gatePassType:c.gatePassType,issueNo:c.issueNo,issueDate:c.issueDate,revNo:c.revNo,revDate:c.revDate,consigneeName:c.consigneeName,consigneeAddressText:c.consigneeAddressText,modeOfTransport:c.modeOfTransport,vehicleNumber:c.vehicleNumber,transportVehicle:c.transportVehicle,contactNo:c.contactNo,contactPerson:c.contactPerson,remarkText:c.remarkText,storeKeeperSignature:c.storeKeeperSignature,qcEnggSignature:c.qcEnggSignature,storeInchargeSignature:c.storeInchargeSignature,plantHeadSignature:c.plantHeadSignature,orderReferenceType:c.orderReferenceType,showWorkOrderNo:c.orderReferenceType==="wo",showPurchaseOrderNo:c.orderReferenceType==="po",purchaseOrderNo:c.purchaseOrderNo,vehicleNo:c.vehicleNo,showDispatchLrNo:c.showDispatchLrNo,showDispatchPo:c.showDispatchPo,showDispatchGatePass:c.showDispatchGatePass,dispatchLrNo:c.dispatchLrNo,dispatchPoNo:c.dispatchPoNo,dispatchGatePass:c.dispatchGatePass};return JSON.stringify(j)},[c]);L.useEffect(()=>{if(D&&S&&!_){const j=new Date,x=p(D.projectName),C=m(j);f(M=>({...M,gatePassNumber:`RNS/${x}/${C}/RNS-GT-002`,issueDate:j.toISOString().split("T")[0],revDate:j.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:S.name,registeredAddress:S.location,consigneeAddress:`${S.name}
${S.location}`,clientGstin:S.gstNo||""}))}},[D,S,_]),L.useEffect(()=>{if(_){const j=z(_.contentSections),x=oe=>(oe||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),C=j.orderReferenceType||(j.showPurchaseOrderNo?"po":"wo"),M=j.vehicleNo!==void 0||j.showDispatchLrNo!==void 0||j.showDispatchPo!==void 0||j.showDispatchGatePass!==void 0||j.dispatchLrNo!==void 0||j.dispatchPoNo!==void 0||j.dispatchGatePass!==void 0,H=j.transportVehicle||_.dispatchDetails||"",ie=H.includes("-")?H.split("-").map(oe=>oe.trim()):[];f({gatePassNumber:_.gatePassNumber,revision:_.revision,gatePassType:j.gatePassType||"GATE PASS",issueNo:j.issueNo||"001",issueDate:j.issueDate||"",revNo:j.revNo||"00",revDate:j.revDate||"",consigneeName:j.consigneeName||_.organisationName||"",consigneeAddressText:j.consigneeAddressText||_.registeredAddress||"",modeOfTransport:j.modeOfTransport||ie[0]||"By Road",vehicleNumber:j.vehicleNumber||ie[1]||"",transportVehicle:j.transportVehicle||j.vehicleNo||_.dispatchDetails||"",contactNo:j.contactNo||"",contactPerson:j.contactPerson||"",remarkText:j.remarkText||"",storeKeeperSignature:j.storeKeeperSignature||"",qcEnggSignature:j.qcEnggSignature||"",storeInchargeSignature:j.storeInchargeSignature||"",plantHeadSignature:j.plantHeadSignature||"",organisationName:_.organisationName,registeredAddress:_.registeredAddress,consigneeAddress:_.consigneeAddress,clientGstin:_.clientGstin||"",workOrderNo:x(_.workOrderNo)||"NIL",orderReferenceType:C,purchaseOrderNo:j.purchaseOrderNo||(C==="po"?x(_.workOrderNo):""),dispatchDetails:_.dispatchDetails||"-",vehicleNo:j.vehicleNo||(!M&&_.dispatchDetails&&_.dispatchDetails!=="-"?_.dispatchDetails:""),showDispatchLrNo:j.showDispatchLrNo??!1,showDispatchPo:j.showDispatchPo??!1,showDispatchGatePass:j.showDispatchGatePass??!1,dispatchLrNo:j.dispatchLrNo||"",dispatchPoNo:j.dispatchPoNo||"",dispatchGatePass:j.dispatchGatePass||"",appliedTaxType:_.appliedTaxType||"igst",cgstRate:_.cgstRate||"9",sgstRate:_.sgstRate||"9",igstRate:_.igstRate||"18"})}},[_]),L.useEffect(()=>{O&&O.length>0&&A(O.map((j,x)=>({id:j.id,serialNo:j.serialNo>0?j.serialNo:x+1,partMark:j.hsnCode||"",materialDescription:j.description||"",materialSize:j.ratePerUnit&&j.ratePerUnit!=="0"?j.ratePerUnit:"-",quantity:Number(j.quantity)||0,asslyPartSl:j.unit||"",approxValue:j.amount&&j.amount!=="0"?j.amount:"-",remarks:j.remarks||""})))},[O]);const W=L.useCallback(()=>{const j=b.reduce((oe,ve)=>{const Ce=Number(String(ve.approxValue).replace(/,/g,""));return oe+(Number.isFinite(Ce)?Ce:0)},0);let x=0,C=0,M=0;c.appliedTaxType==="cgst_sgst"?(x=j*(Number(c.cgstRate)/100),C=j*(Number(c.sgstRate)/100)):M=j*(Number(c.igstRate)/100);const H=x+C+M,ie=j+H;return{totalAmount:j,cgstAmount:x,sgstAmount:C,igstAmount:M,totalTax:H,grandTotal:ie}},[b,c.appliedTaxType,c.cgstRate,c.sgstRate,c.igstRate])(),te=(j,x="0")=>{const C=Number(String(j??"").replace(/,/g,"").trim());return Number.isFinite(C)?String(C):x},Q=(j,x)=>{const C=E?.[x]||"";f(M=>M[j]?{...M,[j]:""}:C?{...M,[j]:C}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),M))},fe=L.useCallback(()=>b.slice(0,5).filter(j=>j.partMark.trim()||j.materialDescription.trim()),[b]),U=kn({mutationFn:async()=>{const j=fe(),C=await(await kr("POST","/revira/api/gate-passes",{projectId:Number(e),gatePassNumber:c.gatePassNumber,revision:c.revision,organisationName:c.consigneeName||"Company Name",registeredAddress:c.consigneeAddressText||"-",consigneeAddress:`${c.consigneeName||"Company Name"}
${c.consigneeAddressText||"-"}`.trim(),clientGstin:c.clientGstin,workOrderNo:c.issueNo||"-",dispatchDetails:`${c.modeOfTransport||"By Road"} - ${c.vehicleNumber||"-"}`,appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)})).json();for(let M=0;M<j.length;M++){const H=j[M];await kr("POST",`/revira/api/gate-passes/${C.id}/items`,{serialNo:H.serialNo>0?H.serialNo:M+1,description:H.materialDescription,hsnCode:H.partMark,quantity:te(H.quantity),unit:H.asslyPartSl,ratePerUnit:te(H.materialSize,"0"),percentage:"0",amount:te(H.approxValue,"0"),remarks:H.remarks})}return C},onSuccess:j=>{Rr.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),n(`/revira/projects/${e}/gate-pass/${j.id}`),a({title:"Gate Pass saved",description:"The gate pass has been created successfully."})},onError:j=>{a({title:"Error",description:j.message||"Failed to create gate pass",variant:"destructive"})}}),F=kn({mutationFn:async()=>{const j=fe();await kr("PUT",`/revira/api/gate-passes/${_?.id}`,{gatePassNumber:c.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002",revision:c.revision,organisationName:c.consigneeName||"Company Name",registeredAddress:c.consigneeAddressText||"-",consigneeAddress:`${c.consigneeName||"Company Name"}
${c.consigneeAddressText||"-"}`.trim(),clientGstin:c.clientGstin,workOrderNo:c.issueNo||"-",dispatchDetails:`${c.modeOfTransport||"By Road"} - ${c.vehicleNumber||"-"}`,appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)});let x=O||[];if(!x.length){const C=await fetch(`/revira/api/gate-passes/${_?.id}/items`,{credentials:"include"});C.ok&&(x=await C.json())}for(const C of x)await kr("DELETE",`/revira/api/gate-pass-items/${C.id}`);for(let C=0;C<j.length;C++){const M=j[C];await kr("POST",`/revira/api/gate-passes/${_?.id}/items`,{serialNo:M.serialNo>0?M.serialNo:C+1,description:M.materialDescription,hsnCode:M.partMark,quantity:te(M.quantity),unit:M.asslyPartSl,ratePerUnit:te(M.materialSize,"0"),percentage:"0",amount:te(M.approxValue,"0"),remarks:M.remarks})}},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),Rr.invalidateQueries({queryKey:["/revira/api/gate-passes",_?.id,"items"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass updated",description:"The gate pass has been updated successfully."})},onError:j=>{a({title:"Error",description:j.message||"Failed to update gate pass",variant:"destructive"})}}),X=kn({mutationFn:async()=>(await kr("POST",`/revira/api/gate-passes/${_?.id}/duplicate`,{})).json(),onSuccess:j=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),n(`/revira/projects/${e}/gate-pass/${j.id}`),a({title:"Gate Pass duplicated",description:`Created new version: ${j.revision}`})},onError:j=>{a({title:"Error",description:j.message||"Failed to duplicate gate pass",variant:"destructive"})}}),Y=kn({mutationFn:async j=>{await kr("DELETE",`/revira/api/gate-passes/${j}`,void 0)},onSuccess:()=>{if(Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass deleted",description:"The gate pass version has been deleted."}),u(!1),T&&T.length>1){const j=T.filter(x=>x.id!==_?.id);j.length>0?n(`/revira/projects/${e}/gate-pass/${j[0].id}`):n(`/revira/projects/${e}/gate-pass`)}else n(`/revira/projects/${e}/gate-pass`)},onError:j=>{a({title:"Error",description:j.message||"Failed to delete gate pass",variant:"destructive"})}}),Ne=()=>{_?F.mutate():U.mutate()},be=()=>{const j=Math.max(...b.map(x=>x.id),0)+1;A([...b,{id:j,serialNo:b.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},we=j=>{if(b.length>1){const x=b.filter(C=>C.id!==j);A(x.map((C,M)=>({...C,serialNo:M+1})))}},se=(j,x,C)=>{A(M=>M.map(H=>H.id===j?{...H,[x]:C}:H))},me=()=>b.reduce((j,x)=>{const C=Number(String(x.approxValue||"").replace(/,/g,"").trim());return j+(Number.isFinite(C)?C:0)},0),I=async()=>{try{const j=new sr({orientation:"portrait",unit:"mm",format:"a4"}),x=210,C=297,M=15,H=x-M*2,ie=35,oe=30,ve=ut=>ut*.2646,Ce=ve(80),Le=ve(50),Ge=ve(80),lt=ve(10),tt=ve(3),ct=ve(3),ee="#eeb7b7",Re="#fff5f5";let We=ie+10,Ee=1;const rt=ut=>ut.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),At=ut=>rt(ut),Ct=ut=>new Promise((et,it)=>{const Qe=new Image;Qe.crossOrigin="anonymous",Qe.onload=()=>{const st=document.createElement("canvas");st.width=Qe.width,st.height=Qe.height,st.getContext("2d")?.drawImage(Qe,0,0),et(st.toDataURL("image/png"))},Qe.onerror=it,Qe.src=ut});let ue=null,he=null,Ie=null;try{E?.headerUrl&&(ue=await Ct(E.headerUrl)),E?.footerUrl&&(he=await Ct(E.footerUrl)),E?.stampUrl&&(Ie=await Ct(E.stampUrl))}catch(ut){console.warn("Failed to load branding images:",ut)}const Ze=ut=>{ue&&j.addImage(ue,"PNG",0,0,x,ie),he&&j.addImage(he,"PNG",0,C-oe,x,oe),Ie&&j.addImage(Ie,"PNG",x-Le-Ce,C-Ge-Ce,Ce,Ce),j.setFontSize(8),j.setTextColor(128,128,128),j.text(`Page ${ut}`,x/2,C-8,{align:"center"})},Ve=ut=>We+ut>C-oe-10?(j.addPage(),Ee++,Ze(Ee),We=ie+10,!0):!1,ze=(ut,et=12)=>{We+=4,Ve(12),j.setFillColor("#d92134"),j.rect(M,We-3.5,4,5,"F"),j.setFont("helvetica","bold"),j.setFontSize(et),j.setTextColor("#1e3a5f"),j.text(ut,M+7,We),We+=5.5},ot=(ut,et,it=[])=>{const Qe=[38,57,38,57],st=5.8,vt=ct,wt=ve(3),kt=Ht=>Ht-3,Lt=(Ht,Qt=0)=>kt(Ht)+wt+2.5+Qt*3.2;Ve(st+4),j.setFont("helvetica","normal"),j.setFontSize(8.5);let It=0;const $t=Ht=>Ht.forEach(([Qt,Yt])=>{const Ar=j.splitTextToSize(Qt,Qe[0]-vt*2),wr=j.splitTextToSize(Yt||"-",Qe[1]+Qe[2]+Qe[3]-vt*2),zr=Math.max(Ar.length||1,wr.length||1),Pr=Math.max(st,zr*3.2+1.2);if(Ve(Pr+2),It%2===0&&(j.setFillColor(245,245,245),j.rect(M,kt(We),H,Pr,"F")),j.setDrawColor(ee),j.rect(M,kt(We),H,Pr,"S"),j.line(M+Qe[0],kt(We),M+Qe[0],kt(We)+Pr),j.setFont("helvetica","bold"),Ar.forEach((tr,ar)=>{j.text(tr,M+vt,Lt(We,ar))}),Qt==="Dispatch Details"&&Yt){const tr=Yt.split(",").map(Xr=>Xr.trim()).filter(Boolean),ar=M+Qe[0]+vt,rr=M+Qe[0]+Qe[1]+Qe[2]+Qe[3]-vt;let Nr=ar,Or=Lt(We,0);tr.forEach((Xr,Us)=>{const bn=Us<tr.length-1?", ":"",ei=Xr.indexOf(" - "),Gn=ei>-1?Xr.slice(0,ei):Xr,Gr=ei>-1?Xr.slice(ei):"",Fn=j.getTextWidth(Gn),is=j.getTextWidth(Gr+bn);Nr+Fn+is>rr&&(Nr=ar,Or+=3.2),j.setFont("helvetica","bold"),j.text(Gn,Nr,Or),Nr+=Fn,j.setFont("helvetica","normal"),j.text(Gr+bn,Nr,Or),Nr+=is})}else j.setFont("helvetica","normal"),wr.forEach((tr,ar)=>{j.text(tr,M+Qe[0]+vt,Lt(We,ar))});We+=Pr,It+=1});$t(ut),et.forEach(Ht=>{const[Qt,Yt]=Ht,Ar=j.splitTextToSize(Qt?.[0]||"",Qe[0]-vt*2),wr=j.splitTextToSize(Qt?.[1]||"-",Qe[1]-vt*2),zr=j.splitTextToSize(Yt?.[0]||"",Qe[2]-vt*2),Pr=j.splitTextToSize(Yt?.[1]||"",Qe[3]-vt*2),tr=Math.max(Ar.length||1,wr.length||1,zr.length||1,Pr.length||1),ar=Math.max(st,tr*3.2+1.2);Ve(ar+2),It%2===0&&(j.setFillColor(245,245,245),j.rect(M,kt(We),H,ar,"F")),j.setDrawColor(ee),j.rect(M,kt(We),H,ar,"S");let rr=M;for(let Nr=0;Nr<3;Nr++)rr+=Qe[Nr],j.line(rr,kt(We),rr,kt(We)+ar);j.setFont("helvetica","bold"),Ar.forEach((Nr,Or)=>j.text(Nr,M+vt,Lt(We,Or))),zr.forEach((Nr,Or)=>j.text(Nr,M+Qe[0]+Qe[1]+vt,Lt(We,Or))),j.setFont("helvetica","normal"),wr.forEach((Nr,Or)=>j.text(Nr,M+Qe[0]+vt,Lt(We,Or))),Pr.forEach((Nr,Or)=>j.text(Nr,M+Qe[0]+Qe[1]+Qe[2]+vt,Lt(We,Or))),We+=ar,It+=1}),$t(it)},ft=ut=>{const et=[32,75,32,51],it=5.8,Qe=ct,st=ve(3),vt=kt=>kt-3,wt=(kt,Lt=0)=>vt(kt)+st+2.5+Lt*3.2;Ve(it+4),j.setFont("helvetica","normal"),j.setFontSize(8.5),ut.forEach((kt,Lt)=>{const[It,$t]=kt,Ht=j.splitTextToSize(It?.[0]||"",et[0]-Qe*2),Qt=j.splitTextToSize(It?.[1]||"-",et[1]-Qe*2),Yt=j.splitTextToSize($t?.[0]||"",et[2]-Qe*2),Ar=j.splitTextToSize($t?.[1]||"",et[3]-Qe*2),wr=Math.max(Ht.length||1,Qt.length||1,Yt.length||1,Ar.length||1),zr=Math.max(it,wr*3.2+1.2);Ve(zr+2),Lt%2===0&&(j.setFillColor(245,245,245),j.rect(M,vt(We),H,zr,"F")),j.setDrawColor(ee),j.rect(M,vt(We),H,zr,"S");let Pr=M;for(let tr=0;tr<3;tr++)Pr+=et[tr],j.line(Pr,vt(We),Pr,vt(We)+zr);j.setFont("helvetica","bold"),Ht.forEach((tr,ar)=>j.text(tr,M+Qe,wt(We,ar))),Yt.forEach((tr,ar)=>j.text(tr,M+et[0]+et[1]+Qe,wt(We,ar))),j.setFont("helvetica","normal"),Qt.forEach((tr,ar)=>j.text(tr,M+et[0]+Qe,wt(We,ar))),Ar.forEach((tr,ar)=>j.text(tr,M+et[0]+et[1]+et[2]+Qe,wt(We,ar))),We+=zr})},Et=(ut,et)=>{const it=[95,55,H-150],Qe=5.8,st=ct;Ve(Qe+6),j.setFillColor(Re),j.setDrawColor(ee),j.setLineWidth(.2),j.rect(M,We-3.2,H,Qe,"FD"),j.setFont("helvetica","bold"),j.setFontSize(8.5),j.text("Total Amount In Words",M+ct,We+.8),j.text("Details",M+it[0]+ct,We+.8),j.text("Amount",M+it[0]+it[1]+ct,We+.8),j.line(M+it[0],We-3.2,M+it[0],We-3.2+Qe),j.line(M+it[0]+it[1],We-3.2,M+it[0]+it[1],We-3.2+Qe),We+=Qe,j.setFont("helvetica","normal"),j.setFontSize(8.5);const vt=et.map(It=>{const $t=j.splitTextToSize(It.detail,it[1]-st*2),Ht=j.splitTextToSize(It.value,it[2]-st*2),Qt=Math.max($t.length||1,Ht.length||1),Yt=Math.max(Qe,Qt*3.2+1.2);return{detailLines:$t,valueLines:Ht,rowHeight:Yt}}),wt=vt.reduce((It,$t)=>It+$t.rowHeight,0);Ve(wt+2),j.setDrawColor(ee),j.rect(M,We-3.2,it[0],wt,"S");const kt=j.splitTextToSize(ut,it[0]-st*3);j.setFont("helvetica","bold"),kt.forEach((It,$t)=>{j.text(It,M+st,We+.1+tt+$t*3.2)});let Lt=We;vt.forEach((It,$t)=>{$t%2===0&&(j.setFillColor(245,245,245),j.rect(M+it[0],Lt-3.2,it[1]+it[2],It.rowHeight,"F")),j.setDrawColor(ee),j.rect(M+it[0],Lt-3.2,it[1]+it[2],It.rowHeight,"S"),j.line(M+it[0]+it[1],Lt-3.2,M+it[0]+it[1],Lt-3.2+It.rowHeight),(et[$t]?.detail||"").trim().toLowerCase()==="grand total"?j.setFont("helvetica","bold"):j.setFont("helvetica","normal"),It.detailLines.forEach((Ht,Qt)=>{j.text(Ht,M+it[0]+st,Lt+.1+tt+Qt*3.2)}),(et[$t]?.detail||"").trim().toLowerCase()==="grand total"?j.setFont("helvetica","bold"):j.setFont("helvetica","normal"),It.valueLines.forEach((Ht,Qt)=>{j.text(Ht,M+it[0]+it[1]+st,Lt+.1+tt+Qt*3.2)}),Lt+=It.rowHeight}),We=Lt},St="NON-RETURNABLE GATE PASS",yn=c.issueDate?new Date(c.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),Cr=c.revDate?new Date(c.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");Ze(Ee),j.setFontSize(16),j.setFont("helvetica","bold"),j.setTextColor("#da2032"),j.text(St,x/2,We,{align:"center"}),We+=8,ze("Gate Pass Details",11),ot([["Doc. No",c.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002"],["Date",yn||"-"],["CONSIGNEE NAME",c.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",c.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",c.modeOfTransport||"By Road"],["Vehicle No.",c.vehicleNumber||"MH 40 CX 2839"],["Contact No.",c.contactNo||"7972800638"],["Contact person",c.contactPerson||"SAILESH"]],[]),We+=lt;const yr=["SR. NO.","PARTMARK","MATERIAL DISCRIPTION","MATERIAL SIZE","QUANTITY","ASSLY PART SL","APPROX. VALUE"],ur=[14,25,40,29,20,24,28],Wr=b.filter(ut=>ut.partMark.trim()||ut.materialDescription.trim()).map(ut=>[ut.serialNo?String(ut.serialNo):"",ut.partMark,ut.materialDescription,ut.materialSize,String(ut.quantity),ut.asslyPartSl,ut.approxValue]);Ve(15),j.setFillColor(Re),j.setDrawColor(ee),j.setLineWidth(.2),j.rect(M,We-3,H,5.8,"FD"),j.setFont("helvetica","bold"),j.setFontSize(8);let Dt=M;yr.forEach((ut,et)=>{j.line(Dt,We-3,Dt,We+2.8),j.text(ut,Dt+ct,We+.8),Dt+=ur[et]}),j.line(Dt,We-3,Dt,We+2.8),We+=5.8,j.setFont("helvetica","normal"),Wr.forEach((ut,et)=>{const it=ut.map((wt,kt)=>j.splitTextToSize(wt,ur[kt]-ct*2)),Qe=Math.max(...it.map(wt=>wt.length)),st=Math.max(5.8,Qe*3.2+1.2);Ve(st+2),et%2===0&&(j.setFillColor(245,245,245),j.rect(M,We-3,H,st,"F")),j.setDrawColor(ee),j.rect(M,We-3,H,st,"S");let vt=M;it.forEach((wt,kt)=>{j.line(vt,We-3,vt,We-3+st),kt===0?j.setFont("helvetica","bold"):j.setFont("helvetica","normal"),wt.forEach((Lt,It)=>{j.text(Lt,vt+ct,We+.1+tt+It*3.2)}),vt+=ur[kt]}),j.line(vt,We-3,vt,We-3+st),We+=st});const _r=b.reduce((ut,et)=>ut+(Number(et.quantity)||0),0),ir=me(),ln=["","","TOTAL","",String(_r),"",ir.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((ut,et)=>j.splitTextToSize(ut,ur[et]-ct*2)),mr=Math.max(...ln.map(ut=>ut.length)),Vt=Math.max(5.8,mr*3.2+1.2);Ve(Vt+2),j.setFillColor(245,245,245),j.rect(M,We-3,H,Vt,"F"),j.setDrawColor(ee),j.rect(M,We-3,H,Vt,"S");let fr=M;ln.forEach((ut,et)=>{j.line(fr,We-3,fr,We-3+Vt),j.setFont("helvetica",et===2||et===4||et===5||et===6?"bold":"normal"),ut.forEach((it,Qe)=>{j.text(it,fr+ct,We+.1+tt+Qe*3.2)}),fr+=ur[et]}),j.line(fr,We-3,fr,We-3+Vt),We+=Vt,We+=lt,ze("Remark",11);const ss=18;Ve(ss+5),j.setDrawColor(ee),j.rect(M,We-3,H,ss,"S"),j.setFont("helvetica","normal"),j.setFontSize(9),j.splitTextToSize(c.remarkText||"-",H-2*ct).forEach((ut,et)=>{j.text(ut,M+ct,We+.1+tt+et*3.2)}),We+=ss+lt,ze("Signature",11);const Js=[{label:"Store Keeper",data:c.storeKeeperSignature},{label:"Qc Engg.",data:c.qcEnggSignature},{label:"Store Incharge",data:c.storeInchargeSignature},{label:"Plant Head",data:c.plantHeadSignature}],ys=3,Kt=22,_n=(H-ys*3)/4;Ve(Kt+12),Js.forEach((ut,et)=>{const it=M+et*(_n+ys);if(j.rect(it,We-3,_n,Kt,"S"),ut.data)try{const Qe=j.getImageProperties(ut.data),st=Qe.width||1,vt=Qe.height||1,wt=_n-2,kt=Kt-7,Lt=st/vt,It=wt/kt;let $t=wt,Ht=kt;Lt>It?Ht=wt/Lt:$t=kt*Lt;const Qt=it+1+(wt-$t)/2,Yt=We-2.2+(kt-Ht)/2;j.addImage(ut.data,"PNG",Qt,Yt,$t,Ht)}catch{}j.setFont("helvetica","bold"),j.setFontSize(8),j.text(ut.label,it+_n/2,We+Kt-1.2,{align:"center"})}),We+=Kt;const qt=new Date,br=`${String(qt.getDate()).padStart(2,"0")}${String(qt.getMonth()+1).padStart(2,"0")}${qt.getFullYear()}`,hr=(E?.entityName||"RNS").split(" ").map(ut=>ut[0]).join(""),vr=`GATE_PASS_${br}_${hr}_${c.revision}.pdf`;j.save(vr),a({title:"PDF exported",description:`Gate Pass saved as ${vr}`})}catch(j){console.error("PDF export error:",j),a({title:"Export failed",description:"Failed to export gate pass PDF. Please try again.",variant:"destructive"})}};return!D||!S||!y?i.jsx(Es,{user:y,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Es,{user:y,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),"data-testid":"button-back",children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:D.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),D.location]})]})]}),i.jsxs(Oe,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>n(`/revira/projects/${e}/gate-pass`),"data-testid":"button-new-gate-pass",children:[i.jsx(Na,{className:"w-4 h-4 mr-2"}),"New Gate Pass"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:_?.revision||c.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),_&&i.jsx(Oe,{variant:"outline",size:"icon",onClick:()=>X.mutate(),disabled:X.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-gate-pass",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Oe,{onClick:I,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsxs(Oe,{variant:"outline",onClick:Ne,disabled:U.isPending||F.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-gate-pass",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),U.isPending||F.isPending?"Saving...":"Save Changes"]}),_&&T&&T.length>1&&i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this gate pass (${_.revision})?`)&&Y.mutate(_.id)},"data-testid":"button-delete-gate-pass",children:i.jsx(Pn,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsxs(Xn,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(Na,{className:"w-5 h-5"}),"GATE PASS DETAILS"]})}),i.jsxs(Ur,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),i.jsx(Je,{value:c.gatePassNumber,onChange:j=>f({...c,gatePassNumber:j.target.value}),"data-testid":"input-doc-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(Je,{type:"date",value:c.issueDate,onChange:j=>f({...c,issueDate:j.target.value}),"data-testid":"input-date"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),i.jsx(Je,{value:c.consigneeName,onChange:j=>f({...c,consigneeName:j.target.value}),"data-testid":"input-consignee-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),i.jsx(rs,{value:c.consigneeAddressText,onChange:j=>f({...c,consigneeAddressText:j.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),i.jsx(Je,{value:c.modeOfTransport,onChange:j=>f({...c,modeOfTransport:j.target.value}),"data-testid":"input-mode-of-transport"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(Je,{value:c.vehicleNumber,onChange:j=>f({...c,vehicleNumber:j.target.value}),"data-testid":"input-vehicle-number"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),i.jsx(Je,{value:c.contactNo,onChange:j=>f({...c,contactNo:j.target.value}),"data-testid":"input-contact-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),i.jsx(Je,{value:c.contactPerson,onChange:j=>f({...c,contactPerson:j.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),i.jsxs(qr,{children:[i.jsxs(Yn,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(Xn,{className:"text-lg text-slate-700",children:"GATE PASS ITEMS"}),i.jsxs(Oe,{size:"sm",onClick:be,"data-testid":"button-add-item",children:[i.jsx(xs,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(Ur,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"PARTMARK"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"ASSLY PART SL"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsxs("tbody",{children:[b.map(j=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.serialNo===0?"":j.serialNo,onChange:x=>se(j.id,"serialNo",parseInt(x.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.partMark,onChange:x=>se(j.id,"partMark",x.target.value),"data-testid":`input-partmark-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.materialDescription,onChange:x=>se(j.id,"materialDescription",x.target.value),"data-testid":`input-material-description-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.materialSize,onChange:x=>se(j.id,"materialSize",x.target.value),"data-testid":`input-material-size-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:j.quantity,onChange:x=>se(j.id,"quantity",parseFloat(x.target.value)||0),"data-testid":`input-qty-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.asslyPartSl,onChange:x=>se(j.id,"asslyPartSl",x.target.value),"data-testid":`input-assly-part-sl-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:j.approxValue,onChange:x=>se(j.id,"approxValue",x.target.value),"data-testid":`input-approx-value-${j.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>we(j.id),disabled:b.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${j.id}`,children:i.jsx(of,{className:"w-4 h-4"})})})]},j.id)),i.jsxs("tr",{className:"border-t bg-slate-50",children:[i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:b.reduce((j,x)=>j+(Number(x.quantity)||0),0)}),i.jsx("td",{className:"p-3 font-semibold"}),i.jsx("td",{className:"p-3 font-semibold",children:me().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3"})]})]})]})})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"REMARK"})}),i.jsx(Ur,{className:"p-6",children:i.jsx(rs,{value:c.remarkText,onChange:j=>f({...c,remarkText:j.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),i.jsx(Ur,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>Q("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:c.storeKeeperSignature?i.jsx("img",{src:c.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.storeKeeperSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>Q("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:c.qcEnggSignature?i.jsx("img",{src:c.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),i.jsx("span",{className:"text-xs text-slate-500",children:c.qcEnggSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>Q("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:c.storeInchargeSignature?i.jsx("img",{src:c.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.storeInchargeSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>Q("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:c.plantHeadSignature?i.jsx("img",{src:c.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),i.jsx(Sa,{open:o,onOpenChange:u,children:i.jsxs(aa,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsx(la,{children:"Gate Pass Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:T?.map(j=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${j.id===_?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{n(`/revira/projects/${e}/gate-pass/${j.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:j.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(j.createdAt).toLocaleDateString()})]}),T&&T.length>1&&i.jsx(Oe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:x=>{x.stopPropagation(),confirm(`Are you sure you want to delete version ${j.revision}?`)&&Y.mutate(j.id)},"data-testid":`button-delete-version-${j.id}`,children:i.jsx(Pn,{className:"w-4 h-4"})})]})},j.id))})]})})]})}function P5(){const t=Qu(),e=t.id,r=t.deliveryChallanId,[,n]=Ma(),{toast:a}=Ba(),[o,u]=L.useState(!1),[c,f]=L.useState({gatePassNumber:"",revision:"R-001",gatePassType:"Delivery Challan",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),p=x=>{const C=x.split(/\s+/).map(M=>M.trim()).filter(Boolean);return C.length?C.map(M=>M[0]).join("").toUpperCase():"PROJECT"},m=x=>{const C=String(x.getDate()).padStart(2,"0"),M=String(x.getMonth()+1).padStart(2,"0"),H=String(x.getFullYear()).slice(-2);return`${C}-${M}-${H}`},[b,A]=L.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:y}=Aa(),{data:D}=Ir({queryKey:["/revira/api/projects",e],queryFn:async()=>{const x=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch project");return x.json()},enabled:!!e}),{data:S}=Ir({queryKey:["/revira/api/clients",D?.clientId],queryFn:async()=>{const x=await fetch(`/revira/api/clients/${D?.clientId}`,{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch client");return x.json()},enabled:!!D?.clientId}),{data:E}=Ir({queryKey:["/revira/api/branding"],enabled:!!y}),{data:_}=Ir({queryKey:["/revira/api/delivery-challans",r],queryFn:async()=>{if(r){const C=await fetch(`/revira/api/delivery-challans/${r}`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch Delivery Challan");return C.json()}const x=await fetch(`/revira/api/projects/${e}/delivery-challan`,{credentials:"include"});if(!x.ok){if(x.status===404)return null;throw new Error("Failed to fetch Delivery Challan")}return x.json()},enabled:!!e}),{data:O}=Ir({queryKey:["/revira/api/delivery-challans",_?.id,"items"],queryFn:async()=>{const x=await fetch(`/revira/api/delivery-challans/${_?.id}/items`,{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch items");return x.json()},enabled:!!_?.id}),{data:T}=Ir({queryKey:["/revira/api/projects",e,"delivery-challan-versions"],queryFn:async()=>{const x=await fetch(`/revira/api/projects/${e}/delivery-challan-versions`,{credentials:"include"});return x.ok?x.json():[]},enabled:!!e}),z=x=>{if(!x)return{};try{const C=JSON.parse(x);return C&&typeof C=="object"?C:{}}catch{return{}}};L.useCallback(()=>c.orderReferenceType==="po"?c.purchaseOrderNo||"-":c.workOrderNo||"-",[c.orderReferenceType,c.workOrderNo,c.purchaseOrderNo]),L.useCallback(()=>{const x=[];return c.vehicleNo.trim()&&x.push(`Vehicle No.: ${c.vehicleNo.trim()}`),c.showDispatchLrNo&&x.push(`L.R. No.: ${c.dispatchLrNo||"-"}`),c.showDispatchPo&&x.push(`P.O.: ${c.dispatchPoNo||"-"}`),c.showDispatchGatePass&&x.push(`Delivery Challan: ${c.dispatchGatePass||"-"}`),x.length?x.join(" | "):"-"},[c.vehicleNo,c.showDispatchLrNo,c.dispatchLrNo,c.showDispatchPo,c.dispatchPoNo,c.showDispatchGatePass,c.dispatchGatePass]);const re=L.useCallback(()=>{const x={gatePassType:c.gatePassType,issueNo:c.issueNo,issueDate:c.issueDate,revNo:c.revNo,revDate:c.revDate,consigneeName:c.consigneeName,consigneeAddressText:c.consigneeAddressText,modeOfTransport:c.modeOfTransport,vehicleNumber:c.vehicleNumber,transportVehicle:c.transportVehicle,contactNo:c.contactNo,contactPerson:c.contactPerson,remarkText:c.remarkText,storeKeeperSignature:c.storeKeeperSignature,qcEnggSignature:c.qcEnggSignature,storeInchargeSignature:c.storeInchargeSignature,plantHeadSignature:c.plantHeadSignature,orderReferenceType:c.orderReferenceType,showWorkOrderNo:c.orderReferenceType==="wo",showPurchaseOrderNo:c.orderReferenceType==="po",purchaseOrderNo:c.purchaseOrderNo,vehicleNo:c.vehicleNo,showDispatchLrNo:c.showDispatchLrNo,showDispatchPo:c.showDispatchPo,showDispatchGatePass:c.showDispatchGatePass,dispatchLrNo:c.dispatchLrNo,dispatchPoNo:c.dispatchPoNo,dispatchGatePass:c.dispatchGatePass};return JSON.stringify(x)},[c]);L.useEffect(()=>{if(D&&S&&!_){const x=new Date,C=p(D.projectName),M=m(x);f(H=>({...H,gatePassNumber:`RNS/${C}/${M}/RNS-DC-002`,issueDate:x.toISOString().split("T")[0],revDate:x.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:S.name,registeredAddress:S.location,consigneeAddress:`${S.name}
${S.location}`,clientGstin:S.gstNo||""}))}},[D,S,_]),L.useEffect(()=>{if(_){const x=z(_.contentSections),C=ve=>(ve||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),M=x.orderReferenceType||(x.showPurchaseOrderNo?"po":"wo"),H=x.vehicleNo!==void 0||x.showDispatchLrNo!==void 0||x.showDispatchPo!==void 0||x.showDispatchGatePass!==void 0||x.dispatchLrNo!==void 0||x.dispatchPoNo!==void 0||x.dispatchGatePass!==void 0,ie=x.transportVehicle||_.dispatchDetails||"",oe=ie.includes("-")?ie.split("-").map(ve=>ve.trim()):[];f({gatePassNumber:_.deliveryChallanNumber,revision:_.revision,gatePassType:x.gatePassType||"Delivery Challan",issueNo:x.issueNo||"001",issueDate:x.issueDate||"",revNo:x.revNo||"00",revDate:x.revDate||"",consigneeName:x.consigneeName||_.organisationName||"",consigneeAddressText:x.consigneeAddressText||_.registeredAddress||"",modeOfTransport:x.modeOfTransport||oe[0]||"By Road",vehicleNumber:x.vehicleNumber||oe[1]||"",transportVehicle:x.transportVehicle||x.vehicleNo||_.dispatchDetails||"",contactNo:x.contactNo||"",contactPerson:x.contactPerson||"",remarkText:x.remarkText||"",storeKeeperSignature:x.storeKeeperSignature||"",qcEnggSignature:x.qcEnggSignature||"",storeInchargeSignature:x.storeInchargeSignature||"",plantHeadSignature:x.plantHeadSignature||"",organisationName:_.organisationName,registeredAddress:_.registeredAddress,consigneeAddress:_.consigneeAddress,clientGstin:_.clientGstin||"",workOrderNo:C(_.workOrderNo)||"NIL",orderReferenceType:M,purchaseOrderNo:x.purchaseOrderNo||(M==="po"?C(_.workOrderNo):""),dispatchDetails:_.dispatchDetails||"-",vehicleNo:x.vehicleNo||(!H&&_.dispatchDetails&&_.dispatchDetails!=="-"?_.dispatchDetails:""),showDispatchLrNo:x.showDispatchLrNo??!1,showDispatchPo:x.showDispatchPo??!1,showDispatchGatePass:x.showDispatchGatePass??!1,dispatchLrNo:x.dispatchLrNo||"",dispatchPoNo:x.dispatchPoNo||"",dispatchGatePass:x.dispatchGatePass||"",appliedTaxType:_.appliedTaxType||"igst",cgstRate:_.cgstRate||"9",sgstRate:_.sgstRate||"9",igstRate:_.igstRate||"18"})}},[_]),L.useEffect(()=>{O&&O.length>0&&A(O.map((x,C)=>({id:x.id,serialNo:x.serialNo>0?x.serialNo:C+1,partMark:x.hsnCode||"",materialDescription:x.description||"",materialSize:x.ratePerUnit&&x.ratePerUnit!=="0"?x.ratePerUnit:"-",quantity:Number(x.quantity)||0,asslyPartSl:x.unit||"",approxValue:x.amount&&x.amount!=="0"?x.amount:"-",remarks:x.remarks||""})))},[O]);const W=L.useCallback(()=>{const x=b.reduce((ve,Ce)=>{const Le=Number(String(Ce.approxValue).replace(/,/g,""));return ve+(Number.isFinite(Le)?Le:0)},0);let C=0,M=0,H=0;c.appliedTaxType==="cgst_sgst"?(C=x*(Number(c.cgstRate)/100),M=x*(Number(c.sgstRate)/100)):H=x*(Number(c.igstRate)/100);const ie=C+M+H,oe=x+ie;return{totalAmount:x,cgstAmount:C,sgstAmount:M,igstAmount:H,totalTax:ie,grandTotal:oe}},[b,c.appliedTaxType,c.cgstRate,c.sgstRate,c.igstRate])(),te=(x,C="0")=>{const M=Number(String(x??"").replace(/,/g,"").trim());return Number.isFinite(M)?String(M):C},Q=(x,C)=>{const M=x.materialDescription.trim()||x.partMark.trim()||"ITEM",H=String(x.materialSize??"").replace(/,/g,"").trim(),ie=/^-?\d+(\.\d+)?$/.test(H);return{serialNo:x.serialNo>0?x.serialNo:C+1,description:M,hsnCode:x.partMark.trim()||void 0,quantity:te(x.quantity),unit:x.asslyPartSl.trim()||"NOS",ratePerUnit:ie?te(H,"0"):"0",percentage:"0",amount:te(x.approxValue,"0"),remarks:x.remarks}},fe=(x,C)=>{const M=E?.[C]||"";f(H=>H[x]?{...H,[x]:""}:M?{...H,[x]:M}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),H))},U=L.useCallback(()=>{const x=C=>{const M=String(C??"").trim();return M!==""&&M!=="-"};return b.slice(0,5).filter(C=>x(C.materialDescription)||x(C.materialSize)||x(C.partMark)||x(C.asslyPartSl)||x(C.approxValue)||Number(C.quantity)>0)},[b]),F=kn({mutationFn:async()=>{const x=U(),M=await(await kr("POST","/revira/api/delivery-challans",{projectId:Number(e),deliveryChallanNumber:c.gatePassNumber,revision:c.revision,organisationName:c.consigneeName||"Company Name",registeredAddress:c.consigneeAddressText||"-",consigneeAddress:`${c.consigneeName||"Company Name"}
${c.consigneeAddressText||"-"}`.trim(),clientGstin:c.clientGstin,workOrderNo:c.issueNo||"-",dispatchDetails:`${c.modeOfTransport||"By Road"} - ${c.vehicleNumber||"-"}`,appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)})).json();for(let H=0;H<x.length;H++){const ie=x[H];await kr("POST",`/revira/api/delivery-challans/${M.id}/items`,Q(ie,H))}return M},onSuccess:x=>{Rr.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),n(`/revira/projects/${e}/delivery-challan/${x.id}`),a({title:"Delivery Challan saved",description:"The delivery challan has been created successfully."})},onError:x=>{a({title:"Error",description:x.message||"Failed to create delivery challan",variant:"destructive"})}}),X=kn({mutationFn:async()=>{const x=U();await kr("PUT",`/revira/api/delivery-challans/${_?.id}`,{deliveryChallanNumber:c.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002",revision:c.revision,organisationName:c.consigneeName||"Company Name",registeredAddress:c.consigneeAddressText||"-",consigneeAddress:`${c.consigneeName||"Company Name"}
${c.consigneeAddressText||"-"}`.trim(),clientGstin:c.clientGstin,workOrderNo:c.issueNo||"-",dispatchDetails:`${c.modeOfTransport||"By Road"} - ${c.vehicleNumber||"-"}`,appliedTaxType:c.appliedTaxType,cgstRate:c.cgstRate,sgstRate:c.sgstRate,igstRate:c.igstRate,contentSections:re(),totalAmount:String(W.totalAmount),totalTax:String(W.totalTax),grandTotal:String(W.grandTotal)});let C=O||[];if(!C.length){const M=await fetch(`/revira/api/delivery-challans/${_?.id}/items`,{credentials:"include"});M.ok&&(C=await M.json())}for(const M of C)await kr("DELETE",`/revira/api/delivery-challan-items/${M.id}`);for(let M=0;M<x.length;M++){const H=x[M];await kr("POST",`/revira/api/delivery-challans/${_?.id}/items`,Q(H,M))}},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),Rr.invalidateQueries({queryKey:["/revira/api/delivery-challans",_?.id,"items"]}),Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan updated",description:"The delivery challan has been updated successfully."})},onError:x=>{a({title:"Error",description:x.message||"Failed to update delivery challan",variant:"destructive"})}}),Y=kn({mutationFn:async()=>(await kr("POST",`/revira/api/delivery-challans/${_?.id}/duplicate`,{})).json(),onSuccess:x=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),n(`/revira/projects/${e}/delivery-challan/${x.id}`),a({title:"Delivery Challan duplicated",description:`Created new version: ${x.revision}`})},onError:x=>{a({title:"Error",description:x.message||"Failed to duplicate delivery challan",variant:"destructive"})}}),Ne=kn({mutationFn:async x=>{await kr("DELETE",`/revira/api/delivery-challans/${x}`,void 0)},onSuccess:()=>{if(Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan deleted",description:"The delivery challan version has been deleted."}),u(!1),T&&T.length>1){const x=T.filter(C=>C.id!==_?.id);x.length>0?n(`/revira/projects/${e}/delivery-challan/${x[0].id}`):n(`/revira/projects/${e}/delivery-challan`)}else n(`/revira/projects/${e}/delivery-challan`)},onError:x=>{a({title:"Error",description:x.message||"Failed to delete delivery challan",variant:"destructive"})}}),be=()=>{_?X.mutate():F.mutate()},we=()=>{const x=Math.max(...b.map(C=>C.id),0)+1;A([...b,{id:x,serialNo:b.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},se=x=>{if(b.length>1){const C=b.filter(M=>M.id!==x);A(C.map((M,H)=>({...M,serialNo:H+1})))}},me=(x,C,M)=>{A(H=>H.map(ie=>ie.id===x?{...ie,[C]:M}:ie))},I=()=>b.reduce((x,C)=>{const M=Number(String(C.approxValue||"").replace(/,/g,"").trim());return x+(Number.isFinite(M)?M:0)},0),j=async()=>{try{const x=new sr({orientation:"portrait",unit:"mm",format:"a4"}),C=210,M=297,H=15,ie=C-H*2,oe=35,ve=30,Ce=et=>et*.2646,Le=Ce(80),Ge=Ce(50),lt=Ce(80),tt=Ce(10),ct=Ce(3),ee=Ce(3),Re="#eeb7b7",We="#fff5f5";let Ee=oe+10,rt=1;const At=et=>et.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),Ct=et=>At(et),ue=et=>new Promise((it,Qe)=>{const st=new Image;st.crossOrigin="anonymous",st.onload=()=>{const vt=document.createElement("canvas");vt.width=st.width,vt.height=st.height,vt.getContext("2d")?.drawImage(st,0,0),it(vt.toDataURL("image/png"))},st.onerror=Qe,st.src=et});let he=null,Ie=null,Ze=null;try{E?.headerUrl&&(he=await ue(E.headerUrl)),E?.footerUrl&&(Ie=await ue(E.footerUrl)),E?.stampUrl&&(Ze=await ue(E.stampUrl))}catch(et){console.warn("Failed to load branding images:",et)}const Ve=et=>{he&&x.addImage(he,"PNG",0,0,C,oe),Ie&&x.addImage(Ie,"PNG",0,M-ve,C,ve),Ze&&x.addImage(Ze,"PNG",C-Ge-Le,M-lt-Le,Le,Le),x.setFontSize(8),x.setTextColor(128,128,128),x.text(`Page ${et}`,C/2,M-8,{align:"center"})},ze=et=>Ee+et>M-ve-10?(x.addPage(),rt++,Ve(rt),Ee=oe+10,!0):!1,ot=(et,it=12)=>{Ee+=4,ze(12),x.setFillColor("#d92134"),x.rect(H,Ee-3.5,4,5,"F"),x.setFont("helvetica","bold"),x.setFontSize(it),x.setTextColor("#1e3a5f"),x.text(et,H+7,Ee),Ee+=5.5},ft=(et,it,Qe=[])=>{const st=[38,57,38,57],vt=5.8,wt=ee,kt=Ce(3),Lt=Qt=>Qt-3,It=(Qt,Yt=0)=>Lt(Qt)+kt+2.5+Yt*3.2;ze(vt+4),x.setFont("helvetica","normal"),x.setFontSize(8.5);let $t=0;const Ht=Qt=>Qt.forEach(([Yt,Ar])=>{const wr=x.splitTextToSize(Yt,st[0]-wt*2),zr=x.splitTextToSize(Ar||"-",st[1]+st[2]+st[3]-wt*2),Pr=Math.max(wr.length||1,zr.length||1),tr=Math.max(vt,Pr*3.2+1.2);if(ze(tr+2),$t%2===0&&(x.setFillColor(245,245,245),x.rect(H,Lt(Ee),ie,tr,"F")),x.setDrawColor(Re),x.rect(H,Lt(Ee),ie,tr,"S"),x.line(H+st[0],Lt(Ee),H+st[0],Lt(Ee)+tr),x.setFont("helvetica","bold"),wr.forEach((ar,rr)=>{x.text(ar,H+wt,It(Ee,rr))}),Yt==="Dispatch Details"&&Ar){const ar=Ar.split(",").map(Us=>Us.trim()).filter(Boolean),rr=H+st[0]+wt,Nr=H+st[0]+st[1]+st[2]+st[3]-wt;let Or=rr,Xr=It(Ee,0);ar.forEach((Us,bn)=>{const ei=bn<ar.length-1?", ":"",Gn=Us.indexOf(" - "),Gr=Gn>-1?Us.slice(0,Gn):Us,Fn=Gn>-1?Us.slice(Gn):"",is=x.getTextWidth(Gr),bi=x.getTextWidth(Fn+ei);Or+is+bi>Nr&&(Or=rr,Xr+=3.2),x.setFont("helvetica","bold"),x.text(Gr,Or,Xr),Or+=is,x.setFont("helvetica","normal"),x.text(Fn+ei,Or,Xr),Or+=bi})}else x.setFont("helvetica","normal"),zr.forEach((ar,rr)=>{x.text(ar,H+st[0]+wt,It(Ee,rr))});Ee+=tr,$t+=1});Ht(et),it.forEach(Qt=>{const[Yt,Ar]=Qt,wr=x.splitTextToSize(Yt?.[0]||"",st[0]-wt*2),zr=x.splitTextToSize(Yt?.[1]||"-",st[1]-wt*2),Pr=x.splitTextToSize(Ar?.[0]||"",st[2]-wt*2),tr=x.splitTextToSize(Ar?.[1]||"",st[3]-wt*2),ar=Math.max(wr.length||1,zr.length||1,Pr.length||1,tr.length||1),rr=Math.max(vt,ar*3.2+1.2);ze(rr+2),$t%2===0&&(x.setFillColor(245,245,245),x.rect(H,Lt(Ee),ie,rr,"F")),x.setDrawColor(Re),x.rect(H,Lt(Ee),ie,rr,"S");let Nr=H;for(let Or=0;Or<3;Or++)Nr+=st[Or],x.line(Nr,Lt(Ee),Nr,Lt(Ee)+rr);x.setFont("helvetica","bold"),wr.forEach((Or,Xr)=>x.text(Or,H+wt,It(Ee,Xr))),Pr.forEach((Or,Xr)=>x.text(Or,H+st[0]+st[1]+wt,It(Ee,Xr))),x.setFont("helvetica","normal"),zr.forEach((Or,Xr)=>x.text(Or,H+st[0]+wt,It(Ee,Xr))),tr.forEach((Or,Xr)=>x.text(Or,H+st[0]+st[1]+st[2]+wt,It(Ee,Xr))),Ee+=rr,$t+=1}),Ht(Qe)},Et=et=>{const it=[32,75,32,51],Qe=5.8,st=ee,vt=Ce(3),wt=Lt=>Lt-3,kt=(Lt,It=0)=>wt(Lt)+vt+2.5+It*3.2;ze(Qe+4),x.setFont("helvetica","normal"),x.setFontSize(8.5),et.forEach((Lt,It)=>{const[$t,Ht]=Lt,Qt=x.splitTextToSize($t?.[0]||"",it[0]-st*2),Yt=x.splitTextToSize($t?.[1]||"-",it[1]-st*2),Ar=x.splitTextToSize(Ht?.[0]||"",it[2]-st*2),wr=x.splitTextToSize(Ht?.[1]||"",it[3]-st*2),zr=Math.max(Qt.length||1,Yt.length||1,Ar.length||1,wr.length||1),Pr=Math.max(Qe,zr*3.2+1.2);ze(Pr+2),It%2===0&&(x.setFillColor(245,245,245),x.rect(H,wt(Ee),ie,Pr,"F")),x.setDrawColor(Re),x.rect(H,wt(Ee),ie,Pr,"S");let tr=H;for(let ar=0;ar<3;ar++)tr+=it[ar],x.line(tr,wt(Ee),tr,wt(Ee)+Pr);x.setFont("helvetica","bold"),Qt.forEach((ar,rr)=>x.text(ar,H+st,kt(Ee,rr))),Ar.forEach((ar,rr)=>x.text(ar,H+it[0]+it[1]+st,kt(Ee,rr))),x.setFont("helvetica","normal"),Yt.forEach((ar,rr)=>x.text(ar,H+it[0]+st,kt(Ee,rr))),wr.forEach((ar,rr)=>x.text(ar,H+it[0]+it[1]+it[2]+st,kt(Ee,rr))),Ee+=Pr})},St=(et,it)=>{const Qe=[95,55,ie-150],st=5.8,vt=ee;ze(st+6),x.setFillColor(We),x.setDrawColor(Re),x.setLineWidth(.2),x.rect(H,Ee-3.2,ie,st,"FD"),x.setFont("helvetica","bold"),x.setFontSize(8.5),x.text("Total Amount In Words",H+ee,Ee+.8),x.text("Details",H+Qe[0]+ee,Ee+.8),x.text("Amount",H+Qe[0]+Qe[1]+ee,Ee+.8),x.line(H+Qe[0],Ee-3.2,H+Qe[0],Ee-3.2+st),x.line(H+Qe[0]+Qe[1],Ee-3.2,H+Qe[0]+Qe[1],Ee-3.2+st),Ee+=st,x.setFont("helvetica","normal"),x.setFontSize(8.5);const wt=it.map($t=>{const Ht=x.splitTextToSize($t.detail,Qe[1]-vt*2),Qt=x.splitTextToSize($t.value,Qe[2]-vt*2),Yt=Math.max(Ht.length||1,Qt.length||1),Ar=Math.max(st,Yt*3.2+1.2);return{detailLines:Ht,valueLines:Qt,rowHeight:Ar}}),kt=wt.reduce(($t,Ht)=>$t+Ht.rowHeight,0);ze(kt+2),x.setDrawColor(Re),x.rect(H,Ee-3.2,Qe[0],kt,"S");const Lt=x.splitTextToSize(et,Qe[0]-vt*3);x.setFont("helvetica","bold"),Lt.forEach(($t,Ht)=>{x.text($t,H+vt,Ee+.1+ct+Ht*3.2)});let It=Ee;wt.forEach(($t,Ht)=>{Ht%2===0&&(x.setFillColor(245,245,245),x.rect(H+Qe[0],It-3.2,Qe[1]+Qe[2],$t.rowHeight,"F")),x.setDrawColor(Re),x.rect(H+Qe[0],It-3.2,Qe[1]+Qe[2],$t.rowHeight,"S"),x.line(H+Qe[0]+Qe[1],It-3.2,H+Qe[0]+Qe[1],It-3.2+$t.rowHeight),(it[Ht]?.detail||"").trim().toLowerCase()==="grand total"?x.setFont("helvetica","bold"):x.setFont("helvetica","normal"),$t.detailLines.forEach((Qt,Yt)=>{x.text(Qt,H+Qe[0]+vt,It+.1+ct+Yt*3.2)}),(it[Ht]?.detail||"").trim().toLowerCase()==="grand total"?x.setFont("helvetica","bold"):x.setFont("helvetica","normal"),$t.valueLines.forEach((Qt,Yt)=>{x.text(Qt,H+Qe[0]+Qe[1]+vt,It+.1+ct+Yt*3.2)}),It+=$t.rowHeight}),Ee=It},yn="DELIVERY CHALLAN",Cr=c.issueDate?new Date(c.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),yr=c.revDate?new Date(c.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");Ve(rt),x.setFontSize(16),x.setFont("helvetica","bold"),x.setTextColor("#da2032"),x.text(yn,C/2,Ee,{align:"center"}),Ee+=8,ot("Delivery Challan Details",11),ft([["Doc. No",c.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002"],["Date",Cr||"-"],["CONSIGNEE NAME",c.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",c.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",c.modeOfTransport||"By Road"],["Vehicle No.",c.vehicleNumber||"MH 40 CX 2839"],["Contact No.",c.contactNo||"7972800638"],["Contact person",c.contactPerson||"SAILESH"]],[]),Ee+=tt;const ur=["SR. NO.","MATERIAL DISCRIPTION","MATERIAL SIZE","ITEM CODE","UNIT","QUANTITY","APPROX. VALUE"],Wr=[14,40,29,25,24,20,28],Dt=b.filter(et=>et.partMark.trim()||et.materialDescription.trim()).map(et=>[et.serialNo?String(et.serialNo):"",et.materialDescription,et.materialSize,et.partMark,et.asslyPartSl,String(et.quantity),et.approxValue]);ze(15),x.setFillColor(We),x.setDrawColor(Re),x.setLineWidth(.2),x.rect(H,Ee-3,ie,5.8,"FD"),x.setFont("helvetica","bold"),x.setFontSize(8);let _r=H;ur.forEach((et,it)=>{x.line(_r,Ee-3,_r,Ee+2.8),x.text(et,_r+ee,Ee+.8),_r+=Wr[it]}),x.line(_r,Ee-3,_r,Ee+2.8),Ee+=5.8,x.setFont("helvetica","normal"),Dt.forEach((et,it)=>{const Qe=et.map((kt,Lt)=>x.splitTextToSize(kt,Wr[Lt]-ee*2)),st=Math.max(...Qe.map(kt=>kt.length)),vt=Math.max(5.8,st*3.2+1.2);ze(vt+2),it%2===0&&(x.setFillColor(245,245,245),x.rect(H,Ee-3,ie,vt,"F")),x.setDrawColor(Re),x.rect(H,Ee-3,ie,vt,"S");let wt=H;Qe.forEach((kt,Lt)=>{x.line(wt,Ee-3,wt,Ee-3+vt),Lt===0?x.setFont("helvetica","bold"):x.setFont("helvetica","normal"),kt.forEach((It,$t)=>{x.text(It,wt+ee,Ee+.1+ct+$t*3.2)}),wt+=Wr[Lt]}),x.line(wt,Ee-3,wt,Ee-3+vt),Ee+=vt});const ir=b.reduce((et,it)=>et+(Number(it.quantity)||0),0),gr=I(),mr=["","","TOTAL","",String(ir),"",gr.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((et,it)=>x.splitTextToSize(et,Wr[it]-ee*2)),Vt=Math.max(...mr.map(et=>et.length)),fr=Math.max(5.8,Vt*3.2+1.2);ze(fr+2),x.setFillColor(245,245,245),x.rect(H,Ee-3,ie,fr,"F"),x.setDrawColor(Re),x.rect(H,Ee-3,ie,fr,"S");let ss=H;mr.forEach((et,it)=>{x.line(ss,Ee-3,ss,Ee-3+fr),x.setFont("helvetica",it===2||it===4||it===5||it===6?"bold":"normal"),et.forEach((Qe,st)=>{x.text(Qe,ss+ee,Ee+.1+ct+st*3.2)}),ss+=Wr[it]}),x.line(ss,Ee-3,ss,Ee-3+fr),Ee+=fr,Ee+=tt,ot("Remark",11);const En=18;ze(En+5),x.setDrawColor(Re),x.rect(H,Ee-3,ie,En,"S"),x.setFont("helvetica","normal"),x.setFontSize(9),x.splitTextToSize(c.remarkText||"-",ie-2*ee).forEach((et,it)=>{x.text(et,H+ee,Ee+.1+ct+it*3.2)}),Ee+=En+tt,ot("Signature",11);const ys=[{label:"Store Keeper",data:c.storeKeeperSignature},{label:"Qc Engg.",data:c.qcEnggSignature},{label:"Store Incharge",data:c.storeInchargeSignature},{label:"Plant Head",data:c.plantHeadSignature}],Kt=3,_n=22,qt=(ie-Kt*3)/4;ze(_n+12),ys.forEach((et,it)=>{const Qe=H+it*(qt+Kt);if(x.rect(Qe,Ee-3,qt,_n,"S"),et.data)try{const st=x.getImageProperties(et.data),vt=st.width||1,wt=st.height||1,kt=qt-2,Lt=_n-7,It=vt/wt,$t=kt/Lt;let Ht=kt,Qt=Lt;It>$t?Qt=kt/It:Ht=Lt*It;const Yt=Qe+1+(kt-Ht)/2,Ar=Ee-2.2+(Lt-Qt)/2;x.addImage(et.data,"PNG",Yt,Ar,Ht,Qt)}catch{}x.setFont("helvetica","bold"),x.setFontSize(8),x.text(et.label,Qe+qt/2,Ee+_n-1.2,{align:"center"})}),Ee+=_n;const br=new Date,hr=`${String(br.getDate()).padStart(2,"0")}${String(br.getMonth()+1).padStart(2,"0")}${br.getFullYear()}`,Pt=(E?.entityName||"RNS").split(" ").map(et=>et[0]).join(""),ut=`GATE_PASS_${hr}_${Pt}_${c.revision}.pdf`;x.save(ut),a({title:"PDF exported",description:`Delivery Challan saved as ${ut}`})}catch(x){console.error("PDF export error:",x),a({title:"Export failed",description:"Failed to export delivery challan PDF. Please try again.",variant:"destructive"})}};return!D||!S||!y?i.jsx(Es,{user:y,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Es,{user:y,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),"data-testid":"button-back",children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:D.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),D.location]})]})]}),i.jsxs(Oe,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>n(`/revira/projects/${e}/delivery-challan`),"data-testid":"button-new-delivery-challan",children:[i.jsx(Na,{className:"w-4 h-4 mr-2"}),"New Delivery Challan"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:_?.revision||c.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),_&&i.jsx(Oe,{variant:"outline",size:"icon",onClick:()=>Y.mutate(),disabled:Y.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-delivery-challan",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Oe,{onClick:j,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsxs(Oe,{variant:"outline",onClick:be,disabled:F.isPending||X.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-delivery-challan",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),F.isPending||X.isPending?"Saving...":"Save Changes"]}),_&&T&&T.length>1&&i.jsx(Oe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this Delivery Challan (${_.revision})?`)&&Ne.mutate(_.id)},"data-testid":"button-delete-delivery-challan",children:i.jsx(Pn,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsxs(Xn,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(Na,{className:"w-5 h-5"}),"Delivery Challan DETAILS"]})}),i.jsxs(Ur,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),i.jsx(Je,{value:c.gatePassNumber,onChange:x=>f({...c,gatePassNumber:x.target.value}),"data-testid":"input-doc-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(Je,{type:"date",value:c.issueDate,onChange:x=>f({...c,issueDate:x.target.value}),"data-testid":"input-date"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),i.jsx(Je,{value:c.consigneeName,onChange:x=>f({...c,consigneeName:x.target.value}),"data-testid":"input-consignee-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),i.jsx(rs,{value:c.consigneeAddressText,onChange:x=>f({...c,consigneeAddressText:x.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),i.jsx(Je,{value:c.modeOfTransport,onChange:x=>f({...c,modeOfTransport:x.target.value}),"data-testid":"input-mode-of-transport"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(Je,{value:c.vehicleNumber,onChange:x=>f({...c,vehicleNumber:x.target.value}),"data-testid":"input-vehicle-number"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),i.jsx(Je,{value:c.contactNo,onChange:x=>f({...c,contactNo:x.target.value}),"data-testid":"input-contact-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),i.jsx(Je,{value:c.contactPerson,onChange:x=>f({...c,contactPerson:x.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),i.jsxs(qr,{children:[i.jsxs(Yn,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(Xn,{className:"text-lg text-slate-700",children:"Delivery Challan ITEMS"}),i.jsxs(Oe,{size:"sm",onClick:we,"data-testid":"button-add-item",children:[i.jsx(xs,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(Ur,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"ITEM CODE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"UNIT"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsxs("tbody",{children:[b.map(x=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.serialNo===0?"":x.serialNo,onChange:C=>me(x.id,"serialNo",parseInt(C.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.materialDescription,onChange:C=>me(x.id,"materialDescription",C.target.value),"data-testid":`input-material-description-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.materialSize,onChange:C=>me(x.id,"materialSize",C.target.value),"data-testid":`input-material-size-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.partMark,onChange:C=>me(x.id,"partMark",C.target.value),"data-testid":`input-partmark-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.asslyPartSl,onChange:C=>me(x.id,"asslyPartSl",C.target.value),"data-testid":`input-assly-part-sl-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{type:"number",value:x.quantity,onChange:C=>me(x.id,"quantity",parseFloat(C.target.value)||0),"data-testid":`input-qty-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Je,{value:x.approxValue,onChange:C=>me(x.id,"approxValue",C.target.value),"data-testid":`input-approx-value-${x.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>se(x.id),disabled:b.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${x.id}`,children:i.jsx(of,{className:"w-4 h-4"})})})]},x.id)),i.jsxs("tr",{className:"border-t bg-slate-50",children:[i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:b.reduce((x,C)=>x+(Number(C.quantity)||0),0)}),i.jsx("td",{className:"p-3 font-semibold",children:I().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3"})]})]})]})})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"REMARK"})}),i.jsx(Ur,{className:"p-6",children:i.jsx(rs,{value:c.remarkText,onChange:x=>f({...c,remarkText:x.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{className:"bg-slate-100",children:i.jsx(Xn,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),i.jsx(Ur,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>fe("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:c.storeKeeperSignature?i.jsx("img",{src:c.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.storeKeeperSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>fe("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:c.qcEnggSignature?i.jsx("img",{src:c.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),i.jsx("span",{className:"text-xs text-slate-500",children:c.qcEnggSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>fe("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:c.storeInchargeSignature?i.jsx("img",{src:c.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.storeInchargeSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${c.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>fe("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:c.plantHeadSignature?i.jsx("img",{src:c.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),i.jsx("span",{className:"text-xs text-slate-500",children:c.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),i.jsx(Sa,{open:o,onOpenChange:u,children:i.jsxs(aa,{className:"max-w-md",children:[i.jsx(oa,{children:i.jsx(la,{children:"Delivery Challan Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:T?.map(x=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${x.id===_?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{n(`/revira/projects/${e}/delivery-challan/${x.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:x.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(x.createdAt).toLocaleDateString()})]}),T&&T.length>1&&i.jsx(Oe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:C=>{C.stopPropagation(),confirm(`Are you sure you want to delete version ${x.revision}?`)&&Ne.mutate(x.id)},"data-testid":`button-delete-version-${x.id}`,children:i.jsx(Pn,{className:"w-4 h-4"})})]})},x.id))})]})})]})}const Dv=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],k5=t=>Dv.find(e=>e.value===t)?.label||t;function r7(){const{id:t}=Qu(),e=Number(t),[,r]=Ma(),{data:n}=Aa(),{toast:a}=Ba(),[o,u]=L.useState(""),[c,f]=L.useState(!1),[p,m]=L.useState(!1),[b,A]=L.useState(null),[y,D]=L.useState(null),[S,E]=L.useState(null),[_,O]=L.useState({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""}),[T,z]=L.useState({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""}),re=(C,M)=>{if(C.size>5*1024*1024){a({title:"File too large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}const H=new FileReader;H.onloadend=()=>{M(typeof H.result=="string"?H.result:"")},H.readAsDataURL(C)},ae=C=>{const M=C.target.files?.[0];M&&re(M,H=>O(ie=>({...ie,attachmentUrl:H})))},W=C=>{const M=C.target.files?.[0];M&&re(M,H=>z(ie=>({...ie,attachmentUrl:H})))},te=C=>C?C.startsWith("data:")?"Open Attachment":C:"-",Q=async(C,M)=>{if(!(C.headers.get("content-type")||"").includes("application/json"))throw new Error(M);return C.json()},{data:fe,isLoading:U}=Ir({queryKey:["/revira/api/projects",e],queryFn:async()=>{const C=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch project");return C.json()},enabled:Number.isFinite(e)&&e>0}),{data:F}=Ir({queryKey:["/revira/api/clients",fe?.clientId],queryFn:async()=>{const C=await fetch(`/revira/api/clients/${fe?.clientId}`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch client");return C.json()},enabled:!!fe?.clientId}),{data:X}=Ir({queryKey:["/revira/api/projects",e,"ledger","budget"],queryFn:async()=>{const C=await fetch(`/revira/api/projects/${e}/ledger/budget`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch budget");return Q(C,"Ledger budget API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),{data:Y=[],isLoading:Ne}=Ir({queryKey:["/revira/api/projects",e,"ledger","entries"],queryFn:async()=>{const C=await fetch(`/revira/api/projects/${e}/ledger/entries`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch ledger entries");return Q(C,"Ledger entries API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),be=kn({mutationFn:async()=>{const C=Number(String(o).replace(/,/g,"").trim()),M=Number.isFinite(C)?C:0,H=await kr("PUT",`/revira/api/projects/${e}/ledger/budget`,{projectValue:String(M)});return Q(H,"Ledger budget API is unavailable. Please restart backend.")},onSuccess:C=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","budget"]}),u(String(Number(C?.projectValue||0))),a({title:"Budget saved",description:"Project budget updated successfully."})},onError:C=>{a({title:"Error",description:C.message||"Failed to save budget",variant:"destructive"})}}),we=kn({mutationFn:async({id:C,payload:M})=>{if(C){const ie=await kr("PUT",`/revira/api/ledger-entries/${C}`,M);await Q(ie,"Ledger update API is unavailable. Please restart backend.");return}const H=await kr("POST",`/revira/api/projects/${e}/ledger/entries`,M);await Q(H,"Ledger create API is unavailable. Please restart backend.")},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),f(!1),m(!1),A(null),D(null),a({title:"Entry saved",description:"Ledger entry saved in database."})},onError:C=>{a({title:"Error",description:C.message||"Failed to add entry",variant:"destructive"})}}),se=kn({mutationFn:async C=>{await kr("DELETE",`/revira/api/ledger-entries/${C}`)},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),E(null),a({title:"Entry deleted",description:"Ledger entry deleted successfully."})},onError:C=>{a({title:"Error",description:C.message||"Failed to delete entry",variant:"destructive"})}});L.useEffect(()=>{X&&X.projectValue!==void 0&&X.projectValue!==null&&u(String(Number(X.projectValue)))},[X?.projectValue]);const me=L.useMemo(()=>{const C=Y.filter(ie=>ie.entryType==="expense").reduce((ie,oe)=>ie+(Number(oe.amount)||0),0),M=Y.filter(ie=>ie.entryType==="receipt").reduce((ie,oe)=>ie+(Number(oe.amount)||0),0),H=Number(X?.projectValue||0);return{totalBudget:H,totalExpenses:C,totalReceived:M,balanceAmount:M-C,remainingBudget:H-C}},[Y,X]),I=L.useMemo(()=>{const C=[...Y].sort((ie,oe)=>{const ve=new Date(ie.entryDate).getTime(),Ce=new Date(oe.entryDate).getTime();return ve!==Ce?ve-Ce:ie.id-oe.id});let M=0;const H={};return C.forEach(ie=>{const oe=Number(ie.amount)||0;M+=ie.entryType==="expense"?-oe:oe,H[ie.id]=M}),[...Y].sort((ie,oe)=>{const ve=new Date(ie.entryDate).getTime(),Ce=new Date(oe.entryDate).getTime();return ve!==Ce?Ce-ve:oe.id-ie.id}).map(ie=>({...ie,runningBalance:H[ie.id]||0}))},[Y]),j=()=>{if(!_.entryDate||!_.category||!_.description||!_.amount){a({title:"Missing fields",description:"Fill date, category, description and amount.",variant:"destructive"});return}we.mutate({id:b||void 0,payload:{entryDate:_.entryDate,entryType:"expense",category:_.category,description:_.description,amount:_.amount,paymentMode:_.paymentMode,remarks:"",reference:_.reference,attachmentUrl:_.attachmentUrl}}),O({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},x=()=>{if(!T.entryDate||!T.amount){a({title:"Missing fields",description:"Fill received date and amount.",variant:"destructive"});return}we.mutate({id:y||void 0,payload:{entryDate:T.entryDate,entryType:"receipt",category:"Client Receipt",description:"Payment received from client",amount:T.amount,paymentMode:T.paymentMode,remarks:T.remarks,reference:T.reference,receivedAgainst:T.receivedAgainst,chequeNumber:T.paymentMode==="cheque"?T.chequeNumber:"",bankName:T.paymentMode==="cheque"?T.bankName:"",chequeDate:T.paymentMode==="cheque"?T.chequeDate:"",utrNumber:"",attachmentUrl:T.attachmentUrl}}),z({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})};return U?i.jsx(Es,{user:n,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):fe?i.jsx(Es,{user:n,children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6 px-1 sm:px-0",children:[i.jsx("div",{className:"flex items-start sm:items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Project Ledger"}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 break-words",children:[fe.projectName," ",F?`- ${F.name}`:""]})]})]})}),i.jsxs(qr,{className:"border-[#eeb7b7]",children:[i.jsx(Yn,{className:"bg-slate-50",children:i.jsx(Xn,{className:"text-[#d92134]",children:"Budget Initialization"})}),i.jsx(Ur,{className:"pt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Project Cost / Project Value"}),i.jsx(Je,{type:"number",value:o,onChange:C=>u(C.target.value),placeholder:X?.projectValue||"0.00","data-testid":"input-ledger-budget"})]}),i.jsx(Oe,{className:"w-full md:w-auto",onClick:()=>be.mutate(),disabled:be.isPending,"data-testid":"button-save-ledger-budget",children:be.isPending?"Saving...":"Save Budget"}),i.jsxs("div",{className:"text-sm text-slate-600 md:text-right",children:["Current Budget: ",i.jsxs("span",{className:"font-semibold",children:["Rs. ",Number(X?.projectValue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 gap-3",children:[i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Budget"}),i.jsxs("p",{className:"text-lg font-bold",children:["Rs. ",me.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Expenses"}),i.jsxs("p",{className:"text-lg font-bold text-red-600",children:["Rs. ",me.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Received"}),i.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs. ",me.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Balance (Received - Expenses)"}),i.jsxs("p",{className:`text-lg font-bold ${me.balanceAmount>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",me.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Remaining Budget"}),i.jsxs("p",{className:`text-lg font-bold ${me.remainingBudget>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",me.remainingBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{children:i.jsx(Xn,{className:"text-base",children:"Add Ledger Entries"})}),i.jsxs(Ur,{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs(Sa,{open:c,onOpenChange:f,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Oe,{className:"w-full sm:w-auto","data-testid":"button-open-expense-dialog",onClick:()=>{A(null),O({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},children:[i.jsx(d_,{className:"w-4 h-4 mr-2"})," Add Expense"]})}),i.jsxs(aa,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(oa,{children:i.jsx(la,{children:"Add Expense"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{type:"date",value:_.entryDate,onChange:C=>O({..._,entryDate:C.target.value})}),i.jsx(Je,{placeholder:"Expense category/type",value:_.category,onChange:C=>O({..._,category:C.target.value})})]}),i.jsx(rs,{placeholder:"Description / remarks",value:_.description,onChange:C=>O({..._,description:C.target.value})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{type:"number",placeholder:"Amount",value:_.amount,onChange:C=>O({..._,amount:C.target.value})}),i.jsxs(Pl,{value:_.paymentMode,onValueChange:C=>O({..._,paymentMode:C}),children:[i.jsx(Ko,{children:i.jsx(kl,{placeholder:"Mode of payment"})}),i.jsx(Qo,{children:Dv.map(C=>i.jsx(ia,{value:C.value,children:C.label},C.value))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{placeholder:"Reference / bill no.",value:_.reference,onChange:C=>O({..._,reference:C.target.value})}),i.jsx(Je,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:ae})]}),_.attachmentUrl?i.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,i.jsx(Oe,{onClick:j,disabled:we.isPending,className:"w-full","data-testid":"button-add-expense",children:we.isPending?"Saving...":b?"Update Expense":"Save Expense"})]})]})]}),i.jsxs(Sa,{open:p,onOpenChange:m,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Oe,{variant:"outline",className:"w-full sm:w-auto","data-testid":"button-open-receipt-dialog",onClick:()=>{D(null),z({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})},children:[i.jsx(f_,{className:"w-4 h-4 mr-2"})," Add Client Receipt"]})}),i.jsxs(aa,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(oa,{children:i.jsx(la,{children:"Add Client Receipt"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{type:"date",value:T.entryDate,onChange:C=>z({...T,entryDate:C.target.value})}),i.jsx(Je,{type:"number",placeholder:"Amount received",value:T.amount,onChange:C=>z({...T,amount:C.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{placeholder:"Received against (milestone/invoice/term)",value:T.receivedAgainst,onChange:C=>z({...T,receivedAgainst:C.target.value})}),i.jsxs(Pl,{value:T.paymentMode,onValueChange:C=>z({...T,paymentMode:C}),children:[i.jsx(Ko,{children:i.jsx(kl,{placeholder:"Mode of receipt"})}),i.jsx(Qo,{children:Dv.map(C=>i.jsx(ia,{value:C.value,children:C.label},C.value))})]})]}),T.paymentMode==="cheque"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx(Je,{placeholder:"Cheque number",value:T.chequeNumber,onChange:C=>z({...T,chequeNumber:C.target.value})}),i.jsx(Je,{placeholder:"Bank name",value:T.bankName,onChange:C=>z({...T,bankName:C.target.value})}),i.jsx(Je,{type:"date",value:T.chequeDate,onChange:C=>z({...T,chequeDate:C.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(Je,{placeholder:"Reference details",value:T.reference,onChange:C=>z({...T,reference:C.target.value})}),i.jsx(Je,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:W})]}),T.attachmentUrl?i.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,i.jsx(rs,{placeholder:"Remarks",value:T.remarks,onChange:C=>z({...T,remarks:C.target.value})}),i.jsx(Oe,{onClick:x,disabled:we.isPending,className:"w-full","data-testid":"button-add-receipt",children:we.isPending?"Saving...":y?"Update Receipt":"Save Receipt"})]})]})]})]})]}),i.jsxs(qr,{children:[i.jsx(Yn,{children:i.jsxs(Xn,{className:"text-base flex items-center gap-2",children:[i.jsx(sm,{className:"w-4 h-4"})," Ledger View"]})}),i.jsxs(Ur,{className:"p-0",children:[i.jsx("div",{className:"md:hidden p-3 space-y-3",children:Ne?i.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):I.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."}):I.map(C=>{const M=Number(C.amount)||0;return i.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-xs text-slate-500",children:C.entryDate}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`text-xs font-semibold ${C.entryType==="expense"?"text-red-600":"text-green-600"}`,children:C.entryType==="expense"?"Expense":"Receipt"}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{C.entryType==="expense"?(A(C.id),O({entryDate:C.entryDate,category:C.category,description:C.description,amount:String(Number(C.amount)||0),paymentMode:C.paymentMode,reference:C.reference||"",attachmentUrl:C.attachmentUrl||""}),f(!0)):(D(C.id),z({entryDate:C.entryDate,amount:String(Number(C.amount)||0),receivedAgainst:C.receivedAgainst||"",paymentMode:C.paymentMode,remarks:C.remarks||"",reference:C.reference||"",chequeNumber:C.chequeNumber||"",bankName:C.bankName||"",chequeDate:C.chequeDate||"",attachmentUrl:C.attachmentUrl||""}),m(!0))},children:i.jsx(qu,{className:"w-3 h-3"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600",onClick:()=>E(C),disabled:se.isPending,children:i.jsx(Pn,{className:"w-3 h-3"})})]})]}),i.jsx("div",{className:"text-sm font-medium text-slate-800",children:C.category}),i.jsx("div",{className:"text-xs text-slate-500",children:C.description}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Mode: ",k5(C.paymentMode)]}),C.receivedAgainst?i.jsxs("div",{className:"text-xs text-slate-600",children:["Against: ",C.receivedAgainst]}):null,i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:"Amount"}),i.jsxs("span",{className:C.entryType==="expense"?"text-red-600 font-semibold":"text-green-600 font-semibold",children:["Rs. ",M.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:"Running Balance"}),i.jsxs("span",{className:C.runningBalance>=0?"text-green-700 font-semibold":"text-red-700 font-semibold",children:["Rs. ",C.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(C.remarks||C.reference||C.utrNumber||C.chequeNumber||C.attachmentUrl)&&i.jsxs("div",{className:"pt-1 border-t text-xs text-slate-600 space-y-1",children:[C.remarks?i.jsxs("div",{children:["Remarks: ",C.remarks]}):null,C.reference?i.jsxs("div",{children:["Ref: ",C.reference]}):null,C.utrNumber?i.jsxs("div",{children:["UTR: ",C.utrNumber]}):null,C.chequeNumber?i.jsxs("div",{children:["Cheque: ",C.chequeNumber]}):null,C.attachmentUrl?i.jsxs("div",{children:["Attach:"," ",i.jsx("a",{className:"text-blue-600 underline",href:C.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(C.attachmentUrl)})]}):null]})]},C.id)})}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left",children:"Date"}),i.jsx("th",{className:"p-3 text-left",children:"Type"}),i.jsx("th",{className:"p-3 text-left",children:"Category / Particulars"}),i.jsx("th",{className:"p-3 text-left",children:"Payment Mode"}),i.jsx("th",{className:"p-3 text-right",children:"Debit"}),i.jsx("th",{className:"p-3 text-right",children:"Credit"}),i.jsx("th",{className:"p-3 text-left",children:"Remarks"}),i.jsx("th",{className:"p-3 text-left",children:"Reference / Attachment"}),i.jsx("th",{className:"p-3 text-right",children:"Running Balance"}),i.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{children:Ne?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"Loading..."})}):I.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"No ledger entries yet."})}):I.map(C=>{const M=Number(C.amount)||0;return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:C.entryDate}),i.jsx("td",{className:`p-3 font-semibold ${C.entryType==="expense"?"text-red-600":"text-green-600"}`,children:C.entryType==="expense"?"Expense":"Receipt"}),i.jsxs("td",{className:"p-3",children:[i.jsx("div",{className:"font-medium",children:C.category}),i.jsx("div",{className:"text-xs text-slate-500",children:C.description}),C.receivedAgainst?i.jsxs("div",{className:"text-xs text-slate-500",children:["Against: ",C.receivedAgainst]}):null]}),i.jsx("td",{className:"p-3",children:k5(C.paymentMode)}),i.jsx("td",{className:"p-3 text-right text-red-600",children:C.entryType==="expense"?M.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),i.jsx("td",{className:"p-3 text-right text-green-600",children:C.entryType==="receipt"?M.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),i.jsx("td",{className:"p-3",children:C.remarks||"-"}),i.jsxs("td",{className:"p-3",children:[i.jsx("div",{children:C.reference||"-"}),C.utrNumber?i.jsxs("div",{className:"text-xs text-slate-500",children:["UTR: ",C.utrNumber]}):null,C.chequeNumber?i.jsxs("div",{className:"text-xs text-slate-500",children:["Cheque: ",C.chequeNumber]}):null,C.attachmentUrl?i.jsxs("div",{className:"text-xs text-slate-500",children:["Attach:"," ",i.jsx("a",{className:"text-blue-600 underline",href:C.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(C.attachmentUrl)})]}):null]}),i.jsx("td",{className:`p-3 text-right font-semibold ${C.runningBalance>=0?"text-green-700":"text-red-700"}`,children:C.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{C.entryType==="expense"?(A(C.id),O({entryDate:C.entryDate,category:C.category,description:C.description,amount:String(Number(C.amount)||0),paymentMode:C.paymentMode,reference:C.reference||"",attachmentUrl:C.attachmentUrl||""}),f(!0)):(D(C.id),z({entryDate:C.entryDate,amount:String(Number(C.amount)||0),receivedAgainst:C.receivedAgainst||"",paymentMode:C.paymentMode,remarks:C.remarks||"",reference:C.reference||"",chequeNumber:C.chequeNumber||"",bankName:C.bankName||"",chequeDate:C.chequeDate||"",attachmentUrl:C.attachmentUrl||""}),m(!0))},children:i.jsx(qu,{className:"w-3.5 h-3.5"})}),i.jsx(Oe,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-600",onClick:()=>E(C),disabled:se.isPending,children:i.jsx(Pn,{className:"w-3.5 h-3.5"})})]})})]},C.id)})})]})}),i.jsxs("div",{className:"border-t bg-slate-50 p-3 text-sm flex flex-wrap gap-4",children:[i.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[i.jsx(p_,{className:"w-4 h-4"})," Total Budget: Rs. ",me.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"font-semibold text-red-600",children:["Total Expenses: Rs. ",me.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"font-semibold text-green-600",children:["Total Received: Rs. ",me.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:`font-semibold ${me.balanceAmount>=0?"text-green-700":"text-red-700"}`,children:[i.jsx(o_,{className:"w-4 h-4 inline mr-1"})," Balance: Rs. ",me.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),i.jsx(Sa,{open:!!S,onOpenChange:C=>!C&&E(null),children:i.jsxs(aa,{className:"sm:max-w-md",children:[i.jsxs(oa,{children:[i.jsx(la,{children:"Delete Ledger Entry?"}),i.jsx(ef,{children:S?`Are you sure you want to delete this ${S.entryType} entry dated ${S.entryDate}? This action cannot be undone.`:"This action cannot be undone."})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oe,{type:"button",variant:"outline",autoFocus:!0,onClick:()=>E(null),disabled:se.isPending,"data-testid":"button-cancel-delete-ledger-entry",children:"Cancel"}),i.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>S&&se.mutate(S.id),disabled:se.isPending,"data-testid":"button-confirm-delete-ledger-entry",children:se.isPending?"Deleting...":"Delete"})]})]})})]})}):i.jsx(Es,{user:n,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),i.jsx(Oe,{onClick:()=>r("/projects"),className:"mt-4",children:"Back to Projects"})]})})}const n7=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],Mp=t=>Number(t||0)||0;function s7(){const{id:t}=Qu(),e=Number(t),[,r]=Ma(),{data:n}=Aa(),{toast:a}=Ba(),[o,u]=L.useState(!1),[c,f]=L.useState({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),{data:p,isLoading:m}=Ir({queryKey:["/revira/api/clients",e],queryFn:async()=>{const W=await fetch(`/revira/api/clients/${e}`,{credentials:"include"});if(!W.ok)throw new Error("Failed to load client");return W.json()},enabled:Number.isFinite(e)&&e>0}),{data:b=[],isLoading:A}=Ir({queryKey:["/revira/api/client-ledger/projects",e],queryFn:async()=>{const W=await fetch("/revira/api/projects",{credentials:"include"});if(!W.ok)throw new Error("Failed to load projects");return(await W.json()).filter(Q=>Q.clientId===e)},enabled:Number.isFinite(e)&&e>0}),{data:y=[],isLoading:D}=Ir({queryKey:["/revira/api/client-ledger/invoices",e],queryFn:async()=>{const W=await fetch("/revira/api/invoices",{credentials:"include"});if(!W.ok)throw new Error("Failed to load invoices");const te=await W.json(),Q=new Set(b.map(fe=>fe.id));return te.filter(fe=>Q.has(fe.projectId))},enabled:b.length>0}),{data:S=[],isLoading:E}=Ir({queryKey:["/revira/api/client-ledger/receipts",e,b.map(W=>W.id).join(",")],queryFn:async()=>(await Promise.all(b.map(async te=>{const Q=await fetch(`/revira/api/projects/${te.id}/ledger/entries`,{credentials:"include"});return Q.ok?(await Q.json()).filter(U=>U.entryType==="receipt"):[]}))).flat(),enabled:b.length>0}),_=kn({mutationFn:async()=>{if(!c.projectId)throw new Error("Select a project");if(!c.entryDate||!c.amount)throw new Error("Date and amount are required");const W={entryDate:c.entryDate,entryType:"receipt",category:"Client Receipt",description:"Amount received from client",amount:c.amount,paymentMode:c.paymentMode,remarks:c.remarks,reference:c.reference,receivedAgainst:c.receivedAgainst,chequeNumber:"",bankName:"",chequeDate:"",utrNumber:"",attachmentUrl:""};await kr("POST",`/revira/api/projects/${c.projectId}/ledger/entries`,W)},onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/client-ledger/receipts",e]}),u(!1),f({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),a({title:"Saved",description:"Received amount has been added."})},onError:W=>{a({title:"Error",description:W.message||"Failed to save",variant:"destructive"})}}),O=L.useMemo(()=>{const W=new Map;return b.forEach(te=>W.set(te.id,te)),W},[b]),T=L.useMemo(()=>b.map(W=>{const te=y.filter(fe=>fe.projectId===W.id).reduce((fe,U)=>fe+Mp(U.grandTotal),0),Q=S.filter(fe=>fe.projectId===W.id).reduce((fe,U)=>fe+Mp(U.amount),0);return{projectId:W.id,projectName:W.projectName,debit:te,credit:Q,balance:te-Q}}),[b,y,S]),z=L.useMemo(()=>{const W=T.reduce((Q,fe)=>Q+fe.debit,0),te=T.reduce((Q,fe)=>Q+fe.credit,0);return{debit:W,credit:te,balance:W-te}},[T]),re=L.useMemo(()=>{const W=y.map(Q=>({date:new Date(Q.createdAt),dateText:new Date(Q.createdAt).toLocaleDateString("en-GB"),particulars:`Invoice ${Q.invoiceNumber} - ${O.get(Q.projectId)?.projectName||"Project"}`,vchType:"Sales",vchNo:Q.invoiceNumber||String(Q.id),debit:Mp(Q.grandTotal),credit:0})),te=S.map(Q=>({date:new Date(Q.entryDate),dateText:new Date(Q.entryDate).toLocaleDateString("en-GB"),particulars:`Receipt - ${O.get(Q.projectId)?.projectName||"Project"}`,vchType:"Receipt",vchNo:Q.reference||String(Q.id),debit:0,credit:Mp(Q.amount)}));return[...W,...te].sort((Q,fe)=>Q.date.getTime()-fe.date.getTime())},[y,S,O]),ae=()=>{const W=new sr({orientation:"portrait",unit:"mm",format:"a4"}),te=12,fe=210-te*2;let U=15;W.setFont("helvetica","bold"),W.setFontSize(14),W.text(`Client Ledger - ${p?.name||"Client"}`,te,U),U+=7,W.setFont("helvetica","normal"),W.setFontSize(10),W.text(`Date: ${new Date().toLocaleDateString("en-GB")}`,te,U),U+=7;const F=[{key:"date",label:"Date",width:24},{key:"part",label:"Particulars",width:68},{key:"type",label:"Vch Type",width:24},{key:"no",label:"Vch No.",width:26},{key:"debit",label:"Debit",width:24},{key:"credit",label:"Credit",width:24}],X=()=>{W.setFont("helvetica","bold"),W.setFontSize(9);let be=te;F.forEach(we=>{W.text(we.label,be+1,U),be+=we.width}),U+=2,W.line(te,U,te+fe,U),U+=4};X(),W.setFont("helvetica","normal"),W.setFontSize(9),re.forEach(be=>{U>276&&(W.addPage(),U=15,X(),W.setFont("helvetica","normal"));let we=te;[be.dateText,be.particulars,be.vchType,be.vchNo,be.debit>0?be.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"",be.credit>0?be.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):""].forEach((me,I)=>{const j=F[I],x=j.key==="debit"||j.key==="credit";W.text(String(me),x?we+j.width-1:we+1,U,{align:x?"right":"left"}),we+=j.width}),U+=5}),U+=2,W.line(te+fe-48,U,te+fe,U),U+=5,W.setFont("helvetica","bold"),W.text(`Total Debit: ${z.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+fe-2,U,{align:"right"}),U+=5,W.text(`Total Credit: ${z.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+fe-2,U,{align:"right"}),U+=5;const Y=z.balance>=0?"Closing Balance (Dr)":"Closing Balance (Cr)";W.text(`${Y}: ${Math.abs(z.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+fe-2,U,{align:"right"});const Ne=`ClientLedger_${p?.name?.replace(/\s+/g,"_")||"Client"}_${new Date().toISOString().slice(0,10)}.pdf`;W.save(Ne)};return m||A?i.jsx(Es,{user:n,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):p?i.jsx(Es,{user:n,children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oe,{variant:"ghost",size:"icon",onClick:()=>r("/revira/clients"),children:i.jsx(sf,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[i.jsx(sm,{className:"h-6 w-6 text-[#d92134]"}),"Client Ledger"]}),i.jsx("p",{className:"text-sm text-slate-500",children:p.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Sa,{open:o,onOpenChange:u,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Oe,{className:"bg-[#d92134] hover:bg-[#b91c2c]","data-testid":"button-add-client-receipt",children:[i.jsx(xs,{className:"h-4 w-4 mr-2"}),"Add Received Amount"]})}),i.jsxs(aa,{className:"sm:max-w-xl",children:[i.jsx(oa,{children:i.jsx(la,{children:"Add Received Amount"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(Pl,{value:c.projectId,onValueChange:W=>f(te=>({...te,projectId:W})),children:[i.jsx(Ko,{children:i.jsx(kl,{placeholder:"Select project"})}),i.jsx(Qo,{children:b.map(W=>i.jsx(ia,{value:String(W.id),children:W.projectName},W.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Je,{type:"date",value:c.entryDate,onChange:W=>f(te=>({...te,entryDate:W.target.value}))}),i.jsx(Je,{type:"number",placeholder:"Amount",value:c.amount,onChange:W=>f(te=>({...te,amount:W.target.value}))})]}),i.jsxs(Pl,{value:c.paymentMode,onValueChange:W=>f(te=>({...te,paymentMode:W})),children:[i.jsx(Ko,{children:i.jsx(kl,{placeholder:"Payment mode"})}),i.jsx(Qo,{children:n7.map(W=>i.jsx(ia,{value:W.value,children:W.label},W.value))})]}),i.jsx(Je,{placeholder:"Received against",value:c.receivedAgainst,onChange:W=>f(te=>({...te,receivedAgainst:W.target.value}))}),i.jsx(Je,{placeholder:"Reference / voucher no.",value:c.reference,onChange:W=>f(te=>({...te,reference:W.target.value}))}),i.jsx(rs,{placeholder:"Remarks",value:c.remarks,onChange:W=>f(te=>({...te,remarks:W.target.value}))}),i.jsx(Oe,{onClick:()=>_.mutate(),className:"w-full",disabled:_.isPending,children:_.isPending?"Saving...":"Save Receipt"})]})]})]}),i.jsxs(Oe,{variant:"outline",onClick:ae,"data-testid":"button-export-client-ledger-pdf",children:[i.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Debit (Invoices)"}),i.jsxs("p",{className:"text-xl font-bold text-red-600",children:["Rs. ",z.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Credit (Received)"}),i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",z.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(qr,{children:i.jsxs(Ur,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Closing Balance"}),i.jsxs("p",{className:`text-xl font-bold ${z.balance>=0?"text-red-700":"text-green-700"}`,children:["Rs. ",Math.abs(z.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",z.balance>=0?"Dr":"Cr"]})]})})]}),i.jsxs(qr,{children:[i.jsx(Yn,{children:i.jsx(Xn,{children:"Project-wise Ledger Summary"})}),i.jsx(Ur,{className:"p-0 overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left",children:"Project"}),i.jsx("th",{className:"p-3 text-right",children:"Debit (Invoice)"}),i.jsx("th",{className:"p-3 text-right",children:"Credit (Received)"}),i.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),i.jsx("tbody",{children:D||E?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"Loading..."})}):T.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"No projects found for this client."})}):T.map(W=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:W.projectName}),i.jsx("td",{className:"p-3 text-right text-red-600",children:W.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3 text-right text-green-600",children:W.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsxs("td",{className:`p-3 text-right font-semibold ${W.balance>=0?"text-red-700":"text-green-700"}`,children:[Math.abs(W.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",W.balance>=0?"Dr":"Cr"]})]},W.projectId))})]})})]})]})}):i.jsx(Es,{user:n,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Client not found"}),i.jsx(Oe,{onClick:()=>r("/revira/clients"),className:"mt-4",children:"Back to Clients"})]})})}const i7=uE.extend({logoUrl:B.string().min(1,"Logo URL is required").max(5e5,"Logo data too large"),headerUrl:B.string().min(1,"Header URL is required").max(5e5,"Header data too large"),footerUrl:B.string().min(1,"Footer URL is required").max(5e5,"Footer data too large"),stampUrl:B.string().min(1,"Stamp URL is required").max(5e5,"Stamp data too large"),storeKeeperSignUrl:B.string().max(5e5,"Store Keeper signature data too large"),qcEnggSignUrl:B.string().max(5e5,"Qc Engg. signature data too large"),storeInchargeSignUrl:B.string().max(5e5,"Store Incharge signature data too large"),plantHeadSignUrl:B.string().max(5e5,"Plant Head signature data too large"),primaryColor:B.string().min(4,"Primary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),secondaryColor:B.string().min(4,"Secondary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),email:B.string().email("Valid email is required")});function a7(){const{toast:t}=Ba(),{data:e}=Aa(),r=L.useRef(null),n=df({resolver:ff(i7),defaultValues:{logoUrl:"https://reviranexgen.com/assets/logo-with-name.png",headerUrl:"https://reviranexgen.com/assets/header.jpg",footerUrl:"https://reviranexgen.com/assets/footer.jpg",stampUrl:"https://reviranexgen.com/assets/stamp.png",storeKeeperSignUrl:"",qcEnggSignUrl:"",storeInchargeSignUrl:"",plantHeadSignUrl:"",primaryColor:"#da2032",secondaryColor:"#2f3591",entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",companyGstin:"07AAPCR3026H1ZA",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:a,isLoading:o}=Ir({queryKey:["/revira/api/branding"]});L.useEffect(()=>{a&&n.reset({logoUrl:a.logoUrl,headerUrl:a.headerUrl,footerUrl:a.footerUrl,stampUrl:a.stampUrl,storeKeeperSignUrl:a.storeKeeperSignUrl||"",qcEnggSignUrl:a.qcEnggSignUrl||"",storeInchargeSignUrl:a.storeInchargeSignUrl||"",plantHeadSignUrl:a.plantHeadSignUrl||"",primaryColor:a.primaryColor,secondaryColor:a.secondaryColor,entityName:a.entityName,cin:a.cin,companyGstin:a.companyGstin,website:a.website,email:a.email,headOfficeAddress:a.headOfficeAddress,workshopAddress:a.workshopAddress})},[a,n]);const u=kn({mutationFn:async T=>(await kr("PUT","/revira/api/branding",T)).json(),onSuccess:T=>{n.reset({logoUrl:T.logoUrl,headerUrl:T.headerUrl,footerUrl:T.footerUrl,stampUrl:T.stampUrl,storeKeeperSignUrl:T.storeKeeperSignUrl||"",qcEnggSignUrl:T.qcEnggSignUrl||"",storeInchargeSignUrl:T.storeInchargeSignUrl||"",plantHeadSignUrl:T.plantHeadSignUrl||"",primaryColor:T.primaryColor,secondaryColor:T.secondaryColor,entityName:T.entityName,cin:T.cin,companyGstin:T.companyGstin,website:T.website,email:T.email,headOfficeAddress:T.headOfficeAddress,workshopAddress:T.workshopAddress}),Rr.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Branding updated",description:"Your branding settings have been saved successfully."})},onError:T=>{t({title:"Error",description:T.message||"Failed to update branding",variant:"destructive"})}}),c=T=>{u.mutate(T)};if(o)return i.jsx(Es,{user:e,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const f=n.watch("logoUrl"),p=n.watch("headerUrl"),m=n.watch("footerUrl"),b=n.watch("stampUrl"),A=n.watch("storeKeeperSignUrl"),y=n.watch("qcEnggSignUrl"),D=n.watch("storeInchargeSignUrl"),S=n.watch("plantHeadSignUrl"),E=n.watch("primaryColor"),_=n.watch("secondaryColor"),O=T=>z=>{const re=z.target.files?.[0];if(re){if(re.size>500*1024){t({title:"File too large",description:"Please upload an image smaller than 500KB",variant:"destructive"});return}const ae=new FileReader;ae.onloadend=()=>{const W=ae.result;n.setValue(T,W,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},ae.readAsDataURL(re)}};return i.jsx(Es,{user:e,children:i.jsx(hf,{...n,children:i.jsxs("form",{onSubmit:n.handleSubmit(c),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg",children:i.jsx(tv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Branding"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your company branding and identity"})]})]}),i.jsxs(Oe,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-primary to-primary/90","data-testid":"button-save-branding",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),u.isPending?"Saving...":"Save Changes"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(qr,{children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(px,{className:"w-5 h-5"}),"Company Logo"]}),i.jsx(Kc,{children:"Upload or provide a URL for your company logo (max 500KB)"})]}),i.jsx(Ur,{className:"space-y-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-full max-w-xs h-32 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:f?i.jsx("img",{src:f,alt:"Company Logo",className:"max-h-full max-w-full object-contain p-2","data-testid":"img-logo-preview"}):i.jsxs("div",{className:"text-slate-400 text-center",children:[i.jsx(px,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})}),i.jsxs("div",{className:"w-full space-y-3",children:[i.jsx(an,{control:n.control,name:"logoUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Logo URL"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"https://example.com/logo.png","data-testid":"input-logo-url"})}),i.jsx(nn,{})]})}),i.jsx("div",{className:"text-center text-sm text-slate-500",children:"or"}),i.jsx("input",{type:"file",ref:r,onChange:O("logoUrl"),accept:"image/*",className:"hidden","data-testid":"input-logo-file"}),i.jsxs(Oe,{type:"button",variant:"outline",className:"w-full",onClick:()=>r.current?.click(),"data-testid":"button-upload-logo",children:[i.jsx(zc,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]})]})})]}),i.jsxs(qr,{children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(tv,{className:"w-5 h-5"}),"Brand Colors"]}),i.jsx(Kc,{children:"Set your primary and secondary brand colors"})]}),i.jsx(Ur,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(an,{control:n.control,name:"primaryColor",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Primary Color"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:T.value,onChange:T.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-primary-color"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"#da2032",className:"flex-1","data-testid":"input-primary-color-text"})})]}),i.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:E}}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"secondaryColor",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Secondary Color"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:T.value,onChange:T.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-secondary-color"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"#2f3591",className:"flex-1","data-testid":"input-secondary-color-text"})})]}),i.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:_}}),i.jsx(nn,{})]})})]})})]}),i.jsxs(qr,{className:"lg:col-span-2",children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5"}),"Document Assets"]}),i.jsx(Kc,{children:"Header, footer, and stamp images for documents (max 500KB each)"})]}),i.jsx(Ur,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:p?i.jsx("img",{src:p,alt:"Header",className:"max-h-full max-w-full object-contain","data-testid":"img-header-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No header"]})}),i.jsx(an,{control:n.control,name:"headerUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Header Image"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"https://example.com/header.jpg","data-testid":"input-header-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"header-file",onChange:O("headerUrl"),accept:"image/*",className:"hidden","data-testid":"input-header-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("header-file")?.click(),"data-testid":"button-upload-header",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Header"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:m?i.jsx("img",{src:m,alt:"Footer",className:"max-h-full max-w-full object-contain","data-testid":"img-footer-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No footer"]})}),i.jsx(an,{control:n.control,name:"footerUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Footer Image"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"https://example.com/footer.jpg","data-testid":"input-footer-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"footer-file",onChange:O("footerUrl"),accept:"image/*",className:"hidden","data-testid":"input-footer-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("footer-file")?.click(),"data-testid":"button-upload-footer",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Footer"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:b?i.jsx("img",{src:b,alt:"Stamp & Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-stamp-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(u_,{className:"w-6 h-6 mx-auto mb-1"}),"No stamp"]})}),i.jsx(an,{control:n.control,name:"stampUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Company Stamp & Signature"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"https://example.com/stamp.png","data-testid":"input-stamp-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"stamp-file",onChange:O("stampUrl"),accept:"image/*",className:"hidden","data-testid":"input-stamp-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("stamp-file")?.click(),"data-testid":"button-upload-stamp",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Stamp"]})]})]})})]}),i.jsxs(qr,{className:"lg:col-span-2",children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5"}),"Signatures"]}),i.jsx(Kc,{children:"Upload signature images for Gate Pass roles (max 500KB each)"})]}),i.jsx(Ur,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:A?i.jsx("img",{src:A,alt:"Store Keeper Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-keeper-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(an,{control:n.control,name:"storeKeeperSignUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Store Keeper"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"Signature URL","data-testid":"input-store-keeper-sign-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"store-keeper-sign-file",onChange:O("storeKeeperSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-keeper-sign-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-keeper-sign-file")?.click(),"data-testid":"button-upload-store-keeper-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:y?i.jsx("img",{src:y,alt:"Qc Engg. Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-qc-engg-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(an,{control:n.control,name:"qcEnggSignUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Qc Engg."}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"Signature URL","data-testid":"input-qc-engg-sign-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"qc-engg-sign-file",onChange:O("qcEnggSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-qc-engg-sign-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("qc-engg-sign-file")?.click(),"data-testid":"button-upload-qc-engg-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:D?i.jsx("img",{src:D,alt:"Store Incharge Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-incharge-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(an,{control:n.control,name:"storeInchargeSignUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Store Incharge"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"Signature URL","data-testid":"input-store-incharge-sign-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"store-incharge-sign-file",onChange:O("storeInchargeSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-incharge-sign-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-incharge-sign-file")?.click(),"data-testid":"button-upload-store-incharge-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:S?i.jsx("img",{src:S,alt:"Plant Head Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-plant-head-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(an,{control:n.control,name:"plantHeadSignUrl",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Plant Head"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"Signature URL","data-testid":"input-plant-head-sign-url"})}),i.jsx(nn,{})]})}),i.jsx("input",{type:"file",id:"plant-head-sign-file",onChange:O("plantHeadSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-plant-head-sign-file"}),i.jsxs(Oe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("plant-head-sign-file")?.click(),"data-testid":"button-upload-plant-head-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]})]})})]}),i.jsxs(qr,{className:"lg:col-span-2",children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(Wv,{className:"w-5 h-5"}),"Registry Data Core"]}),i.jsx(Kc,{children:"Company registration and legal information"})]}),i.jsx(Ur,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(an,{control:n.control,name:"entityName",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Entity Registered Identity"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"cin",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Corporate Registration (CIN)"}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"website",render:({field:T})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(Eb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"companyGstin",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Company GST No."}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"07AAPCR3026H1ZA","data-testid":"input-company-gstin"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"email",render:({field:T})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(Rh,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),i.jsx(rn,{children:i.jsx(Je,{...T,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),i.jsx(nn,{})]})})]})})]}),i.jsxs(qr,{className:"lg:col-span-2",children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-5 h-5"}),"Locations"]}),i.jsx(Kc,{children:"Head office and workshop addresses"})]}),i.jsx(Ur,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(an,{control:n.control,name:"headOfficeAddress",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Head Office (H.O)"}),i.jsx(rn,{children:i.jsx(rs,{...T,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-head-office-address"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:n.control,name:"workshopAddress",render:({field:T})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Workshop"}),i.jsx(rn,{children:i.jsx(rs,{...T,placeholder:"Flat No. 302, 3rd Floor Rajat Residency...",rows:3,"data-testid":"input-workshop-address"})}),i.jsx(nn,{})]})})]})})]})]})]})})})}const o7=B.object({entityName:B.string().min(1,"Entity name is required"),cin:B.string().min(1,"CIN is required"),website:B.string().min(1,"Website is required"),email:B.string().email("Valid email is required"),headOfficeAddress:B.string().min(1,"Head office address is required"),workshopAddress:B.string().min(1,"Workshop address is required")});function l7(){const{toast:t}=Ba(),{data:e}=Aa(),r=df({resolver:ff(o7),defaultValues:{entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:n,isLoading:a}=Ir({queryKey:["/revira/api/branding"]});L.useEffect(()=>{n&&r.reset({entityName:n.entityName,cin:n.cin,website:n.website,email:n.email,headOfficeAddress:n.headOfficeAddress,workshopAddress:n.workshopAddress})},[n,r]);const o=kn({mutationFn:async c=>(await kr("PUT","/revira/api/branding",{...n,...c})).json(),onSuccess:()=>{Rr.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Settings updated",description:"Your company registry data has been saved successfully."})},onError:c=>{t({title:"Error",description:c.message||"Failed to update settings",variant:"destructive"})}}),u=c=>{o.mutate(c)};return a?i.jsx(Es,{user:e,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#da2032]"})})}):i.jsx(Es,{user:e,children:i.jsx(hf,{...r,children:i.jsxs("form",{onSubmit:r.handleSubmit(u),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-[#da2032] text-white shadow-lg",children:i.jsx(Wv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage company registry information"})]})]}),i.jsxs(Oe,{type:"submit",disabled:o.isPending,className:"bg-[#da2032] hover:bg-[#c41b2b]","data-testid":"button-save-settings",children:[i.jsx(af,{className:"w-4 h-4 mr-2"}),o.isPending?"Saving...":"Save Changes"]})]}),i.jsxs(qr,{children:[i.jsxs(Yn,{children:[i.jsxs(Xn,{className:"flex items-center gap-2",children:[i.jsx(Na,{className:"w-5 h-5"}),"Company Registry Data Core"]}),i.jsx(Kc,{children:"Company registration and legal information"})]}),i.jsx(Ur,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(an,{control:r.control,name:"entityName",render:({field:c})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Entity Registered Identity"}),i.jsx(rn,{children:i.jsx(Je,{...c,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:r.control,name:"website",render:({field:c})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(Eb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),i.jsx(rn,{children:i.jsx(Je,{...c,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:r.control,name:"cin",render:({field:c})=>i.jsxs(en,{children:[i.jsx(tn,{children:"Corporate Registration (CIN)"}),i.jsx(rn,{children:i.jsx(Je,{...c,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:r.control,name:"email",render:({field:c})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(Rh,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),i.jsx(rn,{children:i.jsx(Je,{...c,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:r.control,name:"workshopAddress",render:({field:c})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-4 h-4"}),"Nagpur Regional Hub"]}),i.jsx(rn,{children:i.jsx(rs,{...c,placeholder:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023",rows:3,"data-testid":"input-nagpur-address"})}),i.jsx(nn,{})]})}),i.jsx(an,{control:r.control,name:"headOfficeAddress",render:({field:c})=>i.jsxs(en,{children:[i.jsxs(tn,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-4 h-4"}),"Delhi Strategic H.O."]}),i.jsx(rn,{children:i.jsx(rs,{...c,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-delhi-address"})}),i.jsx(nn,{})]})})]})})]})]})})})}function c7(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 p-4",children:i.jsx(qr,{className:"w-full max-w-md border-slate-200 shadow-xl",children:i.jsxs(Ur,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(t_,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"The page you are looking for does not exist or has been moved."}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx(U5,{href:"/revira",children:i.jsx(Oe,{className:"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20",children:"Return Home"})})})]})})})}function sa({component:t}){const{data:e,isLoading:r}=Aa();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx(ev,{className:"w-8 h-8 animate-spin text-primary"})}):e?i.jsx(t,{}):i.jsx(w3,{to:"/revira"})}function u7(){return i.jsxs(b3,{children:[i.jsx(Ti,{path:"/revira",component:$E}),i.jsx(Ti,{path:"/revira/dashboard",children:i.jsx(sa,{component:nL})}),i.jsx(Ti,{path:"/revira/clients",children:i.jsx(sa,{component:oL})}),i.jsx(Ti,{path:"/revira/projects",children:i.jsx(sa,{component:BL})}),i.jsx(Ti,{path:"/revira/users",children:i.jsx(sa,{component:WL})}),i.jsx(Ti,{path:"/revira/projects/:projectId/quotation/:quotationId",children:i.jsx(sa,{component:C5})}),i.jsx(Ti,{path:"/revira/projects/:projectId/quotation",children:i.jsx(sa,{component:C5})}),i.jsx(Ti,{path:"/revira/projects/:id/invoice/:invoiceId",children:i.jsx(sa,{component:_5})}),i.jsx(Ti,{path:"/revira/projects/:id/invoice",children:i.jsx(sa,{component:_5})}),i.jsx(Ti,{path:"/revira/projects/:id/gate-pass/:gatePassId",children:i.jsx(sa,{component:A5})}),i.jsx(Ti,{path:"/revira/projects/:id/gate-pass",children:i.jsx(sa,{component:A5})}),i.jsx(Ti,{path:"/revira/projects/:id/delivery-challan/:deliveryChallanId",children:i.jsx(sa,{component:P5})}),i.jsx(Ti,{path:"/revira/projects/:id/delivery-challan",children:i.jsx(sa,{component:P5})}),i.jsx(Ti,{path:"/revira/projects/:id/ledger",children:i.jsx(sa,{component:r7})}),i.jsx(Ti,{path:"/revira/clients/:id/ledger",children:i.jsx(sa,{component:s7})}),i.jsx(Ti,{path:"/revira/branding",children:i.jsx(sa,{component:a7})}),i.jsx(Ti,{path:"/revira/settings",children:i.jsx(sa,{component:l7})}),i.jsx(Ti,{component:c7})]})}function d7(){return i.jsx(U3,{client:Rr,children:i.jsx(NA,{children:i.jsxs(pE,{children:[i.jsx(u7,{}),i.jsx(Z_,{})]})})})}Jj.createRoot(document.getElementById("root")).render(i.jsx(d7,{}));export{zn as _,f7 as c,T5 as g};
