function Gj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var h7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yg={exports:{}},Vf={},Xg={exports:{}},hr={};var Bx;function Kj(){if(Bx)return hr;Bx=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function j(se){return se===null||typeof se!="object"?null:(se=b&&se[b]||se["@@iterator"],typeof se=="function"?se:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,S={};function P(se,M,L){this.props=se,this.context=M,this.refs=S,this.updater=L||y}P.prototype.isReactComponent={},P.prototype.setState=function(se,M){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,M,"setState")},P.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function _(){}_.prototype=P.prototype;function F(se,M,L){this.props=se,this.context=M,this.refs=S,this.updater=L||y}var v=F.prototype=new _;v.constructor=F,I(v,P.prototype),v.isPureReactComponent=!0;var q=Array.isArray,ee=Object.prototype.hasOwnProperty,ae={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(se,M,L){var ne,me={},ye=null,be=null;if(M!=null)for(ne in M.ref!==void 0&&(be=M.ref),M.key!==void 0&&(ye=""+M.key),M)ee.call(M,ne)&&!W.hasOwnProperty(ne)&&(me[ne]=M[ne]);var Re=arguments.length-2;if(Re===1)me.children=L;else if(1<Re){for(var Ie=Array(Re),Me=0;Me<Re;Me++)Ie[Me]=arguments[Me+2];me.children=Ie}if(se&&se.defaultProps)for(ne in Re=se.defaultProps,Re)me[ne]===void 0&&(me[ne]=Re[ne]);return{$$typeof:t,type:se,key:ye,ref:be,props:me,_owner:ae.current}}function Q(se,M){return{$$typeof:t,type:se.type,key:M,ref:se.ref,props:se.props,_owner:se._owner}}function ue(se){return typeof se=="object"&&se!==null&&se.$$typeof===t}function O(se){var M={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(L){return M[L]})}var R=/\/+/g;function z(se,M){return typeof se=="object"&&se!==null&&se.key!=null?O(""+se.key):M.toString(36)}function Y(se,M,L,ne,me){var ye=typeof se;(ye==="undefined"||ye==="boolean")&&(se=null);var be=!1;if(se===null)be=!0;else switch(ye){case"string":case"number":be=!0;break;case"object":switch(se.$$typeof){case t:case e:be=!0}}if(be)return be=se,me=me(be),se=ne===""?"."+z(be,0):ne,q(me)?(L="",se!=null&&(L=se.replace(R,"$&/")+"/"),Y(me,M,L,"",function(Me){return Me})):me!=null&&(ue(me)&&(me=Q(me,L+(!me.key||be&&be.key===me.key?"":(""+me.key).replace(R,"$&/")+"/")+se)),M.push(me)),1;if(be=0,ne=ne===""?".":ne+":",q(se))for(var Re=0;Re<se.length;Re++){ye=se[Re];var Ie=ne+z(ye,Re);be+=Y(ye,M,L,Ie,me)}else if(Ie=j(se),typeof Ie=="function")for(se=Ie.call(se),Re=0;!(ye=se.next()).done;)ye=ye.value,Ie=ne+z(ye,Re++),be+=Y(ye,M,L,Ie,me);else if(ye==="object")throw M=String(se),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return be}function Ce(se,M,L){if(se==null)return se;var ne=[],me=0;return Y(se,ne,"","",function(ye){return M.call(L,ye,me++)}),ne}function Ae(se){if(se._status===-1){var M=se._result;M=M(),M.then(function(L){(se._status===0||se._status===-1)&&(se._status=1,se._result=L)},function(L){(se._status===0||se._status===-1)&&(se._status=2,se._result=L)}),se._status===-1&&(se._status=0,se._result=M)}if(se._status===1)return se._result.default;throw se._result}var Pe={current:null},ce={transition:null},ge={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:ae};function De(){throw Error("act(...) is not supported in production builds of React.")}return hr.Children={map:Ce,forEach:function(se,M,L){Ce(se,function(){M.apply(this,arguments)},L)},count:function(se){var M=0;return Ce(se,function(){M++}),M},toArray:function(se){return Ce(se,function(M){return M})||[]},only:function(se){if(!ue(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},hr.Component=P,hr.Fragment=n,hr.Profiler=a,hr.PureComponent=F,hr.StrictMode=r,hr.Suspense=f,hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,hr.act=De,hr.cloneElement=function(se,M,L){if(se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+se+".");var ne=I({},se.props),me=se.key,ye=se.ref,be=se._owner;if(M!=null){if(M.ref!==void 0&&(ye=M.ref,be=ae.current),M.key!==void 0&&(me=""+M.key),se.type&&se.type.defaultProps)var Re=se.type.defaultProps;for(Ie in M)ee.call(M,Ie)&&!W.hasOwnProperty(Ie)&&(ne[Ie]=M[Ie]===void 0&&Re!==void 0?Re[Ie]:M[Ie])}var Ie=arguments.length-2;if(Ie===1)ne.children=L;else if(1<Ie){Re=Array(Ie);for(var Me=0;Me<Ie;Me++)Re[Me]=arguments[Me+2];ne.children=Re}return{$$typeof:t,type:se.type,key:me,ref:ye,props:ne,_owner:be}},hr.createContext=function(se){return se={$$typeof:u,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},se.Provider={$$typeof:o,_context:se},se.Consumer=se},hr.createElement=te,hr.createFactory=function(se){var M=te.bind(null,se);return M.type=se,M},hr.createRef=function(){return{current:null}},hr.forwardRef=function(se){return{$$typeof:c,render:se}},hr.isValidElement=ue,hr.lazy=function(se){return{$$typeof:m,_payload:{_status:-1,_result:se},_init:Ae}},hr.memo=function(se,M){return{$$typeof:p,type:se,compare:M===void 0?null:M}},hr.startTransition=function(se){var M=ce.transition;ce.transition={};try{se()}finally{ce.transition=M}},hr.unstable_act=De,hr.useCallback=function(se,M){return Pe.current.useCallback(se,M)},hr.useContext=function(se){return Pe.current.useContext(se)},hr.useDebugValue=function(){},hr.useDeferredValue=function(se){return Pe.current.useDeferredValue(se)},hr.useEffect=function(se,M){return Pe.current.useEffect(se,M)},hr.useId=function(){return Pe.current.useId()},hr.useImperativeHandle=function(se,M,L){return Pe.current.useImperativeHandle(se,M,L)},hr.useInsertionEffect=function(se,M){return Pe.current.useInsertionEffect(se,M)},hr.useLayoutEffect=function(se,M){return Pe.current.useLayoutEffect(se,M)},hr.useMemo=function(se,M){return Pe.current.useMemo(se,M)},hr.useReducer=function(se,M,L){return Pe.current.useReducer(se,M,L)},hr.useRef=function(se){return Pe.current.useRef(se)},hr.useState=function(se){return Pe.current.useState(se)},hr.useSyncExternalStore=function(se,M,L){return Pe.current.useSyncExternalStore(se,M,L)},hr.useTransition=function(){return Pe.current.useTransition()},hr.version="18.3.1",hr}var qx;function Rm(){return qx||(qx=1,Xg.exports=Kj()),Xg.exports}var Ux;function Qj(){if(Ux)return Vf;Ux=1;var t=Rm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,b={},j=null,y=null;p!==void 0&&(j=""+p),f.key!==void 0&&(j=""+f.key),f.ref!==void 0&&(y=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(b[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)b[m]===void 0&&(b[m]=f[m]);return{$$typeof:e,type:c,key:j,ref:y,props:b,_owner:a.current}}return Vf.Fragment=n,Vf.jsx=u,Vf.jsxs=u,Vf}var zx;function Zj(){return zx||(zx=1,Yg.exports=Qj()),Yg.exports}var s=Zj(),wp={},Jg={exports:{}},qa={},e0={exports:{}},t0={};var $x;function Yj(){return $x||($x=1,(function(t){function e(ce,ge){var De=ce.length;ce.push(ge);e:for(;0<De;){var se=De-1>>>1,M=ce[se];if(0<a(M,ge))ce[se]=ge,ce[De]=M,De=se;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var ge=ce[0],De=ce.pop();if(De!==ge){ce[0]=De;e:for(var se=0,M=ce.length,L=M>>>1;se<L;){var ne=2*(se+1)-1,me=ce[ne],ye=ne+1,be=ce[ye];if(0>a(me,De))ye<M&&0>a(be,me)?(ce[se]=be,ce[ye]=De,se=ye):(ce[se]=me,ce[ne]=De,se=ne);else if(ye<M&&0>a(be,De))ce[se]=be,ce[ye]=De,se=ye;else break e}}return ge}function a(ce,ge){var De=ce.sortIndex-ge.sortIndex;return De!==0?De:ce.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,b=null,j=3,y=!1,I=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ce){for(var ge=n(p);ge!==null;){if(ge.callback===null)r(p);else if(ge.startTime<=ce)r(p),ge.sortIndex=ge.expirationTime,e(f,ge);else break;ge=n(p)}}function q(ce){if(S=!1,v(ce),!I)if(n(f)!==null)I=!0,Ae(ee);else{var ge=n(p);ge!==null&&Pe(q,ge.startTime-ce)}}function ee(ce,ge){I=!1,S&&(S=!1,_(te),te=-1),y=!0;var De=j;try{for(v(ge),b=n(f);b!==null&&(!(b.expirationTime>ge)||ce&&!O());){var se=b.callback;if(typeof se=="function"){b.callback=null,j=b.priorityLevel;var M=se(b.expirationTime<=ge);ge=t.unstable_now(),typeof M=="function"?b.callback=M:b===n(f)&&r(f),v(ge)}else r(f);b=n(f)}if(b!==null)var L=!0;else{var ne=n(p);ne!==null&&Pe(q,ne.startTime-ge),L=!1}return L}finally{b=null,j=De,y=!1}}var ae=!1,W=null,te=-1,Q=5,ue=-1;function O(){return!(t.unstable_now()-ue<Q)}function R(){if(W!==null){var ce=t.unstable_now();ue=ce;var ge=!0;try{ge=W(!0,ce)}finally{ge?z():(ae=!1,W=null)}}else ae=!1}var z;if(typeof F=="function")z=function(){F(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Ce=Y.port2;Y.port1.onmessage=R,z=function(){Ce.postMessage(null)}}else z=function(){P(R,0)};function Ae(ce){W=ce,ae||(ae=!0,z())}function Pe(ce,ge){te=P(function(){ce(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Ae(ee))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(ce){switch(j){case 1:case 2:case 3:var ge=3;break;default:ge=j}var De=j;j=ge;try{return ce()}finally{j=De}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,ge){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var De=j;j=ce;try{return ge()}finally{j=De}},t.unstable_scheduleCallback=function(ce,ge,De){var se=t.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?se+De:se):De=se,ce){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=De+M,ce={id:m++,callback:ge,priorityLevel:ce,startTime:De,expirationTime:M,sortIndex:-1},De>se?(ce.sortIndex=De,e(p,ce),n(f)===null&&ce===n(p)&&(S?(_(te),te=-1):S=!0,Pe(q,De-se))):(ce.sortIndex=M,e(f,ce),I||y||(I=!0,Ae(ee))),ce},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(ce){var ge=j;return function(){var De=j;j=ge;try{return ce.apply(this,arguments)}finally{j=De}}}})(t0)),t0}var Vx;function Xj(){return Vx||(Vx=1,e0.exports=Yj()),e0.exports}var Hx;function Jj(){if(Hx)return qa;Hx=1;var t=Rm(),e=Xj();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function o(i,l){u(i,l),u(i+"Capture",l)}function u(i,l){for(a[i]=l,i=0;i<l.length;i++)r.add(l[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},b={};function j(i){return f.call(b,i)?!0:f.call(m,i)?!1:p.test(i)?b[i]=!0:(m[i]=!0,!1)}function y(i,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function I(i,l,d,g){if(l===null||typeof l>"u"||y(i,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(i,l,d,g,N,A,G){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=A,this.removeEmptyString=G}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];P[l]=new S(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function F(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(_,F);P[l]=new S(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(_,F);P[l]=new S(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(_,F);P[l]=new S(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function v(i,l,d,g){var N=P.hasOwnProperty(l)?P[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(I(l,d,N,g)&&(d=null),g||N===null?j(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):N.mustUseProperty?i[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,g=N.attributeNamespace,d===null?i.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,g?i.setAttributeNS(g,l,d):i.setAttribute(l,d))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ae=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),O=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ge(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var De=Object.assign,se;function M(i){if(se===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);se=l&&l[1]||""}return`
`+se+i}var L=!1;function ne(i,l){if(!i||L)return"";L=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ye){var g=Ye}Reflect.construct(i,[],l)}else{try{l.call()}catch(Ye){g=Ye}i.call(l.prototype)}else{try{throw Error()}catch(Ye){g=Ye}i()}}catch(Ye){if(Ye&&g&&typeof Ye.stack=="string"){for(var N=Ye.stack.split(`
`),A=g.stack.split(`
`),G=N.length-1,Se=A.length-1;1<=G&&0<=Se&&N[G]!==A[Se];)Se--;for(;1<=G&&0<=Se;G--,Se--)if(N[G]!==A[Se]){if(G!==1||Se!==1)do if(G--,Se--,0>Se||N[G]!==A[Se]){var Le=`
`+N[G].replace(" at new "," at ");return i.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",i.displayName)),Le}while(1<=G&&0<=Se);break}}}finally{L=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?M(i):""}function me(i){switch(i.tag){case 5:return M(i.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return i=ne(i.type,!1),i;case 11:return i=ne(i.type.render,!1),i;case 1:return i=ne(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case W:return"Fragment";case ae:return"Portal";case Q:return"Profiler";case te:return"StrictMode";case z:return"Suspense";case Y:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case ue:return(i._context.displayName||"Context")+".Provider";case R:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ce:return l=i.displayName||null,l!==null?l:ye(i.type)||"Memo";case Ae:l=i._payload,i=i._init;try{return ye(i(l))}catch{}}return null}function be(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Re(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ie(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Me(i){var l=Ie(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,A=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return N.call(this)},set:function(G){g=""+G,A.call(this,G)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(G){g=""+G},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ze(i){i._valueTracker||(i._valueTracker=Me(i))}function ft(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return i&&(g=Ie(i)?i.checked?"true":"false":i.value),i=g,i!==d?(l.setValue(i),!0):!1}function mt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ft(i,l){var d=l.checked;return De({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function le(i,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Re(l.value!=null?l.value:d),i._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function gt(i,l){l=l.checked,l!=null&&v(i,"checked",l,!1)}function xe(i,l){gt(i,l);var d=Re(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?B(i,l.type,d):l.hasOwnProperty("defaultValue")&&B(i,l.type,Re(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function X(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function B(i,l,d){(l!=="number"||mt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var ve=Array.isArray;function re(i,l,d,g){if(i=i.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<i.length;d++)N=l.hasOwnProperty("$"+i[d].value),i[d].selected!==N&&(i[d].selected=N),N&&g&&(i[d].defaultSelected=!0)}else{for(d=""+Re(d),l=null,N=0;N<i.length;N++){if(i[N].value===d){i[N].selected=!0,g&&(i[N].defaultSelected=!0);return}l!==null||i[N].disabled||(l=i[N])}l!==null&&(l.selected=!0)}}function D(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return De({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function H(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(ve(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Re(d)}}function je(i,l){var d=Re(l.value),g=Re(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),g!=null&&(i.defaultValue=""+g)}function Ne(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Te(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Te(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var st,ct=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,N){MSApp.execUnsafeLocalFunction(function(){return i(l,d,g,N)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=st.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function jt(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var Pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(Pt).forEach(function(i){pr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),Pt[l]=Pt[i]})});function yn(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Pt.hasOwnProperty(i)&&Pt[i]?(""+l).trim():l+"px"}function Gt(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,N=yn(d,l[d],g);d==="float"&&(d="cssFloat"),g?i.setProperty(d,N):i[d]=N}}var Ut=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tn(i,l){if(l){if(Ut[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ge(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var at=null;function Xe(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var an=null,sr=null,gn=null;function Jt(i){if(i=kc(i)){if(typeof an!="function")throw Error(n(280));var l=i.stateNode;l&&(l=_u(l),an(i.stateNode,i.type,l))}}function Dn(i){sr?gn?gn.push(i):gn=[i]:sr=i}function ys(){if(sr){var i=sr,l=gn;if(gn=sr=null,Jt(i),l)for(i=0;i<l.length;i++)Jt(l[i])}}function ir(i,l){return i(l)}function Nr(){}var xr=!1;function on(i,l,d){if(xr)return i(l,d);xr=!0;try{return ir(i,l,d)}finally{xr=!1,(sr!==null||gn!==null)&&(Nr(),ys())}}function As(i,l){var d=i.stateNode;if(d===null)return null;var g=_u(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Us=!1;if(c)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){Us=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{Us=!1}function Ps(i,l,d,g,N,A,G,Se,Le){var Ye=Array.prototype.slice.call(arguments,3);try{l.apply(d,Ye)}catch(bt){this.onError(bt)}}var lr=!1,Fr=null,yr=!1,ks=null,Jr={onError:function(i){lr=!0,Fr=i}};function Tr(i,l,d,g,N,A,G,Se,Le){lr=!1,Fr=null,Ps.apply(Jr,arguments)}function fi(i,l,d,g,N,A,G,Se,Le){if(Tr.apply(this,arguments),lr){if(lr){var Ye=Fr;lr=!1,Fr=null}else throw Error(n(198));yr||(yr=!0,ks=Ye)}}function es(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function Ts(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function as(i){if(es(i)!==i)throw Error(n(188))}function zs(i){var l=i.alternate;if(!l){if(l=es(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,g=l;;){var N=d.return;if(N===null)break;var A=N.alternate;if(A===null){if(g=N.return,g!==null){d=g;continue}break}if(N.child===A.child){for(A=N.child;A;){if(A===d)return as(N),i;if(A===g)return as(N),l;A=A.sibling}throw Error(n(188))}if(d.return!==g.return)d=N,g=A;else{for(var G=!1,Se=N.child;Se;){if(Se===d){G=!0,d=N,g=A;break}if(Se===g){G=!0,g=N,d=A;break}Se=Se.sibling}if(!G){for(Se=A.child;Se;){if(Se===d){G=!0,d=A,g=N;break}if(Se===g){G=!0,g=A,d=N;break}Se=Se.sibling}if(!G)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function mr(i){return i=zs(i),i!==null?hs(i):null}function hs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=hs(i);if(l!==null)return l;i=i.sibling}return null}var Xs=e.unstable_scheduleCallback,Qi=e.unstable_cancelCallback,qi=e.unstable_shouldYield,ki=e.unstable_requestPaint,Un=e.unstable_now,bi=e.unstable_getCurrentPriorityLevel,fn=e.unstable_ImmediatePriority,In=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,Kt=e.unstable_LowPriority,Fn=e.unstable_IdlePriority,vt=null,Ke=null;function it(i){if(Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(vt,i,void 0,(i.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:wt,ut=Math.log,Lt=Math.LN2;function wt(i){return i>>>=0,i===0?32:31-(ut(i)/Lt|0)|0}var Ot=64,Nt=4194304;function kt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Mt(i,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,N=i.suspendedLanes,A=i.pingedLanes,G=d&268435455;if(G!==0){var Se=G&~N;Se!==0?g=kt(Se):(A&=G,A!==0&&(g=kt(A)))}else G=d&~N,G!==0?g=kt(G):A!==0&&(g=kt(A));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,A=l&-l,N>=A||N===16&&(A&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)d=31-Qe(l),N=1<<d,g|=i[d],l&=~N;return g}function $t(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bt(i,l){for(var d=i.suspendedLanes,g=i.pingedLanes,N=i.expirationTimes,A=i.pendingLanes;0<A;){var G=31-Qe(A),Se=1<<G,Le=N[G];Le===-1?((Se&d)===0||(Se&g)!==0)&&(N[G]=$t(Se,l)):Le<=l&&(i.expiredLanes|=Se),A&=~Se}}function Qt(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function bn(){var i=Ot;return Ot<<=1,(Ot&4194240)===0&&(Ot=64),i}function Er(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function kn(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-Qe(l),i[l]=d}function An(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<d;){var N=31-Qe(d),A=1<<N;l[N]=0,g[N]=-1,i[N]=-1,d&=~A}}function ln(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var g=31-Qe(d),N=1<<g;N&l|i[g]&l&&(i[g]|=l),d&=~N}}var E=0;function oe(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var he,_e,we,Rt,Gn,Vt=!1,Vn=[],$r=null,Or=null,ts=null,hi=new Map,vn=new Map,Zi=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cr(i,l){switch(i){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":hi.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(l.pointerId)}}function wi(i,l,d,g,N,A){return i===null||i.nativeEvent!==A?(i={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:A,targetContainers:[N]},l!==null&&(l=kc(l),l!==null&&_e(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),i)}function ga(i,l,d,g,N){switch(l){case"focusin":return $r=wi($r,i,l,d,g,N),!0;case"dragenter":return Or=wi(Or,i,l,d,g,N),!0;case"mouseover":return ts=wi(ts,i,l,d,g,N),!0;case"pointerover":var A=N.pointerId;return hi.set(A,wi(hi.get(A)||null,i,l,d,g,N)),!0;case"gotpointercapture":return A=N.pointerId,vn.set(A,wi(vn.get(A)||null,i,l,d,g,N)),!0}return!1}function al(i){var l=bl(i.target);if(l!==null){var d=es(l);if(d!==null){if(l=d.tag,l===13){if(l=Ts(d),l!==null){i.blockedOn=l,Gn(i.priority,function(){we(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function uo(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Ha(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var g=new d.constructor(d.type,d);at=g,d.target.dispatchEvent(g),at=null}else return l=kc(d),l!==null&&_e(l),i.blockedOn=d,!1;l.shift()}return!0}function Yi(i,l,d){uo(i)&&d.delete(l)}function Vr(){Vt=!1,$r!==null&&uo($r)&&($r=null),Or!==null&&uo(Or)&&(Or=null),ts!==null&&uo(ts)&&(ts=null),hi.forEach(Yi),vn.forEach(Yi)}function Hr(i,l){i.blockedOn===l&&(i.blockedOn=null,Vt||(Vt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vr)))}function Ni(i){function l(N){return Hr(N,i)}if(0<Vn.length){Hr(Vn[0],i);for(var d=1;d<Vn.length;d++){var g=Vn[d];g.blockedOn===i&&(g.blockedOn=null)}}for($r!==null&&Hr($r,i),Or!==null&&Hr(Or,i),ts!==null&&Hr(ts,i),hi.forEach(l),vn.forEach(l),d=0;d<Zi.length;d++)g=Zi[d],g.blockedOn===i&&(g.blockedOn=null);for(;0<Zi.length&&(d=Zi[0],d.blockedOn===null);)al(d),d.blockedOn===null&&Zi.shift()}var ps=q.ReactCurrentBatchConfig,ol=!0;function zl(i,l,d,g){var N=E,A=ps.transition;ps.transition=null;try{E=1,cl(i,l,d,g)}finally{E=N,ps.transition=A}}function ll(i,l,d,g){var N=E,A=ps.transition;ps.transition=null;try{E=4,cl(i,l,d,g)}finally{E=N,ps.transition=A}}function cl(i,l,d,g){if(ol){var N=Ha(i,l,d,g);if(N===null)Su(i,l,g,Xi,d),cr(i,g);else if(ga(N,i,l,d,g))g.stopPropagation();else if(cr(i,g),l&4&&-1<_t.indexOf(i)){for(;N!==null;){var A=kc(N);if(A!==null&&he(A),A=Ha(i,l,d,g),A===null&&Su(i,l,g,Xi,d),A===N)break;N=A}N!==null&&g.stopPropagation()}else Su(i,l,g,null,d)}}var Xi=null;function Ha(i,l,d,g){if(Xi=null,i=Xe(g),i=bl(i),i!==null)if(l=es(i),l===null)i=null;else if(d=l.tag,d===13){if(i=Ts(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Xi=i,null}function fo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bi()){case fn:return 1;case In:return 4;case Nn:case Kt:return 16;case Fn:return 536870912;default:return 16}default:return 16}}var ms=null,$s=null,Wa=null;function ul(){if(Wa)return Wa;var i,l=$s,d=l.length,g,N="value"in ms?ms.value:ms.textContent,A=N.length;for(i=0;i<d&&l[i]===N[i];i++);var G=d-i;for(g=1;g<=G&&l[d-g]===N[A-g];g++);return Wa=N.slice(i,1<g?1-g:void 0)}function Js(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function os(){return!0}function Es(){return!1}function Vs(i){function l(d,g,N,A,G){this._reactName=d,this._targetInst=N,this.type=g,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var Se in i)i.hasOwnProperty(Se)&&(d=i[Se],this[Se]=d?d(A):A[Se]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?os:Es,this.isPropagationStopped=Es,this}return De(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),l}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=Vs(Ji),w=De({},Ji,{view:0,detail:0}),$=Vs(w),pe,ke,Be,rt=De({},w,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Be&&(Be&&i.type==="mousemove"?(pe=i.screenX-Be.screenX,ke=i.screenY-Be.screenY):ke=pe=0,Be=i),pe)},movementY:function(i){return"movementY"in i?i.movementY:ke}}),ht=Vs(rt),ot=De({},rt,{dataTransfer:0}),At=Vs(ot),Tt=De({},w,{relatedTarget:0}),Dt=Vs(Tt),hn=De({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Yn=Vs(hn),br=De({},Ji,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qn=Vs(br),Sr=De({},Ji,{data:0}),dr=Vs(Sr),Mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ht(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=bs[i])?!!l[i]:!1}function Ui(){return Ht}var La=De({},w,{key:function(i){if(i.key){var l=Mr[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Js(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ti[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(i){return i.type==="keypress"?Js(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Js(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ho=Vs(La),Po=De({},rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=Vs(Po),hl=De({},w,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),Si=Vs(hl),$l=De({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vl=Vs($l),mu=De({},rt,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=Vs(mu),zi=[9,13,27,32],Ga=c&&"CompositionEvent"in window,po=null;c&&"documentMode"in document&&(po=document.documentMode);var nd=c&&"TextEvent"in window&&!po,va=c&&(!Ga||po&&8<po&&11>=po),pl=" ",yc=!1;function bc(i,l){switch(i){case"keyup":return zi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ra=!1;function xa(i,l){switch(i){case"compositionend":return ko(l);case"keypress":return l.which!==32?null:(yc=!0,pl);case"textInput":return i=l.data,i===pl&&yc?null:i;default:return null}}function ya(i,l){if(Ra)return i==="compositionend"||!Ga&&bc(i,l)?(i=ul(),Wa=$s=ms=null,Ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return va&&l.locale!=="ko"?null:l.data;default:return null}}var ml={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mo(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!ml[i.type]:l==="textarea"}function To(i,l,d,g){Dn(g),l=od(l,"onChange"),0<l.length&&(d=new dl("onChange","change",null,d,g),i.push({event:d,listeners:l}))}var Eo=null,go=null;function Ls(i){wu(i,0)}function Hl(i){var l=tc(i);if(ft(l))return i}function vo(i,l){if(i==="change")return l}var Ka=!1;if(c){var Wl;if(c){var Gl="oninput"in document;if(!Gl){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Gl=typeof wc.oninput=="function"}Wl=Gl}else Wl=!1;Ka=Wl&&(!document.documentMode||9<document.documentMode)}function Nc(){Eo&&(Eo.detachEvent("onpropertychange",Lo),go=Eo=null)}function Lo(i){if(i.propertyName==="value"&&Hl(go)){var l=[];To(l,go,i,Xe(i)),on(Ls,l)}}function gl(i,l,d){i==="focusin"?(Nc(),Eo=l,go=d,Eo.attachEvent("onpropertychange",Lo)):i==="focusout"&&Nc()}function vl(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hl(go)}function Kl(i,l){if(i==="click")return Hl(l)}function xl(i,l){if(i==="input"||i==="change")return Hl(l)}function Ql(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ws=typeof Object.is=="function"?Object.is:Ql;function ea(i,l){if(ws(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var N=d[g];if(!f.call(l,N)||!ws(i[N],l[N]))return!1}return!0}function Cr(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Br(i,l){var d=Cr(i);i=0;for(var g;d;){if(d.nodeType===3){if(g=i+d.textContent.length,i<=l&&g>=l)return{node:d,offset:l-i};i=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Cr(d)}}function Ns(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Ns(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Hs(){for(var i=window,l=mt();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=mt(i.document)}return l}function Qa(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function vu(i){var l=Hs(),d=i.focusedElem,g=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&Ns(d.ownerDocument.documentElement,d)){if(g!==null&&Qa(d)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var N=d.textContent.length,A=Math.min(g.start,N);g=g.end===void 0?A:Math.min(g.end,N),!i.extend&&A>g&&(N=g,g=A,A=N),N=Br(d,A);var G=Br(d,g);N&&G&&(i.rangeCount!==1||i.anchorNode!==N.node||i.anchorOffset!==N.offset||i.focusNode!==G.node||i.focusOffset!==G.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),i.removeAllRanges(),A>g?(i.addRange(l),i.extend(G.node,G.offset)):(l.setEnd(G.node,G.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Sc=c&&"documentMode"in document&&11>=document.documentMode,Ro=null,rd=null,jc=null,sd=!1;function bf(i,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;sd||Ro==null||Ro!==mt(g)||(g=Ro,"selectionStart"in g&&Qa(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),jc&&ea(jc,g)||(jc=g,g=od(rd,"onSelect"),0<g.length&&(l=new dl("onSelect","select",null,l,d),i.push({event:l,listeners:g}),l.target=Ro)))}function xu(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var Zl={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Yl={},wf={};c&&(wf=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function yu(i){if(Yl[i])return Yl[i];if(!Zl[i])return i;var l=Zl[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in wf)return Yl[i]=l[d];return i}var Nf=yu("animationend"),Sf=yu("animationiteration"),jf=yu("animationstart"),Cf=yu("transitionend"),_f=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(i,l){_f.set(i,l),o(l,[i])}for(var Cc=0;Cc<Af.length;Cc++){var $i=Af[Cc],Da=$i.toLowerCase(),id=$i[0].toUpperCase()+$i.slice(1);xo(Da,"on"+id)}xo(Nf,"onAnimationEnd"),xo(Sf,"onAnimationIteration"),xo(jf,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(Cf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function bu(i,l,d){var g=i.type||"unknown-event";i.currentTarget=d,fi(g,l,void 0,i),i.currentTarget=null}function wu(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var g=i[d],N=g.event;g=g.listeners;e:{var A=void 0;if(l)for(var G=g.length-1;0<=G;G--){var Se=g[G],Le=Se.instance,Ye=Se.currentTarget;if(Se=Se.listener,Le!==A&&N.isPropagationStopped())break e;bu(N,Se,Ye),A=Le}else for(G=0;G<g.length;G++){if(Se=g[G],Le=Se.instance,Ye=Se.currentTarget,Se=Se.listener,Le!==A&&N.isPropagationStopped())break e;bu(N,Se,Ye),A=Le}}}if(yr)throw i=ks,yr=!1,ks=null,i}function Wr(i,l){var d=l[na];d===void 0&&(d=l[na]=new Set);var g=i+"__bubble";d.has(g)||(Nu(l,i,2,!1),d.add(g))}function ad(i,l,d){var g=0;l&&(g|=4),Nu(d,i,g,l)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Xl(i){if(!i[_c]){i[_c]=!0,r.forEach(function(d){d!=="selectionchange"&&(Uh.has(d)||ad(d,!1,i),ad(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[_c]||(l[_c]=!0,ad("selectionchange",!1,l))}}function Nu(i,l,d,g){switch(fo(l)){case 1:var N=zl;break;case 4:N=ll;break;default:N=cl}d=N.bind(null,l,d,i),N=void 0,!Us||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?i.addEventListener(l,d,{capture:!0,passive:N}):i.addEventListener(l,d,!0):N!==void 0?i.addEventListener(l,d,{passive:N}):i.addEventListener(l,d,!1)}function Su(i,l,d,g,N){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var G=g.tag;if(G===3||G===4){var Se=g.stateNode.containerInfo;if(Se===N||Se.nodeType===8&&Se.parentNode===N)break;if(G===4)for(G=g.return;G!==null;){var Le=G.tag;if((Le===3||Le===4)&&(Le=G.stateNode.containerInfo,Le===N||Le.nodeType===8&&Le.parentNode===N))return;G=G.return}for(;Se!==null;){if(G=bl(Se),G===null)return;if(Le=G.tag,Le===5||Le===6){g=A=G;continue e}Se=Se.parentNode}}g=g.return}on(function(){var Ye=A,bt=Xe(d),St=[];e:{var xt=_f.get(i);if(xt!==void 0){var Wt=dl,rn=i;switch(i){case"keypress":if(Js(d)===0)break e;case"keydown":case"keyup":Wt=ho;break;case"focusin":rn="focus",Wt=Dt;break;case"focusout":rn="blur",Wt=Dt;break;case"beforeblur":case"afterblur":Wt=Dt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Wt=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Wt=At;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Wt=Si;break;case Nf:case Sf:case jf:Wt=Yn;break;case Cf:Wt=Vl;break;case"scroll":Wt=$;break;case"wheel":Wt=gu;break;case"copy":case"cut":case"paste":Wt=Qn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Wt=fl}var cn=(l&4)!==0,ni=!cn&&i==="scroll",Ve=cn?xt!==null?xt+"Capture":null:xt;cn=[];for(var Oe=Ye,We;Oe!==null;){We=Oe;var Et=We.stateNode;if(We.tag===5&&Et!==null&&(We=Et,Ve!==null&&(Et=As(Oe,Ve),Et!=null&&cn.push(ju(Oe,Et,We)))),ni)break;Oe=Oe.return}0<cn.length&&(xt=new Wt(xt,rn,null,d,bt),St.push({event:xt,listeners:cn}))}}if((l&7)===0){e:{if(xt=i==="mouseover"||i==="pointerover",Wt=i==="mouseout"||i==="pointerout",xt&&d!==at&&(rn=d.relatedTarget||d.fromElement)&&(bl(rn)||rn[Ei]))break e;if((Wt||xt)&&(xt=bt.window===bt?bt:(xt=bt.ownerDocument)?xt.defaultView||xt.parentWindow:window,Wt?(rn=d.relatedTarget||d.toElement,Wt=Ye,rn=rn?bl(rn):null,rn!==null&&(ni=es(rn),rn!==ni||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Wt=null,rn=Ye),Wt!==rn)){if(cn=ht,Et="onMouseLeave",Ve="onMouseEnter",Oe="mouse",(i==="pointerout"||i==="pointerover")&&(cn=fl,Et="onPointerLeave",Ve="onPointerEnter",Oe="pointer"),ni=Wt==null?xt:tc(Wt),We=rn==null?xt:tc(rn),xt=new cn(Et,Oe+"leave",Wt,d,bt),xt.target=ni,xt.relatedTarget=We,Et=null,bl(bt)===Ye&&(cn=new cn(Ve,Oe+"enter",rn,d,bt),cn.target=We,cn.relatedTarget=ni,Et=cn),ni=Et,Wt&&rn)t:{for(cn=Wt,Ve=rn,Oe=0,We=cn;We;We=Jl(We))Oe++;for(We=0,Et=Ve;Et;Et=Jl(Et))We++;for(;0<Oe-We;)cn=Jl(cn),Oe--;for(;0<We-Oe;)Ve=Jl(Ve),We--;for(;Oe--;){if(cn===Ve||Ve!==null&&cn===Ve.alternate)break t;cn=Jl(cn),Ve=Jl(Ve)}cn=null}else cn=null;Wt!==null&&zh(St,xt,Wt,cn,!1),rn!==null&&ni!==null&&zh(St,ni,rn,cn,!0)}}e:{if(xt=Ye?tc(Ye):window,Wt=xt.nodeName&&xt.nodeName.toLowerCase(),Wt==="select"||Wt==="input"&&xt.type==="file")var pn=vo;else if(mo(xt))if(Ka)pn=xl;else{pn=vl;var Sn=gl}else(Wt=xt.nodeName)&&Wt.toLowerCase()==="input"&&(xt.type==="checkbox"||xt.type==="radio")&&(pn=Kl);if(pn&&(pn=pn(i,Ye))){To(St,pn,d,bt);break e}Sn&&Sn(i,xt,Ye),i==="focusout"&&(Sn=xt._wrapperState)&&Sn.controlled&&xt.type==="number"&&B(xt,"number",xt.value)}switch(Sn=Ye?tc(Ye):window,i){case"focusin":(mo(Sn)||Sn.contentEditable==="true")&&(Ro=Sn,rd=Ye,jc=null);break;case"focusout":jc=rd=Ro=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,bf(St,d,bt);break;case"selectionchange":if(Sc)break;case"keydown":case"keyup":bf(St,d,bt)}var jn;if(Ga)e:{switch(i){case"compositionstart":var On="onCompositionStart";break e;case"compositionend":On="onCompositionEnd";break e;case"compositionupdate":On="onCompositionUpdate";break e}On=void 0}else Ra?bc(i,d)&&(On="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(On="onCompositionStart");On&&(va&&d.locale!=="ko"&&(Ra||On!=="onCompositionStart"?On==="onCompositionEnd"&&Ra&&(jn=ul()):(ms=bt,$s="value"in ms?ms.value:ms.textContent,Ra=!0)),Sn=od(Ye,On),0<Sn.length&&(On=new dr(On,i,null,d,bt),St.push({event:On,listeners:Sn}),jn?On.data=jn:(jn=ko(d),jn!==null&&(On.data=jn)))),(jn=nd?xa(i,d):ya(i,d))&&(Ye=od(Ye,"onBeforeInput"),0<Ye.length&&(bt=new dr("onBeforeInput","beforeinput",null,d,bt),St.push({event:bt,listeners:Ye}),bt.data=jn))}wu(St,l)})}function ju(i,l,d){return{instance:i,listener:l,currentTarget:d}}function od(i,l){for(var d=l+"Capture",g=[];i!==null;){var N=i,A=N.stateNode;N.tag===5&&A!==null&&(N=A,A=As(i,d),A!=null&&g.unshift(ju(i,A,N)),A=As(i,l),A!=null&&g.push(ju(i,A,N))),i=i.return}return g}function Jl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function zh(i,l,d,g,N){for(var A=l._reactName,G=[];d!==null&&d!==g;){var Se=d,Le=Se.alternate,Ye=Se.stateNode;if(Le!==null&&Le===g)break;Se.tag===5&&Ye!==null&&(Se=Ye,N?(Le=As(d,A),Le!=null&&G.unshift(ju(d,Le,Se))):N||(Le=As(d,A),Le!=null&&G.push(ju(d,Le,Se)))),d=d.return}G.length!==0&&i.push({event:l,listeners:G})}var dg=/\r\n?/g,fg=/\u0000|\uFFFD/g;function $h(i){return(typeof i=="string"?i:""+i).replace(dg,`
`).replace(fg,"")}function ld(i,l,d){if(l=$h(l),$h(i)!==l&&d)throw Error(n(425))}function Ac(){}var Cu=null,ec=null;function Pf(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var kf=typeof setTimeout=="function"?setTimeout:void 0,Vh=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(i){return Hh.resolve(null).then(i).catch(pg)}:kf;function pg(i){setTimeout(function(){throw i})}function Tf(i,l){var d=l,g=0;do{var N=d.nextSibling;if(i.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(g===0){i.removeChild(N),Ni(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=N}while(d);Ni(l)}function Vi(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Ia(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var ta=Math.random().toString(36).slice(2),yo="__reactFiber$"+ta,Pc="__reactProps$"+ta,Ei="__reactContainer$"+ta,na="__reactEvents$"+ta,mg="__reactListeners$"+ta,gg="__reactHandles$"+ta;function bl(i){var l=i[yo];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ei]||d[yo]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=Ia(i);i!==null;){if(d=i[yo])return d;i=Ia(i)}return l}i=d,d=i.parentNode}return null}function kc(i){return i=i[yo]||i[Ei],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function tc(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function _u(i){return i[Pc]||null}var Ef=[],Do=-1;function Za(i){return{current:i}}function Ir(i){0>Do||(i.current=Ef[Do],Ef[Do]=null,Do--)}function qr(i,l){Do++,Ef[Do]=i.current,i.current=l}var wl={},ji=Za(wl),ra=Za(!1),nc=wl;function Tc(i,l){var d=i.type.contextTypes;if(!d)return wl;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},A;for(A in d)N[A]=l[A];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=N),N}function sa(i){return i=i.childContextTypes,i!=null}function cd(){Ir(ra),Ir(ji)}function Wh(i,l,d){if(ji.current!==wl)throw Error(n(168));qr(ji,l),qr(ra,d)}function Lf(i,l,d){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(n(108,be(i)||"Unknown",N));return De({},d,g)}function rc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||wl,nc=ji.current,qr(ji,i),qr(ra,ra.current),!0}function Gh(i,l,d){var g=i.stateNode;if(!g)throw Error(n(169));d?(i=Lf(i,l,nc),g.__reactInternalMemoizedMergedChildContext=i,Ir(ra),Ir(ji),qr(ji,i)):Ir(ra),qr(ra,d)}var Io=null,Au=!1,h=!1;function x(i){Io===null?Io=[i]:Io.push(i)}function C(i){Au=!0,x(i)}function T(){if(!h&&Io!==null){h=!0;var i=0,l=E;try{var d=Io;for(E=1;i<d.length;i++){var g=d[i];do g=g(!0);while(g!==null)}Io=null,Au=!1}catch(N){throw Io!==null&&(Io=Io.slice(i+1)),Xs(fn,T),N}finally{E=l,h=!1}}return null}var V=[],K=0,Z=null,J=0,ie=[],de=0,Ee=null,ze=1,fe="";function Fe(i,l){V[K++]=J,V[K++]=Z,Z=i,J=l}function Ue(i,l,d){ie[de++]=ze,ie[de++]=fe,ie[de++]=Ee,Ee=i;var g=ze;i=fe;var N=32-Qe(g)-1;g&=~(1<<N),d+=1;var A=32-Qe(l)+N;if(30<A){var G=N-N%5;A=(g&(1<<G)-1).toString(32),g>>=G,N-=G,ze=1<<32-Qe(l)+N|d<<N|g,fe=A+i}else ze=1<<A|d<<N|g,fe=i}function nt(i){i.return!==null&&(Fe(i,1),Ue(i,1,0))}function He(i){for(;i===Z;)Z=V[--K],V[K]=null,J=V[--K],V[K]=null;for(;i===Ee;)Ee=ie[--de],ie[de]=null,fe=ie[--de],ie[de]=null,ze=ie[--de],ie[de]=null}var Je=null,tt=null,lt=!1,dt=null;function dn(i,l){var d=jo(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function Yt(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,Je=i,tt=Vi(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,Je=i,tt=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ee!==null?{id:ze,overflow:fe}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=jo(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,Je=i,tt=null,!0):!1;default:return!1}}function zn(i){return(i.mode&1)!==0&&(i.flags&128)===0}function nn(i){if(lt){var l=tt;if(l){var d=l;if(!Yt(i,l)){if(zn(i))throw Error(n(418));l=Vi(d.nextSibling);var g=Je;l&&Yt(i,l)?dn(g,d):(i.flags=i.flags&-4097|2,lt=!1,Je=i)}}else{if(zn(i))throw Error(n(418));i.flags=i.flags&-4097|2,lt=!1,Je=i}}}function fr(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Je=i}function Ss(i){if(i!==Je)return!1;if(!lt)return fr(i),lt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!Pf(i.type,i.memoizedProps)),l&&(l=tt)){if(zn(i))throw Hn(),Error(n(418));for(;l;)dn(i,l),l=Vi(l.nextSibling)}if(fr(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){tt=Vi(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}tt=null}}else tt=Je?Vi(i.stateNode.nextSibling):null;return!0}function Hn(){for(var i=tt;i;)i=Vi(i.nextSibling)}function Xt(){tt=Je=null,lt=!1}function It(i){dt===null?dt=[i]:dt.push(i)}var Rs=q.ReactCurrentBatchConfig;function Tn(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,i));var N=g,A=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(G){var Se=N.refs;G===null?delete Se[A]:Se[A]=G},l._stringRef=A,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function ur(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function Yr(i){var l=i._init;return l(i._payload)}function pi(i){function l(Ve,Oe){if(i){var We=Ve.deletions;We===null?(Ve.deletions=[Oe],Ve.flags|=16):We.push(Oe)}}function d(Ve,Oe){if(!i)return null;for(;Oe!==null;)l(Ve,Oe),Oe=Oe.sibling;return null}function g(Ve,Oe){for(Ve=new Map;Oe!==null;)Oe.key!==null?Ve.set(Oe.key,Oe):Ve.set(Oe.index,Oe),Oe=Oe.sibling;return Ve}function N(Ve,Oe){return Ve=qc(Ve,Oe),Ve.index=0,Ve.sibling=null,Ve}function A(Ve,Oe,We){return Ve.index=We,i?(We=Ve.alternate,We!==null?(We=We.index,We<Oe?(Ve.flags|=2,Oe):We):(Ve.flags|=2,Oe)):(Ve.flags|=1048576,Oe)}function G(Ve){return i&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Se(Ve,Oe,We,Et){return Oe===null||Oe.tag!==6?(Oe=Hg(We,Ve.mode,Et),Oe.return=Ve,Oe):(Oe=N(Oe,We),Oe.return=Ve,Oe)}function Le(Ve,Oe,We,Et){var pn=We.type;return pn===W?bt(Ve,Oe,We.props.children,Et,We.key):Oe!==null&&(Oe.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Ae&&Yr(pn)===Oe.type)?(Et=N(Oe,We.props),Et.ref=Tn(Ve,Oe,We),Et.return=Ve,Et):(Et=hp(We.type,We.key,We.props,null,Ve.mode,Et),Et.ref=Tn(Ve,Oe,We),Et.return=Ve,Et)}function Ye(Ve,Oe,We,Et){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==We.containerInfo||Oe.stateNode.implementation!==We.implementation?(Oe=Wg(We,Ve.mode,Et),Oe.return=Ve,Oe):(Oe=N(Oe,We.children||[]),Oe.return=Ve,Oe)}function bt(Ve,Oe,We,Et,pn){return Oe===null||Oe.tag!==7?(Oe=Iu(We,Ve.mode,Et,pn),Oe.return=Ve,Oe):(Oe=N(Oe,We),Oe.return=Ve,Oe)}function St(Ve,Oe,We){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=Hg(""+Oe,Ve.mode,We),Oe.return=Ve,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case ee:return We=hp(Oe.type,Oe.key,Oe.props,null,Ve.mode,We),We.ref=Tn(Ve,null,Oe),We.return=Ve,We;case ae:return Oe=Wg(Oe,Ve.mode,We),Oe.return=Ve,Oe;case Ae:var Et=Oe._init;return St(Ve,Et(Oe._payload),We)}if(ve(Oe)||ge(Oe))return Oe=Iu(Oe,Ve.mode,We,null),Oe.return=Ve,Oe;ur(Ve,Oe)}return null}function xt(Ve,Oe,We,Et){var pn=Oe!==null?Oe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return pn!==null?null:Se(Ve,Oe,""+We,Et);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case ee:return We.key===pn?Le(Ve,Oe,We,Et):null;case ae:return We.key===pn?Ye(Ve,Oe,We,Et):null;case Ae:return pn=We._init,xt(Ve,Oe,pn(We._payload),Et)}if(ve(We)||ge(We))return pn!==null?null:bt(Ve,Oe,We,Et,null);ur(Ve,We)}return null}function Wt(Ve,Oe,We,Et,pn){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Ve=Ve.get(We)||null,Se(Oe,Ve,""+Et,pn);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case ee:return Ve=Ve.get(Et.key===null?We:Et.key)||null,Le(Oe,Ve,Et,pn);case ae:return Ve=Ve.get(Et.key===null?We:Et.key)||null,Ye(Oe,Ve,Et,pn);case Ae:var Sn=Et._init;return Wt(Ve,Oe,We,Sn(Et._payload),pn)}if(ve(Et)||ge(Et))return Ve=Ve.get(We)||null,bt(Oe,Ve,Et,pn,null);ur(Oe,Et)}return null}function rn(Ve,Oe,We,Et){for(var pn=null,Sn=null,jn=Oe,On=Oe=0,Fi=null;jn!==null&&On<We.length;On++){jn.index>On?(Fi=jn,jn=null):Fi=jn.sibling;var Lr=xt(Ve,jn,We[On],Et);if(Lr===null){jn===null&&(jn=Fi);break}i&&jn&&Lr.alternate===null&&l(Ve,jn),Oe=A(Lr,Oe,On),Sn===null?pn=Lr:Sn.sibling=Lr,Sn=Lr,jn=Fi}if(On===We.length)return d(Ve,jn),lt&&Fe(Ve,On),pn;if(jn===null){for(;On<We.length;On++)jn=St(Ve,We[On],Et),jn!==null&&(Oe=A(jn,Oe,On),Sn===null?pn=jn:Sn.sibling=jn,Sn=jn);return lt&&Fe(Ve,On),pn}for(jn=g(Ve,jn);On<We.length;On++)Fi=Wt(jn,Ve,On,We[On],Et),Fi!==null&&(i&&Fi.alternate!==null&&jn.delete(Fi.key===null?On:Fi.key),Oe=A(Fi,Oe,On),Sn===null?pn=Fi:Sn.sibling=Fi,Sn=Fi);return i&&jn.forEach(function(Uc){return l(Ve,Uc)}),lt&&Fe(Ve,On),pn}function cn(Ve,Oe,We,Et){var pn=ge(We);if(typeof pn!="function")throw Error(n(150));if(We=pn.call(We),We==null)throw Error(n(151));for(var Sn=pn=null,jn=Oe,On=Oe=0,Fi=null,Lr=We.next();jn!==null&&!Lr.done;On++,Lr=We.next()){jn.index>On?(Fi=jn,jn=null):Fi=jn.sibling;var Uc=xt(Ve,jn,Lr.value,Et);if(Uc===null){jn===null&&(jn=Fi);break}i&&jn&&Uc.alternate===null&&l(Ve,jn),Oe=A(Uc,Oe,On),Sn===null?pn=Uc:Sn.sibling=Uc,Sn=Uc,jn=Fi}if(Lr.done)return d(Ve,jn),lt&&Fe(Ve,On),pn;if(jn===null){for(;!Lr.done;On++,Lr=We.next())Lr=St(Ve,Lr.value,Et),Lr!==null&&(Oe=A(Lr,Oe,On),Sn===null?pn=Lr:Sn.sibling=Lr,Sn=Lr);return lt&&Fe(Ve,On),pn}for(jn=g(Ve,jn);!Lr.done;On++,Lr=We.next())Lr=Wt(jn,Ve,On,Lr.value,Et),Lr!==null&&(i&&Lr.alternate!==null&&jn.delete(Lr.key===null?On:Lr.key),Oe=A(Lr,Oe,On),Sn===null?pn=Lr:Sn.sibling=Lr,Sn=Lr);return i&&jn.forEach(function(Wj){return l(Ve,Wj)}),lt&&Fe(Ve,On),pn}function ni(Ve,Oe,We,Et){if(typeof We=="object"&&We!==null&&We.type===W&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case ee:e:{for(var pn=We.key,Sn=Oe;Sn!==null;){if(Sn.key===pn){if(pn=We.type,pn===W){if(Sn.tag===7){d(Ve,Sn.sibling),Oe=N(Sn,We.props.children),Oe.return=Ve,Ve=Oe;break e}}else if(Sn.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Ae&&Yr(pn)===Sn.type){d(Ve,Sn.sibling),Oe=N(Sn,We.props),Oe.ref=Tn(Ve,Sn,We),Oe.return=Ve,Ve=Oe;break e}d(Ve,Sn);break}else l(Ve,Sn);Sn=Sn.sibling}We.type===W?(Oe=Iu(We.props.children,Ve.mode,Et,We.key),Oe.return=Ve,Ve=Oe):(Et=hp(We.type,We.key,We.props,null,Ve.mode,Et),Et.ref=Tn(Ve,Oe,We),Et.return=Ve,Ve=Et)}return G(Ve);case ae:e:{for(Sn=We.key;Oe!==null;){if(Oe.key===Sn)if(Oe.tag===4&&Oe.stateNode.containerInfo===We.containerInfo&&Oe.stateNode.implementation===We.implementation){d(Ve,Oe.sibling),Oe=N(Oe,We.children||[]),Oe.return=Ve,Ve=Oe;break e}else{d(Ve,Oe);break}else l(Ve,Oe);Oe=Oe.sibling}Oe=Wg(We,Ve.mode,Et),Oe.return=Ve,Ve=Oe}return G(Ve);case Ae:return Sn=We._init,ni(Ve,Oe,Sn(We._payload),Et)}if(ve(We))return rn(Ve,Oe,We,Et);if(ge(We))return cn(Ve,Oe,We,Et);ur(Ve,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Oe!==null&&Oe.tag===6?(d(Ve,Oe.sibling),Oe=N(Oe,We),Oe.return=Ve,Ve=Oe):(d(Ve,Oe),Oe=Hg(We,Ve.mode,Et),Oe.return=Ve,Ve=Oe),G(Ve)):d(Ve,Oe)}return ni}var Ws=pi(!0),gs=pi(!1),ei=Za(null),mi=null,ls=null,gr=null;function _r(){gr=ls=mi=null}function cs(i){var l=ei.current;Ir(ei),i._currentValue=l}function Ar(i,l,d){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===d)break;i=i.return}}function js(i,l){mi=i,gr=ls=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Oa=!0),i.firstContext=null)}function Cs(i){var l=i._currentValue;if(gr!==i)if(i={context:i,memoizedValue:l,next:null},ls===null){if(mi===null)throw Error(n(308));ls=i,mi.dependencies={lanes:0,firstContext:i}}else ls=ls.next=i;return l}var Gr=null;function Li(i){Gr===null?Gr=[i]:Gr.push(i)}function Ur(i,l,d,g){var N=l.interleaved;return N===null?(d.next=d,Li(l)):(d.next=N.next,N.next=d),l.interleaved=d,Kr(i,g)}function Kr(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Gs=!1;function Ci(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ia(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ds(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Is(i,l,d){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Pr&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,Kr(i,d)}return N=g.interleaved,N===null?(l.next=l,Li(g)):(l.next=N.next,N.next=l),g.interleaved=l,Kr(i,d)}function Ri(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,ln(i,d)}}function Qr(i,l){var d=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var N=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var G={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};A===null?N=A=G:A=A.next=G,d=d.next}while(d!==null);A===null?N=A=l:A=A.next=l}else N=A=l;d={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:A,shared:g.shared,effects:g.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function Di(i,l,d,g){var N=i.updateQueue;Gs=!1;var A=N.firstBaseUpdate,G=N.lastBaseUpdate,Se=N.shared.pending;if(Se!==null){N.shared.pending=null;var Le=Se,Ye=Le.next;Le.next=null,G===null?A=Ye:G.next=Ye,G=Le;var bt=i.alternate;bt!==null&&(bt=bt.updateQueue,Se=bt.lastBaseUpdate,Se!==G&&(Se===null?bt.firstBaseUpdate=Ye:Se.next=Ye,bt.lastBaseUpdate=Le))}if(A!==null){var St=N.baseState;G=0,bt=Ye=Le=null,Se=A;do{var xt=Se.lane,Wt=Se.eventTime;if((g&xt)===xt){bt!==null&&(bt=bt.next={eventTime:Wt,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var rn=i,cn=Se;switch(xt=l,Wt=d,cn.tag){case 1:if(rn=cn.payload,typeof rn=="function"){St=rn.call(Wt,St,xt);break e}St=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=cn.payload,xt=typeof rn=="function"?rn.call(Wt,St,xt):rn,xt==null)break e;St=De({},St,xt);break e;case 2:Gs=!0}}Se.callback!==null&&Se.lane!==0&&(i.flags|=64,xt=N.effects,xt===null?N.effects=[Se]:xt.push(Se))}else Wt={eventTime:Wt,lane:xt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},bt===null?(Ye=bt=Wt,Le=St):bt=bt.next=Wt,G|=xt;if(Se=Se.next,Se===null){if(Se=N.shared.pending,Se===null)break;xt=Se,Se=xt.next,xt.next=null,N.lastBaseUpdate=xt,N.shared.pending=null}}while(!0);if(bt===null&&(Le=St),N.baseState=Le,N.firstBaseUpdate=Ye,N.lastBaseUpdate=bt,l=N.shared.interleaved,l!==null){N=l;do G|=N.lane,N=N.next;while(N!==l)}else A===null&&(N.shared.lanes=0);Eu|=G,i.lanes=G,i.memoizedState=St}}function Fa(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],N=g.callback;if(N!==null){if(g.callback=null,g=d,typeof N!="function")throw Error(n(191,N));N.call(g)}}}var Ya={},gi=Za(Ya),Fs=Za(Ya),Nl=Za(Ya);function Fo(i){if(i===Ya)throw Error(n(174));return i}function Ec(i,l){switch(qr(Nl,l),qr(Fs,i),qr(gi,Ya),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:$e(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=$e(l,i)}Ir(gi),qr(gi,l)}function bo(){Ir(gi),Ir(Fs),Ir(Nl)}function Kh(i){Fo(Nl.current);var l=Fo(gi.current),d=$e(l,i.type);l!==d&&(qr(Fs,i),qr(gi,d))}function Rf(i){Fs.current===i&&(Ir(gi),Ir(Fs))}var ns=Za(0);function Xa(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Df=[];function If(){for(var i=0;i<Df.length;i++)Df[i]._workInProgressVersionPrimary=null;Df.length=0}var ud=q.ReactCurrentDispatcher,dd=q.ReactCurrentBatchConfig,wo=0,us=null,Ks=null,Os=null,Lc=!1,Oo=!1,Rc=0,vg=0;function ti(){throw Error(n(321))}function fd(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!ws(i[d],l[d]))return!1;return!0}function Pu(i,l,d,g,N,A){if(wo=A,us=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ud.current=i===null||i.memoizedState===null?xj:yj,i=d(g,N),Oo){A=0;do{if(Oo=!1,Rc=0,25<=A)throw Error(n(301));A+=1,Os=Ks=null,l.updateQueue=null,ud.current=bj,i=d(g,N)}while(Oo)}if(ud.current=Jh,l=Ks!==null&&Ks.next!==null,wo=0,Os=Ks=us=null,Lc=!1,l)throw Error(n(300));return i}function No(){var i=Rc!==0;return Rc=0,i}function Ja(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Os===null?us.memoizedState=Os=i:Os=Os.next=i,Os}function ba(){if(Ks===null){var i=us.alternate;i=i!==null?i.memoizedState:null}else i=Ks.next;var l=Os===null?us.memoizedState:Os.next;if(l!==null)Os=l,Ks=i;else{if(i===null)throw Error(n(310));Ks=i,i={memoizedState:Ks.memoizedState,baseState:Ks.baseState,baseQueue:Ks.baseQueue,queue:Ks.queue,next:null},Os===null?us.memoizedState=Os=i:Os=Os.next=i}return Os}function ku(i,l){return typeof l=="function"?l(i):l}function hd(i){var l=ba(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=Ks,N=g.baseQueue,A=d.pending;if(A!==null){if(N!==null){var G=N.next;N.next=A.next,A.next=G}g.baseQueue=N=A,d.pending=null}if(N!==null){A=N.next,g=g.baseState;var Se=G=null,Le=null,Ye=A;do{var bt=Ye.lane;if((wo&bt)===bt)Le!==null&&(Le=Le.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),g=Ye.hasEagerState?Ye.eagerState:i(g,Ye.action);else{var St={lane:bt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Le===null?(Se=Le=St,G=g):Le=Le.next=St,us.lanes|=bt,Eu|=bt}Ye=Ye.next}while(Ye!==null&&Ye!==A);Le===null?G=g:Le.next=Se,ws(g,l.memoizedState)||(Oa=!0),l.memoizedState=g,l.baseState=G,l.baseQueue=Le,d.lastRenderedState=g}if(i=d.interleaved,i!==null){N=i;do A=N.lane,us.lanes|=A,Eu|=A,N=N.next;while(N!==i)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Sl(i){var l=ba(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=d.dispatch,N=d.pending,A=l.memoizedState;if(N!==null){d.pending=null;var G=N=N.next;do A=i(A,G.action),G=G.next;while(G!==N);ws(A,l.memoizedState)||(Oa=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),d.lastRenderedState=A}return[A,g]}function Qh(){}function Ff(i,l){var d=us,g=ba(),N=l(),A=!ws(g.memoizedState,N);if(A&&(g.memoizedState=N,Oa=!0),g=g.queue,gd(Yh.bind(null,d,g,i),[i]),g.getSnapshot!==l||A||Os!==null&&Os.memoizedState.tag&1){if(d.flags|=2048,wa(9,Of.bind(null,d,g,N,l),void 0,null),Ii===null)throw Error(n(349));(wo&30)!==0||Zh(d,l,N)}return N}function Zh(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=us.updateQueue,l===null?(l={lastEffect:null,stores:null},us.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function Of(i,l,d,g){l.value=d,l.getSnapshot=g,Dc(l)&&pd(i)}function Yh(i,l,d){return d(function(){Dc(l)&&pd(i)})}function Dc(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!ws(i,d)}catch{return!0}}function pd(i){var l=Kr(i,1);l!==null&&zo(l,i,1,-1)}function Tu(i){var l=Ja();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:i},l.queue=i,i=i.dispatch=vj.bind(null,us,i),[l.memoizedState,i]}function wa(i,l,d,g){return i={tag:i,create:l,destroy:d,deps:g,next:null},l=us.updateQueue,l===null?(l={lastEffect:null,stores:null},us.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(g=d.next,d.next=i,i.next=g,l.lastEffect=i)),i}function Mo(){return ba().memoizedState}function eo(i,l,d,g){var N=Ja();us.flags|=i,N.memoizedState=wa(1|l,d,void 0,g===void 0?null:g)}function sc(i,l,d,g){var N=ba();g=g===void 0?null:g;var A=void 0;if(Ks!==null){var G=Ks.memoizedState;if(A=G.destroy,g!==null&&fd(g,G.deps)){N.memoizedState=wa(l,d,A,g);return}}us.flags|=i,N.memoizedState=wa(1|l,d,A,g)}function md(i,l){return eo(8390656,8,i,l)}function gd(i,l){return sc(2048,8,i,l)}function Xh(i,l){return sc(4,2,i,l)}function vd(i,l){return sc(4,4,i,l)}function xd(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Ov(i,l,d){return d=d!=null?d.concat([i]):null,sc(4,4,xd.bind(null,l,i),d)}function xg(){}function Mv(i,l){var d=ba();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&fd(l,g[1])?g[0]:(d.memoizedState=[i,l],i)}function Bv(i,l){var d=ba();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&fd(l,g[1])?g[0]:(i=i(),d.memoizedState=[i,l],i)}function qv(i,l,d){return(wo&21)===0?(i.baseState&&(i.baseState=!1,Oa=!0),i.memoizedState=d):(ws(d,l)||(d=bn(),us.lanes|=d,Eu|=d,i.baseState=!0),l)}function mj(i,l){var d=E;E=d!==0&&4>d?d:4,i(!0);var g=dd.transition;dd.transition={};try{i(!1),l()}finally{E=d,dd.transition=g}}function Uv(){return ba().memoizedState}function gj(i,l,d){var g=Mc(i);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},zv(i))$v(l,d);else if(d=Ur(i,l,d,g),d!==null){var N=Sa();zo(d,i,g,N),Vv(d,l,g)}}function vj(i,l,d){var g=Mc(i),N={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(zv(i))$v(l,N);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var G=l.lastRenderedState,Se=A(G,d);if(N.hasEagerState=!0,N.eagerState=Se,ws(Se,G)){var Le=l.interleaved;Le===null?(N.next=N,Li(l)):(N.next=Le.next,Le.next=N),l.interleaved=N;return}}catch{}d=Ur(i,l,N,g),d!==null&&(N=Sa(),zo(d,i,g,N),Vv(d,l,g))}}function zv(i){var l=i.alternate;return i===us||l!==null&&l===us}function $v(i,l){Oo=Lc=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function Vv(i,l,d){if((d&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,ln(i,d)}}var Jh={readContext:Cs,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},xj={readContext:Cs,useCallback:function(i,l){return Ja().memoizedState=[i,l===void 0?null:l],i},useContext:Cs,useEffect:md,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,eo(4194308,4,xd.bind(null,l,i),d)},useLayoutEffect:function(i,l){return eo(4194308,4,i,l)},useInsertionEffect:function(i,l){return eo(4,2,i,l)},useMemo:function(i,l){var d=Ja();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var g=Ja();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=gj.bind(null,us,i),[g.memoizedState,i]},useRef:function(i){var l=Ja();return i={current:i},l.memoizedState=i},useState:Tu,useDebugValue:xg,useDeferredValue:function(i){return Ja().memoizedState=i},useTransition:function(){var i=Tu(!1),l=i[0];return i=mj.bind(null,i[1]),Ja().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var g=us,N=Ja();if(lt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Ii===null)throw Error(n(349));(wo&30)!==0||Zh(g,l,d)}N.memoizedState=d;var A={value:d,getSnapshot:l};return N.queue=A,md(Yh.bind(null,g,A,i),[i]),g.flags|=2048,wa(9,Of.bind(null,g,A,d,l),void 0,null),d},useId:function(){var i=Ja(),l=Ii.identifierPrefix;if(lt){var d=fe,g=ze;d=(g&~(1<<32-Qe(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Rc++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=vg++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},yj={readContext:Cs,useCallback:Mv,useContext:Cs,useEffect:gd,useImperativeHandle:Ov,useInsertionEffect:Xh,useLayoutEffect:vd,useMemo:Bv,useReducer:hd,useRef:Mo,useState:function(){return hd(ku)},useDebugValue:xg,useDeferredValue:function(i){var l=ba();return qv(l,Ks.memoizedState,i)},useTransition:function(){var i=hd(ku)[0],l=ba().memoizedState;return[i,l]},useMutableSource:Qh,useSyncExternalStore:Ff,useId:Uv,unstable_isNewReconciler:!1},bj={readContext:Cs,useCallback:Mv,useContext:Cs,useEffect:gd,useImperativeHandle:Ov,useInsertionEffect:Xh,useLayoutEffect:vd,useMemo:Bv,useReducer:Sl,useRef:Mo,useState:function(){return Sl(ku)},useDebugValue:xg,useDeferredValue:function(i){var l=ba();return Ks===null?l.memoizedState=i:qv(l,Ks.memoizedState,i)},useTransition:function(){var i=Sl(ku)[0],l=ba().memoizedState;return[i,l]},useMutableSource:Qh,useSyncExternalStore:Ff,useId:Uv,unstable_isNewReconciler:!1};function Bo(i,l){if(i&&i.defaultProps){l=De({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function yg(i,l,d,g){l=i.memoizedState,d=d(g,l),d=d==null?l:De({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var ep={isMounted:function(i){return(i=i._reactInternals)?es(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var g=Sa(),N=Mc(i),A=Ds(g,N);A.payload=l,d!=null&&(A.callback=d),l=Is(i,A,N),l!==null&&(zo(l,i,N,g),Ri(l,i,N))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var g=Sa(),N=Mc(i),A=Ds(g,N);A.tag=1,A.payload=l,d!=null&&(A.callback=d),l=Is(i,A,N),l!==null&&(zo(l,i,N,g),Ri(l,i,N))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=Sa(),g=Mc(i),N=Ds(d,g);N.tag=2,l!=null&&(N.callback=l),l=Is(i,N,g),l!==null&&(zo(l,i,g,d),Ri(l,i,g))}};function Hv(i,l,d,g,N,A,G){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,A,G):l.prototype&&l.prototype.isPureReactComponent?!ea(d,g)||!ea(N,A):!0}function Wv(i,l,d){var g=!1,N=wl,A=l.contextType;return typeof A=="object"&&A!==null?A=Cs(A):(N=sa(l)?nc:ji.current,g=l.contextTypes,A=(g=g!=null)?Tc(i,N):wl),l=new l(d,A),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ep,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=N,i.__reactInternalMemoizedMaskedChildContext=A),l}function Gv(i,l,d,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==i&&ep.enqueueReplaceState(l,l.state,null)}function bg(i,l,d,g){var N=i.stateNode;N.props=d,N.state=i.memoizedState,N.refs={},Ci(i);var A=l.contextType;typeof A=="object"&&A!==null?N.context=Cs(A):(A=sa(l)?nc:ji.current,N.context=Tc(i,A)),N.state=i.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(yg(i,l,A,d),N.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&ep.enqueueReplaceState(N,N.state,null),Di(i,d,N,g),N.state=i.memoizedState),typeof N.componentDidMount=="function"&&(i.flags|=4194308)}function yd(i,l){try{var d="",g=l;do d+=me(g),g=g.return;while(g);var N=d}catch(A){N=`
Error generating stack: `+A.message+`
`+A.stack}return{value:i,source:l,stack:N,digest:null}}function wg(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function Ng(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var wj=typeof WeakMap=="function"?WeakMap:Map;function Kv(i,l,d){d=Ds(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){op||(op=!0,Og=g),Ng(i,l)},d}function Qv(i,l,d){d=Ds(-1,d),d.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;d.payload=function(){return g(N)},d.callback=function(){Ng(i,l)}}var A=i.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(d.callback=function(){Ng(i,l),typeof g!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})}),d}function Zv(i,l,d){var g=i.pingCache;if(g===null){g=i.pingCache=new wj;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(d)||(N.add(d),i=Ij.bind(null,i,l,d),l.then(i,i))}function Yv(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function Xv(i,l,d,g,N){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Ds(-1,1),l.tag=2,Is(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=N,i)}var Nj=q.ReactCurrentOwner,Oa=!1;function Na(i,l,d,g){l.child=i===null?gs(l,null,d,g):Ws(l,i.child,d,g)}function Jv(i,l,d,g,N){d=d.render;var A=l.ref;return js(l,N),g=Pu(i,l,d,g,A,N),d=No(),i!==null&&!Oa?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,ic(i,l,N)):(lt&&d&&nt(l),l.flags|=1,Na(i,l,g,N),l.child)}function ex(i,l,d,g,N){if(i===null){var A=d.type;return typeof A=="function"&&!Vg(A)&&A.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=A,tx(i,l,A,g,N)):(i=hp(d.type,null,g,l,l.mode,N),i.ref=l.ref,i.return=l,l.child=i)}if(A=i.child,(i.lanes&N)===0){var G=A.memoizedProps;if(d=d.compare,d=d!==null?d:ea,d(G,g)&&i.ref===l.ref)return ic(i,l,N)}return l.flags|=1,i=qc(A,g),i.ref=l.ref,i.return=l,l.child=i}function tx(i,l,d,g,N){if(i!==null){var A=i.memoizedProps;if(ea(A,g)&&i.ref===l.ref)if(Oa=!1,l.pendingProps=g=A,(i.lanes&N)!==0)(i.flags&131072)!==0&&(Oa=!0);else return l.lanes=i.lanes,ic(i,l,N)}return Sg(i,l,d,g,N)}function nx(i,l,d){var g=l.pendingProps,N=g.children,A=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(wd,to),to|=d;else{if((d&1073741824)===0)return i=A!==null?A.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,qr(wd,to),to|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=A!==null?A.baseLanes:d,qr(wd,to),to|=g}else A!==null?(g=A.baseLanes|d,l.memoizedState=null):g=d,qr(wd,to),to|=g;return Na(i,l,N,d),l.child}function rx(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Sg(i,l,d,g,N){var A=sa(d)?nc:ji.current;return A=Tc(l,A),js(l,N),d=Pu(i,l,d,g,A,N),g=No(),i!==null&&!Oa?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,ic(i,l,N)):(lt&&g&&nt(l),l.flags|=1,Na(i,l,d,N),l.child)}function sx(i,l,d,g,N){if(sa(d)){var A=!0;rc(l)}else A=!1;if(js(l,N),l.stateNode===null)np(i,l),Wv(l,d,g),bg(l,d,g,N),g=!0;else if(i===null){var G=l.stateNode,Se=l.memoizedProps;G.props=Se;var Le=G.context,Ye=d.contextType;typeof Ye=="object"&&Ye!==null?Ye=Cs(Ye):(Ye=sa(d)?nc:ji.current,Ye=Tc(l,Ye));var bt=d.getDerivedStateFromProps,St=typeof bt=="function"||typeof G.getSnapshotBeforeUpdate=="function";St||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Se!==g||Le!==Ye)&&Gv(l,G,g,Ye),Gs=!1;var xt=l.memoizedState;G.state=xt,Di(l,g,G,N),Le=l.memoizedState,Se!==g||xt!==Le||ra.current||Gs?(typeof bt=="function"&&(yg(l,d,bt,g),Le=l.memoizedState),(Se=Gs||Hv(l,d,Se,g,xt,Le,Ye))?(St||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(l.flags|=4194308)):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Le),G.props=g,G.state=Le,G.context=Ye,g=Se):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{G=l.stateNode,ia(i,l),Se=l.memoizedProps,Ye=l.type===l.elementType?Se:Bo(l.type,Se),G.props=Ye,St=l.pendingProps,xt=G.context,Le=d.contextType,typeof Le=="object"&&Le!==null?Le=Cs(Le):(Le=sa(d)?nc:ji.current,Le=Tc(l,Le));var Wt=d.getDerivedStateFromProps;(bt=typeof Wt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Se!==St||xt!==Le)&&Gv(l,G,g,Le),Gs=!1,xt=l.memoizedState,G.state=xt,Di(l,g,G,N);var rn=l.memoizedState;Se!==St||xt!==rn||ra.current||Gs?(typeof Wt=="function"&&(yg(l,d,Wt,g),rn=l.memoizedState),(Ye=Gs||Hv(l,d,Ye,g,xt,rn,Le)||!1)?(bt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(g,rn,Le),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(g,rn,Le)),typeof G.componentDidUpdate=="function"&&(l.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof G.componentDidUpdate!="function"||Se===i.memoizedProps&&xt===i.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Se===i.memoizedProps&&xt===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=rn),G.props=g,G.state=rn,G.context=Le,g=Ye):(typeof G.componentDidUpdate!="function"||Se===i.memoizedProps&&xt===i.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Se===i.memoizedProps&&xt===i.memoizedState||(l.flags|=1024),g=!1)}return jg(i,l,d,g,A,N)}function jg(i,l,d,g,N,A){rx(i,l);var G=(l.flags&128)!==0;if(!g&&!G)return N&&Gh(l,d,!1),ic(i,l,A);g=l.stateNode,Nj.current=l;var Se=G&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&G?(l.child=Ws(l,i.child,null,A),l.child=Ws(l,null,Se,A)):Na(i,l,Se,A),l.memoizedState=g.state,N&&Gh(l,d,!0),l.child}function ix(i){var l=i.stateNode;l.pendingContext?Wh(i,l.pendingContext,l.pendingContext!==l.context):l.context&&Wh(i,l.context,!1),Ec(i,l.containerInfo)}function ax(i,l,d,g,N){return Xt(),It(N),l.flags|=256,Na(i,l,d,g),l.child}var Cg={dehydrated:null,treeContext:null,retryLane:0};function _g(i){return{baseLanes:i,cachePool:null,transitions:null}}function ox(i,l,d){var g=l.pendingProps,N=ns.current,A=!1,G=(l.flags&128)!==0,Se;if((Se=G)||(Se=i!==null&&i.memoizedState===null?!1:(N&2)!==0),Se?(A=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(N|=1),qr(ns,N&1),i===null)return nn(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(G=g.children,i=g.fallback,A?(g=l.mode,A=l.child,G={mode:"hidden",children:G},(g&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=G):A=pp(G,g,0,null),i=Iu(i,g,d,null),A.return=l,i.return=l,A.sibling=i,l.child=A,l.child.memoizedState=_g(d),l.memoizedState=Cg,i):Ag(l,G));if(N=i.memoizedState,N!==null&&(Se=N.dehydrated,Se!==null))return Sj(i,l,G,g,Se,N,d);if(A){A=g.fallback,G=l.mode,N=i.child,Se=N.sibling;var Le={mode:"hidden",children:g.children};return(G&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=Le,l.deletions=null):(g=qc(N,Le),g.subtreeFlags=N.subtreeFlags&14680064),Se!==null?A=qc(Se,A):(A=Iu(A,G,d,null),A.flags|=2),A.return=l,g.return=l,g.sibling=A,l.child=g,g=A,A=l.child,G=i.child.memoizedState,G=G===null?_g(d):{baseLanes:G.baseLanes|d,cachePool:null,transitions:G.transitions},A.memoizedState=G,A.childLanes=i.childLanes&~d,l.memoizedState=Cg,g}return A=i.child,i=A.sibling,g=qc(A,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=g,l.memoizedState=null,g}function Ag(i,l){return l=pp({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function tp(i,l,d,g){return g!==null&&It(g),Ws(l,i.child,null,d),i=Ag(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Sj(i,l,d,g,N,A,G){if(d)return l.flags&256?(l.flags&=-257,g=wg(Error(n(422))),tp(i,l,G,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(A=g.fallback,N=l.mode,g=pp({mode:"visible",children:g.children},N,0,null),A=Iu(A,N,G,null),A.flags|=2,g.return=l,A.return=l,g.sibling=A,l.child=g,(l.mode&1)!==0&&Ws(l,i.child,null,G),l.child.memoizedState=_g(G),l.memoizedState=Cg,A);if((l.mode&1)===0)return tp(i,l,G,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var Se=g.dgst;return g=Se,A=Error(n(419)),g=wg(A,g,void 0),tp(i,l,G,g)}if(Se=(G&i.childLanes)!==0,Oa||Se){if(g=Ii,g!==null){switch(G&-G){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|G))!==0?0:N,N!==0&&N!==A.retryLane&&(A.retryLane=N,Kr(i,N),zo(g,i,N,-1))}return $g(),g=wg(Error(n(421))),tp(i,l,G,g)}return N.data==="$?"?(l.flags|=128,l.child=i.child,l=Fj.bind(null,i),N._reactRetry=l,null):(i=A.treeContext,tt=Vi(N.nextSibling),Je=l,lt=!0,dt=null,i!==null&&(ie[de++]=ze,ie[de++]=fe,ie[de++]=Ee,ze=i.id,fe=i.overflow,Ee=l),l=Ag(l,g.children),l.flags|=4096,l)}function lx(i,l,d){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),Ar(i.return,l,d)}function Pg(i,l,d,g,N){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:N}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=d,A.tailMode=N)}function cx(i,l,d){var g=l.pendingProps,N=g.revealOrder,A=g.tail;if(Na(i,l,g.children,d),g=ns.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&lx(i,d,l);else if(i.tag===19)lx(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(qr(ns,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)i=d.alternate,i!==null&&Xa(i)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),Pg(l,!1,N,d,A);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(i=N.alternate,i!==null&&Xa(i)===null){l.child=N;break}i=N.sibling,N.sibling=d,d=N,N=i}Pg(l,!0,d,null,A);break;case"together":Pg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function np(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function ic(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Eu|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=qc(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=qc(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function jj(i,l,d){switch(l.tag){case 3:ix(l),Xt();break;case 5:Kh(l);break;case 1:sa(l.type)&&rc(l);break;case 4:Ec(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;qr(ei,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(qr(ns,ns.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?ox(i,l,d):(qr(ns,ns.current&1),i=ic(i,l,d),i!==null?i.sibling:null);qr(ns,ns.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(i.flags&128)!==0){if(g)return cx(i,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),qr(ns,ns.current),g)break;return null;case 22:case 23:return l.lanes=0,nx(i,l,d)}return ic(i,l,d)}var ux,kg,dx,fx;ux=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},kg=function(){},dx=function(i,l,d,g){var N=i.memoizedProps;if(N!==g){i=l.stateNode,Fo(gi.current);var A=null;switch(d){case"input":N=Ft(i,N),g=Ft(i,g),A=[];break;case"select":N=De({},N,{value:void 0}),g=De({},g,{value:void 0}),A=[];break;case"textarea":N=D(i,N),g=D(i,g),A=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Ac)}tn(d,g);var G;d=null;for(Ye in N)if(!g.hasOwnProperty(Ye)&&N.hasOwnProperty(Ye)&&N[Ye]!=null)if(Ye==="style"){var Se=N[Ye];for(G in Se)Se.hasOwnProperty(G)&&(d||(d={}),d[G]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(a.hasOwnProperty(Ye)?A||(A=[]):(A=A||[]).push(Ye,null));for(Ye in g){var Le=g[Ye];if(Se=N?.[Ye],g.hasOwnProperty(Ye)&&Le!==Se&&(Le!=null||Se!=null))if(Ye==="style")if(Se){for(G in Se)!Se.hasOwnProperty(G)||Le&&Le.hasOwnProperty(G)||(d||(d={}),d[G]="");for(G in Le)Le.hasOwnProperty(G)&&Se[G]!==Le[G]&&(d||(d={}),d[G]=Le[G])}else d||(A||(A=[]),A.push(Ye,d)),d=Le;else Ye==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Se=Se?Se.__html:void 0,Le!=null&&Se!==Le&&(A=A||[]).push(Ye,Le)):Ye==="children"?typeof Le!="string"&&typeof Le!="number"||(A=A||[]).push(Ye,""+Le):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ye)?(Le!=null&&Ye==="onScroll"&&Wr("scroll",i),A||Se===Le||(A=[])):(A=A||[]).push(Ye,Le))}d&&(A=A||[]).push("style",d);var Ye=A;(l.updateQueue=Ye)&&(l.flags|=4)}},fx=function(i,l,d,g){d!==g&&(l.flags|=4)};function Mf(i,l){if(!lt)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function aa(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,g=0;if(l)for(var N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=g,i.childLanes=d,l}function Cj(i,l,d){var g=l.pendingProps;switch(He(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aa(l),null;case 1:return sa(l.type)&&cd(),aa(l),null;case 3:return g=l.stateNode,bo(),Ir(ra),Ir(ji),If(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Ss(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dt!==null&&(qg(dt),dt=null))),kg(i,l),aa(l),null;case 5:Rf(l);var N=Fo(Nl.current);if(d=l.type,i!==null&&l.stateNode!=null)dx(i,l,d,g,N),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return aa(l),null}if(i=Fo(gi.current),Ss(l)){g=l.stateNode,d=l.type;var A=l.memoizedProps;switch(g[yo]=l,g[Pc]=A,i=(l.mode&1)!==0,d){case"dialog":Wr("cancel",g),Wr("close",g);break;case"iframe":case"object":case"embed":Wr("load",g);break;case"video":case"audio":for(N=0;N<yl.length;N++)Wr(yl[N],g);break;case"source":Wr("error",g);break;case"img":case"image":case"link":Wr("error",g),Wr("load",g);break;case"details":Wr("toggle",g);break;case"input":le(g,A),Wr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!A.multiple},Wr("invalid",g);break;case"textarea":H(g,A),Wr("invalid",g)}tn(d,A),N=null;for(var G in A)if(A.hasOwnProperty(G)){var Se=A[G];G==="children"?typeof Se=="string"?g.textContent!==Se&&(A.suppressHydrationWarning!==!0&&ld(g.textContent,Se,i),N=["children",Se]):typeof Se=="number"&&g.textContent!==""+Se&&(A.suppressHydrationWarning!==!0&&ld(g.textContent,Se,i),N=["children",""+Se]):a.hasOwnProperty(G)&&Se!=null&&G==="onScroll"&&Wr("scroll",g)}switch(d){case"input":Ze(g),X(g,A,!0);break;case"textarea":Ze(g),Ne(g);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(g.onclick=Ac)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{G=N.nodeType===9?N:N.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Te(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=G.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=G.createElement(d,{is:g.is}):(i=G.createElement(d),d==="select"&&(G=i,g.multiple?G.multiple=!0:g.size&&(G.size=g.size))):i=G.createElementNS(i,d),i[yo]=l,i[Pc]=g,ux(i,l,!1,!1),l.stateNode=i;e:{switch(G=Ge(d,g),d){case"dialog":Wr("cancel",i),Wr("close",i),N=g;break;case"iframe":case"object":case"embed":Wr("load",i),N=g;break;case"video":case"audio":for(N=0;N<yl.length;N++)Wr(yl[N],i);N=g;break;case"source":Wr("error",i),N=g;break;case"img":case"image":case"link":Wr("error",i),Wr("load",i),N=g;break;case"details":Wr("toggle",i),N=g;break;case"input":le(i,g),N=Ft(i,g),Wr("invalid",i);break;case"option":N=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},N=De({},g,{value:void 0}),Wr("invalid",i);break;case"textarea":H(i,g),N=D(i,g),Wr("invalid",i);break;default:N=g}tn(d,N),Se=N;for(A in Se)if(Se.hasOwnProperty(A)){var Le=Se[A];A==="style"?Gt(i,Le):A==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&ct(i,Le)):A==="children"?typeof Le=="string"?(d!=="textarea"||Le!=="")&&jt(i,Le):typeof Le=="number"&&jt(i,""+Le):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(a.hasOwnProperty(A)?Le!=null&&A==="onScroll"&&Wr("scroll",i):Le!=null&&v(i,A,Le,G))}switch(d){case"input":Ze(i),X(i,g,!1);break;case"textarea":Ze(i),Ne(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Re(g.value));break;case"select":i.multiple=!!g.multiple,A=g.value,A!=null?re(i,!!g.multiple,A,!1):g.defaultValue!=null&&re(i,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(i.onclick=Ac)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return aa(l),null;case 6:if(i&&l.stateNode!=null)fx(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Fo(Nl.current),Fo(gi.current),Ss(l)){if(g=l.stateNode,d=l.memoizedProps,g[yo]=l,(A=g.nodeValue!==d)&&(i=Je,i!==null))switch(i.tag){case 3:ld(g.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ld(g.nodeValue,d,(i.mode&1)!==0)}A&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[yo]=l,l.stateNode=g}return aa(l),null;case 13:if(Ir(ns),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(lt&&tt!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Hn(),Xt(),l.flags|=98560,A=!1;else if(A=Ss(l),g!==null&&g.dehydrated!==null){if(i===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[yo]=l}else Xt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;aa(l),A=!1}else dt!==null&&(qg(dt),dt=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(ns.current&1)!==0?_i===0&&(_i=3):$g())),l.updateQueue!==null&&(l.flags|=4),aa(l),null);case 4:return bo(),kg(i,l),i===null&&Xl(l.stateNode.containerInfo),aa(l),null;case 10:return cs(l.type._context),aa(l),null;case 17:return sa(l.type)&&cd(),aa(l),null;case 19:if(Ir(ns),A=l.memoizedState,A===null)return aa(l),null;if(g=(l.flags&128)!==0,G=A.rendering,G===null)if(g)Mf(A,!1);else{if(_i!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(G=Xa(i),G!==null){for(l.flags|=128,Mf(A,!1),g=G.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)A=d,i=g,A.flags&=14680066,G=A.alternate,G===null?(A.childLanes=0,A.lanes=i,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=G.childLanes,A.lanes=G.lanes,A.child=G.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=G.memoizedProps,A.memoizedState=G.memoizedState,A.updateQueue=G.updateQueue,A.type=G.type,i=G.dependencies,A.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return qr(ns,ns.current&1|2),l.child}i=i.sibling}A.tail!==null&&Un()>Nd&&(l.flags|=128,g=!0,Mf(A,!1),l.lanes=4194304)}else{if(!g)if(i=Xa(G),i!==null){if(l.flags|=128,g=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Mf(A,!0),A.tail===null&&A.tailMode==="hidden"&&!G.alternate&&!lt)return aa(l),null}else 2*Un()-A.renderingStartTime>Nd&&d!==1073741824&&(l.flags|=128,g=!0,Mf(A,!1),l.lanes=4194304);A.isBackwards?(G.sibling=l.child,l.child=G):(d=A.last,d!==null?d.sibling=G:l.child=G,A.last=G)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=Un(),l.sibling=null,d=ns.current,qr(ns,g?d&1|2:d&1),l):(aa(l),null);case 22:case 23:return zg(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(to&1073741824)!==0&&(aa(l),l.subtreeFlags&6&&(l.flags|=8192)):aa(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function _j(i,l){switch(He(l),l.tag){case 1:return sa(l.type)&&cd(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return bo(),Ir(ra),Ir(ji),If(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Rf(l),null;case 13:if(Ir(ns),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Xt()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ir(ns),null;case 4:return bo(),null;case 10:return cs(l.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var rp=!1,oa=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,en=null;function bd(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Qs(i,l,g)}else d.current=null}function Tg(i,l,d){try{d()}catch(g){Qs(i,l,g)}}var hx=!1;function Pj(i,l){if(Cu=ol,i=Hs(),Qa(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var N=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break e}var G=0,Se=-1,Le=-1,Ye=0,bt=0,St=i,xt=null;t:for(;;){for(var Wt;St!==d||N!==0&&St.nodeType!==3||(Se=G+N),St!==A||g!==0&&St.nodeType!==3||(Le=G+g),St.nodeType===3&&(G+=St.nodeValue.length),(Wt=St.firstChild)!==null;)xt=St,St=Wt;for(;;){if(St===i)break t;if(xt===d&&++Ye===N&&(Se=G),xt===A&&++bt===g&&(Le=G),(Wt=St.nextSibling)!==null)break;St=xt,xt=St.parentNode}St=Wt}d=Se===-1||Le===-1?null:{start:Se,end:Le}}else d=null}d=d||{start:0,end:0}}else d=null;for(ec={focusedElem:i,selectionRange:d},ol=!1,en=l;en!==null;)if(l=en,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,en=i;else for(;en!==null;){l=en;try{var rn=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var cn=rn.memoizedProps,ni=rn.memoizedState,Ve=l.stateNode,Oe=Ve.getSnapshotBeforeUpdate(l.elementType===l.type?cn:Bo(l.type,cn),ni);Ve.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var We=l.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Et){Qs(l,l.return,Et)}if(i=l.sibling,i!==null){i.return=l.return,en=i;break}en=l.return}return rn=hx,hx=!1,rn}function Bf(i,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&i)===i){var A=N.destroy;N.destroy=void 0,A!==void 0&&Tg(l,d,A)}N=N.next}while(N!==g)}}function sp(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Eg(i){var l=i.ref;if(l!==null){var d=i.stateNode;i.tag,i=d,typeof l=="function"?l(i):l.current=i}}function px(i){var l=i.alternate;l!==null&&(i.alternate=null,px(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[yo],delete l[Pc],delete l[na],delete l[mg],delete l[gg])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function mx(i){return i.tag===5||i.tag===3||i.tag===4}function gx(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||mx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lg(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Ac));else if(g!==4&&(i=i.child,i!==null))for(Lg(i,l,d),i=i.sibling;i!==null;)Lg(i,l,d),i=i.sibling}function Rg(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Rg(i,l,d),i=i.sibling;i!==null;)Rg(i,l,d),i=i.sibling}var Hi=null,qo=!1;function Ic(i,l,d){for(d=d.child;d!==null;)vx(i,l,d),d=d.sibling}function vx(i,l,d){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(vt,d)}catch{}switch(d.tag){case 5:oa||bd(d,l);case 6:var g=Hi,N=qo;Hi=null,Ic(i,l,d),Hi=g,qo=N,Hi!==null&&(qo?(i=Hi,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Hi.removeChild(d.stateNode));break;case 18:Hi!==null&&(qo?(i=Hi,d=d.stateNode,i.nodeType===8?Tf(i.parentNode,d):i.nodeType===1&&Tf(i,d),Ni(i)):Tf(Hi,d.stateNode));break;case 4:g=Hi,N=qo,Hi=d.stateNode.containerInfo,qo=!0,Ic(i,l,d),Hi=g,qo=N;break;case 0:case 11:case 14:case 15:if(!oa&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var A=N,G=A.destroy;A=A.tag,G!==void 0&&((A&2)!==0||(A&4)!==0)&&Tg(d,l,G),N=N.next}while(N!==g)}Ic(i,l,d);break;case 1:if(!oa&&(bd(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(Se){Qs(d,l,Se)}Ic(i,l,d);break;case 21:Ic(i,l,d);break;case 22:d.mode&1?(oa=(g=oa)||d.memoizedState!==null,Ic(i,l,d),oa=g):Ic(i,l,d);break;default:Ic(i,l,d)}}function xx(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new Aj),l.forEach(function(g){var N=Oj.bind(null,i,g);d.has(g)||(d.add(g),g.then(N,N))})}}function Uo(i,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var N=d[g];try{var A=i,G=l,Se=G;e:for(;Se!==null;){switch(Se.tag){case 5:Hi=Se.stateNode,qo=!1;break e;case 3:Hi=Se.stateNode.containerInfo,qo=!0;break e;case 4:Hi=Se.stateNode.containerInfo,qo=!0;break e}Se=Se.return}if(Hi===null)throw Error(n(160));vx(A,G,N),Hi=null,qo=!1;var Le=N.alternate;Le!==null&&(Le.return=null),N.return=null}catch(Ye){Qs(N,l,Ye)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yx(l,i),l=l.sibling}function yx(i,l){var d=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Uo(l,i),jl(i),g&4){try{Bf(3,i,i.return),sp(3,i)}catch(cn){Qs(i,i.return,cn)}try{Bf(5,i,i.return)}catch(cn){Qs(i,i.return,cn)}}break;case 1:Uo(l,i),jl(i),g&512&&d!==null&&bd(d,d.return);break;case 5:if(Uo(l,i),jl(i),g&512&&d!==null&&bd(d,d.return),i.flags&32){var N=i.stateNode;try{jt(N,"")}catch(cn){Qs(i,i.return,cn)}}if(g&4&&(N=i.stateNode,N!=null)){var A=i.memoizedProps,G=d!==null?d.memoizedProps:A,Se=i.type,Le=i.updateQueue;if(i.updateQueue=null,Le!==null)try{Se==="input"&&A.type==="radio"&&A.name!=null&&gt(N,A),Ge(Se,G);var Ye=Ge(Se,A);for(G=0;G<Le.length;G+=2){var bt=Le[G],St=Le[G+1];bt==="style"?Gt(N,St):bt==="dangerouslySetInnerHTML"?ct(N,St):bt==="children"?jt(N,St):v(N,bt,St,Ye)}switch(Se){case"input":xe(N,A);break;case"textarea":je(N,A);break;case"select":var xt=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!A.multiple;var Wt=A.value;Wt!=null?re(N,!!A.multiple,Wt,!1):xt!==!!A.multiple&&(A.defaultValue!=null?re(N,!!A.multiple,A.defaultValue,!0):re(N,!!A.multiple,A.multiple?[]:"",!1))}N[Pc]=A}catch(cn){Qs(i,i.return,cn)}}break;case 6:if(Uo(l,i),jl(i),g&4){if(i.stateNode===null)throw Error(n(162));N=i.stateNode,A=i.memoizedProps;try{N.nodeValue=A}catch(cn){Qs(i,i.return,cn)}}break;case 3:if(Uo(l,i),jl(i),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Ni(l.containerInfo)}catch(cn){Qs(i,i.return,cn)}break;case 4:Uo(l,i),jl(i);break;case 13:Uo(l,i),jl(i),N=i.child,N.flags&8192&&(A=N.memoizedState!==null,N.stateNode.isHidden=A,!A||N.alternate!==null&&N.alternate.memoizedState!==null||(Fg=Un())),g&4&&xx(i);break;case 22:if(bt=d!==null&&d.memoizedState!==null,i.mode&1?(oa=(Ye=oa)||bt,Uo(l,i),oa=Ye):Uo(l,i),jl(i),g&8192){if(Ye=i.memoizedState!==null,(i.stateNode.isHidden=Ye)&&!bt&&(i.mode&1)!==0)for(en=i,bt=i.child;bt!==null;){for(St=en=bt;en!==null;){switch(xt=en,Wt=xt.child,xt.tag){case 0:case 11:case 14:case 15:Bf(4,xt,xt.return);break;case 1:bd(xt,xt.return);var rn=xt.stateNode;if(typeof rn.componentWillUnmount=="function"){g=xt,d=xt.return;try{l=g,rn.props=l.memoizedProps,rn.state=l.memoizedState,rn.componentWillUnmount()}catch(cn){Qs(g,d,cn)}}break;case 5:bd(xt,xt.return);break;case 22:if(xt.memoizedState!==null){Nx(St);continue}}Wt!==null?(Wt.return=xt,en=Wt):Nx(St)}bt=bt.sibling}e:for(bt=null,St=i;;){if(St.tag===5){if(bt===null){bt=St;try{N=St.stateNode,Ye?(A=N.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Se=St.stateNode,Le=St.memoizedProps.style,G=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,Se.style.display=yn("display",G))}catch(cn){Qs(i,i.return,cn)}}}else if(St.tag===6){if(bt===null)try{St.stateNode.nodeValue=Ye?"":St.memoizedProps}catch(cn){Qs(i,i.return,cn)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===i)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===i)break e;for(;St.sibling===null;){if(St.return===null||St.return===i)break e;bt===St&&(bt=null),St=St.return}bt===St&&(bt=null),St.sibling.return=St.return,St=St.sibling}}break;case 19:Uo(l,i),jl(i),g&4&&xx(i);break;case 21:break;default:Uo(l,i),jl(i)}}function jl(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(mx(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(jt(N,""),g.flags&=-33);var A=gx(i);Rg(i,A,N);break;case 3:case 4:var G=g.stateNode.containerInfo,Se=gx(i);Lg(i,Se,G);break;default:throw Error(n(161))}}catch(Le){Qs(i,i.return,Le)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function kj(i,l,d){en=i,bx(i)}function bx(i,l,d){for(var g=(i.mode&1)!==0;en!==null;){var N=en,A=N.child;if(N.tag===22&&g){var G=N.memoizedState!==null||rp;if(!G){var Se=N.alternate,Le=Se!==null&&Se.memoizedState!==null||oa;Se=rp;var Ye=oa;if(rp=G,(oa=Le)&&!Ye)for(en=N;en!==null;)G=en,Le=G.child,G.tag===22&&G.memoizedState!==null?Sx(N):Le!==null?(Le.return=G,en=Le):Sx(N);for(;A!==null;)en=A,bx(A),A=A.sibling;en=N,rp=Se,oa=Ye}wx(i)}else(N.subtreeFlags&8772)!==0&&A!==null?(A.return=N,en=A):wx(i)}}function wx(i){for(;en!==null;){var l=en;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:oa||sp(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!oa)if(d===null)g.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:Bo(l.type,d.memoizedProps);g.componentDidUpdate(N,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&Fa(l,A,g);break;case 3:var G=l.updateQueue;if(G!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Fa(l,G,d)}break;case 5:var Se=l.stateNode;if(d===null&&l.flags&4){d=Se;var Le=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&d.focus();break;case"img":Le.src&&(d.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ye=l.alternate;if(Ye!==null){var bt=Ye.memoizedState;if(bt!==null){var St=bt.dehydrated;St!==null&&Ni(St)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}oa||l.flags&512&&Eg(l)}catch(xt){Qs(l,l.return,xt)}}if(l===i){en=null;break}if(d=l.sibling,d!==null){d.return=l.return,en=d;break}en=l.return}}function Nx(i){for(;en!==null;){var l=en;if(l===i){en=null;break}var d=l.sibling;if(d!==null){d.return=l.return,en=d;break}en=l.return}}function Sx(i){for(;en!==null;){var l=en;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{sp(4,l)}catch(Le){Qs(l,d,Le)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(Le){Qs(l,N,Le)}}var A=l.return;try{Eg(l)}catch(Le){Qs(l,A,Le)}break;case 5:var G=l.return;try{Eg(l)}catch(Le){Qs(l,G,Le)}}}catch(Le){Qs(l,l.return,Le)}if(l===i){en=null;break}var Se=l.sibling;if(Se!==null){Se.return=l.return,en=Se;break}en=l.return}}var Tj=Math.ceil,ip=q.ReactCurrentDispatcher,Dg=q.ReactCurrentOwner,So=q.ReactCurrentBatchConfig,Pr=0,Ii=null,vi=null,Wi=0,to=0,wd=Za(0),_i=0,qf=null,Eu=0,ap=0,Ig=0,Uf=null,Ma=null,Fg=0,Nd=1/0,ac=null,op=!1,Og=null,Fc=null,lp=!1,Oc=null,cp=0,zf=0,Mg=null,up=-1,dp=0;function Sa(){return(Pr&6)!==0?Un():up!==-1?up:up=Un()}function Mc(i){return(i.mode&1)===0?1:(Pr&2)!==0&&Wi!==0?Wi&-Wi:Rs.transition!==null?(dp===0&&(dp=bn()),dp):(i=E,i!==0||(i=window.event,i=i===void 0?16:fo(i.type)),i)}function zo(i,l,d,g){if(50<zf)throw zf=0,Mg=null,Error(n(185));kn(i,d,g),((Pr&2)===0||i!==Ii)&&(i===Ii&&((Pr&2)===0&&(ap|=d),_i===4&&Bc(i,Wi)),Ba(i,g),d===1&&Pr===0&&(l.mode&1)===0&&(Nd=Un()+500,Au&&T()))}function Ba(i,l){var d=i.callbackNode;Bt(i,l);var g=Mt(i,i===Ii?Wi:0);if(g===0)d!==null&&Qi(d),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(d!=null&&Qi(d),l===1)i.tag===0?C(Cx.bind(null,i)):x(Cx.bind(null,i)),hg(function(){(Pr&6)===0&&T()}),d=null;else{switch(oe(g)){case 1:d=fn;break;case 4:d=In;break;case 16:d=Nn;break;case 536870912:d=Fn;break;default:d=Nn}d=Rx(d,jx.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function jx(i,l){if(up=-1,dp=0,(Pr&6)!==0)throw Error(n(327));var d=i.callbackNode;if(Sd()&&i.callbackNode!==d)return null;var g=Mt(i,i===Ii?Wi:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=fp(i,g);else{l=g;var N=Pr;Pr|=2;var A=Ax();(Ii!==i||Wi!==l)&&(ac=null,Nd=Un()+500,Ru(i,l));do try{Rj();break}catch(Se){_x(i,Se)}while(!0);_r(),ip.current=A,Pr=N,vi!==null?l=0:(Ii=null,Wi=0,l=_i)}if(l!==0){if(l===2&&(N=Qt(i),N!==0&&(g=N,l=Bg(i,N))),l===1)throw d=qf,Ru(i,0),Bc(i,g),Ba(i,Un()),d;if(l===6)Bc(i,g);else{if(N=i.current.alternate,(g&30)===0&&!Ej(N)&&(l=fp(i,g),l===2&&(A=Qt(i),A!==0&&(g=A,l=Bg(i,A))),l===1))throw d=qf,Ru(i,0),Bc(i,g),Ba(i,Un()),d;switch(i.finishedWork=N,i.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Du(i,Ma,ac);break;case 3:if(Bc(i,g),(g&130023424)===g&&(l=Fg+500-Un(),10<l)){if(Mt(i,0)!==0)break;if(N=i.suspendedLanes,(N&g)!==g){Sa(),i.pingedLanes|=i.suspendedLanes&N;break}i.timeoutHandle=kf(Du.bind(null,i,Ma,ac),l);break}Du(i,Ma,ac);break;case 4:if(Bc(i,g),(g&4194240)===g)break;for(l=i.eventTimes,N=-1;0<g;){var G=31-Qe(g);A=1<<G,G=l[G],G>N&&(N=G),g&=~A}if(g=N,g=Un()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Tj(g/1960))-g,10<g){i.timeoutHandle=kf(Du.bind(null,i,Ma,ac),g);break}Du(i,Ma,ac);break;case 5:Du(i,Ma,ac);break;default:throw Error(n(329))}}}return Ba(i,Un()),i.callbackNode===d?jx.bind(null,i):null}function Bg(i,l){var d=Uf;return i.current.memoizedState.isDehydrated&&(Ru(i,l).flags|=256),i=fp(i,l),i!==2&&(l=Ma,Ma=d,l!==null&&qg(l)),i}function qg(i){Ma===null?Ma=i:Ma.push.apply(Ma,i)}function Ej(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var N=d[g],A=N.getSnapshot;N=N.value;try{if(!ws(A(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Bc(i,l){for(l&=~Ig,l&=~ap,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-Qe(l),g=1<<d;i[d]=-1,l&=~g}}function Cx(i){if((Pr&6)!==0)throw Error(n(327));Sd();var l=Mt(i,0);if((l&1)===0)return Ba(i,Un()),null;var d=fp(i,l);if(i.tag!==0&&d===2){var g=Qt(i);g!==0&&(l=g,d=Bg(i,g))}if(d===1)throw d=qf,Ru(i,0),Bc(i,l),Ba(i,Un()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Du(i,Ma,ac),Ba(i,Un()),null}function Ug(i,l){var d=Pr;Pr|=1;try{return i(l)}finally{Pr=d,Pr===0&&(Nd=Un()+500,Au&&T())}}function Lu(i){Oc!==null&&Oc.tag===0&&(Pr&6)===0&&Sd();var l=Pr;Pr|=1;var d=So.transition,g=E;try{if(So.transition=null,E=1,i)return i()}finally{E=g,So.transition=d,Pr=l,(Pr&6)===0&&T()}}function zg(){to=wd.current,Ir(wd)}function Ru(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,Vh(d)),vi!==null)for(d=vi.return;d!==null;){var g=d;switch(He(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&cd();break;case 3:bo(),Ir(ra),Ir(ji),If();break;case 5:Rf(g);break;case 4:bo();break;case 13:Ir(ns);break;case 19:Ir(ns);break;case 10:cs(g.type._context);break;case 22:case 23:zg()}d=d.return}if(Ii=i,vi=i=qc(i.current,null),Wi=to=l,_i=0,qf=null,Ig=ap=Eu=0,Ma=Uf=null,Gr!==null){for(l=0;l<Gr.length;l++)if(d=Gr[l],g=d.interleaved,g!==null){d.interleaved=null;var N=g.next,A=d.pending;if(A!==null){var G=A.next;A.next=N,g.next=G}d.pending=g}Gr=null}return i}function _x(i,l){do{var d=vi;try{if(_r(),ud.current=Jh,Lc){for(var g=us.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}Lc=!1}if(wo=0,Os=Ks=us=null,Oo=!1,Rc=0,Dg.current=null,d===null||d.return===null){_i=1,qf=l,vi=null;break}e:{var A=i,G=d.return,Se=d,Le=l;if(l=Wi,Se.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var Ye=Le,bt=Se,St=bt.tag;if((bt.mode&1)===0&&(St===0||St===11||St===15)){var xt=bt.alternate;xt?(bt.updateQueue=xt.updateQueue,bt.memoizedState=xt.memoizedState,bt.lanes=xt.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Wt=Yv(G);if(Wt!==null){Wt.flags&=-257,Xv(Wt,G,Se,A,l),Wt.mode&1&&Zv(A,Ye,l),l=Wt,Le=Ye;var rn=l.updateQueue;if(rn===null){var cn=new Set;cn.add(Le),l.updateQueue=cn}else rn.add(Le);break e}else{if((l&1)===0){Zv(A,Ye,l),$g();break e}Le=Error(n(426))}}else if(lt&&Se.mode&1){var ni=Yv(G);if(ni!==null){(ni.flags&65536)===0&&(ni.flags|=256),Xv(ni,G,Se,A,l),It(yd(Le,Se));break e}}A=Le=yd(Le,Se),_i!==4&&(_i=2),Uf===null?Uf=[A]:Uf.push(A),A=G;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var Ve=Kv(A,Le,l);Qr(A,Ve);break e;case 1:Se=Le;var Oe=A.type,We=A.stateNode;if((A.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Fc===null||!Fc.has(We)))){A.flags|=65536,l&=-l,A.lanes|=l;var Et=Qv(A,Se,l);Qr(A,Et);break e}}A=A.return}while(A!==null)}kx(d)}catch(pn){l=pn,vi===d&&d!==null&&(vi=d=d.return);continue}break}while(!0)}function Ax(){var i=ip.current;return ip.current=Jh,i===null?Jh:i}function $g(){(_i===0||_i===3||_i===2)&&(_i=4),Ii===null||(Eu&268435455)===0&&(ap&268435455)===0||Bc(Ii,Wi)}function fp(i,l){var d=Pr;Pr|=2;var g=Ax();(Ii!==i||Wi!==l)&&(ac=null,Ru(i,l));do try{Lj();break}catch(N){_x(i,N)}while(!0);if(_r(),Pr=d,ip.current=g,vi!==null)throw Error(n(261));return Ii=null,Wi=0,_i}function Lj(){for(;vi!==null;)Px(vi)}function Rj(){for(;vi!==null&&!qi();)Px(vi)}function Px(i){var l=Lx(i.alternate,i,to);i.memoizedProps=i.pendingProps,l===null?kx(i):vi=l,Dg.current=null}function kx(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=Cj(d,l,to),d!==null){vi=d;return}}else{if(d=_j(d,l),d!==null){d.flags&=32767,vi=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{_i=6,vi=null;return}}if(l=l.sibling,l!==null){vi=l;return}vi=l=i}while(l!==null);_i===0&&(_i=5)}function Du(i,l,d){var g=E,N=So.transition;try{So.transition=null,E=1,Dj(i,l,d,g)}finally{So.transition=N,E=g}return null}function Dj(i,l,d,g){do Sd();while(Oc!==null);if((Pr&6)!==0)throw Error(n(327));d=i.finishedWork;var N=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var A=d.lanes|d.childLanes;if(An(i,A),i===Ii&&(vi=Ii=null,Wi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||lp||(lp=!0,Rx(Nn,function(){return Sd(),null})),A=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||A){A=So.transition,So.transition=null;var G=E;E=1;var Se=Pr;Pr|=4,Dg.current=null,Pj(i,d),yx(d,i),vu(ec),ol=!!Cu,ec=Cu=null,i.current=d,kj(d),ki(),Pr=Se,E=G,So.transition=A}else i.current=d;if(lp&&(lp=!1,Oc=i,cp=N),A=i.pendingLanes,A===0&&(Fc=null),it(d.stateNode),Ba(i,Un()),l!==null)for(g=i.onRecoverableError,d=0;d<l.length;d++)N=l[d],g(N.value,{componentStack:N.stack,digest:N.digest});if(op)throw op=!1,i=Og,Og=null,i;return(cp&1)!==0&&i.tag!==0&&Sd(),A=i.pendingLanes,(A&1)!==0?i===Mg?zf++:(zf=0,Mg=i):zf=0,T(),null}function Sd(){if(Oc!==null){var i=oe(cp),l=So.transition,d=E;try{if(So.transition=null,E=16>i?16:i,Oc===null)var g=!1;else{if(i=Oc,Oc=null,cp=0,(Pr&6)!==0)throw Error(n(331));var N=Pr;for(Pr|=4,en=i.current;en!==null;){var A=en,G=A.child;if((en.flags&16)!==0){var Se=A.deletions;if(Se!==null){for(var Le=0;Le<Se.length;Le++){var Ye=Se[Le];for(en=Ye;en!==null;){var bt=en;switch(bt.tag){case 0:case 11:case 15:Bf(8,bt,A)}var St=bt.child;if(St!==null)St.return=bt,en=St;else for(;en!==null;){bt=en;var xt=bt.sibling,Wt=bt.return;if(px(bt),bt===Ye){en=null;break}if(xt!==null){xt.return=Wt,en=xt;break}en=Wt}}}var rn=A.alternate;if(rn!==null){var cn=rn.child;if(cn!==null){rn.child=null;do{var ni=cn.sibling;cn.sibling=null,cn=ni}while(cn!==null)}}en=A}}if((A.subtreeFlags&2064)!==0&&G!==null)G.return=A,en=G;else e:for(;en!==null;){if(A=en,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Bf(9,A,A.return)}var Ve=A.sibling;if(Ve!==null){Ve.return=A.return,en=Ve;break e}en=A.return}}var Oe=i.current;for(en=Oe;en!==null;){G=en;var We=G.child;if((G.subtreeFlags&2064)!==0&&We!==null)We.return=G,en=We;else e:for(G=Oe;en!==null;){if(Se=en,(Se.flags&2048)!==0)try{switch(Se.tag){case 0:case 11:case 15:sp(9,Se)}}catch(pn){Qs(Se,Se.return,pn)}if(Se===G){en=null;break e}var Et=Se.sibling;if(Et!==null){Et.return=Se.return,en=Et;break e}en=Se.return}}if(Pr=N,T(),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(vt,i)}catch{}g=!0}return g}finally{E=d,So.transition=l}}return!1}function Tx(i,l,d){l=yd(d,l),l=Kv(i,l,1),i=Is(i,l,1),l=Sa(),i!==null&&(kn(i,1,l),Ba(i,l))}function Qs(i,l,d){if(i.tag===3)Tx(i,i,d);else for(;l!==null;){if(l.tag===3){Tx(l,i,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Fc===null||!Fc.has(g))){i=yd(d,i),i=Qv(l,i,1),l=Is(l,i,1),i=Sa(),l!==null&&(kn(l,1,i),Ba(l,i));break}}l=l.return}}function Ij(i,l,d){var g=i.pingCache;g!==null&&g.delete(l),l=Sa(),i.pingedLanes|=i.suspendedLanes&d,Ii===i&&(Wi&d)===d&&(_i===4||_i===3&&(Wi&130023424)===Wi&&500>Un()-Fg?Ru(i,0):Ig|=d),Ba(i,l)}function Ex(i,l){l===0&&((i.mode&1)===0?l=1:(l=Nt,Nt<<=1,(Nt&130023424)===0&&(Nt=4194304)));var d=Sa();i=Kr(i,l),i!==null&&(kn(i,l,d),Ba(i,d))}function Fj(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),Ex(i,d)}function Oj(i,l){var d=0;switch(i.tag){case 13:var g=i.stateNode,N=i.memoizedState;N!==null&&(d=N.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Ex(i,d)}var Lx;Lx=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||ra.current)Oa=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return Oa=!1,jj(i,l,d);Oa=(i.flags&131072)!==0}else Oa=!1,lt&&(l.flags&1048576)!==0&&Ue(l,J,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;np(i,l),i=l.pendingProps;var N=Tc(l,ji.current);js(l,d),N=Pu(null,l,g,i,N,d);var A=No();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,sa(g)?(A=!0,rc(l)):A=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ci(l),N.updater=ep,l.stateNode=N,N._reactInternals=l,bg(l,g,i,d),l=jg(null,l,g,!0,A,d)):(l.tag=0,lt&&A&&nt(l),Na(null,l,N,d),l=l.child),l;case 16:g=l.elementType;e:{switch(np(i,l),i=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=Bj(g),i=Bo(g,i),N){case 0:l=Sg(null,l,g,i,d);break e;case 1:l=sx(null,l,g,i,d);break e;case 11:l=Jv(null,l,g,i,d);break e;case 14:l=ex(null,l,g,Bo(g.type,i),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Bo(g,N),Sg(i,l,g,N,d);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Bo(g,N),sx(i,l,g,N,d);case 3:e:{if(ix(l),i===null)throw Error(n(387));g=l.pendingProps,A=l.memoizedState,N=A.element,ia(i,l),Di(l,g,null,d);var G=l.memoizedState;if(g=G.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){N=yd(Error(n(423)),l),l=ax(i,l,g,d,N);break e}else if(g!==N){N=yd(Error(n(424)),l),l=ax(i,l,g,d,N);break e}else for(tt=Vi(l.stateNode.containerInfo.firstChild),Je=l,lt=!0,dt=null,d=gs(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Xt(),g===N){l=ic(i,l,d);break e}Na(i,l,g,d)}l=l.child}return l;case 5:return Kh(l),i===null&&nn(l),g=l.type,N=l.pendingProps,A=i!==null?i.memoizedProps:null,G=N.children,Pf(g,N)?G=null:A!==null&&Pf(g,A)&&(l.flags|=32),rx(i,l),Na(i,l,G,d),l.child;case 6:return i===null&&nn(l),null;case 13:return ox(i,l,d);case 4:return Ec(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Ws(l,null,g,d):Na(i,l,g,d),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Bo(g,N),Jv(i,l,g,N,d);case 7:return Na(i,l,l.pendingProps,d),l.child;case 8:return Na(i,l,l.pendingProps.children,d),l.child;case 12:return Na(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,A=l.memoizedProps,G=N.value,qr(ei,g._currentValue),g._currentValue=G,A!==null)if(ws(A.value,G)){if(A.children===N.children&&!ra.current){l=ic(i,l,d);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var Se=A.dependencies;if(Se!==null){G=A.child;for(var Le=Se.firstContext;Le!==null;){if(Le.context===g){if(A.tag===1){Le=Ds(-1,d&-d),Le.tag=2;var Ye=A.updateQueue;if(Ye!==null){Ye=Ye.shared;var bt=Ye.pending;bt===null?Le.next=Le:(Le.next=bt.next,bt.next=Le),Ye.pending=Le}}A.lanes|=d,Le=A.alternate,Le!==null&&(Le.lanes|=d),Ar(A.return,d,l),Se.lanes|=d;break}Le=Le.next}}else if(A.tag===10)G=A.type===l.type?null:A.child;else if(A.tag===18){if(G=A.return,G===null)throw Error(n(341));G.lanes|=d,Se=G.alternate,Se!==null&&(Se.lanes|=d),Ar(G,d,l),G=A.sibling}else G=A.child;if(G!==null)G.return=A;else for(G=A;G!==null;){if(G===l){G=null;break}if(A=G.sibling,A!==null){A.return=G.return,G=A;break}G=G.return}A=G}Na(i,l,N.children,d),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,js(l,d),N=Cs(N),g=g(N),l.flags|=1,Na(i,l,g,d),l.child;case 14:return g=l.type,N=Bo(g,l.pendingProps),N=Bo(g.type,N),ex(i,l,g,N,d);case 15:return tx(i,l,l.type,l.pendingProps,d);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Bo(g,N),np(i,l),l.tag=1,sa(g)?(i=!0,rc(l)):i=!1,js(l,d),Wv(l,g,N),bg(l,g,N,d),jg(null,l,g,!0,i,d);case 19:return cx(i,l,d);case 22:return nx(i,l,d)}throw Error(n(156,l.tag))};function Rx(i,l){return Xs(i,l)}function Mj(i,l,d,g){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jo(i,l,d,g){return new Mj(i,l,d,g)}function Vg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bj(i){if(typeof i=="function")return Vg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===R)return 11;if(i===Ce)return 14}return 2}function qc(i,l){var d=i.alternate;return d===null?(d=jo(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function hp(i,l,d,g,N,A){var G=2;if(g=i,typeof i=="function")Vg(i)&&(G=1);else if(typeof i=="string")G=5;else e:switch(i){case W:return Iu(d.children,N,A,l);case te:G=8,N|=8;break;case Q:return i=jo(12,d,l,N|2),i.elementType=Q,i.lanes=A,i;case z:return i=jo(13,d,l,N),i.elementType=z,i.lanes=A,i;case Y:return i=jo(19,d,l,N),i.elementType=Y,i.lanes=A,i;case Pe:return pp(d,N,A,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ue:G=10;break e;case O:G=9;break e;case R:G=11;break e;case Ce:G=14;break e;case Ae:G=16,g=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=jo(G,d,l,N),l.elementType=i,l.type=g,l.lanes=A,l}function Iu(i,l,d,g){return i=jo(7,i,g,l),i.lanes=d,i}function pp(i,l,d,g){return i=jo(22,i,g,l),i.elementType=Pe,i.lanes=d,i.stateNode={isHidden:!1},i}function Hg(i,l,d){return i=jo(6,i,null,l),i.lanes=d,i}function Wg(i,l,d){return l=jo(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function qj(i,l,d,g,N){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Er(0),this.expirationTimes=Er(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Gg(i,l,d,g,N,A,G,Se,Le){return i=new qj(i,l,d,Se,Le),l===1?(l=1,A===!0&&(l|=8)):l=0,A=jo(3,null,null,l),i.current=A,A.stateNode=i,A.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ci(A),i}function Uj(i,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:g==null?null:""+g,children:i,containerInfo:l,implementation:d}}function Dx(i){if(!i)return wl;i=i._reactInternals;e:{if(es(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(sa(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(sa(d))return Lf(i,d,l)}return l}function Ix(i,l,d,g,N,A,G,Se,Le){return i=Gg(d,g,!0,i,N,A,G,Se,Le),i.context=Dx(null),d=i.current,g=Sa(),N=Mc(d),A=Ds(g,N),A.callback=l??null,Is(d,A,N),i.current.lanes=N,kn(i,N,g),Ba(i,g),i}function mp(i,l,d,g){var N=l.current,A=Sa(),G=Mc(N);return d=Dx(d),l.context===null?l.context=d:l.pendingContext=d,l=Ds(A,G),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=Is(N,l,G),i!==null&&(zo(i,N,G,A),Ri(i,N,G)),G}function gp(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function Fx(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Kg(i,l){Fx(i,l),(i=i.alternate)&&Fx(i,l)}function zj(){return null}var Ox=typeof reportError=="function"?reportError:function(i){console.error(i)};function Qg(i){this._internalRoot=i}vp.prototype.render=Qg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));mp(i,l,null,null)},vp.prototype.unmount=Qg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Lu(function(){mp(null,i,null,null)}),l[Ei]=null}};function vp(i){this._internalRoot=i}vp.prototype.unstable_scheduleHydration=function(i){if(i){var l=Rt();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Zi.length&&l!==0&&l<Zi[d].priority;d++);Zi.splice(d,0,i),d===0&&al(i)}};function Zg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Mx(){}function $j(i,l,d,g,N){if(N){if(typeof g=="function"){var A=g;g=function(){var Ye=gp(G);A.call(Ye)}}var G=Ix(l,g,i,0,null,!1,!1,"",Mx);return i._reactRootContainer=G,i[Ei]=G.current,Xl(i.nodeType===8?i.parentNode:i),Lu(),G}for(;N=i.lastChild;)i.removeChild(N);if(typeof g=="function"){var Se=g;g=function(){var Ye=gp(Le);Se.call(Ye)}}var Le=Gg(i,0,!1,null,null,!1,!1,"",Mx);return i._reactRootContainer=Le,i[Ei]=Le.current,Xl(i.nodeType===8?i.parentNode:i),Lu(function(){mp(l,Le,d,g)}),Le}function yp(i,l,d,g,N){var A=d._reactRootContainer;if(A){var G=A;if(typeof N=="function"){var Se=N;N=function(){var Le=gp(G);Se.call(Le)}}mp(l,G,i,N)}else G=$j(d,l,i,N,g);return gp(G)}he=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=kt(l.pendingLanes);d!==0&&(ln(l,d|1),Ba(l,Un()),(Pr&6)===0&&(Nd=Un()+500,T()))}break;case 13:Lu(function(){var g=Kr(i,1);if(g!==null){var N=Sa();zo(g,i,1,N)}}),Kg(i,1)}},_e=function(i){if(i.tag===13){var l=Kr(i,134217728);if(l!==null){var d=Sa();zo(l,i,134217728,d)}Kg(i,134217728)}},we=function(i){if(i.tag===13){var l=Mc(i),d=Kr(i,l);if(d!==null){var g=Sa();zo(d,i,l,g)}Kg(i,l)}},Rt=function(){return E},Gn=function(i,l){var d=E;try{return E=i,l()}finally{E=d}},an=function(i,l,d){switch(l){case"input":if(xe(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==i&&g.form===i.form){var N=_u(g);if(!N)throw Error(n(90));ft(g),xe(g,N)}}}break;case"textarea":je(i,d);break;case"select":l=d.value,l!=null&&re(i,!!d.multiple,l,!1)}},ir=Ug,Nr=Lu;var Vj={usingClientEntryPoint:!1,Events:[kc,tc,_u,Dn,ys,Ug]},$f={findFiberByHostInstance:bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hj={bundleType:$f.bundleType,version:$f.version,rendererPackageName:$f.rendererPackageName,rendererConfig:$f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=mr(i),i===null?null:i.stateNode},findFiberByHostInstance:$f.findFiberByHostInstance||zj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{vt=bp.inject(Hj),Ke=bp}catch{}}return qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj,qa.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(l))throw Error(n(200));return Uj(i,l,null,d)},qa.createRoot=function(i,l){if(!Zg(i))throw Error(n(299));var d=!1,g="",N=Ox;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=Gg(i,1,!1,null,null,d,!1,g,N),i[Ei]=l.current,Xl(i.nodeType===8?i.parentNode:i),new Qg(l)},qa.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=mr(l),i=i===null?null:i.stateNode,i},qa.flushSync=function(i){return Lu(i)},qa.hydrate=function(i,l,d){if(!xp(l))throw Error(n(200));return yp(null,i,l,!0,d)},qa.hydrateRoot=function(i,l,d){if(!Zg(i))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,N=!1,A="",G=Ox;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onRecoverableError!==void 0&&(G=d.onRecoverableError)),l=Ix(l,null,i,1,d??null,N,!1,A,G),i[Ei]=l.current,Xl(i),g)for(i=0;i<g.length;i++)d=g[i],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new vp(l)},qa.render=function(i,l,d){if(!xp(l))throw Error(n(200));return yp(null,i,l,!1,d)},qa.unmountComponentAtNode=function(i){if(!xp(i))throw Error(n(40));return i._reactRootContainer?(Lu(function(){yp(null,null,i,!1,function(){i._reactRootContainer=null,i[Ei]=null})}),!0):!1},qa.unstable_batchedUpdates=Ug,qa.unstable_renderSubtreeIntoContainer=function(i,l,d,g){if(!xp(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return yp(i,l,d,!1,g)},qa.version="18.3.1-next-f1338f8080-20240426",qa}var Wx;function R5(){if(Wx)return Jg.exports;Wx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jg.exports=Jj(),Jg.exports}var Gx;function e3(){if(Gx)return wp;Gx=1;var t=R5();return wp.createRoot=t.createRoot,wp.hydrateRoot=t.hydrateRoot,wp}var t3=e3();function n3(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,a,o,u=[],c="",f=t.split("/");for(f[0]||f.shift();a=f.shift();)n=a[0],n==="*"?(u.push(n),c+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=a.indexOf("?",1),o=a.indexOf(".",1),u.push(a.substring(1,~r?r:~o?o:a.length)),c+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~r?"?":"")+"\\"+a.substring(o))):c+="/"+a;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var k=Rm();const xn=L5(k),D5=Gj({__proto__:null,default:xn},[k]);var n0={exports:{}},r0={};var Kx;function r3(){if(Kx)return r0;Kx=1;var t=Rm();function e(b,j){return b===j&&(b!==0||1/b===1/j)||b!==b&&j!==j}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(b,j){var y=j(),I=r({inst:{value:y,getSnapshot:j}}),S=I[0].inst,P=I[1];return o(function(){S.value=y,S.getSnapshot=j,f(S)&&P({inst:S})},[b,y,j]),a(function(){return f(S)&&P({inst:S}),b(function(){f(S)&&P({inst:S})})},[b]),u(y),y}function f(b){var j=b.getSnapshot;b=b.value;try{var y=j();return!n(b,y)}catch{return!0}}function p(b,j){return j()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return r0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,r0}var Qx;function s3(){return Qx||(Qx=1,n0.exports=r3()),n0.exports}var i3=s3();const a3=D5.useInsertionEffect,o3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I5=o3?k.useLayoutEffect:k.useEffect,l3=a3||I5,B1=t=>{const e=k.useRef([t,(...n)=>e[0](...n)]).current;return l3(()=>{e[0]=t}),e[1]},c3="popstate",q1="pushState",U1="replaceState",u3="hashchange",Zx=[c3,q1,U1,u3],d3=t=>{for(const e of Zx)addEventListener(e,t);return()=>{for(const e of Zx)removeEventListener(e,t)}},F5=(t,e)=>i3.useSyncExternalStore(d3,t,e),f3=()=>location.search,h3=({ssrSearch:t=""}={})=>F5(f3,()=>t),Yx=()=>location.pathname,p3=({ssrPath:t}={})=>F5(Yx,t?()=>t:Yx),m3=(t,{replace:e=!1,state:n=null}={})=>history[e?U1:q1](n,"",t),g3=(t={})=>[p3(t),m3],Xx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Xx]>"u"){for(const t of[q1,U1]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Xx,{value:!0})}const v3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",O5=(t="")=>t==="/"?"":t,x3=(t,e)=>t[0]==="~"?t.slice(1):O5(e)+t,y3=(t="",e)=>v3(Jx(O5(t)),Jx(e)),Jx=t=>{try{return decodeURI(t)}catch{return t}},M5={hook:g3,searchHook:h3,parser:n3,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},B5=k.createContext(M5),Eh=()=>k.useContext(B5),q5={},U5=k.createContext(q5),Xu=()=>k.useContext(U5),Dm=t=>{const[e,n]=t.hook(t);return[y3(t.base,e),B1((r,a)=>n(x3(r,t.base),a))]},za=()=>Dm(Eh()),z5=(t,e,n,r)=>{const{pattern:a,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),u=a.exec(n)||[],[c,...f]=u;return c!==void 0?[!0,(()=>{const p=o!==!1?Object.fromEntries(o.map((b,j)=>[b,f[j]])):u.groups;let m={...f};return p&&Object.assign(m,p),m})(),...r?[c]:[]]:[!1,null]},b3=({children:t,...e})=>{const n=Eh(),r=e.hook?M5:n;let a=r;const[o,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??e.hook?.hrefs;let c=k.useRef({}),f=c.current,p=f;for(let m in r){const b=m==="base"?r[m]+(e[m]||""):e[m]||r[m];f===p&&b!==p[m]&&(c.current=p={...p}),p[m]=b,b!==r[m]&&(a=p)}return k.createElement(B5.Provider,{value:a,children:t})},e2=({children:t,component:e},n)=>e?k.createElement(e,{params:n}):typeof t=="function"?t(n):t,w3=t=>{let e=k.useRef(q5),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Oi=({path:t,nest:e,match:n,...r})=>{const a=Eh(),[o]=Dm(a),[u,c,f]=n??z5(a.parser,t,o,e),p=w3({...Xu(),...c});if(!u)return null;const m=f?k.createElement(b3,{base:f},e2(r,p)):e2(r,p);return k.createElement(U5.Provider,{value:p,children:m})},$5=k.forwardRef((t,e)=>{const n=Eh(),[r,a]=Dm(n),{to:o="",href:u=o,onClick:c,asChild:f,children:p,className:m,replace:b,state:j,...y}=t,I=B1(P=>{P.ctrlKey||P.metaKey||P.altKey||P.shiftKey||P.button!==0||(c?.(P),P.defaultPrevented||(P.preventDefault(),a(u,t)))}),S=n.hrefs(u[0]==="~"?u.slice(1):n.base+u,n);return f&&k.isValidElement(p)?k.cloneElement(p,{onClick:I,href:S}):k.createElement("a",{...y,onClick:I,href:S,className:m?.call?m(r===u):m,children:p,ref:e})}),V5=t=>Array.isArray(t)?t.flatMap(e=>V5(e&&e.type===k.Fragment?e.props.children:e)):[t],N3=({children:t,location:e})=>{const n=Eh(),[r]=Dm(n);for(const a of V5(t)){let o=0;if(k.isValidElement(a)&&(o=z5(n.parser,a.props.path,e||r,a.props.nest))[0])return k.cloneElement(a,{match:o})}return null},S3=t=>{const{to:e,href:n=e}=t,[,r]=za(),a=B1(()=>r(e||n,t));return I5(()=>{a()},[]),null};var of=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Uu=typeof window>"u"||"Deno"in globalThis;function Co(){}function j3(t,e){return typeof t=="function"?t(e):t}function W0(t){return typeof t=="number"&&t>=0&&t!==1/0}function H5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Bd(t,e){return typeof t=="function"?t(e):t}function Wo(t,e){return typeof t=="function"?t(e):t}function t2(t,e){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:u,stale:c}=t;if(u){if(r){if(e.queryHash!==z1(u,e.options))return!1}else if(!lh(e.queryKey,u))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function n2(t,e){const{exact:n,status:r,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(zu(e.options.mutationKey)!==zu(o))return!1}else if(!lh(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function z1(t,e){return(e?.queryKeyHashFn||zu)(t)}function zu(t){return JSON.stringify(t,(e,n)=>G0(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function lh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!lh(t[n],e[n])):!1}function W5(t,e){if(t===e)return t;const n=r2(t)&&r2(e);if(n||G0(t)&&G0(e)){const r=n?t:Object.keys(t),a=r.length,o=n?e:Object.keys(e),u=o.length,c=n?[]:{};let f=0;for(let p=0;p<u;p++){const m=n?p:o[p];(!n&&r.includes(m)||n)&&t[m]===void 0&&e[m]===void 0?(c[m]=void 0,f++):(c[m]=W5(t[m],e[m]),c[m]===t[m]&&t[m]!==void 0&&f++)}return a===u&&f===a?t:c}return e}function rm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function r2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function G0(t){if(!s2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!s2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s2(t){return Object.prototype.toString.call(t)==="[object Object]"}function C3(t){return new Promise(e=>{setTimeout(e,t)})}function K0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?W5(t,e):e}function _3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function A3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $1=Symbol();function G5(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===$1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var P3=class extends of{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Uu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},V1=new P3,k3=class extends of{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Uu&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},sm=new k3;function Q0(){let t,e;const n=new Promise((a,o)=>{t=a,e=o});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),e(a)},n}function T3(t){return Math.min(1e3*2**t,3e4)}function K5(t){return(t??"online")==="online"?sm.isOnline():!0}var Q5=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function s0(t){return t instanceof Q5}function Z5(t){let e=!1,n=0,r=!1,a;const o=Q0(),u=S=>{r||(j(new Q5(S)),t.abort?.())},c=()=>{e=!0},f=()=>{e=!1},p=()=>V1.isFocused()&&(t.networkMode==="always"||sm.isOnline())&&t.canRun(),m=()=>K5(t.networkMode)&&t.canRun(),b=S=>{r||(r=!0,t.onSuccess?.(S),a?.(),o.resolve(S))},j=S=>{r||(r=!0,t.onError?.(S),a?.(),o.reject(S))},y=()=>new Promise(S=>{a=P=>{(r||p())&&S(P)},t.onPause?.()}).then(()=>{a=void 0,r||t.onContinue?.()}),I=()=>{if(r)return;let S;const P=n===0?t.initialPromise:void 0;try{S=P??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(b).catch(_=>{if(r)return;const F=t.retry??(Uu?0:3),v=t.retryDelay??T3,q=typeof v=="function"?v(n,_):v,ee=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,_);if(e||!ee){j(_);return}n++,t.onFail?.(n,_),C3(q).then(()=>p()?void 0:y()).then(()=>{e?j(_):I()})})};return{promise:o,cancel:u,continue:()=>(a?.(),o),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?I():y().then(I),o)}}function E3(){let t=[],e=0,n=c=>{c()},r=c=>{c()},a=c=>setTimeout(c,0);const o=c=>{e?t.push(c):a(()=>{n(c)})},u=()=>{const c=t;t=[],c.length&&a(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||u()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var Pi=E3(),Y5=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),W0(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Uu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},L3=class extends Y5{#e;#t;#r;#n;#a;#i;constructor(t){super(),this.#i=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=R3(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const n=K0(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(Co).catch(Co):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Wo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!H5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#i?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},a=()=>{const c=G5(this.options,e),f={queryKey:this.queryKey,meta:this.meta};return r(f),this.#i=!1,this.options.persister?this.options.persister(c,f,this):c(f)},o={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};r(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const u=c=>{s0(c)&&c.silent||this.#s({type:"error",error:c}),s0(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=Z5({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:c=>{if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(f){u(f);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,f)=>{this.#s({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...X5(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return s0(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Pi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function X5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:K5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function R3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var D3=class extends of{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,a=e.queryHash??z1(r,e);let o=this.get(a);return o||(o=new L3({cache:this,queryKey:r,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Pi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>t2(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>t2(t,n)):e}notify(t){Pi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Pi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Pi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},I3=class extends Y5{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||J5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){this.#r=Z5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,a)=>{this.#n({type:"failed",failureCount:r,error:a})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#r.canStart();try{if(!e){this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#n({type:"pending",context:a,variables:t,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Pi.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function J5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var F3=class extends of{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,n){const r=new I3({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){const e=Np(t),n=this.#e.get(e)??[];n.push(t),this.#e.set(e,n),this.notify({type:"added",mutation:t})}remove(t){const e=Np(t);if(this.#e.has(e)){const n=this.#e.get(e)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(e):this.#e.set(e,n))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(Np(t))?.find(n=>n.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(Np(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Pi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(n=>n2(e,n))}findAll(t={}){return this.getAll().filter(e=>n2(t,e))}notify(t){Pi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Pi.batch(()=>Promise.all(t.map(e=>e.continue().catch(Co))))}};function Np(t){return t.options.scope?.id??String(t.mutationId)}function i2(t){return{onFetch:(e,n)=>{const r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const p=async()=>{let m=!1;const b=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},j=G5(e.options,e.fetchOptions),y=async(I,S,P)=>{if(m)return Promise.reject();if(S==null&&I.pages.length)return Promise.resolve(I);const _={queryKey:e.queryKey,pageParam:S,direction:P?"backward":"forward",meta:e.options.meta};b(_);const F=await j(_),{maxPages:v}=e.options,q=P?A3:_3;return{pages:q(I.pages,F,v),pageParams:q(I.pageParams,S,v)}};if(a&&o.length){const I=a==="backward",S=I?O3:a2,P={pages:o,pageParams:u},_=S(r,P);c=await y(P,_,I)}else{const I=t??o.length;do{const S=f===0?u[0]??r.initialPageParam:a2(r,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<I)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function a2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function O3(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var M3=class{#e;#t;#r;#n;#a;#i;#s;#o;constructor(t={}){this.#e=t.queryCache||new D3,this.#t=t.mutationCache||new F3,this.#r=t.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=V1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=sm.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Bd(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,u=j3(e,o);if(u!==void 0)return this.#e.build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Pi.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Pi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Pi.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Pi.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(Co).catch(Co)}invalidateQueries(t={},e={}){return Pi.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:e?.cancelRefetch??!0},r=Pi.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(Co)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Co)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Bd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Co).catch(Co)}fetchInfiniteQuery(t){return t.behavior=i2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Co).catch(Co)}ensureInfiniteQueryData(t){return t.behavior=i2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return sm.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set(zu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()];let n={};return e.forEach(r=>{lh(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){this.#a.set(zu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()];let n={};return e.forEach(r=>{lh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=z1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===$1&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},B3=class extends of{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#s=Q0(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#i;#s;#o;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),o2(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Z0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Z0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),n._defaulted&&!rm(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&l2(this.#t,r,this.options,n)&&this.#d(),this.updateResult(e),a&&(this.#t!==r||Wo(this.options.enabled,this.#t)!==Wo(n.enabled,this.#t)||Bd(this.options.staleTime,this.#t)!==Bd(n.staleTime,this.#t))&&this.#g();const o=this.#v();a&&(this.#t!==r||Wo(this.options.enabled,this.#t)!==Wo(n.enabled,this.#t)||o!==this.#l)&&this.#x(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return U3(this,n)&&(this.#n=n,this.#i=this.options,this.#a=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(t){this.#N();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Co)),e}#g(){this.#b();const t=Bd(this.options.staleTime,this.#t);if(Uu||this.#n.isStale||!W0(t))return;const n=H5(this.#n.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(t){this.#w(),this.#l=t,!(Uu||Wo(this.options.enabled,this.#t)===!1||!W0(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||V1.isFocused())&&this.#d()},this.#l))}#y(){this.#g(),this.#x(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,a=this.#n,o=this.#a,u=this.#i,f=t!==n?t.state:this.#r,{state:p}=t;let m={...p},b=!1,j;if(e._optimisticResults){const W=this.hasListeners(),te=!W&&o2(t,e),Q=W&&l2(t,n,e,r);(te||Q)&&(m={...m,...X5(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:I,status:S}=m;if(e.select&&m.data!==void 0)if(a&&m.data===o?.data&&e.select===this.#m)j=this.#f;else try{this.#m=e.select,j=e.select(m.data),j=K0(a?.data,j,e),this.#f=j,this.#o=null}catch(W){this.#o=W}else j=m.data;if(e.placeholderData!==void 0&&j===void 0&&S==="pending"){let W;if(a?.isPlaceholderData&&e.placeholderData===u?.placeholderData)W=a.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#o=null}catch(te){this.#o=te}W!==void 0&&(S="success",j=K0(a?.data,W,e),b=!0)}this.#o&&(y=this.#o,j=this.#f,I=Date.now(),S="error");const P=m.fetchStatus==="fetching",_=S==="pending",F=S==="error",v=_&&P,q=j!==void 0,ae={status:S,fetchStatus:m.fetchStatus,isPending:_,isSuccess:S==="success",isError:F,isInitialLoading:v,isLoading:v,data:j,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:I,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:P,isRefetching:P&&!_,isLoadingError:F&&!q,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:F&&q,isStale:H1(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const W=ue=>{ae.status==="error"?ue.reject(ae.error):ae.data!==void 0&&ue.resolve(ae.data)},te=()=>{const ue=this.#s=ae.promise=Q0();W(ue)},Q=this.#s;switch(Q.status){case"pending":t.queryHash===n.queryHash&&W(Q);break;case"fulfilled":(ae.status==="error"||ae.data!==Q.value)&&te();break;case"rejected":(ae.status!=="error"||ae.error!==Q.reason)&&te();break}}return ae}updateResult(t){const e=this.#n,n=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#h=this.#t),rm(n,e))return;this.#n=n;const r={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!this.#p.size)return!0;const c=new Set(u??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#n).some(f=>{const p=f;return this.#n[p]!==e[p]&&c.has(p)})};t?.listeners!==!1&&a()&&(r.listeners=!0),this.#S({...r,...t})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(t){Pi.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function q3(t,e){return Wo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function o2(t,e){return q3(t,e)||t.state.data!==void 0&&Z0(t,e,e.refetchOnMount)}function Z0(t,e,n){if(Wo(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&H1(t,e)}return!1}function l2(t,e,n,r){return(t!==e||Wo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&H1(t,n)}function H1(t,e){return Wo(e.enabled,t)!==!1&&t.isStaleByTime(Bd(e.staleTime,t))}function U3(t,e){return!rm(t.getCurrentResult(),e)}var z3=class extends of{#e;#t=void 0;#r;#n;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),rm(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&zu(n.mutationKey)!==zu(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){const e=this.#r?.state??J5();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){Pi.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,n,r),this.#n.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#n.onError?.(e.error,n,r),this.#n.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},eb=k.createContext(void 0),Im=t=>{const e=k.useContext(eb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$3=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(eb.Provider,{value:t,children:e})),tb=k.createContext(!1),V3=()=>k.useContext(tb);tb.Provider;function H3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var W3=k.createContext(H3()),G3=()=>k.useContext(W3);function nb(t,e){return typeof t=="function"?t(...e):!!t}function Y0(){}var K3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Q3=t=>{k.useEffect(()=>{t.clearReset()},[t])},Z3=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&nb(n,[t.error,r]),Y3=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},X3=(t,e)=>t.isLoading&&t.isFetching&&!e,J3=(t,e)=>t?.suspense&&e.isPending,c2=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function eC(t,e,n){const r=Im(),a=V3(),o=G3(),u=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=a?"isRestoring":"optimistic",Y3(u),K3(u,o),Q3(o);const c=!r.getQueryCache().get(u.queryHash),[f]=k.useState(()=>new e(r,u)),p=f.getOptimisticResult(u);if(k.useSyncExternalStore(k.useCallback(m=>{const b=a?Y0:f.subscribe(Pi.batchCalls(m));return f.updateResult(),b},[f,a]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k.useEffect(()=>{f.setOptions(u,{listeners:!1})},[u,f]),J3(u,p))throw c2(u,f,o);if(Z3({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw p.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!Uu&&X3(p,a)&&(c?c2(u,f,o):r.getQueryCache().get(u.queryHash)?.promise)?.catch(Y0).finally(()=>{f.updateResult()}),u.notifyOnChangeProps?p:f.trackResult(p)}function Ln(t,e){return eC(t,B3)}function Dr(t,e){const n=Im(),[r]=k.useState(()=>new z3(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const a=k.useSyncExternalStore(k.useCallback(u=>r.subscribe(Pi.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=k.useCallback((u,c)=>{r.mutate(u,c).catch(Y0)},[r]);if(a.error&&nb(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function rb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function wn(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await rb(r),r}const tC=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return await rb(n),await n.json()},Bn=new M3({defaultOptions:{queries:{queryFn:tC({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),nC=1,rC=1e6;let i0=0;function sC(){return i0=(i0+1)%Number.MAX_SAFE_INTEGER,i0.toString()}const a0=new Map,u2=t=>{if(a0.has(t))return;const e=setTimeout(()=>{a0.delete(t),nh({type:"REMOVE_TOAST",toastId:t})},rC);a0.set(t,e)},iC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,nC)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?u2(n):t.toasts.forEach(r=>{u2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Up=[];let zp={toasts:[]};function nh(t){zp=iC(zp,t),Up.forEach(e=>{e(zp)})}function aC({...t}){const e=sC(),n=a=>nh({type:"UPDATE_TOAST",toast:{...a,id:e}}),r=()=>nh({type:"DISMISS_TOAST",toastId:e});return nh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||r()}}}),{id:e,dismiss:r,update:n}}function $a(){const[t,e]=k.useState(zp);return k.useEffect(()=>(Up.push(e),()=>{const n=Up.indexOf(e);n>-1&&Up.splice(n,1)}),[t]),{...t,toast:aC,dismiss:n=>nh({type:"DISMISS_TOAST",toastId:n})}}var lf=R5();const oC=L5(lf);function $n(t,e,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return e?.(a)}}function d2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sb(...t){return e=>{let n=!1;const r=t.map(a=>{const o=d2(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():d2(t[a],null)}}}}function Xr(...t){return k.useCallback(sb(...t),t)}function lC(t,e){const n=k.createContext(e),r=o=>{const{children:u,...c}=o,f=k.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function a(o){const u=k.useContext(n);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,a]}function Ml(t,e=[]){let n=[];function r(o,u){const c=k.createContext(u),f=n.length;n=[...n,u];const p=b=>{const{scope:j,children:y,...I}=b,S=j?.[t]?.[f]||c,P=k.useMemo(()=>I,Object.values(I));return s.jsx(S.Provider,{value:P,children:y})};p.displayName=o+"Provider";function m(b,j){const y=j?.[t]?.[f]||c,I=k.useContext(y);if(I)return I;if(u!==void 0)return u;throw new Error(`\`${b}\` must be used within \`${o}\``)}return[p,m]}const a=()=>{const o=n.map(u=>k.createContext(u));return function(c){const f=c?.[t]||o;return k.useMemo(()=>({[`__scope${t}`]:{...c,[t]:f}}),[c,f])}};return a.scopeName=t,[r,cC(a,...e)]}function cC(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const u=r.reduce((c,{useScope:f,scopeName:p})=>{const b=f(o)[`__scope${p}`];return{...c,...b}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}function Xd(t){const e=uC(t),n=k.forwardRef((r,a)=>{const{children:o,...u}=r,c=k.Children.toArray(o),f=c.find(fC);if(f){const p=f.props.children,m=c.map(b=>b===f?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:b);return s.jsx(e,{...u,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,m):null})}return s.jsx(e,{...u,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}var ib=Xd("Slot");function uC(t){const e=k.forwardRef((n,r)=>{const{children:a,...o}=n;if(k.isValidElement(a)){const u=pC(a),c=hC(o,a.props);return a.type!==k.Fragment&&(c.ref=r?sb(r,u):u),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ab=Symbol("radix.slottable");function dC(t){const e=({children:n})=>s.jsx(s.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=ab,e}function fC(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ab}function hC(t,e){const n={...e};for(const r in e){const a=t[r],o=e[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...c)=>{o(...c),a(...c)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function pC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function W1(t){const e=t+"CollectionProvider",[n,r]=Ml(e),[a,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:P,children:_}=S,F=xn.useRef(null),v=xn.useRef(new Map).current;return s.jsx(a,{scope:P,itemMap:v,collectionRef:F,children:_})};u.displayName=e;const c=t+"CollectionSlot",f=Xd(c),p=xn.forwardRef((S,P)=>{const{scope:_,children:F}=S,v=o(c,_),q=Xr(P,v.collectionRef);return s.jsx(f,{ref:q,children:F})});p.displayName=c;const m=t+"CollectionItemSlot",b="data-radix-collection-item",j=Xd(m),y=xn.forwardRef((S,P)=>{const{scope:_,children:F,...v}=S,q=xn.useRef(null),ee=Xr(P,q),ae=o(m,_);return xn.useEffect(()=>(ae.itemMap.set(q,{ref:q,...v}),()=>{ae.itemMap.delete(q)})),s.jsx(j,{[b]:"",ref:ee,children:F})});y.displayName=m;function I(S){const P=o(t+"CollectionConsumer",S);return xn.useCallback(()=>{const F=P.collectionRef.current;if(!F)return[];const v=Array.from(F.querySelectorAll(`[${b}]`));return Array.from(P.itemMap.values()).sort((ae,W)=>v.indexOf(ae.ref.current)-v.indexOf(W.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:u,Slot:p,ItemSlot:y},I,r]}var mC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kn=mC.reduce((t,e)=>{const n=Xd(`Primitive.${e}`),r=k.forwardRef((a,o)=>{const{asChild:u,...c}=a,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ob(t,e){t&&lf.flushSync(()=>t.dispatchEvent(e))}function Ua(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>e.current?.(...n),[])}function gC(t,e=globalThis?.document){const n=Ua(t);k.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var vC="DismissableLayer",X0="dismissableLayer.update",xC="dismissableLayer.pointerDownOutside",yC="dismissableLayer.focusOutside",f2,lb=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lh=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:u,onDismiss:c,...f}=t,p=k.useContext(lb),[m,b]=k.useState(null),j=m?.ownerDocument??globalThis?.document,[,y]=k.useState({}),I=Xr(e,W=>b(W)),S=Array.from(p.layers),[P]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),_=S.indexOf(P),F=m?S.indexOf(m):-1,v=p.layersWithOutsidePointerEventsDisabled.size>0,q=F>=_,ee=wC(W=>{const te=W.target,Q=[...p.branches].some(ue=>ue.contains(te));!q||Q||(a?.(W),u?.(W),W.defaultPrevented||c?.())},j),ae=NC(W=>{const te=W.target;[...p.branches].some(ue=>ue.contains(te))||(o?.(W),u?.(W),W.defaultPrevented||c?.())},j);return gC(W=>{F===p.layers.size-1&&(r?.(W),!W.defaultPrevented&&c&&(W.preventDefault(),c()))},j),k.useEffect(()=>{if(m)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(f2=j.body.style.pointerEvents,j.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),h2(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(j.body.style.pointerEvents=f2)}},[m,j,n,p]),k.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),h2())},[m,p]),k.useEffect(()=>{const W=()=>y({});return document.addEventListener(X0,W),()=>document.removeEventListener(X0,W)},[]),s.jsx(Kn.div,{...f,ref:I,style:{pointerEvents:v?q?"auto":"none":void 0,...t.style},onFocusCapture:$n(t.onFocusCapture,ae.onFocusCapture),onBlurCapture:$n(t.onBlurCapture,ae.onBlurCapture),onPointerDownCapture:$n(t.onPointerDownCapture,ee.onPointerDownCapture)})});Lh.displayName=vC;var bC="DismissableLayerBranch",cb=k.forwardRef((t,e)=>{const n=k.useContext(lb),r=k.useRef(null),a=Xr(e,r);return k.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Kn.div,{...t,ref:a})});cb.displayName=bC;function wC(t,e=globalThis?.document){const n=Ua(t),r=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let f=function(){ub(xC,n,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=f,e.addEventListener("click",a.current,{once:!0})):f()}else e.removeEventListener("click",a.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",a.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function NC(t,e=globalThis?.document){const n=Ua(t),r=k.useRef(!1);return k.useEffect(()=>{const a=o=>{o.target&&!r.current&&ub(yC,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function h2(){const t=new CustomEvent(X0);document.dispatchEvent(t)}function ub(t,e,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?ob(a,o):a.dispatchEvent(o)}var SC=Lh,jC=cb,yi=globalThis?.document?k.useLayoutEffect:()=>{},CC="Portal",Fm=k.forwardRef((t,e)=>{const{container:n,...r}=t,[a,o]=k.useState(!1);yi(()=>o(!0),[]);const u=n||a&&globalThis?.document?.body;return u?oC.createPortal(s.jsx(Kn.div,{...r,ref:e}),u):null});Fm.displayName=CC;function _C(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var du=t=>{const{present:e,children:n}=t,r=AC(e),a=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),o=Xr(r.ref,PC(a));return typeof n=="function"||r.isPresent?k.cloneElement(a,{ref:o}):null};du.displayName="Presence";function AC(t){const[e,n]=k.useState(),r=k.useRef({}),a=k.useRef(t),o=k.useRef("none"),u=t?"mounted":"unmounted",[c,f]=_C(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const p=Sp(r.current);o.current=c==="mounted"?p:"none"},[c]),yi(()=>{const p=r.current,m=a.current;if(m!==t){const j=o.current,y=Sp(p);t?f("MOUNT"):y==="none"||p?.display==="none"?f("UNMOUNT"):f(m&&j!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,f]),yi(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,b=y=>{const S=Sp(r.current).includes(y.animationName);if(y.target===e&&S&&(f("ANIMATION_END"),!a.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},j=y=>{y.target===e&&(o.current=Sp(r.current))};return e.addEventListener("animationstart",j),e.addEventListener("animationcancel",b),e.addEventListener("animationend",b),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",j),e.removeEventListener("animationcancel",b),e.removeEventListener("animationend",b)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:k.useCallback(p=>{p&&(r.current=getComputedStyle(p)),n(p)},[])}}function Sp(t){return t?.animationName||"none"}function PC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tu({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,a]=kC({defaultProp:e,onChange:n}),o=t!==void 0,u=o?t:r,c=Ua(n),f=k.useCallback(p=>{if(o){const b=typeof p=="function"?p(t):p;b!==t&&c(b)}else a(p)},[o,t,a,c]);return[u,f]}function kC({defaultProp:t,onChange:e}){const n=k.useState(t),[r]=n,a=k.useRef(r),o=Ua(e);return k.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}var TC="VisuallyHidden",Rh=k.forwardRef((t,e)=>s.jsx(Kn.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Rh.displayName=TC;var EC=Rh,G1="ToastProvider",[K1,LC,RC]=W1("Toast"),[db]=Ml("Toast",[RC]),[DC,Om]=db(G1),fb=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:u}=t,[c,f]=k.useState(null),[p,m]=k.useState(0),b=k.useRef(!1),j=k.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${G1}\`. Expected non-empty \`string\`.`),s.jsx(K1.Provider,{scope:e,children:s.jsx(DC,{scope:e,label:n,duration:r,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:c,onViewportChange:f,onToastAdd:k.useCallback(()=>m(y=>y+1),[]),onToastRemove:k.useCallback(()=>m(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:j,children:u})})};fb.displayName=G1;var hb="ToastViewport",IC=["F8"],J0="toast.viewportPause",e1="toast.viewportResume",pb=k.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=IC,label:a="Notifications ({hotkey})",...o}=t,u=Om(hb,n),c=LC(n),f=k.useRef(null),p=k.useRef(null),m=k.useRef(null),b=k.useRef(null),j=Xr(e,b,u.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=u.toastCount>0;k.useEffect(()=>{const P=_=>{r.length!==0&&r.every(v=>_[v]||_.code===v)&&b.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),k.useEffect(()=>{const P=f.current,_=b.current;if(I&&P&&_){const F=()=>{if(!u.isClosePausedRef.current){const ae=new CustomEvent(J0);_.dispatchEvent(ae),u.isClosePausedRef.current=!0}},v=()=>{if(u.isClosePausedRef.current){const ae=new CustomEvent(e1);_.dispatchEvent(ae),u.isClosePausedRef.current=!1}},q=ae=>{!P.contains(ae.relatedTarget)&&v()},ee=()=>{P.contains(document.activeElement)||v()};return P.addEventListener("focusin",F),P.addEventListener("focusout",q),P.addEventListener("pointermove",F),P.addEventListener("pointerleave",ee),window.addEventListener("blur",F),window.addEventListener("focus",v),()=>{P.removeEventListener("focusin",F),P.removeEventListener("focusout",q),P.removeEventListener("pointermove",F),P.removeEventListener("pointerleave",ee),window.removeEventListener("blur",F),window.removeEventListener("focus",v)}}},[I,u.isClosePausedRef]);const S=k.useCallback(({tabbingDirection:P})=>{const F=c().map(v=>{const q=v.ref.current,ee=[q,...KC(q)];return P==="forwards"?ee:ee.reverse()});return(P==="forwards"?F.reverse():F).flat()},[c]);return k.useEffect(()=>{const P=b.current;if(P){const _=F=>{const v=F.altKey||F.ctrlKey||F.metaKey;if(F.key==="Tab"&&!v){const ee=document.activeElement,ae=F.shiftKey;if(F.target===P&&ae){p.current?.focus();return}const Q=S({tabbingDirection:ae?"backwards":"forwards"}),ue=Q.findIndex(O=>O===ee);o0(Q.slice(ue+1))?F.preventDefault():ae?p.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",_),()=>P.removeEventListener("keydown",_)}},[c,S]),s.jsxs(jC,{ref:f,role:"region","aria-label":a.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&s.jsx(t1,{ref:p,onFocusFromOutsideViewport:()=>{const P=S({tabbingDirection:"forwards"});o0(P)}}),s.jsx(K1.Slot,{scope:n,children:s.jsx(Kn.ol,{tabIndex:-1,...o,ref:j})}),I&&s.jsx(t1,{ref:m,onFocusFromOutsideViewport:()=>{const P=S({tabbingDirection:"backwards"});o0(P)}})]})});pb.displayName=hb;var mb="ToastFocusProxy",t1=k.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=t,o=Om(mb,n);return s.jsx(Rh,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:u=>{const c=u.relatedTarget;!o.viewport?.contains(c)&&r()}})});t1.displayName=mb;var Mm="Toast",FC="toast.swipeStart",OC="toast.swipeMove",MC="toast.swipeCancel",BC="toast.swipeEnd",gb=k.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o,...u}=t,[c=!0,f]=tu({prop:r,defaultProp:a,onChange:o});return s.jsx(du,{present:n||c,children:s.jsx(zC,{open:c,...u,ref:e,onClose:()=>f(!1),onPause:Ua(t.onPause),onResume:Ua(t.onResume),onSwipeStart:$n(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$n(t.onSwipeMove,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${b}px`)}),onSwipeCancel:$n(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$n(t.onSwipeEnd,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${b}px`),f(!1)})})})});gb.displayName=Mm;var[qC,UC]=db(Mm,{onClose(){}}),zC=k.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:o,onClose:u,onEscapeKeyDown:c,onPause:f,onResume:p,onSwipeStart:m,onSwipeMove:b,onSwipeCancel:j,onSwipeEnd:y,...I}=t,S=Om(Mm,n),[P,_]=k.useState(null),F=Xr(e,Y=>_(Y)),v=k.useRef(null),q=k.useRef(null),ee=a||S.duration,ae=k.useRef(0),W=k.useRef(ee),te=k.useRef(0),{onToastAdd:Q,onToastRemove:ue}=S,O=Ua(()=>{P?.contains(document.activeElement)&&S.viewport?.focus(),u()}),R=k.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(te.current),ae.current=new Date().getTime(),te.current=window.setTimeout(O,Y))},[O]);k.useEffect(()=>{const Y=S.viewport;if(Y){const Ce=()=>{R(W.current),p?.()},Ae=()=>{const Pe=new Date().getTime()-ae.current;W.current=W.current-Pe,window.clearTimeout(te.current),f?.()};return Y.addEventListener(J0,Ae),Y.addEventListener(e1,Ce),()=>{Y.removeEventListener(J0,Ae),Y.removeEventListener(e1,Ce)}}},[S.viewport,ee,f,p,R]),k.useEffect(()=>{o&&!S.isClosePausedRef.current&&R(ee)},[o,ee,S.isClosePausedRef,R]),k.useEffect(()=>(Q(),()=>ue()),[Q,ue]);const z=k.useMemo(()=>P?Sb(P):null,[P]);return S.viewport?s.jsxs(s.Fragment,{children:[z&&s.jsx($C,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),s.jsx(qC,{scope:n,onClose:O,children:lf.createPortal(s.jsx(K1.ItemSlot,{scope:n,children:s.jsx(SC,{asChild:!0,onEscapeKeyDown:$n(c,()=>{S.isFocusedToastEscapeKeyDownRef.current||O(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Kn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...I,ref:F,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:$n(t.onKeyDown,Y=>{Y.key==="Escape"&&(c?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:$n(t.onPointerDown,Y=>{Y.button===0&&(v.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:$n(t.onPointerMove,Y=>{if(!v.current)return;const Ce=Y.clientX-v.current.x,Ae=Y.clientY-v.current.y,Pe=!!q.current,ce=["left","right"].includes(S.swipeDirection),ge=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,De=ce?ge(0,Ce):0,se=ce?0:ge(0,Ae),M=Y.pointerType==="touch"?10:2,L={x:De,y:se},ne={originalEvent:Y,delta:L};Pe?(q.current=L,jp(OC,b,ne,{discrete:!1})):p2(L,S.swipeDirection,M)?(q.current=L,jp(FC,m,ne,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(Ce)>M||Math.abs(Ae)>M)&&(v.current=null)}),onPointerUp:$n(t.onPointerUp,Y=>{const Ce=q.current,Ae=Y.target;if(Ae.hasPointerCapture(Y.pointerId)&&Ae.releasePointerCapture(Y.pointerId),q.current=null,v.current=null,Ce){const Pe=Y.currentTarget,ce={originalEvent:Y,delta:Ce};p2(Ce,S.swipeDirection,S.swipeThreshold)?jp(BC,y,ce,{discrete:!0}):jp(MC,j,ce,{discrete:!0}),Pe.addEventListener("click",ge=>ge.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),$C=t=>{const{__scopeToast:e,children:n,...r}=t,a=Om(Mm,e),[o,u]=k.useState(!1),[c,f]=k.useState(!1);return WC(()=>u(!0)),k.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),c?null:s.jsx(Fm,{asChild:!0,children:s.jsx(Rh,{...r,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},VC="ToastTitle",vb=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Kn.div,{...r,ref:e})});vb.displayName=VC;var HC="ToastDescription",xb=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Kn.div,{...r,ref:e})});xb.displayName=HC;var yb="ToastAction",bb=k.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?s.jsx(Nb,{altText:n,asChild:!0,children:s.jsx(Q1,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${yb}\`. Expected non-empty \`string\`.`),null)});bb.displayName=yb;var wb="ToastClose",Q1=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,a=UC(wb,n);return s.jsx(Nb,{asChild:!0,children:s.jsx(Kn.button,{type:"button",...r,ref:e,onClick:$n(t.onClick,a.onClose)})})});Q1.displayName=wb;var Nb=k.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...a}=t;return s.jsx(Kn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:e})});function Sb(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),GC(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const u=r.dataset.radixToastAnnounceAlt;u&&e.push(u)}else e.push(...Sb(r))}}),e}function jp(t,e,n,{discrete:r}){const a=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?ob(a,o):a.dispatchEvent(o)}var p2=(t,e,n=0)=>{const r=Math.abs(t.x),a=Math.abs(t.y),o=r>a;return e==="left"||e==="right"?o&&r>n:!o&&a>n};function WC(t=()=>{}){const e=Ua(t);yi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function GC(t){return t.nodeType===t.ELEMENT_NODE}function KC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function o0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var QC=fb,jb=pb,Cb=gb,_b=vb,Ab=xb,Pb=bb,kb=Q1;function Tb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Tb(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Eb(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Tb(t))&&(r&&(r+=" "),r+=e);return r}const m2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,g2=Eb,Bm=(t,e)=>n=>{var r;if(e?.variants==null)return g2(t,n?.class,n?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const m=n?.[p],b=o?.[p];if(m===null)return null;const j=m2(m)||m2(b);return a[p][j]}),c=n&&Object.entries(n).reduce((p,m)=>{let[b,j]=m;return j===void 0||(p[b]=j),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:b,className:j,...y}=m;return Object.entries(y).every(I=>{let[S,P]=I;return Array.isArray(P)?P.includes({...o,...c}[S]):{...o,...c}[S]===P})?[...p,b,j]:p},[]);return g2(t,u,f,n?.class,n?.className)};const ZC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");var YC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const XC=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:u,...c},f)=>k.createElement("svg",{ref:f,...YC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Lb("lucide",a),...c},[...u.map(([p,m])=>k.createElement(p,m)),...Array.isArray(o)?o:[o]]));const Pn=(t,e)=>{const n=k.forwardRef(({className:r,...a},o)=>k.createElement(XC,{ref:o,iconNode:e,className:Lb(`lucide-${ZC(t)}`,r),...a}));return n.displayName=`${t}`,n};const cf=Pn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const JC=Pn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const e_=Pn("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const t_=Pn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const v2=Pn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Z1=Pn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const n_=Pn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Fd=Pn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const qd=Pn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const $p=Pn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const r_=Pn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const n1=Pn("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Ud=Pn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const r1=Pn("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);const Dh=Pn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const qm=Pn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const zc=Pn("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const Aa=Pn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const im=Pn("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const Rb=Pn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const x2=Pn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const s_=Pn("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);const am=Pn("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const i_=Pn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const s1=Pn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const a_=Pn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const fu=Pn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const nu=Pn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const o_=Pn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Um=Pn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const i1=Pn("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const no=Pn("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const $u=Pn("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Db=Pn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const _a=Pn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const a1=Pn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const uf=Pn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const l_=Pn("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Y1=Pn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const c_=Pn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const u_=Pn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const d_=Pn("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);const vr=Pn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const f_=Pn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const h_=Pn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const $c=Pn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const p_=Pn("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const ch=Pn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const m_=Pn("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const df=Pn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),X1="-",g_=t=>{const e=x_(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const c=u.split(X1);return c[0]===""&&c.length!==1&&c.shift(),Ib(c,e)||v_(u)},getConflictingClassGroupIds:(u,c)=>{const f=n[u]||[];return c&&r[u]?[...f,...r[u]]:f}}},Ib=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),a=r?Ib(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(X1);return e.validators.find(({validator:u})=>u(o))?.classGroupId},y2=/^\[(.+)\]$/,v_=t=>{if(y2.test(t)){const e=y2.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},x_=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return b_(Object.entries(t.classGroups),n).forEach(([o,u])=>{o1(u,r,o,e)}),r},o1=(t,e,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:b2(e,a);o.classGroupId=n;return}if(typeof a=="function"){if(y_(a)){o1(a(r),e,n,r);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,u])=>{o1(u,b2(e,o),n,r)})})},b2=(t,e)=>{let n=t;return e.split(X1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},y_=t=>t.isThemeGetter,b_=(t,e)=>e?t.map(([n,r])=>{const a=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([u,c])=>[e+u,c])):o);return[n,a]}):t,w_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const a=(o,u)=>{n.set(o,u),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let u=n.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return a(o,u),u},set(o,u){n.has(o)?n.set(o,u):a(o,u)}}},Fb="!",N_=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,a=e[0],o=e.length,u=c=>{const f=[];let p=0,m=0,b;for(let P=0;P<c.length;P++){let _=c[P];if(p===0){if(_===a&&(r||c.slice(P,P+o)===e)){f.push(c.slice(m,P)),m=P+o;continue}if(_==="/"){b=P;continue}}_==="["?p++:_==="]"&&p--}const j=f.length===0?c:c.substring(m),y=j.startsWith(Fb),I=y?j.substring(1):j,S=b&&b>m?b-m:void 0;return{modifiers:f,hasImportantModifier:y,baseClassName:I,maybePostfixModifierPosition:S}};return n?c=>n({className:c,parseClassName:u}):u},S_=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},j_=t=>({cache:w_(t.cacheSize),parseClassName:N_(t),...g_(t)}),C_=/\s+/,__=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=e,o=[],u=t.trim().split(C_);let c="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{modifiers:m,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:y}=n(p);let I=!!y,S=r(I?j.substring(0,y):j);if(!S){if(!I){c=p+(c.length>0?" "+c:c);continue}if(S=r(j),!S){c=p+(c.length>0?" "+c:c);continue}I=!1}const P=S_(m).join(":"),_=b?P+Fb:P,F=_+S;if(o.includes(F))continue;o.push(F);const v=a(S,I);for(let q=0;q<v.length;++q){const ee=v[q];o.push(_+ee)}c=p+(c.length>0?" "+c:c)}return c};function A_(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Ob(e))&&(r&&(r+=" "),r+=n);return r}const Ob=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Ob(t[r]))&&(n&&(n+=" "),n+=e);return n};function P_(t,...e){let n,r,a,o=u;function u(f){const p=e.reduce((m,b)=>b(m),t());return n=j_(p),r=n.cache.get,a=n.cache.set,o=c,c(f)}function c(f){const p=r(f);if(p)return p;const m=__(f,n);return a(f,m),m}return function(){return o(A_.apply(null,arguments))}}const vs=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Mb=/^\[(?:([a-z-]+):)?(.+)\]$/i,k_=/^\d+\/\d+$/,T_=new Set(["px","full","screen"]),E_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,L_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,R_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oc=t=>zd(t)||T_.has(t)||k_.test(t),Vc=t=>ff(t,"length",$_),zd=t=>!!t&&!Number.isNaN(Number(t)),l0=t=>ff(t,"number",zd),Hf=t=>!!t&&Number.isInteger(Number(t)),F_=t=>t.endsWith("%")&&zd(t.slice(0,-1)),Xn=t=>Mb.test(t),Hc=t=>E_.test(t),O_=new Set(["length","size","percentage"]),M_=t=>ff(t,O_,Bb),B_=t=>ff(t,"position",Bb),q_=new Set(["image","url"]),U_=t=>ff(t,q_,H_),z_=t=>ff(t,"",V_),Wf=()=>!0,ff=(t,e,n)=>{const r=Mb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$_=t=>L_.test(t)&&!R_.test(t),Bb=()=>!1,V_=t=>D_.test(t),H_=t=>I_.test(t),W_=()=>{const t=vs("colors"),e=vs("spacing"),n=vs("blur"),r=vs("brightness"),a=vs("borderColor"),o=vs("borderRadius"),u=vs("borderSpacing"),c=vs("borderWidth"),f=vs("contrast"),p=vs("grayscale"),m=vs("hueRotate"),b=vs("invert"),j=vs("gap"),y=vs("gradientColorStops"),I=vs("gradientColorStopPositions"),S=vs("inset"),P=vs("margin"),_=vs("opacity"),F=vs("padding"),v=vs("saturate"),q=vs("scale"),ee=vs("sepia"),ae=vs("skew"),W=vs("space"),te=vs("translate"),Q=()=>["auto","contain","none"],ue=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Xn,e],R=()=>[Xn,e],z=()=>["",oc,Vc],Y=()=>["auto",zd,Xn],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ae=()=>["solid","dashed","dotted","double","none"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["start","end","center","between","around","evenly","stretch"],ge=()=>["","0",Xn],De=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[zd,Xn];return{cacheSize:500,separator:":",theme:{colors:[Wf],spacing:[oc,Vc],blur:["none","",Hc,Xn],brightness:se(),borderColor:[t],borderRadius:["none","","full",Hc,Xn],borderSpacing:R(),borderWidth:z(),contrast:se(),grayscale:ge(),hueRotate:se(),invert:ge(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[F_,Vc],inset:O(),margin:O(),opacity:se(),padding:R(),saturate:se(),scale:se(),sepia:ge(),skew:se(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Xn]}],container:["container"],columns:[{columns:[Hc]}],"break-after":[{"break-after":De()}],"break-before":[{"break-before":De()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),Xn]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hf,Xn]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xn]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",Hf,Xn]}],"grid-cols":[{"grid-cols":[Wf]}],"col-start-end":[{col:["auto",{span:["full",Hf,Xn]},Xn]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[Wf]}],"row-start-end":[{row:["auto",{span:[Hf,Xn]},Xn]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xn]}],gap:[{gap:[j]}],"gap-x":[{"gap-x":[j]}],"gap-y":[{"gap-y":[j]}],"justify-content":[{justify:["normal",...ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[F]}],px:[{px:[F]}],py:[{py:[F]}],ps:[{ps:[F]}],pe:[{pe:[F]}],pt:[{pt:[F]}],pr:[{pr:[F]}],pb:[{pb:[F]}],pl:[{pl:[F]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xn,e]}],"min-w":[{"min-w":[Xn,e,"min","max","fit"]}],"max-w":[{"max-w":[Xn,e,"none","full","min","max","fit","prose",{screen:[Hc]},Hc]}],h:[{h:[Xn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hc,Vc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",l0]}],"font-family":[{font:[Wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xn]}],"line-clamp":[{"line-clamp":["none",zd,l0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oc,Xn]}],"list-image":[{"list-image":["none",Xn]}],"list-style-type":[{list:["none","disc","decimal",Xn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oc,Vc]}],"underline-offset":[{"underline-offset":["auto",oc,Xn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),B_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",M_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...Ae(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:Ae()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Ae()]}],"outline-offset":[{"outline-offset":[oc,Xn]}],"outline-w":[{outline:[oc,Vc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[oc,Vc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hc,z_]}],"shadow-color":[{shadow:[Wf]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Pe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Hc,Xn]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[b]}],saturate:[{saturate:[v]}],sepia:[{sepia:[ee]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xn]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Xn]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[q]}],"scale-x":[{"scale-x":[q]}],"scale-y":[{"scale-y":[q]}],rotate:[{rotate:[Hf,Xn]}],"translate-x":[{"translate-x":[te]}],"translate-y":[{"translate-y":[te]}],"skew-x":[{"skew-x":[ae]}],"skew-y":[{"skew-y":[ae]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[oc,Vc,l0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},G_=P_(W_);function qn(...t){return G_(Eb(t))}const K_=QC,qb=k.forwardRef(({className:t,...e},n)=>s.jsx(jb,{ref:n,className:qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));qb.displayName=jb.displayName;const Q_=Bm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ub=k.forwardRef(({className:t,variant:e,...n},r)=>s.jsx(Cb,{ref:r,className:qn(Q_({variant:e}),t),...n}));Ub.displayName=Cb.displayName;const Z_=k.forwardRef(({className:t,...e},n)=>s.jsx(Pb,{ref:n,className:qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Z_.displayName=Pb.displayName;const zb=k.forwardRef(({className:t,...e},n)=>s.jsx(kb,{ref:n,className:qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(df,{className:"h-4 w-4"})}));zb.displayName=kb.displayName;const $b=k.forwardRef(({className:t,...e},n)=>s.jsx(_b,{ref:n,className:qn("text-sm font-semibold",t),...e}));$b.displayName=_b.displayName;const Vb=k.forwardRef(({className:t,...e},n)=>s.jsx(Ab,{ref:n,className:qn("text-sm opacity-90",t),...e}));Vb.displayName=Ab.displayName;function Y_(){const{toasts:t}=$a();return s.jsxs(K_,{children:[t.map(function({id:e,title:n,description:r,action:a,...o}){return s.jsxs(Ub,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx($b,{children:n}),r&&s.jsx(Vb,{children:r})]}),a,s.jsx(zb,{})]},e)}),s.jsx(qb,{})]})}var X_=D5[" useId ".trim().toString()]||(()=>{}),J_=0;function Jc(t){const[e,n]=k.useState(X_());return yi(()=>{n(r=>r??String(J_++))},[t]),e?`radix-${e}`:""}const eA=["top","right","bottom","left"],ru=Math.min,io=Math.max,om=Math.round,Cp=Math.floor,El=t=>({x:t,y:t}),tA={left:"right",right:"left",bottom:"top",top:"bottom"},nA={start:"end",end:"start"};function l1(t,e,n){return io(t,ru(e,n))}function mc(t,e){return typeof t=="function"?t(e):t}function gc(t){return t.split("-")[0]}function hf(t){return t.split("-")[1]}function J1(t){return t==="x"?"y":"x"}function ev(t){return t==="y"?"height":"width"}function su(t){return["top","bottom"].includes(gc(t))?"y":"x"}function tv(t){return J1(su(t))}function rA(t,e,n){n===void 0&&(n=!1);const r=hf(t),a=tv(t),o=ev(a);let u=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(u=lm(u)),[u,lm(u)]}function sA(t){const e=lm(t);return[c1(t),e,c1(e)]}function c1(t){return t.replace(/start|end/g,e=>nA[e])}function iA(t,e,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:r:e?r:a;case"left":case"right":return e?o:u;default:return[]}}function aA(t,e,n,r){const a=hf(t);let o=iA(gc(t),n==="start",r);return a&&(o=o.map(u=>u+"-"+a),e&&(o=o.concat(o.map(c1)))),o}function lm(t){return t.replace(/left|right|bottom|top/g,e=>tA[e])}function oA(t){return{top:0,right:0,bottom:0,left:0,...t}}function Hb(t){return typeof t!="number"?oA(t):{top:t,right:t,bottom:t,left:t}}function cm(t){const{x:e,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:e,right:e+r,bottom:n+a,x:e,y:n}}function w2(t,e,n){let{reference:r,floating:a}=t;const o=su(e),u=tv(e),c=ev(u),f=gc(e),p=o==="y",m=r.x+r.width/2-a.width/2,b=r.y+r.height/2-a.height/2,j=r[c]/2-a[c]/2;let y;switch(f){case"top":y={x:m,y:r.y-a.height};break;case"bottom":y={x:m,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:b};break;case"left":y={x:r.x-a.width,y:b};break;default:y={x:r.x,y:r.y}}switch(hf(e)){case"start":y[u]-=j*(n&&p?-1:1);break;case"end":y[u]+=j*(n&&p?-1:1);break}return y}const lA=async(t,e,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:u}=n,c=o.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:b}=w2(p,r,f),j=r,y={},I=0;for(let S=0;S<c.length;S++){const{name:P,fn:_}=c[S],{x:F,y:v,data:q,reset:ee}=await _({x:m,y:b,initialPlacement:r,placement:j,strategy:a,middlewareData:y,rects:p,platform:u,elements:{reference:t,floating:e}});m=F??m,b=v??b,y={...y,[P]:{...y[P],...q}},ee&&I<=50&&(I++,typeof ee=="object"&&(ee.placement&&(j=ee.placement),ee.rects&&(p=ee.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:a}):ee.rects),{x:m,y:b}=w2(p,j,f)),S=-1)}return{x:m,y:b,placement:j,strategy:a,middlewareData:y}};async function uh(t,e){var n;e===void 0&&(e={});const{x:r,y:a,platform:o,rects:u,elements:c,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:b="floating",altBoundary:j=!1,padding:y=0}=mc(e,t),I=Hb(y),P=c[j?b==="floating"?"reference":"floating":b],_=cm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(P)))==null||n?P:P.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:p,rootBoundary:m,strategy:f})),F=b==="floating"?{x:r,y:a,width:u.floating.width,height:u.floating.height}:u.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),q=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},ee=cm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:F,offsetParent:v,strategy:f}):F);return{top:(_.top-ee.top+I.top)/q.y,bottom:(ee.bottom-_.bottom+I.bottom)/q.y,left:(_.left-ee.left+I.left)/q.x,right:(ee.right-_.right+I.right)/q.x}}const cA=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:a,rects:o,platform:u,elements:c,middlewareData:f}=e,{element:p,padding:m=0}=mc(t,e)||{};if(p==null)return{};const b=Hb(m),j={x:n,y:r},y=tv(a),I=ev(y),S=await u.getDimensions(p),P=y==="y",_=P?"top":"left",F=P?"bottom":"right",v=P?"clientHeight":"clientWidth",q=o.reference[I]+o.reference[y]-j[y]-o.floating[I],ee=j[y]-o.reference[y],ae=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let W=ae?ae[v]:0;(!W||!await(u.isElement==null?void 0:u.isElement(ae)))&&(W=c.floating[v]||o.floating[I]);const te=q/2-ee/2,Q=W/2-S[I]/2-1,ue=ru(b[_],Q),O=ru(b[F],Q),R=ue,z=W-S[I]-O,Y=W/2-S[I]/2+te,Ce=l1(R,Y,z),Ae=!f.arrow&&hf(a)!=null&&Y!==Ce&&o.reference[I]/2-(Y<R?ue:O)-S[I]/2<0,Pe=Ae?Y<R?Y-R:Y-z:0;return{[y]:j[y]+Pe,data:{[y]:Ce,centerOffset:Y-Ce-Pe,...Ae&&{alignmentOffset:Pe}},reset:Ae}}}),uA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:a,middlewareData:o,rects:u,initialPlacement:c,platform:f,elements:p}=e,{mainAxis:m=!0,crossAxis:b=!0,fallbackPlacements:j,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:S=!0,...P}=mc(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=gc(a),F=su(c),v=gc(c)===c,q=await(f.isRTL==null?void 0:f.isRTL(p.floating)),ee=j||(v||!S?[lm(c)]:sA(c)),ae=I!=="none";!j&&ae&&ee.push(...aA(c,S,I,q));const W=[c,...ee],te=await uh(e,P),Q=[];let ue=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&Q.push(te[_]),b){const Y=rA(a,u,q);Q.push(te[Y[0]],te[Y[1]])}if(ue=[...ue,{placement:a,overflows:Q}],!Q.every(Y=>Y<=0)){var O,R;const Y=(((O=o.flip)==null?void 0:O.index)||0)+1,Ce=W[Y];if(Ce)return{data:{index:Y,overflows:ue},reset:{placement:Ce}};let Ae=(R=ue.filter(Pe=>Pe.overflows[0]<=0).sort((Pe,ce)=>Pe.overflows[1]-ce.overflows[1])[0])==null?void 0:R.placement;if(!Ae)switch(y){case"bestFit":{var z;const Pe=(z=ue.filter(ce=>{if(ae){const ge=su(ce.placement);return ge===F||ge==="y"}return!0}).map(ce=>[ce.placement,ce.overflows.filter(ge=>ge>0).reduce((ge,De)=>ge+De,0)]).sort((ce,ge)=>ce[1]-ge[1])[0])==null?void 0:z[0];Pe&&(Ae=Pe);break}case"initialPlacement":Ae=c;break}if(a!==Ae)return{reset:{placement:Ae}}}return{}}}};function N2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function S2(t){return eA.some(e=>t[e]>=0)}const dA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...a}=mc(t,e);switch(r){case"referenceHidden":{const o=await uh(e,{...a,elementContext:"reference"}),u=N2(o,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:S2(u)}}}case"escaped":{const o=await uh(e,{...a,altBoundary:!0}),u=N2(o,n.floating);return{data:{escapedOffsets:u,escaped:S2(u)}}}default:return{}}}}};async function fA(t,e){const{placement:n,platform:r,elements:a}=t,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),u=gc(n),c=hf(n),f=su(n)==="y",p=["left","top"].includes(u)?-1:1,m=o&&f?-1:1,b=mc(e,t);let{mainAxis:j,crossAxis:y,alignmentAxis:I}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return c&&typeof I=="number"&&(y=c==="end"?I*-1:I),f?{x:y*m,y:j*p}:{x:j*p,y:y*m}}const hA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:a,y:o,placement:u,middlewareData:c}=e,f=await fA(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:u}}}}},pA=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:a}=e,{mainAxis:o=!0,crossAxis:u=!1,limiter:c={fn:P=>{let{x:_,y:F}=P;return{x:_,y:F}}},...f}=mc(t,e),p={x:n,y:r},m=await uh(e,f),b=su(gc(a)),j=J1(b);let y=p[j],I=p[b];if(o){const P=j==="y"?"top":"left",_=j==="y"?"bottom":"right",F=y+m[P],v=y-m[_];y=l1(F,y,v)}if(u){const P=b==="y"?"top":"left",_=b==="y"?"bottom":"right",F=I+m[P],v=I-m[_];I=l1(F,I,v)}const S=c.fn({...e,[j]:y,[b]:I});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[j]:o,[b]:u}}}}}},mA=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:a,rects:o,middlewareData:u}=e,{offset:c=0,mainAxis:f=!0,crossAxis:p=!0}=mc(t,e),m={x:n,y:r},b=su(a),j=J1(b);let y=m[j],I=m[b];const S=mc(c,e),P=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const v=j==="y"?"height":"width",q=o.reference[j]-o.floating[v]+P.mainAxis,ee=o.reference[j]+o.reference[v]-P.mainAxis;y<q?y=q:y>ee&&(y=ee)}if(p){var _,F;const v=j==="y"?"width":"height",q=["top","left"].includes(gc(a)),ee=o.reference[b]-o.floating[v]+(q&&((_=u.offset)==null?void 0:_[b])||0)+(q?0:P.crossAxis),ae=o.reference[b]+o.reference[v]+(q?0:((F=u.offset)==null?void 0:F[b])||0)-(q?P.crossAxis:0);I<ee?I=ee:I>ae&&(I=ae)}return{[j]:y,[b]:I}}}},gA=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:a,rects:o,platform:u,elements:c}=e,{apply:f=()=>{},...p}=mc(t,e),m=await uh(e,p),b=gc(a),j=hf(a),y=su(a)==="y",{width:I,height:S}=o.floating;let P,_;b==="top"||b==="bottom"?(P=b,_=j===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(_=b,P=j==="end"?"top":"bottom");const F=S-m.top-m.bottom,v=I-m.left-m.right,q=ru(S-m[P],F),ee=ru(I-m[_],v),ae=!e.middlewareData.shift;let W=q,te=ee;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(te=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=F),ae&&!j){const ue=io(m.left,0),O=io(m.right,0),R=io(m.top,0),z=io(m.bottom,0);y?te=I-2*(ue!==0||O!==0?ue+O:io(m.left,m.right)):W=S-2*(R!==0||z!==0?R+z:io(m.top,m.bottom))}await f({...e,availableWidth:te,availableHeight:W});const Q=await u.getDimensions(c.floating);return I!==Q.width||S!==Q.height?{reset:{rects:!0}}:{}}}};function zm(){return typeof window<"u"}function pf(t){return Wb(t)?(t.nodeName||"").toLowerCase():"#document"}function lo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bl(t){var e;return(e=(Wb(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Wb(t){return zm()?t instanceof Node||t instanceof lo(t).Node:!1}function Jo(t){return zm()?t instanceof Element||t instanceof lo(t).Element:!1}function Il(t){return zm()?t instanceof HTMLElement||t instanceof lo(t).HTMLElement:!1}function j2(t){return!zm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof lo(t).ShadowRoot}function Ih(t){const{overflow:e,overflowX:n,overflowY:r,display:a}=el(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(a)}function vA(t){return["table","td","th"].includes(pf(t))}function $m(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function nv(t){const e=rv(),n=Jo(t)?el(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function xA(t){let e=iu(t);for(;Il(e)&&!Jd(e);){if(nv(e))return e;if($m(e))return null;e=iu(e)}return null}function rv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jd(t){return["html","body","#document"].includes(pf(t))}function el(t){return lo(t).getComputedStyle(t)}function Vm(t){return Jo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function iu(t){if(pf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||j2(t)&&t.host||Bl(t);return j2(e)?e.host:e}function Gb(t){const e=iu(t);return Jd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Il(e)&&Ih(e)?e:Gb(e)}function dh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=Gb(t),o=a===((r=t.ownerDocument)==null?void 0:r.body),u=lo(a);if(o){const c=u1(u);return e.concat(u,u.visualViewport||[],Ih(a)?a:[],c&&n?dh(c):[])}return e.concat(a,dh(a,[],n))}function u1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Kb(t){const e=el(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=Il(t),o=a?t.offsetWidth:n,u=a?t.offsetHeight:r,c=om(n)!==o||om(r)!==u;return c&&(n=o,r=u),{width:n,height:r,$:c}}function sv(t){return Jo(t)?t:t.contextElement}function $d(t){const e=sv(t);if(!Il(e))return El(1);const n=e.getBoundingClientRect(),{width:r,height:a,$:o}=Kb(e);let u=(o?om(n.width):n.width)/r,c=(o?om(n.height):n.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const yA=El(0);function Qb(t){const e=lo(t);return!rv()||!e.visualViewport?yA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bA(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==lo(t)?!1:e}function Vu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),o=sv(t);let u=El(1);e&&(r?Jo(r)&&(u=$d(r)):u=$d(t));const c=bA(o,n,r)?Qb(o):El(0);let f=(a.left+c.x)/u.x,p=(a.top+c.y)/u.y,m=a.width/u.x,b=a.height/u.y;if(o){const j=lo(o),y=r&&Jo(r)?lo(r):r;let I=j,S=u1(I);for(;S&&r&&y!==I;){const P=$d(S),_=S.getBoundingClientRect(),F=el(S),v=_.left+(S.clientLeft+parseFloat(F.paddingLeft))*P.x,q=_.top+(S.clientTop+parseFloat(F.paddingTop))*P.y;f*=P.x,p*=P.y,m*=P.x,b*=P.y,f+=v,p+=q,I=lo(S),S=u1(I)}}return cm({width:m,height:b,x:f,y:p})}function iv(t,e){const n=Vm(t).scrollLeft;return e?e.left+n:Vu(Bl(t)).left+n}function Zb(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=r.left+e.scrollLeft-(n?0:iv(t,r)),o=r.top+e.scrollTop;return{x:a,y:o}}function wA(t){let{elements:e,rect:n,offsetParent:r,strategy:a}=t;const o=a==="fixed",u=Bl(r),c=e?$m(e.floating):!1;if(r===u||c&&o)return n;let f={scrollLeft:0,scrollTop:0},p=El(1);const m=El(0),b=Il(r);if((b||!b&&!o)&&((pf(r)!=="body"||Ih(u))&&(f=Vm(r)),Il(r))){const y=Vu(r);p=$d(r),m.x=y.x+r.clientLeft,m.y=y.y+r.clientTop}const j=u&&!b&&!o?Zb(u,f,!0):El(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+m.x+j.x,y:n.y*p.y-f.scrollTop*p.y+m.y+j.y}}function NA(t){return Array.from(t.getClientRects())}function SA(t){const e=Bl(t),n=Vm(t),r=t.ownerDocument.body,a=io(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=io(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+iv(t);const c=-n.scrollTop;return el(r).direction==="rtl"&&(u+=io(e.clientWidth,r.clientWidth)-a),{width:a,height:o,x:u,y:c}}function jA(t,e){const n=lo(t),r=Bl(t),a=n.visualViewport;let o=r.clientWidth,u=r.clientHeight,c=0,f=0;if(a){o=a.width,u=a.height;const p=rv();(!p||p&&e==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:o,height:u,x:c,y:f}}function CA(t,e){const n=Vu(t,!0,e==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,o=Il(t)?$d(t):El(1),u=t.clientWidth*o.x,c=t.clientHeight*o.y,f=a*o.x,p=r*o.y;return{width:u,height:c,x:f,y:p}}function C2(t,e,n){let r;if(e==="viewport")r=jA(t,n);else if(e==="document")r=SA(Bl(t));else if(Jo(e))r=CA(e,n);else{const a=Qb(t);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return cm(r)}function Yb(t,e){const n=iu(t);return n===e||!Jo(n)||Jd(n)?!1:el(n).position==="fixed"||Yb(n,e)}function _A(t,e){const n=e.get(t);if(n)return n;let r=dh(t,[],!1).filter(c=>Jo(c)&&pf(c)!=="body"),a=null;const o=el(t).position==="fixed";let u=o?iu(t):t;for(;Jo(u)&&!Jd(u);){const c=el(u),f=nv(u);!f&&c.position==="fixed"&&(a=null),(o?!f&&!a:!f&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Ih(u)&&!f&&Yb(t,u))?r=r.filter(m=>m!==u):a=c,u=iu(u)}return e.set(t,r),r}function AA(t){let{element:e,boundary:n,rootBoundary:r,strategy:a}=t;const u=[...n==="clippingAncestors"?$m(e)?[]:_A(e,this._c):[].concat(n),r],c=u[0],f=u.reduce((p,m)=>{const b=C2(e,m,a);return p.top=io(b.top,p.top),p.right=ru(b.right,p.right),p.bottom=ru(b.bottom,p.bottom),p.left=io(b.left,p.left),p},C2(e,c,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function PA(t){const{width:e,height:n}=Kb(t);return{width:e,height:n}}function kA(t,e,n){const r=Il(e),a=Bl(e),o=n==="fixed",u=Vu(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=El(0);if(r||!r&&!o)if((pf(e)!=="body"||Ih(a))&&(c=Vm(e)),r){const j=Vu(e,!0,o,e);f.x=j.x+e.clientLeft,f.y=j.y+e.clientTop}else a&&(f.x=iv(a));const p=a&&!r&&!o?Zb(a,c):El(0),m=u.left+c.scrollLeft-f.x-p.x,b=u.top+c.scrollTop-f.y-p.y;return{x:m,y:b,width:u.width,height:u.height}}function c0(t){return el(t).position==="static"}function _2(t,e){if(!Il(t)||el(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bl(t)===n&&(n=n.ownerDocument.body),n}function Xb(t,e){const n=lo(t);if($m(t))return n;if(!Il(t)){let a=iu(t);for(;a&&!Jd(a);){if(Jo(a)&&!c0(a))return a;a=iu(a)}return n}let r=_2(t,e);for(;r&&vA(r)&&c0(r);)r=_2(r,e);return r&&Jd(r)&&c0(r)&&!nv(r)?n:r||xA(t)||n}const TA=async function(t){const e=this.getOffsetParent||Xb,n=this.getDimensions,r=await n(t.floating);return{reference:kA(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EA(t){return el(t).direction==="rtl"}const LA={convertOffsetParentRelativeRectToViewportRelativeRect:wA,getDocumentElement:Bl,getClippingRect:AA,getOffsetParent:Xb,getElementRects:TA,getClientRects:NA,getDimensions:PA,getScale:$d,isElement:Jo,isRTL:EA};function Jb(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function RA(t,e){let n=null,r;const a=Bl(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function u(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const p=t.getBoundingClientRect(),{left:m,top:b,width:j,height:y}=p;if(c||e(),!j||!y)return;const I=Cp(b),S=Cp(a.clientWidth-(m+j)),P=Cp(a.clientHeight-(b+y)),_=Cp(m),v={rootMargin:-I+"px "+-S+"px "+-P+"px "+-_+"px",threshold:io(0,ru(1,f))||1};let q=!0;function ee(ae){const W=ae[0].intersectionRatio;if(W!==f){if(!q)return u();W?u(!1,W):r=setTimeout(()=>{u(!1,1e-7)},1e3)}W===1&&!Jb(p,t.getBoundingClientRect())&&u(),q=!1}try{n=new IntersectionObserver(ee,{...v,root:a.ownerDocument})}catch{n=new IntersectionObserver(ee,v)}n.observe(t)}return u(!0),o}function DA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,p=sv(t),m=a||o?[...p?dh(p):[],...dh(e)]:[];m.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const b=p&&c?RA(p,n):null;let j=-1,y=null;u&&(y=new ResizeObserver(_=>{let[F]=_;F&&F.target===p&&y&&(y.unobserve(e),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{var v;(v=y)==null||v.observe(e)})),n()}),p&&!f&&y.observe(p),y.observe(e));let I,S=f?Vu(t):null;f&&P();function P(){const _=Vu(t);S&&!Jb(S,_)&&n(),S=_,I=requestAnimationFrame(P)}return n(),()=>{var _;m.forEach(F=>{a&&F.removeEventListener("scroll",n),o&&F.removeEventListener("resize",n)}),b?.(),(_=y)==null||_.disconnect(),y=null,f&&cancelAnimationFrame(I)}}const IA=hA,FA=pA,OA=uA,MA=gA,BA=dA,A2=cA,qA=mA,UA=(t,e,n)=>{const r=new Map,a={platform:LA,...n},o={...a.platform,_c:r};return lA(t,e,{...a,platform:o})};var Vp=typeof document<"u"?k.useLayoutEffect:k.useEffect;function um(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!um(t[r],e[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&t.$$typeof)&&!um(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function ew(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function P2(t,e){const n=ew(t);return Math.round(e*n)/n}function u0(t){const e=k.useRef(t);return Vp(()=>{e.current=t}),e}function zA(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:u}={},transform:c=!0,whileElementsMounted:f,open:p}=t,[m,b]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[j,y]=k.useState(r);um(j,r)||y(r);const[I,S]=k.useState(null),[P,_]=k.useState(null),F=k.useCallback(ce=>{ce!==ae.current&&(ae.current=ce,S(ce))},[]),v=k.useCallback(ce=>{ce!==W.current&&(W.current=ce,_(ce))},[]),q=o||I,ee=u||P,ae=k.useRef(null),W=k.useRef(null),te=k.useRef(m),Q=f!=null,ue=u0(f),O=u0(a),R=u0(p),z=k.useCallback(()=>{if(!ae.current||!W.current)return;const ce={placement:e,strategy:n,middleware:j};O.current&&(ce.platform=O.current),UA(ae.current,W.current,ce).then(ge=>{const De={...ge,isPositioned:R.current!==!1};Y.current&&!um(te.current,De)&&(te.current=De,lf.flushSync(()=>{b(De)}))})},[j,e,n,O,R]);Vp(()=>{p===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,b(ce=>({...ce,isPositioned:!1})))},[p]);const Y=k.useRef(!1);Vp(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Vp(()=>{if(q&&(ae.current=q),ee&&(W.current=ee),q&&ee){if(ue.current)return ue.current(q,ee,z);z()}},[q,ee,z,ue,Q]);const Ce=k.useMemo(()=>({reference:ae,floating:W,setReference:F,setFloating:v}),[F,v]),Ae=k.useMemo(()=>({reference:q,floating:ee}),[q,ee]),Pe=k.useMemo(()=>{const ce={position:n,left:0,top:0};if(!Ae.floating)return ce;const ge=P2(Ae.floating,m.x),De=P2(Ae.floating,m.y);return c?{...ce,transform:"translate("+ge+"px, "+De+"px)",...ew(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ge,top:De}},[n,c,Ae.floating,m.x,m.y]);return k.useMemo(()=>({...m,update:z,refs:Ce,elements:Ae,floatingStyles:Pe}),[m,z,Ce,Ae,Pe])}const $A=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?A2({element:r.current,padding:a}).fn(n):{}:r?A2({element:r,padding:a}).fn(n):{}}}},VA=(t,e)=>({...IA(t),options:[t,e]}),HA=(t,e)=>({...FA(t),options:[t,e]}),WA=(t,e)=>({...qA(t),options:[t,e]}),GA=(t,e)=>({...OA(t),options:[t,e]}),KA=(t,e)=>({...MA(t),options:[t,e]}),QA=(t,e)=>({...BA(t),options:[t,e]}),ZA=(t,e)=>({...$A(t),options:[t,e]});var YA="Arrow",tw=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:a=5,...o}=t;return s.jsx(Kn.svg,{...o,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});tw.displayName=YA;var XA=tw;function nw(t){const[e,n]=k.useState(void 0);return yi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let u,c;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;u=p.inlineSize,c=p.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var av="Popper",[rw,Hm]=Ml(av),[JA,sw]=rw(av),iw=t=>{const{__scopePopper:e,children:n}=t,[r,a]=k.useState(null);return s.jsx(JA,{scope:e,anchor:r,onAnchorChange:a,children:n})};iw.displayName=av;var aw="PopperAnchor",ow=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...a}=t,o=sw(aw,n),u=k.useRef(null),c=Xr(e,u);return k.useEffect(()=>{o.onAnchorChange(r?.current||u.current)}),r?null:s.jsx(Kn.div,{...a,ref:c})});ow.displayName=aw;var ov="PopperContent",[eP,tP]=rw(ov),lw=k.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:b="partial",hideWhenDetached:j=!1,updatePositionStrategy:y="optimized",onPlaced:I,...S}=t,P=sw(ov,n),[_,F]=k.useState(null),v=Xr(e,be=>F(be)),[q,ee]=k.useState(null),ae=nw(q),W=ae?.width??0,te=ae?.height??0,Q=r+(o!=="center"?"-"+o:""),ue=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(p)?p:[p],R=O.length>0,z={padding:ue,boundary:O.filter(rP),altBoundary:R},{refs:Y,floatingStyles:Ce,placement:Ae,isPositioned:Pe,middlewareData:ce}=zA({strategy:"fixed",placement:Q,whileElementsMounted:(...be)=>DA(...be,{animationFrame:y==="always"}),elements:{reference:P.anchor},middleware:[VA({mainAxis:a+te,alignmentAxis:u}),f&&HA({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?WA():void 0,...z}),f&&GA({...z}),KA({...z,apply:({elements:be,rects:Re,availableWidth:Ie,availableHeight:Me})=>{const{width:Ze,height:ft}=Re.reference,mt=be.floating.style;mt.setProperty("--radix-popper-available-width",`${Ie}px`),mt.setProperty("--radix-popper-available-height",`${Me}px`),mt.setProperty("--radix-popper-anchor-width",`${Ze}px`),mt.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),q&&ZA({element:q,padding:c}),sP({arrowWidth:W,arrowHeight:te}),j&&QA({strategy:"referenceHidden",...z})]}),[ge,De]=dw(Ae),se=Ua(I);yi(()=>{Pe&&se?.()},[Pe,se]);const M=ce.arrow?.x,L=ce.arrow?.y,ne=ce.arrow?.centerOffset!==0,[me,ye]=k.useState();return yi(()=>{_&&ye(window.getComputedStyle(_).zIndex)},[_]),s.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ce,transform:Pe?Ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ce.transformOrigin?.x,ce.transformOrigin?.y].join(" "),...ce.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(eP,{scope:n,placedSide:ge,onArrowChange:ee,arrowX:M,arrowY:L,shouldHideArrow:ne,children:s.jsx(Kn.div,{"data-side":ge,"data-align":De,...S,ref:v,style:{...S.style,animation:Pe?void 0:"none"}})})})});lw.displayName=ov;var cw="PopperArrow",nP={top:"bottom",right:"left",bottom:"top",left:"right"},uw=k.forwardRef(function(e,n){const{__scopePopper:r,...a}=e,o=tP(cw,r),u=nP[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(XA,{...a,ref:n,style:{...a.style,display:"block"}})})});uw.displayName=cw;function rP(t){return t!==null}var sP=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:a}=e,u=a.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[p,m]=dw(n),b={start:"0%",center:"50%",end:"100%"}[m],j=(a.arrow?.x??0)+c/2,y=(a.arrow?.y??0)+f/2;let I="",S="";return p==="bottom"?(I=u?b:`${j}px`,S=`${-f}px`):p==="top"?(I=u?b:`${j}px`,S=`${r.floating.height+f}px`):p==="right"?(I=`${-f}px`,S=u?b:`${y}px`):p==="left"&&(I=`${r.floating.width+f}px`,S=u?b:`${y}px`),{data:{x:I,y:S}}}});function dw(t){const[e,n="center"]=t.split("-");return[e,n]}var iP=iw,fw=ow,hw=lw,pw=uw,[Wm]=Ml("Tooltip",[Hm]),lv=Hm(),mw="TooltipProvider",aP=700,k2="tooltip.open",[oP,gw]=Wm(mw),vw=t=>{const{__scopeTooltip:e,delayDuration:n=aP,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:o}=t,u=k.useRef(!0),c=k.useRef(!1),f=k.useRef(0);return k.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),s.jsx(oP,{scope:e,isOpenDelayedRef:u,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:k.useCallback(p=>{c.current=p},[]),disableHoverableContent:a,children:o})};vw.displayName=mw;var xw="Tooltip",[m7,Gm]=Wm(xw),d1="TooltipTrigger",lP=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=Gm(d1,n),o=gw(d1,n),u=lv(n),c=k.useRef(null),f=Xr(e,c,a.onTriggerChange),p=k.useRef(!1),m=k.useRef(!1),b=k.useCallback(()=>p.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),s.jsx(fw,{asChild:!0,...u,children:s.jsx(Kn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:f,onPointerMove:$n(t.onPointerMove,j=>{j.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:$n(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:$n(t.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:$n(t.onFocus,()=>{p.current||a.onOpen()}),onBlur:$n(t.onBlur,a.onClose),onClick:$n(t.onClick,a.onClose)})})});lP.displayName=d1;var cP="TooltipPortal",[g7,uP]=Wm(cP,{forceMount:void 0}),ef="TooltipContent",yw=k.forwardRef((t,e)=>{const n=uP(ef,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...o}=t,u=Gm(ef,t.__scopeTooltip);return s.jsx(du,{present:r||u.open,children:u.disableHoverableContent?s.jsx(bw,{side:a,...o,ref:e}):s.jsx(dP,{side:a,...o,ref:e})})}),dP=k.forwardRef((t,e)=>{const n=Gm(ef,t.__scopeTooltip),r=gw(ef,t.__scopeTooltip),a=k.useRef(null),o=Xr(e,a),[u,c]=k.useState(null),{trigger:f,onClose:p}=n,m=a.current,{onPointerInTransitChange:b}=r,j=k.useCallback(()=>{c(null),b(!1)},[b]),y=k.useCallback((I,S)=>{const P=I.currentTarget,_={x:I.clientX,y:I.clientY},F=gP(_,P.getBoundingClientRect()),v=vP(_,F),q=xP(S.getBoundingClientRect()),ee=bP([...v,...q]);c(ee),b(!0)},[b]);return k.useEffect(()=>()=>j(),[j]),k.useEffect(()=>{if(f&&m){const I=P=>y(P,m),S=P=>y(P,f);return f.addEventListener("pointerleave",I),m.addEventListener("pointerleave",S),()=>{f.removeEventListener("pointerleave",I),m.removeEventListener("pointerleave",S)}}},[f,m,y,j]),k.useEffect(()=>{if(u){const I=S=>{const P=S.target,_={x:S.clientX,y:S.clientY},F=f?.contains(P)||m?.contains(P),v=!yP(_,u);F?j():v&&(j(),p())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[f,m,u,p,j]),s.jsx(bw,{...t,ref:o})}),[fP,hP]=Wm(xw,{isInside:!1}),pP=dC("TooltipContent"),bw=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:u,...c}=t,f=Gm(ef,n),p=lv(n),{onClose:m}=f;return k.useEffect(()=>(document.addEventListener(k2,m),()=>document.removeEventListener(k2,m)),[m]),k.useEffect(()=>{if(f.trigger){const b=j=>{j.target?.contains(f.trigger)&&m()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[f.trigger,m]),s.jsx(Lh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:b=>b.preventDefault(),onDismiss:m,children:s.jsxs(hw,{"data-state":f.stateAttribute,...p,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(pP,{children:r}),s.jsx(fP,{scope:n,isInside:!0,children:s.jsx(EC,{id:f.contentId,role:"tooltip",children:a||r})})]})})});yw.displayName=ef;var ww="TooltipArrow",mP=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=lv(n);return hP(ww,n).isInside?null:s.jsx(pw,{...a,...r,ref:e})});mP.displayName=ww;function gP(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,a,o)){case o:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vP(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function xP(t){const{top:e,right:n,bottom:r,left:a}=t;return[{x:a,y:e},{x:n,y:e},{x:n,y:r},{x:a,y:r}]}function yP(t,e){const{x:n,y:r}=t;let a=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const c=e[o].x,f=e[o].y,p=e[u].x,m=e[u].y;f>r!=m>r&&n<(p-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function bP(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wP(e)}function wP(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const a=t[r];for(;e.length>=2;){const o=e[e.length-1],u=e[e.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const o=n[n.length-1],u=n[n.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))n.pop();else break}n.push(a)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var NP=vw,Nw=yw;const SP=NP,jP=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(Nw,{ref:r,sideOffset:e,className:qn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));jP.displayName=Nw.displayName;var jr;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),u={};for(const c of o)u[c]=a[c];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(jr||(jr={}));var f1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(f1||(f1={}));const Zt=jr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),hc=t=>{switch(typeof t){case"undefined":return Zt.undefined;case"string":return Zt.string;case"number":return isNaN(t)?Zt.nan:Zt.number;case"boolean":return Zt.boolean;case"function":return Zt.function;case"bigint":return Zt.bigint;case"symbol":return Zt.symbol;case"object":return Array.isArray(t)?Zt.array:t===null?Zt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Zt.promise:typeof Map<"u"&&t instanceof Map?Zt.map:typeof Set<"u"&&t instanceof Set?Zt.set:typeof Date<"u"&&t instanceof Date?Zt.date:Zt.object;default:return Zt.unknown}},Ct=jr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CP=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class co extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let c=r,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(n(u))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return a(this),r}static assert(e){if(!(e instanceof co))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}co.create=t=>new co(t);const tf=(t,e)=>{let n;switch(t.code){case Ct.invalid_type:t.received===Zt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ct.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,jr.jsonStringifyReplacer)}`;break;case Ct.unrecognized_keys:n=`Unrecognized key(s) in object: ${jr.joinValues(t.keys,", ")}`;break;case Ct.invalid_union:n="Invalid input";break;case Ct.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${jr.joinValues(t.options)}`;break;case Ct.invalid_enum_value:n=`Invalid enum value. Expected ${jr.joinValues(t.options)}, received '${t.received}'`;break;case Ct.invalid_arguments:n="Invalid function arguments";break;case Ct.invalid_return_type:n="Invalid function return type";break;case Ct.invalid_date:n="Invalid date";break;case Ct.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:jr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ct.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ct.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ct.custom:n="Invalid input";break;case Ct.invalid_intersection_types:n="Intersection results could not be merged";break;case Ct.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ct.not_finite:n="Number must be finite";break;default:n=e.defaultError,jr.assertNever(t)}return{message:n}};let Sw=tf;function _P(t){Sw=t}function dm(){return Sw}const fm=t=>{const{data:e,path:n,errorMaps:r,issueData:a}=t,o=[...n,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="";const f=r.filter(p=>!!p).slice().reverse();for(const p of f)c=p(u,{data:e,defaultError:c}).message;return{...a,path:o,message:c}},AP=[];function zt(t,e){const n=dm(),r=fm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===tf?void 0:tf].filter(a=>!!a)});t.common.issues.push(r)}class pa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const a of n){if(a.status==="aborted")return Rn;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const a of n){const o=await a.key,u=await a.value;r.push({key:o,value:u})}return pa.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const a of n){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return Rn;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const Rn=Object.freeze({status:"aborted"}),Od=t=>({status:"dirty",value:t}),Pa=t=>({status:"valid",value:t}),h1=t=>t.status==="aborted",p1=t=>t.status==="dirty",Hu=t=>t.status==="valid",fh=t=>typeof Promise<"u"&&t instanceof Promise;function hm(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function jw(t,e,n,r,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var mn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(mn||(mn={}));var Xf,Jf;class Fl{constructor(e,n,r,a){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T2=(t,e)=>{if(Hu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new co(t.common.issues);return this._error=n,this._error}}};function Zn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:a}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,c)=>{var f,p;const{message:m}=t;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(f=m??r)!==null&&f!==void 0?f:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??n)!==null&&p!==void 0?p:c.defaultError}},description:a}}class or{get description(){return this._def.description}_getType(e){return hc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:hc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pa,ctx:{common:e.parent.common,data:e.data,parsedType:hc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(fh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const a={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:hc(e)},o=this._parseSync({data:e,path:a.path,parent:a});return T2(a,o)}"~validate"(e){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:hc(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return Hu(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>Hu(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:hc(e)},a=this._parse({data:e,path:r.path,parent:r}),o=await(fh(a)?a:Promise.resolve(a));return T2(r,o)}refine(e,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,o)=>{const u=e(a),c=()=>o.addIssue({code:Ct.custom,...r(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(e){return new tl({schema:this,typeName:En.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ll.create(this,this._def)}nullable(){return cu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zo.create(this)}promise(){return rf.create(this,this._def)}or(e){return gh.create([this,e],this._def)}and(e){return vh.create(this,e,this._def)}transform(e){return new tl({...Zn(this._def),schema:this,typeName:En.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Nh({...Zn(this._def),innerType:this,defaultValue:n,typeName:En.ZodDefault})}brand(){return new cv({typeName:En.ZodBranded,type:this,...Zn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Sh({...Zn(this._def),innerType:this,catchValue:n,typeName:En.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Fh.create(this,e)}readonly(){return jh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const PP=/^c[^\s-]{8,}$/i,kP=/^[0-9a-z]+$/,TP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,LP=/^[a-z0-9_-]{21}$/i,RP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,DP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,FP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let d0;const OP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,BP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Cw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$P=new RegExp(`^${Cw}$`);function _w(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function VP(t){return new RegExp(`^${_w(t)}$`)}function Aw(t){let e=`${Cw}T${_w(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function HP(t,e){return!!((e==="v4"||!e)&&OP.test(t)||(e==="v6"||!e)&&BP.test(t))}function WP(t,e){if(!RP.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function GP(t,e){return!!((e==="v4"||!e)&&MP.test(t)||(e==="v6"||!e)&&qP.test(t))}class Qo extends or{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Zt.string){const o=this._getOrReturnCtx(e);return zt(o,{code:Ct.invalid_type,expected:Zt.string,received:o.parsedType}),Rn}const r=new pa;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(a=this._getOrReturnCtx(e,a),u?zt(a,{code:Ct.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&zt(a,{code:Ct.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")IP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"email",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")d0||(d0=new RegExp(FP,"u")),d0.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"emoji",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")EP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"uuid",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")LP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"nanoid",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")PP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"cuid",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")kP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"cuid2",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")TP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"ulid",code:Ct.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),zt(a,{validation:"url",code:Ct.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"regex",code:Ct.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Aw(o).test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?$P.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?VP(o).test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?DP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"duration",code:Ct.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?HP(e.data,o.version)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"ip",code:Ct.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?WP(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"jwt",code:Ct.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?GP(e.data,o.version)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"cidr",code:Ct.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?UP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"base64",code:Ct.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?zP.test(e.data)||(a=this._getOrReturnCtx(e,a),zt(a,{validation:"base64url",code:Ct.invalid_string,message:o.message}),r.dirty()):jr.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(a=>e.test(a),{validation:n,code:Ct.invalid_string,...mn.errToObj(r)})}_addCheck(e){return new Qo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...mn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...mn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...mn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...mn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...mn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...mn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...mn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...mn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...mn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...mn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...mn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...mn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...mn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...mn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...mn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...mn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...mn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...mn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...mn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...mn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...mn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...mn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...mn.errToObj(n)})}nonempty(e){return this.min(1,mn.errToObj(e))}trim(){return new Qo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Qo.create=t=>{var e;return new Qo({checks:[],typeName:En.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Zn(t)})};function KP(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=n>r?n:r,o=parseInt(t.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return o%u/Math.pow(10,a)}class au extends or{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Zt.number){const o=this._getOrReturnCtx(e);return zt(o,{code:Ct.invalid_type,expected:Zt.number,received:o.parsedType}),Rn}let r;const a=new pa;for(const o of this._def.checks)o.kind==="int"?jr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?KP(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.not_finite,message:o.message}),a.dirty()):jr.assertNever(o);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,mn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,mn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,mn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,mn.toString(n))}setLimit(e,n,r,a){return new au({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:mn.toString(a)}]})}_addCheck(e){return new au({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:mn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:mn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:mn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}au.create=t=>new au({checks:[],typeName:En.ZodNumber,coerce:t?.coerce||!1,...Zn(t)});class ou extends or{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Zt.bigint)return this._getInvalidInput(e);let r;const a=new pa;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),zt(r,{code:Ct.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):jr.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return zt(n,{code:Ct.invalid_type,expected:Zt.bigint,received:n.parsedType}),Rn}gte(e,n){return this.setLimit("min",e,!0,mn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,mn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,mn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,mn.toString(n))}setLimit(e,n,r,a){return new ou({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:mn.toString(a)}]})}_addCheck(e){return new ou({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:mn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ou.create=t=>{var e;return new ou({checks:[],typeName:En.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Zn(t)})};class hh extends or{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Zt.boolean){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.boolean,received:r.parsedType}),Rn}return Pa(e.data)}}hh.create=t=>new hh({typeName:En.ZodBoolean,coerce:t?.coerce||!1,...Zn(t)});class Wu extends or{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Zt.date){const o=this._getOrReturnCtx(e);return zt(o,{code:Ct.invalid_type,expected:Zt.date,received:o.parsedType}),Rn}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return zt(o,{code:Ct.invalid_date}),Rn}const r=new pa;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),zt(a,{code:Ct.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):jr.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Wu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:mn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:mn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Wu.create=t=>new Wu({checks:[],coerce:t?.coerce||!1,typeName:En.ZodDate,...Zn(t)});class pm extends or{_parse(e){if(this._getType(e)!==Zt.symbol){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.symbol,received:r.parsedType}),Rn}return Pa(e.data)}}pm.create=t=>new pm({typeName:En.ZodSymbol,...Zn(t)});class ph extends or{_parse(e){if(this._getType(e)!==Zt.undefined){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.undefined,received:r.parsedType}),Rn}return Pa(e.data)}}ph.create=t=>new ph({typeName:En.ZodUndefined,...Zn(t)});class mh extends or{_parse(e){if(this._getType(e)!==Zt.null){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.null,received:r.parsedType}),Rn}return Pa(e.data)}}mh.create=t=>new mh({typeName:En.ZodNull,...Zn(t)});class nf extends or{constructor(){super(...arguments),this._any=!0}_parse(e){return Pa(e.data)}}nf.create=t=>new nf({typeName:En.ZodAny,...Zn(t)});class Bu extends or{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pa(e.data)}}Bu.create=t=>new Bu({typeName:En.ZodUnknown,...Zn(t)});class vc extends or{_parse(e){const n=this._getOrReturnCtx(e);return zt(n,{code:Ct.invalid_type,expected:Zt.never,received:n.parsedType}),Rn}}vc.create=t=>new vc({typeName:En.ZodNever,...Zn(t)});class mm extends or{_parse(e){if(this._getType(e)!==Zt.undefined){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.void,received:r.parsedType}),Rn}return Pa(e.data)}}mm.create=t=>new mm({typeName:En.ZodVoid,...Zn(t)});class Zo extends or{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),a=this._def;if(n.parsedType!==Zt.array)return zt(n,{code:Ct.invalid_type,expected:Zt.array,received:n.parsedType}),Rn;if(a.exactLength!==null){const u=n.data.length>a.exactLength.value,c=n.data.length<a.exactLength.value;(u||c)&&(zt(n,{code:u?Ct.too_big:Ct.too_small,minimum:c?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(zt(n,{code:Ct.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(zt(n,{code:Ct.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,c)=>a.type._parseAsync(new Fl(n,u,n.path,c)))).then(u=>pa.mergeArray(r,u));const o=[...n.data].map((u,c)=>a.type._parseSync(new Fl(n,u,n.path,c)));return pa.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Zo({...this._def,minLength:{value:e,message:mn.toString(n)}})}max(e,n){return new Zo({...this._def,maxLength:{value:e,message:mn.toString(n)}})}length(e,n){return new Zo({...this._def,exactLength:{value:e,message:mn.toString(n)}})}nonempty(e){return this.min(1,e)}}Zo.create=(t,e)=>new Zo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:En.ZodArray,...Zn(e)});function Rd(t){if(t instanceof Bs){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ll.create(Rd(r))}return new Bs({...t._def,shape:()=>e})}else return t instanceof Zo?new Zo({...t._def,type:Rd(t.element)}):t instanceof Ll?Ll.create(Rd(t.unwrap())):t instanceof cu?cu.create(Rd(t.unwrap())):t instanceof Ol?Ol.create(t.items.map(e=>Rd(e))):t}class Bs extends or{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=jr.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Zt.object){const p=this._getOrReturnCtx(e);return zt(p,{code:Ct.invalid_type,expected:Zt.object,received:p.parsedType}),Rn}const{status:r,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof vc&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||c.push(p);const f=[];for(const p of u){const m=o[p],b=a.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new Fl(a,b,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof vc){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(p==="strict")c.length>0&&(zt(a,{code:Ct.unrecognized_keys,keys:c}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of c){const b=a.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new Fl(a,b,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of f){const b=await m.key,j=await m.value;p.push({key:b,value:j,alwaysSet:m.alwaysSet})}return p}).then(p=>pa.mergeObjectSync(r,p)):pa.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return mn.errToObj,new Bs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o,u,c;const f=(u=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,r).message)!==null&&u!==void 0?u:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=mn.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new Bs({...this._def,unknownKeys:"strip"})}passthrough(){return new Bs({...this._def,unknownKeys:"passthrough"})}extend(e){return new Bs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Bs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:En.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Bs({...this._def,catchall:e})}pick(e){const n={};return jr.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Bs({...this._def,shape:()=>n})}omit(e){const n={};return jr.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Bs({...this._def,shape:()=>n})}deepPartial(){return Rd(this)}partial(e){const n={};return jr.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?n[r]=a:n[r]=a.optional()}),new Bs({...this._def,shape:()=>n})}required(e){const n={};return jr.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Ll;)o=o._def.innerType;n[r]=o}}),new Bs({...this._def,shape:()=>n})}keyof(){return Pw(jr.objectKeys(this.shape))}}Bs.create=(t,e)=>new Bs({shape:()=>t,unknownKeys:"strip",catchall:vc.create(),typeName:En.ZodObject,...Zn(e)});Bs.strictCreate=(t,e)=>new Bs({shape:()=>t,unknownKeys:"strict",catchall:vc.create(),typeName:En.ZodObject,...Zn(e)});Bs.lazycreate=(t,e)=>new Bs({shape:t,unknownKeys:"strip",catchall:vc.create(),typeName:En.ZodObject,...Zn(e)});class gh extends or{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new co(c.ctx.common.issues));return zt(n,{code:Ct.invalid_union,unionErrors:u}),Rn}if(n.common.async)return Promise.all(r.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const f of r){const p={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new co(f));return zt(n,{code:Ct.invalid_union,unionErrors:c}),Rn}}get options(){return this._def.options}}gh.create=(t,e)=>new gh({options:t,typeName:En.ZodUnion,...Zn(e)});const dc=t=>t instanceof yh?dc(t.schema):t instanceof tl?dc(t.innerType()):t instanceof bh?[t.value]:t instanceof lu?t.options:t instanceof wh?jr.objectValues(t.enum):t instanceof Nh?dc(t._def.innerType):t instanceof ph?[void 0]:t instanceof mh?[null]:t instanceof Ll?[void 0,...dc(t.unwrap())]:t instanceof cu?[null,...dc(t.unwrap())]:t instanceof cv||t instanceof jh?dc(t.unwrap()):t instanceof Sh?dc(t._def.innerType):[];class Km extends or{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Zt.object)return zt(n,{code:Ct.invalid_type,expected:Zt.object,received:n.parsedType}),Rn;const r=this.discriminator,a=n.data[r],o=this.optionsMap.get(a);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(zt(n,{code:Ct.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Rn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const a=new Map;for(const o of n){const u=dc(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of u){if(a.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);a.set(c,o)}}return new Km({typeName:En.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...Zn(r)})}}function m1(t,e){const n=hc(t),r=hc(e);if(t===e)return{valid:!0,data:t};if(n===Zt.object&&r===Zt.object){const a=jr.objectKeys(e),o=jr.objectKeys(t).filter(c=>a.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=m1(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(n===Zt.array&&r===Zt.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=m1(u,c);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return n===Zt.date&&r===Zt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class vh extends or{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=(o,u)=>{if(h1(o)||h1(u))return Rn;const c=m1(o.value,u.value);return c.valid?((p1(o)||p1(u))&&n.dirty(),{status:n.value,value:c.data}):(zt(r,{code:Ct.invalid_intersection_types}),Rn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}vh.create=(t,e,n)=>new vh({left:t,right:e,typeName:En.ZodIntersection,...Zn(n)});class Ol extends or{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Zt.array)return zt(r,{code:Ct.invalid_type,expected:Zt.array,received:r.parsedType}),Rn;if(r.data.length<this._def.items.length)return zt(r,{code:Ct.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rn;!this._def.rest&&r.data.length>this._def.items.length&&(zt(r,{code:Ct.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Fl(r,u,r.path,c)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>pa.mergeArray(n,u)):pa.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Ol({...this._def,rest:e})}}Ol.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ol({items:t,typeName:En.ZodTuple,rest:null,...Zn(e)})};class xh extends or{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Zt.object)return zt(r,{code:Ct.invalid_type,expected:Zt.object,received:r.parsedType}),Rn;const a=[],o=this._def.keyType,u=this._def.valueType;for(const c in r.data)a.push({key:o._parse(new Fl(r,c,r.path,c)),value:u._parse(new Fl(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?pa.mergeObjectAsync(n,a):pa.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof or?new xh({keyType:e,valueType:n,typeName:En.ZodRecord,...Zn(r)}):new xh({keyType:Qo.create(),valueType:e,typeName:En.ZodRecord,...Zn(n)})}}class gm extends or{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Zt.map)return zt(r,{code:Ct.invalid_type,expected:Zt.map,received:r.parsedType}),Rn;const a=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([c,f],p)=>({key:a._parse(new Fl(r,c,r.path,[p,"key"])),value:o._parse(new Fl(r,f,r.path,[p,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return Rn;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of u){const p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return Rn;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}}}}gm.create=(t,e,n)=>new gm({valueType:e,keyType:t,typeName:En.ZodMap,...Zn(n)});class Gu extends or{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Zt.set)return zt(r,{code:Ct.invalid_type,expected:Zt.set,received:r.parsedType}),Rn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(zt(r,{code:Ct.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(zt(r,{code:Ct.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const m of f){if(m.status==="aborted")return Rn;m.status==="dirty"&&n.dirty(),p.add(m.value)}return{status:n.value,value:p}}const c=[...r.data.values()].map((f,p)=>o._parse(new Fl(r,f,r.path,p)));return r.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,n){return new Gu({...this._def,minSize:{value:e,message:mn.toString(n)}})}max(e,n){return new Gu({...this._def,maxSize:{value:e,message:mn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Gu.create=(t,e)=>new Gu({valueType:t,minSize:null,maxSize:null,typeName:En.ZodSet,...Zn(e)});class Vd extends or{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Zt.function)return zt(n,{code:Ct.invalid_type,expected:Zt.function,received:n.parsedType}),Rn;function r(c,f){return fm({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,dm(),tf].filter(p=>!!p),issueData:{code:Ct.invalid_arguments,argumentsError:f}})}function a(c,f){return fm({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,dm(),tf].filter(p=>!!p),issueData:{code:Ct.invalid_return_type,returnTypeError:f}})}const o={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof rf){const c=this;return Pa(async function(...f){const p=new co([]),m=await c._def.args.parseAsync(f,o).catch(y=>{throw p.addIssue(r(f,y)),p}),b=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(b,o).catch(y=>{throw p.addIssue(a(b,y)),p})})}else{const c=this;return Pa(function(...f){const p=c._def.args.safeParse(f,o);if(!p.success)throw new co([r(f,p.error)]);const m=Reflect.apply(u,this,p.data),b=c._def.returns.safeParse(m,o);if(!b.success)throw new co([a(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vd({...this._def,args:Ol.create(e).rest(Bu.create())})}returns(e){return new Vd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Vd({args:e||Ol.create([]).rest(Bu.create()),returns:n||Bu.create(),typeName:En.ZodFunction,...Zn(r)})}}class yh extends or{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}yh.create=(t,e)=>new yh({getter:t,typeName:En.ZodLazy,...Zn(e)});class bh extends or{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return zt(n,{received:n.data,code:Ct.invalid_literal,expected:this._def.value}),Rn}return{status:"valid",value:e.data}}get value(){return this._def.value}}bh.create=(t,e)=>new bh({value:t,typeName:En.ZodLiteral,...Zn(e)});function Pw(t,e){return new lu({values:t,typeName:En.ZodEnum,...Zn(e)})}class lu extends or{constructor(){super(...arguments),Xf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return zt(n,{expected:jr.joinValues(r),received:n.parsedType,code:Ct.invalid_type}),Rn}if(hm(this,Xf)||jw(this,Xf,new Set(this._def.values)),!hm(this,Xf).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return zt(n,{received:n.data,code:Ct.invalid_enum_value,options:r}),Rn}return Pa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return lu.create(e,{...this._def,...n})}exclude(e,n=this._def){return lu.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Xf=new WeakMap;lu.create=Pw;class wh extends or{constructor(){super(...arguments),Jf.set(this,void 0)}_parse(e){const n=jr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Zt.string&&r.parsedType!==Zt.number){const a=jr.objectValues(n);return zt(r,{expected:jr.joinValues(a),received:r.parsedType,code:Ct.invalid_type}),Rn}if(hm(this,Jf)||jw(this,Jf,new Set(jr.getValidEnumValues(this._def.values))),!hm(this,Jf).has(e.data)){const a=jr.objectValues(n);return zt(r,{received:r.data,code:Ct.invalid_enum_value,options:a}),Rn}return Pa(e.data)}get enum(){return this._def.values}}Jf=new WeakMap;wh.create=(t,e)=>new wh({values:t,typeName:En.ZodNativeEnum,...Zn(e)});class rf extends or{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Zt.promise&&n.common.async===!1)return zt(n,{code:Ct.invalid_type,expected:Zt.promise,received:n.parsedType}),Rn;const r=n.parsedType===Zt.promise?n.data:Promise.resolve(n.data);return Pa(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}rf.create=(t,e)=>new rf({type:t,typeName:En.ZodPromise,...Zn(e)});class tl extends or{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===En.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{zt(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async c=>{if(n.value==="aborted")return Rn;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?Rn:f.status==="dirty"||n.value==="dirty"?Od(f.value):f});{if(n.value==="aborted")return Rn;const c=this._def.schema._parseSync({data:u,path:r.path,parent:r});return c.status==="aborted"?Rn:c.status==="dirty"||n.value==="dirty"?Od(c.value):c}}if(a.type==="refinement"){const u=c=>{const f=a.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Rn:(c.status==="dirty"&&n.dirty(),u(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Rn:(c.status==="dirty"&&n.dirty(),u(c.value).then(()=>({status:n.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hu(u))return u;const c=a.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>Hu(u)?Promise.resolve(a.transform(u.value,o)).then(c=>({status:n.value,value:c})):u);jr.assertNever(a)}}tl.create=(t,e,n)=>new tl({schema:t,typeName:En.ZodEffects,effect:e,...Zn(n)});tl.createWithPreprocess=(t,e,n)=>new tl({schema:e,effect:{type:"preprocess",transform:t},typeName:En.ZodEffects,...Zn(n)});class Ll extends or{_parse(e){return this._getType(e)===Zt.undefined?Pa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ll.create=(t,e)=>new Ll({innerType:t,typeName:En.ZodOptional,...Zn(e)});class cu extends or{_parse(e){return this._getType(e)===Zt.null?Pa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}cu.create=(t,e)=>new cu({innerType:t,typeName:En.ZodNullable,...Zn(e)});class Nh extends or{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Zt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Nh.create=(t,e)=>new Nh({innerType:t,typeName:En.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Zn(e)});class Sh extends or{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fh(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new co(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new co(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Sh.create=(t,e)=>new Sh({innerType:t,typeName:En.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Zn(e)});class vm extends or{_parse(e){if(this._getType(e)!==Zt.nan){const r=this._getOrReturnCtx(e);return zt(r,{code:Ct.invalid_type,expected:Zt.nan,received:r.parsedType}),Rn}return{status:"valid",value:e.data}}}vm.create=t=>new vm({typeName:En.ZodNaN,...Zn(t)});const QP=Symbol("zod_brand");class cv extends or{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Fh extends or{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Rn:o.status==="dirty"?(n.dirty(),Od(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Rn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,n){return new Fh({in:e,out:n,typeName:En.ZodPipeline})}}class jh extends or{_parse(e){const n=this._def.innerType._parse(e),r=a=>(Hu(a)&&(a.value=Object.freeze(a.value)),a);return fh(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}jh.create=(t,e)=>new jh({innerType:t,typeName:En.ZodReadonly,...Zn(e)});function E2(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function kw(t,e={},n){return t?nf.create().superRefine((r,a)=>{var o,u;const c=t(r);if(c instanceof Promise)return c.then(f=>{var p,m;if(!f){const b=E2(e,r),j=(m=(p=b.fatal)!==null&&p!==void 0?p:n)!==null&&m!==void 0?m:!0;a.addIssue({code:"custom",...b,fatal:j})}});if(!c){const f=E2(e,r),p=(u=(o=f.fatal)!==null&&o!==void 0?o:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...f,fatal:p})}}):nf.create()}const ZP={object:Bs.lazycreate};var En;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(En||(En={}));const YP=(t,e={message:`Input not instance of ${t.name}`})=>kw(n=>n instanceof t,e),Tw=Qo.create,Ew=au.create,XP=vm.create,JP=ou.create,Lw=hh.create,e6=Wu.create,t6=pm.create,n6=ph.create,r6=mh.create,s6=nf.create,i6=Bu.create,a6=vc.create,o6=mm.create,l6=Zo.create,c6=Bs.create,u6=Bs.strictCreate,d6=gh.create,f6=Km.create,h6=vh.create,p6=Ol.create,m6=xh.create,g6=gm.create,v6=Gu.create,x6=Vd.create,y6=yh.create,b6=bh.create,w6=lu.create,N6=wh.create,S6=rf.create,L2=tl.create,j6=Ll.create,C6=cu.create,_6=tl.createWithPreprocess,A6=Fh.create,P6=()=>Tw().optional(),k6=()=>Ew().optional(),T6=()=>Lw().optional(),E6={string:(t=>Qo.create({...t,coerce:!0})),number:(t=>au.create({...t,coerce:!0})),boolean:(t=>hh.create({...t,coerce:!0})),bigint:(t=>ou.create({...t,coerce:!0})),date:(t=>Wu.create({...t,coerce:!0}))},L6=Rn;var U=Object.freeze({__proto__:null,defaultErrorMap:tf,setErrorMap:_P,getErrorMap:dm,makeIssue:fm,EMPTY_PATH:AP,addIssueToContext:zt,ParseStatus:pa,INVALID:Rn,DIRTY:Od,OK:Pa,isAborted:h1,isDirty:p1,isValid:Hu,isAsync:fh,get util(){return jr},get objectUtil(){return f1},ZodParsedType:Zt,getParsedType:hc,ZodType:or,datetimeRegex:Aw,ZodString:Qo,ZodNumber:au,ZodBigInt:ou,ZodBoolean:hh,ZodDate:Wu,ZodSymbol:pm,ZodUndefined:ph,ZodNull:mh,ZodAny:nf,ZodUnknown:Bu,ZodNever:vc,ZodVoid:mm,ZodArray:Zo,ZodObject:Bs,ZodUnion:gh,ZodDiscriminatedUnion:Km,ZodIntersection:vh,ZodTuple:Ol,ZodRecord:xh,ZodMap:gm,ZodSet:Gu,ZodFunction:Vd,ZodLazy:yh,ZodLiteral:bh,ZodEnum:lu,ZodNativeEnum:wh,ZodPromise:rf,ZodEffects:tl,ZodTransformer:tl,ZodOptional:Ll,ZodNullable:cu,ZodDefault:Nh,ZodCatch:Sh,ZodNaN:vm,BRAND:QP,ZodBranded:cv,ZodPipeline:Fh,ZodReadonly:jh,custom:kw,Schema:or,ZodSchema:or,late:ZP,get ZodFirstPartyTypeKind(){return En},coerce:E6,any:s6,array:l6,bigint:JP,boolean:Lw,date:e6,discriminatedUnion:f6,effect:L2,enum:w6,function:x6,instanceof:YP,intersection:h6,lazy:y6,literal:b6,map:g6,nan:XP,nativeEnum:N6,never:a6,null:r6,nullable:C6,number:Ew,object:c6,oboolean:T6,onumber:k6,optional:j6,ostring:P6,pipeline:A6,preprocess:_6,promise:S6,record:m6,set:v6,strictObject:u6,string:Tw,symbol:t6,transformer:L2,tuple:p6,undefined:n6,union:d6,unknown:i6,void:o6,NEVER:L6,ZodIssueCode:Ct,quotelessJson:CP,ZodError:co});const yt=Symbol.for("drizzle:entityKind");function Ki(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,yt))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(yt in n&&n[yt]===e[yt])return!0;n=Object.getPrototypeOf(n)}return!1}class Ch{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[yt]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class R6{static[yt]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const Hd=Symbol.for("drizzle:Name");class D6{static[yt]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{const{name:r,columns:a,foreignColumns:o}=e();return{name:r,columns:a,foreignTable:o[0].table,foreignColumns:o}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new I6(e,this)}}class I6{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[yt]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),a=n.map(c=>c.name),o=r.map(c=>c.name),u=[this.table[Hd],...a,r[0].table[Hd],...o];return e??`${u.join("_")}_fk`}}function F6(t,...e){return t(...e)}function O6(t,e){return`${t[Hd]}_${e.join("_")}_unique`}function R2(t,e,n){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function Rw(t,e=0){const n=[];let r=e,a=!1;for(;r<t.length;){const o=t[r];if(o===","){(a||r===e)&&n.push(""),a=!0,r++;continue}if(a=!1,o==="\\"){r+=2;continue}if(o==='"'){const[f,p]=R2(t,r+1,!0);n.push(f),r=p;continue}if(o==="}")return[n,r+1];if(o==="{"){const[f,p]=Rw(t,r+1);n.push(f),r=p;continue}const[u,c]=R2(t,r,!1);n.push(u),r=c}return[n,r]}function M6(t){const[e]=Rw(t,1);return e}function Dw(t){return`{${t.map(e=>Array.isArray(e)?Dw(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class kr extends R6{foreignKeyConfigs=[];static[yt]="PgColumnBuilder";array(e){return new q6(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:a})=>F6((o,u)=>{const c=new D6(()=>{const f=o();return{columns:[e],foreignColumns:[f]}});return u.onUpdate&&c.onUpdate(u.onUpdate),u.onDelete&&c.onDelete(u.onDelete),c.build(n)},r,a))}buildExtraConfigColumn(e){return new B6(e,this.config)}}class rr extends Ch{constructor(e,n){n.uniqueName||(n.uniqueName=O6(e,[n.name])),super(e,n),this.table=e}static[yt]="PgColumn"}class B6 extends rr{static[yt]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class q6 extends kr{static[yt]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new uv(e,this.config,n)}}class uv extends rr{constructor(e,n,r,a){super(e,n),this.baseColumn=r,this.range=a,this.size=n.size}size;static[yt]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=M6(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){const r=e.map(a=>a===null?null:Ki(this.baseColumn,uv)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return n?r:Dw(r)}}const D2=Symbol.for("drizzle:isPgEnum");function U6(t){return!!t&&typeof t=="function"&&D2 in t&&t[D2]===!0}class Iw{static[yt]="Subquery";constructor(e,n,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:a}}}const z6={startActiveSpan(t,e){return e()}},Wd=Symbol.for("drizzle:ViewBaseConfig"),f0=Symbol.for("drizzle:Schema"),I2=Symbol.for("drizzle:Columns"),F2=Symbol.for("drizzle:ExtraConfigColumns"),h0=Symbol.for("drizzle:OriginalName"),p0=Symbol.for("drizzle:BaseName"),xm=Symbol.for("drizzle:IsAlias"),O2=Symbol.for("drizzle:ExtraConfigBuilder"),Fw=Symbol.for("drizzle:IsDrizzleTable");class ao{static[yt]="Table";static Symbol={Name:Hd,Schema:f0,OriginalName:h0,Columns:I2,ExtraConfigColumns:F2,BaseName:p0,IsAlias:xm,ExtraConfigBuilder:O2};[Hd];[h0];[f0];[I2];[F2];[p0];[xm]=!1;[Fw]=!0;[O2]=void 0;constructor(e,n,r){this[Hd]=this[h0]=e,this[f0]=n,this[p0]=r}}function Ow(t){return typeof t=="object"&&t!==null&&Fw in t}function $6(t){return t!=null&&typeof t.getSQL=="function"}function V6(t){const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}class Ho{static[yt]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Ys([this])}}class Ys{constructor(e){this.queryChunks=e}static[yt]="SQL";decoder=Mw;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return z6.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:u,prepareTyping:c,inlineParams:f,paramStartIndex:p}=r;return V6(e.map(m=>{if(Ki(m,Ho))return{sql:m.value.join(""),params:[]};if(Ki(m,g1))return{sql:o(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const b=[new Ho("(")];for(const[j,y]of m.entries())b.push(y),j<m.length-1&&b.push(new Ho(", "));return b.push(new Ho(")")),this.buildQueryFromSourceParams(b,r)}if(Ki(m,Ys))return this.buildQueryFromSourceParams(m.queryChunks,{...r,inlineParams:f||m.shouldInlineParams});if(Ki(m,ao)){const b=m[ao.Symbol.Schema],j=m[ao.Symbol.Name];return{sql:b===void 0||m[xm]?o(j):o(b)+"."+o(j),params:[]}}if(Ki(m,Ch)){const b=a.getColumnCasing(m);if(n.invokeSource==="indexes")return{sql:o(b),params:[]};const j=m.table[ao.Symbol.Schema];return{sql:m.table[xm]||j===void 0?o(m.table[ao.Symbol.Name])+"."+o(b):o(j)+"."+o(m.table[ao.Symbol.Name])+"."+o(b),params:[]}}if(Ki(m,H6)){const b=m[Wd].schema,j=m[Wd].name;return{sql:b===void 0||m[Wd].isAlias?o(j):o(b)+"."+o(j),params:[]}}if(Ki(m,qw)){if(Ki(m.value,v1))return{sql:u(p.value++,m),params:[m],typings:["none"]};const b=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(Ki(b,Ys))return this.buildQueryFromSourceParams([b],r);if(f)return{sql:this.mapInlineParam(b,r),params:[]};let j=["none"];return c&&(j=[c(m.encoder)]),{sql:u(p.value++,b),params:[b],typings:j}}return Ki(m,v1)?{sql:u(p.value++,m),params:[m],typings:["none"]}:Ki(m,Ys.Aliased)&&m.fieldAlias!==void 0?{sql:o(m.fieldAlias),params:[]}:Ki(m,Iw)?m._.isWith?{sql:o(m._.alias),params:[]}:this.buildQueryFromSourceParams([new Ho("("),m._.sql,new Ho(") "),new g1(m._.alias)],r):U6(m)?m.schema?{sql:o(m.schema)+"."+o(m.enumName),params:[]}:{sql:o(m.enumName),params:[]}:$6(m)?m.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([m.getSQL()],r):this.buildQueryFromSourceParams([new Ho("("),m.getSQL(),new Ho(")")],r):f?{sql:this.mapInlineParam(m,r),params:[]}:{sql:u(p.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Ys.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class g1{constructor(e){this.value=e}static[yt]="Name";brand;getSQL(){return new Ys([this])}}const Mw={mapFromDriverValue:t=>t},Bw={mapToDriverValue:t=>t};({...Mw,...Bw});class qw{constructor(e,n=Bw){this.value=e,this.encoder=n}static[yt]="Param";brand;getSQL(){return new Ys([this])}}function ym(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new Ho(t[0]));for(const[r,a]of e.entries())n.push(a,new Ho(t[r+1]));return new Ys(n)}(t=>{function e(){return new Ys([])}t.empty=e;function n(f){return new Ys(f)}t.fromList=n;function r(f){return new Ys([new Ho(f)])}t.raw=r;function a(f,p){const m=[];for(const[b,j]of f.entries())b>0&&p!==void 0&&m.push(p),m.push(j);return new Ys(m)}t.join=a;function o(f){return new g1(f)}t.identifier=o;function u(f){return new v1(f)}t.placeholder=u;function c(f,p){return new qw(f,p)}t.param=c})(ym||(ym={}));(t=>{class e{constructor(r,a){this.sql=r,this.fieldAlias=a}static[yt]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(Ys||(Ys={}));class v1{constructor(e){this.name=e}static[yt]="Placeholder";getSQL(){return new Ys([this])}}const Uw=Symbol.for("drizzle:IsDrizzleView");class H6{static[yt]="View";[Wd];[Uw]=!0;constructor({name:e,schema:n,selectedFields:r,query:a}){this[Wd]={name:e,originalName:e,schema:n,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new Ys([this])}}function W6(t){return typeof t=="object"&&t!==null&&Uw in t}Ch.prototype.getSQL=function(){return new Ys([this])};ao.prototype.getSQL=function(){return new Ys([this])};Iw.prototype.getSQL=function(){return new Ys([this])};function G6(t){return t[ao.Symbol.Columns]}function K6(t){return t[Wd].selectedFields}function Bi(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class Qm extends kr{static[yt]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Q6 extends Qm{static[yt]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Z6(e,this.config)}}class Z6 extends rr{static[yt]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Y6 extends Qm{static[yt]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new X6(e,this.config)}}class X6 extends rr{static[yt]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function J6(t,e){const{name:n,config:r}=Bi(t,e);return r.mode==="number"?new Q6(n):new Y6(n)}class ek extends kr{static[yt]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new tk(e,this.config)}}class tk extends rr{static[yt]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class nk extends kr{static[yt]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new rk(e,this.config)}}class rk extends rr{static[yt]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function sk(t,e){const{name:n,config:r}=Bi(t,e);return r.mode==="number"?new ek(n):new nk(n)}class ik extends kr{static[yt]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ak(e,this.config)}}class ak extends rr{static[yt]="PgBoolean";getSQLType(){return"boolean"}}function ok(t){return new ik(t??"")}class lk extends kr{static[yt]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new ck(e,this.config)}}class ck extends rr{static[yt]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function uk(t,e={}){const{name:n,config:r}=Bi(t,e);return new lk(n,r)}class dk extends kr{static[yt]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new fk(e,this.config)}}class fk extends rr{static[yt]="PgCidr";getSQLType(){return"cidr"}}function hk(t){return new dk(t??"")}class pk extends kr{static[yt]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new mk(e,this.config)}}class mk extends rr{static[yt]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function gk(t){return(e,n)=>{const{name:r,config:a}=Bi(e,n);return new pk(r,a,t)}}class Oh extends kr{static[yt]="PgDateColumnBaseBuilder";defaultNow(){return this.default(ym`now()`)}}class vk extends Oh{static[yt]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new xk(e,this.config)}}class xk extends rr{static[yt]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class yk extends Oh{static[yt]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new bk(e,this.config)}}class bk extends rr{static[yt]="PgDateString";getSQLType(){return"date"}}function wk(t,e){const{name:n,config:r}=Bi(t,e);return r?.mode==="date"?new vk(n):new yk(n)}class Nk extends kr{static[yt]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Sk(e,this.config)}}class Sk extends rr{static[yt]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function jk(t){return new Nk(t??"")}class Ck extends kr{static[yt]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new _k(e,this.config)}}class _k extends rr{static[yt]="PgInet";getSQLType(){return"inet"}}function Ak(t){return new Ck(t??"")}class Pk extends Qm{static[yt]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new kk(e,this.config)}}class kk extends rr{static[yt]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function ds(t){return new Pk(t??"")}class Tk extends kr{static[yt]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Ek(e,this.config)}}class Ek extends rr{static[yt]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}}function Lk(t,e={}){const{name:n,config:r}=Bi(t,e);return new Tk(n,r)}class Rk extends kr{static[yt]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Dk(e,this.config)}}class Dk extends rr{static[yt]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Ik(t){return new Rk(t??"")}class Fk extends kr{static[yt]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Ok(e,this.config)}}class Ok extends rr{static[yt]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Mk(t){return new Fk(t??"")}class Bk extends kr{static[yt]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new qk(e,this.config)}}class qk extends rr{static[yt]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class Uk extends kr{static[yt]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new zk(e,this.config)}}class zk extends rr{static[yt]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function $k(t,e){const{name:n,config:r}=Bi(t,e);return!r?.mode||r.mode==="tuple"?new Bk(n):new Uk(n)}class Vk extends kr{static[yt]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Hk(e,this.config)}}class Hk extends rr{static[yt]="PgMacaddr";getSQLType(){return"macaddr"}}function Wk(t){return new Vk(t??"")}class Gk extends kr{static[yt]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Kk(e,this.config)}}class Kk extends rr{static[yt]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Qk(t){return new Gk(t??"")}class Zk extends kr{static[yt]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new Yk(e,this.config)}}class Yk extends rr{static[yt]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function zw(t,e){const{name:n,config:r}=Bi(t,e);return new Zk(n,r?.precision,r?.scale)}const wr=zw;class Xk extends kr{static[yt]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Jk(e,this.config)}}class Jk extends rr{static[yt]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class eT extends kr{static[yt]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new tT(e,this.config)}}class tT extends rr{static[yt]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function nT(t,e){const{name:n,config:r}=Bi(t,e);return!r?.mode||r.mode==="tuple"?new Xk(n):new eT(n)}function rT(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function M2(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function $w(t){const e=rT(t);let n=0;const r=e[n];n+=1;const a=new DataView(e.buffer),o=a.getUint32(n,r===1);if(n+=4,o&536870912&&(a.getUint32(n,r===1),n+=4),(o&65535)===1){const u=M2(e,n);n+=8;const c=M2(e,n);return n+=8,[u,c]}throw new Error("Unsupported geometry type")}class sT extends kr{static[yt]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new iT(e,this.config)}}class iT extends rr{static[yt]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return $w(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class aT extends kr{static[yt]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new oT(e,this.config)}}class oT extends rr{static[yt]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=$w(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function lT(t,e){const{name:n,config:r}=Bi(t,e);return!r?.mode||r.mode==="tuple"?new sT(n):new aT(n)}class cT extends kr{static[yt]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new uT(e,this.config)}}class uT extends rr{static[yt]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function dT(t){return new cT(t??"")}class fT extends kr{static[yt]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new hT(e,this.config)}}class hT extends rr{static[yt]="PgSerial";getSQLType(){return"serial"}}function ma(t){return new fT(t??"")}class pT extends Qm{static[yt]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new mT(e,this.config)}}class mT extends rr{static[yt]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function gT(t){return new pT(t??"")}class vT extends kr{static[yt]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xT(e,this.config)}}class xT extends rr{static[yt]="PgSmallSerial";getSQLType(){return"smallserial"}}function yT(t){return new vT(t??"")}class bT extends kr{static[yt]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new wT(e,this.config)}}class wT extends rr{static[yt]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function pt(t,e={}){const{name:n,config:r}=Bi(t,e);return new bT(n,r)}class NT extends Oh{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[yt]="PgTimeBuilder";build(e){return new ST(e,this.config)}}class ST extends rr{static[yt]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function jT(t,e={}){const{name:n,config:r}=Bi(t,e);return new NT(n,r.withTimezone??!1,r.precision)}class CT extends Oh{static[yt]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new _T(e,this.config)}}class _T extends rr{static[yt]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class AT extends Oh{static[yt]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new PT(e,this.config)}}class PT extends rr{static[yt]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function ql(t,e={}){const{name:n,config:r}=Bi(t,e);return r?.mode==="string"?new AT(n,r.withTimezone??!1,r.precision):new CT(n,r?.withTimezone??!1,r?.precision)}class kT extends kr{static[yt]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(ym`gen_random_uuid()`)}build(e){return new TT(e,this.config)}}class TT extends rr{static[yt]="PgUUID";getSQLType(){return"uuid"}}function ET(t){return new kT(t??"")}class LT extends kr{static[yt]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new RT(e,this.config)}}class RT extends rr{static[yt]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function DT(t,e={}){const{name:n,config:r}=Bi(t,e);return new LT(n,r)}class IT extends kr{static[yt]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new FT(e,this.config)}}class FT extends rr{static[yt]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function OT(t,e){const{name:n,config:r}=Bi(t,e);return new IT(n,r)}class MT extends kr{static[yt]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new BT(e,this.config)}}class BT extends rr{static[yt]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function qT(t,e){const{name:n,config:r}=Bi(t,e);return new MT(n,r)}class UT extends kr{static[yt]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new zT(e,this.config)}}class zT extends rr{static[yt]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function $T(t,e){const{name:n,config:r}=Bi(t,e);return new UT(n,r)}class VT extends kr{static[yt]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new HT(e,this.config)}}class HT extends rr{static[yt]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function WT(t,e){const{name:n,config:r}=Bi(t,e);return new VT(n,r)}function GT(){return{bigint:J6,bigserial:sk,boolean:ok,char:uk,cidr:hk,customType:gk,date:wk,doublePrecision:jk,inet:Ak,integer:ds,interval:Lk,json:Ik,jsonb:Mk,line:$k,macaddr:Wk,macaddr8:Qk,numeric:zw,point:nT,geometry:lT,real:dT,serial:ma,smallint:gT,smallserial:yT,text:pt,time:jT,timestamp:ql,uuid:ET,varchar:DT,bit:OT,halfvec:qT,sparsevec:$T,vector:WT}}const x1=Symbol.for("drizzle:PgInlineForeignKeys"),B2=Symbol.for("drizzle:EnableRLS");class q2 extends ao{static[yt]="PgTable";static Symbol=Object.assign({},ao.Symbol,{InlineForeignKeys:x1,EnableRLS:B2});[x1]=[];[B2]=!1;[ao.Symbol.ExtraConfigBuilder]=void 0}function KT(t,e,n,r,a=t){const o=new q2(t,r,a),u=typeof e=="function"?e(GT()):e,c=Object.fromEntries(Object.entries(u).map(([m,b])=>{const j=b;j.setName(m);const y=j.build(o);return o[x1].push(...j.buildForeignKeys(y,o)),[m,y]})),f=Object.fromEntries(Object.entries(u).map(([m,b])=>{const j=b;j.setName(m);const y=j.buildExtraConfigColumn(o);return[m,y]})),p=Object.assign(o,c);return p[ao.Symbol.Columns]=c,p[ao.Symbol.ExtraConfigColumns]=f,Object.assign(p,{enableRLS:()=>(p[q2.Symbol.EnableRLS]=!0,p)})}const ka=(t,e,n)=>KT(t,e,n,void 0),Ms={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ri(t,e){return e.includes(t.columnType)}function QT(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const ZT=U.union([U.string(),U.number(),U.boolean(),U.null()]),YT=U.union([ZT,U.record(U.any()),U.array(U.any())]),XT=U.custom(t=>t instanceof Buffer);function Vw(t,e){const n=e?.zodInstance??U,r=e?.coerce??{};let a;return QT(t)&&(a=t.enumValues.length?n.enum(t.enumValues):n.string()),a||(ri(t,["PgGeometry","PgPointTuple"])?a=n.tuple([n.number(),n.number()]):ri(t,["PgGeometryObject","PgPointObject"])?a=n.object({x:n.number(),y:n.number()}):ri(t,["PgHalfVector","PgVector"])?(a=n.array(n.number()),a=t.dimensions?a.length(t.dimensions):a):ri(t,["PgLine"])?a=n.tuple([n.number(),n.number(),n.number()]):ri(t,["PgLineABC"])?a=n.object({a:n.number(),b:n.number(),c:n.number()}):ri(t,["PgArray"])?(a=n.array(Vw(t.baseColumn,n)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=n.array(n.any()):t.dataType==="number"?a=JT(t,n,r):t.dataType==="bigint"?a=eE(t,n,r):t.dataType==="boolean"?a=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?a=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?a=tE(t,n,r):t.dataType==="json"?a=YT:t.dataType==="custom"?a=n.any():t.dataType==="buffer"&&(a=XT)),a||(a=n.any()),a}function JT(t,e,n){let r=t.getSQLType().includes("unsigned"),a,o,u=!1;ri(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:Ms.INT8_MIN,o=r?Ms.INT8_UNSIGNED_MAX:Ms.INT8_MAX,u=!0):ri(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:Ms.INT16_MIN,o=r?Ms.INT16_UNSIGNED_MAX:Ms.INT16_MAX,u=!0):ri(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:Ms.INT24_MIN,o=r?Ms.INT24_UNSIGNED_MAX:Ms.INT24_MAX,u=ri(t,["MySqlMediumInt","SingleStoreMediumInt"])):ri(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:Ms.INT32_MIN,o=r?Ms.INT32_UNSIGNED_MAX:Ms.INT32_MAX,u=!0):ri(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:Ms.INT48_MIN,o=r?Ms.INT48_UNSIGNED_MAX:Ms.INT48_MAX):ri(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||ri(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,u=!0):ri(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,u=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let c=n===!0||n?.number?e.coerce.number():e.number();return c=c.min(a).max(o),u?c.int():c}function eE(t,e,n){const r=t.getSQLType().includes("unsigned"),a=r?0n:Ms.INT64_MIN,o=r?Ms.INT64_UNSIGNED_MAX:Ms.INT64_MAX;return(n===!0||n?.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function tE(t,e,n){if(ri(t,["PgUUID"]))return e.string().uuid();let r,a,o=!1;ri(t,["PgVarchar","SQLiteText"])?r=t.length:ri(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??Ms.INT16_UNSIGNED_MAX:ri(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=Ms.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=Ms.INT24_UNSIGNED_MAX:t.textType==="text"?r=Ms.INT16_UNSIGNED_MAX:r=Ms.INT8_UNSIGNED_MAX),ri(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,o=!0),ri(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let u=n===!0||n?.string?e.coerce.string():e.string();return u=a?u.regex(a):u,r&&o?u.length(r):r?u.max(r):u}function Hw(t){return Ow(t)?G6(t):K6(t)}function Ww(t,e,n,r){const a={};for(const[o,u]of Object.entries(t)){if(!Ki(u,Ch)&&!Ki(u,Ys)&&!Ki(u,Ys.Aliased)&&typeof u=="object"){const b=Ow(u)||W6(u)?Hw(u):u;a[o]=Ww(b,e[o]??{},n,r);continue}const c=e[o];if(c!==void 0&&typeof c!="function"){a[o]=c;continue}const f=Ki(u,Ch)?u:void 0,p=f?Vw(f,r):U.any(),m=typeof c=="function"?c(p):p;n.never(f)||(a[o]=m,f&&(n.nullable(f)&&(a[o]=a[o].nullable()),n.optional(f)&&(a[o]=a[o].optional())))}return U.object(a)}const nE={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Ta=(t,e)=>{const n=Hw(t);return Ww(n,{},nE)},_h=["Standard","Administrator"],Gw=ka("users",{id:ma("id").primaryKey(),username:pt("username").notNull().unique(),password:pt("password").notNull(),name:pt("name").notNull().default("Admin"),email:pt("email"),mobile:pt("mobile"),role:pt("role").notNull().default("Standard"),createdAt:ql("created_at").notNull().defaultNow()}),rE=ka("user_client_assignments",{id:ma("id").primaryKey(),userId:ds("user_id").notNull().references(()=>Gw.id),clientId:ds("client_id").notNull().references(()=>dv.id)}),dv=ka("clients",{id:ma("id").primaryKey(),name:pt("name").notNull(),location:pt("location").notNull(),gstNo:pt("gst_no").notNull(),contactPerson:pt("contact_person").notNull(),mobileNumber:pt("mobile_number").notNull(),emailAddress:pt("email_address").notNull()}),bm=["Supply and Fabrication","Structural Fabrication","Job Work"],Ju=ka("projects",{id:ma("id").primaryKey(),projectName:pt("project_name").notNull(),clientId:ds("client_id").notNull().references(()=>dv.id),location:pt("location").notNull(),quotationType:pt("quotation_type").notNull(),createdAt:ql("created_at").notNull().defaultNow()}),Kw=ka("quotations",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),quotationNumber:pt("quotation_number").notNull(),revision:pt("revision").notNull().default("R-000"),version:ds("version").notNull().default(1),parentQuotationId:ds("parent_quotation_id"),enquiryNumber:pt("enquiry_number").notNull(),subject:pt("subject").notNull(),contactName:pt("contact_name").notNull(),contactMobile:pt("contact_mobile").notNull(),contactEmail:pt("contact_email").notNull(),buildingDescription:pt("building_description"),buildingArea:pt("building_area"),frameType:pt("frame_type"),length:pt("length"),width:pt("width"),clearHeight:pt("clear_height"),roofSlope:pt("roof_slope"),paymentTerms:pt("payment_terms"),notes:pt("notes"),contentSections:pt("content_sections"),createdAt:ql("created_at").notNull().defaultNow()}),sE=ka("quotation_items",{id:ma("id").primaryKey(),quotationId:ds("quotation_id").notNull().references(()=>Kw.id),serialNo:ds("serial_no").notNull(),description:pt("description").notNull(),unit:pt("unit").notNull(),quantity:wr("quantity",{precision:10,scale:2}).notNull(),rate:wr("rate",{precision:12,scale:2}).notNull(),amount:wr("amount",{precision:14,scale:2}).notNull(),remarks:pt("remarks")}),Qw=ka("invoices",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),invoiceNumber:pt("invoice_number").notNull(),revision:pt("revision").notNull().default("R-001"),version:ds("version").notNull().default(1),parentInvoiceId:ds("parent_invoice_id"),organisationName:pt("organisation_name").notNull(),registeredAddress:pt("registered_address").notNull(),consigneeAddress:pt("consignee_address").notNull(),clientGstin:pt("client_gstin"),workOrderNo:pt("work_order_no"),dispatchDetails:pt("dispatch_details"),cgstRate:wr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:wr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:wr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:pt("applied_tax_type").default("igst"),totalAmount:wr("total_amount",{precision:14,scale:2}).default("0"),totalTax:wr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:wr("grand_total",{precision:14,scale:2}).default("0"),contentSections:pt("content_sections"),createdAt:ql("created_at").notNull().defaultNow()}),iE=ka("invoice_items",{id:ma("id").primaryKey(),invoiceId:ds("invoice_id").notNull().references(()=>Qw.id),serialNo:ds("serial_no").notNull(),description:pt("description").notNull(),hsnCode:pt("hsn_code"),quantity:wr("quantity",{precision:10,scale:3}).notNull(),unit:pt("unit").default("LS"),ratePerUnit:wr("rate_per_unit",{precision:12,scale:2}),percentage:wr("percentage",{precision:5,scale:2}),amount:wr("amount",{precision:14,scale:2}).notNull(),remarks:pt("remarks")}),Zw=ka("gate_passes",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),gatePassNumber:pt("gate_pass_number").notNull(),revision:pt("revision").notNull().default("R-001"),version:ds("version").notNull().default(1),parentGatePassId:ds("parent_gate_pass_id"),organisationName:pt("organisation_name").notNull(),registeredAddress:pt("registered_address").notNull(),consigneeAddress:pt("consignee_address").notNull(),clientGstin:pt("client_gstin"),workOrderNo:pt("work_order_no"),dispatchDetails:pt("dispatch_details"),cgstRate:wr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:wr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:wr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:pt("applied_tax_type").default("igst"),totalAmount:wr("total_amount",{precision:14,scale:2}).default("0"),totalTax:wr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:wr("grand_total",{precision:14,scale:2}).default("0"),contentSections:pt("content_sections"),createdAt:ql("created_at").notNull().defaultNow()}),aE=ka("gate_pass_items",{id:ma("id").primaryKey(),gatePassId:ds("gate_pass_id").notNull().references(()=>Zw.id),serialNo:ds("serial_no").notNull(),description:pt("description").notNull(),hsnCode:pt("hsn_code"),quantity:wr("quantity",{precision:10,scale:3}).notNull(),unit:pt("unit").default("LS"),ratePerUnit:wr("rate_per_unit",{precision:12,scale:2}),percentage:wr("percentage",{precision:5,scale:2}),amount:wr("amount",{precision:14,scale:2}).notNull(),remarks:pt("remarks")}),Yw=ka("delivery_challans",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),deliveryChallanNumber:pt("delivery_challan_number").notNull(),revision:pt("revision").notNull().default("R-001"),version:ds("version").notNull().default(1),parentDeliveryChallanId:ds("parent_delivery_challan_id"),organisationName:pt("organisation_name").notNull(),registeredAddress:pt("registered_address").notNull(),consigneeAddress:pt("consignee_address").notNull(),clientGstin:pt("client_gstin"),workOrderNo:pt("work_order_no"),dispatchDetails:pt("dispatch_details"),cgstRate:wr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:wr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:wr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:pt("applied_tax_type").default("igst"),totalAmount:wr("total_amount",{precision:14,scale:2}).default("0"),totalTax:wr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:wr("grand_total",{precision:14,scale:2}).default("0"),contentSections:pt("content_sections"),createdAt:ql("created_at").notNull().defaultNow()}),oE=ka("delivery_challan_items",{id:ma("id").primaryKey(),deliveryChallanId:ds("delivery_challan_id").notNull().references(()=>Yw.id),serialNo:ds("serial_no").notNull(),description:pt("description").notNull(),hsnCode:pt("hsn_code"),quantity:wr("quantity",{precision:10,scale:3}).notNull(),unit:pt("unit").default("LS"),ratePerUnit:wr("rate_per_unit",{precision:12,scale:2}),percentage:wr("percentage",{precision:5,scale:2}),amount:wr("amount",{precision:14,scale:2}).notNull(),remarks:pt("remarks")}),lE=ka("project_ledger_budgets",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),projectValue:wr("project_value",{precision:14,scale:2}).notNull().default("0"),updatedAt:ql("updated_at").notNull().defaultNow()}),cE=ka("project_ledger_entries",{id:ma("id").primaryKey(),projectId:ds("project_id").notNull().references(()=>Ju.id),entryDate:pt("entry_date").notNull(),entryType:pt("entry_type").notNull(),category:pt("category").notNull(),description:pt("description").notNull(),amount:wr("amount",{precision:14,scale:2}).notNull(),paymentMode:pt("payment_mode").notNull(),remarks:pt("remarks"),reference:pt("reference"),receivedAgainst:pt("received_against"),chequeNumber:pt("cheque_number"),bankName:pt("bank_name"),chequeDate:pt("cheque_date"),utrNumber:pt("utr_number"),attachmentUrl:pt("attachment_url"),createdAt:ql("created_at").notNull().defaultNow()}),uE=ka("branding",{id:ma("id").primaryKey(),logoUrl:pt("logo_url").notNull().default("https://reviranexgen.com/assets/logo-with-name.png"),headerUrl:pt("header_url").notNull().default("https://reviranexgen.com/assets/header.jpg"),footerUrl:pt("footer_url").notNull().default("https://reviranexgen.com/assets/footer.jpg"),stampUrl:pt("stamp_url").notNull().default("https://reviranexgen.com/assets/stamp.png"),storeKeeperSignUrl:pt("store_keeper_sign_url").notNull().default(""),qcEnggSignUrl:pt("qc_engg_sign_url").notNull().default(""),storeInchargeSignUrl:pt("store_incharge_sign_url").notNull().default(""),plantHeadSignUrl:pt("plant_head_sign_url").notNull().default(""),primaryColor:pt("primary_color").notNull().default("#da2032"),secondaryColor:pt("secondary_color").notNull().default("#2f3591"),entityName:pt("entity_name").notNull().default("Revira NexGen Structure Pvt. Ltd."),cin:pt("cin").notNull().default("U16222DL2025PTC459465"),companyGstin:pt("company_gstin").notNull().default("07AAPCR3026H1ZA"),website:pt("website").notNull().default("www.reviranexgen.com"),email:pt("email").notNull().default("info@reviranexgen.com"),headOfficeAddress:pt("head_office_address").notNull().default("28, E2 Block, Shivram Park Nangloi Delhi - 110041"),workshopAddress:pt("workshop_address").notNull().default("Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"),updatedAt:ql("updated_at").notNull().defaultNow()});Ta(Gw).omit({id:!0,createdAt:!0});Ta(dv);Ta(Ju).omit({id:!0,createdAt:!0});Ta(Kw).omit({id:!0,createdAt:!0});Ta(sE).omit({id:!0});Ta(Qw).omit({id:!0,createdAt:!0});Ta(iE).omit({id:!0});Ta(Zw).omit({id:!0,createdAt:!0});Ta(aE).omit({id:!0});Ta(Yw).omit({id:!0,createdAt:!0});Ta(oE).omit({id:!0});Ta(lE).omit({id:!0,updatedAt:!0});Ta(cE).omit({id:!0,createdAt:!0});const dE=Ta(uE).omit({id:!0,updatedAt:!0});Ta(rE).omit({id:!0});U.object({message:U.string()}),U.object({message:U.string()}),U.object({message:U.string()}),U.object({message:U.string()});const _o={auth:{login:{method:"POST",path:"/api/login",input:U.object({username:U.string().email("Please enter a valid email address"),password:U.string().min(1,"Password is required")}),responses:{200:U.custom()}},logout:{method:"POST",path:"/api/logout",responses:{200:U.void()}},me:{path:"/api/user",responses:{200:U.custom()}}},clients:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({name:U.string().min(1,"Client name is required"),location:U.string().min(1,"Location is required"),gstNo:U.string().optional(),contactPerson:U.string().optional(),mobileNumber:U.string().optional(),emailAddress:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({name:U.string().min(1).optional(),location:U.string().min(1).optional(),gstNo:U.string().optional(),contactPerson:U.string().optional(),mobileNumber:U.string().optional(),emailAddress:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},projects:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({projectName:U.string().min(1,"Project name is required"),clientId:U.number().min(1,"Client selection is required"),location:U.string().min(1,"Location is required"),quotationType:U.enum(bm,{errorMap:()=>({message:"Quotation type is required"})})}),responses:{201:U.custom()}},update:{input:U.object({projectName:U.string().min(1).optional(),clientId:U.number().min(1).optional(),location:U.string().min(1).optional(),quotationType:U.enum(bm).optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},quotations:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),quotationNumber:U.string().min(1),revision:U.string().default("R-000"),enquiryNumber:U.string().min(1),subject:U.string().min(1),contactName:U.string().min(1),contactMobile:U.string().min(1),contactEmail:U.string().email(),buildingDescription:U.string().optional(),buildingArea:U.string().optional(),frameType:U.string().optional(),length:U.string().optional(),width:U.string().optional(),clearHeight:U.string().optional(),roofSlope:U.string().optional(),paymentTerms:U.string().optional(),notes:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({quotationNumber:U.string().min(1).optional(),revision:U.string().optional(),enquiryNumber:U.string().min(1).optional(),subject:U.string().min(1).optional(),contactName:U.string().min(1).optional(),contactMobile:U.string().min(1).optional(),contactEmail:U.string().email().optional(),buildingDescription:U.string().optional(),buildingArea:U.string().optional(),frameType:U.string().optional(),length:U.string().optional(),width:U.string().optional(),clearHeight:U.string().optional(),roofSlope:U.string().optional(),paymentTerms:U.string().optional(),notes:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},quotationItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),unit:U.string().min(1),quantity:U.string(),rate:U.string(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),unit:U.string().min(1).optional(),quantity:U.string().optional(),rate:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},branding:{get:{responses:{200:U.custom()}},update:{input:U.object({logoUrl:U.string().optional(),headerUrl:U.string().optional(),footerUrl:U.string().optional(),stampUrl:U.string().optional(),storeKeeperSignUrl:U.string().optional(),qcEnggSignUrl:U.string().optional(),storeInchargeSignUrl:U.string().optional(),plantHeadSignUrl:U.string().optional(),primaryColor:U.string().optional(),secondaryColor:U.string().optional(),entityName:U.string().optional(),cin:U.string().optional(),companyGstin:U.string().optional(),website:U.string().optional(),email:U.string().optional(),headOfficeAddress:U.string().optional(),workshopAddress:U.string().optional()}),responses:{200:U.custom()}}},invoices:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),invoiceNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({invoiceNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},invoiceItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},gatePasses:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),gatePassNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({gatePassNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},gatePassItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},deliveryChallans:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),deliveryChallanNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({deliveryChallanNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},deliveryChallanItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},ledger:{getBudget:{responses:{200:U.custom().nullable()}},upsertBudget:{input:U.object({projectValue:U.string()}),responses:{200:U.custom()}},listEntries:{responses:{200:U.array(U.custom())}},createEntry:{input:U.object({entryDate:U.string().min(1),entryType:U.enum(["expense","receipt"]),category:U.string().min(1),description:U.string().min(1),amount:U.string(),paymentMode:U.string().min(1),remarks:U.string().optional(),reference:U.string().optional(),receivedAgainst:U.string().optional(),chequeNumber:U.string().optional(),bankName:U.string().optional(),chequeDate:U.string().optional(),utrNumber:U.string().optional(),attachmentUrl:U.string().optional()}),responses:{201:U.custom()}},updateEntry:{input:U.object({entryDate:U.string().optional(),entryType:U.enum(["expense","receipt"]).optional(),category:U.string().optional(),description:U.string().optional(),amount:U.string().optional(),paymentMode:U.string().optional(),remarks:U.string().optional(),reference:U.string().optional(),receivedAgainst:U.string().optional(),chequeNumber:U.string().optional(),bankName:U.string().optional(),chequeDate:U.string().optional(),utrNumber:U.string().optional(),attachmentUrl:U.string().optional()}),responses:{200:U.custom()}},deleteEntry:{responses:{204:U.void()}}},users:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({username:U.string().email("Please enter a valid email address"),password:U.string().min(6,"Password must be at least 6 characters"),name:U.string().min(1,"Name is required"),email:U.string().email("Please enter a valid email address").optional(),mobile:U.string().min(10,"Valid mobile number is required").optional(),role:U.enum(_h,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:U.array(U.number()).optional()}),responses:{201:U.custom(),403:U.object({message:U.string()})}},update:{input:U.object({username:U.string().email().optional(),password:U.string().min(6).optional(),name:U.string().min(1).optional(),email:U.string().email().optional(),mobile:U.string().min(10).optional(),role:U.enum(_h).optional(),assignedClientIds:U.array(U.number()).optional()}),responses:{200:U.custom(),403:U.object({message:U.string()})}},delete:{responses:{204:U.void(),403:U.object({message:U.string()})}},getClientAssignments:{responses:{200:U.array(U.number())}}}};function Ea(){return Ln({queryKey:[_o.auth.me.path],queryFn:async()=>{const t=await fetch(_o.auth.me.path,{credentials:"include"});if(t.status===401)return null;if(!t.ok)throw new Error("Failed to fetch user");return _o.auth.me.responses[200].parse(await t.json())},retry:(t,e)=>e?.message?.includes("401")?!1:t<3})}function fE(){const t=Im(),[,e]=za(),{toast:n}=$a();return Dr({mutationFn:async r=>{const a=_o.auth.login.input.parse(r),o=await fetch(_o.auth.login.path,{method:_o.auth.login.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!o.ok)throw o.status===401?new Error("Invalid email or password"):new Error("Login failed");return _o.auth.login.responses[200].parse(await o.json())},onSuccess:r=>{t.setQueryData([_o.auth.me.path],r),n({title:"Welcome back!",description:`Successfully logged in as ${r.name}`}),e("/dashboard")},onError:r=>{n({variant:"destructive",title:"Login Failed",description:r.message})}})}function hE(){const t=Im(),[,e]=za(),{toast:n}=$a();return Dr({mutationFn:async()=>{if(!(await fetch(_o.auth.logout.path,{method:_o.auth.logout.method,credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{t.setQueryData([_o.auth.me.path],null),e("/"),n({title:"Logged out",description:"You have been successfully logged out."})}})}const Xw=k.createContext({branding:null,isLoading:!0});function pE(){return k.useContext(Xw)}function U2(t){t=t.replace("#","");const e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255,a=Math.max(e,n,r),o=Math.min(e,n,r);let u=0,c=0;const f=(a+o)/2;if(a!==o){const p=a-o;switch(c=f>.5?p/(2-a-o):p/(a+o),a){case e:u=((n-r)/p+(n<r?6:0))/6;break;case n:u=((r-e)/p+2)/6;break;case r:u=((e-n)/p+4)/6;break}}return`${Math.round(u*360)} ${Math.round(c*100)}% ${Math.round(f*100)}%`}function mE({children:t}){const{data:e}=Ea(),{data:n,isLoading:r}=Ln({queryKey:["/api/branding"],staleTime:300*1e3,enabled:!!e,refetchOnMount:!0,refetchOnWindowFocus:!1});return k.useEffect(()=>{if(n){const a=document.documentElement;if(n.primaryColor){const o=U2(n.primaryColor);a.style.setProperty("--primary",o),a.style.setProperty("--ring",o)}if(n.secondaryColor){const o=U2(n.secondaryColor);a.style.setProperty("--secondary",o)}}},[n]),s.jsx(Xw.Provider,{value:{branding:n||null,isLoading:r},children:t})}var Mh=t=>t.type==="checkbox",Mu=t=>t instanceof Date,Ca=t=>t==null;const Jw=t=>typeof t=="object";var li=t=>!Ca(t)&&!Array.isArray(t)&&Jw(t)&&!Mu(t),eN=t=>li(t)&&t.target?Mh(t.target)?t.target.checked:t.target.value:t,gE=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,tN=(t,e)=>t.has(gE(e)),vE=t=>{const e=t.constructor&&t.constructor.prototype;return li(e)&&e.hasOwnProperty("isPrototypeOf")},fv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gi(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(fv&&(t instanceof Blob||r))&&(n||li(t)))if(e=n?[]:{},!n&&!vE(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Gi(t[a]));else return t;return e}var Zm=t=>Array.isArray(t)?t.filter(Boolean):[],si=t=>t===void 0,qt=(t,e,n)=>{if(!e||!li(t))return n;const r=Zm(e.split(/[,[\].]+?/)).reduce((a,o)=>Ca(a)?a:a[o],t);return si(r)||r===t?si(t[e])?n:t[e]:r},so=t=>typeof t=="boolean",hv=t=>/^\w*$/.test(t),nN=t=>Zm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),zr=(t,e,n)=>{let r=-1;const a=hv(e)?[e]:nN(e),o=a.length,u=o-1;for(;++r<o;){const c=a[r];let f=n;if(r!==u){const p=t[c];f=li(p)||Array.isArray(p)?p:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=f,t=t[c]}};const wm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Go={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rN=xn.createContext(null),Ym=()=>xn.useContext(rN),xE=t=>{const{children:e,...n}=t;return xn.createElement(rN.Provider,{value:n},e)};var sN=(t,e,n,r=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==Go.all&&(e._proxyFormState[u]=!r||Go.all),n&&(n[u]=!0),t[u]}});return a};function yE(t){const e=Ym(),{control:n=e.control,disabled:r,name:a,exact:o}=t||{},[u,c]=xn.useState(n._formState),f=xn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=xn.useRef(a);return p.current=a,xn.useEffect(()=>n._subscribe({name:p.current,formState:f.current,exact:o,callback:m=>{!r&&c({...n._formState,...m})}}),[n,r,o]),xn.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),xn.useMemo(()=>sN(u,n,f.current,!1),[u,n])}var kl=t=>typeof t=="string",iN=(t,e,n,r,a)=>kl(t)?(r&&e.watch.add(t),qt(n,t,a)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),qt(n,o))):(r&&(e.watchAll=!0),n);function bE(t){const e=Ym(),{control:n=e.control,name:r,defaultValue:a,disabled:o,exact:u}=t||{},c=xn.useRef(r),f=xn.useRef(a);c.current=r,xn.useEffect(()=>n._subscribe({name:c.current,formState:{values:!0},exact:u,callback:b=>!o&&m(iN(c.current,n._names,b.values||n._formValues,!1,f.current))}),[n,o,u]);const[p,m]=xn.useState(n._getWatch(r,a));return xn.useEffect(()=>n._removeUnmounted()),p}function wE(t){const e=Ym(),{name:n,disabled:r,control:a=e.control,shouldUnregister:o}=t,u=tN(a._names.array,n),c=bE({control:a,name:n,defaultValue:qt(a._formValues,n,qt(a._defaultValues,n,t.defaultValue)),exact:!0}),f=yE({control:a,name:n,exact:!0}),p=xn.useRef(t),m=xn.useRef(a.register(n,{...t.rules,value:c,...so(t.disabled)?{disabled:t.disabled}:{}})),b=xn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!qt(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!qt(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!qt(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!qt(f.validatingFields,n)},error:{enumerable:!0,get:()=>qt(f.errors,n)}}),[f,n]),j=xn.useCallback(P=>m.current.onChange({target:{value:eN(P),name:n},type:wm.CHANGE}),[n]),y=xn.useCallback(()=>m.current.onBlur({target:{value:qt(a._formValues,n),name:n},type:wm.BLUR}),[n,a._formValues]),I=xn.useCallback(P=>{const _=qt(a._fields,n);_&&P&&(_._f.ref={focus:()=>P.focus(),select:()=>P.select(),setCustomValidity:F=>P.setCustomValidity(F),reportValidity:()=>P.reportValidity()})},[a._fields,n]),S=xn.useMemo(()=>({name:n,value:c,...so(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:j,onBlur:y,ref:I}),[n,r,f.disabled,j,y,I,c]);return xn.useEffect(()=>{const P=a._options.shouldUnregister||o;a.register(n,{...p.current.rules,...so(p.current.disabled)?{disabled:p.current.disabled}:{}});const _=(F,v)=>{const q=qt(a._fields,F);q&&q._f&&(q._f.mount=v)};if(_(n,!0),P){const F=Gi(qt(a._options.defaultValues,n));zr(a._defaultValues,n,F),si(qt(a._formValues,n))&&zr(a._formValues,n,F)}return!u&&a.register(n),()=>{(u?P&&!a._state.action:P)?a.unregister(n):_(n,!1)}},[n,a,u,o]),xn.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),xn.useMemo(()=>({field:S,formState:f,fieldState:b}),[S,f,b])}const NE=t=>t.render(wE(t));var aN=(t,e,n,r,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:a||!0}}:{},rh=t=>Array.isArray(t)?t:[t],z2=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},y1=t=>Ca(t)||!Jw(t);function Yc(t,e){if(y1(t)||y1(e))return t===e;if(Mu(t)&&Mu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const a of n){const o=t[a];if(!r.includes(a))return!1;if(a!=="ref"){const u=e[a];if(Mu(o)&&Mu(u)||li(o)&&li(u)||Array.isArray(o)&&Array.isArray(u)?!Yc(o,u):o!==u)return!1}}return!0}var ja=t=>li(t)&&!Object.keys(t).length,pv=t=>t.type==="file",Ko=t=>typeof t=="function",Nm=t=>{if(!fv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},oN=t=>t.type==="select-multiple",mv=t=>t.type==="radio",SE=t=>mv(t)||Mh(t),m0=t=>Nm(t)&&t.isConnected;function jE(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=si(t)?r++:t[e[r++]];return t}function CE(t){for(const e in t)if(t.hasOwnProperty(e)&&!si(t[e]))return!1;return!0}function Ai(t,e){const n=Array.isArray(e)?e:hv(e)?[e]:nN(e),r=n.length===1?t:jE(t,n),a=n.length-1,o=n[a];return r&&delete r[o],a!==0&&(li(r)&&ja(r)||Array.isArray(r)&&CE(r))&&Ai(t,n.slice(0,-1)),t}var lN=t=>{for(const e in t)if(Ko(t[e]))return!0;return!1};function Sm(t,e={}){const n=Array.isArray(t);if(li(t)||n)for(const r in t)Array.isArray(t[r])||li(t[r])&&!lN(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Sm(t[r],e[r])):Ca(t[r])||(e[r]=!0);return e}function cN(t,e,n){const r=Array.isArray(t);if(li(t)||r)for(const a in t)Array.isArray(t[a])||li(t[a])&&!lN(t[a])?si(e)||y1(n[a])?n[a]=Array.isArray(t[a])?Sm(t[a],[]):{...Sm(t[a])}:cN(t[a],Ca(e)?{}:e[a],n[a]):n[a]=!Yc(t[a],e[a]);return n}var Gf=(t,e)=>cN(t,e,Sm(e));const $2={value:!1,isValid:!1},V2={value:!0,isValid:!0};var uN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!si(t[0].attributes.value)?si(t[0].value)||t[0].value===""?V2:{value:t[0].value,isValid:!0}:V2:$2}return $2},dN=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>si(t)?t:e?t===""?NaN:t&&+t:n&&kl(t)?new Date(t):r?r(t):t;const H2={isValid:!1,value:null};var fN=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,H2):H2;function W2(t){const e=t.ref;return pv(e)?e.files:mv(e)?fN(t.refs).value:oN(e)?[...e.selectedOptions].map(({value:n})=>n):Mh(e)?uN(t.refs).value:dN(si(e.value)?t.ref.value:e.value,t)}var _E=(t,e,n,r)=>{const a={};for(const o of t){const u=qt(e,o);u&&zr(a,o,u._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:r}},jm=t=>t instanceof RegExp,Kf=t=>si(t)?t:jm(t)?t.source:li(t)?jm(t.value)?t.value.source:t.value:t,G2=t=>({isOnSubmit:!t||t===Go.onSubmit,isOnBlur:t===Go.onBlur,isOnChange:t===Go.onChange,isOnAll:t===Go.all,isOnTouch:t===Go.onTouched});const K2="AsyncFunction";var AE=t=>!!t&&!!t.validate&&!!(Ko(t.validate)&&t.validate.constructor.name===K2||li(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===K2)),PE=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Q2=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const sh=(t,e,n,r)=>{for(const a of n||Object.keys(t)){const o=qt(t,a);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(sh(c,e))break}else if(li(c)&&sh(c,e))break}}};function Z2(t,e,n){const r=qt(t,n);if(r||hv(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),u=qt(e,o),c=qt(t,o);if(u&&!Array.isArray(u)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};a.pop()}return{name:n}}var kE=(t,e,n,r)=>{n(t);const{name:a,...o}=t;return ja(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||Go.all))},TE=(t,e,n)=>!t||!e||t===e||rh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),EE=(t,e,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?r.isOnBlur:a.isOnBlur)?!t:(n?r.isOnChange:a.isOnChange)?t:!0,LE=(t,e)=>!Zm(qt(t,e)).length&&Ai(t,e),RE=(t,e,n)=>{const r=rh(qt(t,n));return zr(r,"root",e[n]),zr(t,n,r),t},Hp=t=>kl(t);function Y2(t,e,n="validate"){if(Hp(t)||Array.isArray(t)&&t.every(Hp)||so(t)&&!t)return{type:n,message:Hp(t)?t:"",ref:e}}var jd=t=>li(t)&&!jm(t)?t:{value:t,message:""},X2=async(t,e,n,r,a,o)=>{const{ref:u,refs:c,required:f,maxLength:p,minLength:m,min:b,max:j,pattern:y,validate:I,name:S,valueAsNumber:P,mount:_}=t._f,F=qt(n,S);if(!_||e.has(S))return{};const v=c?c[0]:u,q=R=>{a&&v.reportValidity&&(v.setCustomValidity(so(R)?"":R||""),v.reportValidity())},ee={},ae=mv(u),W=Mh(u),te=ae||W,Q=(P||pv(u))&&si(u.value)&&si(F)||Nm(u)&&u.value===""||F===""||Array.isArray(F)&&!F.length,ue=aN.bind(null,S,r,ee),O=(R,z,Y,Ce=lc.maxLength,Ae=lc.minLength)=>{const Pe=R?z:Y;ee[S]={type:R?Ce:Ae,message:Pe,ref:u,...ue(R?Ce:Ae,Pe)}};if(o?!Array.isArray(F)||!F.length:f&&(!te&&(Q||Ca(F))||so(F)&&!F||W&&!uN(c).isValid||ae&&!fN(c).isValid)){const{value:R,message:z}=Hp(f)?{value:!!f,message:f}:jd(f);if(R&&(ee[S]={type:lc.required,message:z,ref:v,...ue(lc.required,z)},!r))return q(z),ee}if(!Q&&(!Ca(b)||!Ca(j))){let R,z;const Y=jd(j),Ce=jd(b);if(!Ca(F)&&!isNaN(F)){const Ae=u.valueAsNumber||F&&+F;Ca(Y.value)||(R=Ae>Y.value),Ca(Ce.value)||(z=Ae<Ce.value)}else{const Ae=u.valueAsDate||new Date(F),Pe=De=>new Date(new Date().toDateString()+" "+De),ce=u.type=="time",ge=u.type=="week";kl(Y.value)&&F&&(R=ce?Pe(F)>Pe(Y.value):ge?F>Y.value:Ae>new Date(Y.value)),kl(Ce.value)&&F&&(z=ce?Pe(F)<Pe(Ce.value):ge?F<Ce.value:Ae<new Date(Ce.value))}if((R||z)&&(O(!!R,Y.message,Ce.message,lc.max,lc.min),!r))return q(ee[S].message),ee}if((p||m)&&!Q&&(kl(F)||o&&Array.isArray(F))){const R=jd(p),z=jd(m),Y=!Ca(R.value)&&F.length>+R.value,Ce=!Ca(z.value)&&F.length<+z.value;if((Y||Ce)&&(O(Y,R.message,z.message),!r))return q(ee[S].message),ee}if(y&&!Q&&kl(F)){const{value:R,message:z}=jd(y);if(jm(R)&&!F.match(R)&&(ee[S]={type:lc.pattern,message:z,ref:u,...ue(lc.pattern,z)},!r))return q(z),ee}if(I){if(Ko(I)){const R=await I(F,n),z=Y2(R,v);if(z&&(ee[S]={...z,...ue(lc.validate,z.message)},!r))return q(z.message),ee}else if(li(I)){let R={};for(const z in I){if(!ja(R)&&!r)break;const Y=Y2(await I[z](F,n),v,z);Y&&(R={...Y,...ue(z,Y.message)},q(Y.message),r&&(ee[S]=R))}if(!ja(R)&&(ee[S]={ref:v,...R},!r))return ee}}return q(!0),ee};const DE={mode:Go.onSubmit,reValidateMode:Go.onChange,shouldFocusError:!0};function IE(t={}){let e={...DE,...t},n={submitCount:0,isDirty:!1,isLoading:Ko(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let a=li(e.defaultValues)||li(e.values)?Gi(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:Gi(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...m};const j={array:z2(),state:z2()},y=G2(e.mode),I=G2(e.reValidateMode),S=e.criteriaMode===Go.all,P=D=>H=>{clearTimeout(p),p=setTimeout(D,H)},_=async D=>{if(!e.disabled&&(m.isValid||b.isValid||D)){const H=e.resolver?ja((await Q()).errors):await O(r,!0);H!==n.isValid&&j.state.next({isValid:H})}},F=(D,H)=>{!e.disabled&&(m.isValidating||m.validatingFields||b.isValidating||b.validatingFields)&&((D||Array.from(c.mount)).forEach(je=>{je&&(H?zr(n.validatingFields,je,H):Ai(n.validatingFields,je))}),j.state.next({validatingFields:n.validatingFields,isValidating:!ja(n.validatingFields)}))},v=(D,H=[],je,Ne,Te=!0,$e=!0)=>{if(Ne&&je&&!e.disabled){if(u.action=!0,$e&&Array.isArray(qt(r,D))){const st=je(qt(r,D),Ne.argA,Ne.argB);Te&&zr(r,D,st)}if($e&&Array.isArray(qt(n.errors,D))){const st=je(qt(n.errors,D),Ne.argA,Ne.argB);Te&&zr(n.errors,D,st),LE(n.errors,D)}if((m.touchedFields||b.touchedFields)&&$e&&Array.isArray(qt(n.touchedFields,D))){const st=je(qt(n.touchedFields,D),Ne.argA,Ne.argB);Te&&zr(n.touchedFields,D,st)}(m.dirtyFields||b.dirtyFields)&&(n.dirtyFields=Gf(a,o)),j.state.next({name:D,isDirty:z(D,H),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else zr(o,D,H)},q=(D,H)=>{zr(n.errors,D,H),j.state.next({errors:n.errors})},ee=D=>{n.errors=D,j.state.next({errors:n.errors,isValid:!1})},ae=(D,H,je,Ne)=>{const Te=qt(r,D);if(Te){const $e=qt(o,D,si(je)?qt(a,D):je);si($e)||Ne&&Ne.defaultChecked||H?zr(o,D,H?$e:W2(Te._f)):Ae(D,$e),u.mount&&_()}},W=(D,H,je,Ne,Te)=>{let $e=!1,st=!1;const ct={name:D};if(!e.disabled){if(!je||Ne){(m.isDirty||b.isDirty)&&(st=n.isDirty,n.isDirty=ct.isDirty=z(),$e=st!==ct.isDirty);const jt=Yc(qt(a,D),H);st=!!qt(n.dirtyFields,D),jt?Ai(n.dirtyFields,D):zr(n.dirtyFields,D,!0),ct.dirtyFields=n.dirtyFields,$e=$e||(m.dirtyFields||b.dirtyFields)&&st!==!jt}if(je){const jt=qt(n.touchedFields,D);jt||(zr(n.touchedFields,D,je),ct.touchedFields=n.touchedFields,$e=$e||(m.touchedFields||b.touchedFields)&&jt!==je)}$e&&Te&&j.state.next(ct)}return $e?ct:{}},te=(D,H,je,Ne)=>{const Te=qt(n.errors,D),$e=(m.isValid||b.isValid)&&so(H)&&n.isValid!==H;if(e.delayError&&je?(f=P(()=>q(D,je)),f(e.delayError)):(clearTimeout(p),f=null,je?zr(n.errors,D,je):Ai(n.errors,D)),(je?!Yc(Te,je):Te)||!ja(Ne)||$e){const st={...Ne,...$e&&so(H)?{isValid:H}:{},errors:n.errors,name:D};n={...n,...st},j.state.next(st)}},Q=async D=>{F(D,!0);const H=await e.resolver(o,e.context,_E(D||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return F(D),H},ue=async D=>{const{errors:H}=await Q(D);if(D)for(const je of D){const Ne=qt(H,je);Ne?zr(n.errors,je,Ne):Ai(n.errors,je)}else n.errors=H;return H},O=async(D,H,je={valid:!0})=>{for(const Ne in D){const Te=D[Ne];if(Te){const{_f:$e,...st}=Te;if($e){const ct=c.array.has($e.name),jt=Te._f&&AE(Te._f);jt&&m.validatingFields&&F([Ne],!0);const Pt=await X2(Te,c.disabled,o,S,e.shouldUseNativeValidation&&!H,ct);if(jt&&m.validatingFields&&F([Ne]),Pt[$e.name]&&(je.valid=!1,H))break;!H&&(qt(Pt,$e.name)?ct?RE(n.errors,Pt,$e.name):zr(n.errors,$e.name,Pt[$e.name]):Ai(n.errors,$e.name))}!ja(st)&&await O(st,H,je)}}return je.valid},R=()=>{for(const D of c.unMount){const H=qt(r,D);H&&(H._f.refs?H._f.refs.every(je=>!m0(je)):!m0(H._f.ref))&&Ie(D)}c.unMount=new Set},z=(D,H)=>!e.disabled&&(D&&H&&zr(o,D,H),!Yc(M(),a)),Y=(D,H,je)=>iN(D,c,{...u.mount?o:si(H)?a:kl(D)?{[D]:H}:H},je,H),Ce=D=>Zm(qt(u.mount?o:a,D,e.shouldUnregister?qt(a,D,[]):[])),Ae=(D,H,je={})=>{const Ne=qt(r,D);let Te=H;if(Ne){const $e=Ne._f;$e&&(!$e.disabled&&zr(o,D,dN(H,$e)),Te=Nm($e.ref)&&Ca(H)?"":H,oN($e.ref)?[...$e.ref.options].forEach(st=>st.selected=Te.includes(st.value)):$e.refs?Mh($e.ref)?$e.refs.length>1?$e.refs.forEach(st=>(!st.defaultChecked||!st.disabled)&&(st.checked=Array.isArray(Te)?!!Te.find(ct=>ct===st.value):Te===st.value)):$e.refs[0]&&($e.refs[0].checked=!!Te):$e.refs.forEach(st=>st.checked=st.value===Te):pv($e.ref)?$e.ref.value="":($e.ref.value=Te,$e.ref.type||j.state.next({name:D,values:Gi(o)})))}(je.shouldDirty||je.shouldTouch)&&W(D,Te,je.shouldTouch,je.shouldDirty,!0),je.shouldValidate&&se(D)},Pe=(D,H,je)=>{for(const Ne in H){const Te=H[Ne],$e=`${D}.${Ne}`,st=qt(r,$e);(c.array.has(D)||li(Te)||st&&!st._f)&&!Mu(Te)?Pe($e,Te,je):Ae($e,Te,je)}},ce=(D,H,je={})=>{const Ne=qt(r,D),Te=c.array.has(D),$e=Gi(H);zr(o,D,$e),Te?(j.array.next({name:D,values:Gi(o)}),(m.isDirty||m.dirtyFields||b.isDirty||b.dirtyFields)&&je.shouldDirty&&j.state.next({name:D,dirtyFields:Gf(a,o),isDirty:z(D,$e)})):Ne&&!Ne._f&&!Ca($e)?Pe(D,$e,je):Ae(D,$e,je),Q2(D,c)&&j.state.next({...n}),j.state.next({name:u.mount?D:void 0,values:Gi(o)})},ge=async D=>{u.mount=!0;const H=D.target;let je=H.name,Ne=!0;const Te=qt(r,je),$e=st=>{Ne=Number.isNaN(st)||Mu(st)&&isNaN(st.getTime())||Yc(st,qt(o,je,st))};if(Te){let st,ct;const jt=H.type?W2(Te._f):eN(D),Pt=D.type===wm.BLUR||D.type===wm.FOCUS_OUT,pr=!PE(Te._f)&&!e.resolver&&!qt(n.errors,je)&&!Te._f.deps||EE(Pt,qt(n.touchedFields,je),n.isSubmitted,I,y),yn=Q2(je,c,Pt);zr(o,je,jt),Pt?(Te._f.onBlur&&Te._f.onBlur(D),f&&f(0)):Te._f.onChange&&Te._f.onChange(D);const Gt=W(je,jt,Pt),Ut=!ja(Gt)||yn;if(!Pt&&j.state.next({name:je,type:D.type,values:Gi(o)}),pr)return(m.isValid||b.isValid)&&(e.mode==="onBlur"?Pt&&_():Pt||_()),Ut&&j.state.next({name:je,...yn?{}:Gt});if(!Pt&&yn&&j.state.next({...n}),e.resolver){const{errors:tn}=await Q([je]);if($e(jt),Ne){const Ge=Z2(n.errors,r,je),at=Z2(tn,r,Ge.name||je);st=at.error,je=at.name,ct=ja(tn)}}else F([je],!0),st=(await X2(Te,c.disabled,o,S,e.shouldUseNativeValidation))[je],F([je]),$e(jt),Ne&&(st?ct=!1:(m.isValid||b.isValid)&&(ct=await O(r,!0)));Ne&&(Te._f.deps&&se(Te._f.deps),te(je,ct,st,Gt))}},De=(D,H)=>{if(qt(n.errors,H)&&D.focus)return D.focus(),1},se=async(D,H={})=>{let je,Ne;const Te=rh(D);if(e.resolver){const $e=await ue(si(D)?D:Te);je=ja($e),Ne=D?!Te.some(st=>qt($e,st)):je}else D?(Ne=(await Promise.all(Te.map(async $e=>{const st=qt(r,$e);return await O(st&&st._f?{[$e]:st}:st)}))).every(Boolean),!(!Ne&&!n.isValid)&&_()):Ne=je=await O(r);return j.state.next({...!kl(D)||(m.isValid||b.isValid)&&je!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:je}:{},errors:n.errors}),H.shouldFocus&&!Ne&&sh(r,De,D?Te:c.mount),Ne},M=D=>{const H={...u.mount?o:a};return si(D)?H:kl(D)?qt(H,D):D.map(je=>qt(H,je))},L=(D,H)=>({invalid:!!qt((H||n).errors,D),isDirty:!!qt((H||n).dirtyFields,D),error:qt((H||n).errors,D),isValidating:!!qt(n.validatingFields,D),isTouched:!!qt((H||n).touchedFields,D)}),ne=D=>{D&&rh(D).forEach(H=>Ai(n.errors,H)),j.state.next({errors:D?n.errors:{}})},me=(D,H,je)=>{const Ne=(qt(r,D,{_f:{}})._f||{}).ref,Te=qt(n.errors,D)||{},{ref:$e,message:st,type:ct,...jt}=Te;zr(n.errors,D,{...jt,...H,ref:Ne}),j.state.next({name:D,errors:n.errors,isValid:!1}),je&&je.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},ye=(D,H)=>Ko(D)?j.state.subscribe({next:je=>D(Y(void 0,H),je)}):Y(D,H,!0),be=D=>j.state.subscribe({next:H=>{TE(D.name,H.name,D.exact)&&kE(H,D.formState||m,B,D.reRenderRoot)&&D.callback({values:{...o},...n,...H})}}).unsubscribe,Re=D=>(u.mount=!0,b={...b,...D.formState},be({...D,formState:b})),Ie=(D,H={})=>{for(const je of D?rh(D):c.mount)c.mount.delete(je),c.array.delete(je),H.keepValue||(Ai(r,je),Ai(o,je)),!H.keepError&&Ai(n.errors,je),!H.keepDirty&&Ai(n.dirtyFields,je),!H.keepTouched&&Ai(n.touchedFields,je),!H.keepIsValidating&&Ai(n.validatingFields,je),!e.shouldUnregister&&!H.keepDefaultValue&&Ai(a,je);j.state.next({values:Gi(o)}),j.state.next({...n,...H.keepDirty?{isDirty:z()}:{}}),!H.keepIsValid&&_()},Me=({disabled:D,name:H})=>{(so(D)&&u.mount||D||c.disabled.has(H))&&(D?c.disabled.add(H):c.disabled.delete(H))},Ze=(D,H={})=>{let je=qt(r,D);const Ne=so(H.disabled)||so(e.disabled);return zr(r,D,{...je||{},_f:{...je&&je._f?je._f:{ref:{name:D}},name:D,mount:!0,...H}}),c.mount.add(D),je?Me({disabled:so(H.disabled)?H.disabled:e.disabled,name:D}):ae(D,!0,H.value),{...Ne?{disabled:H.disabled||e.disabled}:{},...e.progressive?{required:!!H.required,min:Kf(H.min),max:Kf(H.max),minLength:Kf(H.minLength),maxLength:Kf(H.maxLength),pattern:Kf(H.pattern)}:{},name:D,onChange:ge,onBlur:ge,ref:Te=>{if(Te){Ze(D,H),je=qt(r,D);const $e=si(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,st=SE($e),ct=je._f.refs||[];if(st?ct.find(jt=>jt===$e):$e===je._f.ref)return;zr(r,D,{_f:{...je._f,...st?{refs:[...ct.filter(m0),$e,...Array.isArray(qt(a,D))?[{}]:[]],ref:{type:$e.type,name:D}}:{ref:$e}}}),ae(D,!1,void 0,$e)}else je=qt(r,D,{}),je._f&&(je._f.mount=!1),(e.shouldUnregister||H.shouldUnregister)&&!(tN(c.array,D)&&u.action)&&c.unMount.add(D)}}},ft=()=>e.shouldFocusError&&sh(r,De,c.mount),mt=D=>{so(D)&&(j.state.next({disabled:D}),sh(r,(H,je)=>{const Ne=qt(r,je);Ne&&(H.disabled=Ne._f.disabled||D,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(Te=>{Te.disabled=Ne._f.disabled||D}))},0,!1))},Ft=(D,H)=>async je=>{let Ne;je&&(je.preventDefault&&je.preventDefault(),je.persist&&je.persist());let Te=Gi(o);if(j.state.next({isSubmitting:!0}),e.resolver){const{errors:$e,values:st}=await Q();n.errors=$e,Te=st}else await O(r);if(c.disabled.size)for(const $e of c.disabled)zr(Te,$e,void 0);if(Ai(n.errors,"root"),ja(n.errors)){j.state.next({errors:{}});try{await D(Te,je)}catch($e){Ne=$e}}else H&&await H({...n.errors},je),ft(),setTimeout(ft);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ja(n.errors)&&!Ne,submitCount:n.submitCount+1,errors:n.errors}),Ne)throw Ne},le=(D,H={})=>{qt(r,D)&&(si(H.defaultValue)?ce(D,Gi(qt(a,D))):(ce(D,H.defaultValue),zr(a,D,Gi(H.defaultValue))),H.keepTouched||Ai(n.touchedFields,D),H.keepDirty||(Ai(n.dirtyFields,D),n.isDirty=H.defaultValue?z(D,Gi(qt(a,D))):z()),H.keepError||(Ai(n.errors,D),m.isValid&&_()),j.state.next({...n}))},gt=(D,H={})=>{const je=D?Gi(D):a,Ne=Gi(je),Te=ja(D),$e=Te?a:Ne;if(H.keepDefaultValues||(a=je),!H.keepValues){if(H.keepDirtyValues){const st=new Set([...c.mount,...Object.keys(Gf(a,o))]);for(const ct of Array.from(st))qt(n.dirtyFields,ct)?zr($e,ct,qt(o,ct)):ce(ct,qt($e,ct))}else{if(fv&&si(D))for(const st of c.mount){const ct=qt(r,st);if(ct&&ct._f){const jt=Array.isArray(ct._f.refs)?ct._f.refs[0]:ct._f.ref;if(Nm(jt)){const Pt=jt.closest("form");if(Pt){Pt.reset();break}}}}for(const st of c.mount)ce(st,qt($e,st))}o=Gi($e),j.array.next({values:{...$e}}),j.state.next({values:{...$e}})}c={mount:H.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!H.keepIsValid||!!H.keepDirtyValues,u.watch=!!e.shouldUnregister,j.state.next({submitCount:H.keepSubmitCount?n.submitCount:0,isDirty:Te?!1:H.keepDirty?n.isDirty:!!(H.keepDefaultValues&&!Yc(D,a)),isSubmitted:H.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Te?{}:H.keepDirtyValues?H.keepDefaultValues&&o?Gf(a,o):n.dirtyFields:H.keepDefaultValues&&D?Gf(a,D):H.keepDirty?n.dirtyFields:{},touchedFields:H.keepTouched?n.touchedFields:{},errors:H.keepErrors?n.errors:{},isSubmitSuccessful:H.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(D,H)=>gt(Ko(D)?D(o):D,H),X=(D,H={})=>{const je=qt(r,D),Ne=je&&je._f;if(Ne){const Te=Ne.refs?Ne.refs[0]:Ne.ref;Te.focus&&(Te.focus(),H.shouldSelect&&Ko(Te.select)&&Te.select())}},B=D=>{n={...n,...D}},re={control:{register:Ze,unregister:Ie,getFieldState:L,handleSubmit:Ft,setError:me,_subscribe:be,_runSchema:Q,_getWatch:Y,_getDirty:z,_setValid:_,_setFieldArray:v,_setDisabledField:Me,_setErrors:ee,_getFieldArray:Ce,_reset:gt,_resetDefaultValues:()=>Ko(e.defaultValues)&&e.defaultValues().then(D=>{xe(D,e.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:mt,_subjects:j,_proxyFormState:m,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(D){u=D},get _defaultValues(){return a},get _names(){return c},set _names(D){c=D},get _formState(){return n},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:Re,trigger:se,register:Ze,handleSubmit:Ft,watch:ye,setValue:ce,getValues:M,reset:xe,resetField:le,clearErrors:ne,unregister:Ie,setError:me,setFocus:X,getFieldState:L};return{...re,formControl:re}}function mf(t={}){const e=xn.useRef(void 0),n=xn.useRef(void 0),[r,a]=xn.useState({isDirty:!1,isValidating:!1,isLoading:Ko(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ko(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:IE(t),formState:r},t.formControl&&t.defaultValues&&!Ko(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const o=e.current.control;return o._options=t,xn.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0}),[o]),xn.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),xn.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),xn.useEffect(()=>{t.values&&!Yc(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[t.values,o]),xn.useEffect(()=>{t.errors&&!ja(t.errors)&&o._setErrors(t.errors)},[t.errors,o]),xn.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),xn.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=sN(r,o),e.current}const J2=(t,e,n)=>{if(t&&"reportValidity"in t){const r=qt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},hN=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?J2(r.ref,n,t):r.refs&&r.refs.forEach(a=>J2(a,n,t))}},FE=(t,e)=>{e.shouldUseNativeValidation&&hN(t,e);const n={};for(const r in t){const a=qt(e.fields,r),o=Object.assign(t[r]||{},{ref:a&&a.ref});if(OE(e.names||Object.keys(t),r)){const u=Object.assign({},qt(n,r));zr(u,"root",o),zr(n,r,u)}else zr(n,r,o)}return n},OE=(t,e)=>t.some(n=>n.startsWith(e+"."));var ME=function(t,e){for(var n={};t.length;){var r=t[0],a=r.code,o=r.message,u=r.path.join(".");if(!n[u])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[u]={message:c.message,type:c.code}}else n[u]={message:o,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(b){return t.push(b)})}),e){var f=n[u].types,p=f&&f[r.code];n[u]=aN(u,e,n,a,p?[].concat(p,r.message):r.message)}t.shift()}return n},gf=function(t,e,n){return n===void 0&&(n={}),function(r,a,o){try{return Promise.resolve((function(u,c){try{var f=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(p){return o.shouldUseNativeValidation&&hN({},o),{errors:{},values:n.raw?r:p}})}catch(p){return c(p)}return f&&f.then?f.then(void 0,c):f})(0,function(u){if((function(c){return Array.isArray(c?.errors)})(u))return{values:{},errors:FE(ME(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}};const BE=Bm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),qe=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...a},o)=>{const u=r?ib:"button";return s.jsx(u,{className:qn(BE({variant:e,size:n,className:t})),ref:o,...a})});qe.displayName="Button";const et=k.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:qn("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));et.displayName="Input";var qE="Label",pN=k.forwardRef((t,e)=>s.jsx(Kn.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pN.displayName=qE;var mN=pN;const UE=Bm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gN=k.forwardRef(({className:t,...e},n)=>s.jsx(mN,{ref:n,className:qn(UE(),t),...e}));gN.displayName=mN.displayName;const vf=xE,vN=k.createContext({}),ar=({...t})=>s.jsx(vN.Provider,{value:{name:t.name},children:s.jsx(NE,{...t})}),Xm=()=>{const t=k.useContext(vN),e=k.useContext(xN),{getFieldState:n,formState:r}=Ym(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},xN=k.createContext({}),Jn=k.forwardRef(({className:t,...e},n)=>{const r=k.useId();return s.jsx(xN.Provider,{value:{id:r},children:s.jsx("div",{ref:n,className:qn("space-y-2",t),...e})})});Jn.displayName="FormItem";const er=k.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:a}=Xm();return s.jsx(gN,{ref:n,className:qn(r&&"text-destructive",t),htmlFor:a,...e})});er.displayName="FormLabel";const tr=k.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:o}=Xm();return s.jsx(ib,{ref:e,id:r,"aria-describedby":n?`${a} ${o}`:`${a}`,"aria-invalid":!!n,...t})});tr.displayName="FormControl";const zE=k.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Xm();return s.jsx("p",{ref:n,id:r,className:qn("text-sm text-muted-foreground",t),...e})});zE.displayName="FormDescription";const nr=k.forwardRef(({className:t,children:e,...n},r)=>{const{error:a,formMessageId:o}=Xm(),u=a?String(a?.message??""):e;return u?s.jsx("p",{ref:r,id:o,className:qn("text-sm font-medium text-destructive",t),...n,children:u}):null});nr.displayName="FormMessage";const $E=_o.auth.login.input;function VE(){const[,t]=za(),{data:e,isLoading:n}=Ea(),{mutate:r,isPending:a}=fE(),{data:o}=Ln({queryKey:["/api/branding/public"],staleTime:300*1e3}),u=mf({resolver:gf($E),defaultValues:{username:"",password:""}});k.useEffect(()=>{e&&t("/dashboard")},[e,t]);function c(f){r(f)}return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx(s1,{className:"w-8 h-8 animate-spin text-primary"})}):e?null:s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:[s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"flex justify-center mb-8",children:o?.logoUrl?s.jsx("img",{src:o.logoUrl,alt:"Company Logo",className:"h-16 max-w-[280px] object-contain","data-testid":"img-login-logo"}):s.jsx("h1",{className:"font-display font-bold text-3xl text-slate-900",children:"REVIRAAPP"})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"font-display font-bold text-2xl text-slate-900",children:"Welcome Back"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"Please enter your details to sign in."})]}),s.jsx(vf,{...u,children:s.jsxs("form",{onSubmit:u.handleSubmit(c),className:"space-y-6",children:[s.jsx(ar,{control:u.control,name:"username",render:({field:f})=>s.jsxs(Jn,{children:[s.jsx(er,{className:"text-slate-700 font-medium",children:"Email Address"}),s.jsx(tr,{children:s.jsx(et,{placeholder:"admin@reviranexgen.com",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-username",...f})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:u.control,name:"password",render:({field:f})=>s.jsxs(Jn,{children:[s.jsx(er,{className:"text-slate-700 font-medium",children:"Password"}),s.jsx(tr,{children:s.jsx(et,{type:"password",placeholder:"",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-password",...f})}),s.jsx(nr,{})]})}),s.jsx(qe,{type:"submit",disabled:a,className:"w-full h-12 rounded-xl text-base font-semibold bg-[#da2032] hover:bg-[#c41b2b] text-white transition-all duration-300","data-testid":"button-login",children:a?s.jsxs(s.Fragment,{children:[s.jsx(s1,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200 text-center",children:s.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",s.jsx("span",{className:"font-medium text-slate-900",children:"Contact Support"})]})})]}),s.jsxs("div",{className:"fixed bottom-4 right-4 bg-slate-900/90 text-slate-300 p-4 rounded-lg backdrop-blur text-xs hidden lg:block shadow-xl",children:[s.jsx("p",{className:"font-bold text-white mb-1",children:"Demo Credentials:"}),s.jsx("p",{children:"User: admin@reviranexgen.com"}),s.jsx("p",{children:"Pass: Admin@121"})]})]})}var gv="Avatar",[HE]=Ml(gv),[WE,yN]=HE(gv),bN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[a,o]=k.useState("idle");return s.jsx(WE,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:s.jsx(Kn.span,{...r,ref:e})})});bN.displayName=gv;var wN="AvatarImage",NN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...o}=t,u=yN(wN,n),c=GE(r,o),f=Ua(p=>{a(p),u.onImageLoadingStatusChange(p)});return yi(()=>{c!=="idle"&&f(c)},[c,f]),c==="loaded"?s.jsx(Kn.img,{...o,ref:e,src:r}):null});NN.displayName=wN;var SN="AvatarFallback",jN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,o=yN(SN,n),[u,c]=k.useState(r===void 0);return k.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(f)}},[r]),u&&o.imageLoadingStatus!=="loaded"?s.jsx(Kn.span,{...a,ref:e}):null});jN.displayName=SN;function ey(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function GE(t,{referrerPolicy:e,crossOrigin:n}){const r=QE(),a=k.useRef(null),o=r?(a.current||(a.current=new window.Image),a.current):null,[u,c]=k.useState(()=>ey(o,t));return yi(()=>{c(ey(o,t))},[o,t]),yi(()=>{const f=b=>()=>{c(b)};if(!o)return;const p=f("loaded"),m=f("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,n,e]),u}function KE(){return()=>{}}function QE(){return k.useSyncExternalStore(KE,()=>!0,()=>!1)}var CN=bN,_N=NN,AN=jN;const PN=k.forwardRef(({className:t,...e},n)=>s.jsx(CN,{ref:n,className:qn(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));PN.displayName=CN.displayName;const kN=k.forwardRef(({className:t,...e},n)=>s.jsx(_N,{ref:n,className:qn("aspect-square h-full w-full",t),...e}));kN.displayName=_N.displayName;const TN=k.forwardRef(({className:t,...e},n)=>s.jsx(AN,{ref:n,className:qn("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));TN.displayName=AN.displayName;var g0="focusScope.autoFocusOnMount",v0="focusScope.autoFocusOnUnmount",ty={bubbles:!1,cancelable:!0},ZE="FocusScope",vv=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...u}=t,[c,f]=k.useState(null),p=Ua(a),m=Ua(o),b=k.useRef(null),j=Xr(e,S=>f(S)),y=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let S=function(v){if(y.paused||!c)return;const q=v.target;c.contains(q)?b.current=q:Qc(b.current,{select:!0})},P=function(v){if(y.paused||!c)return;const q=v.relatedTarget;q!==null&&(c.contains(q)||Qc(b.current,{select:!0}))},_=function(v){if(document.activeElement===document.body)for(const ee of v)ee.removedNodes.length>0&&Qc(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",P);const F=new MutationObserver(_);return c&&F.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",P),F.disconnect()}}},[r,c,y.paused]),k.useEffect(()=>{if(c){ry.add(y);const S=document.activeElement;if(!c.contains(S)){const _=new CustomEvent(g0,ty);c.addEventListener(g0,p),c.dispatchEvent(_),_.defaultPrevented||(YE(n8(EN(c)),{select:!0}),document.activeElement===S&&Qc(c))}return()=>{c.removeEventListener(g0,p),setTimeout(()=>{const _=new CustomEvent(v0,ty);c.addEventListener(v0,m),c.dispatchEvent(_),_.defaultPrevented||Qc(S??document.body,{select:!0}),c.removeEventListener(v0,m),ry.remove(y)},0)}}},[c,p,m,y]);const I=k.useCallback(S=>{if(!n&&!r||y.paused)return;const P=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,_=document.activeElement;if(P&&_){const F=S.currentTarget,[v,q]=XE(F);v&&q?!S.shiftKey&&_===q?(S.preventDefault(),n&&Qc(v,{select:!0})):S.shiftKey&&_===v&&(S.preventDefault(),n&&Qc(q,{select:!0})):_===F&&S.preventDefault()}},[n,r,y.paused]);return s.jsx(Kn.div,{tabIndex:-1,...u,ref:j,onKeyDown:I})});vv.displayName=ZE;function YE(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Qc(r,{select:e}),document.activeElement!==n)return}function XE(t){const e=EN(t),n=ny(e,t),r=ny(e.reverse(),t);return[n,r]}function EN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ny(t,e){for(const n of t)if(!JE(n,{upTo:e}))return n}function JE(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function e8(t){return t instanceof HTMLInputElement&&"select"in t}function Qc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&e8(t)&&e&&t.select()}}var ry=t8();function t8(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=sy(t,e),t.unshift(e)},remove(e){t=sy(t,e),t[0]?.resume()}}}function sy(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function n8(t){return t.filter(e=>e.tagName!=="A")}var x0=0;function LN(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??iy()),document.body.insertAdjacentElement("beforeend",t[1]??iy()),x0++,()=>{x0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),x0--}},[])}function iy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pl=function(){return Pl=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pl.apply(this,arguments)};function RN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function r8(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Wp="right-scroll-bar-position",Gp="width-before-scroll-bar",s8="with-scroll-bars-hidden",i8="--removed-body-scroll-bar-size";function y0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function a8(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=e,n.facade}var o8=typeof window<"u"?k.useLayoutEffect:k.useEffect,ay=new WeakMap;function l8(t,e){var n=a8(null,function(r){return t.forEach(function(a){return y0(a,r)})});return o8(function(){var r=ay.get(n);if(r){var a=new Set(r),o=new Set(t),u=n.current;a.forEach(function(c){o.has(c)||y0(c,null)}),o.forEach(function(c){a.has(c)||y0(c,u)})}ay.set(n,t)},[t]),n}function c8(t){return t}function u8(t,e){e===void 0&&(e=c8);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var u=e(o,r);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(o){for(r=!0;n.length;){var u=n;n=[],u.forEach(o)}n={push:function(c){return o(c)},filter:function(){return n}}},assignMedium:function(o){r=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(o),u=n}var f=function(){var m=u;u=[],m.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),n={push:function(m){u.push(m),p()},filter:function(m){return u=u.filter(m),n}}}};return a}function d8(t){t===void 0&&(t={});var e=u8(null);return e.options=Pl({async:!0,ssr:!1},t),e}var DN=function(t){var e=t.sideCar,n=RN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Pl({},n))};DN.isSideCarExport=!0;function f8(t,e){return t.useMedium(e),DN}var IN=d8(),b0=function(){},Jm=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:b0,onWheelCapture:b0,onTouchMoveCapture:b0}),a=r[0],o=r[1],u=t.forwardProps,c=t.children,f=t.className,p=t.removeScrollBar,m=t.enabled,b=t.shards,j=t.sideCar,y=t.noIsolation,I=t.inert,S=t.allowPinchZoom,P=t.as,_=P===void 0?"div":P,F=t.gapMode,v=RN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),q=j,ee=l8([n,e]),ae=Pl(Pl({},v),a);return k.createElement(k.Fragment,null,m&&k.createElement(q,{sideCar:IN,removeScrollBar:p,shards:b,noIsolation:y,inert:I,setCallbacks:o,allowPinchZoom:!!S,lockRef:n,gapMode:F}),u?k.cloneElement(k.Children.only(c),Pl(Pl({},ae),{ref:ee})):k.createElement(_,Pl({},ae,{className:f,ref:ee}),c))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:Gp,zeroRight:Wp};var h8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function p8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=h8();return e&&t.setAttribute("nonce",e),t}function m8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function g8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var v8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=p8())&&(m8(e,n),g8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},x8=function(){var t=v8();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},FN=function(){var t=x8(),e=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return e},y8={left:0,top:0,right:0,gap:0},w0=function(t){return parseInt(t||"",10)||0},b8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[w0(n),w0(r),w0(a)]},w8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y8;var e=b8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},N8=FN(),Gd="data-scroll-locked",S8=function(t,e,n,r){var a=t.left,o=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(s8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Gd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wp,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Gp,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Wp," .").concat(Wp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gp," .").concat(Gp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gd,`] {
    `).concat(i8,": ").concat(c,`px;
  }
`)},oy=function(){var t=parseInt(document.body.getAttribute(Gd)||"0",10);return isFinite(t)?t:0},j8=function(){k.useEffect(function(){return document.body.setAttribute(Gd,(oy()+1).toString()),function(){var t=oy()-1;t<=0?document.body.removeAttribute(Gd):document.body.setAttribute(Gd,t.toString())}},[])},C8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;j8();var o=k.useMemo(function(){return w8(a)},[a]);return k.createElement(N8,{styles:S8(o,!e,a,n?"":"!important")})},b1=!1;if(typeof window<"u")try{var _p=Object.defineProperty({},"passive",{get:function(){return b1=!0,!0}});window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,_p)}catch{b1=!1}var Cd=b1?{passive:!1}:!1,_8=function(t){return t.tagName==="TEXTAREA"},ON=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_8(t)&&n[e]==="visible")},A8=function(t){return ON(t,"overflowY")},P8=function(t){return ON(t,"overflowX")},ly=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=MN(t,r);if(a){var o=BN(t,r),u=o[1],c=o[2];if(u>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},k8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},T8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},MN=function(t,e){return t==="v"?A8(e):P8(e)},BN=function(t,e){return t==="v"?k8(e):T8(e)},E8=function(t,e){return t==="h"&&e==="rtl"?-1:1},L8=function(t,e,n,r,a){var o=E8(t,window.getComputedStyle(e).direction),u=o*r,c=n.target,f=e.contains(c),p=!1,m=u>0,b=0,j=0;do{var y=BN(t,c),I=y[0],S=y[1],P=y[2],_=S-P-o*I;(I||_)&&MN(t,c)&&(b+=_,j+=I),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(e.contains(c)||e===c));return(m&&Math.abs(b)<1||!m&&Math.abs(j)<1)&&(p=!0),p},Ap=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cy=function(t){return[t.deltaX,t.deltaY]},uy=function(t){return t&&"current"in t?t.current:t},R8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},D8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},I8=0,_d=[];function F8(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),a=k.useState(I8++)[0],o=k.useState(FN)[0],u=k.useRef(t);k.useEffect(function(){u.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var S=r8([t.lockRef.current],(t.shards||[]).map(uy),!0).filter(Boolean);return S.forEach(function(P){return P.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=k.useCallback(function(S,P){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var _=Ap(S),F=n.current,v="deltaX"in S?S.deltaX:F[0]-_[0],q="deltaY"in S?S.deltaY:F[1]-_[1],ee,ae=S.target,W=Math.abs(v)>Math.abs(q)?"h":"v";if("touches"in S&&W==="h"&&ae.type==="range")return!1;var te=ly(W,ae);if(!te)return!0;if(te?ee=W:(ee=W==="v"?"h":"v",te=ly(W,ae)),!te)return!1;if(!r.current&&"changedTouches"in S&&(v||q)&&(r.current=ee),!ee)return!0;var Q=r.current||ee;return L8(Q,P,S,Q==="h"?v:q)},[]),f=k.useCallback(function(S){var P=S;if(!(!_d.length||_d[_d.length-1]!==o)){var _="deltaY"in P?cy(P):Ap(P),F=e.current.filter(function(ee){return ee.name===P.type&&(ee.target===P.target||P.target===ee.shadowParent)&&R8(ee.delta,_)})[0];if(F&&F.should){P.cancelable&&P.preventDefault();return}if(!F){var v=(u.current.shards||[]).map(uy).filter(Boolean).filter(function(ee){return ee.contains(P.target)}),q=v.length>0?c(P,v[0]):!u.current.noIsolation;q&&P.cancelable&&P.preventDefault()}}},[]),p=k.useCallback(function(S,P,_,F){var v={name:S,delta:P,target:_,should:F,shadowParent:O8(_)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(q){return q!==v})},1)},[]),m=k.useCallback(function(S){n.current=Ap(S),r.current=void 0},[]),b=k.useCallback(function(S){p(S.type,cy(S),S.target,c(S,t.lockRef.current))},[]),j=k.useCallback(function(S){p(S.type,Ap(S),S.target,c(S,t.lockRef.current))},[]);k.useEffect(function(){return _d.push(o),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:j}),document.addEventListener("wheel",f,Cd),document.addEventListener("touchmove",f,Cd),document.addEventListener("touchstart",m,Cd),function(){_d=_d.filter(function(S){return S!==o}),document.removeEventListener("wheel",f,Cd),document.removeEventListener("touchmove",f,Cd),document.removeEventListener("touchstart",m,Cd)}},[]);var y=t.removeScrollBar,I=t.inert;return k.createElement(k.Fragment,null,I?k.createElement(o,{styles:D8(a)}):null,y?k.createElement(C8,{gapMode:t.gapMode}):null)}function O8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const M8=f8(IN,F8);var xv=k.forwardRef(function(t,e){return k.createElement(Jm,Pl({},t,{ref:e,sideCar:M8}))});xv.classNames=Jm.classNames;var B8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ad=new WeakMap,Pp=new WeakMap,kp={},N0=0,qN=function(t){return t&&(t.host||qN(t.parentNode))},q8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},U8=function(t,e,n,r){var a=q8(e,Array.isArray(t)?t:[t]);kp[n]||(kp[n]=new WeakMap);var o=kp[n],u=[],c=new Set,f=new Set(a),p=function(b){!b||c.has(b)||(c.add(b),p(b.parentNode))};a.forEach(p);var m=function(b){!b||f.has(b)||Array.prototype.forEach.call(b.children,function(j){if(c.has(j))m(j);else try{var y=j.getAttribute(r),I=y!==null&&y!=="false",S=(Ad.get(j)||0)+1,P=(o.get(j)||0)+1;Ad.set(j,S),o.set(j,P),u.push(j),S===1&&I&&Pp.set(j,!0),P===1&&j.setAttribute(n,"true"),I||j.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",j,_)}})};return m(e),c.clear(),N0++,function(){u.forEach(function(b){var j=Ad.get(b)-1,y=o.get(b)-1;Ad.set(b,j),o.set(b,y),j||(Pp.has(b)||b.removeAttribute(r),Pp.delete(b)),y||b.removeAttribute(n)}),N0--,N0||(Ad=new WeakMap,Ad=new WeakMap,Pp=new WeakMap,kp={})}},UN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=B8(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),U8(r,a,n,"aria-hidden")):function(){return null}},yv="Dialog",[zN]=Ml(yv),[z8,rl]=zN(yv),$N=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:u=!0}=t,c=k.useRef(null),f=k.useRef(null),[p=!1,m]=tu({prop:r,defaultProp:a,onChange:o});return s.jsx(z8,{scope:e,triggerRef:c,contentRef:f,contentId:Jc(),titleId:Jc(),descriptionId:Jc(),open:p,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(b=>!b),[m]),modal:u,children:n})};$N.displayName=yv;var VN="DialogTrigger",HN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=rl(VN,n),o=Xr(e,a.triggerRef);return s.jsx(Kn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Nv(a.open),...r,ref:o,onClick:$n(t.onClick,a.onOpenToggle)})});HN.displayName=VN;var bv="DialogPortal",[$8,WN]=zN(bv,{forceMount:void 0}),GN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:a}=t,o=rl(bv,e);return s.jsx($8,{scope:e,forceMount:n,children:k.Children.map(r,u=>s.jsx(du,{present:n||o.open,children:s.jsx(Fm,{asChild:!0,container:a,children:u})}))})};GN.displayName=bv;var Cm="DialogOverlay",KN=k.forwardRef((t,e)=>{const n=WN(Cm,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=rl(Cm,t.__scopeDialog);return o.modal?s.jsx(du,{present:r||o.open,children:s.jsx(H8,{...a,ref:e})}):null});KN.displayName=Cm;var V8=Xd("DialogOverlay.RemoveScroll"),H8=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=rl(Cm,n);return s.jsx(xv,{as:V8,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Kn.div,{"data-state":Nv(a.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ku="DialogContent",QN=k.forwardRef((t,e)=>{const n=WN(Ku,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=rl(Ku,t.__scopeDialog);return s.jsx(du,{present:r||o.open,children:o.modal?s.jsx(W8,{...a,ref:e}):s.jsx(G8,{...a,ref:e})})});QN.displayName=Ku;var W8=k.forwardRef((t,e)=>{const n=rl(Ku,t.__scopeDialog),r=k.useRef(null),a=Xr(e,n.contentRef,r);return k.useEffect(()=>{const o=r.current;if(o)return UN(o)},[]),s.jsx(ZN,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$n(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:$n(t.onPointerDownOutside,o=>{const u=o.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0;(u.button===2||c)&&o.preventDefault()}),onFocusOutside:$n(t.onFocusOutside,o=>o.preventDefault())})}),G8=k.forwardRef((t,e)=>{const n=rl(Ku,t.__scopeDialog),r=k.useRef(!1),a=k.useRef(!1);return s.jsx(ZN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=o.target;n.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),ZN=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...u}=t,c=rl(Ku,n),f=k.useRef(null),p=Xr(e,f);return LN(),s.jsxs(s.Fragment,{children:[s.jsx(vv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(Lh,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Nv(c.open),...u,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(K8,{titleId:c.titleId}),s.jsx(Z8,{contentRef:f,descriptionId:c.descriptionId})]})]})}),wv="DialogTitle",YN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=rl(wv,n);return s.jsx(Kn.h2,{id:a.titleId,...r,ref:e})});YN.displayName=wv;var XN="DialogDescription",JN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=rl(XN,n);return s.jsx(Kn.p,{id:a.descriptionId,...r,ref:e})});JN.displayName=XN;var eS="DialogClose",tS=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=rl(eS,n);return s.jsx(Kn.button,{type:"button",...r,ref:e,onClick:$n(t.onClick,()=>a.onOpenChange(!1))})});tS.displayName=eS;function Nv(t){return t?"open":"closed"}var nS="DialogTitleWarning",[v7,rS]=lC(nS,{contentName:Ku,titleName:wv,docsSlug:"dialog"}),K8=({titleId:t})=>{const e=rS(nS),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Q8="DialogDescriptionWarning",Z8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rS(Q8).contentName}}.`;return k.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},sS=$N,iS=HN,aS=GN,eg=KN,tg=QN,ng=YN,rg=JN,oS=tS;const Y8=sS,X8=iS,J8=aS,lS=k.forwardRef(({className:t,...e},n)=>s.jsx(eg,{className:qn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));lS.displayName=eg.displayName;const eL=Bm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),cS=k.forwardRef(({side:t="right",className:e,children:n,...r},a)=>s.jsxs(J8,{children:[s.jsx(lS,{}),s.jsxs(tg,{ref:a,className:qn(eL({side:t}),e),...r,children:[n,s.jsxs(oS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(df,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cS.displayName=tg.displayName;const tL=k.forwardRef(({className:t,...e},n)=>s.jsx(ng,{ref:n,className:qn("text-lg font-semibold text-foreground",t),...e}));tL.displayName=ng.displayName;const nL=k.forwardRef(({className:t,...e},n)=>s.jsx(rg,{ref:n,className:qn("text-sm text-muted-foreground",t),...e}));nL.displayName=rg.displayName;function qs({children:t,user:e}){const[n]=za(),{mutate:r}=hE(),[a,o]=k.useState(!1),{branding:u}=pE(),c=[{name:"Dashboard",href:"/dashboard",icon:i_},{name:"Clients",href:"/clients",icon:ch},{name:"Projects",href:"/projects",icon:im},{name:"User Management",href:"/users",icon:p_},{name:"Branding",href:"/branding",icon:i1},{name:"Settings",href:"/settings",icon:c_}],f=()=>s.jsxs("div",{className:"flex flex-col h-full bg-white",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsx("div",{className:"flex justify-center",children:u?.logoUrl?s.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-12 max-w-[200px] object-contain","data-testid":"img-sidebar-logo"}):s.jsx("h1",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})})}),s.jsx("div",{className:"flex-1 px-4 py-6 space-y-1",children:c.map(p=>{const m=n===p.href;return s.jsxs($5,{href:p.href,className:`
              flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 group
              ${m?"bg-[#da2032] text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}
            `,children:[s.jsx(p.icon,{className:`w-5 h-5 ${m?"text-white":"text-slate-500 group-hover:text-slate-900"}`}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsxs("div",{className:"p-4 border-t border-slate-200",children:[s.jsx("div",{className:"p-4 rounded-lg bg-slate-50 border border-slate-200 mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(PN,{className:"h-10 w-10 border-2 border-slate-200",children:[s.jsx(kN,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${e?.name}`}),s.jsx(TN,{className:"bg-slate-200 text-slate-700",children:e?.name?.[0]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:e?.name}),s.jsx("p",{className:"text-xs text-slate-500 truncate",children:e?.username})]})]})}),s.jsxs(qe,{variant:"outline",className:"w-full justify-start gap-3 text-slate-700 hover:text-slate-900 border-slate-300",onClick:()=>r(),children:[s.jsx(a_,{className:"w-4 h-4"}),"Sign Out"]})]})]});return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[s.jsx("aside",{className:"hidden lg:block w-72 h-screen sticky top-0 border-r border-slate-200",children:s.jsx(f,{})}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[s.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 sticky top-0 z-30 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 lg:hidden",children:[s.jsxs(Y8,{open:a,onOpenChange:o,children:[s.jsx(X8,{asChild:!0,children:s.jsx(qe,{variant:"ghost",size:"icon",className:"-ml-2",children:s.jsx(o_,{className:"w-6 h-6 text-slate-600"})})}),s.jsx(cS,{side:"left",className:"p-0 w-72 border-r-0",children:s.jsx(f,{})})]}),u?.logoUrl?s.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-8 max-w-[140px] object-contain"}):s.jsx("span",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})]}),s.jsx("div",{className:"flex-1 max-w-xl mx-auto hidden lg:block px-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(Y1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-slate-100 border-transparent focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 text-sm"})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(qe,{variant:"ghost",size:"icon",className:"relative text-slate-500 hover:text-slate-700",children:[s.jsx(t_,{className:"w-5 h-5"}),s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]})})]}),s.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:s.jsx("div",{className:"max-w-7xl mx-auto animate-fade-in",children:t})})]})]})}const Cn=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Cn.displayName="Card";const ss=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("flex flex-col space-y-1.5 p-6",t),...e}));ss.displayName="CardHeader";const is=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("text-2xl font-semibold leading-none tracking-tight",t),...e}));is.displayName="CardTitle";const Zc=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("text-sm text-muted-foreground",t),...e}));Zc.displayName="CardDescription";const _n=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("p-6 pt-0",t),...e}));_n.displayName="CardContent";const rL=k.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:qn("flex items-center p-6 pt-0",t),...e}));rL.displayName="CardFooter";async function Pd(t){try{const e=await fetch(t,{credentials:"include"});return e.ok?e.json():[]}catch{return[]}}function sL(){const{data:t,isLoading:e}=Ea(),[,n]=za(),{data:r=[]}=Ln({queryKey:["/dashboard/clients"],queryFn:()=>Pd("/api/clients"),enabled:!!t}),{data:a=[]}=Ln({queryKey:["/dashboard/projects"],queryFn:()=>Pd("/api/projects"),enabled:!!t}),{data:o=[]}=Ln({queryKey:["/dashboard/quotations"],queryFn:()=>Pd("/api/quotations"),enabled:!!t}),{data:u=[]}=Ln({queryKey:["/dashboard/invoices"],queryFn:()=>Pd("/api/invoices"),enabled:!!t}),{data:c=[]}=Ln({queryKey:["/dashboard/gate-passes"],queryFn:()=>Pd("/api/gate-passes"),enabled:!!t}),{data:f=[]}=Ln({queryKey:["/dashboard/delivery-challans"],queryFn:()=>Pd("/api/delivery-challans"),enabled:!!t}),p=k.useMemo(()=>{const S=new Map;return a.forEach(P=>S.set(P.id,P.projectName)),S},[a]),m=S=>{const P=String(S??"0").replace(/,/g,""),_=Number(P);return Number.isFinite(_)?_:0},b=k.useMemo(()=>u.reduce((S,P)=>S+m(P.grandTotal),0),[u]),j=k.useMemo(()=>{const S=new Set(o.map(ee=>ee.projectId)),P=new Set(u.map(ee=>ee.projectId)),_=new Set(c.map(ee=>ee.projectId)),F=new Set(f.map(ee=>ee.projectId)),v=a.length||1,q=a.filter(ee=>S.has(ee.id)&&P.has(ee.id)&&_.has(ee.id)&&F.has(ee.id)).length;return{quotationCoverage:Math.round(S.size/v*100),invoiceCoverage:Math.round(P.size/v*100),gatePassCoverage:Math.round(_.size/v*100),deliveryCoverage:Math.round(F.size/v*100),fullDocProjects:q}},[a,o,u,c,f]),y=k.useMemo(()=>{const S=_=>new Date(_?String(_):0).getTime();return[...o.map(_=>({id:`q-${_.id}`,type:"Quotation",number:_.quotationNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...u.map(_=>({id:`i-${_.id}`,type:"Invoice",number:_.invoiceNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...c.map(_=>({id:`g-${_.id}`,type:"Gate Pass",number:_.gatePassNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...f.map(_=>({id:`d-${_.id}`,type:"Delivery Challan",number:_.deliveryChallanNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt}))].sort((_,F)=>S(F.createdAt)-S(_.createdAt)).slice(0,8)},[o,u,c,f]);if(e)return null;const I=[{title:"Clients",value:r.length,icon:ch,color:"text-blue-600",bg:"bg-blue-50"},{title:"Projects",value:a.length,icon:im,color:"text-indigo-600",bg:"bg-indigo-50"},{title:"Documents",value:o.length+u.length+c.length+f.length,icon:Aa,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Invoice Value",value:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(b),icon:s_,color:"text-amber-600",bg:"bg-amber-50"}];return s.jsx(qs,{user:t,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),s.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome, ",t?.name,". Live snapshot of projects and document flow."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"outline",onClick:()=>n("/clients"),children:"Clients"}),s.jsx(qe,{variant:"outline",onClick:()=>n("/projects"),children:"Projects"})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4",children:I.map(S=>s.jsx(Cn,{className:"border-slate-200",children:s.jsx(_n,{className:"p-5",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:S.title}),s.jsx("p",{className:"mt-2 text-2xl font-bold text-slate-900",children:S.value})]}),s.jsx("div",{className:`rounded-lg p-2.5 ${S.bg}`,children:s.jsx(S.icon,{className:`h-5 w-5 ${S.color}`})})]})})},S.title))}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-3",children:[s.jsxs(Cn,{className:"xl:col-span-2 border-slate-200",children:[s.jsx(ss,{className:"pb-2",children:s.jsx(is,{className:"text-base",children:"Recent Document Activity"})}),s.jsx(_n,{children:y.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No activity yet. Create a project and start with quotation."}):s.jsx("div",{className:"space-y-2",children:y.map(S=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 px-3 py-2.5",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[S.type," ",s.jsxs("span",{className:"font-normal text-slate-500",children:["(",S.revision,")"]})]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[S.number," | ",p.get(S.projectId)||"Unknown Project"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:S.createdAt?new Date(S.createdAt).toLocaleDateString("en-IN"):"-"})]},S.id))})})]}),s.jsxs(Cn,{className:"border-slate-200",children:[s.jsx(ss,{className:"pb-2",children:s.jsx(is,{className:"text-base",children:"Documentation Health"})}),s.jsxs(_n,{className:"space-y-3",children:[s.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Projects with all docs"}),s.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[j.fullDocProjects,"/",a.length]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(Aa,{className:"h-4 w-4 text-red-500"})," Quotations"]}),s.jsxs("span",{className:"font-semibold",children:[j.quotationCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(a1,{className:"h-4 w-4 text-green-600"})," Invoices"]}),s.jsxs("span",{className:"font-semibold",children:[j.invoiceCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(r1,{className:"h-4 w-4 text-blue-600"})," Gate Pass"]}),s.jsxs("span",{className:"font-semibold",children:[j.gatePassCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(n1,{className:"h-4 w-4 text-indigo-600"})," Delivery Challan"]}),s.jsxs("span",{className:"font-semibold",children:[j.deliveryCoverage,"%"]})]})]}),s.jsxs(qe,{className:"w-full mt-2",variant:"outline",onClick:()=>n("/projects"),children:["Review Projects ",s.jsx(JC,{className:"ml-2 h-4 w-4"})]}),s.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-2.5 text-xs text-emerald-700 flex items-center gap-2",children:[s.jsx(e_,{className:"h-4 w-4"}),"Keep all four documents updated for better project traceability."]})]})]})]})]})})}const xi=sS,Ah=iS,iL=aS,uS=k.forwardRef(({className:t,...e},n)=>s.jsx(eg,{ref:n,className:qn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));uS.displayName=eg.displayName;const ci=k.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(iL,{children:[s.jsx(uS,{}),s.jsxs(tg,{ref:r,className:qn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(oS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(df,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ci.displayName=tg.displayName;const ui=({className:t,...e})=>s.jsx("div",{className:qn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ui.displayName="DialogHeader";const di=k.forwardRef(({className:t,...e},n)=>s.jsx(ng,{ref:n,className:qn("text-lg font-semibold leading-none tracking-tight",t),...e}));di.displayName=ng.displayName;const sf=k.forwardRef(({className:t,...e},n)=>s.jsx(rg,{ref:n,className:qn("text-sm text-muted-foreground",t),...e}));sf.displayName=rg.displayName;const aL=U.object({name:U.string().min(1,"Client name is required"),location:U.string(),gstNo:U.string(),contactPerson:U.string(),mobileNumber:U.string().min(10,"Valid mobile number is required"),emailAddress:U.string()}),oL=t=>({...t,gstNo:t.gstNo?.trim()||"NA",contactPerson:t.contactPerson?.trim()||"NA",mobileNumber:t.mobileNumber?.trim()||"0000000000",emailAddress:t.emailAddress?.trim()||"na@example.com"});function lL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState(""),[,u]=za(),{toast:c}=$a(),{data:f}=Ea(),{data:p,isLoading:m}=Ln({queryKey:["/api/clients"]}),b=mf({resolver:gf(aL),defaultValues:{name:"",location:"",gstNo:"",contactPerson:"",mobileNumber:"",emailAddress:""}}),j=Dr({mutationFn:async v=>(await wn("POST","/api/clients",oL(v))).json(),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/clients"]}),b.reset(),e(!1),c({title:"Success",description:"Client created successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),y=Dr({mutationFn:async({id:v,data:q})=>(await wn("PUT",`/api/clients/${v}`,q)).json(),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/clients"]}),b.reset(),r(null),e(!1),c({title:"Success",description:"Client updated successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),I=Dr({mutationFn:async v=>{await wn("DELETE",`/api/clients/${v}`)},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/clients"]}),c({title:"Success",description:"Client deleted successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),S=v=>{n?y.mutate({id:n.id,data:v}):j.mutate(v)},P=v=>{r(v),b.reset({name:v.name,location:v.location,gstNo:v.gstNo,contactPerson:v.contactPerson,mobileNumber:v.mobileNumber,emailAddress:v.emailAddress}),e(!0)},_=v=>{e(v),v||(r(null),b.reset())},F=k.useMemo(()=>{const v=a.trim().toLowerCase(),q=[...p??[]].sort((ee,ae)=>ae.id-ee.id);return v?q.filter(ee=>[ee.name,ee.location,ee.gstNo,ee.contactPerson,ee.mobileNumber,ee.emailAddress].join(" ").toLowerCase().includes(v)):q},[p,a]);return s.jsxs(qs,{user:f,children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:s.jsx(ch,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Clients"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your client partners"})]})]}),s.jsxs(xi,{open:t,onOpenChange:_,children:[s.jsx(Ah,{asChild:!0,children:s.jsxs(qe,{"data-testid":"button-add-client",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[s.jsx(_a,{className:"h-4 w-4 mr-2"}),"Add Client"]})}),s.jsxs(ci,{className:"sm:max-w-[500px]",children:[s.jsxs(ui,{children:[s.jsx(di,{children:n?"Edit Client":"Create New Client"}),s.jsx(sf,{children:n?"Update client details below.":"Add a new client partner to your system."})]}),s.jsx(vf,{...b,children:s.jsxs("form",{onSubmit:b.handleSubmit(S),className:"space-y-4",children:[s.jsx(ar,{control:b.control,name:"name",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Client Name"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-client-name",placeholder:"Enter client name",...v})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:b.control,name:"location",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Location"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-location",placeholder:"Enter location",...v})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:b.control,name:"gstNo",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"GST No."}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-gst-no",placeholder:"Enter GST number",...v})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:b.control,name:"contactPerson",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Contact Person"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-contact-person",placeholder:"Enter contact person name",...v})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:b.control,name:"mobileNumber",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Mobile Number"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-mobile-number",placeholder:"Enter mobile number",...v})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:b.control,name:"emailAddress",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Email Address"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-email-address",type:"email",placeholder:"Enter email address",...v})}),s.jsx(nr,{})]})}),s.jsx(qe,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:j.isPending||y.isPending,"data-testid":"button-submit-client",children:j.isPending||y.isPending?n?"Updating...":"Creating...":n?"Update Client":"Create Client"})]})})]})]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Y1,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx(et,{value:a,onChange:v=>o(v.target.value),placeholder:"Search by name, GST, location, contact...",className:"pl-9","data-testid":"input-search-clients"})]})]}),s.jsx(Cn,{className:"border-0 shadow-lg overflow-hidden",children:s.jsxs(_n,{className:"p-0",children:[s.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Name"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Location"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"GST No."})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Person"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Info"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(v=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},v))}):F.length>0?s.jsxs("div",{className:"divide-y divide-slate-100",children:[F.map(v=>s.jsxs("div",{"data-testid":`row-client-${v.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:s.jsx(Z1,{className:"w-4 h-4"})}),s.jsx("span",{className:"font-semibold text-slate-800 uppercase text-sm","data-testid":`text-client-name-${v.id}`,children:v.name.length>15?v.name.substring(0,15)+"...":v.name})]}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx(nu,{className:"w-3.5 h-3.5 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${v.id}`,children:v.location})]}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-700 text-sm font-mono","data-testid":`text-gst-${v.id}`,children:v.gstNo})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-contact-${v.id}`,children:v.contactPerson})}),s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Db,{className:"w-3 h-3 text-green-500"}),s.jsx("span",{className:"text-slate-600 text-xs","data-testid":`text-mobile-${v.id}`,children:v.mobileNumber})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fu,{className:"w-3 h-3 text-blue-500"}),s.jsx("span",{className:"text-slate-600 text-xs truncate max-w-[140px]","data-testid":`text-email-${v.id}`,title:v.emailAddress,children:v.emailAddress})]})]}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${v.id}/ledger`),"data-testid":`button-ledger-client-${v.id}`,title:"Client Ledger",children:s.jsx(am,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>P(v),"data-testid":`button-edit-client-${v.id}`,title:"Edit Client",children:s.jsx($u,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>I.mutate(v.id),disabled:I.isPending,"data-testid":`button-delete-client-${v.id}`,title:"Delete Client",children:s.jsx(vr,{className:"w-4 h-4"})})]})]},v.id)),F.map(v=>s.jsxs("div",{className:"md:hidden px-4 py-4 space-y-2 hover:bg-slate-50/50","data-testid":`card-client-${v.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 uppercase text-sm",children:v.name}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v.location})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${v.id}/ledger`),"data-testid":`button-ledger-client-mobile-${v.id}`,title:"Client Ledger",children:s.jsx(am,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>P(v),"data-testid":`button-edit-client-mobile-${v.id}`,children:s.jsx($u,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>I.mutate(v.id),disabled:I.isPending,"data-testid":`button-delete-client-mobile-${v.id}`,children:s.jsx(vr,{className:"w-4 h-4"})})]})]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"GST:"})," ",v.gstNo]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"Contact:"})," ",v.contactPerson]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"Mobile:"})," ",v.mobileNumber]}),s.jsxs("p",{className:"text-xs text-slate-600 break-all",children:[s.jsx("span",{className:"font-semibold",children:"Email:"})," ",v.emailAddress]})]},`mobile-${v.id}`))]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-blue-500/10 flex items-center justify-center mb-4",children:s.jsx(ch,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No clients yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first client partner."}),s.jsxs(qe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Add First Client"]})]})]})})]})}function dy(t,[e,n]){return Math.min(n,Math.max(e,t))}var cL=k.createContext(void 0);function dS(t){const e=k.useContext(cL);return t||e||"ltr"}function fS(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var uL=[" ","Enter","ArrowUp","ArrowDown"],dL=[" ","Enter"],Bh="Select",[sg,ig,fL]=W1(Bh),[xf]=Ml(Bh,[fL,Hm]),ag=Hm(),[hL,hu]=xf(Bh),[pL,mL]=xf(Bh),hS=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:a,onOpenChange:o,value:u,defaultValue:c,onValueChange:f,dir:p,name:m,autoComplete:b,disabled:j,required:y,form:I}=t,S=ag(e),[P,_]=k.useState(null),[F,v]=k.useState(null),[q,ee]=k.useState(!1),ae=dS(p),[W=!1,te]=tu({prop:r,defaultProp:a,onChange:o}),[Q,ue]=tu({prop:u,defaultProp:c,onChange:f}),O=k.useRef(null),R=P?I||!!P.closest("form"):!0,[z,Y]=k.useState(new Set),Ce=Array.from(z).map(Ae=>Ae.props.value).join(";");return s.jsx(iP,{...S,children:s.jsxs(hL,{required:y,scope:e,trigger:P,onTriggerChange:_,valueNode:F,onValueNodeChange:v,valueNodeHasChildren:q,onValueNodeHasChildrenChange:ee,contentId:Jc(),value:Q,onValueChange:ue,open:W,onOpenChange:te,dir:ae,triggerPointerDownPosRef:O,disabled:j,children:[s.jsx(sg.Provider,{scope:e,children:s.jsx(pL,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(Ae=>{Y(Pe=>new Set(Pe).add(Ae))},[]),onNativeOptionRemove:k.useCallback(Ae=>{Y(Pe=>{const ce=new Set(Pe);return ce.delete(Ae),ce})},[]),children:n})}),R?s.jsxs(MS,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:b,value:Q,onChange:Ae=>ue(Ae.target.value),disabled:j,form:I,children:[Q===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},Ce):null]})})};hS.displayName=Bh;var pS="SelectTrigger",mS=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,o=ag(n),u=hu(pS,n),c=u.disabled||r,f=Xr(e,u.onTriggerChange),p=ig(n),m=k.useRef("touch"),[b,j,y]=BS(S=>{const P=p().filter(v=>!v.disabled),_=P.find(v=>v.value===u.value),F=qS(P,S,_);F!==void 0&&u.onValueChange(F.value)}),I=S=>{c||(u.onOpenChange(!0),y()),S&&(u.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return s.jsx(fw,{asChild:!0,...o,children:s.jsx(Kn.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":OS(u.value)?"":void 0,...a,ref:f,onClick:$n(a.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&I(S)}),onPointerDown:$n(a.onPointerDown,S=>{m.current=S.pointerType;const P=S.target;P.hasPointerCapture(S.pointerId)&&P.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(I(S),S.preventDefault())}),onKeyDown:$n(a.onKeyDown,S=>{const P=b.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&j(S.key),!(P&&S.key===" ")&&uL.includes(S.key)&&(I(),S.preventDefault())})})})});mS.displayName=pS;var gS="SelectValue",vS=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:u="",...c}=t,f=hu(gS,n),{onValueNodeHasChildrenChange:p}=f,m=o!==void 0,b=Xr(e,f.onValueNodeChange);return yi(()=>{p(m)},[p,m]),s.jsx(Kn.span,{...c,ref:b,style:{pointerEvents:"none"},children:OS(f.value)?s.jsx(s.Fragment,{children:u}):o})});vS.displayName=gS;var gL="SelectIcon",xS=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...a}=t;return s.jsx(Kn.span,{"aria-hidden":!0,...a,ref:e,children:r||""})});xS.displayName=gL;var vL="SelectPortal",yS=t=>s.jsx(Fm,{asChild:!0,...t});yS.displayName=vL;var Qu="SelectContent",bS=k.forwardRef((t,e)=>{const n=hu(Qu,t.__scopeSelect),[r,a]=k.useState();if(yi(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?lf.createPortal(s.jsx(wS,{scope:t.__scopeSelect,children:s.jsx(sg.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),o):null}return s.jsx(NS,{...t,ref:e})});bS.displayName=Qu;var Vo=10,[wS,pu]=xf(Qu),xL="SelectContentImpl",yL=Xd("SelectContent.RemoveScroll"),NS=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:u,side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:j,collisionPadding:y,sticky:I,hideWhenDetached:S,avoidCollisions:P,..._}=t,F=hu(Qu,n),[v,q]=k.useState(null),[ee,ae]=k.useState(null),W=Xr(e,be=>q(be)),[te,Q]=k.useState(null),[ue,O]=k.useState(null),R=ig(n),[z,Y]=k.useState(!1),Ce=k.useRef(!1);k.useEffect(()=>{if(v)return UN(v)},[v]),LN();const Ae=k.useCallback(be=>{const[Re,...Ie]=R().map(ft=>ft.ref.current),[Me]=Ie.slice(-1),Ze=document.activeElement;for(const ft of be)if(ft===Ze||(ft?.scrollIntoView({block:"nearest"}),ft===Re&&ee&&(ee.scrollTop=0),ft===Me&&ee&&(ee.scrollTop=ee.scrollHeight),ft?.focus(),document.activeElement!==Ze))return},[R,ee]),Pe=k.useCallback(()=>Ae([te,v]),[Ae,te,v]);k.useEffect(()=>{z&&Pe()},[z,Pe]);const{onOpenChange:ce,triggerPointerDownPosRef:ge}=F;k.useEffect(()=>{if(v){let be={x:0,y:0};const Re=Me=>{be={x:Math.abs(Math.round(Me.pageX)-(ge.current?.x??0)),y:Math.abs(Math.round(Me.pageY)-(ge.current?.y??0))}},Ie=Me=>{be.x<=10&&be.y<=10?Me.preventDefault():v.contains(Me.target)||ce(!1),document.removeEventListener("pointermove",Re),ge.current=null};return ge.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[v,ce,ge]),k.useEffect(()=>{const be=()=>ce(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[ce]);const[De,se]=BS(be=>{const Re=R().filter(Ze=>!Ze.disabled),Ie=Re.find(Ze=>Ze.ref.current===document.activeElement),Me=qS(Re,be,Ie);Me&&setTimeout(()=>Me.ref.current.focus())}),M=k.useCallback((be,Re,Ie)=>{const Me=!Ce.current&&!Ie;(F.value!==void 0&&F.value===Re||Me)&&(Q(be),Me&&(Ce.current=!0))},[F.value]),L=k.useCallback(()=>v?.focus(),[v]),ne=k.useCallback((be,Re,Ie)=>{const Me=!Ce.current&&!Ie;(F.value!==void 0&&F.value===Re||Me)&&O(be)},[F.value]),me=r==="popper"?w1:SS,ye=me===w1?{side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:j,collisionPadding:y,sticky:I,hideWhenDetached:S,avoidCollisions:P}:{};return s.jsx(wS,{scope:n,content:v,viewport:ee,onViewportChange:ae,itemRefCallback:M,selectedItem:te,onItemLeave:L,itemTextRefCallback:ne,focusSelectedItem:Pe,selectedItemText:ue,position:r,isPositioned:z,searchRef:De,children:s.jsx(xv,{as:yL,allowPinchZoom:!0,children:s.jsx(vv,{asChild:!0,trapped:F.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:$n(a,be=>{F.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:s.jsx(Lh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>F.onOpenChange(!1),children:s.jsx(me,{role:"listbox",id:F.contentId,"data-state":F.open?"open":"closed",dir:F.dir,onContextMenu:be=>be.preventDefault(),..._,...ye,onPlaced:()=>Y(!0),ref:W,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:$n(_.onKeyDown,be=>{const Re=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Re&&be.key.length===1&&se(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let Me=R().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(be.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Ze=be.target,ft=Me.indexOf(Ze);Me=Me.slice(ft+1)}setTimeout(()=>Ae(Me)),be.preventDefault()}})})})})})})});NS.displayName=xL;var bL="SelectItemAlignedPosition",SS=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,o=hu(Qu,n),u=pu(Qu,n),[c,f]=k.useState(null),[p,m]=k.useState(null),b=Xr(e,W=>m(W)),j=ig(n),y=k.useRef(!1),I=k.useRef(!0),{viewport:S,selectedItem:P,selectedItemText:_,focusSelectedItem:F}=u,v=k.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&p&&S&&P&&_){const W=o.trigger.getBoundingClientRect(),te=p.getBoundingClientRect(),Q=o.valueNode.getBoundingClientRect(),ue=_.getBoundingClientRect();if(o.dir!=="rtl"){const Ze=ue.left-te.left,ft=Q.left-Ze,mt=W.left-ft,Ft=W.width+mt,le=Math.max(Ft,te.width),gt=window.innerWidth-Vo,xe=dy(ft,[Vo,Math.max(Vo,gt-le)]);c.style.minWidth=Ft+"px",c.style.left=xe+"px"}else{const Ze=te.right-ue.right,ft=window.innerWidth-Q.right-Ze,mt=window.innerWidth-W.right-ft,Ft=W.width+mt,le=Math.max(Ft,te.width),gt=window.innerWidth-Vo,xe=dy(ft,[Vo,Math.max(Vo,gt-le)]);c.style.minWidth=Ft+"px",c.style.right=xe+"px"}const O=j(),R=window.innerHeight-Vo*2,z=S.scrollHeight,Y=window.getComputedStyle(p),Ce=parseInt(Y.borderTopWidth,10),Ae=parseInt(Y.paddingTop,10),Pe=parseInt(Y.borderBottomWidth,10),ce=parseInt(Y.paddingBottom,10),ge=Ce+Ae+z+ce+Pe,De=Math.min(P.offsetHeight*5,ge),se=window.getComputedStyle(S),M=parseInt(se.paddingTop,10),L=parseInt(se.paddingBottom,10),ne=W.top+W.height/2-Vo,me=R-ne,ye=P.offsetHeight/2,be=P.offsetTop+ye,Re=Ce+Ae+be,Ie=ge-Re;if(Re<=ne){const Ze=O.length>0&&P===O[O.length-1].ref.current;c.style.bottom="0px";const ft=p.clientHeight-S.offsetTop-S.offsetHeight,mt=Math.max(me,ye+(Ze?L:0)+ft+Pe),Ft=Re+mt;c.style.height=Ft+"px"}else{const Ze=O.length>0&&P===O[0].ref.current;c.style.top="0px";const mt=Math.max(ne,Ce+S.offsetTop+(Ze?M:0)+ye)+Ie;c.style.height=mt+"px",S.scrollTop=Re-ne+S.offsetTop}c.style.margin=`${Vo}px 0`,c.style.minHeight=De+"px",c.style.maxHeight=R+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[j,o.trigger,o.valueNode,c,p,S,P,_,o.dir,r]);yi(()=>v(),[v]);const[q,ee]=k.useState();yi(()=>{p&&ee(window.getComputedStyle(p).zIndex)},[p]);const ae=k.useCallback(W=>{W&&I.current===!0&&(v(),F?.(),I.current=!1)},[v,F]);return s.jsx(NL,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:ae,children:s.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:q},children:s.jsx(Kn.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});SS.displayName=bL;var wL="SelectPopperPosition",w1=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Vo,...o}=t,u=ag(n);return s.jsx(hw,{...u,...o,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});w1.displayName=wL;var[NL,Sv]=xf(Qu,{}),N1="SelectViewport",jS=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...a}=t,o=pu(N1,n),u=Sv(N1,n),c=Xr(e,o.onViewportChange),f=k.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(sg.Slot,{scope:n,children:s.jsx(Kn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:$n(a.onScroll,p=>{const m=p.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:j}=u;if(j?.current&&b){const y=Math.abs(f.current-m.scrollTop);if(y>0){const I=window.innerHeight-Vo*2,S=parseFloat(b.style.minHeight),P=parseFloat(b.style.height),_=Math.max(S,P);if(_<I){const F=_+y,v=Math.min(I,F),q=F-v;b.style.height=v+"px",b.style.bottom==="0px"&&(m.scrollTop=q>0?q:0,b.style.justifyContent="flex-end")}}}f.current=m.scrollTop})})})]})});jS.displayName=N1;var CS="SelectGroup",[SL,jL]=xf(CS),CL=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=Jc();return s.jsx(SL,{scope:n,id:a,children:s.jsx(Kn.div,{role:"group","aria-labelledby":a,...r,ref:e})})});CL.displayName=CS;var _S="SelectLabel",AS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=jL(_S,n);return s.jsx(Kn.div,{id:a.id,...r,ref:e})});AS.displayName=_S;var _m="SelectItem",[_L,PS]=xf(_m),kS=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...u}=t,c=hu(_m,n),f=pu(_m,n),p=c.value===r,[m,b]=k.useState(o??""),[j,y]=k.useState(!1),I=Xr(e,F=>f.itemRefCallback?.(F,r,a)),S=Jc(),P=k.useRef("touch"),_=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(_L,{scope:n,value:r,disabled:a,textId:S,isSelected:p,onItemTextChange:k.useCallback(F=>{b(v=>v||(F?.textContent??"").trim())},[]),children:s.jsx(sg.ItemSlot,{scope:n,value:r,disabled:a,textValue:m,children:s.jsx(Kn.div,{role:"option","aria-labelledby":S,"data-highlighted":j?"":void 0,"aria-selected":p&&j,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...u,ref:I,onFocus:$n(u.onFocus,()=>y(!0)),onBlur:$n(u.onBlur,()=>y(!1)),onClick:$n(u.onClick,()=>{P.current!=="mouse"&&_()}),onPointerUp:$n(u.onPointerUp,()=>{P.current==="mouse"&&_()}),onPointerDown:$n(u.onPointerDown,F=>{P.current=F.pointerType}),onPointerMove:$n(u.onPointerMove,F=>{P.current=F.pointerType,a?f.onItemLeave?.():P.current==="mouse"&&F.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$n(u.onPointerLeave,F=>{F.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:$n(u.onKeyDown,F=>{f.searchRef?.current!==""&&F.key===" "||(dL.includes(F.key)&&_(),F.key===" "&&F.preventDefault())})})})})});kS.displayName=_m;var eh="SelectItemText",TS=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,...o}=t,u=hu(eh,n),c=pu(eh,n),f=PS(eh,n),p=mL(eh,n),[m,b]=k.useState(null),j=Xr(e,_=>b(_),f.onItemTextChange,_=>c.itemTextRefCallback?.(_,f.value,f.disabled)),y=m?.textContent,I=k.useMemo(()=>s.jsx("option",{value:f.value,disabled:f.disabled,children:y},f.value),[f.disabled,f.value,y]),{onNativeOptionAdd:S,onNativeOptionRemove:P}=p;return yi(()=>(S(I),()=>P(I)),[S,P,I]),s.jsxs(s.Fragment,{children:[s.jsx(Kn.span,{id:f.textId,...o,ref:j}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?lf.createPortal(o.children,u.valueNode):null]})});TS.displayName=eh;var ES="SelectItemIndicator",LS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return PS(ES,n).isSelected?s.jsx(Kn.span,{"aria-hidden":!0,...r,ref:e}):null});LS.displayName=ES;var S1="SelectScrollUpButton",RS=k.forwardRef((t,e)=>{const n=pu(S1,t.__scopeSelect),r=Sv(S1,t.__scopeSelect),[a,o]=k.useState(!1),u=Xr(e,r.onScrollButtonChange);return yi(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollTop>0;o(p)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(IS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop-f.offsetHeight)}}):null});RS.displayName=S1;var j1="SelectScrollDownButton",DS=k.forwardRef((t,e)=>{const n=pu(j1,t.__scopeSelect),r=Sv(j1,t.__scopeSelect),[a,o]=k.useState(!1),u=Xr(e,r.onScrollButtonChange);return yi(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollHeight-f.clientHeight,m=Math.ceil(f.scrollTop)<p;o(m)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(IS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop+f.offsetHeight)}}):null});DS.displayName=j1;var IS=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,o=pu("SelectScrollButton",n),u=k.useRef(null),c=ig(n),f=k.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return k.useEffect(()=>()=>f(),[f]),yi(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),s.jsx(Kn.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:$n(a.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:$n(a.onPointerMove,()=>{o.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:$n(a.onPointerLeave,()=>{f()})})}),AL="SelectSeparator",FS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Kn.div,{"aria-hidden":!0,...r,ref:e})});FS.displayName=AL;var C1="SelectArrow",PL=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=ag(n),o=hu(C1,n),u=pu(C1,n);return o.open&&u.position==="popper"?s.jsx(pw,{...a,...r,ref:e}):null});PL.displayName=C1;function OS(t){return t===""||t===void 0}var MS=k.forwardRef((t,e)=>{const{value:n,...r}=t,a=k.useRef(null),o=Xr(e,a),u=fS(n);return k.useEffect(()=>{const c=a.current,f=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==n&&m){const b=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(b)}},[u,n]),s.jsx(Rh,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:n})})});MS.displayName="BubbleSelect";function BS(t){const e=Ua(t),n=k.useRef(""),r=k.useRef(0),a=k.useCallback(u=>{const c=n.current+u;e(c),(function f(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(c)},[e]),o=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function qS(t,e,n){const a=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let u=kL(t,Math.max(o,0));a.length===1&&(u=u.filter(p=>p!==n));const f=u.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function kL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var TL=hS,US=mS,EL=vS,LL=xS,RL=yS,zS=bS,DL=jS,$S=AS,VS=kS,IL=TS,FL=LS,HS=RS,WS=DS,GS=FS;const Rl=TL,Dl=EL,Yo=k.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(US,{ref:r,className:qn("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(LL,{asChild:!0,children:s.jsx(qd,{className:"h-4 w-4 opacity-50"})})]}));Yo.displayName=US.displayName;const KS=k.forwardRef(({className:t,...e},n)=>s.jsx(HS,{ref:n,className:qn("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx($p,{className:"h-4 w-4"})}));KS.displayName=HS.displayName;const QS=k.forwardRef(({className:t,...e},n)=>s.jsx(WS,{ref:n,className:qn("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(qd,{className:"h-4 w-4"})}));QS.displayName=WS.displayName;const Xo=k.forwardRef(({className:t,children:e,position:n="popper",...r},a)=>s.jsx(RL,{children:s.jsxs(zS,{ref:a,className:qn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(KS,{}),s.jsx(DL,{className:qn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(QS,{})]})}));Xo.displayName=zS.displayName;const OL=k.forwardRef(({className:t,...e},n)=>s.jsx($S,{ref:n,className:qn("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));OL.displayName=$S.displayName;const ha=k.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(VS,{ref:r,className:qn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(FL,{children:s.jsx(Fd,{className:"h-4 w-4"})})}),s.jsx(IL,{children:e})]}));ha.displayName=VS.displayName;const ML=k.forwardRef(({className:t,...e},n)=>s.jsx(GS,{ref:n,className:qn("-mx-1 my-1 h-px bg-muted",t),...e}));ML.displayName=GS.displayName;const BL=U.object({projectName:U.string().min(1,"Project name is required"),clientId:U.string().min(1,"Client selection is required"),location:U.string().min(1,"Location is required"),quotationType:U.enum(bm,{errorMap:()=>({message:"Quotation type is required"})})});function qL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState(null),[u,c]=k.useState(""),[,f]=za(),{toast:p}=$a(),{data:m}=Ea(),{data:b,isLoading:j}=Ln({queryKey:["/api/projects"]}),{data:y,isLoading:I}=Ln({queryKey:["/api/clients"]}),S=mf({resolver:gf(BL),defaultValues:{projectName:"",clientId:"",location:"",quotationType:void 0}}),P=Dr({mutationFn:async R=>wn("POST","/api/projects",{...R,clientId:Number(R.clientId)}),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects"]}),p({title:"Project created",description:"The project has been created successfully."}),S.reset(),e(!1)},onError:R=>{p({title:"Error",description:R.message||"Failed to create project",variant:"destructive"})}}),_=Dr({mutationFn:async({id:R,data:z})=>wn("PUT",`/api/projects/${R}`,{...z,clientId:Number(z.clientId)}),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects"]}),p({title:"Project updated",description:"The project has been updated successfully."}),S.reset(),r(null),e(!1)},onError:R=>{p({title:"Error",description:R.message||"Failed to update project",variant:"destructive"})}}),F=Dr({mutationFn:async R=>wn("DELETE",`/api/projects/${R}`),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects"]}),p({title:"Project deleted",description:"The project has been deleted successfully."}),o(null)},onError:R=>{p({title:"Error",description:R.message||"Failed to delete project",variant:"destructive"})}}),v=R=>{n?_.mutate({id:n.id,data:R}):P.mutate(R)},q=R=>{r(R),S.reset({projectName:R.projectName,clientId:String(R.clientId),location:R.location,quotationType:R.quotationType}),e(!0)},ee=R=>{e(R),R||(r(null),S.reset())},ae=R=>y?.find(Y=>Y.id===R)?.name||"Unknown Client",W=R=>new Date(R).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase(),te=R=>{switch(R){case"Supply and Fabrication":return"text-blue-600";case"Structural Fabrication":return"text-purple-600";case"Job Work":return"text-amber-600";default:return"text-slate-600"}},Q=R=>{switch(R){case"Supply and Fabrication":return"SUPPLY & FAB";case"Structural Fabrication":return"STRUCTURAL";case"Job Work":return"JOB WORK";default:return R.toUpperCase()}},ue=()=>{a&&F.mutate(a.id)},O=k.useMemo(()=>{const R=u.trim().toLowerCase(),z=[...b??[]].sort((Y,Ce)=>{const Ae=Y.createdAt?new Date(Y.createdAt).getTime():0,Pe=Ce.createdAt?new Date(Ce.createdAt).getTime():0;return Ae!==Pe?Pe-Ae:Ce.id-Y.id});return R?z.filter(Y=>[Y.projectName,ae(Y.clientId),Y.location,Y.quotationType].join(" ").toLowerCase().includes(R)):z},[b,u,y]);return s.jsxs(qs,{user:m,children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:s.jsx(im,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Projects"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your projects and quotations"})]})]}),s.jsxs(xi,{open:t,onOpenChange:ee,children:[s.jsx(Ah,{asChild:!0,children:s.jsxs(qe,{"data-testid":"button-add-project",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Add Project"]})}),s.jsxs(ci,{className:"sm:max-w-[500px]",children:[s.jsxs(ui,{children:[s.jsx(di,{children:n?"Edit Project":"Create New Project"}),s.jsx(sf,{children:n?"Update project details below.":"Add a new project with client and quotation details."})]}),s.jsx(vf,{...S,children:s.jsxs("form",{onSubmit:S.handleSubmit(v),className:"space-y-4",children:[s.jsx(ar,{control:S.control,name:"projectName",render:({field:R})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Project Name"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-project-name",placeholder:"Enter project name",...R})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:S.control,name:"clientId",render:({field:R})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Client Name"}),s.jsxs(Rl,{onValueChange:R.onChange,value:R.value,children:[s.jsx(tr,{children:s.jsx(Yo,{"data-testid":"select-client",children:s.jsx(Dl,{placeholder:"Select a client"})})}),s.jsx(Xo,{children:I?s.jsx(ha,{value:"loading",disabled:!0,children:"Loading clients..."}):y&&y.length>0?y.map(z=>s.jsx(ha,{value:String(z.id),"data-testid":`select-client-option-${z.id}`,children:z.name},z.id)):s.jsx(ha,{value:"none",disabled:!0,children:"No clients available. Please add a client first."})})]}),s.jsx(nr,{})]})}),s.jsx(ar,{control:S.control,name:"location",render:({field:R})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Location"}),s.jsx(tr,{children:s.jsx(et,{"data-testid":"input-location",placeholder:"Enter location",...R})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:S.control,name:"quotationType",render:({field:R})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Quotation Type"}),s.jsxs(Rl,{onValueChange:R.onChange,value:R.value,children:[s.jsx(tr,{children:s.jsx(Yo,{"data-testid":"select-quotation-type",children:s.jsx(Dl,{placeholder:"Select quotation type"})})}),s.jsx(Xo,{children:bm.map(z=>s.jsx(ha,{value:z,"data-testid":`select-quotation-option-${z.replace(/\s+/g,"-").toLowerCase()}`,children:z},z))})]}),s.jsx(nr,{})]})}),s.jsx(qe,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:P.isPending||_.isPending,"data-testid":"button-submit-project",children:P.isPending||_.isPending?n?"Updating...":"Creating...":n?"Update Project":"Create Project"})]})})]})]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Y1,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx(et,{value:u,onChange:R=>c(R.target.value),placeholder:"Search by project, client, location, type...",className:"pl-9","data-testid":"input-search-projects"})]})]}),s.jsx(Cn,{className:"border-0 shadow-lg overflow-hidden",children:s.jsxs(_n,{className:"p-0",children:[s.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Project Identifier"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Partner"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Geographic Site"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Creation Date"})}),s.jsx("div",{className:"col-span-1",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),j?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(R=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 ml-auto"})})]},R))}):O.length>0?s.jsxs("div",{className:"divide-y divide-slate-100",children:[O.map(R=>s.jsxs("div",{"data-testid":`row-project-${R.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:"P"}),s.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-project-name-${R.id}`,children:R.projectName.length>15?R.projectName.substring(0,15)+"...":R.projectName})]}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"font-semibold text-slate-700 uppercase text-sm","data-testid":`text-client-name-${R.id}`,children:ae(R.clientId)})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${R.id}`,children:R.location})}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx(n_,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-created-date-${R.id}`,children:R.createdAt?W(R.createdAt):"N/A"})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("span",{className:`font-bold text-xs uppercase tracking-wide ${te(R.quotationType)}`,"data-testid":`text-status-${R.id}`,children:Q(R.quotationType)})}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/projects/${R.id}/quotation`),"data-testid":`button-quotation-${R.id}`,title:"Create Quotation",children:s.jsx(Aa,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/projects/${R.id}/invoice`),"data-testid":`button-invoice-${R.id}`,title:"Create Invoice",children:s.jsx(a1,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/projects/${R.id}/gate-pass`),"data-testid":`button-gate-pass-${R.id}`,title:"Create Gate Pass",children:s.jsx(r1,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/projects/${R.id}/delivery-challan`),"data-testid":`button-delivery-challan-${R.id}`,title:"Create Delivery Challan",children:s.jsx(n1,{className:"w-4 h-4"})}),s.jsx(qe,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/projects/${R.id}/ledger`),"data-testid":`button-ledger-${R.id}`,title:"Open Ledger",children:s.jsx(v2,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>q(R),"data-testid":`button-edit-project-${R.id}`,title:"Edit Project",children:s.jsx($u,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(R),disabled:F.isPending,"data-testid":`button-delete-project-${R.id}`,title:"Delete Project",children:s.jsx(vr,{className:"w-4 h-4"})})]})]},R.id)),O.map(R=>s.jsxs("div",{className:"md:hidden px-4 py-4 space-y-3 hover:bg-slate-50/50","data-testid":`card-project-${R.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900",children:R.projectName}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:ae(R.clientId)}),s.jsx("p",{className:"text-xs text-slate-500",children:R.location})]}),s.jsx("span",{className:`font-bold text-[10px] uppercase tracking-wide ${te(R.quotationType)}`,children:Q(R.quotationType)})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/projects/${R.id}/quotation`),"data-testid":`button-quotation-mobile-${R.id}`,children:s.jsx(Aa,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/projects/${R.id}/invoice`),"data-testid":`button-invoice-mobile-${R.id}`,children:s.jsx(a1,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/projects/${R.id}/gate-pass`),"data-testid":`button-gate-pass-mobile-${R.id}`,children:s.jsx(r1,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/projects/${R.id}/delivery-challan`),"data-testid":`button-delivery-challan-mobile-${R.id}`,children:s.jsx(n1,{className:"w-4 h-4"})}),s.jsx(qe,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/projects/${R.id}/ledger`),"data-testid":`button-ledger-mobile-${R.id}`,title:"Open Ledger",children:s.jsx(v2,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>q(R),"data-testid":`button-edit-project-mobile-${R.id}`,children:s.jsx($u,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(R),disabled:F.isPending,"data-testid":`button-delete-project-mobile-${R.id}`,children:s.jsx(vr,{className:"w-4 h-4"})})]})]},`mobile-${R.id}`))]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-teal-500/10 flex items-center justify-center mb-4",children:s.jsx(im,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No projects yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by creating your first project. Add clients first if you haven't already."}),s.jsxs(qe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Create First Project"]})]})]})}),s.jsx(xi,{open:!!a,onOpenChange:R=>!R&&o(null),children:s.jsxs(ci,{className:"sm:max-w-md",children:[s.jsxs(ui,{children:[s.jsx(di,{children:"Delete Project?"}),s.jsx(sf,{children:a?`Are you sure you want to delete "${a.projectName}"? This action cannot be undone.`:"Are you sure you want to delete this project? This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>o(null),disabled:F.isPending,"data-testid":"button-cancel-delete-project",children:"Cancel"}),s.jsx(qe,{type:"button",variant:"destructive",onClick:ue,disabled:F.isPending,"data-testid":"button-confirm-delete-project",children:F.isPending?"Deleting...":"Delete"})]})]})})]})}var jv="Checkbox",[UL]=Ml(jv),[zL,$L]=UL(jv),ZS=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:u,disabled:c,value:f="on",onCheckedChange:p,form:m,...b}=t,[j,y]=k.useState(null),I=Xr(e,q=>y(q)),S=k.useRef(!1),P=j?m||!!j.closest("form"):!0,[_=!1,F]=tu({prop:a,defaultProp:o,onChange:p}),v=k.useRef(_);return k.useEffect(()=>{const q=j?.form;if(q){const ee=()=>F(v.current);return q.addEventListener("reset",ee),()=>q.removeEventListener("reset",ee)}},[j,F]),s.jsxs(zL,{scope:n,state:_,disabled:c,children:[s.jsx(Kn.button,{type:"button",role:"checkbox","aria-checked":eu(_)?"mixed":_,"aria-required":u,"data-state":JS(_),"data-disabled":c?"":void 0,disabled:c,value:f,...b,ref:I,onKeyDown:$n(t.onKeyDown,q=>{q.key==="Enter"&&q.preventDefault()}),onClick:$n(t.onClick,q=>{F(ee=>eu(ee)?!0:!ee),P&&(S.current=q.isPropagationStopped(),S.current||q.stopPropagation())})}),P&&s.jsx(VL,{control:j,bubbles:!S.current,name:r,value:f,checked:_,required:u,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:eu(o)?!1:o})]})});ZS.displayName=jv;var YS="CheckboxIndicator",XS=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,o=$L(YS,n);return s.jsx(du,{present:r||eu(o.state)||o.state===!0,children:s.jsx(Kn.span,{"data-state":JS(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});XS.displayName=YS;var VL=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:a,...o}=t,u=k.useRef(null),c=fS(n),f=nw(e);k.useEffect(()=>{const m=u.current,b=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(b,"checked").set;if(c!==n&&y){const I=new Event("click",{bubbles:r});m.indeterminate=eu(n),y.call(m,eu(n)?!1:n),m.dispatchEvent(I)}},[c,n,r]);const p=k.useRef(eu(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,...o,tabIndex:-1,ref:u,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eu(t){return t==="indeterminate"}function JS(t){return eu(t)?"indeterminate":t?"checked":"unchecked"}var e4=ZS,HL=XS;const ih=k.forwardRef(({className:t,...e},n)=>s.jsx(e4,{ref:n,className:qn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(HL,{className:qn("flex items-center justify-center text-current"),children:s.jsx(Fd,{className:"h-4 w-4"})})}));ih.displayName=e4.displayName;const t4=U.object({name:U.string().min(1,"Name is required"),username:U.string().email("Please enter a valid email address"),mobile:U.string().min(10,"Valid mobile number is required"),password:U.string().min(6,"Password must be at least 6 characters"),role:U.enum(_h,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:U.array(U.number()).optional()}),WL=t4.partial().extend({name:U.string().min(1,"Name is required"),username:U.string().email("Please enter a valid email address"),mobile:U.string().min(10,"Valid mobile number is required"),role:U.enum(_h,{errorMap:()=>({message:"Role is required"})}),password:U.string().optional()});function GL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState([]),{toast:u}=$a(),{data:c}=Ea(),f=c?.role==="Administrator",{data:p,isLoading:m}=Ln({queryKey:["/api/users"]}),{data:b}=Ln({queryKey:["/api/clients"]}),j=mf({resolver:gf(n?WL:t4),defaultValues:{name:"",username:"",mobile:"",password:"",role:"Standard",assignedClientIds:[]}}),y=j.watch("role"),I=Dr({mutationFn:async ae=>wn("POST","/api/users",{...ae,email:ae.username,assignedClientIds:a}),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/users"]}),u({title:"User created",description:"The user has been created successfully."}),j.reset(),o([]),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to create user",variant:"destructive"})}}),S=Dr({mutationFn:async({id:ae,data:W})=>{const te={name:W.name,username:W.username,email:W.username,mobile:W.mobile,role:W.role,assignedClientIds:a};return W.password&&W.password.length>=6&&(te.password=W.password),wn("PUT",`/api/users/${ae}`,te)},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/users"]}),u({title:"User updated",description:"The user has been updated successfully."}),j.reset(),o([]),r(null),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to update user",variant:"destructive"})}}),P=Dr({mutationFn:async ae=>wn("DELETE",`/api/users/${ae}`),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/users"]}),u({title:"User deleted",description:"The user has been deleted successfully."})},onError:ae=>{u({title:"Error",description:ae.message||"Failed to delete user",variant:"destructive"})}}),_=async ae=>{r(ae),j.reset({name:ae.name,username:ae.username,mobile:ae.mobile||"",password:"",role:ae.role});try{const te=await(await fetch(`/api/users/${ae.id}/clients`)).json();o(te)}catch{o([])}e(!0)},F=ae=>{ae||(j.reset(),r(null),o([])),e(ae)},v=ae=>{n?S.mutate({id:n.id,data:ae}):I.mutate(ae)},q=ae=>{o(W=>W.includes(ae)?W.filter(te=>te!==ae):[...W,ae])},ee=ae=>ae==="Administrator"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700";return s.jsxs(qs,{user:c,children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-1","data-testid":"text-page-title",children:"User Management"}),s.jsx("p",{className:"text-slate-500","data-testid":"text-page-description",children:"Manage system users and their access permissions"})]}),f&&s.jsxs(xi,{open:t,onOpenChange:F,children:[s.jsxs(qe,{onClick:()=>{r(null),j.reset(),o([]),e(!0)},className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] hover:from-[#b51c2c] hover:to-[#a01827] shadow-lg shadow-red-200/50","data-testid":"button-add-user",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Add User"]}),s.jsxs(ci,{className:"sm:max-w-[500px]",children:[s.jsxs(ui,{children:[s.jsx(di,{children:n?"Edit User":"Add New User"}),s.jsx(sf,{children:n?"Update the user details below.":"Fill in the details to create a new user account."})]}),s.jsx(vf,{...j,children:s.jsxs("form",{onSubmit:j.handleSubmit(v),className:"space-y-4",children:[s.jsx(ar,{control:j.control,name:"name",render:({field:ae})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"User Name"}),s.jsx(tr,{children:s.jsx(et,{placeholder:"Enter full name",...ae,"data-testid":"input-user-name"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:j.control,name:"username",render:({field:ae})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Email ID"}),s.jsx(tr,{children:s.jsx(et,{type:"email",placeholder:"Enter email address",...ae,"data-testid":"input-user-email"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:j.control,name:"mobile",render:({field:ae})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Mobile No."}),s.jsx(tr,{children:s.jsx(et,{placeholder:"Enter mobile number",...ae,"data-testid":"input-user-mobile"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:j.control,name:"password",render:({field:ae})=>s.jsxs(Jn,{children:[s.jsx(er,{children:n?"New Password (leave blank to keep current)":"Password"}),s.jsx(tr,{children:s.jsx(et,{type:"password",placeholder:n?"Enter new password (optional)":"Enter password",...ae,"data-testid":"input-user-password"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:j.control,name:"role",render:({field:ae})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Role"}),s.jsxs(Rl,{onValueChange:ae.onChange,value:ae.value,children:[s.jsx(tr,{children:s.jsx(Yo,{"data-testid":"select-user-role",children:s.jsx(Dl,{placeholder:"Select role"})})}),s.jsx(Xo,{children:_h.map(W=>s.jsx(ha,{value:W,"data-testid":`option-role-${W.toLowerCase()}`,children:W},W))})]}),s.jsx(nr,{})]})}),y==="Standard"&&b&&b.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Assign Clients"}),s.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Standard users can only access projects of assigned clients"}),s.jsx("div",{className:"border rounded-md p-3 max-h-40 overflow-y-auto space-y-2",children:b.map(ae=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ih,{id:`client-${ae.id}`,checked:a.includes(ae.id),onCheckedChange:()=>q(ae.id),"data-testid":`checkbox-client-${ae.id}`}),s.jsx("label",{htmlFor:`client-${ae.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:ae.name})]},ae.id))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>F(!1),"data-testid":"button-cancel",children:"Cancel"}),s.jsx(qe,{type:"submit",disabled:I.isPending||S.isPending,className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c]","data-testid":"button-submit-user",children:I.isPending||S.isPending?"Saving...":n?"Update User":"Create User"})]})]})})]})]})]}),s.jsx(Cn,{className:"shadow-lg border-slate-200/50 overflow-hidden",children:s.jsxs(_n,{className:"p-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mobile"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(ae=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},ae))}):p&&p.length>0?s.jsx("div",{className:"divide-y divide-slate-100",children:p.map(ae=>s.jsxs("div",{"data-testid":`row-user-${ae.id}`,className:"grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:ae.name?.charAt(0).toUpperCase()||"U"}),s.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-user-name-${ae.id}`,children:ae.name})]}),s.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[s.jsx(fu,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-email-${ae.id}`,children:ae.username})]}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx(Db,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-mobile-${ae.id}`,children:ae.mobile||"-"})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${ee(ae.role||"Standard")}`,"data-testid":`text-user-role-${ae.id}`,children:[s.jsx(u_,{className:"w-3 h-3"}),ae.role||"Standard"]})}),s.jsx("div",{className:"col-span-2 flex items-center justify-end gap-1",children:f&&s.jsxs(s.Fragment,{children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>_(ae),"data-testid":`button-edit-user-${ae.id}`,title:"Edit User",children:s.jsx($u,{className:"w-4 h-4"})}),ae.id!==c?.id&&s.jsx(qe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>{confirm(`Are you sure you want to delete ${ae.name}?`)&&P.mutate(ae.id)},disabled:P.isPending,"data-testid":`button-delete-user-${ae.id}`,title:"Delete User",children:s.jsx(vr,{className:"w-4 h-4"})})]})})]},ae.id))}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-slate-500/10 flex items-center justify-center mb-4",children:s.jsx(ch,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No users yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first user account."}),f&&s.jsxs(qe,{onClick:()=>e(!0),className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] shadow-lg shadow-red-200/50",children:[s.jsx(_a,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})]})})]})}const Rr=k.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:qn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Rr.displayName="Textarea";var Cv="Collapsible",[KL,n4]=Ml(Cv),[QL,_v]=KL(Cv),r4=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:u,...c}=t,[f=!1,p]=tu({prop:r,defaultProp:a,onChange:u});return s.jsx(QL,{scope:n,disabled:o,contentId:Jc(),open:f,onOpenToggle:k.useCallback(()=>p(m=>!m),[p]),children:s.jsx(Kn.div,{"data-state":Pv(f),"data-disabled":o?"":void 0,...c,ref:e})})});r4.displayName=Cv;var s4="CollapsibleTrigger",i4=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,a=_v(s4,n);return s.jsx(Kn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Pv(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:e,onClick:$n(t.onClick,a.onOpenToggle)})});i4.displayName=s4;var Av="CollapsibleContent",a4=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=_v(Av,t.__scopeCollapsible);return s.jsx(du,{present:n||a.open,children:({present:o})=>s.jsx(ZL,{...r,ref:e,present:o})})});a4.displayName=Av;var ZL=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=t,u=_v(Av,n),[c,f]=k.useState(r),p=k.useRef(null),m=Xr(e,p),b=k.useRef(0),j=b.current,y=k.useRef(0),I=y.current,S=u.open||c,P=k.useRef(S),_=k.useRef(void 0);return k.useEffect(()=>{const F=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(F)},[]),yi(()=>{const F=p.current;if(F){_.current=_.current||{transitionDuration:F.style.transitionDuration,animationName:F.style.animationName},F.style.transitionDuration="0s",F.style.animationName="none";const v=F.getBoundingClientRect();b.current=v.height,y.current=v.width,P.current||(F.style.transitionDuration=_.current.transitionDuration,F.style.animationName=_.current.animationName),f(r)}},[u.open,r]),s.jsx(Kn.div,{"data-state":Pv(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":I?`${I}px`:void 0,...t.style},children:S&&a})});function Pv(t){return t?"open":"closed"}var YL=r4,XL=i4,JL=a4,xc="Accordion",eR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[kv,tR,nR]=W1(xc),[og]=Ml(xc,[nR,n4]),Tv=n4(),o4=xn.forwardRef((t,e)=>{const{type:n,...r}=t,a=r,o=r;return s.jsx(kv.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(aR,{...o,ref:e}):s.jsx(iR,{...a,ref:e})})});o4.displayName=xc;var[l4,rR]=og(xc),[c4,sR]=og(xc,{collapsible:!1}),iR=xn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...u}=t,[c,f]=tu({prop:n,defaultProp:r,onChange:a});return s.jsx(l4,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:f,onItemClose:xn.useCallback(()=>o&&f(""),[o,f]),children:s.jsx(c4,{scope:t.__scopeAccordion,collapsible:o,children:s.jsx(u4,{...u,ref:e})})})}),aR=xn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=t,[u=[],c]=tu({prop:n,defaultProp:r,onChange:a}),f=xn.useCallback(m=>c((b=[])=>[...b,m]),[c]),p=xn.useCallback(m=>c((b=[])=>b.filter(j=>j!==m)),[c]);return s.jsx(l4,{scope:t.__scopeAccordion,value:u,onItemOpen:f,onItemClose:p,children:s.jsx(c4,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(u4,{...o,ref:e})})})}),[oR,lg]=og(xc),u4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...u}=t,c=xn.useRef(null),f=Xr(c,e),p=tR(n),b=dS(a)==="ltr",j=$n(t.onKeyDown,y=>{if(!eR.includes(y.key))return;const I=y.target,S=p().filter(te=>!te.ref.current?.disabled),P=S.findIndex(te=>te.ref.current===I),_=S.length;if(P===-1)return;y.preventDefault();let F=P;const v=0,q=_-1,ee=()=>{F=P+1,F>q&&(F=v)},ae=()=>{F=P-1,F<v&&(F=q)};switch(y.key){case"Home":F=v;break;case"End":F=q;break;case"ArrowRight":o==="horizontal"&&(b?ee():ae());break;case"ArrowDown":o==="vertical"&&ee();break;case"ArrowLeft":o==="horizontal"&&(b?ae():ee());break;case"ArrowUp":o==="vertical"&&ae();break}const W=F%_;S[W].ref.current?.focus()});return s.jsx(oR,{scope:n,disabled:r,direction:a,orientation:o,children:s.jsx(kv.Slot,{scope:n,children:s.jsx(Kn.div,{...u,"data-orientation":o,ref:f,onKeyDown:r?void 0:j})})})}),Am="AccordionItem",[lR,Ev]=og(Am),d4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...a}=t,o=lg(Am,n),u=rR(Am,n),c=Tv(n),f=Jc(),p=r&&u.value.includes(r)||!1,m=o.disabled||t.disabled;return s.jsx(lR,{scope:n,open:p,disabled:m,triggerId:f,children:s.jsx(YL,{"data-orientation":o.orientation,"data-state":v4(p),...c,...a,ref:e,disabled:m,open:p,onOpenChange:b=>{b?u.onItemOpen(r):u.onItemClose(r)}})})});d4.displayName=Am;var f4="AccordionHeader",h4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=lg(xc,n),o=Ev(f4,n);return s.jsx(Kn.h3,{"data-orientation":a.orientation,"data-state":v4(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});h4.displayName=f4;var _1="AccordionTrigger",p4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=lg(xc,n),o=Ev(_1,n),u=sR(_1,n),c=Tv(n);return s.jsx(kv.ItemSlot,{scope:n,children:s.jsx(XL,{"aria-disabled":o.open&&!u.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...r,ref:e})})});p4.displayName=_1;var m4="AccordionContent",g4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=lg(xc,n),o=Ev(m4,n),u=Tv(n);return s.jsx(JL,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...u,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});g4.displayName=m4;function v4(t){return t?"open":"closed"}var cR=o4,uR=d4,dR=h4,x4=p4,y4=g4;const S0=cR,Kp=k.forwardRef(({className:t,...e},n)=>s.jsx(uR,{ref:n,className:qn("border-b",t),...e}));Kp.displayName="AccordionItem";const Qp=k.forwardRef(({className:t,children:e,...n},r)=>s.jsx(dR,{className:"flex",children:s.jsxs(x4,{ref:r,className:qn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(qd,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Qp.displayName=x4.displayName;const Zp=k.forwardRef(({className:t,children:e,...n},r)=>s.jsx(y4,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:qn("pb-4 pt-0",t),children:e})}));Zp.displayName=y4.displayName;const fR="modulepreload",hR=function(t){return"/"+t},fy={},j0=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let f=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(n.map(p=>{if(p=hR(p),p in fy)return;fy[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const j=document.createElement("link");if(j.rel=m?"stylesheet":fR,m||(j.as="script"),j.crossOrigin="",j.href=p,c&&j.setAttribute("nonce",c),document.head.appendChild(j),m)return new Promise((y,I)=>{j.addEventListener("load",y),j.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function Zr(t){"@babel/helpers - typeof";return Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(t)}var nl=Uint8Array,oo=Uint16Array,Lv=Int32Array,Rv=new nl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dv=new nl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hy=new nl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b4=function(t,e){for(var n=new oo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new Lv(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return{b:n,r:a}},w4=b4(Rv,2),pR=w4.b,A1=w4.r;pR[28]=258,A1[258]=28;var mR=b4(Dv,0),py=mR.r,P1=new oo(32768);for(var xs=0;xs<32768;++xs){var Wc=(xs&43690)>>1|(xs&21845)<<1;Wc=(Wc&52428)>>2|(Wc&13107)<<2,Wc=(Wc&61680)>>4|(Wc&3855)<<4,P1[xs]=((Wc&65280)>>8|(Wc&255)<<8)>>1}var ah=(function(t,e,n){for(var r=t.length,a=0,o=new oo(e);a<r;++a)t[a]&&++o[t[a]-1];var u=new oo(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(n){c=new oo(1<<e);var f=15-e;for(a=0;a<r;++a)if(t[a])for(var p=a<<4|t[a],m=e-t[a],b=u[t[a]-1]++<<m,j=b|(1<<m)-1;b<=j;++b)c[P1[b]>>f]=p}else for(c=new oo(r),a=0;a<r;++a)t[a]&&(c[a]=P1[u[t[a]-1]++]>>15-t[a]);return c}),Zu=new nl(288);for(var xs=0;xs<144;++xs)Zu[xs]=8;for(var xs=144;xs<256;++xs)Zu[xs]=9;for(var xs=256;xs<280;++xs)Zu[xs]=7;for(var xs=280;xs<288;++xs)Zu[xs]=8;var Pm=new nl(32);for(var xs=0;xs<32;++xs)Pm[xs]=5;var gR=ah(Zu,9,0),vR=ah(Pm,5,0),N4=function(t){return(t+7)/8|0},xR=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new nl(t.subarray(e,n))},cc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Qf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},C0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,o=n.slice();if(!a)return{t:j4,l:0};if(a==1){var u=new nl(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(ee,ae){return ee.f-ae.f}),n.push({s:-1,f:25001});var c=n[0],f=n[1],p=0,m=1,b=2;for(n[0]={s:-1,f:c.f+f.f,l:c,r:f};m!=a-1;)c=n[n[p].f<n[b].f?p++:b++],f=n[p!=m&&n[p].f<n[b].f?p++:b++],n[m++]={s:-1,f:c.f+f.f,l:c,r:f};for(var j=o[0].s,r=1;r<a;++r)o[r].s>j&&(j=o[r].s);var y=new oo(j+1),I=k1(n[m-1],y,0);if(I>e){var r=0,S=0,P=I-e,_=1<<P;for(o.sort(function(ae,W){return y[W.s]-y[ae.s]||ae.f-W.f});r<a;++r){var F=o[r].s;if(y[F]>e)S+=_-(1<<I-y[F]),y[F]=e;else break}for(S>>=P;S>0;){var v=o[r].s;y[v]<e?S-=1<<e-y[v]++-1:++r}for(;r>=0&&S;--r){var q=o[r].s;y[q]==e&&(--y[q],++S)}I=e}return{t:new nl(y),l:I}},k1=function(t,e,n){return t.s==-1?Math.max(k1(t.l,e,n+1),k1(t.r,e,n+1)):e[t.s]=n},my=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new oo(++e),r=0,a=t[0],o=1,u=function(f){n[r++]=f},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=t[c]}return{c:n.subarray(0,r),n:e}},Zf=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},S4=function(t,e,n){var r=n.length,a=N4(e+2);t[a]=r&255,t[a+1]=r>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<r;++o)t[a+o+4]=n[o];return(a+4+r)*8},gy=function(t,e,n,r,a,o,u,c,f,p,m){cc(e,m++,n),++a[256];for(var b=C0(a,15),j=b.t,y=b.l,I=C0(o,15),S=I.t,P=I.l,_=my(j),F=_.c,v=_.n,q=my(S),ee=q.c,ae=q.n,W=new oo(19),te=0;te<F.length;++te)++W[F[te]&31];for(var te=0;te<ee.length;++te)++W[ee[te]&31];for(var Q=C0(W,7),ue=Q.t,O=Q.l,R=19;R>4&&!ue[hy[R-1]];--R);var z=p+5<<3,Y=Zf(a,Zu)+Zf(o,Pm)+u,Ce=Zf(a,j)+Zf(o,S)+u+14+3*R+Zf(W,ue)+2*W[16]+3*W[17]+7*W[18];if(f>=0&&z<=Y&&z<=Ce)return S4(e,m,t.subarray(f,f+p));var Ae,Pe,ce,ge;if(cc(e,m,1+(Ce<Y)),m+=2,Ce<Y){Ae=ah(j,y,0),Pe=j,ce=ah(S,P,0),ge=S;var De=ah(ue,O,0);cc(e,m,v-257),cc(e,m+5,ae-1),cc(e,m+10,R-4),m+=14;for(var te=0;te<R;++te)cc(e,m+3*te,ue[hy[te]]);m+=3*R;for(var se=[F,ee],M=0;M<2;++M)for(var L=se[M],te=0;te<L.length;++te){var ne=L[te]&31;cc(e,m,De[ne]),m+=ue[ne],ne>15&&(cc(e,m,L[te]>>5&127),m+=L[te]>>12)}}else Ae=gR,Pe=Zu,ce=vR,ge=Pm;for(var te=0;te<c;++te){var me=r[te];if(me>255){var ne=me>>18&31;Qf(e,m,Ae[ne+257]),m+=Pe[ne+257],ne>7&&(cc(e,m,me>>23&31),m+=Rv[ne]);var ye=me&31;Qf(e,m,ce[ye]),m+=ge[ye],ye>3&&(Qf(e,m,me>>5&8191),m+=Dv[ye])}else Qf(e,m,Ae[me]),m+=Pe[me]}return Qf(e,m,Ae[256]),m+Pe[256]},yR=new Lv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),j4=new nl(0),bR=function(t,e,n,r,a,o){var u=o.z||t.length,c=new nl(r+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(r,c.length-a),p=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var b=yR[e-1],j=b>>13,y=b&8191,I=(1<<n)-1,S=o.p||new oo(32768),P=o.h||new oo(I+1),_=Math.ceil(n/3),F=2*_,v=function(Ft){return(t[Ft]^t[Ft+1]<<_^t[Ft+2]<<F)&I},q=new Lv(25e3),ee=new oo(288),ae=new oo(32),W=0,te=0,Q=o.i||0,ue=0,O=o.w||0,R=0;Q+2<u;++Q){var z=v(Q),Y=Q&32767,Ce=P[z];if(S[Y]=Ce,P[z]=Y,O<=Q){var Ae=u-Q;if((W>7e3||ue>24576)&&(Ae>423||!p)){m=gy(t,f,0,q,ee,ae,te,ue,R,Q-R,m),ue=W=te=0,R=Q;for(var Pe=0;Pe<286;++Pe)ee[Pe]=0;for(var Pe=0;Pe<30;++Pe)ae[Pe]=0}var ce=2,ge=0,De=y,se=Y-Ce&32767;if(Ae>2&&z==v(Q-se))for(var M=Math.min(j,Ae)-1,L=Math.min(32767,Q),ne=Math.min(258,Ae);se<=L&&--De&&Y!=Ce;){if(t[Q+ce]==t[Q+ce-se]){for(var me=0;me<ne&&t[Q+me]==t[Q+me-se];++me);if(me>ce){if(ce=me,ge=se,me>M)break;for(var ye=Math.min(se,me-2),be=0,Pe=0;Pe<ye;++Pe){var Re=Q-se+Pe&32767,Ie=S[Re],Me=Re-Ie&32767;Me>be&&(be=Me,Ce=Re)}}}Y=Ce,Ce=S[Y],se+=Y-Ce&32767}if(ge){q[ue++]=268435456|A1[ce]<<18|py[ge];var Ze=A1[ce]&31,ft=py[ge]&31;te+=Rv[Ze]+Dv[ft],++ee[257+Ze],++ae[ft],O=Q+ce,++W}else q[ue++]=t[Q],++ee[t[Q]]}}for(Q=Math.max(Q,O);Q<u;++Q)q[ue++]=t[Q],++ee[t[Q]];m=gy(t,f,p,q,ee,ae,te,ue,R,Q-R,m),p||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=P,o.p=S,o.i=Q,o.w=O)}else{for(var Q=o.w||0;Q<u+p;Q+=65535){var mt=Q+65535;mt>=u&&(f[m/8|0]=p,mt=u),m=S4(f,m+1,t.subarray(Q,mt))}o.i=u}return xR(c,0,r+N4(m)+a)},C4=function(){var t=1,e=0;return{p:function(n){for(var r=t,a=e,o=n.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=r+=n[u];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}t=r,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wR=function(t,e,n,r,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new nl(o.length+t.length);u.set(o),u.set(t,o.length),t=u,a.w=o.length}return bR(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,a)},_4=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},NR=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=C4();a.p(e.dictionary),_4(t,2,a.d())}};function T1(t,e){e||(e={});var n=C4();n.p(t);var r=wR(t,e,e.dictionary?6:2,4);return NR(r,e),_4(r,r.length-4,n.d()),r}var SR=typeof TextDecoder<"u"&&new TextDecoder,jR=0;try{SR.decode(j4,{stream:!0}),jR=1}catch{}function CR(t){if(Array.isArray(t))return t}function _R(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,o,u,c=[],f=!0,p=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(f=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){p=!0,a=m}finally{try{if(!f&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(p)throw a}}return c}}function vy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function AR(t,e){if(t){if(typeof t=="string")return vy(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vy(t,e):void 0}}function PR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xy(t,e){return CR(t)||_R(t,e)||AR(t,e)||PR()}function yy(t,e="utf8"){return new TextDecoder(e).decode(t)}const kR=new TextEncoder;function TR(t){return kR.encode(t)}const ER=1024*8,LR=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),_0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Iv{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=ER,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=n.offset?n.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Iv)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=_0[n].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+r);if(this.littleEndian===LR&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+r));c.reverse();const f=new _0[n](c.buffer);return this.offset+=r,f.reverse(),f}const u=new _0[n](o);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return yy(this.readBytes(e))}decodeText(e=1,n="utf8"){return yy(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(TR(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yf(t){let e=t.length;for(;--e>=0;)t[e]=0}const RR=3,DR=258,A4=29,IR=256,FR=IR+1+A4,P4=30,OR=512,MR=new Array((FR+2)*2);yf(MR);const BR=new Array(P4*2);yf(BR);const qR=new Array(OR);yf(qR);const UR=new Array(DR-RR+1);yf(UR);const zR=new Array(A4);yf(zR);const $R=new Array(P4);yf($R);const VR=(t,e,n,r)=>{let a=t&65535|0,o=t>>>16&65535|0,u=0;for(;n!==0;){u=n>2e3?2e3:n,n-=u;do a=a+e[r++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var E1=VR;const HR=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},WR=new Uint32Array(HR()),GR=(t,e,n,r)=>{const a=WR,o=r+n;t^=-1;for(let u=r;u<o;u++)t=t>>>8^a[(t^e[u])&255];return t^-1};var Cl=GR,L1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},k4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const KR=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var QR=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)KR(n,r)&&(t[r]=n[r])}}return t},ZR=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,o=t.length;r<o;r++){let u=t[r];n.set(u,a),a+=u.length}return n},T4={assign:QR,flattenChunks:ZR};let E4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E4=!1}const Ph=new Uint8Array(256);for(let t=0;t<256;t++)Ph[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ph[254]=Ph[254]=1;var YR=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,o,u=t.length,c=0;for(a=0;a<u;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|n&63):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|n&63):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|n&63);return e};const XR=(t,e)=>{if(e<65534&&t.subarray&&E4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var JR=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const o=new Array(n*2);for(a=0,r=0;r<n;){let u=t[r++];if(u<128){o[a++]=u;continue}let c=Ph[u];if(c>4){o[a++]=65533,r+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&r<n;)u=u<<6|t[r++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return XR(o,a)},eD=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Ph[t[n]]>e?n:e},R1={string2buf:YR,buf2string:JR,utf8border:eD};function tD(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nD=tD;const Tp=16209,rD=16191;var sD=function(e,n){let r,a,o,u,c,f,p,m,b,j,y,I,S,P,_,F,v,q,ee,ae,W,te,Q,ue;const O=e.state;r=e.next_in,Q=e.input,a=r+(e.avail_in-5),o=e.next_out,ue=e.output,u=o-(n-e.avail_out),c=o+(e.avail_out-257),f=O.dmax,p=O.wsize,m=O.whave,b=O.wnext,j=O.window,y=O.hold,I=O.bits,S=O.lencode,P=O.distcode,_=(1<<O.lenbits)-1,F=(1<<O.distbits)-1;e:do{I<15&&(y+=Q[r++]<<I,I+=8,y+=Q[r++]<<I,I+=8),v=S[y&_];t:for(;;){if(q=v>>>24,y>>>=q,I-=q,q=v>>>16&255,q===0)ue[o++]=v&65535;else if(q&16){ee=v&65535,q&=15,q&&(I<q&&(y+=Q[r++]<<I,I+=8),ee+=y&(1<<q)-1,y>>>=q,I-=q),I<15&&(y+=Q[r++]<<I,I+=8,y+=Q[r++]<<I,I+=8),v=P[y&F];n:for(;;){if(q=v>>>24,y>>>=q,I-=q,q=v>>>16&255,q&16){if(ae=v&65535,q&=15,I<q&&(y+=Q[r++]<<I,I+=8,I<q&&(y+=Q[r++]<<I,I+=8)),ae+=y&(1<<q)-1,ae>f){e.msg="invalid distance too far back",O.mode=Tp;break e}if(y>>>=q,I-=q,q=o-u,ae>q){if(q=ae-q,q>m&&O.sane){e.msg="invalid distance too far back",O.mode=Tp;break e}if(W=0,te=j,b===0){if(W+=p-q,q<ee){ee-=q;do ue[o++]=j[W++];while(--q);W=o-ae,te=ue}}else if(b<q){if(W+=p+b-q,q-=b,q<ee){ee-=q;do ue[o++]=j[W++];while(--q);if(W=0,b<ee){q=b,ee-=q;do ue[o++]=j[W++];while(--q);W=o-ae,te=ue}}}else if(W+=b-q,q<ee){ee-=q;do ue[o++]=j[W++];while(--q);W=o-ae,te=ue}for(;ee>2;)ue[o++]=te[W++],ue[o++]=te[W++],ue[o++]=te[W++],ee-=3;ee&&(ue[o++]=te[W++],ee>1&&(ue[o++]=te[W++]))}else{W=o-ae;do ue[o++]=ue[W++],ue[o++]=ue[W++],ue[o++]=ue[W++],ee-=3;while(ee>2);ee&&(ue[o++]=ue[W++],ee>1&&(ue[o++]=ue[W++]))}}else if((q&64)===0){v=P[(v&65535)+(y&(1<<q)-1)];continue n}else{e.msg="invalid distance code",O.mode=Tp;break e}break}}else if((q&64)===0){v=S[(v&65535)+(y&(1<<q)-1)];continue t}else if(q&32){O.mode=rD;break e}else{e.msg="invalid literal/length code",O.mode=Tp;break e}break}}while(r<a&&o<c);ee=I>>3,r-=ee,I-=ee<<3,y&=(1<<I)-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=o<c?257+(c-o):257-(o-c),O.hold=y,O.bits=I};const kd=15,by=852,wy=592,Ny=0,A0=1,Sy=2,iD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),aD=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),oD=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lD=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cD=(t,e,n,r,a,o,u,c)=>{const f=c.bits;let p=0,m=0,b=0,j=0,y=0,I=0,S=0,P=0,_=0,F=0,v,q,ee,ae,W,te=null,Q;const ue=new Uint16Array(kd+1),O=new Uint16Array(kd+1);let R=null,z,Y,Ce;for(p=0;p<=kd;p++)ue[p]=0;for(m=0;m<r;m++)ue[e[n+m]]++;for(y=f,j=kd;j>=1&&ue[j]===0;j--);if(y>j&&(y=j),j===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(b=1;b<j&&ue[b]===0;b++);for(y<b&&(y=b),P=1,p=1;p<=kd;p++)if(P<<=1,P-=ue[p],P<0)return-1;if(P>0&&(t===Ny||j!==1))return-1;for(O[1]=0,p=1;p<kd;p++)O[p+1]=O[p]+ue[p];for(m=0;m<r;m++)e[n+m]!==0&&(u[O[e[n+m]]++]=m);if(t===Ny?(te=R=u,Q=20):t===A0?(te=iD,R=aD,Q=257):(te=oD,R=lD,Q=0),F=0,m=0,p=b,W=o,I=y,S=0,ee=-1,_=1<<y,ae=_-1,t===A0&&_>by||t===Sy&&_>wy)return 1;for(;;){z=p-S,u[m]+1<Q?(Y=0,Ce=u[m]):u[m]>=Q?(Y=R[u[m]-Q],Ce=te[u[m]-Q]):(Y=96,Ce=0),v=1<<p-S,q=1<<I,b=q;do q-=v,a[W+(F>>S)+q]=z<<24|Y<<16|Ce|0;while(q!==0);for(v=1<<p-1;F&v;)v>>=1;if(v!==0?(F&=v-1,F+=v):F=0,m++,--ue[p]===0){if(p===j)break;p=e[n+u[m]]}if(p>y&&(F&ae)!==ee){for(S===0&&(S=y),W+=b,I=p-S,P=1<<I;I+S<j&&(P-=ue[I+S],!(P<=0));)I++,P<<=1;if(_+=1<<I,t===A0&&_>by||t===Sy&&_>wy)return 1;ee=F&ae,a[ee]=y<<24|I<<16|W-o|0}}return F!==0&&(a[W+F]=p-S<<24|64<<16|0),c.bits=y,0};var oh=cD;const uD=0,L4=1,R4=2,{Z_FINISH:jy,Z_BLOCK:dD,Z_TREES:Ep,Z_OK:Yu,Z_STREAM_END:fD,Z_NEED_DICT:hD,Z_STREAM_ERROR:Ao,Z_DATA_ERROR:D4,Z_MEM_ERROR:I4,Z_BUF_ERROR:pD,Z_DEFLATED:Cy}=k4,cg=16180,_y=16181,Ay=16182,Py=16183,ky=16184,Ty=16185,Ey=16186,Ly=16187,Ry=16188,Dy=16189,km=16190,uc=16191,P0=16192,Iy=16193,k0=16194,Fy=16195,Oy=16196,My=16197,By=16198,Lp=16199,Rp=16200,qy=16201,Uy=16202,zy=16203,$y=16204,Vy=16205,T0=16206,Hy=16207,Wy=16208,_s=16209,F4=16210,O4=16211,mD=852,gD=592,vD=15,xD=vD,Gy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function yD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ed=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<cg||e.mode>O4?1:0},M4=t=>{if(ed(t))return Ao;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(mD),e.distcode=e.distdyn=new Int32Array(gD),e.sane=1,e.back=-1,Yu},B4=t=>{if(ed(t))return Ao;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,M4(t)},q4=(t,e)=>{let n;if(ed(t))return Ao;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ao:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,B4(t))},U4=(t,e)=>{if(!t)return Ao;const n=new yD;t.state=n,n.strm=t,n.window=null,n.mode=cg;const r=q4(t,e);return r!==Yu&&(t.state=null),r},bD=t=>U4(t,xD);let Ky=!0,E0,L0;const wD=t=>{if(Ky){E0=new Int32Array(512),L0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(oh(L4,t.lens,0,288,E0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;oh(R4,t.lens,0,32,L0,0,t.work,{bits:5}),Ky=!1}t.lencode=E0,t.lenbits=9,t.distcode=L0,t.distbits=5},z4=(t,e,n,r)=>{let a;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>r&&(a=r),o.window.set(e.subarray(n-r,n-r+a),o.wnext),r-=a,r?(o.window.set(e.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},ND=(t,e)=>{let n,r,a,o,u,c,f,p,m,b,j,y,I,S,P=0,_,F,v,q,ee,ae,W,te;const Q=new Uint8Array(4);let ue,O;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ed(t)||!t.output||!t.input&&t.avail_in!==0)return Ao;n=t.state,n.mode===uc&&(n.mode=P0),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,b=c,j=f,te=Yu;e:for(;;)switch(n.mode){case cg:if(n.wrap===0){n.mode=P0;break}for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&2&&p===35615){n.wbits===0&&(n.wbits=15),n.check=0,Q[0]=p&255,Q[1]=p>>>8&255,n.check=Cl(n.check,Q,2,0),p=0,m=0,n.mode=_y;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=_s;break}if((p&15)!==Cy){t.msg="unknown compression method",n.mode=_s;break}if(p>>>=4,m-=4,W=(p&15)+8,n.wbits===0&&(n.wbits=W),W>15||W>n.wbits){t.msg="invalid window size",n.mode=_s;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=p&512?Dy:uc,p=0,m=0;break;case _y:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.flags=p,(n.flags&255)!==Cy){t.msg="unknown compression method",n.mode=_s;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=_s;break}n.head&&(n.head.text=p>>8&1),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Cl(n.check,Q,2,0)),p=0,m=0,n.mode=Ay;case Ay:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.time=p),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,Q[2]=p>>>16&255,Q[3]=p>>>24&255,n.check=Cl(n.check,Q,4,0)),p=0,m=0,n.mode=Py;case Py:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.xflags=p&255,n.head.os=p>>8),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Cl(n.check,Q,2,0)),p=0,m=0,n.mode=ky;case ky:if(n.flags&1024){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length=p,n.head&&(n.head.extra_len=p),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Cl(n.check,Q,2,0)),p=0,m=0}else n.head&&(n.head.extra=null);n.mode=Ty;case Ty:if(n.flags&1024&&(y=n.length,y>c&&(y=c),y&&(n.head&&(W=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+y),W)),n.flags&512&&n.wrap&4&&(n.check=Cl(n.check,r,y,o)),c-=y,o+=y,n.length-=y),n.length))break e;n.length=0,n.mode=Ey;case Ey:if(n.flags&2048){if(c===0)break e;y=0;do W=r[o+y++],n.head&&W&&n.length<65536&&(n.head.name+=String.fromCharCode(W));while(W&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Cl(n.check,r,y,o)),c-=y,o+=y,W)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ly;case Ly:if(n.flags&4096){if(c===0)break e;y=0;do W=r[o+y++],n.head&&W&&n.length<65536&&(n.head.comment+=String.fromCharCode(W));while(W&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Cl(n.check,r,y,o)),c-=y,o+=y,W)break e}else n.head&&(n.head.comment=null);n.mode=Ry;case Ry:if(n.flags&512){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.check&65535)){t.msg="header crc mismatch",n.mode=_s;break}p=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=uc;break;case Dy:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}t.adler=n.check=Gy(p),p=0,m=0,n.mode=km;case km:if(n.havedict===0)return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,hD;t.adler=n.check=1,n.mode=uc;case uc:if(e===dD||e===Ep)break e;case P0:if(n.last){p>>>=m&7,m-=m&7,n.mode=T0;break}for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}switch(n.last=p&1,p>>>=1,m-=1,p&3){case 0:n.mode=Iy;break;case 1:if(wD(n),n.mode=Lp,e===Ep){p>>>=2,m-=2;break e}break;case 2:n.mode=Oy;break;case 3:t.msg="invalid block type",n.mode=_s}p>>>=2,m-=2;break;case Iy:for(p>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",n.mode=_s;break}if(n.length=p&65535,p=0,m=0,n.mode=k0,e===Ep)break e;case k0:n.mode=Fy;case Fy:if(y=n.length,y){if(y>c&&(y=c),y>f&&(y=f),y===0)break e;a.set(r.subarray(o,o+y),u),c-=y,o+=y,f-=y,u+=y,n.length-=y;break}n.mode=uc;break;case Oy:for(;m<14;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.nlen=(p&31)+257,p>>>=5,m-=5,n.ndist=(p&31)+1,p>>>=5,m-=5,n.ncode=(p&15)+4,p>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=_s;break}n.have=0,n.mode=My;case My:for(;n.have<n.ncode;){for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.lens[R[n.have++]]=p&7,p>>>=3,m-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ue={bits:n.lenbits},te=oh(uD,n.lens,0,19,n.lencode,0,n.work,ue),n.lenbits=ue.bits,te){t.msg="invalid code lengths set",n.mode=_s;break}n.have=0,n.mode=By;case By:for(;n.have<n.nlen+n.ndist;){for(;P=n.lencode[p&(1<<n.lenbits)-1],_=P>>>24,F=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(v<16)p>>>=_,m-=_,n.lens[n.have++]=v;else{if(v===16){for(O=_+2;m<O;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(p>>>=_,m-=_,n.have===0){t.msg="invalid bit length repeat",n.mode=_s;break}W=n.lens[n.have-1],y=3+(p&3),p>>>=2,m-=2}else if(v===17){for(O=_+3;m<O;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=3+(p&7),p>>>=3,m-=3}else{for(O=_+7;m<O;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=11+(p&127),p>>>=7,m-=7}if(n.have+y>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=_s;break}for(;y--;)n.lens[n.have++]=W}}if(n.mode===_s)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=_s;break}if(n.lenbits=9,ue={bits:n.lenbits},te=oh(L4,n.lens,0,n.nlen,n.lencode,0,n.work,ue),n.lenbits=ue.bits,te){t.msg="invalid literal/lengths set",n.mode=_s;break}if(n.distbits=6,n.distcode=n.distdyn,ue={bits:n.distbits},te=oh(R4,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ue),n.distbits=ue.bits,te){t.msg="invalid distances set",n.mode=_s;break}if(n.mode=Lp,e===Ep)break e;case Lp:n.mode=Rp;case Rp:if(c>=6&&f>=258){t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,sD(t,j),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,n.mode===uc&&(n.back=-1);break}for(n.back=0;P=n.lencode[p&(1<<n.lenbits)-1],_=P>>>24,F=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(F&&(F&240)===0){for(q=_,ee=F,ae=v;P=n.lencode[ae+((p&(1<<q+ee)-1)>>q)],_=P>>>24,F=P>>>16&255,v=P&65535,!(q+_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=q,m-=q,n.back+=q}if(p>>>=_,m-=_,n.back+=_,n.length=v,F===0){n.mode=Vy;break}if(F&32){n.back=-1,n.mode=uc;break}if(F&64){t.msg="invalid literal/length code",n.mode=_s;break}n.extra=F&15,n.mode=qy;case qy:if(n.extra){for(O=n.extra;m<O;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Uy;case Uy:for(;P=n.distcode[p&(1<<n.distbits)-1],_=P>>>24,F=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((F&240)===0){for(q=_,ee=F,ae=v;P=n.distcode[ae+((p&(1<<q+ee)-1)>>q)],_=P>>>24,F=P>>>16&255,v=P&65535,!(q+_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=q,m-=q,n.back+=q}if(p>>>=_,m-=_,n.back+=_,F&64){t.msg="invalid distance code",n.mode=_s;break}n.offset=v,n.extra=F&15,n.mode=zy;case zy:if(n.extra){for(O=n.extra;m<O;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=_s;break}n.mode=$y;case $y:if(f===0)break e;if(y=j-f,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=_s;break}y>n.wnext?(y-=n.wnext,I=n.wsize-y):I=n.wnext-y,y>n.length&&(y=n.length),S=n.window}else S=a,I=u-n.offset,y=n.length;y>f&&(y=f),f-=y,n.length-=y;do a[u++]=S[I++];while(--y);n.length===0&&(n.mode=Rp);break;case Vy:if(f===0)break e;a[u++]=n.length,f--,n.mode=Rp;break;case T0:if(n.wrap){for(;m<32;){if(c===0)break e;c--,p|=r[o++]<<m,m+=8}if(j-=f,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?Cl(n.check,a,j,u-j):E1(n.check,a,j,u-j)),j=f,n.wrap&4&&(n.flags?p:Gy(p))!==n.check){t.msg="incorrect data check",n.mode=_s;break}p=0,m=0}n.mode=Hy;case Hy:if(n.wrap&&n.flags){for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=_s;break}p=0,m=0}n.mode=Wy;case Wy:te=fD;break e;case _s:te=D4;break e;case F4:return I4;case O4:default:return Ao}return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,(n.wsize||j!==t.avail_out&&n.mode<_s&&(n.mode<T0||e!==jy))&&z4(t,t.output,t.next_out,j-t.avail_out),b-=t.avail_in,j-=t.avail_out,t.total_in+=b,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?Cl(n.check,a,j,t.next_out-j):E1(n.check,a,j,t.next_out-j)),t.data_type=n.bits+(n.last?64:0)+(n.mode===uc?128:0)+(n.mode===Lp||n.mode===k0?256:0),(b===0&&j===0||e===jy)&&te===Yu&&(te=pD),te},SD=t=>{if(ed(t))return Ao;let e=t.state;return e.window&&(e.window=null),t.state=null,Yu},jD=(t,e)=>{if(ed(t))return Ao;const n=t.state;return(n.wrap&2)===0?Ao:(n.head=e,e.done=!1,Yu)},CD=(t,e)=>{const n=e.length;let r,a,o;return ed(t)||(r=t.state,r.wrap!==0&&r.mode!==km)?Ao:r.mode===km&&(a=1,a=E1(a,e,n,0),a!==r.check)?D4:(o=z4(t,e,n,n),o?(r.mode=F4,I4):(r.havedict=1,Yu))};var _D=B4,AD=q4,PD=M4,kD=bD,TD=U4,ED=ND,LD=SD,RD=jD,DD=CD,ID="pako inflate (from Nodeca project)",pc={inflateReset:_D,inflateReset2:AD,inflateResetKeep:PD,inflateInit:kD,inflateInit2:TD,inflate:ED,inflateEnd:LD,inflateGetHeader:RD,inflateSetDictionary:DD,inflateInfo:ID};function FD(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var OD=FD;const $4=Object.prototype.toString,{Z_NO_FLUSH:MD,Z_FINISH:BD,Z_OK:kh,Z_STREAM_END:R0,Z_NEED_DICT:D0,Z_STREAM_ERROR:qD,Z_DATA_ERROR:Qy,Z_MEM_ERROR:UD}=k4;function qh(t){this.options=T4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nD,this.strm.avail_out=0;let n=pc.inflateInit2(this.strm,e.windowBits);if(n!==kh)throw new Error(L1[n]);if(this.header=new OD,pc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=R1.string2buf(e.dictionary):$4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=pc.inflateSetDictionary(this.strm,e.dictionary),n!==kh)))throw new Error(L1[n])}qh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?BD:MD,$4.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=pc.inflate(n,u),o===D0&&a&&(o=pc.inflateSetDictionary(n,a),o===kh?o=pc.inflate(n,u):o===Qy&&(o=D0));n.avail_in>0&&o===R0&&n.state.wrap>0&&t[n.next_in]!==0;)pc.inflateReset(n),o=pc.inflate(n,u);switch(o){case qD:case Qy:case D0:case UD:return this.onEnd(o),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||o===R0))if(this.options.to==="string"){let f=R1.utf8border(n.output,n.next_out),p=n.next_out-f,m=R1.buf2string(n.output,f);n.next_out=p,n.avail_out=r-p,p&&n.output.set(n.output.subarray(f,f+p),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===kh&&c===0)){if(o===R0)return o=pc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};qh.prototype.onData=function(t){this.chunks.push(t)};qh.prototype.onEnd=function(t){t===kh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function zD(t,e){const n=new qh(e);if(n.push(t),n.err)throw n.msg||L1[n.err];return n.result}var $D=qh,VD=zD,HD={Inflate:$D,inflate:VD};const{Inflate:WD,inflate:GD}=HD;var Zy=WD,KD=GD;const V4=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;V4[t]=e}const Yy=4294967295;function QD(t,e,n){let r=t;for(let a=0;a<n;a++)r=V4[(r^e[a])&255]^r>>>8;return r}function ZD(t,e){return(QD(Yy,t,e)^Yy)>>>0}function Xy(t,e,n){const r=t.readUint32(),a=ZD(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${a}`)}function H4(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function W4(t,e,n,r){let a=0;for(;a<r;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-r]&255}function G4(t,e,n,r){let a=0;if(n.length===0)for(;a<r;a++)e[a]=t[a];else for(;a<r;a++)e[a]=t[a]+n[a]&255}function K4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=t[o]+(n[o]>>1)&255;for(;o<r;o++)e[o]=t[o]+(e[o-a]+n[o]>>1)&255}}function Q4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=t[o]+n[o]&255;for(;o<r;o++)e[o]=t[o]+YD(e[o-a],n[o],n[o-a])&255}}function YD(t,e,n){const r=t+e-n,a=Math.abs(r-t),o=Math.abs(r-e),u=Math.abs(r-n);return a<=o&&a<=u?t:o<=u?e:n}function XD(t,e,n,r,a,o){switch(t){case 0:H4(e,n,a);break;case 1:W4(e,n,a,o);break;case 2:G4(e,n,r,a);break;case 3:K4(e,n,r,a,o);break;case 4:Q4(e,n,r,a,o);break;default:throw new Error(`Unsupported filter: ${t}`)}}const JD=new Uint16Array([255]),eI=new Uint8Array(JD.buffer),tI=eI[0]===255;function nI(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(r*n*c);let p=0;for(let m=0;m<7;m++){const b=u[m],j=Math.ceil((n-b.x)/b.xStep),y=Math.ceil((r-b.y)/b.yStep);if(j<=0||y<=0)continue;const I=j*c,S=new Uint8Array(I);for(let P=0;P<y;P++){const _=e[p++],F=e.subarray(p,p+I);p+=I;const v=new Uint8Array(I);XD(_,F,v,S,I,c),S.set(v);for(let q=0;q<j;q++){const ee=b.x+q*b.xStep,ae=b.y+P*b.yStep;if(!(ee>=n||ae>=r))for(let W=0;W<c;W++)f[(ae*n+ee)*c+W]=v[q*c+W]}}}if(o===16){const m=new Uint16Array(f.buffer);if(tI)for(let b=0;b<m.length;b++)m[b]=rI(m[b]);return m}else return f}function rI(t){return(t&255)<<8|t>>8&255}const sI=new Uint16Array([255]),iI=new Uint8Array(sI.buffer),aI=iI[0]===255,oI=new Uint8Array(0);function Jy(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*n),f=new Uint8Array(r*c);let p=oI,m=0,b,j;for(let y=0;y<r;y++){switch(b=e.subarray(m+1,m+1+c),j=f.subarray(y*c,(y+1)*c),e[m]){case 0:H4(b,j,c);break;case 1:W4(b,j,c,u);break;case 2:G4(b,j,p,c);break;case 3:K4(b,j,p,c,u);break;case 4:Q4(b,j,p,c,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=j,m+=c+1}if(o===16){const y=new Uint16Array(f.buffer);if(aI)for(let I=0;I<y.length;I++)y[I]=lI(y[I]);return y}else return f}function lI(t){return(t&255)<<8|t>>8&255}const Yp=Uint8Array.of(137,80,78,71,13,10,26,10);function e5(t){if(!cI(t.readBytes(Yp.length)))throw new Error("wrong PNG signature")}function cI(t){if(t.length<Yp.length)return!1;for(let e=0;e<Yp.length;e++)if(t[e]!==Yp[e])return!1;return!0}const uI="tEXt",dI=0,Z4=new TextDecoder("latin1");function fI(t){if(pI(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const hI=/^[\u0000-\u00FF]*$/;function pI(t){if(!hI.test(t))throw new Error("invalid latin1 text")}function mI(t,e,n){const r=Y4(e);t[r]=gI(e,n-r.length-1)}function Y4(t){for(t.mark();t.readByte()!==dI;);const e=t.offset;t.reset();const n=Z4.decode(t.readBytes(e-t.offset-1));return t.skip(1),fI(n),n}function gI(t,e){return Z4.decode(t.readBytes(e))}const ro={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},I0={UNKNOWN:-1,DEFLATE:0},t5={UNKNOWN:-1,ADAPTIVE:0},F0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Dp={NONE:0,BACKGROUND:1,PREVIOUS:2},O0={SOURCE:0,OVER:1};class vI extends Iv{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new Zy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=I0.UNKNOWN,this._filterMethod=t5.UNKNOWN,this._interlaceMethod=F0.UNKNOWN,this._colorType=ro.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(e5(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(e5(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case uI:mI(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xy(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xy(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=xI(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case ro.GREYSCALE:r=1;break;case ro.TRUECOLOUR:r=3;break;case ro.INDEXED_COLOUR:r=1;break;case ro.GREYSCALE_ALPHA:r=2;break;case ro.TRUECOLOUR_ALPHA:r=4;break;case ro.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==I0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<n;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ro.GREYSCALE:case ro.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case ro.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ro.UNKNOWN:case ro.GREYSCALE_ALPHA:case ro.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=Y4(this),r=this.readUint8();if(r!==I0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:KD(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=Jy({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case Dp.NONE:break;case Dp.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)r.data[u+c]=0}break;case Dp.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,a=(o,u)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,f=(o*n.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(n.blendOp){case O0.SOURCE:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++)e.data[c+p]=n.data[f+p]}break;case O0.OVER:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++){const m=n.data[f+this._png.channels-1]/r,b=p%(this._png.channels-1)===0?1:n.data[f+p],j=Math.floor(m*b+(1-m)*e.data[c+p]);e.data[c+p]+=j}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==t5.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===F0.NO_INTERLACE)this._png.data=Jy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===F0.ADAM7)this._png.data=nI({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Dp.NONE,blendOp:O0.SOURCE,data:e}),this._inflator=new Zy,this._writingDataChunks=!1}}function xI(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var n5;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(n5||(n5={}));function yI(t,e){return new vI(t,e).decode()}var Mn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function M0(){Mn.console&&typeof Mn.console.log=="function"&&Mn.console.log.apply(Mn.console,arguments)}var rs={log:M0,warn:function(t){Mn.console&&(typeof Mn.console.warn=="function"?Mn.console.warn.apply(Mn.console,arguments):M0.call(null,arguments))},error:function(t){Mn.console&&(typeof Mn.console.error=="function"?Mn.console.error.apply(Mn.console,arguments):M0(t))}};function B0(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Fu(r.response,e,n)},r.onerror=function(){rs.error("could not download file")},r.send()}function r5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ip(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Fu=Mn.saveAs||((typeof window>"u"?"undefined":Zr(window))!=="object"||window!==Mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Mn.URL||Mn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?r5(a.href)?B0(t,e,n):Ip(a,a.target="_blank"):Ip(a)):(a.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ip(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(r5(t))B0(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Ip(r)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Zr(o)!=="object"&&(rs.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return B0(t,e,n);var a=t.type==="application/octet-stream",o=/constructor/i.test(Mn.HTMLElement)||Mn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Zr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},c.readAsDataURL(t)}else{var f=Mn.URL||Mn.webkitURL,p=f.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function X4(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,o=n[r].process,u=a.exec(t);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+c+f+p}}var Xp=Mn.atob.bind(Mn),s5=Mn.btoa.bind(Mn);function q0(t,e){var n=t[0],r=t[1],a=t[2],o=t[3];n=la(n,r,a,o,e[0],7,-680876936),o=la(o,n,r,a,e[1],12,-389564586),a=la(a,o,n,r,e[2],17,606105819),r=la(r,a,o,n,e[3],22,-1044525330),n=la(n,r,a,o,e[4],7,-176418897),o=la(o,n,r,a,e[5],12,1200080426),a=la(a,o,n,r,e[6],17,-1473231341),r=la(r,a,o,n,e[7],22,-45705983),n=la(n,r,a,o,e[8],7,1770035416),o=la(o,n,r,a,e[9],12,-1958414417),a=la(a,o,n,r,e[10],17,-42063),r=la(r,a,o,n,e[11],22,-1990404162),n=la(n,r,a,o,e[12],7,1804603682),o=la(o,n,r,a,e[13],12,-40341101),a=la(a,o,n,r,e[14],17,-1502002290),n=ca(n,r=la(r,a,o,n,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ca(o,n,r,a,e[6],9,-1069501632),a=ca(a,o,n,r,e[11],14,643717713),r=ca(r,a,o,n,e[0],20,-373897302),n=ca(n,r,a,o,e[5],5,-701558691),o=ca(o,n,r,a,e[10],9,38016083),a=ca(a,o,n,r,e[15],14,-660478335),r=ca(r,a,o,n,e[4],20,-405537848),n=ca(n,r,a,o,e[9],5,568446438),o=ca(o,n,r,a,e[14],9,-1019803690),a=ca(a,o,n,r,e[3],14,-187363961),r=ca(r,a,o,n,e[8],20,1163531501),n=ca(n,r,a,o,e[13],5,-1444681467),o=ca(o,n,r,a,e[2],9,-51403784),a=ca(a,o,n,r,e[7],14,1735328473),n=ua(n,r=ca(r,a,o,n,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ua(o,n,r,a,e[8],11,-2022574463),a=ua(a,o,n,r,e[11],16,1839030562),r=ua(r,a,o,n,e[14],23,-35309556),n=ua(n,r,a,o,e[1],4,-1530992060),o=ua(o,n,r,a,e[4],11,1272893353),a=ua(a,o,n,r,e[7],16,-155497632),r=ua(r,a,o,n,e[10],23,-1094730640),n=ua(n,r,a,o,e[13],4,681279174),o=ua(o,n,r,a,e[0],11,-358537222),a=ua(a,o,n,r,e[3],16,-722521979),r=ua(r,a,o,n,e[6],23,76029189),n=ua(n,r,a,o,e[9],4,-640364487),o=ua(o,n,r,a,e[12],11,-421815835),a=ua(a,o,n,r,e[15],16,530742520),n=da(n,r=ua(r,a,o,n,e[2],23,-995338651),a,o,e[0],6,-198630844),o=da(o,n,r,a,e[7],10,1126891415),a=da(a,o,n,r,e[14],15,-1416354905),r=da(r,a,o,n,e[5],21,-57434055),n=da(n,r,a,o,e[12],6,1700485571),o=da(o,n,r,a,e[3],10,-1894986606),a=da(a,o,n,r,e[10],15,-1051523),r=da(r,a,o,n,e[1],21,-2054922799),n=da(n,r,a,o,e[8],6,1873313359),o=da(o,n,r,a,e[15],10,-30611744),a=da(a,o,n,r,e[6],15,-1560198380),r=da(r,a,o,n,e[13],21,1309151649),n=da(n,r,a,o,e[4],6,-145523070),o=da(o,n,r,a,e[11],10,-1120210379),a=da(a,o,n,r,e[2],15,718787259),r=da(r,a,o,n,e[9],21,-343485551),t[0]=Xc(n,t[0]),t[1]=Xc(r,t[1]),t[2]=Xc(a,t[2]),t[3]=Xc(o,t[3])}function ug(t,e,n,r,a,o){return e=Xc(Xc(e,t),Xc(r,o)),Xc(e<<a|e>>>32-a,n)}function la(t,e,n,r,a,o,u){return ug(e&n|~e&r,t,e,a,o,u)}function ca(t,e,n,r,a,o,u){return ug(e&r|n&~r,t,e,a,o,u)}function ua(t,e,n,r,a,o,u){return ug(e^n^r,t,e,a,o,u)}function da(t,e,n,r,a,o,u){return ug(n^(e|~r),t,e,a,o,u)}function J4(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)q0(r,bI(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(q0(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,q0(r,a),r}function bI(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var i5="0123456789abcdef".split("");function wI(t){for(var e="",n=0;n<4;n++)e+=i5[t>>8*n+4&15]+i5[t>>8*n&15];return e}function NI(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function D1(t){return J4(t).map(NI).join("")}var SI=(function(t){for(var e=0;e<t.length;e++)t[e]=wI(t[e]);return t.join("")})(J4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xc(t,e){if(SI){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function I1(t,e){var n,r,a,o;if(t!==n){for(var u=(a=t,o=1+(256/t.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var p=0;for(f=0;f<256;f++){var m=c[f];p=(p+m+u.charCodeAt(f))%256,c[f]=c[p],c[p]=m}n=t,r=c}else c=r;var b=e.length,j=0,y=0,I="";for(f=0;f<b;f++)y=(y+(m=c[j=(j+1)%256]))%256,c[j]=c[y],c[y]=m,u=c[(c[j]+c[y])%256],I+=String.fromCharCode(e.charCodeAt(f)^u);return I}var a5={print:4,modify:8,copy:16,"annot-forms":32};function Dd(t,e,n,r){this.v=1,this.r=2;var a=192;t.forEach(function(c){if(a5.perm!==void 0)throw new Error("Invalid permission: "+c);a+=a5[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=D1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=I1(this.encryptionKey,this.padding)}function Id(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var a=t.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[r]}return e}function o5(t){if(Zr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!a],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[n]){var u=e[n][o];try{u[0].apply(t,r)}catch(c){Mn.console&&rs.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tm(t){if(!(this instanceof Tm))return new Tm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ej(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ou(t,e,n,r,a){if(!(this instanceof Ou))return new Ou(t,e,n,r,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ej.call(this,r,a)}function Md(t,e,n,r,a){if(!(this instanceof Md))return new Md(t,e,n,r,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ej.call(this,r,a)}function un(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,p="S",m=null;Zr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,a=t.format||a,o=t.compress||t.compressPdf||o,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),p=t.defaultPathOperation||"S"),u=t.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,j={},y={internal:{},__private__:{}};y.__private__.PubSub=o5;var I="1.3",S=y.__private__.getPdfVersion=function(){return I};y.__private__.setPdfVersion=function(w){I=w};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return P};var _=y.__private__.getPageFormat=function(w){return P[w]};a=a||"a4";var F="compat",v="advanced",q=F;function ee(){this.saveGraphicsState(),le(new on(jt,0,0,-jt,0,Ji()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),p="n",q=v}function ae(){this.restoreGraphicsState(),p="S",q=F}var W=y.__private__.combineFontStyleAndFontWeight=function(w,$){if(w=="bold"&&$=="normal"||w=="bold"&&$==400||w=="normal"&&$=="italic"||w=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(w=$==400||$==="normal"?w==="italic"?"italic":"normal":$!=700&&$!=="bold"||w!=="normal"?($==700?"bold":$)+""+w:"bold"),w};y.advancedAPI=function(w){var $=q===F;return $&&ee.call(this),typeof w!="function"||(w(this),$&&ae.call(this)),this},y.compatAPI=function(w){var $=q===v;return $&&ae.call(this),typeof w!="function"||(w(this),$&&ee.call(this)),this},y.isAdvancedAPI=function(){return q===v};var te,Q=function(w){if(q!==v)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ue=y.roundToPrecision=y.__private__.roundToPrecision=function(w,$){var pe=e||$;if(isNaN(w)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(pe).replace(/0+$/,"")};te=y.hpf=y.__private__.hpf=typeof f=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(w,f)}:f==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(w,16)};var O=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return ue(w,2)},R=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return ue(w,3)},z=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return q===F?w*jt:q===v?w:void 0},Y=function(w){return z((function($){return q===F?Ji()-$:q===v?$:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var Ce,Ae="00000000000000000000000000000000",Pe=y.__private__.getFileId=function(){return Ae},ce=y.__private__.setFileId=function(w){return Ae=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():Ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Bt=new Dd(m.userPermissions,m.userPassword,m.ownerPassword,Ae)),Ae};y.setFileId=function(w){return ce(w),this},y.getFileId=function(){return Pe()};var ge=y.__private__.convertDateToPDFDate=function(w){var $=w.getTimezoneOffset(),pe=$<0?"+":"-",ke=Math.floor(Math.abs($/60)),Be=Math.abs($%60),rt=[pe,ne(ke),"'",ne(Be),"'"].join("");return["D:",w.getFullYear(),ne(w.getMonth()+1),ne(w.getDate()),ne(w.getHours()),ne(w.getMinutes()),ne(w.getSeconds()),rt].join("")},De=y.__private__.convertPDFDateToDate=function(w){var $=parseInt(w.substr(2,4),10),pe=parseInt(w.substr(6,2),10)-1,ke=parseInt(w.substr(8,2),10),Be=parseInt(w.substr(10,2),10),rt=parseInt(w.substr(12,2),10),ht=parseInt(w.substr(14,2),10);return new Date($,pe,ke,Be,rt,ht,0)},se=y.__private__.setCreationDate=function(w){var $;if(w===void 0&&(w=new Date),w instanceof Date)$=ge(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=w}return Ce=$},M=y.__private__.getCreationDate=function(w){var $=Ce;return w==="jsDate"&&($=De(Ce)),$};y.setCreationDate=function(w){return se(w),this},y.getCreationDate=function(w){return M(w)};var L,ne=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},me=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ye=0,be=[],Re=[],Ie=0,Me=[],Ze=[],ft=!1,mt=Re;y.__private__.setCustomOutputDestination=function(w){ft=!0,mt=w};var Ft=function(w){ft||(mt=w)};y.__private__.resetCustomOutputDestination=function(){ft=!1,mt=Re};var le=y.__private__.out=function(w){return w=w.toString(),Ie+=w.length+1,mt.push(w),mt},gt=y.__private__.write=function(w){return le(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},xe=y.__private__.getArrayBuffer=function(w){for(var $=w.length,pe=new ArrayBuffer($),ke=new Uint8Array(pe);$--;)ke[$]=w.charCodeAt($);return pe},X=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return X};var B=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return B=q===v?w/jt:w,this};var ve,re=y.__private__.getFontSize=y.getFontSize=function(){return q===F?B:B*jt},D=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return D=w,this},y.__private__.getR2L=y.getR2L=function(){return D};var H,je=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))ve=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');ve=w}else ve=parseInt(w,10)};y.__private__.getZoomMode=function(){return ve};var Ne,Te=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');H=w};y.__private__.getPageMode=function(){return H};var $e=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ne=w};y.__private__.getLayoutMode=function(){return Ne},y.__private__.setDisplayMode=y.setDisplayMode=function(w,$,pe){return je(w),$e($),Te(pe),this};var st={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(st).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return st[w]},y.__private__.getDocumentProperties=function(){return st},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var $ in st)st.hasOwnProperty($)&&w[$]&&(st[$]=w[$]);return this},y.__private__.setDocumentProperty=function(w,$){if(Object.keys(st).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return st[w]=$};var ct,jt,Pt,pr,yn,Gt={},Ut={},tn=[],Ge={},at={},Xe={},an={},sr=null,gn=0,Jt=[],Dn=new o5(y),ys=t.hotfixes||[],ir={},Nr={},xr=[],on=function w($,pe,ke,Be,rt,ht){if(!(this instanceof w))return new w($,pe,ke,Be,rt,ht);isNaN($)&&($=1),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=0),isNaN(Be)&&(Be=1),isNaN(rt)&&(rt=0),isNaN(ht)&&(ht=0),this._matrix=[$,pe,ke,Be,rt,ht]};Object.defineProperty(on.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(on.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(on.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(on.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(on.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(on.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(on.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(on.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(on.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(on.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(on.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(on.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(on.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(on.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(on.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(on.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),on.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(w)},on.prototype.multiply=function(w){var $=w.sx*this.sx+w.shy*this.shx,pe=w.sx*this.shy+w.shy*this.sy,ke=w.shx*this.sx+w.sy*this.shx,Be=w.shx*this.shy+w.sy*this.sy,rt=w.tx*this.sx+w.ty*this.shx+this.tx,ht=w.tx*this.shy+w.ty*this.sy+this.ty;return new on($,pe,ke,Be,rt,ht)},on.prototype.decompose=function(){var w=this.sx,$=this.shy,pe=this.shx,ke=this.sy,Be=this.tx,rt=this.ty,ht=Math.sqrt(w*w+$*$),ot=(w/=ht)*pe+($/=ht)*ke;pe-=w*ot,ke-=$*ot;var At=Math.sqrt(pe*pe+ke*ke);return ot/=At,w*(ke/=At)<$*(pe/=At)&&(w=-w,$=-$,ot=-ot,ht=-ht),{scale:new on(ht,0,0,At,0,0),translate:new on(1,0,0,1,Be,rt),rotate:new on(w,$,-$,w,0,0),skew:new on(1,0,ot,1,0,0)}},on.prototype.toString=function(w){return this.join(" ")},on.prototype.inversed=function(){var w=this.sx,$=this.shy,pe=this.shx,ke=this.sy,Be=this.tx,rt=this.ty,ht=1/(w*ke-$*pe),ot=ke*ht,At=-$*ht,Tt=-pe*ht,Dt=w*ht;return new on(ot,At,Tt,Dt,-ot*Be-Tt*rt,-At*Be-Dt*rt)},on.prototype.applyToPoint=function(w){var $=w.x*this.sx+w.y*this.shx+this.tx,pe=w.x*this.shy+w.y*this.sy+this.ty;return new Xi($,pe)},on.prototype.applyToRectangle=function(w){var $=this.applyToPoint(w),pe=this.applyToPoint(new Xi(w.x+w.w,w.y+w.h));return new Ha($.x,$.y,pe.x-$.x,pe.y-$.y)},on.prototype.clone=function(){var w=this.sx,$=this.shy,pe=this.shx,ke=this.sy,Be=this.tx,rt=this.ty;return new on(w,$,pe,ke,Be,rt)},y.Matrix=on;var As=y.matrixMult=function(w,$){return $.multiply(w)},Us=new on(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Us;var fs=function(w,$){if(!at[w]){var pe=($ instanceof Ou?"Sh":"P")+(Object.keys(Ge).length+1).toString(10);$.id=pe,at[w]=pe,Ge[pe]=$,Dn.publish("addPattern",$)}};y.ShadingPattern=Ou,y.TilingPattern=Md,y.addShadingPattern=function(w,$){return Q("addShadingPattern()"),fs(w,$),this},y.beginTilingPattern=function(w){Q("beginTilingPattern()"),ms(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,$){Q("endTilingPattern()"),$.stream=Ze[L].join(`
`),fs(w,$),Dn.publish("endTilingPattern",$),xr.pop().restore()};var Ps,lr=y.__private__.newObject=function(){var w=Fr();return yr(w,!0),w},Fr=y.__private__.newObjectDeferred=function(){return ye++,be[ye]=function(){return Ie},ye},yr=function(w,$){return $=typeof $=="boolean"&&$,be[w]=Ie,$&&le(w+" 0 obj"),w},ks=y.__private__.newAdditionalObject=function(){var w={objId:Fr(),content:""};return Me.push(w),w},Jr=Fr(),Tr=Fr(),fi=y.__private__.decodeColorString=function(w){var $=w.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var pe=parseFloat($[0]);$=[pe,pe,pe,"r"]}for(var ke="#",Be=0;Be<3;Be++)ke+=("0"+Math.floor(255*parseFloat($[Be])).toString(16)).slice(-2);return ke},es=y.__private__.encodeColorString=function(w){var $;typeof w=="string"&&(w={ch1:w});var pe=w.ch1,ke=w.ch2,Be=w.ch3,rt=w.ch4,ht=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var ot=new X4(pe);if(ot.ok)pe=ot.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var At=parseInt(pe.substr(1),16);pe=At>>16&255,ke=At>>8&255,Be=255&At}if(ke===void 0||rt===void 0&&pe===ke&&ke===Be)$=typeof pe=="string"?pe+" "+ht[0]:w.precision===2?O(pe/255)+" "+ht[0]:R(pe/255)+" "+ht[0];else if(rt===void 0||Zr(rt)==="object"){if(rt&&!isNaN(rt.a)&&rt.a===0)return["1.","1.","1.",ht[1]].join(" ");$=typeof pe=="string"?[pe,ke,Be,ht[1]].join(" "):w.precision===2?[O(pe/255),O(ke/255),O(Be/255),ht[1]].join(" "):[R(pe/255),R(ke/255),R(Be/255),ht[1]].join(" ")}else $=typeof pe=="string"?[pe,ke,Be,rt,ht[2]].join(" "):w.precision===2?[O(pe),O(ke),O(Be),O(rt),ht[2]].join(" "):[R(pe),R(ke),R(Be),R(rt),ht[2]].join(" ");return $},Ts=y.__private__.getFilters=function(){return u},as=y.__private__.putStream=function(w){var $=(w=w||{}).data||"",pe=w.filters||Ts(),ke=w.alreadyAppliedFilters||[],Be=w.addLength1||!1,rt=$.length,ht=w.objectId,ot=function(Sr){return Sr};if(m!==null&&ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(ot=Bt.encryptor(ht,0));var At={};pe===!0&&(pe=["FlateEncode"]);var Tt=w.additionalKeyValues||[],Dt=(At=un.API.processDataByFilters!==void 0?un.API.processDataByFilters($,pe):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(At.data.length!==0&&(Tt.push({key:"Length",value:At.data.length}),Be===!0&&Tt.push({key:"Length1",value:rt})),Dt.length!=0)if(Dt.split("/").length-1==1)Tt.push({key:"Filter",value:Dt});else{Tt.push({key:"Filter",value:"["+Dt+"]"});for(var hn=0;hn<Tt.length;hn+=1)if(Tt[hn].key==="DecodeParms"){for(var Yn=[],br=0;br<At.reverseChain.split("/").length-1;br+=1)Yn.push("null");Yn.push(Tt[hn].value),Tt[hn].value="["+Yn.join(" ")+"]"}}le("<<");for(var Qn=0;Qn<Tt.length;Qn++)le("/"+Tt[Qn].key+" "+Tt[Qn].value);le(">>"),At.data.length!==0&&(le("stream"),le(ot(At.data)),le("endstream"))},zs=y.__private__.putPage=function(w){var $=w.number,pe=w.data,ke=w.objId,Be=w.contentsObjId;yr(ke,!0),le("<</Type /Page"),le("/Parent "+w.rootDictionaryObjId+" 0 R"),le("/Resources "+w.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(te(w.mediaBox.bottomLeftX))+" "+parseFloat(te(w.mediaBox.bottomLeftY))+" "+te(w.mediaBox.topRightX)+" "+te(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&le("/CropBox ["+te(w.cropBox.bottomLeftX)+" "+te(w.cropBox.bottomLeftY)+" "+te(w.cropBox.topRightX)+" "+te(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&le("/BleedBox ["+te(w.bleedBox.bottomLeftX)+" "+te(w.bleedBox.bottomLeftY)+" "+te(w.bleedBox.topRightX)+" "+te(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&le("/TrimBox ["+te(w.trimBox.bottomLeftX)+" "+te(w.trimBox.bottomLeftY)+" "+te(w.trimBox.topRightX)+" "+te(w.trimBox.topRightY)+"]"),w.artBox!==null&&le("/ArtBox ["+te(w.artBox.bottomLeftX)+" "+te(w.artBox.bottomLeftY)+" "+te(w.artBox.topRightX)+" "+te(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&le("/UserUnit "+w.userUnit),Dn.publish("putPage",{objId:ke,pageContext:Jt[$],pageNumber:$,page:pe}),le("/Contents "+Be+" 0 R"),le(">>"),le("endobj");var rt=pe.join(`
`);return q===v&&(rt+=`
Q`),yr(Be,!0),as({data:rt,filters:Ts(),objectId:Be}),le("endobj"),ke},mr=y.__private__.putPages=function(){var w,$,pe=[];for(w=1;w<=gn;w++)Jt[w].objId=Fr(),Jt[w].contentsObjId=Fr();for(w=1;w<=gn;w++)pe.push(zs({number:w,data:Ze[w],objId:Jt[w].objId,contentsObjId:Jt[w].contentsObjId,mediaBox:Jt[w].mediaBox,cropBox:Jt[w].cropBox,bleedBox:Jt[w].bleedBox,trimBox:Jt[w].trimBox,artBox:Jt[w].artBox,userUnit:Jt[w].userUnit,rootDictionaryObjId:Jr,resourceDictionaryObjId:Tr}));yr(Jr,!0),le("<</Type /Pages");var ke="/Kids [";for($=0;$<gn;$++)ke+=pe[$]+" 0 R ";le(ke+"]"),le("/Count "+gn),le(">>"),le("endobj"),Dn.publish("postPutPages")},hs=function(w){Dn.publish("putFont",{font:w,out:le,newObject:lr,putStream:as}),w.isAlreadyPutted!==!0&&(w.objectNumber=lr(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Id(w.postScriptName)),le("/Subtype /Type1"),typeof w.encoding=="string"&&le("/Encoding /"+w.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Xs=function(w){w.objectNumber=lr();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[te(w.x),te(w.y),te(w.x+w.width),te(w.y+w.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var pe=w.pages[1].join(`
`);as({data:pe,additionalKeyValues:$,objectId:w.objectNumber}),le("endobj")},Qi=function(w,$){$||($=21);var pe=lr(),ke=(function(ht,ot){var At,Tt=[],Dt=1/(ot-1);for(At=0;At<1;At+=Dt)Tt.push(At);if(Tt.push(1),ht[0].offset!=0){var hn={offset:0,color:ht[0].color};ht.unshift(hn)}if(ht[ht.length-1].offset!=1){var Yn={offset:1,color:ht[ht.length-1].color};ht.push(Yn)}for(var br="",Qn=0,Sr=0;Sr<Tt.length;Sr++){for(At=Tt[Sr];At>ht[Qn+1].offset;)Qn++;var dr=ht[Qn].offset,Mr=(At-dr)/(ht[Qn+1].offset-dr),Ti=ht[Qn].color,bs=ht[Qn+1].color;br+=me(Math.round((1-Mr)*Ti[0]+Mr*bs[0]).toString(16))+me(Math.round((1-Mr)*Ti[1]+Mr*bs[1]).toString(16))+me(Math.round((1-Mr)*Ti[2]+Mr*bs[2]).toString(16))}return br.trim()})(w.colors,$),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+$+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),as({data:ke,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),le("endobj"),w.objectNumber=lr(),le("<< /ShadingType "+w.type),le("/ColorSpace /DeviceRGB");var rt="/Coords ["+te(parseFloat(w.coords[0]))+" "+te(parseFloat(w.coords[1]))+" ";w.type===2?rt+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3])):rt+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3]))+" "+te(parseFloat(w.coords[4]))+" "+te(parseFloat(w.coords[5])),le(rt+="]"),w.matrix&&le("/Matrix ["+w.matrix.toString()+"]"),le("/Function "+pe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},qi=function(w,$){var pe=Fr(),ke=lr();$.push({resourcesOid:pe,objectOid:ke}),w.objectNumber=ke;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+w.boundingBox.map(te).join(" ")+"]"}),Be.push({key:"XStep",value:te(w.xStep)}),Be.push({key:"YStep",value:te(w.yStep)}),Be.push({key:"Resources",value:pe+" 0 R"}),w.matrix&&Be.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),as({data:w.stream,additionalKeyValues:Be,objectId:w.objectNumber}),le("endobj")},ki=function(w){for(var $ in w.objectNumber=lr(),le("<<"),w)switch($){case"opacity":le("/ca "+O(w[$]));break;case"stroke-opacity":le("/CA "+O(w[$]))}le(">>"),le("endobj")},Un=function(w){yr(w.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var $ in le("/Font <<"),Gt)Gt.hasOwnProperty($)&&(b===!1||b===!0&&j.hasOwnProperty($))&&le("/"+$+" "+Gt[$].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(Ge).length>0){for(var $ in le("/Shading <<"),Ge)Ge.hasOwnProperty($)&&Ge[$]instanceof Ou&&Ge[$].objectNumber>=0&&le("/"+$+" "+Ge[$].objectNumber+" 0 R");Dn.publish("putShadingPatternDict"),le(">>")}})(),(function($){if(Object.keys(Ge).length>0){for(var pe in le("/Pattern <<"),Ge)Ge.hasOwnProperty(pe)&&Ge[pe]instanceof y.TilingPattern&&Ge[pe].objectNumber>=0&&Ge[pe].objectNumber<$&&le("/"+pe+" "+Ge[pe].objectNumber+" 0 R");Dn.publish("putTilingPatternDict"),le(">>")}})(w.objectOid),(function(){if(Object.keys(Xe).length>0){var $;for($ in le("/ExtGState <<"),Xe)Xe.hasOwnProperty($)&&Xe[$].objectNumber>=0&&le("/"+$+" "+Xe[$].objectNumber+" 0 R");Dn.publish("putGStateDict"),le(">>")}})(),(function(){for(var $ in le("/XObject <<"),ir)ir.hasOwnProperty($)&&ir[$].objectNumber>=0&&le("/"+$+" "+ir[$].objectNumber+" 0 R");Dn.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},bi=function(w){Ut[w.fontName]=Ut[w.fontName]||{},Ut[w.fontName][w.fontStyle]=w.id},fn=function(w,$,pe,ke,Be){var rt={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:w,fontName:$,fontStyle:pe,encoding:ke,isStandardFont:Be||!1,metadata:{}};return Dn.publish("addFont",{font:rt,instance:this}),Gt[rt.id]=rt,bi(rt),rt.id},In=y.__private__.pdfEscape=y.pdfEscape=function(w,$){return(function(pe,ke){var Be,rt,ht,ot,At,Tt,Dt,hn,Yn;if(ht=(ke=ke||{}).sourceEncoding||"Unicode",At=ke.outputEncoding,(ke.autoencode||At)&&Gt[ct].metadata&&Gt[ct].metadata[ht]&&Gt[ct].metadata[ht].encoding&&(ot=Gt[ct].metadata[ht].encoding,!At&&Gt[ct].encoding&&(At=Gt[ct].encoding),!At&&ot.codePages&&(At=ot.codePages[0]),typeof At=="string"&&(At=ot[At]),At)){for(Dt=!1,Tt=[],Be=0,rt=pe.length;Be<rt;Be++)(hn=At[pe.charCodeAt(Be)])?Tt.push(String.fromCharCode(hn)):Tt.push(pe[Be]),Tt[Be].charCodeAt(0)>>8&&(Dt=!0);pe=Tt.join("")}for(Be=pe.length;Dt===void 0&&Be!==0;)pe.charCodeAt(Be-1)>>8&&(Dt=!0),Be--;if(!Dt)return pe;for(Tt=ke.noBOM?[]:[254,255],Be=0,rt=pe.length;Be<rt;Be++){if((Yn=(hn=pe.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+pe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tt.push(Yn),Tt.push(hn-(Yn<<8))}return String.fromCharCode.apply(void 0,Tt)})(w,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nn=y.__private__.beginPage=function(w){Ze[++gn]=[],Jt[gn]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},vt(gn),Ft(Ze[L])},Kt=function(w,$){var pe,ke,Be;switch(n=$||n,typeof w=="string"&&(pe=_(w.toLowerCase()),Array.isArray(pe)&&(ke=pe[0],Be=pe[1])),Array.isArray(w)&&(ke=w[0]*jt,Be=w[1]*jt),isNaN(ke)&&(ke=a[0],Be=a[1]),(ke>14400||Be>14400)&&(rs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Be=Math.min(14400,Be)),a=[ke,Be],n.substr(0,1)){case"l":Be>ke&&(a=[Be,ke]);break;case"p":ke>Be&&(a=[Be,ke])}Nn(a),vn(ts),le(Yi),zl!==0&&le(zl+" J"),ll!==0&&le(ll+" j"),Dn.publish("addPage",{pageNumber:gn})},Fn=function(w){w>0&&w<=gn&&(Ze.splice(w,1),Jt.splice(w,1),gn--,L>gn&&(L=gn),this.setPage(L))},vt=function(w){w>0&&w<=gn&&(L=w)},Ke=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ze.length-1},it=function(w,$,pe){var ke,Be=void 0;return pe=pe||{},w=w!==void 0?w:Gt[ct].fontName,$=$!==void 0?$:Gt[ct].fontStyle,ke=w.toLowerCase(),Ut[ke]!==void 0&&Ut[ke][$]!==void 0?Be=Ut[ke][$]:Ut[w]!==void 0&&Ut[w][$]!==void 0?Be=Ut[w][$]:pe.disableWarning===!1&&rs.warn("Unable to look up font label for font '"+w+"', '"+$+"'. Refer to getFontList() for available fonts."),Be||pe.noFallback||(Be=Ut.times[$])==null&&(Be=Ut.times.normal),Be},Qe=y.__private__.putInfo=function(){var w=lr(),$=function(ke){return ke};for(var pe in m!==null&&($=Bt.encryptor(w,0)),le("<<"),le("/Producer ("+In($("jsPDF "+un.version))+")"),st)st.hasOwnProperty(pe)&&st[pe]&&le("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+In($(st[pe]))+")");le("/CreationDate ("+In($(Ce))+")"),le(">>"),le("endobj")},ut=y.__private__.putCatalog=function(w){var $=(w=w||{}).rootDictionaryObjId||Jr;switch(lr(),le("<<"),le("/Type /Catalog"),le("/Pages "+$+" 0 R"),ve||(ve="fullwidth"),ve){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+ve;pe.substr(pe.length-1)==="%"&&(ve=parseInt(ve)/100),typeof ve=="number"&&le("/OpenAction [3 0 R /XYZ null null "+O(ve)+"]")}switch(Ne||(Ne="continuous"),Ne){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}H&&le("/PageMode /"+H),Dn.publish("putCatalog"),le(">>"),le("endobj")},Lt=y.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(ye+1)),le("/Root "+ye+" 0 R"),le("/Info "+(ye-1)+" 0 R"),m!==null&&le("/Encrypt "+Bt.oid+" 0 R"),le("/ID [ <"+Ae+"> <"+Ae+"> ]"),le(">>")},wt=y.__private__.putHeader=function(){le("%PDF-"+I),le("%")},Ot=y.__private__.putXRef=function(){var w="0000000000";le("xref"),le("0 "+(ye+1)),le("0000000000 65535 f ");for(var $=1;$<=ye;$++)typeof be[$]=="function"?le((w+be[$]()).slice(-10)+" 00000 n "):be[$]!==void 0?le((w+be[$]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Nt=y.__private__.buildDocument=function(){var w;ye=0,Ie=0,Re=[],be=[],Me=[],Jr=Fr(),Tr=Fr(),Ft(Re),Dn.publish("buildDocument"),wt(),mr(),(function(){Dn.publish("putAdditionalObjects");for(var pe=0;pe<Me.length;pe++){var ke=Me[pe];yr(ke.objId,!0),le(ke.content),le("endobj")}Dn.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var pe in Gt)Gt.hasOwnProperty(pe)&&(b===!1||b===!0&&j.hasOwnProperty(pe))&&hs(Gt[pe])})(),(function(){var pe;for(pe in Xe)Xe.hasOwnProperty(pe)&&ki(Xe[pe])})(),(function(){for(var pe in ir)ir.hasOwnProperty(pe)&&Xs(ir[pe])})(),(function(pe){var ke;for(ke in Ge)Ge.hasOwnProperty(ke)&&(Ge[ke]instanceof Ou?Qi(Ge[ke]):Ge[ke]instanceof Md&&qi(Ge[ke],pe))})(w),Dn.publish("putResources"),w.forEach(Un),Un({resourcesOid:Tr,objectOid:Number.MAX_SAFE_INTEGER}),Dn.publish("postPutResources"),m!==null&&(Bt.oid=lr(),le("<<"),le("/Filter /Standard"),le("/V "+Bt.v),le("/R "+Bt.r),le("/U <"+Bt.toHexString(Bt.U)+">"),le("/O <"+Bt.toHexString(Bt.O)+">"),le("/P "+Bt.P),le(">>"),le("endobj")),Qe(),ut();var $=Ie;return Ot(),Lt(),le("startxref"),le(""+$),le("%%EOF"),Ft(Ze[L]),Re.join(`
`)},kt=y.__private__.getBlob=function(w){return new Blob([xe(w)],{type:"application/pdf"})},Mt=y.output=y.__private__.output=(Ps=function(w,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",w){case void 0:return Nt();case"save":y.save($.filename);break;case"arraybuffer":return xe(Nt());case"blob":return kt(Nt());case"bloburi":case"bloburl":if(Mn.URL!==void 0&&typeof Mn.URL.createObjectURL=="function")return Mn.URL&&Mn.URL.createObjectURL(kt(Nt()))||void 0;rs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",ke=Nt();try{pe=s5(ke)}catch{pe=s5(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+$.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",rt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Be=$.pdfObjectUrl,rt="");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+rt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",ot=Mn.open();return ot!==null&&ot.document.write(ht),ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',Tt=Mn.open();if(Tt!==null){Tt.document.write(At);var Dt=this;Tt.document.documentElement.querySelector("#pdfViewer").onload=function(){Tt.document.title=$.filename,Tt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Dt.output("bloburl"))}}return Tt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',Yn=Mn.open();if(Yn!==null&&(Yn.document.write(hn),Yn.document.title=$.filename),Yn||typeof safari>"u")return Yn;break;case"datauri":case"dataurl":return Mn.document.location.href=this.output("datauristring",$);default:return null}},Ps.foo=function(){try{return Ps.apply(this,arguments)}catch(pe){var w=pe.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var $="Error in function "+w.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Mn.console)throw new Error($);Mn.console.error($,pe),Mn.alert&&alert($)}},Ps.foo.bar=Ps,Ps.foo),$t=function(w){return Array.isArray(ys)===!0&&ys.indexOf(w)>-1};switch(r){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=$t("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);jt=r}var Bt=null;se(),ce();var Qt=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[w].objId,pageNumber:w,pageContext:Jt[w]}},bn=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Jt)if(Jt[$].objId===w)break;return Qt($)},Er=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Jt[L].objId,pageNumber:L,pageContext:Jt[L]}};y.addPage=function(){return Kt.apply(this,arguments),this},y.setPage=function(){return vt.apply(this,arguments),Ft.call(this,Ze[L]),this},y.insertPage=function(w){return this.addPage(),this.movePage(L,w),this},y.movePage=function(w,$){var pe,ke;if(w>$){pe=Ze[w],ke=Jt[w];for(var Be=w;Be>$;Be--)Ze[Be]=Ze[Be-1],Jt[Be]=Jt[Be-1];Ze[$]=pe,Jt[$]=ke,this.setPage($)}else if(w<$){pe=Ze[w],ke=Jt[w];for(var rt=w;rt<$;rt++)Ze[rt]=Ze[rt+1],Jt[rt]=Jt[rt+1];Ze[$]=pe,Jt[$]=ke,this.setPage($)}return this},y.deletePage=function(){return Fn.apply(this,arguments),this},y.__private__.text=y.text=function(w,$,pe,ke,Be){var rt,ht,ot,At,Tt,Dt,hn,Yn,br,Qn=(ke=ke||{}).scope||this;if(typeof w=="number"&&typeof $=="number"&&(typeof pe=="string"||Array.isArray(pe))){var Sr=pe;pe=$,$=w,w=Sr}if(arguments[3]instanceof on==0?(ot=arguments[4],At=arguments[5],Zr(hn=arguments[3])==="object"&&hn!==null||(typeof ot=="string"&&(At=ot,ot=null),typeof hn=="string"&&(At=hn,hn=null),typeof hn=="number"&&(ot=hn,hn=null),ke={flags:hn,angle:ot,align:At})):(Q("The transform parameter of text() with a Matrix value"),br=Be),isNaN($)||isNaN(pe)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Qn;var dr,Mr="",Ti=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:Or,bs=Qn.internal.scaleFactor;function Ht(Cr){return Cr=Cr.split("	").join(Array(ke.TabLen||9).join(" ")),In(Cr,hn)}function Ui(Cr){for(var Br,Ns=Cr.concat(),Hs=[],Qa=Ns.length;Qa--;)typeof(Br=Ns.shift())=="string"?Hs.push(Br):Array.isArray(Cr)&&(Br.length===1||Br[1]===void 0&&Br[2]===void 0)?Hs.push(Br[0]):Hs.push([Br[0],Br[1],Br[2]]);return Hs}function La(Cr,Br){var Ns;if(typeof Cr=="string")Ns=Br(Cr)[0];else if(Array.isArray(Cr)){for(var Hs,Qa,vu=Cr.concat(),Sc=[],Ro=vu.length;Ro--;)typeof(Hs=vu.shift())=="string"?Sc.push(Br(Hs)[0]):Array.isArray(Hs)&&typeof Hs[0]=="string"&&(Qa=Br(Hs[0],Hs[1],Hs[2]),Sc.push([Qa[0],Qa[1],Qa[2]]));Ns=Sc}return Ns}var ho=!1,Po=!0;if(typeof w=="string")ho=!0;else if(Array.isArray(w)){var fl=w.concat();ht=[];for(var hl,Si=fl.length;Si--;)(typeof(hl=fl.shift())!="string"||Array.isArray(hl)&&typeof hl[0]!="string")&&(Po=!1);ho=Po}if(ho===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var $l=B/Qn.internal.scaleFactor,Vl=$l*(Ti-1);switch(ke.baseline){case"bottom":pe-=Vl;break;case"top":pe+=$l-Vl;break;case"hanging":pe+=$l-2*Vl;break;case"middle":pe+=$l/2-Vl}if((Dt=ke.maxWidth||0)>0&&(typeof w=="string"?w=Qn.splitTextToSize(w,Dt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Cr,Br){return Cr.concat(Qn.splitTextToSize(Br,Dt))},[]))),rt={text:w,x:$,y:pe,options:ke,mutex:{pdfEscape:In,activeFontKey:ct,fonts:Gt,activeFontSize:B}},Dn.publish("preProcessText",rt),w=rt.text,ot=(ke=rt.options).angle,br instanceof on==0&&ot&&typeof ot=="number"){ot*=Math.PI/180,ke.rotationDirection===0&&(ot=-ot),q===v&&(ot=-ot);var mu=Math.cos(ot),gu=Math.sin(ot);br=new on(mu,gu,-gu,mu,0,0)}else ot&&ot instanceof on&&(br=ot);q!==v||br||(br=Us),(Tt=ke.charSpace||ps)!==void 0&&(Mr+=te(z(Tt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yn=ke.horizontalScale)!==void 0&&(Mr+=te(100*Yn)+` Tz
`),ke.lang;var zi=-1,Ga=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,po=Qn.internal.getCurrentPageInfo().pageContext;switch(Ga){case 0:case!1:case"fill":zi=0;break;case 1:case!0:case"stroke":zi=1;break;case 2:case"fillThenStroke":zi=2;break;case 3:case"invisible":zi=3;break;case 4:case"fillAndAddForClipping":zi=4;break;case 5:case"strokeAndAddPathForClipping":zi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zi=6;break;case 7:case"addToPathForClipping":zi=7}var nd=po.usedRenderingMode!==void 0?po.usedRenderingMode:-1;zi!==-1?Mr+=zi+` Tr
`:nd!==-1&&(Mr+=`0 Tr
`),zi!==-1&&(po.usedRenderingMode=zi),At=ke.align||"left";var va,pl=B*Ti,yc=Qn.internal.pageSize.getWidth(),bc=Gt[ct];Tt=ke.charSpace||ps,Dt=ke.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var ko=[],Ra=function(Cr){return Qn.getStringUnitWidth(Cr,{font:bc,charSpace:Tt,fontSize:B,doKerning:!1})*B/bs};if(Object.prototype.toString.call(w)==="[object Array]"){var xa;ht=Ui(w),At!=="left"&&(va=ht.map(Ra));var ya,ml=0;if(At==="right"){$-=va[0],w=[],Si=ht.length;for(var mo=0;mo<Si;mo++)mo===0?(ya=wi($),xa=ga(pe)):(ya=z(ml-va[mo]),xa=-pl),w.push([ht[mo],ya,xa]),ml=va[mo]}else if(At==="center"){$-=va[0]/2,w=[],Si=ht.length;for(var To=0;To<Si;To++)To===0?(ya=wi($),xa=ga(pe)):(ya=z((ml-va[To])/2),xa=-pl),w.push([ht[To],ya,xa]),ml=va[To]}else if(At==="left"){w=[],Si=ht.length;for(var Eo=0;Eo<Si;Eo++)w.push(ht[Eo])}else if(At==="justify"&&bc.encoding==="Identity-H"){w=[],Si=ht.length,Dt=Dt!==0?Dt:yc;for(var go=0,Ls=0;Ls<Si;Ls++)if(xa=Ls===0?ga(pe):-pl,ya=Ls===0?wi($):go,Ls<Si-1){var Hl=z((Dt-va[Ls])/(ht[Ls].split(" ").length-1)),vo=ht[Ls].split(" ");w.push([vo[0]+" ",ya,xa]),go=0;for(var Ka=1;Ka<vo.length;Ka++){var Wl=(Ra(vo[Ka-1]+" "+vo[Ka])-Ra(vo[Ka]))*bs+Hl;Ka==vo.length-1?w.push([vo[Ka],Wl,0]):w.push([vo[Ka]+" ",Wl,0]),go-=Wl}}else w.push([ht[Ls],ya,xa]);w.push(["",go,0])}else{if(At!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Si=ht.length,Dt=Dt!==0?Dt:yc,Ls=0;Ls<Si;Ls++){xa=Ls===0?ga(pe):-pl,ya=Ls===0?wi($):0;var Gl=ht[Ls].split(" ").length-1,wc=Gl>0?(Dt-va[Ls])/Gl:0;Ls<Si-1?ko.push(te(z(wc))):ko.push(0),w.push([ht[Ls],ya,xa])}}}(typeof ke.R2L=="boolean"?ke.R2L:D)===!0&&(w=La(w,function(Cr,Br,Ns){return[Cr.split("").reverse().join(""),Br,Ns]})),rt={text:w,x:$,y:pe,options:ke,mutex:{pdfEscape:In,activeFontKey:ct,fonts:Gt,activeFontSize:B}},Dn.publish("postProcessText",rt),w=rt.text,dr=rt.mutex.isHex||!1;var Nc=Gt[ct].encoding;Nc!=="WinAnsiEncoding"&&Nc!=="StandardEncoding"||(w=La(w,function(Cr,Br,Ns){return[Ht(Cr),Br,Ns]})),ht=Ui(w),w=[];for(var Lo,gl,vl,Kl=Array.isArray(ht[0])?1:0,xl="",Ql=function(Cr,Br,Ns){var Hs="";return Ns instanceof on?(Ns=typeof ke.angle=="number"?As(Ns,new on(1,0,0,1,Cr,Br)):As(new on(1,0,0,1,Cr,Br),Ns),q===v&&(Ns=As(new on(1,0,0,-1,0,0),Ns)),Hs=Ns.join(" ")+` Tm
`):Hs=te(Cr)+" "+te(Br)+` Td
`,Hs},ws=0;ws<ht.length;ws++){switch(xl="",Kl){case 1:vl=(dr?"<":"(")+ht[ws][0]+(dr?">":")"),Lo=parseFloat(ht[ws][1]),gl=parseFloat(ht[ws][2]);break;case 0:vl=(dr?"<":"(")+ht[ws]+(dr?">":")"),Lo=wi($),gl=ga(pe)}ko!==void 0&&ko[ws]!==void 0&&(xl=ko[ws]+` Tw
`),ws===0?w.push(xl+Ql(Lo,gl,br)+vl):Kl===0?w.push(xl+vl):Kl===1&&w.push(xl+Ql(Lo,gl,br)+vl)}w=Kl===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var ea=`BT
/`;return ea+=ct+" "+B+` Tf
`,ea+=te(B*Ti)+` TL
`,ea+=Hr+`
`,ea+=Mr,ea+=w,le(ea+="ET"),j[ct]=!0,Qn};var kn=y.__private__.clip=y.clip=function(w){return le(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return kn("evenodd")},y.__private__.discardPath=y.discardPath=function(){return le("n"),this};var An=y.__private__.isValidStyle=function(w){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&($=!0),$};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return An(w)&&(p=w),this};var ln=y.__private__.getStyle=y.getStyle=function(w){var $=p;switch(w){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=w}return $},E=y.close=function(){return le("h"),this};y.stroke=function(){return le("S"),this},y.fill=function(w){return oe("f",w),this},y.fillEvenOdd=function(w){return oe("f*",w),this},y.fillStroke=function(w){return oe("B",w),this},y.fillStrokeEvenOdd=function(w){return oe("B*",w),this};var oe=function(w,$){Zr($)==="object"?we($,w):le(w)},he=function(w){w===null||q===v&&w===void 0||(w=ln(w),le(w))};function _e(w,$,pe,ke,Be){var rt=new Md($||this.boundingBox,pe||this.xStep,ke||this.yStep,this.gState,Be||this.matrix);rt.stream=this.stream;var ht=w+"$$"+this.cloneIndex+++"$$";return fs(ht,rt),rt}var we=function(w,$){var pe=at[w.key],ke=Ge[pe];if(ke instanceof Ou)le("q"),le(Rt($)),ke.gState&&y.setGState(ke.gState),le(w.matrix.toString()+" cm"),le("/"+pe+" sh"),le("Q");else if(ke instanceof Md){var Be=new on(1,0,0,-1,0,Ji());w.matrix&&(Be=Be.multiply(w.matrix||Us),pe=_e.call(ke,w.key,w.boundingBox,w.xStep,w.yStep,Be).id),le("q"),le("/Pattern cs"),le("/"+pe+" scn"),ke.gState&&y.setGState(ke.gState),le($),le("Q")}},Rt=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Gn=y.moveTo=function(w,$){return le(te(z(w))+" "+te(Y($))+" m"),this},Vt=y.lineTo=function(w,$){return le(te(z(w))+" "+te(Y($))+" l"),this},Vn=y.curveTo=function(w,$,pe,ke,Be,rt){return le([te(z(w)),te(Y($)),te(z(pe)),te(Y(ke)),te(z(Be)),te(Y(rt)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,$,pe,ke,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(ke)||!An(Be))throw new Error("Invalid arguments passed to jsPDF.line");return q===F?this.lines([[pe-w,ke-$]],w,$,[1,1],Be||"S"):this.lines([[pe-w,ke-$]],w,$,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,$,pe,ke,Be,rt){var ht,ot,At,Tt,Dt,hn,Yn,br,Qn,Sr,dr,Mr;if(typeof w=="number"&&(Mr=pe,pe=$,$=w,w=Mr),ke=ke||[1,1],rt=rt||!1,isNaN($)||isNaN(pe)||!Array.isArray(w)||!Array.isArray(ke)||!An(Be)||typeof rt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gn($,pe),ht=ke[0],ot=ke[1],Tt=w.length,Sr=$,dr=pe,At=0;At<Tt;At++)(Dt=w[At]).length===2?(Sr=Dt[0]*ht+Sr,dr=Dt[1]*ot+dr,Vt(Sr,dr)):(hn=Dt[0]*ht+Sr,Yn=Dt[1]*ot+dr,br=Dt[2]*ht+Sr,Qn=Dt[3]*ot+dr,Sr=Dt[4]*ht+Sr,dr=Dt[5]*ot+dr,Vn(hn,Yn,br,Qn,Sr,dr));return rt&&E(),he(Be),this},y.path=function(w){for(var $=0;$<w.length;$++){var pe=w[$],ke=pe.c;switch(pe.op){case"m":Gn(ke[0],ke[1]);break;case"l":Vt(ke[0],ke[1]);break;case"c":Vn.apply(this,ke);break;case"h":E()}}return this},y.__private__.rect=y.rect=function(w,$,pe,ke,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(ke)||!An(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return q===F&&(ke=-ke),le([te(z(w)),te(Y($)),te(z(pe)),te(z(ke)),"re"].join(" ")),he(Be),this},y.__private__.triangle=y.triangle=function(w,$,pe,ke,Be,rt,ht){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(ke)||isNaN(Be)||isNaN(rt)||!An(ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-w,ke-$],[Be-pe,rt-ke],[w-Be,$-rt]],w,$,[1,1],ht,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,$,pe,ke,Be,rt,ht){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(ke)||isNaN(Be)||isNaN(rt)||!An(ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ot=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*pe),rt=Math.min(rt,.5*ke),this.lines([[pe-2*Be,0],[Be*ot,0,Be,rt-rt*ot,Be,rt],[0,ke-2*rt],[0,rt*ot,-Be*ot,rt,-Be,rt],[2*Be-pe,0],[-Be*ot,0,-Be,-rt*ot,-Be,-rt],[0,2*rt-ke],[0,-rt*ot,Be*ot,-rt,Be,-rt]],w+Be,$,[1,1],ht,!0),this},y.__private__.ellipse=y.ellipse=function(w,$,pe,ke,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(ke)||!An(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var rt=4/3*(Math.SQRT2-1)*pe,ht=4/3*(Math.SQRT2-1)*ke;return Gn(w+pe,$),Vn(w+pe,$-ht,w+rt,$-ke,w,$-ke),Vn(w-rt,$-ke,w-pe,$-ht,w-pe,$),Vn(w-pe,$+ht,w-rt,$+ke,w,$+ke),Vn(w+rt,$+ke,w+pe,$+ht,w+pe,$),he(Be),this},y.__private__.circle=y.circle=function(w,$,pe,ke){if(isNaN(w)||isNaN($)||isNaN(pe)||!An(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,$,pe,pe,ke)},y.setFont=function(w,$,pe){return pe&&($=W($,pe)),ct=it(w,$,{disableWarning:!1}),this};var $r=y.__private__.getFont=y.getFont=function(){return Gt[it.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,$,pe={};for(w in Ut)if(Ut.hasOwnProperty(w))for($ in pe[w]=[],Ut[w])Ut[w].hasOwnProperty($)&&pe[w].push($);return pe},y.addFont=function(w,$,pe,ke,Be){var rt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&rt.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&rt.indexOf(arguments[3])==-1&&(pe=W(pe,ke)),fn.call(this,w,$,pe,Be=Be||"Identity-H")};var Or,ts=t.lineWidth||.200025,hi=y.__private__.getLineWidth=y.getLineWidth=function(){return ts},vn=y.__private__.setLineWidth=y.setLineWidth=function(w){return ts=w,le(te(z(w))+" w"),this};y.__private__.setLineDash=un.API.setLineDash=un.API.setLineDashPattern=function(w,$){if(w=w||[],$=$||0,isNaN($)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(pe){return te(z(pe))}).join(" "),$=te(z($)),le("["+w+"] "+$+" d"),this};var Zi=y.__private__.getLineHeight=y.getLineHeight=function(){return B*Or};y.__private__.getLineHeight=y.getLineHeight=function(){return B*Or};var _t=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Or=w),this},cr=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Or};_t(t.lineHeight);var wi=y.__private__.getHorizontalCoordinate=function(w){return z(w)},ga=y.__private__.getVerticalCoordinate=function(w){return q===v?w:Jt[L].mediaBox.topRightY-Jt[L].mediaBox.bottomLeftY-z(w)},al=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return te(wi(w))},uo=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return te(ga(w))},Yi=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return fi(Yi)},y.__private__.setStrokeColor=y.setDrawColor=function(w,$,pe,ke){return Yi=es({ch1:w,ch2:$,ch3:pe,ch4:ke,pdfColorType:"draw",precision:2}),le(Yi),this};var Vr=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return fi(Vr)},y.__private__.setFillColor=y.setFillColor=function(w,$,pe,ke){return Vr=es({ch1:w,ch2:$,ch3:pe,ch4:ke,pdfColorType:"fill",precision:2}),le(Vr),this};var Hr=t.textColor||"0 g",Ni=y.__private__.getTextColor=y.getTextColor=function(){return fi(Hr)};y.__private__.setTextColor=y.setTextColor=function(w,$,pe,ke){return Hr=es({ch1:w,ch2:$,ch3:pe,ch4:ke,pdfColorType:"text",precision:3}),this};var ps=t.charSpace,ol=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(ps||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ps=w,this};var zl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=$,le($+" J"),this};var ll=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ll=$,le($+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(te(z(w))+" M"),this},y.GState=Tm,y.setGState=function(w){(w=typeof w=="string"?Xe[an[w]]:cl(null,w)).equals(sr)||(le("/"+w.id+" gs"),sr=w)};var cl=function(w,$){if(!w||!an[w]){var pe=!1;for(var ke in Xe)if(Xe.hasOwnProperty(ke)&&Xe[ke].equals($)){pe=!0;break}if(pe)$=Xe[ke];else{var Be="GS"+(Object.keys(Xe).length+1).toString(10);Xe[Be]=$,$.id=Be}return w&&(an[w]=$.id),Dn.publish("addGState",$),$}};y.addGState=function(w,$){return cl(w,$),this},y.saveGraphicsState=function(){return le("q"),tn.push({key:ct,size:B,color:Hr}),this},y.restoreGraphicsState=function(){le("Q");var w=tn.pop();return ct=w.key,B=w.size,Hr=w.color,sr=null,this},y.setCurrentTransformationMatrix=function(w){return le(w.toString()+" cm"),this},y.comment=function(w){return le("#"+w),this};var Xi=function(w,$){var pe=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(rt){isNaN(rt)||(pe=parseFloat(rt))}});var ke=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(rt){isNaN(rt)||(ke=parseFloat(rt))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(rt){Be=rt.toString()}}),this},Ha=function(w,$,pe,ke){Xi.call(this,w,$),this.type="rect";var Be=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(ht){isNaN(ht)||(Be=parseFloat(ht))}});var rt=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return rt},set:function(ht){isNaN(ht)||(rt=parseFloat(ht))}}),this},fo=function(){this.page=gn,this.currentPage=L,this.pages=Ze.slice(0),this.pagesContext=Jt.slice(0),this.x=Pt,this.y=pr,this.matrix=yn,this.width=Wa(L),this.height=Js(L),this.outputDestination=mt,this.id="",this.objectNumber=-1};fo.prototype.restore=function(){gn=this.page,L=this.currentPage,Jt=this.pagesContext,Ze=this.pages,Pt=this.x,pr=this.y,yn=this.matrix,ul(L,this.width),os(L,this.height),mt=this.outputDestination};var ms=function(w,$,pe,ke,Be){xr.push(new fo),gn=L=0,Ze=[],Pt=w,pr=$,yn=Be,Nn([pe,ke])};for(var $s in y.beginFormObject=function(w,$,pe,ke,Be){return ms(w,$,pe,ke,Be),this},y.endFormObject=function(w){return(function($){if(Nr[$])xr.pop().restore();else{var pe=new fo,ke="Xo"+(Object.keys(ir).length+1).toString(10);pe.id=ke,Nr[$]=ke,ir[ke]=pe,Dn.publish("addFormObject",pe),xr.pop().restore()}})(w),this},y.doFormObject=function(w,$){var pe=ir[Nr[w]];return le("q"),le($.toString()+" cm"),le("/"+pe.id+" Do"),le("Q"),this},y.getFormObject=function(w){var $=ir[Nr[w]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},y.save=function(w,$){return w=w||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Fu(kt(Nt()),w),typeof Fu.unload=="function"&&Mn.setTimeout&&setTimeout(Fu.unload,911),this):new Promise(function(pe,ke){try{var Be=Fu(kt(Nt()),w);typeof Fu.unload=="function"&&Mn.setTimeout&&setTimeout(Fu.unload,911),pe(Be)}catch(rt){ke(rt.message)}})},un.API)un.API.hasOwnProperty($s)&&($s==="events"&&un.API.events.length?(function(w,$){var pe,ke,Be;for(Be=$.length-1;Be!==-1;Be--)pe=$[Be][0],ke=$[Be][1],w.subscribe.apply(w,[pe].concat(typeof ke=="function"?[ke]:ke))})(Dn,un.API.events):y[$s]=un.API[$s]);function Wa(w){return Jt[w].mediaBox.topRightX-Jt[w].mediaBox.bottomLeftX}function ul(w,$){Jt[w].mediaBox.topRightX=$+Jt[w].mediaBox.bottomLeftX}function Js(w){return Jt[w].mediaBox.topRightY-Jt[w].mediaBox.bottomLeftY}function os(w,$){Jt[w].mediaBox.topRightY=$+Jt[w].mediaBox.bottomLeftY}var Es=y.getPageWidth=function(w){return Wa(w=w||L)/jt},Vs=y.setPageWidth=function(w,$){ul(w,$*jt)},Ji=y.getPageHeight=function(w){return Js(w=w||L)/jt},dl=y.setPageHeight=function(w,$){os(w,$*jt)};return y.internal={pdfEscape:In,getStyle:ln,getFont:$r,getFontSize:re,getCharSpace:ol,getTextColor:Ni,getLineHeight:Zi,getLineHeightFactor:cr,getLineWidth:hi,write:gt,getHorizontalCoordinate:wi,getVerticalCoordinate:ga,getCoordinateString:al,getVerticalCoordinateString:uo,collections:{},newObject:lr,newAdditionalObject:ks,newObjectDeferred:Fr,newObjectDeferredBegin:yr,getFilters:Ts,putStream:as,events:Dn,scaleFactor:jt,pageSize:{getWidth:function(){return Es(L)},setWidth:function(w){Vs(L,w)},getHeight:function(){return Ji(L)},setHeight:function(w){dl(L,w)}},encryptionOptions:m,encryption:Bt,getEncryptor:function(w){return m!==null?Bt.encryptor(w,0):function($){return $}},output:Mt,getNumberOfPages:Ke,get pages(){return Ze},out:le,f2:O,f3:R,getPageInfo:Qt,getPageInfoByObjId:bn,getCurrentPageInfo:Er,getPDFVersion:S,Point:Xi,Rectangle:Ha,Matrix:on,hasHotfix:$t},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Es(L)},set:function(w){Vs(L,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ji(L)},set:function(w){dl(L,w)},enumerable:!0,configurable:!0}),(function(w){for(var $=0,pe=X.length;$<pe;$++){var ke=fn.call(this,w[$][0],w[$][1],w[$][2],X[$][3],!0);b===!1&&(j[ke]=!0);var Be=w[$][0].split("-");bi({id:ke,fontName:Be[0],fontStyle:Be[1]||""})}Dn.publish("addFonts",{fonts:Gt,dictionary:Ut})}).call(y,X),ct="F1",Kt(a,n),Dn.publish("initialized"),y}Dd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Dd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Dd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Dd.prototype.processOwnerPassword=function(t,e){return I1(D1(e).substr(0,5),t)},Dd.prototype.encryptor=function(t,e){var n=D1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return I1(n,r)}},Tm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Zr(t)!==Zr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},un.API={events:[]},un.version="4.0.0";var Zs=un.API,Fv=1,td=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Td=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wn=function(t){return t.toFixed(2)},Gc=function(t){return t.toFixed(5)};Zs.__acroform__={};var Va=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},l5=function(t){return t*Fv},Al=function(t){var e=new nj,n=sn.internal.getHeight(t)||0,r=sn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Wn(r)),Number(Wn(n))],e},jI=Zs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},CI=Zs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},_I=Zs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ii=Zs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _I(t,e-1)},ai=Zs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jI(t,e-1)},oi=Zs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return CI(t,e-1)},AI=Zs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=t[0],o=t[1],u=t[2],c=t[3],f={};return f.lowerLeft_X=n(a)||0,f.lowerLeft_Y=r(o+c)||0,f.upperRight_X=n(a+u)||0,f.upperRight_Y=r(o)||0,[Number(Wn(f.lowerLeft_X)),Number(Wn(f.lowerLeft_Y)),Number(Wn(f.upperRight_X)),Number(Wn(f.upperRight_Y))]},PI=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=F1(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Wn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Al(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},F1=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var o=n,u=sn.internal.getHeight(t)||0;u=u<0?-u:u;var c=sn.internal.getWidth(t)||0;c=c<0?-c:c;var f=function(O,R,z){if(O+1<a.length){var Y=R+" "+a[O+1][0];return Fp(Y,t,z).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,b=Fp("3",t,o).height,j=t.multiline?u-o:(u-b)/2,y=j+=2,I=0,S=0,P=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fp(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var _="",F=0,v=0;v<a.length;v++)if(a.hasOwnProperty(v)){var q=!1;if(a[v].length!==1&&P!==a[v].length-1){if((b+2)*(F+2)+2>u)continue e;_+=a[v][P],q=!0,S=v,v--}else{_=(_+=a[v][P]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var ee=parseInt(v),ae=f(ee,_,o),W=v>=a.length-1;if(ae&&!W){_+=" ",P=0;continue}if(ae||W){if(W)S=ee;else if(t.multiline&&(b+2)*(F+2)+2>u)continue e}else{if(!t.multiline||(b+2)*(F+2)+2>u)continue e;S=ee}}for(var te="",Q=I;Q<=S;Q++){var ue=a[Q];if(t.multiline){if(Q===S){te+=ue[P]+" ",P=(P+1)%ue.length;continue}if(Q===I){te+=ue[ue.length-1]+" ";continue}}te+=ue[0]+" "}switch(te=te.substr(te.length-1)==" "?te.substr(0,te.length-1):te,m=Fp(te,t,o).width,t.textAlign){case"right":p=c-m-2;break;case"center":p=(c-m)/2;break;default:p=2}e+=Wn(p)+" "+Wn(y)+` Td
`,e+="("+td(te)+`) Tj
`,e+=-Wn(p)+` 0 Td
`,y=-(o+2),m=0,I=q?S:S+1,F++,_=""}break}return r.text=e,r.fontSize=o,r},Fp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},kI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TI=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},EI=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(sl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(kI)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Fv=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new rj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.objId=void 0,o.hasAnnotation&&TI(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,a){var o=!r;for(var u in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var c=r[u],f=[],p=c.Rect;if(c.Rect&&(c.Rect=AI(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=sn.createDefaultAppearanceStream(c),Zr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=p,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=PI(c);f.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var b="";for(var j in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(j)){var y=c.appearanceStreamContent[j];if(b+="/"+j+" ",b+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var I=y[u];typeof I=="function"&&(I=I.call(a,c)),b+="/"+u+" "+I+" ",a.internal.acroformPlugin.xForms.indexOf(I)>=0||a.internal.acroformPlugin.xForms.push(I)}}else typeof(I=y)=="function"&&(I=I.call(a,c)),b+="/"+u+" "+I,a.internal.acroformPlugin.xForms.indexOf(I)>=0||a.internal.acroformPlugin.xForms.push(I);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(S,P){for(var _ in S)if(S.hasOwnProperty(_)){var F=_,v=S[_];P.internal.newObjectDeferredBegin(v.objId,!0),Zr(v)==="object"&&typeof v.putStream=="function"&&v.putStream(),delete S[F]}})(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},tj=Zs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),Zr(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),a+="("+td(r(t[o].toString()))+")"):a+=t[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},U0=function(t,e,n){var r=function(a){return a};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+td(r(t))+")"},Tl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tl.prototype.toString=function(){return this.objId+" 0 R"},Tl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Tl.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],a=this[r];a&&(Array.isArray(a)?t.push({key:r,value:tj(a,this.objId,this.scope)}):a instanceof Tl?(a.scope=this.scope,t.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:r,value:a}))}return t};var nj=function(){Tl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Va(nj,Tl);var rj=function(){Tl.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+td(n(t))+")"}},set:function(n){t=n}})};Va(rj,Tl);var sl=function t(){Tl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ii(e,3)},set:function(_){_?this.F=ai(e,3):this.F=oi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Em)return;o="FieldObject"+t.FieldNum++}var _=function(F){return F};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+td(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/Fv:p},set:function(_){p=_}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Em||this instanceof qu))return U0(b,this.objId,this.scope)},set:function(_){_=_.toString(),b=_}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Mi==0?U0(j,this.objId,this.scope):j},set:function(_){_=_.toString(),j=this instanceof Mi==0?_.substr(0,1)==="("?Td(_.substr(1,_.length-2)):Td(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi==1?Td(j.substr(1,j.length-1)):j},set:function(_){_=_.toString(),j=this instanceof Mi==1?"/"+_:_}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Mi==0?U0(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Mi==0?_.substr(0,1)==="("?Td(_.substr(1,_.length-2)):Td(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mi==1?Td(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Mi==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(_){_=!!_,S=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(_){I=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,1)},set:function(_){_?this.Ff=ai(this.Ff,1):this.Ff=oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,2)},set:function(_){_?this.Ff=ai(this.Ff,2):this.Ff=oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,3)},set:function(_){_?this.Ff=ai(this.Ff,3):this.Ff=oi(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');P=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(P){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};Va(sl,Tl);var Kd=function(){sl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tj(e,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,p=[];f=u.exec(o);)p.push(f[c]);return p})(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,18)},set:function(n){n?this.Ff=ai(this.Ff,18):this.Ff=oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ai(this.Ff,19):this.Ff=oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,20)},set:function(n){n?(this.Ff=ai(this.Ff,20),e.sort()):this.Ff=oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,22)},set:function(n){n?this.Ff=ai(this.Ff,22):this.Ff=oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(n){n?this.Ff=ai(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,27)},set:function(n){n?this.Ff=ai(this.Ff,27):this.Ff=oi(this.Ff,27)}}),this.hasAppearanceStream=!1};Va(Kd,sl);var Qd=function(){Kd.call(this),this.fontName="helvetica",this.combo=!1};Va(Qd,Kd);var Zd=function(){Qd.call(this),this.combo=!0};Va(Zd,Qd);var Jp=function(){Zd.call(this),this.edit=!0};Va(Jp,Zd);var Mi=function(){sl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,15)},set:function(n){n?this.Ff=ai(this.Ff,15):this.Ff=oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,16)},set:function(n){n?this.Ff=ai(this.Ff,16):this.Ff=oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,17)},set:function(n){n?this.Ff=ai(this.Ff,17):this.Ff=oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(n){n?this.Ff=ai(this.Ff,26):this.Ff=oi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+td(n(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Zr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Va(Mi,sl);var em=function(){Mi.call(this),this.pushButton=!0};Va(em,Mi);var Yd=function(){Mi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Va(Yd,Mi);var Em=function(){var t,e;sl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+td(a(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Zr(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Va(Em,sl),Yd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Yd.prototype.createOption=function(t){var e=new Em;return e.Parent=this,e.optionName=t,this.Kids.push(e),LI.call(this.scope,e),e};var tm=function(){Mi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};Va(tm,Mi);var qu=function(){sl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,13)},set:function(e){e?this.Ff=ai(this.Ff,13):this.Ff=oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,21)},set:function(e){e?this.Ff=ai(this.Ff,21):this.Ff=oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(e){e?this.Ff=ai(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,24)},set:function(e){e?this.Ff=ai(this.Ff,24):this.Ff=oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,25)},set:function(e){e?this.Ff=ai(this.Ff,25):this.Ff=oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(e){e?this.Ff=ai(this.Ff,26):this.Ff=oi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Va(qu,sl);var nm=function(){qu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,14)},set:function(t){t?this.Ff=ai(this.Ff,14):this.Ff=oi(this.Ff,14)}}),this.password=!0};Va(nm,qu);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=F1(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Wn(sn.internal.getWidth(t))+" "+Wn(sn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Wn(o.fontSize)+" Tf "+a),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Al(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=[],o=sn.internal.getHeight(t),u=sn.internal.getWidth(t),c=F1(t,t.caption);return a.push("1 g"),a.push("0 0 "+Wn(u)+" "+Wn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Wn(u-1)+" "+Wn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Wn(c.fontSize)+" Tf "+r),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wn(sn.internal.getWidth(t))+" "+Wn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Circle.YesNormal,e.D[t]=sn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Al(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=sn.internal.Bezier_C,o=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Gc(sn.internal.getWidth(t)/2)+" "+Gc(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*sn.internal.Bezier_C).toFixed(5)),u=Number((r*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Gc(sn.internal.getWidth(t)/2)+" "+Gc(sn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Gc(sn.internal.getWidth(t)/2)+" "+Gc(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Gc(sn.internal.getWidth(t)/2)+" "+Gc(sn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Cross.YesNormal,e.D[t]=sn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Al(t);e.scope=t.scope;var n=[],r=sn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Wn(sn.internal.getWidth(t)-2)+" "+Wn(sn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Wn(r.x1.x)+" "+Wn(r.x1.y)+" m"),n.push(Wn(r.x2.x)+" "+Wn(r.x2.y)+" l"),n.push(Wn(r.x4.x)+" "+Wn(r.x4.y)+" m"),n.push(Wn(r.x3.x)+" "+Wn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=sn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wn(sn.internal.getWidth(t))+" "+Wn(sn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wn(sn.internal.getWidth(t)-2)+" "+Wn(sn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Wn(n.x1.x)+" "+Wn(n.x1.y)+" m"),r.push(Wn(n.x2.x)+" "+Wn(n.x2.y)+" l"),r.push(Wn(n.x4.x)+" "+Wn(n.x4.y)+" m"),r.push(Wn(n.x3.x)+" "+Wn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Al(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wn(sn.internal.getWidth(t))+" "+Wn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};sn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=sn.internal.getWidth(t),n=sn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},sn.internal.getWidth=function(t){var e=0;return Zr(t)==="object"&&(e=l5(t.Rect[2])),e},sn.internal.getHeight=function(t){var e=0;return Zr(t)==="object"&&(e=l5(t.Rect[3])),e};var LI=Zs.addField=function(t){if(EI(this,t),!(t instanceof sl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Zs.AcroFormChoiceField=Kd,Zs.AcroFormListBox=Qd,Zs.AcroFormComboBox=Zd,Zs.AcroFormEditBox=Jp,Zs.AcroFormButton=Mi,Zs.AcroFormPushButton=em,Zs.AcroFormRadioButton=Yd,Zs.AcroFormCheckBox=tm,Zs.AcroFormTextField=qu,Zs.AcroFormPasswordField=nm,Zs.AcroFormAppearance=sn,Zs.AcroForm={ChoiceField:Kd,ListBox:Qd,ComboBox:Zd,EditBox:Jp,Button:Mi,PushButton:em,RadioButton:Yd,CheckBox:tm,TextField:qu,PasswordField:nm,Appearance:sn},un.AcroForm={ChoiceField:Kd,ListBox:Qd,ComboBox:Zd,EditBox:Jp,Button:Mi,PushButton:em,RadioButton:Yd,CheckBox:tm,TextField:qu,PasswordField:nm,Appearance:sn};un.AcroForm;function sj(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(O,R){var z,Y,Ce,Ae,Pe,ce=n;if((R=R||n)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(ae(O))for(Pe in r)for(Ce=r[Pe],z=0;z<Ce.length;z+=1){for(Ae=!0,Y=0;Y<Ce[z].length;Y+=1)if(Ce[z][Y]!==void 0&&Ce[z][Y]!==O[Y]){Ae=!1;break}if(Ae===!0){ce=Pe;break}}else for(Pe in r)for(Ce=r[Pe],z=0;z<Ce.length;z+=1){for(Ae=!0,Y=0;Y<Ce[z].length;Y+=1)if(Ce[z][Y]!==void 0&&Ce[z][Y]!==O.charCodeAt(Y)){Ae=!1;break}if(Ae===!0){ce=Pe;break}}return ce===n&&R!==n&&(ce=R),ce},o=function O(R){for(var z=this.internal.write,Y=this.internal.putStream,Ce=(0,this.internal.getFilters)();Ce.indexOf("FlateEncode")!==-1;)Ce.splice(Ce.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var Ae=[];if(Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Image"}),Ae.push({key:"Width",value:R.width}),Ae.push({key:"Height",value:R.height}),R.colorSpace===_.INDEXED?Ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(Ae.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===_.DEVICE_CMYK&&Ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ae.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&Ae.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var Pe="",ce=0,ge=R.transparency.length;ce<ge;ce++)Pe+=R.transparency[ce]+" "+R.transparency[ce]+" ";Ae.push({key:"Mask",value:"["+Pe+"]"})}R.sMask!==void 0&&Ae.push({key:"SMask",value:R.objectId+1+" 0 R"});var De=R.filter!==void 0?["/"+R.filter]:void 0;if(Y({data:R.data,additionalKeyValues:Ae,alreadyAppliedFilters:De,objectId:R.objectId}),z("endobj"),"sMask"in R&&R.sMask!==void 0){var se,M=(se=R.sMaskBitsPerComponent)!==null&&se!==void 0?se:R.bitsPerComponent,L={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:R.sMask};"filter"in R&&(L.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(R.width),L.filter=R.filter),O.call(this,L)}if(R.colorSpace===_.INDEXED){var ne=this.internal.newObject();Y({data:te(new Uint8Array(R.palette)),objectId:ne}),z("endobj")}},u=function(){var O=this.internal.collections[e+"images"];for(var R in O)o.call(this,O[R])},c=function(){var O,R=this.internal.collections[e+"images"],z=this.internal.write;for(var Y in R)z("/I"+(O=R[Y]).index,O.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},p=function(){var O=this.internal.collections[e+"images"];return f.call(this),O},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(O){return typeof t["process"+O.toUpperCase()]=="function"},j=function(O){return Zr(O)==="object"&&O.nodeType===1},y=function(O,R){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var z=""+O.getAttribute("src");if(z.indexOf("data:image/")===0)return Xp(unescape(z).split("base64,").pop());var Y=t.loadFile(z,!0);if(Y!==void 0)return Y}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Ce;switch(R){case"PNG":Ce="image/png";break;case"WEBP":Ce="image/webp";break;default:Ce="image/jpeg"}return Xp(O.toDataURL(Ce,1).split("base64,").pop())}},I=function(O){var R=this.internal.collections[e+"images"];if(R){for(var z in R)if(O===R[z].alias)return R[z]}},S=function(O,R,z){return O||R||(O=-96,R=-96),O<0&&(O=-1*z.width*72/O/this.internal.scaleFactor),R<0&&(R=-1*z.height*72/R/this.internal.scaleFactor),O===0&&(O=R*z.width/z.height),R===0&&(R=O*z.height/z.width),[O,R]},P=function(O,R,z,Y,Ce,Ae){var Pe=S.call(this,z,Y,Ce),ce=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,De=p.call(this);if(z=Pe[0],Y=Pe[1],De[Ce.index]=Ce,Ae){Ae*=Math.PI/180;var se=Math.cos(Ae),M=Math.sin(Ae),L=function(me){return me.toFixed(4)},ne=[L(se),L(M),L(-1*M),L(se),0,0,"cm"]}this.internal.write("q"),Ae?(this.internal.write([1,"0","0",1,ce(O),ge(R+Y),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([ce(z),"0","0",ce(Y),"0","0","cm"].join(" "))):this.internal.write([ce(z),"0","0",ce(Y),ce(O),ge(R+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ce.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(O){var R,z,Y=0;if(typeof O=="string")for(z=O.length,R=0;R<z;R++)Y=(Y<<5)-Y+O.charCodeAt(R),Y|=0;else if(ae(O))for(z=O.byteLength/2,R=0;R<z;R++)Y=(Y<<5)-Y+O[R],Y|=0;return Y},q=t.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var R=!0;return O.length===0&&(R=!1),O.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(R=!1),R},ee=t.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var R=O.indexOf(",");return R<0?null:O.substring(0,R).trim().endsWith("base64")?O.substring(R+1):null};t.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var ae=t.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},W=t.__addimage__.binaryStringToUint8Array=function(O){for(var R=O.length,z=new Uint8Array(R),Y=0;Y<R;Y++)z[Y]=O.charCodeAt(Y);return z},te=t.__addimage__.arrayBufferToBinaryString=function(O){for(var R="",z=ae(O)?O:new Uint8Array(O),Y=0;Y<z.length;Y+=8192)R+=String.fromCharCode.apply(null,z.subarray(Y,Y+8192));return R};t.addImage=function(){var O,R,z,Y,Ce,Ae,Pe,ce,ge;if(typeof arguments[1]=="number"?(R=n,z=arguments[1],Y=arguments[2],Ce=arguments[3],Ae=arguments[4],Pe=arguments[5],ce=arguments[6],ge=arguments[7]):(R=arguments[1],z=arguments[2],Y=arguments[3],Ce=arguments[4],Ae=arguments[5],Pe=arguments[6],ce=arguments[7],ge=arguments[8]),Zr(O=arguments[0])==="object"&&!j(O)&&"imageData"in O){var De=O;O=De.imageData,R=De.format||R||n,z=De.x||z||0,Y=De.y||Y||0,Ce=De.w||De.width||Ce,Ae=De.h||De.height||Ae,Pe=De.alias||Pe,ce=De.compression||ce,ge=De.rotation||De.angle||ge}var se=this.internal.getFilters();if(ce===void 0&&se.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(z)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var M=Q.call(this,O,R,Pe,ce);return P.call(this,z,Y,Ce,Ae,M,ge),this};var Q=function(O,R,z,Y){var Ce,Ae,Pe;if(typeof O=="string"&&a(O)===n){O=unescape(O);var ce=ue(O,!1);(ce!==""||(ce=t.loadFile(O,!0))!==void 0)&&(O=ce)}if(j(O)&&(O=y(O,R)),R=a(O,R),!b(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((Pe=z)==null||Pe.length===0)&&(z=(function(ge){return typeof ge=="string"||ae(ge)?v(ge):ae(ge.data)?v(ge.data):null})(O)),(Ce=I.call(this,z))||(O instanceof Uint8Array||R==="RGBA"||(Ae=O,O=W(O)),Ce=this["process"+R.toUpperCase()](O,m.call(this),z,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in t.image_compression?ge:F.NONE})(Y),Ae)),!Ce)throw new Error("An unknown error occurred whilst processing the image.");return Ce},ue=t.__addimage__.convertBase64ToBinaryString=function(O,R){R=typeof R!="boolean"||R;var z,Y="";if(typeof O=="string"){var Ce;z=(Ce=ee(O))!==null&&Ce!==void 0?Ce:O;try{Y=Xp(z)}catch(Ae){if(R)throw q(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(O){var R,z,Y="";if(j(O)&&(O=y(O)),typeof O=="string"&&a(O)===n&&((Y=ue(O,!1))===""&&(Y=t.loadFile(O)||""),O=Y),z=a(O),!b(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(O instanceof Uint8Array||(O=W(O)),!(R=this["process"+z.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=z,R}})(un.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};un.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),p=n.pageContext.annotations,m=!1,b=0;b<p.length&&!m;b++)switch((r=p[b]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var j=0;j<p.length;j++){r=p[j];var y=this.internal.pdfEscape,I=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(S.objId),F=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+y(_(r.contents))+")",o+=" /Popup "+P.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(_(F))+") >>",S.content=o;var v=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+v,r.open&&(o+=" /Open true"),o+=" >>",P.content=o,this.internal.write(S.objId,"0 R",P.objId,"0 R");break;case"freetext":a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var q=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(I(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ee=this.annotations._nameMap[r.options.name];r.options.pageNumber=ee.page,r.options.top=ee.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(I(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var ae=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+ae+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(n),y:p(r),w:f(n+a),h:p(r+o)},options:u,type:"link"})},t.textWithLink=function(n,r,a,o){var u,c,f=this.getTextWidth(n),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(n,c).length;u=Math.ceil(p*m)}else c=f,u=p;return this.text(n,r,a,o),a+=.2*p,o.align==="center"&&(r-=f/2),o.align==="right"&&(r-=f),this.link(r,a-p,c,u,o),f},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(un.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(S){return u(S)&&a.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(S){var P=0,_=n,F="",v=0;for(P=0;P<S.length;P+=1)_[S.charCodeAt(P)]!==void 0?(v++,typeof(_=_[S.charCodeAt(P)])=="number"&&(F+=String.fromCharCode(_),_=n,v=0),P===S.length-1&&(_=n,F+=S.charAt(P-(v-1)),P-=v-1,v=0)):(_=n,F+=S.charAt(P-v),P-=v,v=0);return F};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var j=t.__arabicParser__.getCorrectForm=function(S,P,_){return u(S)?o(S)===!1?-1:!p(S)||!u(P)&&!u(_)||!u(_)&&c(P)||c(S)&&!u(P)||c(S)&&f(P)||c(S)&&c(P)?0:m(S)&&u(P)&&!c(P)&&u(_)&&p(_)?3:c(S)||!u(_)?1:2:-1},y=function(S){var P=0,_=0,F=0,v="",q="",ee="",ae=(S=S||"").split("\\s+"),W=[];for(P=0;P<ae.length;P+=1){for(W.push(""),_=0;_<ae[P].length;_+=1)v=ae[P][_],q=ae[P][_-1],ee=ae[P][_+1],u(v)?(F=j(v,q,ee),W[P]+=F!==-1?String.fromCharCode(e[v.charCodeAt(0)][F]):v):W[P]+=v;W[P]=b(W[P])}return W.join(" ")},I=t.__arabicParser__.processArabic=t.processArabic=function(){var S,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(P)){var F=0;for(_=[],F=0;F<P.length;F+=1)Array.isArray(P[F])?_.push([y(P[F][0]),P[F][1],P[F][2]]):_.push([y(P[F])]);S=_}else S=y(P);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",I])})(un.API),un.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(un.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(S){b=S}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(S){j=S}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(S){I=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),j=p.scaleFactor||this.internal.scaleFactor,y=0,I=0,S=0,P=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var _=p.maxWidth;_>0?typeof f=="string"?f=this.splitTextToSize(f,_):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(v,q){return v.concat(P.splitTextToSize(q,_))},[])):f=Array.isArray(f)?f:[f];for(var F=0;F<f.length;F++)y<(S=this.getStringUnitWidth(f[F],{font:b})*m)&&(y=S);return y!==0&&(I=f.length),{w:y/=j,h:Math.max((I*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/j,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,j=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,y&&j&&(this.printHeaderRow(f.lineNumber,!0),f.y+=j[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};t.table=function(f,p,m,b,j){if(r.call(this),!m)throw new Error("No data for PDF table.");var y,I,S,P,_=[],F=[],v=[],q={},ee={},ae=[],W=[],te=(j=j||{}).autoSize||!1,Q=j.printHeaders!==!1,ue=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,O=j.margins||Object.assign({width:this.getPageWidth()},e),R=typeof j.padding=="number"?j.padding:3,z=j.headerBackgroundColor||"#c8c8c8",Y=j.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=Y,this.setFontSize(ue),b==null)F=_=Object.keys(m[0]),v=_.map(function(){return"left"});else if(Array.isArray(b)&&Zr(b[0])==="object")for(_=b.map(function(De){return De.name}),F=b.map(function(De){return De.prompt||De.name||""}),v=b.map(function(De){return De.align||"left"}),y=0;y<b.length;y+=1)ee[b[y].name]=.7499990551181103*b[y].width;else Array.isArray(b)&&typeof b[0]=="string"&&(F=_=b,v=_.map(function(){return"left"}));if(te||Array.isArray(b)&&typeof b[0]=="string")for(y=0;y<_.length;y+=1){for(q[P=_[y]]=m.map(function(De){return De[P]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(F[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=q[P],this.setFont(void 0,"normal"),S=0;S<I.length;S+=1)ae.push(this.getTextDimensions(I[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[P]=Math.max.apply(null,ae)+R+R,ae=[]}if(Q){var Ce={};for(y=0;y<_.length;y+=1)Ce[_[y]]={},Ce[_[y]].text=F[y],Ce[_[y]].align=v[y];var Ae=c.call(this,Ce,ee);W=_.map(function(De){return new o(f,p,ee[De],Ae,Ce[De].text,void 0,Ce[De].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Pe=b.reduce(function(De,se){return De[se.name]=se.align,De},{});for(y=0;y<m.length;y+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:y,data:m[y]},this);var ce=c.call(this,m[y],ee);for(S=0;S<_.length;S+=1){var ge=m[y][_[S]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:y,col:S,data:ge},this),u.call(this,new o(f,p,ee[_[S]],ce,ge,y+2,Pe[_[S]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var c=function(f,p){var m=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(f).map(function(y){var I=f[y];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,p[y]-m-m)},this).map(function(y){return this.getLineHeightFactor()*y.length*b/j+m+m},this).reduce(function(y,I){return Math.max(y,I)},0)};t.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){m=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,j.push(m)),m.lineNumber=f;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(I)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}})(un.API);var ij={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],O1=sj(aj),oj=[100,200,300,400,500,600,700,800,900],RI=sj(oj);function z0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return ij[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(t.weight),a=(function(o){return typeof O1[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,r].join(" ")}}}function c5(t,e,n,r){var a;for(a=n;a>=0&&a<e.length;a+=r)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=r)if(t[e[a]])return t[e[a]]}var DI={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},u5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function d5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function f5(t){return t.trimLeft()}function II(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function FI(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Op,h5,p5,Ed,Mp,m5,g5,v5,$0=["times"];function x5(t,e,n,r,a){var o=4,u=b5;switch(a){case un.API.image_compression.FAST:o=1,u=y5;break;case un.API.image_compression.MEDIUM:o=6,u=w5;break;case un.API.image_compression.SLOW:o=9,u=N5}t=(function(f,p,m,b){for(var j,y=f.length/p,I=new Uint8Array(f.length+y),S=[OI,y5,b5,w5,N5],P=0;P<y;P+=1){var _=P*p,F=f.subarray(_,_+p);if(b)I.set(b(F,m,j),_+P);else{for(var v=S.length,q=[],ee=0;ee<v;ee+=1)q[ee]=S[ee](F,m,j);var ae=BI(q.concat());I.set(q[ae],_+P)}j=F}return I})(t,e,Math.ceil(n*r/8),u);var c=T1(t,{level:o});return un.API.__addimage__.arrayBufferToBinaryString(c)}function OI(t){var e=Array.apply([],t);return e.unshift(0),e}function y5(t,e){var n=t.length,r=[];r[0]=1;for(var a=0;a<n;a+=1){var o=t[a-e]||0;r[a+1]=t[a]-o+256&255}return r}function b5(t,e,n){var r=t.length,a=[];a[0]=2;for(var o=0;o<r;o+=1){var u=n&&n[o]||0;a[o+1]=t[o]-u+256&255}return a}function w5(t,e,n){var r=t.length,a=[];a[0]=3;for(var o=0;o<r;o+=1){var u=t[o-e]||0,c=n&&n[o]||0;a[o+1]=t[o]+256-(u+c>>>1)&255}return a}function N5(t,e,n){var r=t.length,a=[];a[0]=4;for(var o=0;o<r;o+=1){var u=MI(t[o-e]||0,n&&n[o]||0,n&&n[o-e]||0);a[o+1]=t[o]-u+256&255}return a}function MI(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),a=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=a&&r<=o?t:a<=o?e:n}function BI(t){var e=t.map(function(n){return n.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function V0(t,e,n){var r=e*n,a=Math.floor(r/8),o=16-(r-8*a+n),u=(1<<n)-1;return lj(t,a)>>o&u}function S5(t,e,n,r){var a=n*r,o=Math.floor(a/8),u=16-(a-8*o+r),c=(1<<r)-1,f=(e&c)<<u;(function(p,m,b){if(m+1<p.byteLength)p.setUint16(m,b,!1);else{var j=b>>8&255;p.setUint8(m,j)}})(t,o,lj(t,o)&~(c<<u)&65535|f)}function lj(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function qI(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,u=1<<1+(7&a);t[e++],t[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var p=!0,m=[],b=0,j=null,y=0,I=null;for(this.width=n,this.height=r;p&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,I=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];b=t[e++]|t[e++]<<8,j=t[e++],1&S||(j=null),y=S>>2&7,e++;break;case 254:for(;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var P=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,q=t[e++],ee=q>>6&1,ae=1<<1+(7&q),W=c,te=f,Q=!1;q>>7&&(Q=!0,W=e,te=ae,e+=3*ae);var ue=e;for(e++;;){var O;if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}m.push({x:P,y:_,width:F,height:v,has_local_palette:Q,palette_offset:W,palette_size:te,data_offset:ue,data_length:e-ue,transparent_index:j,interlaced:!!ee,delay:b,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return I},this.frameInfo=function(R){if(R<0||R>=m.length)throw new Error("Frame index out of range.");return m[R]},this.decodeAndBlitFrameBGRA=function(R,z){var Y=this.frameInfo(R),Ce=Y.width*Y.height,Ae=new Uint8Array(Ce);j5(t,Y.data_offset,Ae,Ce);var Pe=Y.palette_offset,ce=Y.transparent_index;ce===null&&(ce=256);var ge=Y.width,De=n-ge,se=ge,M=4*(Y.y*n+Y.x),L=4*((Y.y+Y.height)*n+Y.x),ne=M,me=4*De;Y.interlaced===!0&&(me+=4*n*7);for(var ye=8,be=0,Re=Ae.length;be<Re;++be){var Ie=Ae[be];if(se===0&&(se=ge,(ne+=me)>=L&&(me=4*De+4*n*(ye-1),ne=M+(ge+De)*(ye<<1),ye>>=1)),Ie===ce)ne+=4;else{var Me=t[Pe+3*Ie],Ze=t[Pe+3*Ie+1],ft=t[Pe+3*Ie+2];z[ne++]=ft,z[ne++]=Ze,z[ne++]=Me,z[ne++]=255}--se}},this.decodeAndBlitFrameRGBA=function(R,z){var Y=this.frameInfo(R),Ce=Y.width*Y.height,Ae=new Uint8Array(Ce);j5(t,Y.data_offset,Ae,Ce);var Pe=Y.palette_offset,ce=Y.transparent_index;ce===null&&(ce=256);var ge=Y.width,De=n-ge,se=ge,M=4*(Y.y*n+Y.x),L=4*((Y.y+Y.height)*n+Y.x),ne=M,me=4*De;Y.interlaced===!0&&(me+=4*n*7);for(var ye=8,be=0,Re=Ae.length;be<Re;++be){var Ie=Ae[be];if(se===0&&(se=ge,(ne+=me)>=L&&(me=4*De+4*n*(ye-1),ne=M+(ge+De)*(ye<<1),ye>>=1)),Ie===ce)ne+=4;else{var Me=t[Pe+3*Ie],Ze=t[Pe+3*Ie+1],ft=t[Pe+3*Ie+2];z[ne++]=Me,z[ne++]=Ze,z[ne++]=ft,z[ne++]=255}--se}}}function j5(t,e,n,r){for(var a=t[e++],o=1<<a,u=o+1,c=u+1,f=a+1,p=(1<<f)-1,m=0,b=0,j=0,y=t[e++],I=new Int32Array(4096),S=null;;){for(;m<16&&y!==0;)b|=t[e++]<<m,m+=8,y===1?y=t[e++]:--y;if(m<f)break;var P=b&p;if(b>>=f,m-=f,P!==o){if(P===u)break;for(var _=P<c?P:S,F=0,v=_;v>o;)v=I[v]>>8,++F;var q=v;if(j+F+(_!==P?1:0)>r)return void rs.log("Warning, gif stream longer than expected.");n[j++]=q;var ee=j+=F;for(_!==P&&(n[j++]=q),v=_;F--;)v=I[v],n[--ee]=255&v,v>>=8;S!==null&&c<4096&&(I[c++]=S<<8|q,c>=p+1&&f<12&&(++f,p=p<<1|1)),S=P}else c=u+1,p=(1<<(f=a+1))-1,S=null}return j!==r&&rs.log("Warning, gif stream shorter than expected."),n}function H0(t){var e,n,r,a,o,u=Math.floor,c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),j=new Array(65535),y=new Array(64),I=new Array(64),S=[],P=0,_=7,F=new Array(64),v=new Array(64),q=new Array(64),ee=new Array(256),ae=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],te=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ae(M,L){for(var ne=0,me=0,ye=new Array,be=1;be<=16;be++){for(var Re=1;Re<=M[be];Re++)ye[L[me]]=[],ye[L[me]][0]=ne,ye[L[me]][1]=be,me++,ne++;ne*=2}return ye}function Pe(M){for(var L=M[0],ne=M[1]-1;ne>=0;)L&1<<ne&&(P|=1<<_),ne--,--_<0&&(P==255?(ce(255),ce(0)):ce(P),_=7,P=0)}function ce(M){S.push(M)}function ge(M){ce(M>>8&255),ce(255&M)}function De(M,L,ne,me,ye){for(var be,Re=ye[0],Ie=ye[240],Me=(function(B,ve){var re,D,H,je,Ne,Te,$e,st,ct,jt,Pt=0;for(ct=0;ct<8;++ct){re=B[Pt],D=B[Pt+1],H=B[Pt+2],je=B[Pt+3],Ne=B[Pt+4],Te=B[Pt+5],$e=B[Pt+6];var pr=re+(st=B[Pt+7]),yn=re-st,Gt=D+$e,Ut=D-$e,tn=H+Te,Ge=H-Te,at=je+Ne,Xe=je-Ne,an=pr+at,sr=pr-at,gn=Gt+tn,Jt=Gt-tn;B[Pt]=an+gn,B[Pt+4]=an-gn;var Dn=.707106781*(Jt+sr);B[Pt+2]=sr+Dn,B[Pt+6]=sr-Dn;var ys=.382683433*((an=Xe+Ge)-(Jt=Ut+yn)),ir=.5411961*an+ys,Nr=1.306562965*Jt+ys,xr=.707106781*(gn=Ge+Ut),on=yn+xr,As=yn-xr;B[Pt+5]=As+ir,B[Pt+3]=As-ir,B[Pt+1]=on+Nr,B[Pt+7]=on-Nr,Pt+=8}for(Pt=0,ct=0;ct<8;++ct){re=B[Pt],D=B[Pt+8],H=B[Pt+16],je=B[Pt+24],Ne=B[Pt+32],Te=B[Pt+40],$e=B[Pt+48];var Us=re+(st=B[Pt+56]),fs=re-st,Ps=D+$e,lr=D-$e,Fr=H+Te,yr=H-Te,ks=je+Ne,Jr=je-Ne,Tr=Us+ks,fi=Us-ks,es=Ps+Fr,Ts=Ps-Fr;B[Pt]=Tr+es,B[Pt+32]=Tr-es;var as=.707106781*(Ts+fi);B[Pt+16]=fi+as,B[Pt+48]=fi-as;var zs=.382683433*((Tr=Jr+yr)-(Ts=lr+fs)),mr=.5411961*Tr+zs,hs=1.306562965*Ts+zs,Xs=.707106781*(es=yr+lr),Qi=fs+Xs,qi=fs-Xs;B[Pt+40]=qi+mr,B[Pt+24]=qi-mr,B[Pt+8]=Qi+hs,B[Pt+56]=Qi-hs,Pt++}for(ct=0;ct<64;++ct)jt=B[ct]*ve[ct],y[ct]=jt>0?jt+.5|0:jt-.5|0;return y})(M,L),Ze=0;Ze<64;++Ze)I[W[Ze]]=Me[Ze];var ft=I[0]-ne;ne=I[0],ft==0?Pe(me[0]):(Pe(me[j[be=32767+ft]]),Pe(b[be]));for(var mt=63;mt>0&&I[mt]==0;)mt--;if(mt==0)return Pe(Re),ne;for(var Ft,le=1;le<=mt;){for(var gt=le;I[le]==0&&le<=mt;)++le;var xe=le-gt;if(xe>=16){Ft=xe>>4;for(var X=1;X<=Ft;++X)Pe(Ie);xe&=15}be=32767+I[le],Pe(ye[(xe<<4)+j[be]]),Pe(b[be]),le++}return mt!=63&&Pe(Re),ne}function se(M){M=Math.min(Math.max(M,1),100),o!=M&&((function(L){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var ye=u((ne[me]*L+50)/100);ye=Math.min(Math.max(ye,1),255),c[W[me]]=ye}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Re=0;Re<64;Re++){var Ie=u((be[Re]*L+50)/100);Ie=Math.min(Math.max(Ie,1),255),f[W[Re]]=Ie}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ze=0,ft=0;ft<8;ft++)for(var mt=0;mt<8;mt++)p[Ze]=1/(c[W[Ze]]*Me[ft]*Me[mt]*8),m[Ze]=1/(f[W[Ze]]*Me[ft]*Me[mt]*8),Ze++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,L){L&&se(L),S=new Array,P=0,_=7,ge(65496),ge(65504),ge(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),ge(1),ge(1),ce(0),ce(0),(function(){ge(65499),ge(132),ce(0);for(var D=0;D<64;D++)ce(c[D]);ce(1);for(var H=0;H<64;H++)ce(f[H])})(),(function(D,H){ge(65472),ge(17),ce(8),ge(H),ge(D),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)})(M.width,M.height),(function(){ge(65476),ge(418),ce(0);for(var D=0;D<16;D++)ce(te[D+1]);for(var H=0;H<=11;H++)ce(Q[H]);ce(16);for(var je=0;je<16;je++)ce(ue[je+1]);for(var Ne=0;Ne<=161;Ne++)ce(O[Ne]);ce(1);for(var Te=0;Te<16;Te++)ce(R[Te+1]);for(var $e=0;$e<=11;$e++)ce(z[$e]);ce(17);for(var st=0;st<16;st++)ce(Y[st+1]);for(var ct=0;ct<=161;ct++)ce(Ce[ct])})(),ge(65498),ge(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var ne=0,me=0,ye=0;P=0,_=7,this.encode.displayName="_encode_";for(var be,Re,Ie,Me,Ze,ft,mt,Ft,le,gt=M.data,xe=M.width,X=M.height,B=4*xe,ve=0;ve<X;){for(be=0;be<B;){for(Ze=B*ve+be,mt=-1,Ft=0,le=0;le<64;le++)ft=Ze+(Ft=le>>3)*B+(mt=4*(7&le)),ve+Ft>=X&&(ft-=B*(ve+1+Ft-X)),be+mt>=B&&(ft-=be+mt-B+4),Re=gt[ft++],Ie=gt[ft++],Me=gt[ft++],F[le]=(ae[Re]+ae[Ie+256|0]+ae[Me+512|0]>>16)-128,v[le]=(ae[Re+768|0]+ae[Ie+1024|0]+ae[Me+1280|0]>>16)-128,q[le]=(ae[Re+1280|0]+ae[Ie+1536|0]+ae[Me+1792|0]>>16)-128;ne=De(F,p,ne,e,r),me=De(v,m,me,n,a),ye=De(q,m,ye,n,a),be+=32}ve+=8}if(_>=0){var re=[];re[1]=_+1,re[0]=(1<<_+1)-1,Pe(re)}return ge(65497),new Uint8Array(S)},t=t||50,(function(){for(var M=String.fromCharCode,L=0;L<256;L++)ee[L]=M(L)})(),e=Ae(te,Q),n=Ae(R,z),r=Ae(ue,O),a=Ae(Y,Ce),(function(){for(var M=1,L=2,ne=1;ne<=15;ne++){for(var me=M;me<L;me++)j[32767+me]=ne,b[32767+me]=[],b[32767+me][1]=ne,b[32767+me][0]=me;for(var ye=-(L-1);ye<=-M;ye++)j[32767+ye]=ne,b[32767+ye]=[],b[32767+ye][1]=ne,b[32767+ye][0]=L-1+ye;M<<=1,L<<=1}})(),(function(){for(var M=0;M<256;M++)ae[M]=19595*M,ae[M+256|0]=38470*M,ae[M+512|0]=7471*M+32768,ae[M+768|0]=-11059*M,ae[M+1024|0]=-21709*M,ae[M+1280|0]=32768*M+8421375,ae[M+1536|0]=-27439*M,ae[M+1792|0]=-5329*M})(),se(t)}function $o(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function C5(t){function e(Q){if(!Q)throw Error("assert :P")}function n(Q,ue,O){for(var R=0;4>R;R++)if(Q[ue+R]!=O.charCodeAt(R))return!0;return!1}function r(Q,ue,O,R,z){for(var Y=0;Y<z;Y++)Q[ue+Y]=O[R+Y]}function a(Q,ue,O,R){for(var z=0;z<R;z++)Q[ue+z]=O}function o(Q){return new Int32Array(Q)}function u(Q,ue){for(var O=[],R=0;R<Q;R++)O.push(new ue);return O}function c(Q,ue){var O=[];return(function R(z,Y,Ce){for(var Ae=Ce[Y],Pe=0;Pe<Ae&&(z.push(Ce.length>Y+1?[]:new ue),!(Ce.length<Y+1));Pe++)R(z[Pe],Y+1,Ce)})(O,0,Q),O}var f=function(){var Q=this;function ue(h,x){for(var C=1<<x-1>>>0;h&C;)C>>>=1;return C?(h&C-1)+C:h}function O(h,x,C,T,V){e(!(T%C));do h[x+(T-=C)]=V;while(0<T)}function R(h,x,C,T,V){if(e(2328>=V),512>=V)var K=o(512);else if((K=o(V))==null)return 0;return(function(Z,J,ie,de,Ee,ze){var fe,Fe,Ue=J,nt=1<<ie,He=o(16),Je=o(16);for(e(Ee!=0),e(de!=null),e(Z!=null),e(0<ie),Fe=0;Fe<Ee;++Fe){if(15<de[Fe])return 0;++He[de[Fe]]}if(He[0]==Ee)return 0;for(Je[1]=0,fe=1;15>fe;++fe){if(He[fe]>1<<fe)return 0;Je[fe+1]=Je[fe]+He[fe]}for(Fe=0;Fe<Ee;++Fe)fe=de[Fe],0<de[Fe]&&(ze[Je[fe]++]=Fe);if(Je[15]==1)return(de=new z).g=0,de.value=ze[0],O(Z,Ue,1,nt,de),nt;var tt,lt=-1,dt=nt-1,dn=0,Yt=1,zn=1,nn=1<<ie;for(Fe=0,fe=1,Ee=2;fe<=ie;++fe,Ee<<=1){if(Yt+=zn<<=1,0>(zn-=He[fe]))return 0;for(;0<He[fe];--He[fe])(de=new z).g=fe,de.value=ze[Fe++],O(Z,Ue+dn,Ee,nn,de),dn=ue(dn,fe)}for(fe=ie+1,Ee=2;15>=fe;++fe,Ee<<=1){if(Yt+=zn<<=1,0>(zn-=He[fe]))return 0;for(;0<He[fe];--He[fe]){if(de=new z,(dn&dt)!=lt){for(Ue+=nn,tt=1<<(lt=fe)-ie;15>lt&&!(0>=(tt-=He[lt]));)++lt,tt<<=1;nt+=nn=1<<(tt=lt-ie),Z[J+(lt=dn&dt)].g=tt+ie,Z[J+lt].value=Ue-J-lt}de.g=fe-ie,de.value=ze[Fe++],O(Z,Ue+(dn>>ie),Ee,nn,de),dn=ue(dn,fe)}}return Yt!=2*Je[15]-1?0:nt})(h,x,C,T,V,K)}function z(){this.value=this.g=0}function Y(){this.value=this.g=0}function Ce(){this.G=u(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ra,Y)}function Ae(h,x,C,T){e(h!=null),e(x!=null),e(2147483648>T),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=x,h.pa=C,h.Jd=x,h.Yc=C+T,h.Zc=4<=T?C+T-4+1:C,Re(h)}function Pe(h,x){for(var C=0;0<x--;)C|=Me(h,128)<<x;return C}function ce(h,x){var C=Pe(h,x);return Ie(h)?-C:C}function ge(h,x,C,T){var V,K=0;for(e(h!=null),e(x!=null),e(4294967288>T),h.Sb=T,h.Ra=0,h.u=0,h.h=0,4<T&&(T=4),V=0;V<T;++V)K+=x[C+V]<<8*V;h.Ra=K,h.bb=T,h.oa=x,h.pa=C}function De(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ml-8>>>0,++h.bb,h.u-=8;me(h)&&(h.h=1,h.u=0)}function se(h,x){if(e(0<=x),!h.h&&x<=ya){var C=ne(h)&xa[x];return h.u+=x,De(h),C}return h.h=1,h.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(h){return h.Ra>>>(h.u&ml-1)>>>0}function me(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ml}function ye(h,x){h.u=x,h.h=me(h)}function be(h){h.u>=mo&&(e(h.u>=mo),De(h))}function Re(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ie(h){return Pe(h,1)}function Me(h,x){var C=h.Ca;0>h.b&&Re(h);var T=h.b,V=C*x>>>8,K=(h.I>>>T>V)+0;for(K?(C-=V,h.I-=V+1<<T>>>0):C=V+1,T=C,V=0;256<=T;)V+=8,T>>=8;return T=7^V+To[T],h.b-=T,h.Ca=(C<<T)-1,K}function Ze(h,x,C){h[x+0]=C>>24&255,h[x+1]=C>>16&255,h[x+2]=C>>8&255,h[x+3]=255&C}function ft(h,x){return h[x+0]|h[x+1]<<8}function mt(h,x){return ft(h,x)|h[x+2]<<16}function Ft(h,x){return ft(h,x)|ft(h,x+2)<<16}function le(h,x){var C=1<<x;return e(h!=null),e(0<x),h.X=o(C),h.X==null?0:(h.Mb=32-x,h.Xa=x,1)}function gt(h,x){e(h!=null),e(x!=null),e(h.Xa==x.Xa),r(x.X,0,h.X,0,1<<x.Xa)}function xe(){this.X=[],this.Xa=this.Mb=0}function X(h,x,C,T){e(C!=null),e(T!=null);var V=C[0],K=T[0];return V==0&&(V=(h*K+x/2)/x),K==0&&(K=(x*V+h/2)/h),0>=V||0>=K?0:(C[0]=V,T[0]=K,1)}function B(h,x){return h+(1<<x)-1>>>x}function ve(h,x){return((4278255360&h)+(4278255360&x)>>>0&4278255360)+((16711935&h)+(16711935&x)>>>0&16711935)>>>0}function re(h,x){Q[x]=function(C,T,V,K,Z,J,ie){var de;for(de=0;de<Z;++de){var Ee=Q[h](J[ie+de-1],V,K+de);J[ie+de]=ve(C[T+de],Ee)}}}function D(){this.ud=this.hd=this.jd=0}function H(h,x){return((4278124286&(h^x))>>>1)+(h&x)>>>0}function je(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ne(h,x){return je(h+(h-x+.5>>1))}function Te(h,x,C){return Math.abs(x-C)-Math.abs(h-C)}function $e(h,x,C,T,V,K,Z){for(T=K[Z-1],C=0;C<V;++C)K[Z+C]=T=ve(h[x+C],T)}function st(h,x,C,T,V){var K;for(K=0;K<C;++K){var Z=h[x+K],J=Z>>8&255,ie=16711935&(ie=(ie=16711935&Z)+((J<<16)+J));T[V+K]=(4278255360&Z)+ie>>>0}}function ct(h,x){x.jd=255&h,x.hd=h>>8&255,x.ud=h>>16&255}function jt(h,x,C,T,V,K){var Z;for(Z=0;Z<T;++Z){var J=x[C+Z],ie=J>>>8,de=J,Ee=255&(Ee=(Ee=J>>>16)+((h.jd<<24>>24)*(ie<<24>>24)>>>5));de=255&(de=(de+=(h.hd<<24>>24)*(ie<<24>>24)>>>5)+((h.ud<<24>>24)*(Ee<<24>>24)>>>5)),V[K+Z]=(4278255360&J)+(Ee<<16)+de}}function Pt(h,x,C,T,V){Q[x]=function(K,Z,J,ie,de,Ee,ze,fe,Fe){for(ie=ze;ie<fe;++ie)for(ze=0;ze<Fe;++ze)de[Ee++]=V(J[T(K[Z++])])},Q[h]=function(K,Z,J,ie,de,Ee,ze){var fe=8>>K.b,Fe=K.Ea,Ue=K.K[0],nt=K.w;if(8>fe)for(K=(1<<K.b)-1,nt=(1<<fe)-1;Z<J;++Z){var He,Je=0;for(He=0;He<Fe;++He)He&K||(Je=T(ie[de++])),Ee[ze++]=V(Ue[Je&nt]),Je>>=fe}else Q["VP8LMapColor"+C](ie,de,Ue,nt,Ee,ze,Z,J,Fe)}}function pr(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=K>>16&255,T[V++]=K>>8&255,T[V++]=255&K}}function yn(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=K>>16&255,T[V++]=K>>8&255,T[V++]=255&K,T[V++]=K>>24&255}}function Gt(h,x,C,T,V){for(C=x+C;x<C;){var K=(Z=h[x++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;T[V++]=K,T[V++]=Z}}function Ut(h,x,C,T,V){for(C=x+C;x<C;){var K=(Z=h[x++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;T[V++]=K,T[V++]=Z}}function tn(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=255&K,T[V++]=K>>8&255,T[V++]=K>>16&255}}function Ge(h,x,C,T,V,K){if(K==0)for(C=x+C;x<C;)Ze(T,((K=h[x++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else r(T,V,h,x,C)}function at(h,x){Q[x][0]=Q[h+"0"],Q[x][1]=Q[h+"1"],Q[x][2]=Q[h+"2"],Q[x][3]=Q[h+"3"],Q[x][4]=Q[h+"4"],Q[x][5]=Q[h+"5"],Q[x][6]=Q[h+"6"],Q[x][7]=Q[h+"7"],Q[x][8]=Q[h+"8"],Q[x][9]=Q[h+"9"],Q[x][10]=Q[h+"10"],Q[x][11]=Q[h+"11"],Q[x][12]=Q[h+"12"],Q[x][13]=Q[h+"13"],Q[x][14]=Q[h+"0"],Q[x][15]=Q[h+"0"]}function Xe(h){return h==_c||h==Xl||h==Nu||h==Su}function an(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new an,this.f.kb=new sr,this.sd=null}function Jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ys(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function ir(h,x){var C=h.T,T=x.ba.f.RGBA,V=T.eb,K=T.fb+h.ka*T.A,Z=na[x.ba.S],J=h.y,ie=h.O,de=h.f,Ee=h.N,ze=h.ea,fe=h.W,Fe=x.cc,Ue=x.dc,nt=x.Mc,He=x.Nc,Je=h.ka,tt=h.ka+h.T,lt=h.U,dt=lt+1>>1;for(Je==0?Z(J,ie,null,null,de,Ee,ze,fe,de,Ee,ze,fe,V,K,null,null,lt):(Z(x.ec,x.fc,J,ie,Fe,Ue,nt,He,de,Ee,ze,fe,V,K-T.A,V,K,lt),++C);Je+2<tt;Je+=2)Fe=de,Ue=Ee,nt=ze,He=fe,Ee+=h.Rc,fe+=h.Rc,K+=2*T.A,Z(J,(ie+=2*h.fa)-h.fa,J,ie,Fe,Ue,nt,He,de,Ee,ze,fe,V,K-T.A,V,K,lt);return ie+=h.fa,h.j+tt<h.o?(r(x.ec,x.fc,J,ie,lt),r(x.cc,x.dc,de,Ee,dt),r(x.Mc,x.Nc,ze,fe,dt),C--):1&tt||Z(J,ie,null,null,de,Ee,ze,fe,de,Ee,ze,fe,V,K+T.A,null,null,lt),C}function Nr(h,x,C){var T=h.F,V=[h.J];if(T!=null){var K=h.U,Z=x.ba.S,J=Z==wu||Z==Nu;x=x.ba.f.RGBA;var ie=[0],de=h.ka;ie[0]=h.T,h.Kb&&(de==0?--ie[0]:(--de,V[0]-=h.width),h.j+h.ka+h.T==h.o&&(ie[0]=h.o-h.j-de));var Ee=x.eb;de=x.fb+de*x.A,h=yu(T,V[0],h.width,K,ie,Ee,de+(J?0:3),x.A),e(C==ie),h&&Xe(Z)&&Yl(Ee,de,J,K,ie,x.A)}return 0}function xr(h){var x=h.ma,C=x.ba.S,T=11>C,V=C==yl||C==bu||C==wu||C==Wr||C==12||Xe(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!yc(x.Oa,h,V?11:12))return 0;if(V&&Xe(C)&&Ui(),h.da)alert("todo:use_scaling");else{if(T){if(x.Ib=ys,h.Kb){if(C=h.U+1>>1,x.memory=o(h.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+h.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=ir,Ui()}}else alert("todo:EmitYUV");V&&(x.Jb=Nr,T&&bs())}if(T&&!ji){for(h=0;256>h;++h)ra[h]=89858*(h-128)+Za>>Do,sa[h]=-22014*(h-128)+Za,Tc[h]=-45773*(h-128),nc[h]=113618*(h-128)+Za>>Do;for(h=Ir;h<qr;++h)x=76283*(h-16)+Za>>Do,cd[h-Ir]=Qe(x,255),Wh[h-Ir]=Qe(x+8>>4,15);ji=1}return 1}function on(h){var x=h.ma,C=h.U,T=h.T;return e(!(1&h.ka)),0>=C||0>=T?0:(C=x.Ib(h,x),x.Jb!=null&&x.Jb(h,x,C),x.Dc+=C,1)}function As(h){h.ma.memory=null}function Us(h,x,C,T){return se(h,8)!=47?0:(x[0]=se(h,14)+1,C[0]=se(h,14)+1,T[0]=se(h,1),se(h,3)!=0?0:!h.h)}function fs(h,x){if(4>h)return h+1;var C=h-2>>1;return(2+(1&h)<<C)+se(x,C)+1}function Ps(h,x){return 120<x?x-120:1<=(C=((C=fg[x-1])>>4)*h+(8-(15&C)))?C:1;var C}function lr(h,x,C){var T=ne(C),V=h[x+=255&T].g-8;return 0<V&&(ye(C,C.u+8),T=ne(C),x+=h[x].value,x+=T&(1<<V)-1),ye(C,C.u+h[x].g),h[x].value}function Fr(h,x,C){return C.g+=h.g,C.value+=h.value<<x>>>0,e(8>=C.g),h.g}function yr(h,x,C){var T=h.xc;return e((x=T==0?0:h.vc[h.md*(C>>T)+(x>>T)])<h.Wb),h.Ya[x]}function ks(h,x,C,T){var V=h.ab,K=h.c*x,Z=h.C;x=Z+x;var J=C,ie=T;for(T=h.Ta,C=h.Ua;0<V--;){var de=h.gc[V],Ee=Z,ze=x,fe=J,Fe=ie,Ue=(ie=T,J=C,de.Ea);switch(e(Ee<ze),e(ze<=de.nc),de.hc){case 2:Ls(fe,Fe,(ze-Ee)*Ue,ie,J);break;case 0:var nt=Ee,He=ze,Je=ie,tt=J,lt=(nn=de).Ea;nt==0&&(Eo(fe,Fe,null,null,1,Je,tt),$e(fe,Fe+1,0,0,lt-1,Je,tt+1),Fe+=lt,tt+=lt,++nt);for(var dt=1<<nn.b,dn=dt-1,Yt=B(lt,nn.b),zn=nn.K,nn=nn.w+(nt>>nn.b)*Yt;nt<He;){var fr=zn,Ss=nn,Hn=1;for(go(fe,Fe,Je,tt-lt,1,Je,tt);Hn<lt;){var Xt=(Hn&~dn)+dt;Xt>lt&&(Xt=lt),(0,Gl[fr[Ss++]>>8&15])(fe,Fe+ +Hn,Je,tt+Hn-lt,Xt-Hn,Je,tt+Hn),Hn=Xt}Fe+=lt,tt+=lt,++nt&dn||(nn+=Yt)}ze!=de.nc&&r(ie,J-Ue,ie,J+(ze-Ee-1)*Ue,Ue);break;case 1:for(Ue=fe,He=Fe,lt=(fe=de.Ea)-(tt=fe&~(Je=(Fe=1<<de.b)-1)),nt=B(fe,de.b),dt=de.K,de=de.w+(Ee>>de.b)*nt;Ee<ze;){for(dn=dt,Yt=de,zn=new D,nn=He+tt,fr=He+fe;He<nn;)ct(dn[Yt++],zn),wc(zn,Ue,He,Fe,ie,J),He+=Fe,J+=Fe;He<fr&&(ct(dn[Yt++],zn),wc(zn,Ue,He,lt,ie,J),He+=lt,J+=lt),++Ee&Je||(de+=nt)}break;case 3:if(fe==ie&&Fe==J&&0<de.b){for(He=ie,fe=Ue=J+(ze-Ee)*Ue-(tt=(ze-Ee)*B(de.Ea,de.b)),Fe=ie,Je=J,nt=[],tt=(lt=tt)-1;0<=tt;--tt)nt[tt]=Fe[Je+tt];for(tt=lt-1;0<=tt;--tt)He[fe+tt]=nt[tt];Hl(de,Ee,ze,ie,Ue,ie,J)}else Hl(de,Ee,ze,fe,Fe,ie,J)}J=T,ie=C}ie!=C&&r(T,C,J,ie,K)}function Jr(h,x){var C=h.V,T=h.Ba+h.c*h.C,V=x-h.C;if(e(x<=h.l.o),e(16>=V),0<V){var K=h.l,Z=h.Ta,J=h.Ua,ie=K.width;if(ks(h,V,C,T),V=J=[J],e((C=h.C)<(T=x)),e(K.v<K.va),T>K.o&&(T=K.o),C<K.j){var de=K.j-C;C=K.j,V[0]+=de*ie}if(C>=T?C=0:(V[0]+=4*K.v,K.ka=C-K.j,K.U=K.va-K.v,K.T=T-C,C=1),C){if(J=J[0],11>(C=h.ca).S){var Ee=C.f.RGBA,ze=(T=C.S,V=K.U,K=K.T,de=Ee.eb,Ee.A),fe=K;for(Ee=Ee.fb+h.Ma*Ee.A;0<fe--;){var Fe=Z,Ue=J,nt=V,He=de,Je=Ee;switch(T){case id:Nc(Fe,Ue,nt,He,Je);break;case yl:Lo(Fe,Ue,nt,He,Je);break;case _c:Lo(Fe,Ue,nt,He,Je),Yl(He,Je,0,nt,1,0);break;case Uh:Kl(Fe,Ue,nt,He,Je);break;case bu:Ge(Fe,Ue,nt,He,Je,1);break;case Xl:Ge(Fe,Ue,nt,He,Je,1),Yl(He,Je,0,nt,1,0);break;case wu:Ge(Fe,Ue,nt,He,Je,0);break;case Nu:Ge(Fe,Ue,nt,He,Je,0),Yl(He,Je,1,nt,1,0);break;case Wr:gl(Fe,Ue,nt,He,Je);break;case Su:gl(Fe,Ue,nt,He,Je),wf(He,Je,nt,1,0);break;case ad:vl(Fe,Ue,nt,He,Je);break;default:e(0)}J+=ie,Ee+=ze}h.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=C.height)}}h.C=x,e(h.C<=h.i)}function Tr(h){var x;if(0<h.ua)return 0;for(x=0;x<h.Wb;++x){var C=h.Ya[x].G,T=h.Ya[x].H;if(0<C[1][T[1]+0].g||0<C[2][T[2]+0].g||0<C[3][T[3]+0].g)return 0}return 1}function fi(h,x,C,T,V,K){if(h.Z!=0){var Z=h.qd,J=h.rd;for(e(Ei[h.Z]!=null);x<C;++x)Ei[h.Z](Z,J,T,V,T,V,K),Z=T,J=V,V+=K;h.qd=Z,h.rd=J}}function es(h,x){var C=h.l.ma,T=C.Z==0||C.Z==1?h.l.j:h.C;if(T=h.C<T?T:h.C,e(x<=h.l.o),x>T){var V=h.l.width,K=C.ca,Z=C.tb+V*T,J=h.V,ie=h.Ba+h.c*T,de=h.gc;e(h.ab==1),e(de[0].hc==3),Ka(de[0],T,x,J,ie,K,Z),fi(C,T,x,K,Z,V)}h.C=h.Ma=x}function Ts(h,x,C,T,V,K,Z){var J=h.$/T,ie=h.$%T,de=h.m,Ee=h.s,ze=C+h.$,fe=ze;V=C+T*V;var Fe=C+T*K,Ue=280+Ee.ua,nt=h.Pb?J:16777216,He=0<Ee.ua?Ee.Wa:null,Je=Ee.wc,tt=ze<Fe?yr(Ee,ie,J):null;e(h.C<K),e(Fe<=V);var lt=!1;e:for(;;){for(;lt||ze<Fe;){var dt=0;if(J>=nt){var dn=ze-C;e((nt=h).Pb),nt.wd=nt.m,nt.xd=dn,0<nt.s.ua&&gt(nt.s.Wa,nt.s.vb),nt=J+ld}if(ie&Je||(tt=yr(Ee,ie,J)),e(tt!=null),tt.Qb&&(x[ze]=tt.qb,lt=!0),!lt)if(be(de),tt.jc){dt=de,dn=x;var Yt=ze,zn=tt.pd[ne(dt)&Ra-1];e(tt.jc),256>zn.g?(ye(dt,dt.u+zn.g),dn[Yt]=zn.value,dt=0):(ye(dt,dt.u+zn.g-256),e(256<=zn.value),dt=zn.value),dt==0&&(lt=!0)}else dt=lr(tt.G[0],tt.H[0],de);if(de.h)break;if(lt||256>dt){if(!lt)if(tt.nd)x[ze]=(tt.qb|dt<<8)>>>0;else{if(be(de),lt=lr(tt.G[1],tt.H[1],de),be(de),dn=lr(tt.G[2],tt.H[2],de),Yt=lr(tt.G[3],tt.H[3],de),de.h)break;x[ze]=(Yt<<24|lt<<16|dt<<8|dn)>>>0}if(lt=!1,++ze,++ie>=T&&(ie=0,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J),He!=null))for(;fe<ze;)dt=x[fe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt}else if(280>dt){if(dt=fs(dt-256,de),dn=lr(tt.G[4],tt.H[4],de),be(de),dn=Ps(T,dn=fs(dn,de)),de.h)break;if(ze-C<dn||V-ze<dt)break e;for(Yt=0;Yt<dt;++Yt)x[ze+Yt]=x[ze+Yt-dn];for(ze+=dt,ie+=dt;ie>=T;)ie-=T,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J);if(e(ze<=V),ie&Je&&(tt=yr(Ee,ie,J)),He!=null)for(;fe<ze;)dt=x[fe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt}else{if(!(dt<Ue))break e;for(lt=dt-280,e(He!=null);fe<ze;)dt=x[fe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt;dt=ze,e(!(lt>>>(dn=He).Xa)),x[dt]=dn.X[lt],lt=!0}lt||e(de.h==me(de))}if(h.Pb&&de.h&&ze<V)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&gt(h.s.vb,h.s.Wa);else{if(de.h)break e;Z?.(h,J>K?K:J),h.a=0,h.$=ze-C}return 1}return h.a=3,0}function as(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var x=h.Wa;x!=null&&(x.X=null),h.vb=null,e(h!=null)}function zs(){var h=new Tt;return h==null?null:(h.a=0,h.xb=Pc,at("Predictor","VP8LPredictors"),at("Predictor","VP8LPredictors_C"),at("PredictorAdd","VP8LPredictorsAdd"),at("PredictorAdd","VP8LPredictorsAdd_C"),Ls=st,wc=jt,Nc=pr,Lo=yn,gl=Gt,vl=Ut,Kl=tn,Q.VP8LMapColor32b=vo,Q.VP8LMapColor8b=Wl,h)}function mr(h,x,C,T,V){var K=1,Z=[h],J=[x],ie=T.m,de=T.s,Ee=null,ze=0;e:for(;;){if(C)for(;K&&se(ie,1);){var fe=Z,Fe=J,Ue=T,nt=1,He=Ue.m,Je=Ue.gc[Ue.ab],tt=se(He,2);if(Ue.Oc&1<<tt)K=0;else{switch(Ue.Oc|=1<<tt,Je.hc=tt,Je.Ea=fe[0],Je.nc=Fe[0],Je.K=[null],++Ue.ab,e(4>=Ue.ab),tt){case 0:case 1:Je.b=se(He,3)+2,nt=mr(B(Je.Ea,Je.b),B(Je.nc,Je.b),0,Ue,Je.K),Je.K=Je.K[0];break;case 3:var lt,dt=se(He,8)+1,dn=16<dt?0:4<dt?1:2<dt?2:3;if(fe[0]=B(Je.Ea,dn),Je.b=dn,lt=nt=mr(dt,1,0,Ue,Je.K)){var Yt,zn=dt,nn=Je,fr=1<<(8>>nn.b),Ss=o(fr);if(Ss==null)lt=0;else{var Hn=nn.K[0],Xt=nn.w;for(Ss[0]=nn.K[0][0],Yt=1;Yt<1*zn;++Yt)Ss[Yt]=ve(Hn[Xt+Yt],Ss[Yt-1]);for(;Yt<4*fr;++Yt)Ss[Yt]=0;nn.K[0]=null,nn.K[0]=Ss,lt=1}}nt=lt;break;case 2:break;default:e(0)}K=nt}}if(Z=Z[0],J=J[0],K&&se(ie,1)&&!(K=1<=(ze=se(ie,4))&&11>=ze)){T.a=3;break e}var It;if(It=K)t:{var Rs,Tn,ur,Yr=T,pi=Z,Ws=J,gs=ze,ei=C,mi=Yr.m,ls=Yr.s,gr=[null],_r=1,cs=0,Ar=$h[gs];n:for(;;){if(ei&&se(mi,1)){var js=se(mi,3)+2,Cs=B(pi,js),Gr=B(Ws,js),Li=Cs*Gr;if(!mr(Cs,Gr,0,Yr,gr))break n;for(gr=gr[0],ls.xc=js,Rs=0;Rs<Li;++Rs){var Ur=gr[Rs]>>8&65535;gr[Rs]=Ur,Ur>=_r&&(_r=Ur+1)}}if(mi.h)break n;for(Tn=0;5>Tn;++Tn){var Kr=Jl[Tn];!Tn&&0<gs&&(Kr+=1<<gs),cs<Kr&&(cs=Kr)}var Gs=u(_r*Ar,z),Ci=_r,ia=u(Ci,Ce);if(ia==null)var Ds=null;else e(65536>=Ci),Ds=ia;var Is=o(cs);if(Ds==null||Is==null||Gs==null){Yr.a=1;break n}var Ri=Gs;for(Rs=ur=0;Rs<_r;++Rs){var Qr=Ds[Rs],Di=Qr.G,Fa=Qr.H,Ya=0,gi=1,Fs=0;for(Tn=0;5>Tn;++Tn){Kr=Jl[Tn],Di[Tn]=Ri,Fa[Tn]=ur,!Tn&&0<gs&&(Kr+=1<<gs);s:{var Nl,Fo=Kr,Ec=Yr,bo=Is,Kh=Ri,Rf=ur,ns=0,Xa=Ec.m,Df=se(Xa,1);if(a(bo,0,0,Fo),Df){var If=se(Xa,1)+1,ud=se(Xa,1),dd=se(Xa,ud==0?1:8);bo[dd]=1,If==2&&(bo[dd=se(Xa,8)]=1);var wo=1}else{var us=o(19),Ks=se(Xa,4)+4;if(19<Ks){Ec.a=3;var Os=0;break s}for(Nl=0;Nl<Ks;++Nl)us[dg[Nl]]=se(Xa,3);var Lc=void 0,Oo=void 0,Rc=Ec,vg=us,ti=Fo,fd=bo,Pu=0,No=Rc.m,Ja=8,ba=u(128,z);r:for(;R(ba,0,7,vg,19);){if(se(No,1)){var ku=2+2*se(No,3);if((Lc=2+se(No,ku))>ti)break r}else Lc=ti;for(Oo=0;Oo<ti&&Lc--;){be(No);var hd=ba[0+(127&ne(No))];ye(No,No.u+hd.g);var Sl=hd.value;if(16>Sl)fd[Oo++]=Sl,Sl!=0&&(Ja=Sl);else{var Qh=Sl==16,Ff=Sl-16,Zh=od[Ff],Of=se(No,ju[Ff])+Zh;if(Oo+Of>ti)break r;for(var Yh=Qh?Ja:0;0<Of--;)fd[Oo++]=Yh}}Pu=1;break r}Pu||(Rc.a=3),wo=Pu}(wo=wo&&!Xa.h)&&(ns=R(Kh,Rf,8,bo,Fo)),wo&&ns!=0?Os=ns:(Ec.a=3,Os=0)}if(Os==0)break n;if(gi&&zh[Tn]==1&&(gi=Ri[ur].g==0),Ya+=Ri[ur].g,ur+=Os,3>=Tn){var Dc,pd=Is[0];for(Dc=1;Dc<Kr;++Dc)Is[Dc]>pd&&(pd=Is[Dc]);Fs+=pd}}if(Qr.nd=gi,Qr.Qb=0,gi&&(Qr.qb=(Di[3][Fa[3]+0].value<<24|Di[1][Fa[1]+0].value<<16|Di[2][Fa[2]+0].value)>>>0,Ya==0&&256>Di[0][Fa[0]+0].value&&(Qr.Qb=1,Qr.qb+=Di[0][Fa[0]+0].value<<8)),Qr.jc=!Qr.Qb&&6>Fs,Qr.jc){var Tu,wa=Qr;for(Tu=0;Tu<Ra;++Tu){var Mo=Tu,eo=wa.pd[Mo],sc=wa.G[0][wa.H[0]+Mo];256<=sc.value?(eo.g=sc.g+256,eo.value=sc.value):(eo.g=0,eo.value=0,Mo>>=Fr(sc,8,eo),Mo>>=Fr(wa.G[1][wa.H[1]+Mo],16,eo),Mo>>=Fr(wa.G[2][wa.H[2]+Mo],0,eo),Fr(wa.G[3][wa.H[3]+Mo],24,eo))}}}ls.vc=gr,ls.Wb=_r,ls.Ya=Ds,ls.yc=Gs,It=1;break t}It=0}if(!(K=It)){T.a=3;break e}if(0<ze){if(de.ua=1<<ze,!le(de.Wa,ze)){T.a=1,K=0;break e}}else de.ua=0;var md=T,gd=Z,Xh=J,vd=md.s,xd=vd.xc;if(md.c=gd,md.i=Xh,vd.md=B(gd,xd),vd.wc=xd==0?-1:(1<<xd)-1,C){T.xb=yo;break e}if((Ee=o(Z*J))==null){T.a=1,K=0;break e}K=(K=Ts(T,Ee,0,Z,J,J,null))&&!ie.h;break e}return K?(V!=null?V[0]=Ee:(e(Ee==null),e(C)),T.$=0,C||as(de)):as(de),K}function hs(h,x){var C=h.c*h.i,T=C+x+16*x;return e(h.c<=x),h.V=o(T),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+C+x,1)}function Xs(h,x){var C=h.C,T=x-C,V=h.V,K=h.Ba+h.c*C;for(e(x<=h.l.o);0<T;){var Z=16<T?16:T,J=h.l.ma,ie=h.l.width,de=ie*Z,Ee=J.ca,ze=J.tb+ie*C,fe=h.Ta,Fe=h.Ua;ks(h,Z,V,K),Nf(fe,Fe,Ee,ze,de),fi(J,C,C+Z,Ee,ze,ie),T-=Z,V+=Z*h.c,C+=Z}e(C==x),h.C=h.Ma=x}function Qi(){this.ub=this.yd=this.td=this.Rb=0}function qi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ki(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Un(){this.Yb=(function(){var h=[];return(function x(C,T,V){for(var K=V[T],Z=0;Z<K&&(C.push(V.length>T+1?[]:0),!(V.length<T+1));Z++)x(C[Z],T+1,V)})(h,0,[3,11]),h})()}function bi(){this.jb=o(3),this.Wc=c([4,8],Un),this.Xc=c([4,17],Un)}function fn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function Nn(){this.Na=this.la=0}function Kt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vt(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new Fn),this.aa=0,this.l=new ut}function Ke(){this.y=o(16),this.f=o(8),this.ea=o(8)}function it(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Qi,this.Kc=new qi,this.ed=new fn,this.Qa=new ki,this.Ic=this.$c=this.Aa=0,this.D=new vt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,M),this.ia=0,this.pb=u(4,Kt),this.Pa=new bi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ke),this.Hd=0,this.rb=Array(new Nn),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fn),this.L=this.aa=0,this.gd=c([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qe(h,x){return 0>h?0:h>x?x:h}function ut(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lt(){var h=new it;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ec||(ec=kt)),h}function wt(h,x,C){return h.a==0&&(h.a=x,h.sc=C,h.cb=0),0}function Ot(h,x,C){return 3<=C&&h[x+0]==157&&h[x+1]==1&&h[x+2]==42}function Nt(h,x){if(h==null)return 0;if(h.a=0,h.sc="OK",x==null)return wt(h,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,T=x.w,V=x.ha;if(4>V)return wt(h,7,"Truncated header.");var K=C[T+0]|C[T+1]<<8|C[T+2]<<16,Z=h.Od;if(Z.Rb=!(1&K),Z.td=K>>1&7,Z.yd=K>>4&1,Z.ub=K>>5,3<Z.td)return wt(h,3,"Incorrect keyframe parameters.");if(!Z.yd)return wt(h,4,"Frame not displayable.");T+=3,V-=3;var J=h.Kc;if(Z.Rb){if(7>V)return wt(h,7,"cannot parse picture header");if(!Ot(C,T,V))return wt(h,3,"Bad code word");J.c=16383&(C[T+4]<<8|C[T+3]),J.Td=C[T+4]>>6,J.i=16383&(C[T+6]<<8|C[T+5]),J.Ud=C[T+6]>>6,T+=7,V-=7,h.za=J.c+15>>4,h.Ub=J.i+15>>4,x.width=J.c,x.height=J.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((K=h.Pa).jb,0,255,K.jb.length),e((K=h.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,a(K.Zb,0,0,K.Zb.length),a(K.Lb,0,0,K.Lb)}if(Z.ub>V)return wt(h,7,"bad partition length");Ae(K=h.m,C,T,Z.ub),T+=Z.ub,V-=Z.ub,Z.Rb&&(J.Ld=Ie(K),J.Kd=Ie(K)),J=h.Qa;var ie,de=h.Pa;if(e(K!=null),e(J!=null),J.Cb=Ie(K),J.Cb){if(J.Bb=Ie(K),Ie(K)){for(J.Fb=Ie(K),ie=0;4>ie;++ie)J.Zb[ie]=Ie(K)?ce(K,7):0;for(ie=0;4>ie;++ie)J.Lb[ie]=Ie(K)?ce(K,6):0}if(J.Bb)for(ie=0;3>ie;++ie)de.jb[ie]=Ie(K)?Pe(K,8):255}else J.Bb=0;if(K.Ka)return wt(h,3,"cannot parse segment header");if((J=h.ed).zd=Ie(K),J.Tb=Pe(K,6),J.wb=Pe(K,3),J.Pc=Ie(K),J.Pc&&Ie(K)){for(de=0;4>de;++de)Ie(K)&&(J.vd[de]=ce(K,6));for(de=0;4>de;++de)Ie(K)&&(J.od[de]=ce(K,6))}if(h.L=J.Tb==0?0:J.zd?1:2,K.Ka)return wt(h,3,"cannot parse filter header");var Ee=V;if(V=ie=T,T=ie+Ee,J=Ee,h.Xb=(1<<Pe(h.m,2))-1,Ee<3*(de=h.Xb))C=7;else{for(ie+=3*de,J-=3*de,Ee=0;Ee<de;++Ee){var ze=C[V+0]|C[V+1]<<8|C[V+2]<<16;ze>J&&(ze=J),Ae(h.Jc[+Ee],C,ie,ze),ie+=ze,J-=ze,V+=3}Ae(h.Jc[+de],C,ie,J),C=ie<T?0:5}if(C!=0)return wt(h,C,"cannot parse partitions");for(C=Pe(ie=h.m,7),V=Ie(ie)?ce(ie,4):0,T=Ie(ie)?ce(ie,4):0,J=Ie(ie)?ce(ie,4):0,de=Ie(ie)?ce(ie,4):0,ie=Ie(ie)?ce(ie,4):0,Ee=h.Qa,ze=0;4>ze;++ze){if(Ee.Cb){var fe=Ee.Zb[ze];Ee.Fb||(fe+=C)}else{if(0<ze){h.pb[ze]=h.pb[0];continue}fe=C}var Fe=h.pb[ze];Fe.Sc[0]=Ac[Qe(fe+V,127)],Fe.Sc[1]=Cu[Qe(fe+0,127)],Fe.Eb[0]=2*Ac[Qe(fe+T,127)],Fe.Eb[1]=101581*Cu[Qe(fe+J,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=Ac[Qe(fe+de,117)],Fe.Qc[1]=Cu[Qe(fe+ie,127)],Fe.lc=fe+ie}if(!Z.Rb)return wt(h,4,"Not a key frame.");for(Ie(K),Z=h.Pa,C=0;4>C;++C){for(V=0;8>V;++V)for(T=0;3>T;++T)for(J=0;11>J;++J)de=Me(K,pg[C][V][T][J])?Pe(K,8):Hh[C][V][T][J],Z.Wc[C][V].Yb[T][J]=de;for(V=0;17>V;++V)Z.Xc[C][V]=Z.Wc[C][Tf[V]]}return h.kc=Ie(K),h.kc&&(h.Bd=Pe(K,8)),h.cb=1}function kt(h,x,C,T,V,K,Z){var J=x[V].Yb[C];for(C=0;16>V;++V){if(!Me(h,J[C+0]))return V;for(;!Me(h,J[C+1]);)if(J=x[++V].Yb[0],C=0,V==16)return 16;var ie=x[V+1].Yb;if(Me(h,J[C+2])){var de=h,Ee=0;if(Me(de,(fe=J)[(ze=C)+3]))if(Me(de,fe[ze+6])){for(J=0,ze=2*(Ee=Me(de,fe[ze+8]))+(fe=Me(de,fe[ze+9+Ee])),Ee=0,fe=Pf[ze];fe[J];++J)Ee+=Ee+Me(de,fe[J]);Ee+=3+(8<<ze)}else Me(de,fe[ze+7])?(Ee=7+2*Me(de,165),Ee+=Me(de,145)):Ee=5+Me(de,159);else Ee=Me(de,fe[ze+4])?3+Me(de,fe[ze+5]):2;J=ie[2]}else Ee=1,J=ie[1];ie=Z+kf[V],0>(de=h).b&&Re(de);var ze,fe=de.b,Fe=(ze=de.Ca>>1)-(de.I>>fe)>>31;--de.b,de.Ca+=Fe,de.Ca|=1,de.I-=(ze+1&Fe)<<fe,K[ie]=((Ee^Fe)-Fe)*T[(0<V)+0]}return 16}function Mt(h){var x=h.rb[h.sb-1];x.la=0,x.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function $t(h,x,C,T,V){V=h[x+C+32*T]+(V>>3),h[x+C+32*T]=-256&V?0>V?0:255:V}function Bt(h,x,C,T,V,K){$t(h,x,0,C,T+V),$t(h,x,1,C,T+K),$t(h,x,2,C,T-K),$t(h,x,3,C,T-V)}function Qt(h){return(20091*h>>16)+h}function bn(h,x,C,T){var V,K=0,Z=o(16);for(V=0;4>V;++V){var J=h[x+0]+h[x+8],ie=h[x+0]-h[x+8],de=(35468*h[x+4]>>16)-Qt(h[x+12]),Ee=Qt(h[x+4])+(35468*h[x+12]>>16);Z[K+0]=J+Ee,Z[K+1]=ie+de,Z[K+2]=ie-de,Z[K+3]=J-Ee,K+=4,x++}for(V=K=0;4>V;++V)J=(h=Z[K+0]+4)+Z[K+8],ie=h-Z[K+8],de=(35468*Z[K+4]>>16)-Qt(Z[K+12]),$t(C,T,0,0,J+(Ee=Qt(Z[K+4])+(35468*Z[K+12]>>16))),$t(C,T,1,0,ie+de),$t(C,T,2,0,ie-de),$t(C,T,3,0,J-Ee),K++,T+=32}function Er(h,x,C,T){var V=h[x+0]+4,K=35468*h[x+4]>>16,Z=Qt(h[x+4]),J=35468*h[x+1]>>16;Bt(C,T,0,V+Z,h=Qt(h[x+1]),J),Bt(C,T,1,V+K,h,J),Bt(C,T,2,V-K,h,J),Bt(C,T,3,V-Z,h,J)}function kn(h,x,C,T,V){bn(h,x,C,T),V&&bn(h,x+16,C,T+4)}function An(h,x,C,T){Ql(h,x+0,C,T,1),Ql(h,x+32,C,T+128,1)}function ln(h,x,C,T){var V;for(h=h[x+0]+4,V=0;4>V;++V)for(x=0;4>x;++x)$t(C,T,x,V,h)}function E(h,x,C,T){h[x+0]&&Cr(h,x+0,C,T),h[x+16]&&Cr(h,x+16,C,T+4),h[x+32]&&Cr(h,x+32,C,T+128),h[x+48]&&Cr(h,x+48,C,T+128+4)}function oe(h,x,C,T){var V,K=o(16);for(V=0;4>V;++V){var Z=h[x+0+V]+h[x+12+V],J=h[x+4+V]+h[x+8+V],ie=h[x+4+V]-h[x+8+V],de=h[x+0+V]-h[x+12+V];K[0+V]=Z+J,K[8+V]=Z-J,K[4+V]=de+ie,K[12+V]=de-ie}for(V=0;4>V;++V)Z=(h=K[0+4*V]+3)+K[3+4*V],J=K[1+4*V]+K[2+4*V],ie=K[1+4*V]-K[2+4*V],de=h-K[3+4*V],C[T+0]=Z+J>>3,C[T+16]=de+ie>>3,C[T+32]=Z-J>>3,C[T+48]=de-ie>>3,T+=64}function he(h,x,C){var T,V=x-32,K=$i,Z=255-h[V-1];for(T=0;T<C;++T){var J,ie=K,de=Z+h[x-1];for(J=0;J<C;++J)h[x+J]=ie[de+h[V+J]];x+=32}}function _e(h,x){he(h,x,4)}function we(h,x){he(h,x,8)}function Rt(h,x){he(h,x,16)}function Gn(h,x){var C;for(C=0;16>C;++C)r(h,x+32*C,h,x-32,16)}function Vt(h,x){var C;for(C=16;0<C;--C)a(h,x,h[x-1],16),x+=32}function Vn(h,x,C){var T;for(T=0;16>T;++T)a(x,C+32*T,h,16)}function $r(h,x){var C,T=16;for(C=0;16>C;++C)T+=h[x-1+32*C]+h[x+C-32];Vn(T>>5,h,x)}function Or(h,x){var C,T=8;for(C=0;16>C;++C)T+=h[x-1+32*C];Vn(T>>4,h,x)}function ts(h,x){var C,T=8;for(C=0;16>C;++C)T+=h[x+C-32];Vn(T>>4,h,x)}function hi(h,x){Vn(128,h,x)}function vn(h,x,C){return h+2*x+C+2>>2}function Zi(h,x){var C,T=x-32;for(T=new Uint8Array([vn(h[T-1],h[T+0],h[T+1]),vn(h[T+0],h[T+1],h[T+2]),vn(h[T+1],h[T+2],h[T+3]),vn(h[T+2],h[T+3],h[T+4])]),C=0;4>C;++C)r(h,x+32*C,T,0,T.length)}function _t(h,x){var C=h[x-1],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96];Ze(h,x+0,16843009*vn(h[x-1-32],C,T)),Ze(h,x+32,16843009*vn(C,T,V)),Ze(h,x+64,16843009*vn(T,V,K)),Ze(h,x+96,16843009*vn(V,K,K))}function cr(h,x){var C,T=4;for(C=0;4>C;++C)T+=h[x+C-32]+h[x-1+32*C];for(T>>=3,C=0;4>C;++C)a(h,x+32*C,T,4)}function wi(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1-32],Z=h[x+0-32],J=h[x+1-32],ie=h[x+2-32],de=h[x+3-32];h[x+0+96]=vn(T,V,h[x-1+96]),h[x+1+96]=h[x+0+64]=vn(C,T,V),h[x+2+96]=h[x+1+64]=h[x+0+32]=vn(K,C,T),h[x+3+96]=h[x+2+64]=h[x+1+32]=h[x+0+0]=vn(Z,K,C),h[x+3+64]=h[x+2+32]=h[x+1+0]=vn(J,Z,K),h[x+3+32]=h[x+2+0]=vn(ie,J,Z),h[x+3+0]=vn(de,ie,J)}function ga(h,x){var C=h[x+1-32],T=h[x+2-32],V=h[x+3-32],K=h[x+4-32],Z=h[x+5-32],J=h[x+6-32],ie=h[x+7-32];h[x+0+0]=vn(h[x+0-32],C,T),h[x+1+0]=h[x+0+32]=vn(C,T,V),h[x+2+0]=h[x+1+32]=h[x+0+64]=vn(T,V,K),h[x+3+0]=h[x+2+32]=h[x+1+64]=h[x+0+96]=vn(V,K,Z),h[x+3+32]=h[x+2+64]=h[x+1+96]=vn(K,Z,J),h[x+3+64]=h[x+2+96]=vn(Z,J,ie),h[x+3+96]=vn(J,ie,ie)}function al(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1-32],Z=h[x+0-32],J=h[x+1-32],ie=h[x+2-32],de=h[x+3-32];h[x+0+0]=h[x+1+64]=K+Z+1>>1,h[x+1+0]=h[x+2+64]=Z+J+1>>1,h[x+2+0]=h[x+3+64]=J+ie+1>>1,h[x+3+0]=ie+de+1>>1,h[x+0+96]=vn(V,T,C),h[x+0+64]=vn(T,C,K),h[x+0+32]=h[x+1+96]=vn(C,K,Z),h[x+1+32]=h[x+2+96]=vn(K,Z,J),h[x+2+32]=h[x+3+96]=vn(Z,J,ie),h[x+3+32]=vn(J,ie,de)}function uo(h,x){var C=h[x+0-32],T=h[x+1-32],V=h[x+2-32],K=h[x+3-32],Z=h[x+4-32],J=h[x+5-32],ie=h[x+6-32],de=h[x+7-32];h[x+0+0]=C+T+1>>1,h[x+1+0]=h[x+0+64]=T+V+1>>1,h[x+2+0]=h[x+1+64]=V+K+1>>1,h[x+3+0]=h[x+2+64]=K+Z+1>>1,h[x+0+32]=vn(C,T,V),h[x+1+32]=h[x+0+96]=vn(T,V,K),h[x+2+32]=h[x+1+96]=vn(V,K,Z),h[x+3+32]=h[x+2+96]=vn(K,Z,J),h[x+3+64]=vn(Z,J,ie),h[x+3+96]=vn(J,ie,de)}function Yi(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96];h[x+0+0]=C+T+1>>1,h[x+2+0]=h[x+0+32]=T+V+1>>1,h[x+2+32]=h[x+0+64]=V+K+1>>1,h[x+1+0]=vn(C,T,V),h[x+3+0]=h[x+1+32]=vn(T,V,K),h[x+3+32]=h[x+1+64]=vn(V,K,K),h[x+3+64]=h[x+2+64]=h[x+0+96]=h[x+1+96]=h[x+2+96]=h[x+3+96]=K}function Vr(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96],Z=h[x-1-32],J=h[x+0-32],ie=h[x+1-32],de=h[x+2-32];h[x+0+0]=h[x+2+32]=C+Z+1>>1,h[x+0+32]=h[x+2+64]=T+C+1>>1,h[x+0+64]=h[x+2+96]=V+T+1>>1,h[x+0+96]=K+V+1>>1,h[x+3+0]=vn(J,ie,de),h[x+2+0]=vn(Z,J,ie),h[x+1+0]=h[x+3+32]=vn(C,Z,J),h[x+1+32]=h[x+3+64]=vn(T,C,Z),h[x+1+64]=h[x+3+96]=vn(V,T,C),h[x+1+96]=vn(K,V,T)}function Hr(h,x){var C;for(C=0;8>C;++C)r(h,x+32*C,h,x-32,8)}function Ni(h,x){var C;for(C=0;8>C;++C)a(h,x,h[x-1],8),x+=32}function ps(h,x,C){var T;for(T=0;8>T;++T)a(x,C+32*T,h,8)}function ol(h,x){var C,T=8;for(C=0;8>C;++C)T+=h[x+C-32]+h[x-1+32*C];ps(T>>4,h,x)}function zl(h,x){var C,T=4;for(C=0;8>C;++C)T+=h[x+C-32];ps(T>>3,h,x)}function ll(h,x){var C,T=4;for(C=0;8>C;++C)T+=h[x-1+32*C];ps(T>>3,h,x)}function cl(h,x){ps(128,h,x)}function Xi(h,x,C){var T=h[x-C],V=h[x+0],K=3*(V-T)+xo[1020+h[x-2*C]-h[x+C]],Z=Cc[112+(K+4>>3)];h[x-C]=$i[255+T+Cc[112+(K+3>>3)]],h[x+0]=$i[255+V-Z]}function Ha(h,x,C,T){var V=h[x+0],K=h[x+C];return Da[255+h[x-2*C]-h[x-C]]>T||Da[255+K-V]>T}function fo(h,x,C,T){return 4*Da[255+h[x-C]-h[x+0]]+Da[255+h[x-2*C]-h[x+C]]<=T}function ms(h,x,C,T,V){var K=h[x-3*C],Z=h[x-2*C],J=h[x-C],ie=h[x+0],de=h[x+C],Ee=h[x+2*C],ze=h[x+3*C];return 4*Da[255+J-ie]+Da[255+Z-de]>T?0:Da[255+h[x-4*C]-K]<=V&&Da[255+K-Z]<=V&&Da[255+Z-J]<=V&&Da[255+ze-Ee]<=V&&Da[255+Ee-de]<=V&&Da[255+de-ie]<=V}function $s(h,x,C,T){var V=2*T+1;for(T=0;16>T;++T)fo(h,x+T,C,V)&&Xi(h,x+T,C)}function Wa(h,x,C,T){var V=2*T+1;for(T=0;16>T;++T)fo(h,x+T*C,1,V)&&Xi(h,x+T*C,1)}function ul(h,x,C,T){var V;for(V=3;0<V;--V)$s(h,x+=4*C,C,T)}function Js(h,x,C,T){var V;for(V=3;0<V;--V)Wa(h,x+=4,C,T)}function os(h,x,C,T,V,K,Z,J){for(K=2*K+1;0<V--;){if(ms(h,x,C,K,Z))if(Ha(h,x,C,J))Xi(h,x,C);else{var ie=h,de=x,Ee=C,ze=ie[de-2*Ee],fe=ie[de-Ee],Fe=ie[de+0],Ue=ie[de+Ee],nt=ie[de+2*Ee],He=27*(tt=xo[1020+3*(Fe-fe)+xo[1020+ze-Ue]])+63>>7,Je=18*tt+63>>7,tt=9*tt+63>>7;ie[de-3*Ee]=$i[255+ie[de-3*Ee]+tt],ie[de-2*Ee]=$i[255+ze+Je],ie[de-Ee]=$i[255+fe+He],ie[de+0]=$i[255+Fe-He],ie[de+Ee]=$i[255+Ue-Je],ie[de+2*Ee]=$i[255+nt-tt]}x+=T}}function Es(h,x,C,T,V,K,Z,J){for(K=2*K+1;0<V--;){if(ms(h,x,C,K,Z))if(Ha(h,x,C,J))Xi(h,x,C);else{var ie=h,de=x,Ee=C,ze=ie[de-Ee],fe=ie[de+0],Fe=ie[de+Ee],Ue=Cc[112+(4+(nt=3*(fe-ze))>>3)],nt=Cc[112+(nt+3>>3)],He=Ue+1>>1;ie[de-2*Ee]=$i[255+ie[de-2*Ee]+He],ie[de-Ee]=$i[255+ze+nt],ie[de+0]=$i[255+fe-Ue],ie[de+Ee]=$i[255+Fe-He]}x+=T}}function Vs(h,x,C,T,V,K){os(h,x,C,1,16,T,V,K)}function Ji(h,x,C,T,V,K){os(h,x,1,C,16,T,V,K)}function dl(h,x,C,T,V,K){var Z;for(Z=3;0<Z;--Z)Es(h,x+=4*C,C,1,16,T,V,K)}function w(h,x,C,T,V,K){var Z;for(Z=3;0<Z;--Z)Es(h,x+=4,1,C,16,T,V,K)}function $(h,x,C,T,V,K,Z,J){os(h,x,V,1,8,K,Z,J),os(C,T,V,1,8,K,Z,J)}function pe(h,x,C,T,V,K,Z,J){os(h,x,1,V,8,K,Z,J),os(C,T,1,V,8,K,Z,J)}function ke(h,x,C,T,V,K,Z,J){Es(h,x+4*V,V,1,8,K,Z,J),Es(C,T+4*V,V,1,8,K,Z,J)}function Be(h,x,C,T,V,K,Z,J){Es(h,x+4,1,V,8,K,Z,J),Es(C,T+4,1,V,8,K,Z,J)}function rt(){this.ba=new gn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ht(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ot(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function At(){this.ua=0,this.Wa=new xe,this.vb=new xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ce,this.yc=new z}function Tt(){this.xb=this.a=0,this.l=new ut,this.ca=new gn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new At,this.ab=0,this.gc=u(4,ot),this.Oc=0}function Dt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ut,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(h,x,C,T,V,K,Z){for(h=h==null?0:h[x+0],x=0;x<Z;++x)V[K+x]=h+C[T+x]&255,h=V[K+x]}function Yn(h,x,C,T,V,K,Z){var J;if(h==null)hn(null,null,C,T,V,K,Z);else for(J=0;J<Z;++J)V[K+J]=h[x+J]+C[T+J]&255}function br(h,x,C,T,V,K,Z){if(h==null)hn(null,null,C,T,V,K,Z);else{var J,ie=h[x+0],de=ie,Ee=ie;for(J=0;J<Z;++J)de=Ee+(ie=h[x+J])-de,Ee=C[T+J]+(-256&de?0>de?0:255:de)&255,de=ie,V[K+J]=Ee}}function Qn(h,x,C,T){var V=x.width,K=x.o;if(e(h!=null&&x!=null),0>C||0>=T||C+T>K)return null;if(!h.Cc){if(h.ga==null){var Z;if(h.ga=new Dt,(Z=h.ga==null)||(Z=x.width*x.o,e(h.Gb.length==0),h.Gb=o(Z),h.Uc=0,h.Gb==null?Z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,Z=1),Z=!Z),!Z){Z=h.ga;var J=h.Fa,ie=h.P,de=h.qc,Ee=h.mb,ze=h.nb,fe=ie+1,Fe=de-1,Ue=Z.l;if(e(J!=null&&Ee!=null&&x!=null),Ei[0]=null,Ei[1]=hn,Ei[2]=Yn,Ei[3]=br,Z.ca=Ee,Z.tb=ze,Z.c=x.width,Z.i=x.height,e(0<Z.c&&0<Z.i),1>=de)x=0;else if(Z.$a=3&J[ie+0],Z.Z=J[ie+0]>>2&3,Z.Lc=J[ie+0]>>4&3,ie=J[ie+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||ie)x=0;else if(Ue.put=on,Ue.ac=xr,Ue.bc=As,Ue.ma=Z,Ue.width=x.width,Ue.height=x.height,Ue.Da=x.Da,Ue.v=x.v,Ue.va=x.va,Ue.j=x.j,Ue.o=x.o,Z.$a)e:{e(Z.$a==1),x=zs();t:for(;;){if(x==null){x=0;break e}if(e(Z!=null),Z.mc=x,x.c=Z.c,x.i=Z.i,x.l=Z.l,x.l.ma=Z,x.l.width=Z.c,x.l.height=Z.i,x.a=0,ge(x.m,J,fe,Fe),!mr(Z.c,Z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Tr(x.s)?(Z.ic=1,J=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(J),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Z.ic=0,x=hs(x,Z.c)),!x))break t;x=1;break e}Z.mc=null,x=0}else x=Fe>=Z.c*Z.i;Z=!x}if(Z)return null;h.ga.Lc!=1?h.Ga=0:T=K-C}e(h.ga!=null),e(C+T<=K);e:{if(x=(J=h.ga).c,K=J.l.o,J.$a==0){if(fe=h.rc,Fe=h.Vc,Ue=h.Fa,ie=h.P+1+C*x,de=h.mb,Ee=h.nb+C*x,e(ie<=h.P+h.qc),J.Z!=0)for(e(Ei[J.Z]!=null),Z=0;Z<T;++Z)Ei[J.Z](fe,Fe,Ue,ie,de,Ee,x),fe=de,Fe=Ee,Ee+=x,ie+=x;else for(Z=0;Z<T;++Z)r(de,Ee,Ue,ie,x),fe=de,Fe=Ee,Ee+=x,ie+=x;h.rc=fe,h.Vc=Fe}else{if(e(J.mc!=null),x=C+T,e((Z=J.mc)!=null),e(x<=Z.i),Z.C>=x)x=1;else if(J.ic||bs(),J.ic){J=Z.V,fe=Z.Ba,Fe=Z.c;var nt=Z.i,He=(Ue=1,ie=Z.$/Fe,de=Z.$%Fe,Ee=Z.m,ze=Z.s,Z.$),Je=Fe*nt,tt=Fe*x,lt=ze.wc,dt=He<tt?yr(ze,de,ie):null;e(He<=Je),e(x<=nt),e(Tr(ze));t:for(;;){for(;!Ee.h&&He<tt;){if(de&lt||(dt=yr(ze,de,ie)),e(dt!=null),be(Ee),256>(nt=lr(dt.G[0],dt.H[0],Ee)))J[fe+He]=nt,++He,++de>=Fe&&(de=0,++ie<=x&&!(ie%16)&&es(Z,ie));else{if(!(280>nt)){Ue=0;break t}nt=fs(nt-256,Ee);var dn,Yt=lr(dt.G[4],dt.H[4],Ee);if(be(Ee),!(He>=(Yt=Ps(Fe,Yt=fs(Yt,Ee)))&&Je-He>=nt)){Ue=0;break t}for(dn=0;dn<nt;++dn)J[fe+He+dn]=J[fe+He+dn-Yt];for(He+=nt,de+=nt;de>=Fe;)de-=Fe,++ie<=x&&!(ie%16)&&es(Z,ie);He<tt&&de&lt&&(dt=yr(ze,de,ie))}e(Ee.h==me(Ee))}es(Z,ie>x?x:ie);break t}!Ue||Ee.h&&He<Je?(Ue=0,Z.a=Ee.h?5:3):Z.$=He,x=Ue}else x=Ts(Z,Z.V,Z.Ba,Z.c,Z.i,x,Xs);if(!x){T=0;break e}}C+T>=K&&(h.Cc=1),T=1}if(!T)return null;if(h.Cc&&((T=h.ga)!=null&&(T.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+C*V}function Sr(h,x,C,T,V,K){for(;0<V--;){var Z,J=h,ie=x+(C?1:0),de=h,Ee=x+(C?0:3);for(Z=0;Z<T;++Z){var ze=de[Ee+4*Z];ze!=255&&(ze*=32897,J[ie+4*Z+0]=J[ie+4*Z+0]*ze>>23,J[ie+4*Z+1]=J[ie+4*Z+1]*ze>>23,J[ie+4*Z+2]=J[ie+4*Z+2]*ze>>23)}x+=K}}function dr(h,x,C,T,V){for(;0<T--;){var K;for(K=0;K<C;++K){var Z=h[x+2*K+0],J=15&(de=h[x+2*K+1]),ie=4369*J,de=(240&de|de>>4)*ie>>16;h[x+2*K+0]=(240&Z|Z>>4)*ie>>16&240|(15&Z|Z<<4)*ie>>16>>4&15,h[x+2*K+1]=240&de|J}x+=V}}function Mr(h,x,C,T,V,K,Z,J){var ie,de,Ee=255;for(de=0;de<V;++de){for(ie=0;ie<T;++ie){var ze=h[x+ie];K[Z+4*ie]=ze,Ee&=ze}x+=C,Z+=J}return Ee!=255}function Ti(h,x,C,T,V){var K;for(K=0;K<V;++K)C[T+K]=h[x+K]>>8}function bs(){Yl=Sr,wf=dr,yu=Mr,Nf=Ti}function Ht(h,x,C){Q[h]=function(T,V,K,Z,J,ie,de,Ee,ze,fe,Fe,Ue,nt,He,Je,tt,lt){var dt,dn=lt-1>>1,Yt=J[ie+0]|de[Ee+0]<<16,zn=ze[fe+0]|Fe[Ue+0]<<16;e(T!=null);var nn=3*Yt+zn+131074>>2;for(x(T[V+0],255&nn,nn>>16,nt,He),K!=null&&(nn=3*zn+Yt+131074>>2,x(K[Z+0],255&nn,nn>>16,Je,tt)),dt=1;dt<=dn;++dt){var fr=J[ie+dt]|de[Ee+dt]<<16,Ss=ze[fe+dt]|Fe[Ue+dt]<<16,Hn=Yt+fr+zn+Ss+524296,Xt=Hn+2*(fr+zn)>>3;nn=Xt+Yt>>1,Yt=(Hn=Hn+2*(Yt+Ss)>>3)+fr>>1,x(T[V+2*dt-1],255&nn,nn>>16,nt,He+(2*dt-1)*C),x(T[V+2*dt-0],255&Yt,Yt>>16,nt,He+(2*dt-0)*C),K!=null&&(nn=Hn+zn>>1,Yt=Xt+Ss>>1,x(K[Z+2*dt-1],255&nn,nn>>16,Je,tt+(2*dt-1)*C),x(K[Z+2*dt+0],255&Yt,Yt>>16,Je,tt+(2*dt+0)*C)),Yt=fr,zn=Ss}1&lt||(nn=3*Yt+zn+131074>>2,x(T[V+lt-1],255&nn,nn>>16,nt,He+(lt-1)*C),K!=null&&(nn=3*zn+Yt+131074>>2,x(K[Z+lt-1],255&nn,nn>>16,Je,tt+(lt-1)*C)))}}function Ui(){na[id]=mg,na[yl]=bl,na[Uh]=gg,na[bu]=kc,na[wu]=tc,na[Wr]=_u,na[ad]=Ef,na[_c]=bl,na[Xl]=kc,na[Nu]=tc,na[Su]=_u}function La(h){return h&-16384?0>h?0:255:h>>wl}function ho(h,x){return La((19077*h>>8)+(26149*x>>8)-14234)}function Po(h,x,C){return La((19077*h>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function fl(h,x){return La((19077*h>>8)+(33050*x>>8)-17685)}function hl(h,x,C,T,V){T[V+0]=ho(h,C),T[V+1]=Po(h,x,C),T[V+2]=fl(h,x)}function Si(h,x,C,T,V){T[V+0]=fl(h,x),T[V+1]=Po(h,x,C),T[V+2]=ho(h,C)}function $l(h,x,C,T,V){var K=Po(h,x,C);x=K<<3&224|fl(h,x)>>3,T[V+0]=248&ho(h,C)|K>>5,T[V+1]=x}function Vl(h,x,C,T,V){var K=240&fl(h,x)|15;T[V+0]=240&ho(h,C)|Po(h,x,C)>>4,T[V+1]=K}function mu(h,x,C,T,V){T[V+0]=255,hl(h,x,C,T,V+1)}function gu(h,x,C,T,V){Si(h,x,C,T,V),T[V+3]=255}function zi(h,x,C,T,V){hl(h,x,C,T,V),T[V+3]=255}function Ga(h,x,C){Q[h]=function(T,V,K,Z,J,ie,de,Ee,ze){for(var fe=Ee+(-2&ze)*C;Ee!=fe;)x(T[V+0],K[Z+0],J[ie+0],de,Ee),x(T[V+1],K[Z+0],J[ie+0],de,Ee+C),V+=2,++Z,++ie,Ee+=2*C;1&ze&&x(T[V+0],K[Z+0],J[ie+0],de,Ee)}}function po(h,x,C){return C==0?h==0?x==0?6:5:x==0?4:0:C}function nd(h,x,C,T,V){switch(h>>>30){case 3:Ql(x,C,T,V,0);break;case 2:ws(x,C,T,V);break;case 1:Cr(x,C,T,V)}}function va(h,x){var C,T,V=x.M,K=x.Nb,Z=h.oc,J=h.pc+40,ie=h.oc,de=h.pc+584,Ee=h.oc,ze=h.pc+600;for(C=0;16>C;++C)Z[J+32*C-1]=129;for(C=0;8>C;++C)ie[de+32*C-1]=129,Ee[ze+32*C-1]=129;for(0<V?Z[J-1-32]=ie[de-1-32]=Ee[ze-1-32]=129:(a(Z,J-32-1,127,21),a(ie,de-32-1,127,9),a(Ee,ze-32-1,127,9)),T=0;T<h.za;++T){var fe=x.ya[x.aa+T];if(0<T){for(C=-1;16>C;++C)r(Z,J+32*C-4,Z,J+32*C+12,4);for(C=-1;8>C;++C)r(ie,de+32*C-4,ie,de+32*C+4,4),r(Ee,ze+32*C-4,Ee,ze+32*C+4,4)}var Fe=h.Gd,Ue=h.Hd+T,nt=fe.ad,He=fe.Hc;if(0<V&&(r(Z,J-32,Fe[Ue].y,0,16),r(ie,de-32,Fe[Ue].f,0,8),r(Ee,ze-32,Fe[Ue].ea,0,8)),fe.Za){var Je=Z,tt=J-32+16;for(0<V&&(T>=h.za-1?a(Je,tt,Fe[Ue].y[15],4):r(Je,tt,Fe[Ue+1].y,0,4)),C=0;4>C;C++)Je[tt+128+C]=Je[tt+256+C]=Je[tt+384+C]=Je[tt+0+C];for(C=0;16>C;++C,He<<=2)Je=Z,tt=J+Lf[C],Ia[fe.Ob[C]](Je,tt),nd(He,nt,16*+C,Je,tt)}else if(Je=po(T,V,fe.Ob[0]),Vi[Je](Z,J),He!=0)for(C=0;16>C;++C,He<<=2)nd(He,nt,16*+C,Z,J+Lf[C]);for(C=fe.Gc,Je=po(T,V,fe.Dd),ta[Je](ie,de),ta[Je](Ee,ze),He=nt,Je=ie,tt=de,255&(fe=0|C)&&(170&fe?ea(He,256,Je,tt):Br(He,256,Je,tt)),fe=Ee,He=ze,255&(C>>=8)&&(170&C?ea(nt,320,fe,He):Br(nt,320,fe,He)),V<h.Ub-1&&(r(Fe[Ue].y,0,Z,J+480,16),r(Fe[Ue].f,0,ie,de+224,8),r(Fe[Ue].ea,0,Ee,ze+224,8)),C=8*K*h.B,Fe=h.sa,Ue=h.ta+16*T+16*K*h.R,nt=h.qa,fe=h.ra+8*T+C,He=h.Ha,Je=h.Ia+8*T+C,C=0;16>C;++C)r(Fe,Ue+C*h.R,Z,J+32*C,16);for(C=0;8>C;++C)r(nt,fe+C*h.B,ie,de+32*C,8),r(He,Je+C*h.B,Ee,ze+32*C,8)}}function pl(h,x,C,T,V,K,Z,J,ie){var de=[0],Ee=[0],ze=0,fe=ie!=null?ie.kd:0,Fe=ie??new ht;if(h==null||12>C)return 7;Fe.data=h,Fe.w=x,Fe.ha=C,x=[x],C=[C],Fe.gb=[Fe.gb];e:{var Ue=x,nt=C,He=Fe.gb;if(e(h!=null),e(nt!=null),e(He!=null),He[0]=0,12<=nt[0]&&!n(h,Ue[0],"RIFF")){if(n(h,Ue[0]+8,"WEBP")){He=3;break e}var Je=Ft(h,Ue[0]+4);if(12>Je||4294967286<Je){He=3;break e}if(fe&&Je>nt[0]-8){He=7;break e}He[0]=Je,Ue[0]+=12,nt[0]-=12}He=0}if(He!=0)return He;for(Je=0<Fe.gb[0],C=C[0];;){e:{var tt=h;nt=x,He=C;var lt=de,dt=Ee,dn=Ue=[0];if((nn=ze=[ze])[0]=0,8>He[0])He=7;else{if(!n(tt,nt[0],"VP8X")){if(Ft(tt,nt[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var Yt=Ft(tt,nt[0]+8),zn=1+mt(tt,nt[0]+12);if(2147483648<=zn*(tt=1+mt(tt,nt[0]+15))){He=3;break e}dn!=null&&(dn[0]=Yt),lt!=null&&(lt[0]=zn),dt!=null&&(dt[0]=tt),nt[0]+=18,He[0]-=18,nn[0]=1}He=0}}if(ze=ze[0],Ue=Ue[0],He!=0)return He;if(nt=!!(2&Ue),!Je&&ze)return 3;if(K!=null&&(K[0]=!!(16&Ue)),Z!=null&&(Z[0]=nt),J!=null&&(J[0]=0),Z=de[0],Ue=Ee[0],ze&&nt&&ie==null){He=0;break}if(4>C){He=7;break}if(Je&&ze||!Je&&!ze&&!n(h,x[0],"ALPH")){C=[C],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{Yt=h,He=x,Je=C;var nn=Fe.gb;lt=Fe.na,dt=Fe.P,dn=Fe.Sa,zn=22,e(Yt!=null),e(Je!=null),tt=He[0];var fr=Je[0];for(e(lt!=null),e(dn!=null),lt[0]=null,dt[0]=null,dn[0]=0;;){if(He[0]=tt,Je[0]=fr,8>fr){He=7;break e}var Ss=Ft(Yt,tt+4);if(4294967286<Ss){He=3;break e}var Hn=8+Ss+1&-2;if(zn+=Hn,0<nn&&zn>nn){He=3;break e}if(!n(Yt,tt,"VP8 ")||!n(Yt,tt,"VP8L")){He=0;break e}if(fr[0]<Hn){He=7;break e}n(Yt,tt,"ALPH")||(lt[0]=Yt,dt[0]=tt+8,dn[0]=Ss),tt+=Hn,fr-=Hn}}if(C=C[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],He!=0)break}C=[C],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(nn=h,He=x,Je=C,lt=Fe.gb[0],dt=Fe.Ja,dn=Fe.xa,Yt=He[0],tt=!n(nn,Yt,"VP8 "),zn=!n(nn,Yt,"VP8L"),e(nn!=null),e(Je!=null),e(dt!=null),e(dn!=null),8>Je[0])He=7;else{if(tt||zn){if(nn=Ft(nn,Yt+4),12<=lt&&nn>lt-12){He=3;break e}if(fe&&nn>Je[0]-8){He=7;break e}dt[0]=nn,He[0]+=8,Je[0]-=8,dn[0]=zn}else dn[0]=5<=Je[0]&&nn[Yt+0]==47&&!(nn[Yt+4]>>5),dt[0]=Je[0];He=0}if(C=C[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],x=x[0],He!=0)break;if(4294967286<Fe.Ja)return 3;if(J==null||nt||(J[0]=Fe.xa?2:1),Z=[Z],Ue=[Ue],Fe.xa){if(5>C){He=7;break}J=Z,fe=Ue,nt=K,h==null||5>C?h=0:5<=C&&h[x+0]==47&&!(h[x+4]>>5)?(Je=[0],nn=[0],lt=[0],ge(dt=new L,h,x,C),Us(dt,Je,nn,lt)?(J!=null&&(J[0]=Je[0]),fe!=null&&(fe[0]=nn[0]),nt!=null&&(nt[0]=lt[0]),h=1):h=0):h=0}else{if(10>C){He=7;break}J=Ue,h==null||10>C||!Ot(h,x+3,C-3)?h=0:(fe=h[x+0]|h[x+1]<<8|h[x+2]<<16,nt=16383&(h[x+7]<<8|h[x+6]),h=16383&(h[x+9]<<8|h[x+8]),1&fe||3<(fe>>1&7)||!(fe>>4&1)||fe>>5>=Fe.Ja||!nt||!h?h=0:(Z&&(Z[0]=nt),J&&(J[0]=h),h=1))}if(!h||(Z=Z[0],Ue=Ue[0],ze&&(de[0]!=Z||Ee[0]!=Ue)))return 3;ie!=null&&(ie[0]=Fe,ie.offset=x-ie.w,e(4294967286>x-ie.w),e(ie.offset==ie.ha-C));break}return He==0||He==7&&ze&&ie==null?(K!=null&&(K[0]|=Fe.na!=null&&0<Fe.na.length),T!=null&&(T[0]=Z),V!=null&&(V[0]=Ue),0):He}function yc(h,x,C){var T=x.width,V=x.height,K=0,Z=0,J=T,ie=V;if(x.Da=h!=null&&0<h.Da,x.Da&&(J=h.cd,ie=h.bd,K=h.v,Z=h.j,11>C||(K&=-2,Z&=-2),0>K||0>Z||0>=J||0>=ie||K+J>T||Z+ie>V))return 0;if(x.v=K,x.j=Z,x.va=K+J,x.o=Z+ie,x.U=J,x.T=ie,x.da=h!=null&&0<h.da,x.da){if(!X(J,ie,C=[h.ib],K=[h.hb]))return 0;x.ib=C[0],x.hb=K[0]}return x.ob=h!=null&&h.ob,x.Kb=h==null||!h.Sd,x.da&&(x.ob=x.ib<3*T/4&&x.hb<3*V/4,x.Kb=0),1}function bc(h){if(h==null)return 2;if(11>h.S){var x=h.f.RGBA;x.fb+=(h.height-1)*x.A,x.A=-x.A}else x=h.f.kb,h=h.height,x.O+=(h-1)*x.fa,x.fa=-x.fa,x.N+=(h-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(h-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(h-1)*x.lb,x.lb=-x.lb);return 0}function ko(h,x,C,T){if(T==null||0>=h||0>=x)return 2;if(C!=null){if(C.Da){var V=C.cd,K=C.bd,Z=-2&C.v,J=-2&C.j;if(0>Z||0>J||0>=V||0>=K||Z+V>h||J+K>x)return 2;h=V,x=K}if(C.da){if(!X(h,x,V=[C.ib],K=[C.hb]))return 2;h=V[0],x=K[0]}}T.width=h,T.height=x;e:{var ie=T.width,de=T.height;if(h=T.S,0>=ie||0>=de||!(h>=id&&13>h))h=2;else{if(0>=T.Rd&&T.sd==null){Z=K=V=x=0;var Ee=(J=ie*Au[h])*de;if(11>h||(K=(de+1)/2*(x=(ie+1)/2),h==12&&(Z=(V=ie)*de)),(de=o(Ee+2*K+Z))==null){h=1;break e}T.sd=de,11>h?((ie=T.f.RGBA).eb=de,ie.fb=0,ie.A=J,ie.size=Ee):((ie=T.f.kb).y=de,ie.O=0,ie.fa=J,ie.Fd=Ee,ie.f=de,ie.N=0+Ee,ie.Ab=x,ie.Cd=K,ie.ea=de,ie.W=0+Ee+K,ie.Db=x,ie.Ed=K,h==12&&(ie.F=de,ie.J=0+Ee+2*K),ie.Tc=Z,ie.lb=V)}if(x=1,V=T.S,K=T.width,Z=T.height,V>=id&&13>V)if(11>V)h=T.f.RGBA,x&=(J=Math.abs(h.A))*(Z-1)+K<=h.size,x&=J>=K*Au[V],x&=h.eb!=null;else{h=T.f.kb,J=(K+1)/2,Ee=(Z+1)/2,ie=Math.abs(h.fa),de=Math.abs(h.Ab);var ze=Math.abs(h.Db),fe=Math.abs(h.lb),Fe=fe*(Z-1)+K;x&=ie*(Z-1)+K<=h.Fd,x&=de*(Ee-1)+J<=h.Cd,x=(x&=ze*(Ee-1)+J<=h.Ed)&ie>=K&de>=J&ze>=J,x&=h.y!=null,x&=h.f!=null,x&=h.ea!=null,V==12&&(x&=fe>=K,x&=Fe<=h.Tc,x&=h.F!=null)}else x=0;h=x?0:2}}return h!=0||C!=null&&C.fd&&(h=bc(T)),h}var Ra=64,xa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ya=24,ml=32,mo=8,To=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];re("Predictor0","PredictorAdd0"),Q.Predictor0=function(){return 4278190080},Q.Predictor1=function(h){return h},Q.Predictor2=function(h,x,C){return x[C+0]},Q.Predictor3=function(h,x,C){return x[C+1]},Q.Predictor4=function(h,x,C){return x[C-1]},Q.Predictor5=function(h,x,C){return H(H(h,x[C+1]),x[C+0])},Q.Predictor6=function(h,x,C){return H(h,x[C-1])},Q.Predictor7=function(h,x,C){return H(h,x[C+0])},Q.Predictor8=function(h,x,C){return H(x[C-1],x[C+0])},Q.Predictor9=function(h,x,C){return H(x[C+0],x[C+1])},Q.Predictor10=function(h,x,C){return H(H(h,x[C-1]),H(x[C+0],x[C+1]))},Q.Predictor11=function(h,x,C){var T=x[C+0];return 0>=Te(T>>24&255,h>>24&255,(x=x[C-1])>>24&255)+Te(T>>16&255,h>>16&255,x>>16&255)+Te(T>>8&255,h>>8&255,x>>8&255)+Te(255&T,255&h,255&x)?T:h},Q.Predictor12=function(h,x,C){var T=x[C+0];return(je((h>>24&255)+(T>>24&255)-((x=x[C-1])>>24&255))<<24|je((h>>16&255)+(T>>16&255)-(x>>16&255))<<16|je((h>>8&255)+(T>>8&255)-(x>>8&255))<<8|je((255&h)+(255&T)-(255&x)))>>>0},Q.Predictor13=function(h,x,C){var T=x[C-1];return(Ne((h=H(h,x[C+0]))>>24&255,T>>24&255)<<24|Ne(h>>16&255,T>>16&255)<<16|Ne(h>>8&255,T>>8&255)<<8|Ne(255&h,255&T))>>>0};var Eo=Q.PredictorAdd0;Q.PredictorAdd1=$e,re("Predictor2","PredictorAdd2"),re("Predictor3","PredictorAdd3"),re("Predictor4","PredictorAdd4"),re("Predictor5","PredictorAdd5"),re("Predictor6","PredictorAdd6"),re("Predictor7","PredictorAdd7"),re("Predictor8","PredictorAdd8"),re("Predictor9","PredictorAdd9"),re("Predictor10","PredictorAdd10"),re("Predictor11","PredictorAdd11"),re("Predictor12","PredictorAdd12"),re("Predictor13","PredictorAdd13");var go=Q.PredictorAdd2;Pt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Ls,Hl=Q.ColorIndexInverseTransform,vo=Q.MapARGB,Ka=Q.VP8LColorIndexInverseTransformAlpha,Wl=Q.MapAlpha,Gl=Q.VP8LPredictorsAdd=[];Gl.length=16,(Q.VP8LPredictors=[]).length=16,(Q.VP8LPredictorsAdd_C=[]).length=16,(Q.VP8LPredictors_C=[]).length=16;var wc,Nc,Lo,gl,vl,Kl,xl,Ql,ws,ea,Cr,Br,Ns,Hs,Qa,vu,Sc,Ro,rd,jc,sd,bf,xu,Zl,Yl,wf,yu,Nf,Sf=o(511),jf=o(2041),Cf=o(225),_f=o(767),Af=0,xo=jf,Cc=Cf,$i=_f,Da=Sf,id=0,yl=1,Uh=2,bu=3,wu=4,Wr=5,ad=6,_c=7,Xl=8,Nu=9,Su=10,ju=[2,3,7],od=[3,3,11],Jl=[280,256,256,256,40],zh=[0,1,1,1,0],dg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$h=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ld=8,Ac=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Cu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ec=null,Pf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],kf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Vh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Hh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Tf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vi=[],Ia=[],ta=[],yo=1,Pc=2,Ei=[],na=[];Ht("UpsampleRgbLinePair",hl,3),Ht("UpsampleBgrLinePair",Si,3),Ht("UpsampleRgbaLinePair",zi,4),Ht("UpsampleBgraLinePair",gu,4),Ht("UpsampleArgbLinePair",mu,4),Ht("UpsampleRgba4444LinePair",Vl,2),Ht("UpsampleRgb565LinePair",$l,2);var mg=Q.UpsampleRgbLinePair,gg=Q.UpsampleBgrLinePair,bl=Q.UpsampleRgbaLinePair,kc=Q.UpsampleBgraLinePair,tc=Q.UpsampleArgbLinePair,_u=Q.UpsampleRgba4444LinePair,Ef=Q.UpsampleRgb565LinePair,Do=16,Za=1<<Do-1,Ir=-227,qr=482,wl=6,ji=0,ra=o(256),nc=o(256),Tc=o(256),sa=o(256),cd=o(qr-Ir),Wh=o(qr-Ir);Ga("YuvToRgbRow",hl,3),Ga("YuvToBgrRow",Si,3),Ga("YuvToRgbaRow",zi,4),Ga("YuvToBgraRow",gu,4),Ga("YuvToArgbRow",mu,4),Ga("YuvToRgba4444Row",Vl,2),Ga("YuvToRgb565Row",$l,2);var Lf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rc=[0,2,8],Gh=[8,7,6,4,4,2,2,2,1,1,1,1],Io=1;this.WebPDecodeRGBA=function(h,x,C,T,V){var K=yl,Z=new rt,J=new gn;Z.ba=J,J.S=K,J.width=[J.width],J.height=[J.height];var ie=J.width,de=J.height,Ee=new Jt;if(Ee==null||h==null)var ze=2;else e(Ee!=null),ze=pl(h,x,C,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(ze!=0?ie=0:(ie!=null&&(ie[0]=Ee.width[0]),de!=null&&(de[0]=Ee.height[0]),ie=1),ie){J.width=J.width[0],J.height=J.height[0],T!=null&&(T[0]=J.width),V!=null&&(V[0]=J.height);e:{if(T=new ut,(V=new ht).data=h,V.w=x,V.ha=C,V.kd=1,x=[0],e(V!=null),((h=pl(V.data,V.w,V.ha,null,null,null,x,null,V))==0||h==7)&&x[0]&&(h=4),(x=h)==0){if(e(Z!=null),T.data=V.data,T.w=V.w+V.offset,T.ha=V.ha-V.offset,T.put=on,T.ac=xr,T.bc=As,T.ma=Z,V.xa){if((h=zs())==null){Z=1;break e}if((function(fe,Fe){var Ue=[0],nt=[0],He=[0];t:for(;;){if(fe==null)return 0;if(Fe==null)return fe.a=2,0;if(fe.l=Fe,fe.a=0,ge(fe.m,Fe.data,Fe.w,Fe.ha),!Us(fe.m,Ue,nt,He)){fe.a=3;break t}if(fe.xb=Pc,Fe.width=Ue[0],Fe.height=nt[0],!mr(Ue[0],nt[0],1,fe,null))break t;return 1}return e(fe.a!=0),0})(h,T)){if(T=(x=ko(T.width,T.height,Z.Oa,Z.ba))==0){t:{T=h;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((C=T.l)!=null),e((V=C.ma)!=null),T.xb!=0){if(T.ca=V.ba,T.tb=V.tb,e(T.ca!=null),!yc(V.Oa,C,bu)){T.a=2;break n}if(!hs(T,C.width)||C.da)break n;if((C.da||Xe(T.ca.S))&&bs(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&bs()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!le(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Ts(T,T.V,T.Ba,T.c,T.i,C.o,Jr))break n;V.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(x=h.a)}else x=h.a}else{if((h=new Lt)==null){Z=1;break e}if(h.Fa=V.na,h.P=V.P,h.qc=V.Sa,Nt(h,T)){if((x=ko(T.width,T.height,Z.Oa,Z.ba))==0){if(h.Aa=0,C=Z.Oa,e((V=h)!=null),C!=null){if(0<(ie=0>(ie=C.Md)?0:100<ie?255:255*ie/100)){for(de=Ee=0;4>de;++de)12>(ze=V.pb[de]).lc&&(ze.ia=ie*Gh[0>ze.lc?0:ze.lc]>>3),Ee|=ze.ia;Ee&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=C.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(fe,Fe){if(fe==null)return 0;if(Fe==null)return wt(fe,2,"NULL VP8Io parameter in VP8Decode().");if(!fe.cb&&!Nt(fe,Fe))return 0;if(e(fe.cb),Fe.ac==null||Fe.ac(Fe)){Fe.ob&&(fe.L=0);var Ue=rc[fe.L];if(fe.L==2?(fe.yb=0,fe.zb=0):(fe.yb=Fe.v-Ue>>4,fe.zb=Fe.j-Ue>>4,0>fe.yb&&(fe.yb=0),0>fe.zb&&(fe.zb=0)),fe.Va=Fe.o+15+Ue>>4,fe.Hb=Fe.va+15+Ue>>4,fe.Hb>fe.za&&(fe.Hb=fe.za),fe.Va>fe.Ub&&(fe.Va=fe.Ub),0<fe.L){var nt=fe.ed;for(Ue=0;4>Ue;++Ue){var He;if(fe.Qa.Cb){var Je=fe.Qa.Lb[Ue];fe.Qa.Fb||(Je+=nt.Tb)}else Je=nt.Tb;for(He=0;1>=He;++He){var tt=fe.gd[Ue][He],lt=Je;if(nt.Pc&&(lt+=nt.vd[0],He&&(lt+=nt.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var dt=lt;0<nt.wb&&(dt=4<nt.wb?dt>>2:dt>>1)>9-nt.wb&&(dt=9-nt.wb),1>dt&&(dt=1),tt.dd=dt,tt.tc=2*lt+dt,tt.ld=40<=lt?2:15<=lt?1:0}else tt.tc=0;tt.La=He}}}Ue=0}else wt(fe,6,"Frame setup failed"),Ue=fe.a;if(Ue=Ue==0){if(Ue){fe.$c=0,0<fe.Aa||(fe.Ic=Io);t:{Ue=fe.Ic,nt=4*(dt=fe.za);var dn=32*dt,Yt=dt+1,zn=0<fe.L?dt*(0<fe.Aa?2:1):0,nn=(fe.Aa==2?2:1)*dt;if((tt=nt+832+(He=3*(16*Ue+rc[fe.L])/2*dn)+(Je=fe.Fa!=null&&0<fe.Fa.length?fe.Kc.c*fe.Kc.i:0))!=tt)Ue=0;else{if(tt>fe.Vb){if(fe.Vb=0,fe.Ec=o(tt),fe.Fc=0,fe.Ec==null){Ue=wt(fe,1,"no memory during frame initialization.");break t}fe.Vb=tt}tt=fe.Ec,lt=fe.Fc,fe.Ac=tt,fe.Bc=lt,lt+=nt,fe.Gd=u(dn,Ke),fe.Hd=0,fe.rb=u(Yt+1,Nn),fe.sb=1,fe.wa=zn?u(zn,In):null,fe.Y=0,fe.D.Nb=0,fe.D.wa=fe.wa,fe.D.Y=fe.Y,0<fe.Aa&&(fe.D.Y+=dt),e(!0),fe.oc=tt,fe.pc=lt,lt+=832,fe.ya=u(nn,Fn),fe.aa=0,fe.D.ya=fe.ya,fe.D.aa=fe.aa,fe.Aa==2&&(fe.D.aa+=dt),fe.R=16*dt,fe.B=8*dt,dt=(dn=rc[fe.L])*fe.R,dn=dn/2*fe.B,fe.sa=tt,fe.ta=lt+dt,fe.qa=fe.sa,fe.ra=fe.ta+16*Ue*fe.R+dn,fe.Ha=fe.qa,fe.Ia=fe.ra+8*Ue*fe.B+dn,fe.$c=0,lt+=He,fe.mb=Je?tt:null,fe.nb=Je?lt:null,e(lt+Je<=fe.Fc+fe.Vb),Mt(fe),a(fe.Ac,fe.Bc,0,nt),Ue=1}}if(Ue){if(Fe.ka=0,Fe.y=fe.sa,Fe.O=fe.ta,Fe.f=fe.qa,Fe.N=fe.ra,Fe.ea=fe.Ha,Fe.Vd=fe.Ia,Fe.fa=fe.R,Fe.Rc=fe.B,Fe.F=null,Fe.J=0,!Af){for(Ue=-255;255>=Ue;++Ue)Sf[255+Ue]=0>Ue?-Ue:Ue;for(Ue=-1020;1020>=Ue;++Ue)jf[1020+Ue]=-128>Ue?-128:127<Ue?127:Ue;for(Ue=-112;112>=Ue;++Ue)Cf[112+Ue]=-16>Ue?-16:15<Ue?15:Ue;for(Ue=-255;510>=Ue;++Ue)_f[255+Ue]=0>Ue?0:255<Ue?255:Ue;Af=1}xl=oe,Ql=kn,ea=An,Cr=ln,Br=E,ws=Er,Ns=Vs,Hs=Ji,Qa=$,vu=pe,Sc=dl,Ro=w,rd=ke,jc=Be,sd=$s,bf=Wa,xu=ul,Zl=Js,Ia[0]=cr,Ia[1]=_e,Ia[2]=Zi,Ia[3]=_t,Ia[4]=wi,Ia[5]=al,Ia[6]=ga,Ia[7]=uo,Ia[8]=Vr,Ia[9]=Yi,Vi[0]=$r,Vi[1]=Rt,Vi[2]=Gn,Vi[3]=Vt,Vi[4]=Or,Vi[5]=ts,Vi[6]=hi,ta[0]=ol,ta[1]=we,ta[2]=Hr,ta[3]=Ni,ta[4]=ll,ta[5]=zl,ta[6]=cl,Ue=1}else Ue=0}Ue&&(Ue=(function(fr,Ss){for(fr.M=0;fr.M<fr.Va;++fr.M){var Hn,Xt=fr.Jc[fr.M&fr.Xb],It=fr.m,Rs=fr;for(Hn=0;Hn<Rs.za;++Hn){var Tn=It,ur=Rs,Yr=ur.Ac,pi=ur.Bc+4*Hn,Ws=ur.zc,gs=ur.ya[ur.aa+Hn];if(ur.Qa.Bb?gs.$b=Me(Tn,ur.Pa.jb[0])?2+Me(Tn,ur.Pa.jb[2]):Me(Tn,ur.Pa.jb[1]):gs.$b=0,ur.kc&&(gs.Ad=Me(Tn,ur.Bd)),gs.Za=!Me(Tn,145)+0,gs.Za){var ei=gs.Ob,mi=0;for(ur=0;4>ur;++ur){var ls,gr=Ws[0+ur];for(ls=0;4>ls;++ls){gr=hg[Yr[pi+ls]][gr];for(var _r=Vh[Me(Tn,gr[0])];0<_r;)_r=Vh[2*_r+Me(Tn,gr[_r])];gr=-_r,Yr[pi+ls]=gr}r(ei,mi,Yr,pi,4),mi+=4,Ws[0+ur]=gr}}else gr=Me(Tn,156)?Me(Tn,128)?1:3:Me(Tn,163)?2:0,gs.Ob[0]=gr,a(Yr,pi,gr,4),a(Ws,0,gr,4);gs.Dd=Me(Tn,142)?Me(Tn,114)?Me(Tn,183)?1:3:2:0}if(Rs.m.Ka)return wt(fr,7,"Premature end-of-partition0 encountered.");for(;fr.ja<fr.za;++fr.ja){if(Rs=Xt,Tn=(It=fr).rb[It.sb-1],Yr=It.rb[It.sb+It.ja],Hn=It.ya[It.aa+It.ja],pi=It.kc?Hn.Ad:0)Tn.la=Yr.la=0,Hn.Za||(Tn.Na=Yr.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var cs,Ar;if(Tn=Yr,Yr=Rs,pi=It.Pa.Xc,Ws=It.ya[It.aa+It.ja],gs=It.pb[Ws.$b],ur=Ws.ad,ei=0,mi=It.rb[It.sb-1],gr=ls=0,a(ur,ei,0,384),Ws.Za)var js=0,Cs=pi[3];else{_r=o(16);var Gr=Tn.Na+mi.Na;if(Gr=ec(Yr,pi[1],Gr,gs.Eb,0,_r,0),Tn.Na=mi.Na=(0<Gr)+0,1<Gr)xl(_r,0,ur,ei);else{var Li=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)ur[ei+_r]=Li}js=1,Cs=pi[0]}var Ur=15&Tn.la,Kr=15&mi.la;for(_r=0;4>_r;++_r){var Gs=1&Kr;for(Li=Ar=0;4>Li;++Li)Ur=Ur>>1|(Gs=(Gr=ec(Yr,Cs,Gr=Gs+(1&Ur),gs.Sc,js,ur,ei))>js)<<7,Ar=Ar<<2|(3<Gr?3:1<Gr?2:ur[ei+0]!=0),ei+=16;Ur>>=4,Kr=Kr>>1|Gs<<7,ls=(ls<<8|Ar)>>>0}for(Cs=Ur,js=Kr>>4,cs=0;4>cs;cs+=2){for(Ar=0,Ur=Tn.la>>4+cs,Kr=mi.la>>4+cs,_r=0;2>_r;++_r){for(Gs=1&Kr,Li=0;2>Li;++Li)Gr=Gs+(1&Ur),Ur=Ur>>1|(Gs=0<(Gr=ec(Yr,pi[2],Gr,gs.Qc,0,ur,ei)))<<3,Ar=Ar<<2|(3<Gr?3:1<Gr?2:ur[ei+0]!=0),ei+=16;Ur>>=2,Kr=Kr>>1|Gs<<5}gr|=Ar<<4*cs,Cs|=Ur<<4<<cs,js|=(240&Kr)<<cs}Tn.la=Cs,mi.la=js,Ws.Hc=ls,Ws.Gc=gr,Ws.ia=43690&gr?0:gs.ia,pi=!(ls|gr)}if(0<It.L&&(It.wa[It.Y+It.ja]=It.gd[Hn.$b][Hn.Za],It.wa[It.Y+It.ja].La|=!pi),Rs.Ka)return wt(fr,7,"Premature end-of-file encountered.")}if(Mt(fr),It=Ss,Rs=1,Hn=(Xt=fr).D,Tn=0<Xt.L&&Xt.M>=Xt.zb&&Xt.M<=Xt.Va,Xt.Aa==0)t:{if(Hn.M=Xt.M,Hn.uc=Tn,va(Xt,Hn),Rs=1,Hn=(Ar=Xt.D).Nb,Tn=(gr=rc[Xt.L])*Xt.R,Yr=gr/2*Xt.B,_r=16*Hn*Xt.R,Li=8*Hn*Xt.B,pi=Xt.sa,Ws=Xt.ta-Tn+_r,gs=Xt.qa,ur=Xt.ra-Yr+Li,ei=Xt.Ha,mi=Xt.Ia-Yr+Li,Kr=(Ur=Ar.M)==0,ls=Ur>=Xt.Va-1,Xt.Aa==2&&va(Xt,Ar),Ar.uc)for(Gs=(Gr=Xt).D.M,e(Gr.D.uc),Ar=Gr.yb;Ar<Gr.Hb;++Ar){js=Ar,Cs=Gs;var Ci=(ia=(Fs=Gr).D).Nb;cs=Fs.R;var ia=ia.wa[ia.Y+js],Ds=Fs.sa,Is=Fs.ta+16*Ci*cs+16*js,Ri=ia.dd,Qr=ia.tc;if(Qr!=0)if(e(3<=Qr),Fs.L==1)0<js&&bf(Ds,Is,cs,Qr+4),ia.La&&Zl(Ds,Is,cs,Qr),0<Cs&&sd(Ds,Is,cs,Qr+4),ia.La&&xu(Ds,Is,cs,Qr);else{var Di=Fs.B,Fa=Fs.qa,Ya=Fs.ra+8*Ci*Di+8*js,gi=Fs.Ha,Fs=Fs.Ia+8*Ci*Di+8*js;Ci=ia.ld,0<js&&(Hs(Ds,Is,cs,Qr+4,Ri,Ci),vu(Fa,Ya,gi,Fs,Di,Qr+4,Ri,Ci)),ia.La&&(Ro(Ds,Is,cs,Qr,Ri,Ci),jc(Fa,Ya,gi,Fs,Di,Qr,Ri,Ci)),0<Cs&&(Ns(Ds,Is,cs,Qr+4,Ri,Ci),Qa(Fa,Ya,gi,Fs,Di,Qr+4,Ri,Ci)),ia.La&&(Sc(Ds,Is,cs,Qr,Ri,Ci),rd(Fa,Ya,gi,Fs,Di,Qr,Ri,Ci))}}if(Xt.ia&&alert("todo:DitherRow"),It.put!=null){if(Ar=16*Ur,Ur=16*(Ur+1),Kr?(It.y=Xt.sa,It.O=Xt.ta+_r,It.f=Xt.qa,It.N=Xt.ra+Li,It.ea=Xt.Ha,It.W=Xt.Ia+Li):(Ar-=gr,It.y=pi,It.O=Ws,It.f=gs,It.N=ur,It.ea=ei,It.W=mi),ls||(Ur-=gr),Ur>It.o&&(Ur=It.o),It.F=null,It.J=null,Xt.Fa!=null&&0<Xt.Fa.length&&Ar<Ur&&(It.J=Qn(Xt,It,Ar,Ur-Ar),It.F=Xt.mb,It.F==null&&It.F.length==0)){Rs=wt(Xt,3,"Could not decode alpha data.");break t}Ar<It.j&&(gr=It.j-Ar,Ar=It.j,e(!(1&gr)),It.O+=Xt.R*gr,It.N+=Xt.B*(gr>>1),It.W+=Xt.B*(gr>>1),It.F!=null&&(It.J+=It.width*gr)),Ar<Ur&&(It.O+=It.v,It.N+=It.v>>1,It.W+=It.v>>1,It.F!=null&&(It.J+=It.v),It.ka=Ar-It.j,It.U=It.va-It.v,It.T=Ur-Ar,Rs=It.put(It))}Hn+1!=Xt.Ic||ls||(r(Xt.sa,Xt.ta-Tn,pi,Ws+16*Xt.R,Tn),r(Xt.qa,Xt.ra-Yr,gs,ur+8*Xt.B,Yr),r(Xt.Ha,Xt.Ia-Yr,ei,mi+8*Xt.B,Yr))}if(!Rs)return wt(fr,6,"Output aborted.")}return 1})(fe,Fe)),Fe.bc!=null&&Fe.bc(Fe),Ue&=1}return Ue?(fe.cb=0,Ue):0})(h,T)||(x=h.a)}}else x=h.a}x==0&&Z.Oa!=null&&Z.Oa.fd&&(x=bc(Z.ba))}Z=x}K=Z!=0?null:11>K?J.f.RGBA.eb:J.f.kb.y}else K=null;return K};var Au=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(Q,ue){for(var O="",R=0;R<4;R++)O+=String.fromCharCode(Q[ue++]);return O}function m(Q,ue){return Q[ue+0]|Q[ue+1]<<8}function b(Q,ue){return(Q[ue+0]|Q[ue+1]<<8|Q[ue+2]<<16)>>>0}function j(Q,ue){return(Q[ue+0]|Q[ue+1]<<8|Q[ue+2]<<16|Q[ue+3]<<24)>>>0}new f;var y=[0],I=[0],S=[],P=new f,_=t,F=(function(Q,ue){var O={},R=0,z=!1,Y=0,Ce=0;if(O.frames=[],!(function(M,L){for(var ne=0;ne<4;ne++)if(M[L+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(Q,ue)){for(j(Q,ue+=4),ue+=8;ue<Q.length;){var Ae=p(Q,ue),Pe=j(Q,ue+=4);ue+=4;var ce=Pe+(1&Pe);switch(Ae){case"VP8 ":case"VP8L":O.frames[R]===void 0&&(O.frames[R]={}),(se=O.frames[R]).src_off=z?Ce:ue-8,se.src_size=Y+Pe+8,R++,z&&(z=!1,Y=0,Ce=0);break;case"VP8X":(se=O.header={}).feature_flags=Q[ue];var ge=ue+4;se.canvas_width=1+b(Q,ge),ge+=3,se.canvas_height=1+b(Q,ge),ge+=3;break;case"ALPH":z=!0,Y=ce+8,Ce=ue-8;break;case"ANIM":(se=O.header).bgcolor=j(Q,ue),ge=ue+4,se.loop_count=m(Q,ge),ge+=2;break;case"ANMF":var De,se;(se=O.frames[R]={}).offset_x=2*b(Q,ue),ue+=3,se.offset_y=2*b(Q,ue),ue+=3,se.width=1+b(Q,ue),ue+=3,se.height=1+b(Q,ue),ue+=3,se.duration=b(Q,ue),ue+=3,De=Q[ue++],se.dispose=1&De,se.blend=De>>1&1}Ae!="ANMF"&&(ue+=ce)}return O}})(_,0);F.response=_,F.rgbaoutput=!0,F.dataurl=!1;var v=F.header?F.header:null,q=F.frames?F.frames:null;if(v){v.loop_counter=v.loop_count,y=[v.canvas_height],I=[v.canvas_width];for(var ee=0;ee<q.length&&q[ee].blend!=0;ee++);}var ae=q[0],W=P.WebPDecodeRGBA(_,ae.src_off,ae.src_size,I,y);ae.rgba=W,ae.imgwidth=I[0],ae.imgheight=y[0];for(var te=0;te<I[0]*y[0]*4;te++)S[te]=W[te];return this.width=I,this.height=y,this.data=S,this}(function(t){var e,n,r,a,o,u,c,f,p,m=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new f,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new u,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new u,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,p=new m}]);var b=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var L=M;Object.defineProperty(this,"pdf",{get:function(){return L}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(le){ne=!!le}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(le){me=!!le}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(le){isNaN(le)||(ye=le)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(le){isNaN(le)||(be=le)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(le){var gt;typeof le=="number"?gt=[le,le,le,le]:((gt=new Array(4))[0]=le[0],gt[1]=le.length>=2?le[1]:gt[0],gt[2]=le.length>=3?le[2]:gt[0],gt[3]=le.length>=4?le[3]:gt[1]),p.margin=gt}});var Re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Re},set:function(le){Re=le}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(le){Ie=le}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(le){Me=le}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(le){le instanceof m&&(p=le)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(le){p.path=le}});var Ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ze},set:function(le){Ze=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var gt;gt=j(le),this.ctx.fillStyle=gt.style,this.ctx.isFillTransparent=gt.a===0,this.ctx.fillOpacity=gt.a,this.pdf.setFillColor(gt.r,gt.g,gt.b,{a:gt.a}),this.pdf.setTextColor(gt.r,gt.g,gt.b,{a:gt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var gt=j(le);this.ctx.strokeStyle=gt.style,this.ctx.isStrokeTransparent=gt.a===0,this.ctx.strokeOpacity=gt.a,gt.a===0?this.pdf.setDrawColor(255,255,255):(gt.a,this.pdf.setDrawColor(gt.r,gt.g,gt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var ft=null,mt=null,Ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ft},set:function(le){ft=null,mt=null,Ft=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var gt;if(this.ctx.font=le,(gt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(le))!==null){var xe=gt[1];gt[2];var X=gt[3],B=gt[4];gt[5];var ve=gt[6],re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(B)[2];B=Math.floor(re==="px"?parseFloat(B)*this.pdf.internal.scaleFactor:re==="em"?parseFloat(B)*this.pdf.getFontSize():parseFloat(B)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(B);var D=(function(Pt){var pr,yn,Gt=[],Ut=Pt.trim();if(Ut==="")return $0;if(Ut in u5)return[u5[Ut]];for(;Ut!=="";){switch(yn=null,pr=(Ut=f5(Ut)).charAt(0)){case'"':case"'":yn=II(Ut.substring(1),pr);break;default:yn=FI(Ut)}if(yn===null||(Gt.push(yn[0]),(Ut=f5(yn[1]))!==""&&Ut.charAt(0)!==","))return $0;Ut=Ut.replace(/^,/,"")}return Gt})(ve);if(this.fontFaces){var H=(function(Pt,pr){var yn=Pt.getFontList(),Gt=JSON.stringify(yn);if(ft===null||mt!==Gt){var Ut=(function(tn){var Ge=[];return Object.keys(tn).forEach(function(at){tn[at].forEach(function(Xe){var an=null;switch(Xe){case"bold":an={family:at,weight:"bold"};break;case"italic":an={family:at,style:"italic"};break;case"bolditalic":an={family:at,weight:"bold",style:"italic"};break;case"":case"normal":an={family:at}}an!==null&&(an.ref={name:at,style:Xe},Ge.push(an))})}),Ge})(yn);ft=(function(tn){for(var Ge={},at=0;at<tn.length;++at){var Xe=z0(tn[at]),an=Xe.family,sr=Xe.stretch,gn=Xe.style,Jt=Xe.weight;Ge[an]=Ge[an]||{},Ge[an][sr]=Ge[an][sr]||{},Ge[an][sr][gn]=Ge[an][sr][gn]||{},Ge[an][sr][gn][Jt]=Xe}return Ge})(Ut.concat(pr)),mt=Gt}return ft})(this.pdf,this.fontFaces),je=D.map(function(Pt){return{family:Pt,stretch:"normal",weight:X,style:xe}}),Ne=(function(Pt,pr,yn){for(var Gt=(yn=yn||{}).defaultFontFamily||"times",Ut=Object.assign({},DI,yn.genericFontFamilies||{}),tn=null,Ge=null,at=0;at<pr.length;++at)if(Ut[(tn=z0(pr[at])).family]&&(tn.family=Ut[tn.family]),Pt.hasOwnProperty(tn.family)){Ge=Pt[tn.family];break}if(!(Ge=Ge||Pt[Gt]))throw new Error("Could not find a font-family for the rule '"+d5(tn)+"' and default family '"+Gt+"'.");if(Ge=(function(Xe,an){if(an[Xe])return an[Xe];var sr=O1[Xe],gn=sr<=O1.normal?-1:1,Jt=c5(an,aj,sr,gn);if(!Jt)throw new Error("Could not find a matching font-stretch value for "+Xe);return Jt})(tn.stretch,Ge),Ge=(function(Xe,an){if(an[Xe])return an[Xe];for(var sr=ij[Xe],gn=0;gn<sr.length;++gn)if(an[sr[gn]])return an[sr[gn]];throw new Error("Could not find a matching font-style for "+Xe)})(tn.style,Ge),!(Ge=(function(Xe,an){if(an[Xe])return an[Xe];if(Xe===400&&an[500])return an[500];if(Xe===500&&an[400])return an[400];var sr=RI[Xe],gn=c5(an,oj,sr,Xe<400?-1:1);if(!gn)throw new Error("Could not find a matching font-weight for value "+Xe);return gn})(tn.weight,Ge)))throw new Error("Failed to resolve a font for the rule '"+d5(tn)+"'.");return Ge})(H,je);this.pdf.setFont(Ne.ref.name,Ne.ref.style)}else{var Te="";(X==="bold"||parseInt(X,10)>=700||xe==="bold")&&(Te="bold"),xe==="italic"&&(Te+="italic"),Te.length===0&&(Te="normal");for(var $e="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<D.length;ct++){if(this.pdf.internal.getFont(D[ct],Te,{noFallback:!0,disableWarning:!0})!==void 0){$e=D[ct];break}if(Te==="bolditalic"&&this.pdf.internal.getFont(D[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$e=D[ct],Te="bold";else if(this.pdf.internal.getFont(D[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$e=D[ct],Te="normal";break}}if($e===""){for(var jt=0;jt<D.length;jt++)if(st[D[jt]]){$e=st[D[jt]];break}}$e=$e===""?"Times":$e,this.pdf.setFont($e,Te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};b.prototype.setLineDash=function(M){this.lineDash=M},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){q.call(this,"fill",!1)},b.prototype.stroke=function(){q.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(M,L){if(isNaN(M)||isNaN(L))throw rs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new u(M,L));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(M,L)},b.prototype.closePath=function(){var M=new u(0,0),L=0;for(L=this.path.length-1;L!==-1;L--)if(this.path[L].type==="begin"&&Zr(this.path[L+1])==="object"&&typeof this.path[L+1].x=="number"){M=new u(this.path[L+1].x,this.path[L+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(M.x,M.y)},b.prototype.lineTo=function(M,L){if(isNaN(M)||isNaN(L))throw rs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new u(M,L));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(ne.x,ne.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},b.prototype.quadraticCurveTo=function(M,L,ne,me){if(isNaN(ne)||isNaN(me)||isNaN(M)||isNaN(L))throw rs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new u(ne,me)),be=this.ctx.transform.applyToPoint(new u(M,L));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new u(ye.x,ye.y)},b.prototype.bezierCurveTo=function(M,L,ne,me,ye,be){if(isNaN(ye)||isNaN(be)||isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me))throw rs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Re=this.ctx.transform.applyToPoint(new u(ye,be)),Ie=this.ctx.transform.applyToPoint(new u(M,L)),Me=this.ctx.transform.applyToPoint(new u(ne,me));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:Me.x,y2:Me.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new u(Re.x,Re.y)},b.prototype.arc=function(M,L,ne,me,ye,be){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me)||isNaN(ye))throw rs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Re=this.ctx.transform.applyToPoint(new u(M,L));M=Re.x,L=Re.y;var Ie=this.ctx.transform.applyToPoint(new u(0,ne)),Me=this.ctx.transform.applyToPoint(new u(0,0));ne=Math.sqrt(Math.pow(Ie.x-Me.x,2)+Math.pow(Ie.y-Me.y,2))}Math.abs(ye-me)>=2*Math.PI&&(me=0,ye=2*Math.PI),this.path.push({type:"arc",x:M,y:L,radius:ne,startAngle:me,endAngle:ye,counterclockwise:be})},b.prototype.arcTo=function(M,L,ne,me,ye){throw new Error("arcTo not implemented.")},b.prototype.rect=function(M,L,ne,me){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me))throw rs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,L),this.lineTo(M+ne,L),this.lineTo(M+ne,L+me),this.lineTo(M,L+me),this.lineTo(M,L),this.lineTo(M+ne,L),this.lineTo(M,L)},b.prototype.fillRect=function(M,L,ne,me){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me))throw rs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,L,ne,me),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},b.prototype.strokeRect=function(M,L,ne,me){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me))throw rs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(M,L,ne,me),this.stroke())},b.prototype.clearRect=function(M,L,ne,me){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me))throw rs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,L,ne,me))},b.prototype.save=function(M){M=typeof M!="boolean"||M;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(L),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},b.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(L),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(M){var L,ne,me,ye;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))L=0,ne=0,me=0,ye=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(be!==null)L=parseInt(be[1]),ne=parseInt(be[2]),me=parseInt(be[3]),ye=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)L=parseInt(be[1]),ne=parseInt(be[2]),me=parseInt(be[3]),ye=parseFloat(be[4]);else{if(ye=1,typeof M=="string"&&M.charAt(0)!=="#"){var Re=new X4(M);M=Re.ok?Re.toHex():"#000000"}M.length===4?(L=M.substring(1,2),L+=L,ne=M.substring(2,3),ne+=ne,me=M.substring(3,4),me+=me):(L=M.substring(1,3),ne=M.substring(3,5),me=M.substring(5,7)),L=parseInt(L,16),ne=parseInt(ne,16),me=parseInt(me,16)}}return{r:L,g:ne,b:me,a:ye,style:M}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(M,L,ne,me){if(isNaN(L)||isNaN(ne)||typeof M!="string")throw rs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!y.call(this)){var ye=ce(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;R.call(this,{text:M,x:L,y:ne,scale:be,angle:ye,align:this.textAlign,maxWidth:me})}},b.prototype.strokeText=function(M,L,ne,me){if(isNaN(L)||isNaN(ne)||typeof M!="string")throw rs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){me=isNaN(me)?void 0:me;var ye=ce(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;R.call(this,{text:M,x:L,y:ne,scale:be,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:me})}},b.prototype.measureText=function(M){if(typeof M!="string")throw rs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var L=this.pdf,ne=this.pdf.internal.scaleFactor,me=L.internal.getFontSize(),ye=L.getStringUnitWidth(M)*me/L.internal.scaleFactor;return new function(be){var Re=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Re}}),this}({width:ye*=Math.round(96*ne/72*1e4)/1e4})},b.prototype.scale=function(M,L){if(isNaN(M)||isNaN(L))throw rs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new f(M,0,0,L,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.rotate=function(M){if(isNaN(M))throw rs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var L=new f(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(L)},b.prototype.translate=function(M,L){if(isNaN(M)||isNaN(L))throw rs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new f(1,0,0,1,M,L);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.transform=function(M,L,ne,me,ye,be){if(isNaN(M)||isNaN(L)||isNaN(ne)||isNaN(me)||isNaN(ye)||isNaN(be))throw rs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Re=new f(M,L,ne,me,ye,be);this.ctx.transform=this.ctx.transform.multiply(Re)},b.prototype.setTransform=function(M,L,ne,me,ye,be){M=isNaN(M)?1:M,L=isNaN(L)?0:L,ne=isNaN(ne)?0:ne,me=isNaN(me)?1:me,ye=isNaN(ye)?0:ye,be=isNaN(be)?0:be,this.ctx.transform=new f(M,L,ne,me,ye,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(M,L,ne,me,ye,be,Re,Ie,Me){var Ze=this.pdf.getImageProperties(M),ft=1,mt=1,Ft=1,le=1;me!==void 0&&Ie!==void 0&&(Ft=Ie/me,le=Me/ye,ft=Ze.width/me*Ie/me,mt=Ze.height/ye*Me/ye),be===void 0&&(be=L,Re=ne,L=0,ne=0),me!==void 0&&Ie===void 0&&(Ie=me,Me=ye),me===void 0&&Ie===void 0&&(Ie=Ze.width,Me=Ze.height);var gt=this.ctx.transform.decompose(),xe=ce(gt.rotate.shx),X=new f,B=(X=(X=(X=X.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new c(be-L*Ft,Re-ne*le,me*ft,ye*mt));if(this.autoPaging){for(var ve,re=P.call(this,B),D=[],H=0;H<re.length;H+=1)D.indexOf(re[H])===-1&&D.push(re[H]);v(D);for(var je=D[0],Ne=D[D.length-1],Te=je;Te<Ne+1;Te++){this.pdf.setPage(Te);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=Te===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=Te===1?0:ct+(Te-2)*jt;if(this.ctx.clip_path.length!==0){var pr=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ve,this.posX+this.margin[3],-Pt+st+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=pr}var yn=JSON.parse(JSON.stringify(B));yn=F([yn],this.posX+this.margin[3],-Pt+st+this.ctx.prevPageLastElemOffset)[0];var Gt=(Te>je||Te<Ne)&&S.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,jt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",yn.x,yn.y,yn.w,yn.h,null,null,xe),Gt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",B.x,B.y,B.w,B.h,null,null,xe)};var P=function(M,L,ne){var me=[];L=L||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":me.push(Math.floor((M.y+ye)/ne)+1);break;case"arc":me.push(Math.floor((M.y+ye-M.radius)/ne)+1),me.push(Math.floor((M.y+ye+M.radius)/ne)+1);break;case"qct":var be=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);me.push(Math.floor((be.y+ye)/ne)+1),me.push(Math.floor((be.y+be.h+ye)/ne)+1);break;case"bct":var Re=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);me.push(Math.floor((Re.y+ye)/ne)+1),me.push(Math.floor((Re.y+Re.h+ye)/ne)+1);break;case"rect":me.push(Math.floor((M.y+ye)/ne)+1),me.push(Math.floor((M.y+M.h+ye)/ne)+1)}for(var Ie=0;Ie<me.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<me[Ie];)_.call(this);return me},_=function(){var M=this.fillStyle,L=this.strokeStyle,ne=this.font,me=this.lineCap,ye=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=L,this.font=ne,this.lineCap=me,this.lineWidth=ye,this.lineJoin=be},F=function(M,L,ne){for(var me=0;me<M.length;me++)switch(M[me].type){case"bct":M[me].x2+=L,M[me].y2+=ne;case"qct":M[me].x1+=L,M[me].y1+=ne;default:M[me].x+=L,M[me].y+=ne}return M},v=function(M){return M.sort(function(L,ne){return L-ne})},q=function(M,L){var ne=this.fillStyle,me=this.strokeStyle,ye=this.lineCap,be=this.lineWidth,Re=Math.abs(be*this.ctx.transform.scaleX),Ie=this.lineJoin;if(this.autoPaging){for(var Me,Ze,ft=JSON.parse(JSON.stringify(this.path)),mt=JSON.parse(JSON.stringify(this.path)),Ft=[],le=0;le<mt.length;le++)if(mt[le].x!==void 0)for(var gt=P.call(this,mt[le]),xe=0;xe<gt.length;xe+=1)Ft.indexOf(gt[xe])===-1&&Ft.push(gt[xe]);for(var X=0;X<Ft.length;X++)for(;this.pdf.internal.getNumberOfPages()<Ft[X];)_.call(this);v(Ft);for(var B=Ft[0],ve=Ft[Ft.length-1],re=B;re<ve+1;re++){this.pdf.setPage(re),this.fillStyle=ne,this.strokeStyle=me,this.lineCap=ye,this.lineWidth=Re,this.lineJoin=Ie;var D=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],H=re===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Te=re===1?0:je+(re-2)*Ne;if(this.ctx.clip_path.length!==0){var $e=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Me,this.posX+this.margin[3],-Te+H+this.ctx.prevPageLastElemOffset),ee.call(this,M,!0),this.path=$e}if(Ze=JSON.parse(JSON.stringify(ft)),this.path=F(Ze,this.posX+this.margin[3],-Te+H+this.ctx.prevPageLastElemOffset),L===!1||re===0){var st=(re>B||re<ve)&&S.call(this);st&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,Ne,null).clip().discardPath()),ee.call(this,M,L),st&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=ft}else this.lineWidth=Re,ee.call(this,M,L),this.lineWidth=be},ee=function(M,L){if((M!=="stroke"||L||!I.call(this))&&(M==="stroke"||L||!y.call(this))){for(var ne,me,ye=[],be=this.path,Re=0;Re<be.length;Re++){var Ie=be[Re];switch(Ie.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:Ie,deltas:[],abs:[]});break;case"lt":var Me=ye.length;if(be[Re-1]&&!isNaN(be[Re-1].x)&&(ne=[Ie.x-be[Re-1].x,Ie.y-be[Re-1].y],Me>0)){for(;Me>=0;Me--)if(ye[Me-1].close!==!0&&ye[Me-1].begin!==!0){ye[Me-1].deltas.push(ne),ye[Me-1].abs.push(Ie);break}}break;case"bct":ne=[Ie.x1-be[Re-1].x,Ie.y1-be[Re-1].y,Ie.x2-be[Re-1].x,Ie.y2-be[Re-1].y,Ie.x-be[Re-1].x,Ie.y-be[Re-1].y],ye[ye.length-1].deltas.push(ne);break;case"qct":var Ze=be[Re-1].x+2/3*(Ie.x1-be[Re-1].x),ft=be[Re-1].y+2/3*(Ie.y1-be[Re-1].y),mt=Ie.x+2/3*(Ie.x1-Ie.x),Ft=Ie.y+2/3*(Ie.y1-Ie.y),le=Ie.x,gt=Ie.y;ne=[Ze-be[Re-1].x,ft-be[Re-1].y,mt-be[Re-1].x,Ft-be[Re-1].y,le-be[Re-1].x,gt-be[Re-1].y],ye[ye.length-1].deltas.push(ne);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(Ie)}}me=L?null:M==="stroke"?"stroke":"fill";for(var xe=!1,X=0;X<ye.length;X++)if(ye[X].arc)for(var B=ye[X].abs,ve=0;ve<B.length;ve++){var re=B[ve];re.type==="arc"?te.call(this,re.x,re.y,re.radius,re.startAngle,re.endAngle,re.counterclockwise,void 0,L,!xe):z.call(this,re.x,re.y),xe=!0}else if(ye[X].close===!0)this.pdf.internal.out("h"),xe=!1;else if(ye[X].begin!==!0){var D=ye[X].start.x,H=ye[X].start.y;Y.call(this,ye[X].deltas,D,H),xe=!0}me&&Q.call(this,me),L&&ue.call(this)}},ae=function(M){var L=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=L*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-ne;case"top":return M+L-ne;case"hanging":return M+L-2*ne;case"middle":return M+L/2-ne;default:return M}},W=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(L,ne){this.colorStops.push([L,ne])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var te=function(M,L,ne,me,ye,be,Re,Ie,Me){for(var Ze=Ae.call(this,ne,me,ye,be),ft=0;ft<Ze.length;ft++){var mt=Ze[ft];ft===0&&(Me?O.call(this,mt.x1+M,mt.y1+L):z.call(this,mt.x1+M,mt.y1+L)),Ce.call(this,M,L,mt.x2,mt.y2,mt.x3,mt.y3,mt.x4,mt.y4)}Ie?ue.call(this):Q.call(this,Re)},Q=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(M,L){this.pdf.internal.out(n(M)+" "+r(L)+" m")},R=function(M){var L;switch(M.align){case"right":case"end":L="right";break;case"center":L="center";break;default:L="left"}var ne,me,ye,be=this.pdf.getTextDimensions(M.text),Re=ae.call(this,M.y),Ie=W.call(this,Re)-be.h,Me=this.ctx.transform.applyToPoint(new u(M.x,Re));if(this.autoPaging){var Ze=this.ctx.transform.decompose(),ft=new f;ft=(ft=(ft=ft.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale);for(var mt=this.ctx.transform.applyToRectangle(new c(M.x,Re,be.w,be.h)),Ft=ft.applyToRectangle(new c(M.x,Ie,be.w,be.h)),le=P.call(this,Ft),gt=[],xe=0;xe<le.length;xe+=1)gt.indexOf(le[xe])===-1&&gt.push(le[xe]);v(gt);for(var X=gt[0],B=gt[gt.length-1],ve=X;ve<B+1;ve++){this.pdf.setPage(ve);var re=ve===1?this.posY+this.margin[0]:this.margin[0],D=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],H=this.pdf.internal.pageSize.height-this.margin[2],je=H-this.margin[0],Ne=this.pdf.internal.pageSize.width-this.margin[1],Te=Ne-this.margin[3],$e=ve===1?0:D+(ve-2)*je;if(this.ctx.clip_path.length!==0){var st=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ne,this.posX+this.margin[3],-1*$e+re),ee.call(this,"fill",!0),this.path=st}var ct=F([JSON.parse(JSON.stringify(Ft))],this.posX+this.margin[3],-$e+re+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*M.scale),ye=this.lineWidth,this.lineWidth=ye*M.scale);var jt=this.autoPaging!=="text";if(jt||ct.y+ct.h<=H){if(jt||ct.y>=re&&ct.x<=Ne){var Pt=jt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Ne-ct.x)[0],pr=F([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-$e+re+this.ctx.prevPageLastElemOffset)[0],yn=jt&&(ve>X||ve<B)&&S.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,je,null).clip().discardPath()),this.pdf.text(Pt,pr.x,pr.y,{angle:M.angle,align:L,renderingMode:M.renderingMode}),yn&&this.pdf.restoreGraphicsState()}}else ct.y<H&&(this.ctx.prevPageLastElemOffset+=H-ct.y);M.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ye)}}else M.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*M.scale),ye=this.lineWidth,this.lineWidth=ye*M.scale),this.pdf.text(M.text,Me.x+this.posX,Me.y+this.posY,{angle:M.angle,align:L,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ye)},z=function(M,L,ne,me){ne=ne||0,me=me||0,this.pdf.internal.out(n(M+ne)+" "+r(L+me)+" l")},Y=function(M,L,ne){return this.pdf.lines(M,L,ne,null,null)},Ce=function(M,L,ne,me,ye,be,Re,Ie){this.pdf.internal.out([e(a(ne+M)),e(o(me+L)),e(a(ye+M)),e(o(be+L)),e(a(Re+M)),e(o(Ie+L)),"c"].join(" "))},Ae=function(M,L,ne,me){for(var ye=2*Math.PI,be=Math.PI/2;L>ne;)L-=ye;var Re=Math.abs(ne-L);Re<ye&&me&&(Re=ye-Re);for(var Ie=[],Me=me?-1:1,Ze=L;Re>1e-5;){var ft=Ze+Me*Math.min(Re,be);Ie.push(Pe.call(this,M,Ze,ft)),Re-=Math.abs(ft-Ze),Ze=ft}return Ie},Pe=function(M,L,ne){var me=(ne-L)/2,ye=M*Math.cos(me),be=M*Math.sin(me),Re=ye,Ie=-be,Me=Re*Re+Ie*Ie,Ze=Me+Re*ye+Ie*be,ft=4/3*(Math.sqrt(2*Me*Ze)-Ze)/(Re*be-Ie*ye),mt=Re-ft*Ie,Ft=Ie+ft*Re,le=mt,gt=-Ft,xe=me+L,X=Math.cos(xe),B=Math.sin(xe);return{x1:M*Math.cos(L),y1:M*Math.sin(L),x2:mt*X-Ft*B,y2:mt*B+Ft*X,x3:le*X-gt*B,y3:le*B+gt*X,x4:M*Math.cos(ne),y4:M*Math.sin(ne)}},ce=function(M){return 180*M/Math.PI},ge=function(M,L,ne,me,ye,be){var Re=M+.5*(ne-M),Ie=L+.5*(me-L),Me=ye+.5*(ne-ye),Ze=be+.5*(me-be),ft=Math.min(M,ye,Re,Me),mt=Math.max(M,ye,Re,Me),Ft=Math.min(L,be,Ie,Ze),le=Math.max(L,be,Ie,Ze);return new c(ft,Ft,mt-ft,le-Ft)},De=function(M,L,ne,me,ye,be,Re,Ie){var Me,Ze,ft,mt,Ft,le,gt,xe,X,B,ve,re,D,H,je=ne-M,Ne=me-L,Te=ye-ne,$e=be-me,st=Re-ye,ct=Ie-be;for(Ze=0;Ze<41;Ze++)X=(gt=(ft=M+(Me=Ze/40)*je)+Me*((Ft=ne+Me*Te)-ft))+Me*(Ft+Me*(ye+Me*st-Ft)-gt),B=(xe=(mt=L+Me*Ne)+Me*((le=me+Me*$e)-mt))+Me*(le+Me*(be+Me*ct-le)-xe),Ze==0?(ve=X,re=B,D=X,H=B):(ve=Math.min(ve,X),re=Math.min(re,B),D=Math.max(D,X),H=Math.max(H,B));return new c(Math.round(ve),Math.round(re),Math.round(D-ve),Math.round(H-re))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,L,ne=(M=this.ctx.lineDash,L=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:L}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(un.API),(function(t){var e=function(u){var c,f,p,m,b,j,y,I,S,P;for(f=[],p=0,m=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(b=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(j=(b=((b=((b=((b=(b-(P=b%85))/85)-(S=b%85))/85)-(I=b%85))/85)-(y=b%85))/85)%85,f.push(j+33,y+33,I+33,S+33,P+33)):f.push(122);return(function(_,F){for(var v=F;v>0;v--)_.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},n=function(u){var c,f,p,m,b,j=String,y="length",I=255,S="charCodeAt",P="slice",_="replace";for(u[P](-2),u=u[P](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),p=[],m=0,b=(u+=c="uuuuu"[P](u[y]%5||5))[y];b>m;m+=5)f=52200625*(u[S](m)-33)+614125*(u[S](m+1)-33)+7225*(u[S](m+2)-33)+85*(u[S](m+3)-33)+(u[S](m+4)-33),p.push(I&f>>24,I&f>>16,I&f>>8,I&f);return(function(F,v){for(var q=v;q>0;q--)F.pop()})(p,c[y]),j.fromCharCode.apply(j,p)},r=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=T1(c)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(u,c){var f=0,p=u||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=a(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(un.API),(function(t){t.loadFile=function(e,n,r){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,p,m){var b=new XMLHttpRequest,j=0,y=function(I){var S=I.length,P=[],_=String.fromCharCode;for(j=0;j<S;j+=1)P.push(_(255&I.charCodeAt(j)));return P.join("")};if(b.open("GET",f,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?m(y(this.responseText)):m(void 0)}),b.send(null),p&&b.status===200)return y(b.responseText)})(a,o,u)}catch{}return c})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(un.API),(function(t){function e(){return(Mn.html2canvas?Promise.resolve(Mn.html2canvas):j0(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Mn.DOMPurify?Promise.resolve(Mn.DOMPurify):j0(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var f=Zr(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var p=document.createElement(c);for(var m in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[m]=f.style[m];return p},o=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(c(b,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function c(f){var p=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),p);return(m=m.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(n).then(function(p){return this.set({src:a("div",{innerHTML:c,dompurify:p})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=this.opt.jsPDF,m=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,j=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete j.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var y=0;y<m.length;++y){var I=m[y],S=I.src.find(function(P){return P.format==="truetype"});S&&p.addFont(S.url,I.ref.name,I.ref.style)}return j.windowHeight=j.windowHeight||0,j.windowHeight=j.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):j.windowHeight,p.context2d.save(!0),f(this.prop.container,j)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(r(c)!=="object")return this;var f=Object.keys(c||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=c[p]};switch(p){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[p]=c[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var p=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(p):p})},u.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(c=c||un.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,p,m){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,p,m){return this.setProgress(c?this.progress.val+c:null,f||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(c,f){var p=this;return this.thenCore(c,f,function(m,b){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(j){return p.updateProgress(null,m),j}).then(m,b).then(function(j){return p.updateProgress(1),j})})},u.prototype.thenCore=function(c,f,p){p=p||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),f&&(f=f.bind(m));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),j=p.call(b,c,f);return u.convert(j,m.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,un.getPageSize=function(c,f,p){if(Zr(c)==="object"){var m=c;c=m.orientation,f=m.unit||f,p=m.format||p}f=f||"mm",p=p||"a4",c=(""+(c||"P")).toLowerCase();var b,j=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var I,S=0,P=0;if(y.hasOwnProperty(j))S=y[j][1]/b,P=y[j][0]/b;else try{S=p[1],P=p[0]}catch{throw new Error("Invalid format: "+p)}if(c==="p"||c==="portrait")c="p",P>S&&(I=P,P=S,S=I);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",S>P&&(I=P,P=S,S=I)}return{width:P,height:S,unit:f,k:b,orientation:c}},t.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(z0):null;var p=new u(f);return f.worker?p:p.from(c).doCallback()}})(un.API),un.API.addJS=function(t){return p5=t,this.internal.events.subscribe("postPutResources",function(){Op=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Op+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),h5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+p5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Op!==void 0&&h5!==void 0&&this.internal.out("/Names <</JavaScript "+Op+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=r.exec(u);if(c!=null){var f=c[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var b=n.internal.newObject();m.push(b);var j=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<m.length;o++)n.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,o){var u={title:a,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var o=0;o<a.children.length;o++)r.count++,this.count_r(r,a.children[o]);return r.count}}])})(un.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,a,o,u,c){var f,p=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,f=(function(b){for(var j,y=256*b.charCodeAt(4)+b.charCodeAt(5),I=b.length,S={width:0,height:0,numcomponents:1},P=4;P<I;P+=2){if(P+=y,e.indexOf(b.charCodeAt(P+1))!==-1){j=256*b.charCodeAt(P+5)+b.charCodeAt(P+6),S={width:256*b.charCodeAt(P+7)+b.charCodeAt(P+8),height:j,numcomponents:b.charCodeAt(P+9)};break}y=256*b.charCodeAt(P+2)+b.charCodeAt(P+3)}return S})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:n,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:p,index:r,alias:a}}return m}})(un.API),un.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,o=yI(t,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,p=o.palette,m=o.depth;a=p&&f===1?(function(te){for(var Q=te.width,ue=te.height,O=te.data,R=te.palette,z=te.depth,Y=!1,Ce=[],Ae=[],Pe=void 0,ce=!1,ge=0,De=0;De<R.length;De++){var se=xy(R[De],4),M=se[0],L=se[1],ne=se[2],me=se[3];Ce.push(M,L,ne),me!=null&&(me===0?(ge++,Ae.length<1&&Ae.push(De)):me<255&&(ce=!0))}if(ce||ge>1){Y=!0,Ae=void 0;var ye=Q*ue;Pe=new Uint8Array(ye);for(var be=new DataView(O.buffer),Re=0;Re<ye;Re++){var Ie=V0(be,Re,z),Me=xy(R[Ie],4)[3];Pe[Re]=Me}}else ge===0&&(Ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:O,alphaBytes:Pe,needSMask:Y,palette:Ce,mask:Ae}})(o):f===2||f===4?(function(te){for(var Q=te.data,ue=te.width,O=te.height,R=te.channels,z=te.depth,Y=R===2?"DeviceGray":"DeviceRGB",Ce=R-1,Ae=ue*O,Pe=Ce,ce=Ae*Pe,ge=1*Ae,De=Math.ceil(ce*z/8),se=Math.ceil(ge*z/8),M=new Uint8Array(De),L=new Uint8Array(se),ne=new DataView(Q.buffer),me=new DataView(M.buffer),ye=new DataView(L.buffer),be=!1,Re=0;Re<Ae;Re++){for(var Ie=Re*R,Me=0;Me<Pe;Me++)S5(me,V0(ne,Ie+Me,z),Re*Pe+Me,z);var Ze=V0(ne,Ie+Pe,z);Ze<(1<<z)-1&&(be=!0),S5(ye,Ze,1*Re,z)}return{colorSpace:Y,colorsPerPixel:Ce,sMaskBitsPerComponent:be?z:void 0,colorBytes:M,alphaBytes:L,needSMask:be}})(o):(function(te){var Q=te.data,ue=te.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ue,colorsPerPixel:ue==="DeviceGray"?1:3,colorBytes:Q instanceof Uint16Array?(function(O){for(var R=O.length,z=new Uint8Array(2*R),Y=new DataView(z.buffer,z.byteOffset,z.byteLength),Ce=0;Ce<R;Ce++)Y.setUint16(2*Ce,O[Ce],!1);return z})(Q):Q,needSMask:!1}})(o);var b,j,y,I=a,S=I.colorSpace,P=I.colorsPerPixel,_=I.sMaskBitsPerComponent,F=I.colorBytes,v=I.alphaBytes,q=I.needSMask,ee=I.palette,ae=I.mask,W=null;return r!==un.API.image_compression.NONE&&typeof T1=="function"?(W=(function(te){var Q;switch(te){case un.API.image_compression.FAST:Q=11;break;case un.API.image_compression.MEDIUM:Q=13;break;case un.API.image_compression.SLOW:Q=14;break;default:Q=12}return Q})(r),b=this.decode.FLATE_DECODE,j="/Predictor ".concat(W," /Colors ").concat(P," /BitsPerComponent ").concat(m," /Columns ").concat(u),t=x5(F,Math.ceil(u*P*m/8),P,m,r),q&&(y=x5(v,Math.ceil(u*_/8),1,_,r))):(b=void 0,j=void 0,t=F,q&&(y=v)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:n,data:t,index:e,filter:b,decodeParameters:j,transparency:ae,palette:ee,sMask:y,predictor:W,width:u,height:c,bitsPerComponent:m,sMaskBitsPerComponent:_,colorSpace:S}}},(function(t){t.processGIF89A=function(e,n,r,a){var o=new qI(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:c},m=new H0(100).encode(p,100);return t.processJPEG.call(this,m,n,r,a)},t.processGIF87A=t.processGIF89A})(un.API),$o.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$o.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){rs.log("bit decode error:"+n)}},$o.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}n!==0&&(this.pos+=4-n)}},$o.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*a*4,c=o>>4,f=15&o,p=this.palette[c];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*a+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},$o.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},$o.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,m=r*this.width*4+4*a;this.data[m]=f,this.data[m+1]=c,this.data[m+2]=u,this.data[m+3]=p}this.pos+=t}},$o.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&n)/n*255|0,p=(u>>11)/e*255|0,m=a*this.width*4+4*o;this.data[m]=p,this.data[m+1]=f,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},$o.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},$o.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=u}},$o.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,a){var o=new $o(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new H0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),C5.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,a){var o=new C5(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new H0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),un.API.processRGBA=function(t,e,n){for(var r=t.data,a=r.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,p=0;p<a;p+=4){var m=r[p],b=r[p+1],j=r[p+2],y=r[p+3];o[c++]=m,o[c++]=b,o[c++]=j,u[f++]=y}var I=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:I,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},un.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ed=un.API,Mp=Ed.getCharWidthsArray=function(t,e){var n,r,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,p=e.kerning?e.kerning:a.metadata.Unicode.kerning,m=p.fof?p.fof:1,b=e.doKerning!==!1,j=0,y=t.length,I=0,S=c[0]||f,P=[];for(n=0;n<y;n++)r=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?P.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(j=b&&Zr(p[r])==="object"&&!isNaN(parseInt(p[r][I],10))?p[r][I]/m:0,P.push((c[r]||S)/f+j)),I=r;return P},m5=Ed.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Ed.processArabic&&(t=Ed.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,a)/n:Mp.apply(this,arguments).reduce(function(o,u){return o+u},0)},g5=function(t,e,n,r){for(var a=[],o=0,u=t.length,c=0;o!==u&&c+e[o]<n;)c+=e[o],o++;a.push(t.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>r&&(a.push(t.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(t.slice(f,o)),a},v5=function(t,e,n){n||(n={});var r,a,o,u,c,f,p,m=[],b=[m],j=n.textIndent||0,y=0,I=0,S=t.split(" "),P=Mp.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var _=Array(f).join(" "),F=[];S.map(function(q){(q=q.split(/\s*\n/)).length>1?F=F.concat(q.map(function(ee,ae){return(ae&&ee.length?`
`:"")+ee})):F.push(q[0])}),S=F,f=m5.apply(this,[_,n])}for(o=0,u=S.length;o<u;o++){var v=0;if(r=S[o],f&&r[0]==`
`&&(r=r.substr(1),v=1),j+y+(I=(a=Mp.apply(this,[r,n])).reduce(function(q,ee){return q+ee},0))>e||v){if(I>e){for(c=g5.apply(this,[r,a,e-(j+y),e]),m.push(c.shift()),m=[c.pop()];c.length;)b.push([c.shift()]);I=a.slice(r.length-(m[0]?m[0].length:0)).reduce(function(q,ee){return q+ee},0)}else m=[r];b.push(m),j=I+f,y=P}else m.push(r),j+=y+I,y=P}return p=f?function(q,ee){return(ee?_:"")+q.join(" ")}:function(q){return q.join(" ")},b.map(p)},Ed.splitTextToSize=function(t,e,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var b=this.internal.getFont(m.fontName,m.fontStyle),j="Unicode";return b.metadata[j]?{widths:b.metadata[j].widths||{0:1},kerning:b.metadata[j].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=n.lineIndent;var c,f,p=[];for(c=0,f=r.length;c<f;c++)p=p.concat(v5.apply(this,[r[c],u,o]));return p},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},a={},o=0;o<16;o++)r[n[o]]=e[o],a[e[o]]=n[o];var u=function(j){return"0x"+parseInt(j,10).toString(16)},c=t.__fontmetrics__.compress=function(j){var y,I,S,P,_=["{"];for(var F in j){if(y=j[F],isNaN(parseInt(F,10))?I="'"+F+"'":(F=parseInt(F,10),I=(I=u(F).slice(2)).slice(0,-1)+a[I.slice(-1)]),typeof y=="number")y<0?(S=u(y).slice(3),P="-"):(S=u(y).slice(2),P=""),S=P+S.slice(0,-1)+a[S.slice(-1)];else{if(Zr(y)!=="object")throw new Error("Don't know what to do with value type "+Zr(y)+".");S=c(y)}_.push(I+S)}return _.push("}"),_.join("")},f=t.__fontmetrics__.uncompress=function(j){if(typeof j!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,I,S,P,_={},F=1,v=_,q=[],ee="",ae="",W=j.length-1,te=1;te<W;te+=1)(P=j[te])=="'"?y?(S=y.join(""),y=void 0):y=[]:y?y.push(P):P=="{"?(q.push([v,S]),v={},S=void 0):P=="}"?((I=q.pop())[0][I[1]]=v,S=void 0,v=I[0]):P=="-"?F=-1:S===void 0?r.hasOwnProperty(P)?(ee+=r[P],S=parseInt(ee,16)*F,F=1,ee=""):ee+=P:r.hasOwnProperty(P)?(ae+=r[P],v[S]=parseInt(ae,16)*F,F=1,S=void 0,ae=""):ae+=P;return _},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(j){var y=j.font,I=b.Unicode[y.postScriptName];I&&(y.metadata.Unicode={},y.metadata.Unicode.widths=I.widths,y.metadata.Unicode.kerning=I.kerning);var S=m.Unicode[y.postScriptName];S&&(y.metadata.Unicode.encoding=S,y.encoding=S.codePages[0])}])})(un.API),(function(t){var e=function(n){for(var r=n.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=n.charCodeAt(o);return a};t.API.events.push(["addFont",function(n){var r=void 0,a=n.font,o=n.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Xp(c)),u.metadata=t.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,r)}}])})(un),un.API.addSvgAsImage=function(t,e,n,r,a,o,u,c){if(isNaN(e)||isNaN(n))throw rs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw rs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=r,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Mn.canvg?Promise.resolve(Mn.canvg):j0(()=>import("./index.es-DrBg76eM.js"),[])).catch(function(j){return Promise.reject(new Error("Could not load canvg: "+j))}).then(function(j){return j.default?j.default:j}).then(function(j){return j.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(m)}).then(function(){b.addImage(f.toDataURL("image/jpeg",1),e,n,r,a,u,c)})},un.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,n);return this},un.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],p=0,m=0,b=0;function j(I,S){var P,_=!1;for(P=0;P<I.length;P+=1)I[P]===S&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=c.length;for(b=0;b<y;b+=1)n[c[b]].value=n[c[b]].defaultValue,n[c[b]].explicitSet=!1}if(Zr(t)==="object"){for(a in t)if(o=t[a],j(c,a)&&o!==void 0){if(n[a].type==="boolean"&&typeof o=="boolean")n[a].value=o;else if(n[a].type==="name"&&j(n[a].valueSet,o))n[a].value=o;else if(n[a].type==="integer"&&Number.isInteger(o))n[a].value=o;else if(n[a].type==="array"){for(p=0;p<o.length;p+=1)if(r=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(r=!1);r===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}n[a].value="["+f.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var I,S=[];for(I in n)n[I].explicitSet===!0&&(n[I].type==="name"?S.push("/"+I+" /"+n[I].value):S.push("/"+I+" "+n[I].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(un.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],b=0,j=o.length;b<j;++b){if(c=u.metadata.characterToGlyph(o.charCodeAt(b)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(b),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(p[4-c.length],c)}return m.join("")},r=function(o){var u,c,f,p,m,b,j;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,j=(c=Object.keys(o).sort(function(y,I){return y-I})).length;b<j;b++)u=c[b],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,j=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),y="",I=0;I<j.length;I++)y+=String.fromCharCode(j[I]);var S=p();m({data:y,addLength1:!0,objectId:S}),f("endobj");var P=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:P}),f("endobj");var _=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Id(c.fontName)),f("/FontFile2 "+S+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var F=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Id(c.fontName)),f("/FontDescriptor "+_+" 0 R"),f("/W "+t.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+P+" 0 R"),f("/BaseFont /"+Id(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+F+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,j="",y=0;y<b.length;y++)j+=String.fromCharCode(b[y]);var I=p();m({data:j,addLength1:!0,objectId:I}),f("endobj");var S=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var P=p();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+I+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+Id(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=p();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Id(c.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,p=o.y,m=o.options||{},b=o.mutex||{},j=b.pdfEscape,y=b.activeFontKey,I=b.fonts,S=y,P="",_=0,F="",v=I[S].encoding;if(I[S].encoding!=="Identity-H")return{text:c,x:f,y:p,options:m,mutex:b};for(F=c,S=y,Array.isArray(c)&&(F=c[0]),_=0;_<F.length;_+=1)I[S].metadata.hasOwnProperty("cmap")&&(u=I[S].metadata.cmap.unicode.codeMap[F[_].charCodeAt(0)]),u||F[_].charCodeAt(0)<256&&I[S].metadata.hasOwnProperty("Unicode")?P+=F[_]:P+="";var q="";return parseInt(S.slice(1))<14||v==="WinAnsiEncoding"?q=j(P,S).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(q=n(P,I[S])),b.isHex=!0,{text:q,x:f,y:p,options:m,mutex:b}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?c.push([a(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):c.push(a(Object.assign({},f,{text:u[p]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(un),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(un.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var a,o,u,c,f,p,m,b=e,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,v=0;this.__bidiEngine__={};var q=function(O){var R=O.charCodeAt(),z=R>>8,Y=S[z];return Y!==void 0?b[256*Y+(255&R)]:z===252||z===253?"AL":_.test(z)?"L":z===8?"R":"N"},ee=function(O){for(var R,z=0;z<O.length;z++){if((R=q(O.charAt(z)))==="L")return!1;if(R==="R")return!0}return!1},ae=function(O,R,z,Y){var Ce,Ae,Pe,ce,ge=R[Y];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(ge="AN");break;case"AL":F=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":Y<1||Y+1>=R.length||(Ce=z[Y-1])!=="EN"&&Ce!=="AN"||(Ae=R[Y+1])!=="EN"&&Ae!=="AN"?ge="N":F&&(Ae="AN"),ge=Ae===Ce?Ae:"N";break;case"ES":ge=(Ce=Y>0?z[Y-1]:"B")==="EN"&&Y+1<R.length&&R[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&z[Y-1]==="EN"){ge="EN";break}if(F){ge="N";break}for(Pe=Y+1,ce=R.length;Pe<ce&&R[Pe]==="ET";)Pe++;ge=Pe<ce&&R[Pe]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(ce=R.length,Pe=Y+1;Pe<ce&&R[Pe]==="NSM";)Pe++;if(Pe<ce){var De=O[Y],se=De>=1425&&De<=2303||De===64286;if(Ce=R[Pe],se&&(Ce==="R"||Ce==="AL")){ge="R";break}}}ge=Y<1||(Ce=R[Y-1])==="B"?"N":z[Y-1];break;case"B":F=!1,a=!0,ge=v;break;case"S":o=!0,ge="N"}return ge},W=function(O,R,z){var Y=O.split("");return z&&te(Y,z,{hiLevel:v}),Y.reverse(),R&&R.reverse(),Y.join("")},te=function(O,R,z){var Y,Ce,Ae,Pe,ce,ge=-1,De=O.length,se=0,M=[],L=v?y:j,ne=[];for(F=!1,a=!1,o=!1,Ce=0;Ce<De;Ce++)ne[Ce]=q(O[Ce]);for(Ae=0;Ae<De;Ae++){if(ce=se,M[Ae]=ae(O,ne,M,Ae),Y=240&(se=L[ce][I[M[Ae]]]),se&=15,R[Ae]=Pe=L[se][5],Y>0)if(Y===16){for(Ce=ge;Ce<Ae;Ce++)R[Ce]=1;ge=-1}else ge=-1;if(L[se][6])ge===-1&&(ge=Ae);else if(ge>-1){for(Ce=ge;Ce<Ae;Ce++)R[Ce]=Pe;ge=-1}ne[Ae]==="B"&&(R[Ae]=0),z.hiLevel|=Pe}o&&(function(me,ye,be){for(var Re=0;Re<be;Re++)if(me[Re]==="S"){ye[Re]=v;for(var Ie=Re-1;Ie>=0&&me[Ie]==="WS";Ie--)ye[Ie]=v}})(ne,R,De)},Q=function(O,R,z,Y,Ce){if(!(Ce.hiLevel<O)){if(O===1&&v===1&&!a)return R.reverse(),void(z&&z.reverse());for(var Ae,Pe,ce,ge,De=R.length,se=0;se<De;){if(Y[se]>=O){for(ce=se+1;ce<De&&Y[ce]>=O;)ce++;for(ge=se,Pe=ce-1;ge<Pe;ge++,Pe--)Ae=R[ge],R[ge]=R[Pe],R[Pe]=Ae,z&&(Ae=z[ge],z[ge]=z[Pe],z[Pe]=Ae);se=ce}se++}}},ue=function(O,R,z){var Y=O.split(""),Ce={hiLevel:v};return z||(z=[]),te(Y,z,Ce),(function(Ae,Pe,ce){if(ce.hiLevel!==0&&m)for(var ge,De=0;De<Ae.length;De++)Pe[De]===1&&(ge=P.indexOf(Ae[De]))>=0&&(Ae[De]=P[ge+1])})(Y,z,Ce),Q(2,Y,R,z,Ce),Q(1,Y,R,z,Ce),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(O,R,z){if((function(Ce,Ae){if(Ae)for(var Pe=0;Pe<Ce.length;Pe++)Ae[Pe]=Pe;c===void 0&&(c=ee(Ce)),p===void 0&&(p=ee(Ce))})(O,R),u||!f||p)if(u&&f&&c^p)v=c?1:0,O=W(O,R,z);else if(!u&&f&&p)v=c?1:0,O=ue(O,R,z),O=W(O,R);else if(!u||c||f||p){if(u&&!f&&c^p)O=W(O,R),c?(v=0,O=ue(O,R,z)):(v=1,O=ue(O,R,z),O=W(O,R));else if(u&&c&&!f&&p)v=1,O=ue(O,R,z),O=W(O,R);else if(!u&&!f&&c^p){var Y=m;c?(v=1,O=ue(O,R,z),v=0,m=!1,O=ue(O,R,z),m=Y):(v=0,O=ue(O,R,z),O=W(O,R),v=1,m=!1,O=ue(O,R,z),m=Y,O=W(O,R))}}else v=0,O=ue(O,R,z);else v=c?1:0,O=ue(O,R,z);return O},this.__bidiEngine__.setOptions=function(O){O&&(u=O.isInputVisual,f=O.isOutputVisual,c=O.isInputRtl,p=O.isOutputRtl,m=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([n.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([n.doBidiReorder(a[c])]);r.text=u}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(un),un.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new uu(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new t7(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new UI(this.contents),this.head=new $I(this),this.name=new KI(this),this.cmap=new cj(this),this.toUnicode={},this.hhea=new VI(this),this.maxp=new QI(this),this.hmtx=new ZI(this),this.post=new WI(this),this.os2=new HI(this),this.loca=new e7(this),this.glyf=new YI(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,p;for(p=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var il,uu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,a;for(a=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,a,o,u,c,f;return e=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*a+16777216*o+65536*u+256*c+f},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,a,o;for(o=[],r=0,a=e.length;r<a;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),UI=(function(){var t;function e(n){var r,a,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,a,o,u,c,f,p,m,b,j,y,I,S;for(S in y=Object.keys(n).length,f=Math.log(2),b=16*Math.floor(Math.log(y)/f),u=Math.floor(b/f),m=16*y-b,(a=new uu).writeInt(this.scalarType),a.writeShort(y),a.writeShort(b),a.writeShort(u),a.writeShort(m),o=16*y,p=a.pos+o,c=null,I=[],n)for(j=n[S],a.writeString(S),a.writeInt(t(j)),a.writeInt(p),a.writeInt(j.length),I=I.concat(j),S==="head"&&(c=p),p+=j.length;p%4;)I.push(0),p++;return a.write(I),r=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(r),a.data},t=function(n){var r,a,o,u;for(n=uj.call(n);n.length%4;)n.push(0);for(o=new uu(n),a=0,r=0,u=n.length;r<u;r=r+=4)a+=o.readUInt32();return 4294967295&a},e})(),zI={}.hasOwnProperty,Ul=function(t,e){for(var n in e)zI.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};il=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var $I=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new uu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),_5=(function(){function t(e,n){var r,a,o,u,c,f,p,m,b,j,y,I,S,P,_,F,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),j=y/2,e.pos+=6,o=(function(){var q,ee;for(ee=[],f=q=0;0<=j?q<j:q>j;f=0<=j?++q:--q)ee.push(e.readUInt16());return ee})(),e.pos+=2,S=(function(){var q,ee;for(ee=[],f=q=0;0<=j?q<j:q>j;f=0<=j?++q:--q)ee.push(e.readUInt16());return ee})(),p=(function(){var q,ee;for(ee=[],f=q=0;0<=j?q<j:q>j;f=0<=j?++q:--q)ee.push(e.readUInt16());return ee})(),m=(function(){var q,ee;for(ee=[],f=q=0;0<=j?q<j:q>j;f=0<=j?++q:--q)ee.push(e.readUInt16());return ee})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var q,ee;for(ee=[],f=q=0;0<=a?q<a:q>a;f=0<=a?++q:--q)ee.push(e.readUInt16());return ee})(),f=_=0,v=o.length;_<v;f=++_)for(P=o[f],r=F=I=S[f];I<=P?F<=P:F>=P;r=I<=P?++F:--F)m[f]===0?u=r+p[f]:(u=c[m[f]/2+(r-I)-(j-f)]||0)!==0&&(u+=p[f]),this.codeMap[r]=65535&u}e.pos=b}return t.encode=function(e,n){var r,a,o,u,c,f,p,m,b,j,y,I,S,P,_,F,v,q,ee,ae,W,te,Q,ue,O,R,z,Y,Ce,Ae,Pe,ce,ge,De,se,M,L,ne,me,ye,be,Re,Ie,Me,Ze,ft;switch(Y=new uu,u=Object.keys(e).sort(function(mt,Ft){return mt-Ft}),n){case"macroman":for(S=0,P=(function(){var mt=[];for(I=0;I<256;++I)mt.push(0);return mt})(),F={0:0},o={},Ce=0,ge=u.length;Ce<ge;Ce++)F[Ie=e[a=u[Ce]]]==null&&(F[Ie]=++S),o[a]={old:e[a],new:F[e[a]]},P[a]=F[e[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(P),{charMap:o,subtable:Y.data,maxGlyphID:S+1};case"unicode":for(R=[],b=[],v=0,F={},r={},_=p=null,Ae=0,De=u.length;Ae<De;Ae++)F[ee=e[a=u[Ae]]]==null&&(F[ee]=++v),r[a]={old:ee,new:F[ee]},c=F[ee]-a,_!=null&&c===p||(_&&b.push(_),R.push(a),p=c),_=a;for(_&&b.push(_),b.push(65535),R.push(65535),ue=2*(Q=R.length),te=2*Math.pow(Math.log(Q)/Math.LN2,2),j=Math.log(te/2)/Math.LN2,W=2*Q-te,f=[],ae=[],y=[],I=Pe=0,se=R.length;Pe<se;I=++Pe){if(O=R[I],m=b[I],O===65535){f.push(0),ae.push(0);break}if(O-(z=r[O].new)>=32768)for(f.push(0),ae.push(2*(y.length+Q-I)),a=ce=O;O<=m?ce<=m:ce>=m;a=O<=m?++ce:--ce)y.push(r[a].new);else f.push(z-O),ae.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*Q+2*y.length),Y.writeUInt16(0),Y.writeUInt16(ue),Y.writeUInt16(te),Y.writeUInt16(j),Y.writeUInt16(W),be=0,M=b.length;be<M;be++)a=b[be],Y.writeUInt16(a);for(Y.writeUInt16(0),Re=0,L=R.length;Re<L;Re++)a=R[Re],Y.writeUInt16(a);for(Me=0,ne=f.length;Me<ne;Me++)c=f[Me],Y.writeUInt16(c);for(Ze=0,me=ae.length;Ze<me;Ze++)q=ae[Ze],Y.writeUInt16(q);for(ft=0,ye=y.length;ft<ye;ft++)S=y[ft],Y.writeUInt16(S);return{charMap:r,subtable:Y.data,maxGlyphID:v+1}}},t})(),cj=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)n=new _5(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,a;return n==null&&(n="macroman"),r=_5.encode(e,n),(a=new uu).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},t})(),VI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),HI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),WI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)n=e.readByte(),a.push(this.names.push(e.readString(n)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},t})(),GI=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,a,o,u,c,f,p,m,b,j;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=m=0,b=r.length;m<b;o=++m)a=r[o],e.pos=a.offset,p=e.readString(a.length),u=new GI(p,a),f[j=a.nameID]==null&&(f[j]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t})(),QI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),ZI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],n=p=0;0<=a?p<a:p>a;n=0<=a?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,b,j;for(j=[],p=0,m=(b=this.metrics).length;p<m;p++)o=b[p],j.push(o.advance);return j}).call(this),r=this.widths[this.widths.length-1],f=[],n=u=0;0<=a?u<a:u>a;n=0<=a?++u:--u)f.push(this.widths.push(r));return f},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),uj=[].slice,YI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,a,o,u,c,f,p,m,b;return e in this.cache?this.cache[e]:(o=this.file.loca,n=this.file.contents,r=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,u=(c=new uu(n.read(a))).readShort(),p=c.readShort(),b=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[e]=u===-1?new JI(c,p,b,f,m):new XI(c,u,p,b,f,m),this.cache[e]))},t.prototype.encode=function(e,n,r){var a,o,u,c,f;for(u=[],o=[],c=0,f=n.length;c<f;c++)a=e[n[c]],o.push(u.length),a&&(u=u.concat(a.encode(r)));return o.push(u.length),{table:u,offsets:o}},t})(),XI=(function(){function t(e,n,r,a,o,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),JI=(function(){function t(e,n,r,a,o){var u,c;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new uu(uj.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),e7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ul(t,il),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<r.length;++u)if(r[u]=a,o<n.length&&n[o]==u){++o,r[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},t})(),t7=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,a,o;for(n in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=a[r];return e},t.prototype.glyphsFor=function(e){var n,r,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in n=[],a)(r=a[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in f=this.glyphsFor(n))r=f[o],a[o]=r;return a},t.prototype.encode=function(e,n){var r,a,o,u,c,f,p,m,b,j,y,I,S,P,_;for(a in r=cj.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},_=r.charMap)y[(f=_[a]).old]=f.new;for(I in j=r.maxGlyphID,u)I in y||(y[I]=j++);return m=(function(F){var v,q;for(v in q={},F)q[F[v]]=v;return q})(y),b=Object.keys(m).sort(function(F,v){return F-v}),S=(function(){var F,v,q;for(q=[],F=0,v=b.length;F<v;F++)c=b[F],q.push(m[c]);return q})(),o=this.font.glyf.encode(u,S,y),p=this.font.loca.encode(o.offsets,S),P={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t})();un.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,a,o,u;if(Array.isArray(n))return"["+(function(){var c,f,p;for(p=[],c=0,f=n.length;c<f;c++)r=n[c],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in o=["<<"],n)u=n[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+n},e})();const fc=({label:t,onClick:e,testId:n})=>s.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[s.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 top-1/2 -translate-y-1/2 border-t border-dotted border-[#d92134]"}),s.jsxs(qe,{type:"button",onClick:e,className:"relative z-10 h-10 min-w-[220px] rounded-full border border-[#d92134]/35 bg-white px-8 text-sm font-semibold text-[#d92134] shadow-none transition hover:bg-[#fff5f6]","data-testid":n,children:["+ ",t]})]}),Ld=k.memo(function({data:e,section:n,showAddButton:r=!0,onUpdateRow:a,onRemoveRow:o,onAddRow:u}){return s.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Details"}),s.jsx("th",{className:"w-12 p-3"})]})}),s.jsx("tbody",{children:e.map((c,f)=>s.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[s.jsx("td",{className:"p-3 text-center text-slate-600",children:c.slNo}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:c.description,onChange:p=>a(n,f,"description",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-desc-${f}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:c.details,onChange:p=>a(n,f,"details",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-details-${f}`})}),s.jsx("td",{className:"p-3",children:s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>o(n,f),disabled:e.length===1,className:"h-8 w-8 text-red-500","data-testid":`button-remove-${n}-${f}`,children:s.jsx(vr,{className:"h-4 w-4"})})})]},`${n}-${f}`))})]}),r&&s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(fc,{label:"Add Row",onClick:()=>u(n),testId:`button-add-${n}`})})]})}),Th=()=>({id:`drawing-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fileName:"",mimeType:"",dataUrl:""}),dj=t=>{if(!Array.isArray(t)||t.length===0)return[Th()];const e=t.filter(n=>!!(n&&typeof n=="object")).map((n,r)=>({id:typeof n.id=="string"&&n.id.trim()?n.id:`drawing-${Date.now()}-${r}`,fileName:typeof n.fileName=="string"?n.fileName:"",mimeType:typeof n.mimeType=="string"?n.mimeType:"",dataUrl:typeof n.dataUrl=="string"?n.dataUrl:""}));return e.length>0?e:[Th()]},Yf=t=>dj(t),af=(t,e)=>({id:`payment-section-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,heading:t,terms:e}),fj=()=>[af("Supply and Erection",["20% advance on confirmation of order/PO.","40% after finalisation & submission of GA drawing.","30% before dispatch of material.","5% after Structure Erection.","5% after Building Handing over."]),af("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])],_l=(t,e)=>{const n=(r,a)=>{const o=r.trim();return o?o.toLowerCase()==="peb - supply and erection"?"Supply and Erection":o:`Heading ${a+1}`};if(Array.isArray(t)&&t.length>0){const r=t.filter(a=>!!(a&&typeof a=="object")).map((a,o)=>({id:typeof a.id=="string"&&a.id.trim()?a.id:`payment-section-${Date.now()}-${o}`,heading:n(typeof a.heading=="string"?a.heading:"",o),terms:Array.isArray(a.terms)?a.terms.filter(u=>typeof u=="string"):[]})).filter(a=>a.terms.length>0||a.heading.trim().length>0);if(r.length>0)return r}return Array.isArray(e)&&e.length>0?[af("Supply and Erection",e),af("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])]:fj()},Lm=(t,e)=>({id:`notes-block-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:t,items:e}),Kc=(t,e)=>{if(Array.isArray(t)&&t.length>0){const n=t.filter(r=>!!(r&&typeof r=="object")).map((r,a)=>({id:typeof r.id=="string"&&r.id.trim()?r.id:`notes-block-${Date.now()}-${a}`,title:typeof r.title=="string"&&r.title.trim()?r.title:`Notes ${a+1}`,items:Array.isArray(r.items)?r.items.filter(o=>typeof o=="string"):[]})).map(r=>({...r,items:r.items.length>0?r.items:["New note..."]}));if(n.length>0)return n}return Array.isArray(e)&&e.length>0?[Lm("Notes",e)]:[Lm("Notes",["New note..."])]},n7={proposalTitle:"Techno-Commercial Offer",introSections:[{id:"intro1",type:"paragraph",content:"We are pleased to submit our proposal for the supply & erection of steel Structure against your subject enquiry."},{id:"intro2",type:"paragraph",content:"Our area of expertise is in complete design, manufacture, installation & commissioning of Heavy Structural Fabrication & Pre-Engineered Building."},{id:"intro3",type:"paragraph",content:"This proposal is detailed for your ready reference and includes scope of supply, building description, design loads/criteria, material specifications, time delivery, etc complete."},{id:"intro4",type:"paragraph",content:"We trust you will find that our proposal is in line with your requirements and we look forward to your valued order."}],paymentTerms:["15% advance on confirmation of Work order before Labour mobilization.","85% after fabrication Completion"],notes:["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables.","Closed workshop area to be provided for work by M/s company with fully equipped light and ventilations.","All Machines, Hydra, EOT cranes, raw materials, consumables, bed material. Skids for fabrication.","Detailing to be provided by your company","All shop drawing, BOQ, LOT SUMMARY to be provided by M/s company."],notesBlocks:[Lm("Notes",["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables.","Closed workshop area to be provided for work by M/s company with fully equipped light and ventilations.","All Machines, Hydra, EOT cranes, raw materials, consumables, bed material. Skids for fabrication.","Detailing to be provided by your company","All shop drawing, BOQ, LOT SUMMARY to be provided by M/s company."])],closingParagraphs:[{id:"closing1",type:"paragraph",content:"We hope you'll find our offer in line with your requirement & place your valued WO on us giving us an opportunity to serve you. However, please feel free to contact us for any sort of additional information that you may feel is required pertaining to this offer. We assure you our best support at all times."}],closingThanks:"Thanking you",closingCompanyName:"Revira Nexgen Structures Pvt. Ltd",scopeBriefDetails:[{slNo:1,description:"Building Nos.",details:"01"},{slNo:2,description:"Building Description",details:"PEB Shed"},{slNo:3,description:"Building built-up Area",details:"15494 SQF"}],scopeBasicBuilding:[{slNo:1,description:"Frame Type",details:"RF/MF"},{slNo:2,description:"Length (M)",details:"36"},{slNo:3,description:"Width (M) or Span",details:"21"},{slNo:4,description:"Clear Height (M)",details:"9.0"},{slNo:5,description:"Brick Wall Height (M)",details:"3.0"},{slNo:6,description:"Side wall Column Spacing (M)",details:"As Per Drawing"},{slNo:7,description:"Roof Slope",details:"1:10"},{slNo:8,description:"End Wall Column Spacing (M)",details:"As Per GA"},{slNo:9,description:"Bay Spacing (M)",details:"As Per GA"},{slNo:10,description:"Type of end frames",details:"Non-Expandable Frames"},{slNo:11,description:"Wind bracing",details:"As per GA drawing"},{slNo:12,description:"Roof cladding",details:"As per GA drawing"},{slNo:13,description:"Wall cladding",details:"As per GA drawing"}],scopeBuildingAdditions:[{slNo:1,description:"Canopy - Location",details:"As per approved drawing"},{slNo:2,description:"Framed openings",details:"As per approved drawing"}],steelWorkFinish:[{slNo:1,description:"Welding",details:"Continuous FCAW welding along with Intermediate, AWS D1.1"},{slNo:2,description:"Frames, Built-up / HR sections/Bracings",details:"Mechanical Cleaning with swipe blast on heavy mill scale and one coat of primer and one coat of Finish Enamel paint"},{slNo:3,description:"Purlins / Girts",details:"ASTM A653"},{slNo:4,description:"Profile sheets",details:"Bare-0.47 mm thk and colour -0.5 mm thk blue RAL5012"}],designLoads:[{slNo:1,description:"Dead load",details:"0.15 KN/M2"},{slNo:2,description:"Live load",details:"0.57 KN/M2"},{slNo:3,description:"Crane Capacity",details:"-"},{slNo:4,description:"Wind load (Kmph or m/sec)",details:"44 M/sec"},{slNo:5,description:"Mezzanine Load -Kg/SQM",details:"-"},{slNo:6,description:"Slab Thickness (MM)",details:"-"},{slNo:7,description:"Seismic load (Zone no.)",details:"III"}],applicableCodes:["Frame members are designed in accordance with AISC-LRFD (American Institute of Steel Construction).","Cold Formed members are designed in accordance with the AISC For Use of Cold-Formed Light Gauge Steel Structural Member's In General Building Construction.","Deflection as per IS 800-2007.","All welding is done in accordance with the 2000 Edition of the American Welding Society (AWS D1.1).","Structural Welding Code-Steel. All Welders are qualified for the type of welds performed.",'Manufacturing dimensional tolerances are in accordance with the requirements of the 1996 Edition of the Metal Building Manufacturer Association (MBMA) of the USA.; "Low rise building systems Manual".'],materialSpecs:[{slNo:1,description:"Primary Members - Built up sections (Make  SAIL/JINDAL/TATA)",details:"Min. Y.S. 350 MPA"},{slNo:2,description:"Hot Rolled Sections - Channels (Make  TATA/Apollo/SAIL)",details:"IS: 2062 / A 572, Grade 36, Min. Y.S. 250 MPA"},{slNo:3,description:"Purlins/Girts (Make  JSW/TATA)",details:"ASTM A653"},{slNo:4,description:"Anchor bolts",details:"IS 2062 E250A"},{slNo:5,description:"Primary Connection bolts Electroplated/Pre galvanised",details:"High Strength Bolts, IS: 1367 / 8.8 Grade"},{slNo:6,description:"Secondary connection bolts Pre galvanised",details:"Bolt as per ASTM A 325, Grade 4.6"}],drawingsDelivery:["RNSPL will issue shop Approval Drawings within 1 week from date of signing contract/issue of Purchase Order and receipt of advance payment.","BUYER must return the accepted approval drawings preferably within 1 week thereafter; otherwise, may result in revision to delivery commitment.","Anchor bolts & Layout drawings for fixing anchor bolts will be provided within 10 days from the date of receipt of Advance payment.","Dispatch of materials will start as per agreed time frame from the date of receipt of signed Approval drawings with receipt of payment as per agreed terms."],erectionScopeClient:["After completion of Anchor bolt fixing, back filling of the murum up to the FFL level & rolling is under the scope of the client.","Anchor bolt shall be provided to site and fixing in presence of our engineer at site only.","Minimum 15 days curing time is to be given after Anchor Bolt Casting is done.","Free Power and water to be provided close to site.","If power not available, DG has to be provided.","We assumed that, crane can move inside the proposed building while erecting the main frames.","Security of the material is under the scope of the client.","Shelter/accommodation to be provided to the workers till completion of the work."],erectionScopeCompany:["Unloading and stacking of the material at site, Erection of material as per RNSPL specifications.","Anchor Bolt Supply & Periodic Supervision is in our Scope.","Alignment of columns and rafters.","Plumb and checking water level of columns & Portal frame.","Cleaning and touch up paint work for the structure on damaged surfaces during transportation and site movement.","Alignment of Purlins and Girts.","Fixing of roof sheeting, wall sheeting and accessories."],paymentTermSections:fj(),commercialTerms:[{slNo:1,description:"Payment Terms including taxes",conditions:"Supply and Erection amount: 1. 20% advance on confirmation of order/PO. 2. 40% after finalisation & submission of GA drawing. 3. 30% before dispatch of material. 4. 5% after Structure Erection. 5. 5% after Building Handing over."},{slNo:2,description:"Delivery period",conditions:"Delivery as per mutually agreed from the date of receipt of signed approved drawings and receipt of payment as per agreed terms."},{slNo:3,description:"Erection period",conditions:"Erection Period as per mutually agreed after delivery of complete material."},{slNo:4,description:"GST",conditions:"Extra @ 18% for supply and Erection both."},{slNo:5,description:"Scope of contract",conditions:"This Contract is the only Agreement between the SELLER & BUYER and the terms which have been Expressly stated will be binding."},{slNo:6,description:"Proposal validity",conditions:"This proposal is valid for (5) days from the date of this proposal."},{slNo:7,description:"Erection drawing",conditions:"The SELLER will furnish the BUYER with all standard erection drawings required for erection of buildings."},{slNo:8,description:"Specification changes",conditions:"SELLER reserves the right to modify design and substitute material equal or superior to originally specified."},{slNo:9,description:"Change in scope",conditions:"Any change to the stated scope of supply may lead to variation in price and delivery period."},{slNo:10,description:"Our liability",conditions:"SELLER liability is restricted to scope of this contract only."},{slNo:11,description:"Ownership Of Un-Approved Material",conditions:"All unapproved material supplied to site shall be the property of SELLER."},{slNo:12,description:"Warranty",conditions:"Products supplied are warranted against defective material & workmanship for One year."},{slNo:13,description:"Permits",conditions:"SELLER shall not be responsible for obtaining permits to erect or install any product."},{slNo:14,description:"Force Majeure",conditions:"SELLER shall not be liable for delays due to circumstances beyond control."},{slNo:15,description:"Weighment",conditions:"Weight mentioned in SELLER Bill of Supply will be final for billing purposes."},{slNo:16,description:"Safety at site",conditions:"BUYER shall provide secured area for unloading and storing all material."},{slNo:17,description:"Exclusions",conditions:"Anything not mentioned in the offer."}],bankDetails:[{particular:"Account holder",value:"REVIRA NEXGEN STRUCTURES PRIVATE LIMITED"},{particular:"Bank Name",value:"YES Bank"},{particular:"A/C No.",value:"073361900002657"},{particular:"IFSC Code",value:"YESB0000733"}],uploadDrawings:[Th()]},hj=["scopeBrief","scopeBasic","scopeAdditions","steelWork","designLoads","applicableCodes","materialSpecs","drawingsDelivery","erectionScopeClient","erectionScopeCompany","commercialPrice","paymentTerms","commercialTerms"],pj=["commercialPrice","paymentTerms"],th={scopeBrief:"SCOPE OF SUPPLY - BRIEF DETAILS",scopeBasic:"SCOPE OF SUPPLY - BASIC BUILDING DESCRIPTION",scopeAdditions:"STANDARD BUILDING ADDITIONS (CANOPY / FASCIA / LINER / PARTITIONS)",steelWork:"STEEL WORK FINISH",designLoads:"DESIGN LOADS",applicableCodes:"APPLICABLE CODES for Design",materialSpecs:"MATERIAL SPECIFICATIONS",drawingsDelivery:"DRAWINGS & DELIVERY",erectionScopeClient:"ERECTION SCOPES - SCOPE OF CLIENT",erectionScopeCompany:"ERECTION SCOPES - SCOPE OF COMPANY",commercialPrice:"COMMERCIAL PRICE & PAYMENT",paymentTerms:"PAYMENT TERMS",commercialTerms:"COMMERCIAL TERMS & CONDITIONS"},Bp=t=>(t?hj:pj).map((n,r)=>({id:`${n}-${r+1}`,type:n,heading:th[n]}));function A5(){const{projectId:t,quotationId:e}=Xu(),[,n]=za(),{toast:r}=$a(),{data:a}=Ea(),o=k.useRef(null),[u,c]=k.useState({quotationNumber:"",revision:"R-001",enquiryNumber:"",subject:"Supply & erection of Steel Structures for PEB Shed",contactName:"Hareram R Sharma",contactMobile:"8390491843",contactEmail:"Hareram.sharma@reviranexgen.com",buildingDescription:"PEB Shed",buildingArea:"",frameType:"RF/MF",length:"",width:"",clearHeight:"",roofSlope:"1:10",paymentTerms:"",notes:"",proposalTitle:"Techno-Commercial Offer",toLabel:"To",msLabel:"M/s"}),[f,p]=k.useState([{serialNo:1,description:"Fabrication of Structural steel hot rolled section on job work-labour basis i.e. Pipe rack str excluding detailing.",unit:"Rs/MT",quantity:600,rate:7440,amount:4464e3,remarks:""}]),[m,b]=k.useState(n7),[j,y]=k.useState(null),[I,S]=k.useState(null),[P,_]=k.useState(null),[F,v]=k.useState(null),[q,ee]=k.useState({}),[ae,W]=k.useState(null),[te,Q]=k.useState(null),[ue,O]=k.useState(null),[R,z]=k.useState(null),[Y,Ce]=k.useState(null),[Ae,Pe]=k.useState(null),[ce,ge]=k.useState(!1),[De,se]=k.useState(!1),[M,L]=k.useState(!1),[ne,me]=k.useState(!1),[ye,be]=k.useState(!1),[Re,Ie]=k.useState(!1),[Me,Ze]=k.useState({to:"",subject:"",message:""}),[ft,mt]=k.useState({mobile:"",message:""}),[Ft,le]=k.useState(null),[gt,xe]=k.useState([]),[X,B]=k.useState({}),{data:ve,isLoading:re}=Ln({queryKey:["/api/projects",t],queryFn:async()=>{const E=await fetch(`/api/projects/${t}`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch project");return E.json()},enabled:!!t}),{data:D,isLoading:H}=Ln({queryKey:["/api/clients",ve?.clientId],queryFn:async()=>{const E=await fetch(`/api/clients/${ve?.clientId}`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch client");return E.json()},enabled:!!ve?.clientId}),{data:je}=Ln({queryKey:["/api/branding"],enabled:!!a}),{data:Ne}=Ln({queryKey:["/api/projects",t,"quotation",e||"latest"],queryFn:async()=>{if(e){const oe=await fetch(`/api/quotations/${e}`,{credentials:"include"});if(!oe.ok)throw new Error("Failed to fetch quotation");return oe.json()}const E=await fetch(`/api/projects/${t}/quotation`,{credentials:"include"});if(!E.ok){if(E.status===404)return null;throw new Error("Failed to fetch quotation")}return E.json()},enabled:!!t}),{data:Te}=Ln({queryKey:["/api/quotations",Ne?.id,"items"],queryFn:async()=>{const E=await fetch(`/api/quotations/${Ne?.id}/items`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch items");return E.json()},enabled:!!Ne?.id}),{data:$e}=Ln({queryKey:["/api/projects",t,"quotation-versions"],queryFn:async()=>{const E=await fetch(`/api/projects/${t}/quotation-versions`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch versions");return E.json()},enabled:!!t}),st=k.useCallback(()=>ve?.quotationType==="Supply and Fabrication"?hj:pj,[ve?.quotationType]),ct=k.useCallback(E=>{const oe=new Set(st());if(!Array.isArray(E))return Bp(ve?.quotationType==="Supply and Fabrication");const he=E.filter(_e=>!!(_e&&typeof _e=="object"&&"id"in _e&&"type"in _e&&typeof _e.id=="string"&&typeof _e.type=="string")).filter(_e=>oe.has(_e.type)).map(_e=>({id:_e.id,type:_e.type,heading:typeof _e.heading=="string"&&_e.heading.trim().length>0?_e.heading:th[_e.type]}));if(!he.some(_e=>_e.type==="paymentTerms")&&oe.has("paymentTerms")){const _e={id:`paymentTerms-${Date.now()}`,type:"paymentTerms",heading:th.paymentTerms},we=he.findIndex(Rt=>Rt.type==="commercialPrice");we>=0?he.splice(we+1,0,_e):he.push(_e)}return he.map(_e=>{if(_e.type!=="commercialPrice")return _e;const we=_e.heading.trim().toUpperCase();return we==="COMMERCIAL PRICE"||we==="COMMERCIAL PRICE & PAYMENT TERMS"?{..._e,heading:"COMMERCIAL PRICE & PAYMENT"}:_e})},[st,ve?.quotationType]);k.useEffect(()=>{if(ve&&D&&!Ne){const E=ve.quotationType==="Supply and Fabrication"?"RNS-Peb":ve.quotationType==="Structural Fabrication"?"RNS-SF":"RNS-JW",he=new Date().toLocaleString("en-US",{month:"short",year:"numeric"}).toUpperCase().replace(" ","-"),_e=ve.quotationType==="Supply and Fabrication"?"Supply & erection of Steel Structures for PEB Shed":ve.quotationType==="Structural Fabrication"?"Structural Fabrication - Steel Structures":"Job Work - Steel Structures";c(we=>({...we,quotationNumber:`RNS/${he}/${D.name}/RNS-${String(ve.id).padStart(3,"0")}`,enquiryNumber:`${E}-RNS-${String(ve.id).padStart(3,"0")}`,subject:_e})),xe(Bp(ve.quotationType==="Supply and Fabrication"))}},[ve,D,Ne]),k.useEffect(()=>{if(Ne){let E=null;if(Ne.contentSections)try{E=JSON.parse(Ne.contentSections);const oe=Array.isArray(E?.paymentTerms)?E.paymentTerms.filter(he=>typeof he=="string"):[];b(he=>({...he,...E,notes:Array.isArray(E?.notes)?E.notes.filter(_e=>typeof _e=="string"):he.notes,notesBlocks:Kc(E?.notesBlocks,Array.isArray(E?.notes)?E.notes.filter(_e=>typeof _e=="string"):he.notes),paymentTermSections:_l(E?.paymentTermSections,oe),uploadDrawings:dj(E?.uploadDrawings)})),xe(ct(E?.accordionBlocks))}catch(oe){console.error("Failed to parse content sections:",oe),xe(Bp(ve?.quotationType==="Supply and Fabrication"))}else xe(Bp(ve?.quotationType==="Supply and Fabrication"));c({quotationNumber:Ne.quotationNumber,revision:Ne.revision,enquiryNumber:Ne.enquiryNumber,subject:Ne.subject,contactName:Ne.contactName,contactMobile:Ne.contactMobile,contactEmail:Ne.contactEmail,buildingDescription:Ne.buildingDescription||"",buildingArea:Ne.buildingArea||"",frameType:Ne.frameType||"",length:Ne.length||"",width:Ne.width||"",clearHeight:Ne.clearHeight||"",roofSlope:Ne.roofSlope||"",paymentTerms:Ne.paymentTerms||"",notes:Ne.notes||"",proposalTitle:E?.proposalTitle||"Techno-Commercial Offer",toLabel:E?.toLabel||"To",msLabel:E?.msLabel||"M/s"})}},[Ne,ct,ve?.quotationType]),k.useEffect(()=>{Te&&Te.length>0&&p(Te.map(E=>({id:E.id,serialNo:E.serialNo,description:E.description,unit:E.unit,quantity:Number(E.quantity)||0,rate:Number(E.rate)||0,amount:Number(E.amount)||0,remarks:E.remarks||""})))},[Te]),k.useEffect(()=>{B(E=>{const oe={};return gt.forEach(he=>{oe[he.id]=E[he.id]??!0}),oe})},[gt]),k.useEffect(()=>{const E=_l(m.paymentTermSections,m.paymentTerms);ee(oe=>{const he={};return E.forEach(_e=>{he[_e.id]=oe[_e.id]??!0}),he})},[m.paymentTermSections,m.paymentTerms]);const jt=Dr({mutationFn:async()=>{const oe=await(await wn("POST","/api/quotations",{projectId:Number(t),...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:gt})})).json();for(const he of f)he.description.trim()&&await wn("POST",`/api/quotations/${oe.id}/items`,{serialNo:he.serialNo,description:he.description,unit:he.unit,quantity:String(he.quantity),rate:String(he.rate),amount:String(he.amount),remarks:he.remarks});return oe},onSuccess:E=>{Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation","latest"]}),Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation",E.id]}),Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation-versions"]}),n(`/projects/${t}/quotation/${E.id}`),r({title:"Quotation saved",description:"The quotation has been created successfully."})},onError:E=>{r({title:"Error",description:E.message||"Failed to create quotation",variant:"destructive"})}}),Pt=Dr({mutationFn:async()=>{if(Ne){if(await wn("PUT",`/api/quotations/${Ne.id}`,{...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:gt})}),Te)for(const E of Te)await wn("DELETE",`/api/quotation-items/${E.id}`);for(const E of f)E.description.trim()&&await wn("POST",`/api/quotations/${Ne.id}/items`,{serialNo:E.serialNo,description:E.description,unit:E.unit,quantity:String(E.quantity),rate:String(E.rate),amount:String(E.amount),remarks:E.remarks})}},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation",e||"latest"]}),Bn.invalidateQueries({queryKey:["/api/quotations",Ne?.id,"items"]}),Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation-versions"]}),r({title:"Quotation updated",description:"The quotation has been updated successfully."})},onError:E=>{r({title:"Error",description:E.message||"Failed to update quotation",variant:"destructive"})}}),pr=Dr({mutationFn:async()=>{if(!Ne)throw new Error("No quotation to duplicate");return(await wn("POST",`/api/quotations/${Ne.id}/duplicate`)).json()},onSuccess:E=>{Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation-versions"]}),r({title:"Quotation duplicated",description:`Created new version: ${E.revision}`}),n(`/projects/${t}/quotation/${E.id}`)},onError:E=>{r({title:"Error",description:E.message||"Failed to duplicate quotation",variant:"destructive"})}}),yn=()=>{Ne?Pt.mutate():jt.mutate()},Gt=()=>{p([...f,{serialNo:f.length+1,description:"",unit:"Rs/MT",quantity:0,rate:0,amount:0,remarks:""}])},Ut=E=>{if(f.length>1){const oe=f.filter((he,_e)=>_e!==E).map((he,_e)=>({...he,serialNo:_e+1}));p(oe)}},tn=(E,oe,he)=>{const _e=[...f];if(oe==="quantity"||oe==="rate"||oe==="amount"?_e[E]={..._e[E],[oe]:Number(he)||0}:_e[E]={..._e[E],[oe]:he},oe==="quantity"||oe==="rate"){const we=_e[E].quantity,Rt=_e[E].rate;_e[E].amount=we*Rt}p(_e)},Ge=()=>f.reduce((E,oe)=>E+oe.amount,0),at=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(E).replace(""," "),Xe=()=>new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),an=(E,oe)=>{b(he=>({...he,introSections:he.introSections.map(_e=>_e.id===E?{..._e,content:oe}:_e)}))},sr=()=>{const E=`intro${Date.now()}`;b(oe=>({...oe,introSections:[...oe.introSections,{id:E,type:"paragraph",content:"New paragraph..."}]}))},gn=E=>{b(oe=>({...oe,introSections:oe.introSections.filter(he=>he.id!==E)}))},Jt=E=>{b(oe=>{const he=Kc(oe.notesBlocks,oe.notes).map(_e=>_e.id===E?{..._e,items:[..._e.items,"New note..."]}:_e);return{...oe,notesBlocks:he,notes:he[0]?.items??oe.notes}})},Dn=(E,oe,he)=>{b(_e=>{const we=Kc(_e.notesBlocks,_e.notes).map(Rt=>Rt.id===E?{...Rt,items:Rt.items.map((Gn,Vt)=>Vt===oe?he:Gn)}:Rt);return{..._e,notesBlocks:we,notes:we[0]?.items??_e.notes}})},ys=(E,oe)=>{b(he=>{const _e=Kc(he.notesBlocks,he.notes).map(we=>{if(we.id!==E)return we;const Rt=we.items.filter((Gn,Vt)=>Vt!==oe);return{...we,items:Rt.length>0?Rt:["New note..."]}});return{...he,notesBlocks:_e,notes:_e[0]?.items??he.notes}})},ir=E=>{b(oe=>{const he=Kc(oe.notesBlocks,oe.notes),_e=he.find(Gn=>Gn.id===E);if(!_e)return oe;const we=Lm(`${_e.title} Copy`,[..._e.items]),Rt=[...he,we];return{...oe,notesBlocks:Rt,notes:Rt[0]?.items??oe.notes}})},Nr=E=>{b(oe=>{const he=Kc(oe.notesBlocks,oe.notes);if(he.length<=1)return oe;const _e=he.filter(we=>we.id!==E);return{...oe,notesBlocks:_e,notes:_e[0]?.items??oe.notes}}),S(oe=>oe?.blockId===E?null:oe)},xr=()=>{b(E=>({...E,paymentTermSections:[..._l(E.paymentTermSections),af("New Heading",["New payment term..."])]}))},on=(E,oe)=>{b(he=>({...he,paymentTermSections:_l(he.paymentTermSections).map(_e=>_e.id===E?{..._e,heading:oe}:_e)}))},As=E=>{b(oe=>({...oe,paymentTermSections:(()=>{const he=_l(oe.paymentTermSections).filter(_e=>_e.id!==E);return he.length>0?he:[af("New Heading",["New payment term..."])]})()}))},Us=E=>{b(oe=>({...oe,paymentTermSections:_l(oe.paymentTermSections).map(he=>he.id===E?{...he,terms:[...he.terms,"New payment term..."]}:he)}))},fs=(E,oe,he)=>{b(_e=>({..._e,paymentTermSections:_l(_e.paymentTermSections).map(we=>we.id===E?{...we,terms:we.terms.map((Rt,Gn)=>Gn===oe?he:Rt)}:we)}))},Ps=(E,oe)=>{b(he=>({...he,paymentTermSections:_l(he.paymentTermSections).map(_e=>_e.id===E?{..._e,terms:_e.terms.filter((we,Rt)=>Rt!==oe)}:_e)}))},lr=()=>{b(E=>({...E,drawingsDelivery:[...E.drawingsDelivery,"New drawings/delivery item..."]})),W(m.drawingsDelivery.length)},Fr=(E,oe)=>{b(he=>({...he,drawingsDelivery:he.drawingsDelivery.map((_e,we)=>we===E?oe:_e)}))},yr=E=>{b(oe=>({...oe,drawingsDelivery:oe.drawingsDelivery.filter((he,_e)=>_e!==E)}))},ks=()=>{b(E=>({...E,erectionScopeClient:[...E.erectionScopeClient,"New client scope item..."]})),Q(m.erectionScopeClient.length)},Jr=(E,oe)=>{b(he=>({...he,erectionScopeClient:he.erectionScopeClient.map((_e,we)=>we===E?oe:_e)}))},Tr=E=>{b(oe=>({...oe,erectionScopeClient:oe.erectionScopeClient.filter((he,_e)=>_e!==E)}))},fi=()=>{b(E=>({...E,erectionScopeCompany:[...E.erectionScopeCompany,"New company scope item..."]})),O(m.erectionScopeCompany.length)},es=(E,oe)=>{b(he=>({...he,erectionScopeCompany:he.erectionScopeCompany.map((_e,we)=>we===E?oe:_e)}))},Ts=E=>{b(oe=>({...oe,erectionScopeCompany:oe.erectionScopeCompany.filter((he,_e)=>_e!==E)}))},as=()=>{b(E=>({...E,applicableCodes:[...E.applicableCodes,"New applicable code..."]})),z(m.applicableCodes.length)},zs=(E,oe)=>{b(he=>({...he,applicableCodes:he.applicableCodes.map((_e,we)=>we===E?oe:_e)}))},mr=E=>{b(oe=>({...oe,applicableCodes:oe.applicableCodes.filter((he,_e)=>_e!==E)}))},hs=()=>{const E=m.commercialTerms.length+1;b(oe=>({...oe,commercialTerms:[...oe.commercialTerms,{slNo:E,description:"New Term",conditions:"Enter conditions..."}]})),Ce(m.commercialTerms.length)},Xs=(E,oe,he)=>{b(_e=>({..._e,commercialTerms:_e.commercialTerms.map((we,Rt)=>Rt===E?{...we,[oe]:he}:we)}))},Qi=E=>{b(oe=>({...oe,commercialTerms:oe.commercialTerms.filter((he,_e)=>_e!==E).map((he,_e)=>({...he,slNo:_e+1}))}))},qi=()=>{b(E=>({...E,bankDetails:[...E.bankDetails,{particular:"New Field",value:"Enter value..."}]})),Pe(m.bankDetails.length)},ki=(E,oe,he)=>{b(_e=>({..._e,bankDetails:_e.bankDetails.map((we,Rt)=>Rt===E?{...we,[oe]:he}:we)}))},Un=E=>{b(oe=>({...oe,bankDetails:oe.bankDetails.filter((he,_e)=>_e!==E)}))},bi=(E,oe)=>{b(he=>({...he,closingParagraphs:he.closingParagraphs.map(_e=>_e.id===E?{..._e,content:oe}:_e)}))},fn=(E,oe)=>{const he=oe.target.files?.[0];if(!he)return;const _e=he.type.startsWith("image/"),we=he.type==="application/pdf"||he.name.toLowerCase().endsWith(".pdf");if(!_e&&!we){r({title:"Unsupported file type",description:"Please upload an image or a PDF file.",variant:"destructive"});return}if(he.size>10*1024*1024){r({title:"File too large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}const Rt=new FileReader;Rt.onloadend=()=>{const Gn=typeof Rt.result=="string"?Rt.result:"";b(Vt=>({...Vt,uploadDrawings:Yf(Vt.uploadDrawings).map(Vn=>Vn.id===E?{...Vn,fileName:he.name,mimeType:we?"application/pdf":he.type||"image/png",dataUrl:Gn}:Vn)}))},Rt.readAsDataURL(he)},In=()=>{b(E=>({...E,uploadDrawings:[...Yf(E.uploadDrawings),Th()]}))},Nn=E=>{b(oe=>{const he=Yf(oe.uploadDrawings).filter(_e=>_e.id!==E);return{...oe,uploadDrawings:he.length>0?he:[Th()]}})},Kt=k.useCallback((E,oe,he,_e)=>{b(we=>({...we,[E]:we[E].map((Rt,Gn)=>Gn===oe?{...Rt,[he]:_e}:Rt)}))},[]),Fn=k.useCallback(E=>{b(oe=>{const he=oe[E];return{...oe,[E]:[...he,{slNo:he.length+1,description:"",details:""}]}})},[]),vt=k.useCallback((E,oe)=>{b(he=>{const _e=he[E];return _e.length>1?{...he,[E]:_e.filter((we,Rt)=>Rt!==oe).map((we,Rt)=>({...we,slNo:Rt+1}))}:he})},[]),Ke=k.useCallback(E=>X[E]??!0,[X]),it=k.useCallback(E=>{B(oe=>({...oe,[E]:!(oe[E]??!0)}))},[]),Qe=k.useCallback((E,oe)=>{B(he=>({...he,[E]:oe}))},[]),ut=k.useCallback((E,oe)=>{E===oe||E<0||oe<0||xe(he=>{if(E>=he.length||oe>=he.length)return he;const _e=[...he],[we]=_e.splice(E,1);return _e.splice(oe,0,we),_e})},[]),Lt=k.useCallback(E=>{xe(oe=>oe.filter(he=>he.id!==E)),B(oe=>{const{[E]:he,..._e}=oe;return _e})},[]),wt=k.useCallback(E=>{let oe=null;xe(he=>{const _e=he.findIndex(Vt=>Vt.id===E);if(_e===-1)return he;const we=he[_e],Rt={id:`${we.type}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,type:we.type,heading:we.heading};oe=Rt.id;const Gn=[...he];return Gn.splice(_e+1,0,Rt),Gn}),oe&&B(he=>({...he,[oe]:!0}))},[]),Ot=k.useCallback((E,oe)=>{xe(he=>he.map(_e=>_e.id===E?{..._e,heading:oe}:_e))},[]),Nt=k.useCallback(E=>gt.filter(oe=>oe.type===E),[gt]),kt=k.useCallback(E=>gt.findIndex(oe=>oe.id===E),[gt]),Mt=k.useCallback(E=>{const oe=kt(E.id);return{isEditingHeading:Ft===E.id,onStartEditHeading:()=>le(E.id),onHeadingChange:_e=>Ot(E.id,_e),onHeadingBlur:()=>{const _e=gt.find(we=>we.id===E.id);_e&&!_e.heading.trim()&&Ot(E.id,th[E.type]),le(null)},onMoveUp:oe>0?()=>ut(oe,oe-1):void 0,onMoveDown:oe>=0&&oe<gt.length-1?()=>ut(oe,oe+1):void 0,onDuplicate:()=>wt(E.id),onDelete:()=>Lt(E.id),canMoveUp:oe>0,canMoveDown:oe>=0&&oe<gt.length-1}},[gt,wt,Ft,kt,ut,Lt,Ot]),$t=async E=>{const oe=E?.save??!0,he=E?.silent??!1,_e=E?.returnDataUri??!1;me(!0);try{const we=new un({orientation:"portrait",unit:"mm",format:"a4"}),Rt=210,Gn=297,Vt=15,Vn=Rt-Vt*2,$r=35,Or=30,ts=ot=>ot*.2646,hi=ts(80),vn=ts(50),Zi=ts(80);let _t=$r+10,cr=1;const wi=ot=>new Promise((At,Tt)=>{const Dt=new Image;Dt.crossOrigin="anonymous",Dt.onload=()=>{const hn=document.createElement("canvas");hn.width=Dt.width,hn.height=Dt.height,hn.getContext("2d")?.drawImage(Dt,0,0),At(hn.toDataURL("image/png"))},Dt.onerror=Tt,Dt.src=ot});let ga=null,al=null,uo=null;try{je?.headerUrl&&(ga=await wi(je.headerUrl)),je?.footerUrl&&(al=await wi(je.footerUrl)),je?.stampUrl&&(uo=await wi(je.stampUrl))}catch(ot){console.warn("Failed to load branding images:",ot)}const Yi=ot=>{ga&&we.addImage(ga,"PNG",0,0,Rt,$r),al&&we.addImage(al,"PNG",0,Gn-Or,Rt,Or),uo&&we.addImage(uo,"PNG",Rt-vn-hi,Gn-Zi-hi,hi,hi),we.setFontSize(8),we.setTextColor(128,128,128),we.text(`Page ${ot}`,Rt/2,Gn-8,{align:"center"})},Vr=ot=>_t+ot>Gn-Or-10?(we.addPage(),cr++,Yi(cr),_t=$r+10,!0):!1,Hr=(ot,At=14,Tt="#1e3a5f",Dt=!0)=>{_t+=10,Vr(15),Dt&&At>=12?(we.setFillColor("#d92134"),we.rect(Vt,_t-4,4,5,"F"),we.setFontSize(At),we.setTextColor(Tt),we.setFont("helvetica","bold"),we.text(ot,Vt+7,_t)):(we.setFontSize(At),we.setTextColor(Tt),we.setFont("helvetica","bold"),we.text(ot,Vt,_t)),_t+=5.5},Ni=(ot,At=10,Tt=0)=>{we.setFontSize(At),we.setTextColor(0,0,0),we.setFont("helvetica","normal"),we.splitTextToSize(ot,Vn).forEach(hn=>{Vr(6),we.text(hn,Vt+Tt,_t),_t+=5})},ps=(ot,At,Tt)=>{_t+=3;const Dt=8,hn=2,Yn="#fff5f5",br="#eeb7b7";Vr(Dt+5),we.setFillColor(Yn),we.rect(Vt,_t-5,Vn,Dt,"F"),we.setDrawColor(br),we.setLineWidth(.2),we.rect(Vt,_t-5,Vn,Dt,"S");let Qn=Vt;we.setFontSize(9),we.setTextColor(0,0,0),we.setFont("helvetica","bold"),ot.forEach((Sr,dr)=>{we.line(Qn,_t-5,Qn,_t-5+Dt),we.text(Sr,Qn+hn,_t),Qn+=Tt[dr]}),we.line(Qn,_t-5,Qn,_t-5+Dt),_t+=Dt,we.setFont("helvetica","normal"),At.forEach((Sr,dr)=>{const Mr=Sr.map((Ui,La)=>we.splitTextToSize(Ui,Tt[La]-hn*2)),Ti=Math.max(...Mr.map(Ui=>Ui.length)),bs=Math.max(Dt,Ti*4+hn);Vr(bs),dr%2===0&&(we.setFillColor(245,245,245),we.rect(Vt,_t-5,Vn,bs,"F")),we.setDrawColor(br),we.rect(Vt,_t-5,Vn,bs,"S");let Ht=Vt;Mr.forEach((Ui,La)=>{we.line(Ht,_t-5,Ht,_t-5+bs),Ui.forEach((ho,Po)=>{we.text(ho,Ht+hn,_t-1+Po*4)}),Ht+=Tt[La]}),we.line(Ht,_t-5,Ht,_t-5+bs),_t+=bs}),_t+=1.5},ol=async()=>{const ot=window.pdfjsLib;if(ot)return ot;await new Promise((Tt,Dt)=>{const hn=document.querySelector('script[data-pdfjs="true"]');if(hn){hn.addEventListener("load",()=>Tt(),{once:!0}),hn.addEventListener("error",()=>Dt(new Error("Failed to load PDF renderer.")),{once:!0});return}const Yn=document.createElement("script");Yn.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",Yn.async=!0,Yn.dataset.pdfjs="true",Yn.onload=()=>Tt(),Yn.onerror=()=>Dt(new Error("Failed to load PDF renderer.")),document.head.appendChild(Yn)});const At=window.pdfjsLib;if(!At)throw new Error("PDF renderer is unavailable.");return At.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",At},zl=async ot=>{const At=await ol(),Tt=await(await fetch(ot)).arrayBuffer(),Dt=await At.getDocument({data:Tt}).promise,hn=[],Yn=Math.min(Dt.numPages,30);for(let br=1;br<=Yn;br++){const Qn=await Dt.getPage(br),Sr=Qn.getViewport({scale:1.5}),dr=document.createElement("canvas");dr.width=Sr.width,dr.height=Sr.height;const Mr=dr.getContext("2d");Mr&&(await Qn.render({canvasContext:Mr,viewport:Sr}).promise,hn.push(dr.toDataURL("image/jpeg",.9)))}return hn},ll=(ot,At)=>{we.addPage(),cr++,Yi(cr),_t=$r+10,we.setFont("helvetica","bold"),we.setFontSize(10),we.setTextColor(30,58,95),we.splitTextToSize(At,Vn).forEach(Ht=>{we.text(Ht,Vt,_t),_t+=5}),_t+=1;const Dt=we.getImageProperties(ot),hn=Vn,Yn=Gn-Or-_t-8,br=hn/Dt.width,Qn=Yn/Dt.height,Sr=Math.min(br,Qn),dr=Dt.width*Sr,Mr=Dt.height*Sr,Ti=Vt+(hn-dr)/2,bs=ot.startsWith("data:image/png")?"PNG":"JPEG";we.addImage(ot,bs,Ti,_t,dr,Mr)};Yi(1),we.setFontSize(10),we.setTextColor(0,0,0),we.text(`Ref.: ${u.quotationNumber}`,Vt,_t),we.text(`Date: ${new Date().toLocaleDateString("en-IN")}, Revision: ${u.revision}`,Rt-Vt,_t,{align:"right"}),_t+=8,we.text(`Enquiry no.: ${u.enquiryNumber}`,Vt,_t),_t+=8,we.text(`Project Location: ${ve?.location||"-"}`,Vt,_t),_t+=15,we.setFontSize(18),we.setTextColor("#da2032"),we.setFont("helvetica","bold"),we.text(u.proposalTitle||"Techno-Commercial Offer",Rt/2,_t,{align:"center"}),_t+=15,we.setFontSize(12),we.setTextColor(0,0,0),we.setFont("helvetica","bold"),we.text(u.toLabel||"To",Vt,_t),_t+=6,we.setFont("helvetica","normal"),we.text(`${u.msLabel||"M/s"} ${D?.name||"-"}`,Vt,_t),_t+=6,we.setFontSize(10),we.setFont("helvetica","normal"),we.text(`${D?.location||""}`,Vt,_t),_t+=12,we.setFont("helvetica","bold"),we.text(`Subject: ${u.subject}`,Vt,_t),_t+=12,we.setFont("helvetica","normal"),m.introSections.forEach(ot=>{Ni(ot.content,10,0)}),_t+=7,we.setFont("helvetica","normal"),we.setFontSize(10),we.text("Regards,",Vt,_t),_t+=6,we.setFont("helvetica","bold"),we.text(u.contactName,Vt,_t),_t+=5,we.setFont("helvetica","normal"),we.text(`Mo: ${u.contactMobile}`,Vt,_t),_t+=5,we.text(`Email: ${u.contactEmail}`,Vt,_t),_t+=5.5,we.addPage(),cr++,Yi(cr),_t=$r+10;const cl=cr;we.setFontSize(16),we.setTextColor("#1e3a5f"),we.setFont("helvetica","bold"),we.text("INDEX",Rt/2,_t,{align:"center"}),_t+=15;const Xi=_t,Ha=[];_t+=80,we.addPage(),cr++,Yi(cr),_t=$r+10,gt.forEach((ot,At)=>{const Tt=ot.heading&&ot.heading.trim().length>0?ot.heading:th[ot.type]||`Section ${At+1}`,Dt=Tt,hn=gt.slice(0,At).filter(br=>br.heading===ot.heading).length,Yn=hn>0?`${Dt} (${hn+1})`:Dt;switch(Ha.push({title:Yn,page:cr}),ot.type){case"scopeBrief":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["Sl. No.","Description","Details"],m.scopeBriefDetails.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[25,90,65]);break;case"scopeBasic":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["Sl. No.","Description","Details"],m.scopeBasicBuilding.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[25,90,65]);break;case"scopeAdditions":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["Sr. No.","Description","Details"],m.scopeBuildingAdditions.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[25,90,65]);break;case"steelWork":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["No.","Description","Details"],m.steelWorkFinish.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[20,80,80]);break;case"designLoads":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["Sr. No.","Description","Details"],m.designLoads.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[25,90,65]);break;case"applicableCodes":Vr(45),Hr(Tt,14,"#1e3a5f"),m.applicableCodes.forEach(Ht=>{Ni(` ${Ht}`,9,5)});break;case"materialSpecs":Vr(50),Hr(Tt,14,"#1e3a5f"),ps(["SI. No.","Structural Components","Details"],m.materialSpecs.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.details]),[25,90,65]);break;case"drawingsDelivery":Vr(45),Hr(Tt,14,"#1e3a5f"),m.drawingsDelivery.forEach(Ht=>{Ni(` ${Ht}`,9,5)});break;case"erectionScopeClient":Vr(45),Hr(Tt,14,"#1e3a5f"),m.erectionScopeClient.forEach(Ht=>{Ni(` ${Ht}`,9,5)});break;case"erectionScopeCompany":Vr(45),Hr(Tt,14,"#1e3a5f"),m.erectionScopeCompany.forEach(Ht=>{Ni(` ${Ht}`,9,5)});break;case"commercialPrice":Vr(60),Hr(Tt,14,"#1e3a5f");const br=["S.N.","Description","UOM","QTY","Rate","Amount","Remarks"],Qn=f.map(Ht=>[Ht.serialNo.toString(),Ht.description,Ht.unit,Ht.quantity.toString(),`Rs.${Ht.rate.toLocaleString("en-IN")}`,`Rs.${Ht.amount.toLocaleString("en-IN")}`,Ht.remarks||""]);ps(br,Qn,[15,55,20,20,25,30,15]);const Sr=Ge();Vr(18);const dr=75,Mr=9,Ti=Rt-Vt-dr;we.setFillColor("#fff5f5"),we.setDrawColor("#eeb7b7"),we.setLineWidth(.2),we.rect(Ti,_t-3,dr,Mr,"FD"),we.setFont("helvetica","bold"),we.setFontSize(10),we.setTextColor(0,0,0);const bs=Sr.toLocaleString("en-IN");we.text(`Total Amount: ${bs}.`,Ti+3,_t+2),_t+=Mr+2;break;case"paymentTerms":Vr(50),Hr(Tt,14,"#1e3a5f"),_l(m.paymentTermSections,m.paymentTerms).forEach(Ht=>{Vr(8),we.setFont("helvetica","bold"),we.setFontSize(10),we.setTextColor(0,0,0),we.text(Ht.heading,Vt,_t),_t+=5,Ht.terms.forEach((Ui,La)=>{Ni(`${La+1}. ${Ui}`,9,5)}),_t+=2}),Hr("BANK DETAILS",11,"#1e3a5f"),m.bankDetails.forEach(Ht=>{Ni(`${Ht.particular}: ${Ht.value}`,9,0)});break;case"commercialTerms":Vr(80),Hr(Tt,14,"#1e3a5f"),ps(["SI. No.","Description","Conditions"],m.commercialTerms.map(Ht=>[Ht.slNo.toString(),Ht.description,Ht.conditions]),[20,45,115]);break;default:break}}),Vr(30),Kc(m.notesBlocks,m.notes).forEach((ot,At)=>{Hr(`${ot.title}${At>0?` ${At+1}`:""}:`,11,"#333333"),ot.items.forEach((Tt,Dt)=>{Ni(`${Dt+1}. ${Tt}`,9,5)}),_t+=2}),_t+=7,Vr(20),m.closingParagraphs.forEach(ot=>{Ni(ot.content,10,0)}),_t+=3.5,_t+=7,_t+=10,we.setFont("helvetica","bold"),we.setFontSize(11),we.setTextColor(0,0,0),we.text(m.closingThanks||"Thanking you",Vt,_t),_t+=6,we.setTextColor("#da2032"),we.text(m.closingCompanyName||"Revira Nexgen Structures Pvt. Ltd",Vt,_t);const fo=Yf(m.uploadDrawings).filter(ot=>ot.dataUrl);if(fo.length>0){Ha.push({title:"Upload a Drawing",page:cr+1});for(const ot of fo)if(ot.mimeType==="application/pdf")try{const At=await zl(ot.dataUrl);if(At.length===0)throw new Error("No pages rendered");for(let Tt=0;Tt<At.length;Tt++)ll(At[Tt],`${ot.fileName||"Uploaded PDF"} - Page ${Tt+1}`)}catch(At){we.addPage(),cr++,Yi(cr),_t=$r+10,we.setFont("helvetica","bold"),we.setFontSize(11),we.setTextColor(218,32,50),we.text("Uploaded PDF could not be rendered",Vt,_t),_t+=7,we.setFont("helvetica","normal"),we.setFontSize(10),we.setTextColor(0,0,0),we.text(`File: ${ot.fileName||"Attachment"}`,Vt,_t),_t+=6,we.splitTextToSize("PDF pages were skipped because the renderer could not be loaded in this browser/session.",Vn).forEach(Dt=>{we.text(Dt,Vt,_t),_t+=5}),console.warn("Failed to render PDF attachment:",At)}else ot.dataUrl.startsWith("data:image/")&&ll(ot.dataUrl,ot.fileName||"Uploaded image")}we.setPage(cl);const ms=Xi,$s=8,Wa="#eeb7b7",ul=[25,120,Vn-145];let Js=Vt;we.setFillColor("#fff5f5"),we.rect(Vt,ms-5,Vn,$s,"F"),we.setDrawColor(Wa),we.setLineWidth(.3),we.rect(Vt,ms-5,Vn,$s,"S");let os=Vt;ul.forEach(ot=>{we.line(os,ms-5,os,ms-5+$s),os+=ot}),we.line(os,ms-5,os,ms-5+$s),we.setFontSize(9),we.setTextColor(0,0,0),we.setFont("helvetica","bold"),we.text("Sl. No.",Js+2,ms),Js+=25,we.text("Subject",Js+2,ms),Js+=120,we.text("Page No.",Js+2,ms);let Es=ms+$s;we.setTextColor(0,0,0),we.setFont("helvetica","normal"),Ha.forEach((ot,At)=>{Js=Vt,At%2===0&&(we.setFillColor(245,245,245),we.rect(Vt,Es-5,Vn,$s,"F")),we.setDrawColor(Wa),we.rect(Vt,Es-5,Vn,$s,"S"),os=Vt,ul.forEach(Tt=>{we.line(os,Es-5,os,Es-5+$s),os+=Tt}),we.line(os,Es-5,os,Es-5+$s),we.text((At+1).toString(),Js+2,Es),Js+=25,we.text(ot.title,Js+2,Es),Js+=120,we.text(ot.page?.toString()||"-",Js+2,Es),Es+=$s});const Vs=new Date,Ji=String(Vs.getDate()).padStart(2,"0"),dl=String(Vs.getMonth()+1).padStart(2,"0"),w=Vs.getFullYear(),$=`${Ji}${dl}${w}`,pe=D?.name?D.name.split(/\s+/).map(ot=>ot.charAt(0).toUpperCase()).join(""):"COMPANY",ke=ve?.quotationType==="Supply and Fabrication"?"Peb":ve?.quotationType==="Structural Fabrication"?"SF":"JW",Be=String(ve?.id||1).padStart(3,"0"),rt=`RNS_${$}_${pe}_${ke}-${Be}_${u.revision}.pdf`,ht=_e?we.output("datauristring",{filename:rt}):void 0;return oe&&we.save(rt),he||r({title:oe?"PDF exported":"PDF generated",description:oe?"The quotation has been exported as PDF.":"The quotation PDF is ready."}),{filename:rt,dataUri:ht}}catch(we){return console.error("PDF export error:",we),he||r({title:"Export failed",description:"Failed to export PDF. Please try again.",variant:"destructive"}),null}finally{me(!1)}},Bt=()=>{const E=u.quotationNumber||"-",oe=u.revision||"-",he=D?.name||"Client";return`Quotation ${E} (${oe}) for ${he} is ready. Please find the exported PDF attached.`},Qt="9968422442",bn=()=>{if(!Ne?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}Ze({to:D?.emailAddress||"",subject:`Quotation ${u.quotationNumber||""} ${u.revision||""}`.trim(),message:`Please find the attached file for details

-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`}),se(!0)},Er=async()=>{if(!Ne?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}const E=Me.to.split(/[,\s;]+/).map(_e=>_e.trim()).filter(Boolean);if(E.length===0){r({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!Me.subject.trim()){r({title:"Subject required",description:"Please enter email subject.",variant:"destructive"});return}if(!Me.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}be(!0);const oe=await $t({save:!1,silent:!0,returnDataUri:!0});if(!oe?.dataUri){be(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for email.",variant:"destructive"});return}const he=oe.dataUri.split(",")[1]||"";try{const we=await(await wn("POST",`/api/quotations/${Ne.id}/send-email`,{to:E,subject:Me.subject.trim(),message:Me.message.trim(),fileName:oe.filename,pdfBase64:he})).json(),Rt=Array.isArray(we?.accepted)?we.accepted:[],Gn=Rt.length>0?Rt.join(", "):E.join(", "),Vt=we?.messageId?` Message ID: ${we.messageId}.`:"";r({title:"Email queued",description:`SMTP accepted: ${Gn}.${Vt} Check inbox/spam on recipient side.`}),se(!1)}catch(_e){r({title:"Send failed",description:_e?.message||"Failed to send email.",variant:"destructive"})}finally{be(!1)}},kn=()=>{if(!Ne?.id){r({title:"Save required",description:"Please save quotation first, then send on WhatsApp.",variant:"destructive"});return}const E=(D?.mobileNumber||"").replace(/\D/g,""),oe=E.length===10?`91${E}`:E;mt({mobile:oe,message:`${Bt()}
Project: ${ve?.projectName||"-"}
Client: ${D?.name||"-"}
From: ${Qt}`}),L(!0)},An=async()=>{const E=ft.mobile.split(/[,\s;]+/).map(_e=>_e.replace(/\D/g,"")).filter(Boolean);if(E.length===0){r({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!ft.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}Ie(!0);const oe=await $t({save:!1,silent:!0,returnDataUri:!0});if(!oe?.dataUri){Ie(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for WhatsApp send.",variant:"destructive"});return}const he=oe.dataUri.split(",")[1]||"";try{await wn("POST",`/api/quotations/${Ne?.id}/send-whatsapp`,{to:E,message:ft.message.trim(),fileName:oe.filename,pdfBase64:he}),r({title:"WhatsApp sent",description:`Quotation sent to ${E.join(", ")}.`}),L(!1)}catch(_e){r({title:"Send failed",description:_e?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{Ie(!1)}},ln=({title:E,number:oe,expanded:he,onToggle:_e,onAdd:we,testId:Rt,isEditingHeading:Gn,onStartEditHeading:Vt,onHeadingChange:Vn,onHeadingBlur:$r,onMoveUp:Or,onMoveDown:ts,onDuplicate:hi,onDelete:vn,canMoveUp:Zi=!0,canMoveDown:_t=!0})=>s.jsxs("div",{className:"flex items-center gap-3 bg-[#d92134] text-white px-4 py-3 rounded-lg cursor-pointer",onClick:_e,"data-testid":Rt||`section-header-${oe}`,children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white text-[#d92134] rounded font-bold text-sm",children:oe}),Gn?s.jsx(et,{value:E,onChange:cr=>Vn?.(cr.target.value),onBlur:$r,onKeyDown:cr=>{(cr.key==="Enter"||cr.key==="Escape")&&$r?.()},autoFocus:!0,className:"h-8 flex-1 text-slate-900 bg-white",onClick:cr=>cr.stopPropagation()}):s.jsx("span",{className:"font-semibold flex-1",children:E}),Vt&&!Gn&&s.jsx(qe,{variant:"ghost",size:"icon",onClick:cr=>{cr.stopPropagation(),Vt()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Edit heading",children:s.jsx(no,{className:"h-4 w-4"})}),we&&s.jsxs(qe,{variant:"ghost",size:"sm",onClick:cr=>{cr.stopPropagation(),we()},className:"text-white hover:bg-white/20 h-7",children:[s.jsx(_a,{className:"h-4 w-4 mr-1"})," Add"]}),Or&&s.jsx(qe,{variant:"ghost",size:"icon",onClick:cr=>{cr.stopPropagation(),Or()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!Zi,title:"Move up",children:s.jsx($p,{className:"h-4 w-4"})}),ts&&s.jsx(qe,{variant:"ghost",size:"icon",onClick:cr=>{cr.stopPropagation(),ts()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!_t,title:"Move down",children:s.jsx(qd,{className:"h-4 w-4"})}),hi&&s.jsx(qe,{variant:"ghost",size:"icon",onClick:cr=>{cr.stopPropagation(),hi()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Duplicate block",children:s.jsx(Ud,{className:"h-4 w-4"})}),vn&&s.jsx(qe,{variant:"ghost",size:"icon",onClick:cr=>{cr.stopPropagation(),vn()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Delete block",children:s.jsx(vr,{className:"h-4 w-4"})}),he?s.jsx($p,{className:"h-5 w-5"}):s.jsx(qd,{className:"h-5 w-5"})]});return re||H?s.jsx(qs,{user:a,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):!ve||!D?s.jsx(qs,{user:a,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),s.jsx(qe,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})}):s.jsxs(qs,{user:a,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>n("/projects"),"data-testid":"button-back",children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:ve.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(nu,{className:"h-4 w-4"}),ve.location]})]})]}),s.jsxs(qe,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-quotation",children:[s.jsx(Aa,{className:"w-4 h-4 mr-2"}),"New Quotation"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>ge(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:Ne?.revision||u.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>ge(!0),"data-testid":"button-view-versions",children:s.jsx(qm,{className:"h-4 w-4"})}),Ne&&s.jsx(qe,{variant:"outline",size:"icon",onClick:()=>pr.mutate(),disabled:pr.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:s.jsx(Ud,{className:"w-4 h-4"})}),s.jsxs(qe,{onClick:()=>{$t()},disabled:ne,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Dh,{className:"w-4 h-4 mr-2"}),ne?"Exporting...":"Export PDF"]}),s.jsx(qe,{variant:"outline",size:"icon",onClick:bn,disabled:ne,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email",title:"Send quotation by email",children:s.jsx(fu,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"outline",size:"icon",onClick:kn,disabled:ne,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp",title:"Send quotation on WhatsApp",children:s.jsx(Um,{className:"w-4 h-4"})}),s.jsxs(qe,{variant:"outline",onClick:yn,disabled:jt.isPending||Pt.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-quotation",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),jt.isPending||Pt.isPending?"Saving...":"Save Changes"]}),Ne&&$e&&$e.length>1&&s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{if(confirm(`Are you sure you want to delete this quotation (${Ne.revision})?`))try{await wn("DELETE",`/api/quotations/${Ne.id}`),Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation-versions"]});const E=$e.filter(oe=>oe.id!==Ne.id);E.length>0?n(`/projects/${t}/quotation/${E[0].id}`):n(`/projects/${t}/quotation`),r({title:"Quotation deleted",description:`${Ne.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete quotation.",variant:"destructive"})}},"data-testid":"button-delete-quotation",children:s.jsx(vr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{ref:o,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#da2032] rounded",children:s.jsx(Aa,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Technical Proposal Metadata"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Ref ID"}),s.jsx(et,{value:u.quotationNumber,onChange:E=>c({...u,quotationNumber:E.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-quotation-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Creation Date"}),s.jsx(et,{value:Xe(),readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Enquiry Ref"}),s.jsx(et,{value:u.enquiryNumber,onChange:E=>c({...u,enquiryNumber:E.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-enquiry-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Project Site (Legacy)"}),s.jsx(et,{value:ve.location,readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Proposal Header Title"}),s.jsx(et,{value:u.proposalTitle,onChange:E=>c({...u,proposalTitle:E.target.value}),className:"mt-2 text-lg font-bold bg-white border-slate-200","data-testid":"input-proposal-title"})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Client Subject Specification"}),s.jsx(et,{value:u.subject,onChange:E=>c({...u,subject:E.target.value}),className:"mt-2 bg-white border-slate-200","data-testid":"input-subject"})]})]})]}),s.jsxs(Cn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:s.jsx(Aa,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Main Covering Letter"})]}),s.jsxs(_n,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500",children:"To Label"}),s.jsx(et,{value:u.toLabel,onChange:E=>c({...u,toLabel:E.target.value}),className:"mt-1","data-testid":"input-to-label"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500",children:"M/s Label"}),s.jsx(et,{value:u.msLabel,onChange:E=>c({...u,msLabel:E.target.value}),className:"mt-1","data-testid":"input-ms-label"})]})]}),s.jsxs("p",{className:"font-semibold text-slate-700",children:[u.toLabel||"To",","]}),s.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:(u.msLabel||"M/s")+" "+D.name}),s.jsx("p",{className:"text-slate-600 text-slate-700 mt-1",children:D.location})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-700",children:"Subject: "}),s.jsx("span",{className:"text-slate-600",children:u.subject})]}),s.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[s.jsx("p",{children:"Dear Sir,"}),m.introSections.map((E,oe)=>s.jsx("div",{className:"group relative",children:j===E.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Rr,{value:E.content,onChange:he=>an(E.id,he.target.value),className:"flex-1 min-h-[60px]",autoFocus:!0}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(qe,{size:"icon",variant:"ghost",onClick:()=>y(null),children:s.jsx(Fd,{className:"h-4 w-4 text-green-600"})}),s.jsx(qe,{size:"icon",variant:"ghost",onClick:()=>gn(E.id),children:s.jsx(vr,{className:"h-4 w-4 text-red-600"})})]})]}):s.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(E.id),children:[E.content,s.jsx(no,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},E.id)),s.jsxs(qe,{variant:"ghost",size:"sm",onClick:sr,className:"text-[#da2032]","data-testid":"button-add-intro",children:[s.jsx(_a,{className:"h-4 w-4 mr-1"})," Add Paragraph"]})]})]})]}),s.jsxs(Cn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:s.jsx(Aa,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Master Signatory Authority"})]}),s.jsx(_n,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Full Legal Name"}),s.jsx(et,{value:u.contactName,onChange:E=>c({...u,contactName:E.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Contact Handset"}),s.jsx(et,{value:u.contactMobile,onChange:E=>c({...u,contactMobile:E.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Official Email Address"}),s.jsx(et,{value:u.contactEmail,onChange:E=>c({...u,contactEmail:E.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-email"})]})]})})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[ve?.quotationType==="Supply and Fabrication"&&s.jsxs(s.Fragment,{children:[Nt("scopeBrief").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"01",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.scopeBriefDetails,section:"scopeBriefDetails",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("scopeBasic").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"02",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.scopeBasicBuilding,section:"scopeBasicBuilding",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("scopeAdditions").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"03",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.scopeBuildingAdditions,section:"scopeBuildingAdditions",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("steelWork").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"04",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.steelWorkFinish,section:"steelWorkFinish",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("designLoads").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"05",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.designLoads,section:"designLoads",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("applicableCodes").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.applicableCodes.map((oe,he)=>s.jsx("li",{className:"flex items-start gap-3 group",children:R===he?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:oe,onChange:_e=>zs(he,_e.target.value),onBlur:()=>z(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>mr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:oe}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>z(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>mr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})},he))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(fc,{label:"Add Item",onClick:as})})]})})]},E.id)),Nt("materialSpecs").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"06",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Ld,{data:m.materialSpecs,section:"materialSpecs",onUpdateRow:Kt,onRemoveRow:vt,onAddRow:Fn})]},E.id)),Nt("drawingsDelivery").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"09",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.drawingsDelivery.map((oe,he)=>s.jsx("li",{className:"flex items-start gap-3 group",children:ae===he?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:oe,onChange:_e=>Fr(he,_e.target.value),onBlur:()=>W(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>yr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:oe}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>W(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>yr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})},he))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(fc,{label:"Add Item",onClick:lr})})]})})]},E.id)),Nt("erectionScopeClient").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"10",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeClient.map((oe,he)=>s.jsx("li",{className:"flex items-start gap-3 group",children:te===he?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:oe,onChange:_e=>Jr(he,_e.target.value),onBlur:()=>Q(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Tr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:oe}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Q(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Tr(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})},he))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(fc,{label:"Add Item",onClick:ks})})]})})]},E.id)),Nt("erectionScopeCompany").map(E=>s.jsxs("div",{className:"space-y-4",style:{order:kt(E.id)},children:[s.jsx(ln,{title:E.heading,number:"11",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)}),Ke(E.id)&&s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeCompany.map((oe,he)=>s.jsx("li",{className:"flex items-start gap-3 group",children:ue===he?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:oe,onChange:_e=>es(he,_e.target.value),onBlur:()=>O(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ts(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:oe}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>O(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ts(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})},he))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(fc,{label:"Add Item",onClick:fi})})]})})]},E.id))]}),Nt("commercialPrice").map(E=>s.jsx(S0,{type:"single",collapsible:!0,value:Ke(E.id)?`commercial-price-${E.id}`:"",onValueChange:oe=>Qe(E.id,oe===`commercial-price-${E.id}`),style:{order:kt(E.id)},children:s.jsxs(Kp,{value:`commercial-price-${E.id}`,className:"border-0",children:[s.jsx(Qp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(ln,{title:E.heading,number:ve?.quotationType==="Supply and Fabrication"?"12":"01",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)})})}),s.jsx(Zp,{className:"p-0 pt-4",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"S.N."}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 w-24 text-slate-600 font-medium",children:"Unit"}),s.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Quantity"}),s.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Rate"}),s.jsx("th",{className:"text-right p-3 w-32 text-slate-600 font-medium",children:"Amount"}),s.jsx("th",{className:"text-left p-3 w-32 text-slate-600 font-medium",children:"Remarks"}),s.jsx("th",{className:"w-12 p-3"})]})}),s.jsxs("tbody",{children:[f.map((oe,he)=>s.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[s.jsx("td",{className:"p-3 text-center text-slate-600",children:oe.serialNo}),s.jsx("td",{className:"p-3",children:s.jsx(Rr,{value:oe.description,onChange:_e=>tn(he,"description",_e.target.value),className:"min-h-[60px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-desc-${he}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:oe.unit,onChange:_e=>tn(he,"unit",_e.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-unit-${he}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:oe.quantity,onChange:_e=>tn(he,"quantity",_e.target.value),className:"h-8 text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-qty-${he}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:oe.rate,onChange:_e=>tn(he,"rate",_e.target.value),className:"h-8 min-w-[90px] text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-rate-${he}`})}),s.jsx("td",{className:"p-3 text-right font-medium",children:at(oe.amount)}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:oe.remarks,onChange:_e=>tn(he,"remarks",_e.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-remarks-${he}`})}),s.jsx("td",{className:"p-3",children:s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>Ut(he),disabled:f.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${he}`,children:s.jsx(vr,{className:"h-4 w-4"})})})]},he)),s.jsxs("tr",{className:"bg-slate-50 font-semibold",children:[s.jsx("td",{colSpan:5,className:"p-3 text-right",children:"Total:"}),s.jsx("td",{className:"p-3 text-right",children:at(Ge())}),s.jsx("td",{colSpan:2})]})]})]}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(fc,{label:"Add Row",onClick:Gt,testId:"button-add-row"})})]})})})]})},E.id)),Nt("paymentTerms").map(E=>s.jsx(S0,{type:"single",collapsible:!0,value:Ke(E.id)?`payment-terms-${E.id}`:"",onValueChange:oe=>Qe(E.id,oe===`payment-terms-${E.id}`),style:{order:kt(E.id)},children:s.jsxs(Kp,{value:`payment-terms-${E.id}`,className:"border-0",children:[s.jsx(Qp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(ln,{title:E.heading,number:"PT",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)})})}),s.jsx(Zp,{className:"p-0 pt-4",children:s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6 space-y-4",children:[_l(m.paymentTermSections,m.paymentTerms).map((oe,he)=>{const _e=q[oe.id]??!0;return s.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[s.jsxs("div",{className:"group flex items-center gap-2",children:[s.jsx(qe,{type:"button",size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>ee(we=>({...we,[oe.id]:!(we[oe.id]??!0)})),"data-testid":`button-toggle-payment-heading-${he}`,children:_e?s.jsx($p,{className:"h-4 w-4 text-slate-500"}):s.jsx(qd,{className:"h-4 w-4 text-slate-500"})}),P===oe.id?s.jsxs(s.Fragment,{children:[s.jsx(et,{value:oe.heading,onChange:we=>on(oe.id,we.target.value),className:"h-8 font-semibold flex-1",placeholder:"Heading",autoFocus:!0,onBlur:()=>_(null),onKeyDown:we=>we.key==="Enter"&&_(null),"data-testid":`input-payment-heading-${he}`}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>As(oe.id),"data-testid":`button-remove-payment-heading-${he}`,children:s.jsx(vr,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded font-semibold text-slate-700",onClick:()=>_(oe.id),children:oe.heading}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>_(oe.id),children:s.jsx(no,{className:"h-3 w-3 text-slate-400"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>As(oe.id),"data-testid":`button-remove-payment-heading-${he}`,children:s.jsx(vr,{className:"h-4 w-4"})})]})]}),_e&&s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 text-sm",children:oe.terms.map((we,Rt)=>s.jsx("li",{className:"flex items-start gap-2 group",children:F?.sectionId===oe.id&&F?.termIndex===Rt?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:we,onChange:Gn=>fs(oe.id,Rt,Gn.target.value),onBlur:()=>v(null),autoFocus:!0,className:"flex-1 min-h-[60px]","data-testid":`input-payment-term-${he}-${Rt}`}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ps(oe.id,Rt),"data-testid":`button-remove-payment-term-${he}-${Rt}`,children:s.jsx(vr,{className:"h-4 w-4 text-red-600"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"w-6 text-slate-400",children:[Rt+1,"."]}),s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded text-slate-700",onClick:()=>v({sectionId:oe.id,termIndex:Rt}),children:we}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>v({sectionId:oe.id,termIndex:Rt}),children:s.jsx(no,{className:"h-3 w-3 text-slate-400"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ps(oe.id,Rt),"data-testid":`button-remove-payment-term-${he}-${Rt}`,children:s.jsx(vr,{className:"h-4 w-4 text-red-600"})})]})},`${oe.id}-${Rt}`))}),s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>Us(oe.id),className:"text-[#da2032]","data-testid":`button-add-payment-term-${he}`,children:[s.jsx(_a,{className:"h-4 w-4 mr-1"})," Add Term"]})]})]},oe.id)}),s.jsx("div",{className:"mt-2 border-t pt-3 flex justify-center",children:s.jsx(fc,{label:"Add Section",onClick:xr})}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-slate-700",children:"Bank Details:"}),s.jsxs(qe,{variant:"ghost",size:"sm",onClick:qi,className:"text-[#da2032]","data-testid":"button-add-bank-detail",children:[s.jsx(_a,{className:"h-4 w-4 mr-1"})," Add"]})]}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-1/3",children:"Particulars"}),s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium",children:"Value"}),s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-20",children:"Actions"})]})}),s.jsx("tbody",{children:m.bankDetails.map((oe,he)=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:Ae===he?s.jsx(et,{value:oe.particular,onChange:_e=>ki(he,"particular",_e.target.value),className:"text-slate-600","data-testid":`input-bank-particular-${he}`}):s.jsxs("span",{className:"text-slate-600 cursor-pointer hover:text-[#d92134]",onClick:()=>Pe(he),children:[oe.particular,":"]})}),s.jsx("td",{className:"p-2",children:Ae===he?s.jsx(et,{value:oe.value,onChange:_e=>ki(he,"value",_e.target.value),"data-testid":`input-bank-value-${he}`}):s.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Pe(he),children:oe.value})}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex gap-1",children:[Ae===he?s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Pe(null),children:s.jsx(Fd,{className:"h-4 w-4 text-green-600"})}):s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Pe(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Un(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})})]},he))})]})]})]})})})]})},E.id)),ve?.quotationType==="Supply and Fabrication"&&Nt("commercialTerms").map(E=>s.jsx(S0,{type:"single",collapsible:!0,value:Ke(E.id)?`terms-conditions-${E.id}`:"",onValueChange:oe=>Qe(E.id,oe===`terms-conditions-${E.id}`),style:{order:kt(E.id)},children:s.jsxs(Kp,{value:`terms-conditions-${E.id}`,className:"border-0",children:[s.jsx(Qp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(ln,{title:E.heading,number:"08",expanded:Ke(E.id),onToggle:()=>it(E.id),...Mt(E)})})}),s.jsx(Zp,{className:"p-0 pt-4",children:s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"SI. No."}),s.jsx("th",{className:"text-left p-3 w-48 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Conditions"}),s.jsx("th",{className:"text-left p-3 w-20 text-slate-600 font-medium",children:"Actions"})]})}),s.jsx("tbody",{className:"text-slate-700",children:m.commercialTerms.map((oe,he)=>s.jsxs("tr",{className:`border-b ${he%2===1?"bg-slate-50/50":""}`,children:[s.jsx("td",{className:"p-3 align-top",children:oe.slNo}),s.jsx("td",{className:"p-3 align-top",children:Y===he?s.jsx(et,{value:oe.description,onChange:_e=>Xs(he,"description",_e.target.value),className:"font-medium","data-testid":`input-term-desc-${he}`}):s.jsx("span",{className:"font-medium cursor-pointer hover:text-[#d92134]",onClick:()=>Ce(he),children:oe.description})}),s.jsx("td",{className:"p-3 align-top",children:Y===he?s.jsx(Rr,{value:oe.conditions,onChange:_e=>Xs(he,"conditions",_e.target.value),className:"min-h-[80px]","data-testid":`input-term-cond-${he}`}):s.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Ce(he),children:oe.conditions})}),s.jsx("td",{className:"p-3 align-top",children:s.jsxs("div",{className:"flex gap-1",children:[Y===he?s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ce(null),children:s.jsx(Fd,{className:"h-4 w-4 text-green-600"})}):s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ce(he),children:s.jsx(no,{className:"h-4 w-4"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Qi(he),children:s.jsx(vr,{className:"h-4 w-4 text-red-500"})})]})})]},he))})]})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(fc,{label:"Add Row",onClick:hs})})]})})})]})},E.id))]}),Kc(m.notesBlocks,m.notes).map((E,oe,he)=>s.jsxs(Cn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-slate-50",children:[s.jsxs("h3",{className:"font-semibold text-slate-700",children:[E.title,oe>0?` ${oe+1}`:""]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qe,{type:"button",variant:"outline",size:"sm",onClick:()=>ir(E.id),className:"h-8 border-[#d92134]/30 text-[#d92134] hover:bg-[#fff5f6]","data-testid":`button-duplicate-notes-block-${oe}`,children:[s.jsx(Ud,{className:"h-4 w-4 mr-1"})," Duplicate"]}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",onClick:()=>Nr(E.id),disabled:he.length<=1,className:"h-8 border-red-200 text-red-600 hover:bg-red-50","data-testid":`button-delete-notes-block-${oe}`,children:[s.jsx(vr,{className:"h-4 w-4 mr-1"})," Delete"]})]})]}),s.jsx(_n,{className:"p-6",children:s.jsx("ul",{className:"space-y-2 text-sm",children:E.items.map((_e,we)=>s.jsx("li",{className:"group flex items-start gap-2",children:I?.blockId===E.id&&I?.noteIndex===we?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{value:_e,onChange:Rt=>Dn(E.id,we,Rt.target.value),className:"flex-1 min-h-[40px]",autoFocus:!0,onBlur:()=>S(null)}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>ys(E.id,we),children:s.jsx(vr,{className:"h-4 w-4 text-red-600"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"w-6 text-slate-400",children:[we+1,"."]}),s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded",onClick:()=>S({blockId:E.id,noteIndex:we}),children:_e}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>S({blockId:E.id,noteIndex:we}),children:s.jsx(no,{className:"h-3 w-3 text-slate-400"})}),s.jsx(qe,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>ys(E.id,we),children:s.jsx(vr,{className:"h-4 w-4 text-red-600"})})]})},`${E.id}-${we}`))})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(fc,{label:"Add Item",onClick:()=>Jt(E.id),testId:`button-add-note-item-${oe}`})})]},E.id)),s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6 space-y-4",children:[m.closingParagraphs.map(E=>s.jsx("div",{className:"group relative text-sm text-slate-700",children:j===E.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Rr,{value:E.content,onChange:oe=>bi(E.id,oe.target.value),className:"flex-1 min-h-[80px]",autoFocus:!0}),s.jsx(qe,{size:"icon",variant:"ghost",onClick:()=>y(null),children:s.jsx(Fd,{className:"h-4 w-4 text-green-600"})})]}):s.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(E.id),children:[E.content,s.jsx(no,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},E.id)),s.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.jsx("div",{className:"group",children:s.jsx(et,{value:m.closingThanks,onChange:E=>b(oe=>({...oe,closingThanks:E.target.value})),className:"font-semibold text-slate-700 bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-auto","data-testid":"input-closing-thanks"})}),s.jsx("div",{className:"group",children:s.jsx(et,{value:m.closingCompanyName,onChange:E=>b(oe=>({...oe,closingCompanyName:E.target.value})),className:"font-bold text-[#da2032] bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-auto","data-testid":"input-closing-company"})})]})]})}),s.jsx(Cn,{className:"shadow-sm",children:s.jsxs(_n,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Upload a Drawing"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",onClick:In,"data-testid":"button-add-drawing-upload-field",children:[s.jsx(_a,{className:"h-4 w-4 mr-1"})," Add uploader field"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"Upload images or PDF files. These will be appended in exported quotation PDF after End of Documents."}),s.jsx("div",{className:"space-y-3",children:Yf(m.uploadDrawings).map((E,oe)=>s.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx(et,{type:"file",accept:"image/*,.pdf",onChange:he=>fn(E.id,he),"data-testid":`input-drawing-upload-${oe}`}),s.jsx(qe,{type:"button",variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Nn(E.id),"data-testid":`button-remove-drawing-upload-${oe}`,children:s.jsx(vr,{className:"h-4 w-4"})})]}),E.fileName?s.jsxs("p",{className:"text-xs text-slate-600",children:["Selected: ",E.fileName]}):s.jsx("p",{className:"text-xs text-slate-400",children:"No file selected"})]},E.id))})]})}),s.jsx("div",{className:"text-center py-6 text-sm text-slate-500",children:s.jsx("p",{children:"!! End of Documents !!"})})]})]}),s.jsx(xi,{open:ce,onOpenChange:ge,children:s.jsxs(ci,{className:"max-w-lg",children:[s.jsx(ui,{children:s.jsx(di,{children:"Quotation Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:$e?.map(E=>s.jsxs("div",{className:`p-3 border rounded-lg ${Ne?.id===E.id?"border-[#d92134] bg-red-50":"hover:bg-slate-50"}`,children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-[#d92134]",children:E.revision}),Ne?.id===E.id&&s.jsx("span",{className:"text-xs bg-[#d92134] text-white px-2 py-0.5 rounded",children:"Current"})]})}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-0.5",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Enquiry Ref:"})," ",E.enquiryNumber||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Created:"})," ",new Date(E.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsxs(qe,{size:"sm",variant:Ne?.id===E.id?"secondary":"default",className:Ne?.id===E.id?"":"bg-[#d92134] hover:bg-[#b91c2c]",onClick:()=>{n(`/projects/${t}/quotation/${E.id}`),ge(!1)},"data-testid":`button-edit-version-${E.id}`,children:[s.jsx(no,{className:"h-4 w-4 mr-1"}),Ne?.id===E.id?"Editing":"Edit"]}),$e&&$e.length>1&&s.jsxs(qe,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:async oe=>{if(oe.stopPropagation(),confirm(`Are you sure you want to delete ${E.revision}?`))try{if(await wn("DELETE",`/api/quotations/${E.id}`),Bn.invalidateQueries({queryKey:["/api/projects",t,"quotation-versions"]}),Ne?.id===E.id){const he=$e.filter(_e=>_e.id!==E.id);he.length>0?n(`/projects/${t}/quotation/${he[0].id}`):n(`/projects/${t}/quotation`)}r({title:"Version deleted",description:`${E.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete version.",variant:"destructive"})}},"data-testid":`button-delete-version-${E.id}`,children:[s.jsx(vr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},E.id))})]})}),s.jsx(xi,{open:De,onOpenChange:se,children:s.jsxs(ci,{className:"sm:max-w-xl",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Quotation by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(et,{value:Me.to,onChange:E=>Ze(oe=>({...oe,to:E.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"You can enter multiple email ids separated by comma. A copy is always sent to reviranexgen@gmail.com."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(et,{value:Me.subject,onChange:E=>Ze(oe=>({...oe,subject:E.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Rr,{value:Me.message,onChange:E=>Ze(oe=>({...oe,message:E.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>se(!1),disabled:ye,"data-testid":"button-send-email-cancel",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:Er,disabled:ye,"data-testid":"button-send-email-submit",children:ye?"Sending...":"Submit"})]})]})]})}),s.jsx(xi,{open:M,onOpenChange:L,children:s.jsxs(ci,{className:"sm:max-w-lg",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Quotation on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(et,{value:ft.mobile,onChange:E=>mt(oe=>({...oe,mobile:E.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Rr,{value:ft.message,onChange:E=>mt(oe=>({...oe,message:E.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>L(!1),disabled:Re,"data-testid":"button-send-whatsapp-cancel",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:An,disabled:Re,"data-testid":"button-send-whatsapp-submit",children:Re?"Sending...":"Submit"})]})]})]})})]})}function P5(){const t=Xu(),e=t.id,n=t.invoiceId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,I]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,F]=k.useState({mobile:"",message:""}),[v,q]=k.useState({invoiceNumber:"",revision:"R-001",invoiceType:"PROFORMA INVOICE",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),[ee,ae]=k.useState([{id:1,serialNo:1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}]),{data:W}=Ea(),{data:te}=Ln({queryKey:["/api/projects",e],queryFn:async()=>{const xe=await fetch(`/api/projects/${e}`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch project");return xe.json()},enabled:!!e}),{data:Q}=Ln({queryKey:["/api/clients",te?.clientId],queryFn:async()=>{const xe=await fetch(`/api/clients/${te?.clientId}`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch client");return xe.json()},enabled:!!te?.clientId}),{data:ue}=Ln({queryKey:["/api/branding"],enabled:!!W}),{data:O}=Ln({queryKey:["/api/invoices",n],queryFn:async()=>{if(n){const X=await fetch(`/api/invoices/${n}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch invoice");return X.json()}const xe=await fetch(`/api/projects/${e}/invoice`,{credentials:"include"});if(!xe.ok){if(xe.status===404)return null;throw new Error("Failed to fetch invoice")}return xe.json()},enabled:!!e}),{data:R}=Ln({queryKey:["/api/invoices",O?.id,"items"],queryFn:async()=>{const xe=await fetch(`/api/invoices/${O?.id}/items`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch items");return xe.json()},enabled:!!O?.id}),{data:z}=Ln({queryKey:["/api/projects",e,"invoice-versions"],queryFn:async()=>{const xe=await fetch(`/api/projects/${e}/invoice-versions`,{credentials:"include"});return xe.ok?xe.json():[]},enabled:!!e}),Y=xe=>{if(!xe)return{};try{const X=JSON.parse(xe);return X&&typeof X=="object"?X:{}}catch{return{}}},Ce=k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),Ae=k.useCallback(()=>{const xe=[];return v.vehicleNo.trim()&&xe.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&xe.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&xe.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&xe.push(`Gate Pass: ${v.dispatchGatePass||"-"}`),xe.length?xe.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]),Pe=k.useCallback(()=>{const xe={invoiceType:v.invoiceType,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(xe)},[v]);k.useEffect(()=>{if(te&&Q&&!O){const xe=new Date,X=xe.getMonth()>=3?`${xe.getFullYear()}-${(xe.getFullYear()+1).toString().slice(-2)}`:`${xe.getFullYear()-1}-${xe.getFullYear().toString().slice(-2)}`;q(B=>({...B,invoiceNumber:`RNS/${X}/RNS-SL-${String(te.id).padStart(3,"0")}`,organisationName:`M/s ${Q.name}`,registeredAddress:Q.location,consigneeAddress:`M/s ${Q.name}, ${Q.location}`,clientGstin:Q.gstNo||""}))}},[te,Q,O]),k.useEffect(()=>{if(O){const xe=Y(O.contentSections),X=re=>(re||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),B=xe.orderReferenceType||(xe.showPurchaseOrderNo?"po":"wo"),ve=xe.vehicleNo!==void 0||xe.showDispatchLrNo!==void 0||xe.showDispatchPo!==void 0||xe.showDispatchGatePass!==void 0||xe.dispatchLrNo!==void 0||xe.dispatchPoNo!==void 0||xe.dispatchGatePass!==void 0;q({invoiceNumber:O.invoiceNumber,revision:O.revision,invoiceType:xe.invoiceType||"PROFORMA INVOICE",organisationName:O.organisationName,registeredAddress:O.registeredAddress,consigneeAddress:O.consigneeAddress,clientGstin:O.clientGstin||"",workOrderNo:X(O.workOrderNo)||"NIL",orderReferenceType:B,purchaseOrderNo:xe.purchaseOrderNo||(B==="po"?X(O.workOrderNo):""),dispatchDetails:O.dispatchDetails||"-",vehicleNo:xe.vehicleNo||(!ve&&O.dispatchDetails&&O.dispatchDetails!=="-"?O.dispatchDetails:""),showDispatchLrNo:xe.showDispatchLrNo??!1,showDispatchPo:xe.showDispatchPo??!1,showDispatchGatePass:xe.showDispatchGatePass??!1,dispatchLrNo:xe.dispatchLrNo||"",dispatchPoNo:xe.dispatchPoNo||"",dispatchGatePass:xe.dispatchGatePass||"",appliedTaxType:O.appliedTaxType||"igst",cgstRate:O.cgstRate||"9",sgstRate:O.sgstRate||"9",igstRate:O.igstRate||"18"})}},[O]),k.useEffect(()=>{R&&R.length>0&&ae(R.map(xe=>({id:xe.id,serialNo:xe.serialNo,description:xe.description,hsnCode:xe.hsnCode||"940610",quantity:Number(xe.quantity)||1,unit:xe.unit||"LS",ratePerUnit:Number(xe.ratePerUnit)||0,percentage:Number(xe.percentage)||0,amount:Number(xe.amount)||0,remarks:xe.remarks||""})))},[R]);const ge=k.useCallback(()=>{const xe=ee.reduce((H,je)=>H+(Number(je.amount)||0),0);let X=0,B=0,ve=0;v.appliedTaxType==="cgst_sgst"?(X=xe*(Number(v.cgstRate)/100),B=xe*(Number(v.sgstRate)/100)):ve=xe*(Number(v.igstRate)/100);const re=X+B+ve,D=xe+re;return{totalAmount:xe,cgstAmount:X,sgstAmount:B,igstAmount:ve,totalTax:re,grandTotal:D}},[ee,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=k.useCallback(()=>ee.filter(xe=>xe.description.trim()),[ee]),se=xe=>{const X=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],B=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(xe===0)return"Zero";const ve=Ne=>Ne===0?"":Ne<20?X[Ne]:Ne<100?B[Math.floor(Ne/10)]+(Ne%10!==0?" "+X[Ne%10]:""):X[Math.floor(Ne/100)]+" Hundred"+(Ne%100!==0?" "+ve(Ne%100):""),re=Ne=>{if(Ne===0)return"";const Te=Math.floor(Ne/1e7),$e=Math.floor(Ne%1e7/1e5),st=Math.floor(Ne%1e5/1e3),ct=Ne%1e3;let jt="";return Te>0&&(jt+=ve(Te)+" Crore "),$e>0&&(jt+=ve($e)+" Lakh "),st>0&&(jt+=ve(st)+" Thousand "),ct>0&&(jt+=ve(ct)),jt.trim()},D=Math.floor(xe),H=Math.round((xe-D)*100);let je=re(D)+" Rupees";return H>0&&(je+=" and "+ve(H)+" Paise"),je+=" Only",je},M=Dr({mutationFn:async()=>{const xe=De(),B=await(await wn("POST","/api/invoices",{projectId:Number(e),invoiceNumber:v.invoiceNumber,revision:v.revision,organisationName:v.organisationName,registeredAddress:v.registeredAddress,consigneeAddress:v.consigneeAddress,clientGstin:v.clientGstin,workOrderNo:Ce(),dispatchDetails:Ae(),appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(const ve of xe)await wn("POST",`/api/invoices/${B.id}/items`,{serialNo:ve.serialNo,description:ve.description,hsnCode:ve.hsnCode,quantity:String(ve.quantity),unit:ve.unit,ratePerUnit:String(ve.ratePerUnit),percentage:String(ve.percentage),amount:String(ve.amount),remarks:ve.remarks});return B},onSuccess:xe=>{Bn.invalidateQueries({queryKey:["/api/invoices"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"invoice-versions"]}),r(`/projects/${e}/invoice/${xe.id}`),a({title:"Invoice saved",description:"The invoice has been created successfully."})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to create invoice",variant:"destructive"})}}),L=Dr({mutationFn:async()=>{const xe=De();await wn("PUT",`/api/invoices/${O?.id}`,{invoiceNumber:v.invoiceNumber,revision:v.revision,organisationName:v.organisationName,registeredAddress:v.registeredAddress,consigneeAddress:v.consigneeAddress,clientGstin:v.clientGstin,workOrderNo:Ce(),dispatchDetails:Ae(),appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let X=R||[];if(!X.length){const B=await fetch(`/api/invoices/${O?.id}/items`,{credentials:"include"});B.ok&&(X=await B.json())}for(const B of X)await wn("DELETE",`/api/invoice-items/${B.id}`);for(const B of xe)await wn("POST",`/api/invoices/${O?.id}/items`,{serialNo:B.serialNo,description:B.description,hsnCode:B.hsnCode,quantity:String(B.quantity),unit:B.unit,ratePerUnit:String(B.ratePerUnit),percentage:String(B.percentage),amount:String(B.amount),remarks:B.remarks})},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/invoices"]}),Bn.invalidateQueries({queryKey:["/api/invoices",O?.id,"items"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"invoice-versions"]}),a({title:"Invoice updated",description:"The invoice has been updated successfully."})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to update invoice",variant:"destructive"})}}),ne=Dr({mutationFn:async()=>(await wn("POST",`/api/invoices/${O?.id}/duplicate`,{})).json(),onSuccess:xe=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"invoice-versions"]}),r(`/projects/${e}/invoice/${xe.id}`),a({title:"Invoice duplicated",description:`Created new version: ${xe.revision}`})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to duplicate invoice",variant:"destructive"})}}),me=Dr({mutationFn:async xe=>{await wn("DELETE",`/api/invoices/${xe}`,void 0)},onSuccess:()=>{if(Bn.invalidateQueries({queryKey:["/api/projects",e,"invoice-versions"]}),a({title:"Invoice deleted",description:"The invoice version has been deleted."}),u(!1),z&&z.length>1){const xe=z.filter(X=>X.id!==O?.id);xe.length>0?r(`/projects/${e}/invoice/${xe[0].id}`):r(`/projects/${e}/invoice`)}else r(`/projects/${e}/invoice`)},onError:xe=>{a({title:"Error",description:xe.message||"Failed to delete invoice",variant:"destructive"})}}),ye=()=>{O?L.mutate():M.mutate()},be=()=>{const xe=Math.max(...ee.map(X=>X.id),0)+1;ae([...ee,{id:xe,serialNo:ee.length+1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}])},Re=xe=>{if(ee.length>1){const X=ee.filter(B=>B.id!==xe);ae(X.map((B,ve)=>({...B,serialNo:ve+1})))}},Ie=(xe,X,B)=>{ae(ve=>ve.map(re=>{if(re.id===xe){const D={...re,[X]:B};return(X==="quantity"||X==="ratePerUnit")&&(D.amount=Number(D.quantity)*Number(D.ratePerUnit)),D}return re}))},Me=xe=>`${xe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ze=async xe=>{const X=xe?.save??!0,B=xe?.silent??!1,ve=xe?.returnDataUri??!1;try{const re=new un({orientation:"portrait",unit:"mm",format:"a4"}),D=210,H=297,je=15,Ne=D-je*2,Te=35,$e=30,st=fn=>fn*.2646,ct=st(80),jt=st(50),Pt=st(80),pr=st(10),yn=st(3),Gt=st(3),Ut="#eeb7b7",tn="#fff5f5";let Ge=Te+10,at=1;const Xe=fn=>fn.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),an=fn=>Xe(fn),sr=fn=>new Promise((In,Nn)=>{const Kt=new Image;Kt.crossOrigin="anonymous",Kt.onload=()=>{const Fn=document.createElement("canvas");Fn.width=Kt.width,Fn.height=Kt.height,Fn.getContext("2d")?.drawImage(Kt,0,0),In(Fn.toDataURL("image/png"))},Kt.onerror=Nn,Kt.src=fn});let gn=null,Jt=null,Dn=null;try{ue?.headerUrl&&(gn=await sr(ue.headerUrl)),ue?.footerUrl&&(Jt=await sr(ue.footerUrl)),ue?.stampUrl&&(Dn=await sr(ue.stampUrl))}catch(fn){console.warn("Failed to load branding images:",fn)}const ys=fn=>{gn&&re.addImage(gn,"PNG",0,0,D,Te),Jt&&re.addImage(Jt,"PNG",0,H-$e,D,$e),Dn&&re.addImage(Dn,"PNG",D-jt-ct,H-Pt-ct,ct,ct),re.setFontSize(8),re.setTextColor(128,128,128),re.text(`Page ${fn}`,D/2,H-8,{align:"center"})},ir=fn=>Ge+fn>H-$e-10?(re.addPage(),at++,ys(at),Ge=Te+10,!0):!1,Nr=(fn,In=12)=>{Ge+=4,ir(12),re.setFillColor("#d92134"),re.rect(je,Ge-3.5,4,5,"F"),re.setFont("helvetica","bold"),re.setFontSize(In),re.setTextColor("#1e3a5f"),re.text(fn,je+7,Ge),Ge+=5.5},xr=(fn,In,Nn=[])=>{const Kt=[32,63,32,63],Fn=5.8,vt=Gt,Ke=st(3),it=wt=>wt-3,Qe=(wt,Ot=0)=>it(wt)+Ke+2.5+Ot*3.2;ir(Fn+4),re.setFont("helvetica","normal"),re.setFontSize(8.5);let ut=0;const Lt=wt=>wt.forEach(([Ot,Nt])=>{const kt=re.splitTextToSize(Ot,Kt[0]-vt*2),Mt=re.splitTextToSize(Nt||"-",Kt[1]+Kt[2]+Kt[3]-vt*2),$t=Math.max(kt.length||1,Mt.length||1),Bt=Math.max(Fn,$t*3.2+1.2);if(ir(Bt+2),ut%2===0&&(re.setFillColor(245,245,245),re.rect(je,it(Ge),Ne,Bt,"F")),re.setDrawColor(Ut),re.rect(je,it(Ge),Ne,Bt,"S"),re.line(je+Kt[0],it(Ge),je+Kt[0],it(Ge)+Bt),re.setFont("helvetica","bold"),kt.forEach((Qt,bn)=>{re.text(Qt,je+vt,Qe(Ge,bn))}),Ot==="Dispatch Details"&&Nt){const Qt=Nt.split(",").map(ln=>ln.trim()).filter(Boolean),bn=je+Kt[0]+vt,Er=je+Kt[0]+Kt[1]+Kt[2]+Kt[3]-vt;let kn=bn,An=Qe(Ge,0);Qt.forEach((ln,E)=>{const oe=E<Qt.length-1?", ":"",he=ln.indexOf(" - "),_e=he>-1?ln.slice(0,he):ln,we=he>-1?ln.slice(he):"",Rt=re.getTextWidth(_e),Gn=re.getTextWidth(we+oe);kn+Rt+Gn>Er&&(kn=bn,An+=3.2),re.setFont("helvetica","bold"),re.text(_e,kn,An),kn+=Rt,re.setFont("helvetica","normal"),re.text(we+oe,kn,An),kn+=Gn})}else re.setFont("helvetica","normal"),Mt.forEach((Qt,bn)=>{re.text(Qt,je+Kt[0]+vt,Qe(Ge,bn))});Ge+=Bt,ut+=1});Lt(fn),In.forEach(wt=>{const[Ot,Nt]=wt,kt=re.splitTextToSize(Ot?.[0]||"",Kt[0]-vt*2),Mt=re.splitTextToSize(Ot?.[1]||"-",Kt[1]-vt*2),$t=re.splitTextToSize(Nt?.[0]||"",Kt[2]-vt*2),Bt=re.splitTextToSize(Nt?.[1]||"",Kt[3]-vt*2),Qt=Math.max(kt.length||1,Mt.length||1,$t.length||1,Bt.length||1),bn=Math.max(Fn,Qt*3.2+1.2);ir(bn+2),ut%2===0&&(re.setFillColor(245,245,245),re.rect(je,it(Ge),Ne,bn,"F")),re.setDrawColor(Ut),re.rect(je,it(Ge),Ne,bn,"S");let Er=je;for(let kn=0;kn<3;kn++)Er+=Kt[kn],re.line(Er,it(Ge),Er,it(Ge)+bn);re.setFont("helvetica","bold"),kt.forEach((kn,An)=>re.text(kn,je+vt,Qe(Ge,An))),$t.forEach((kn,An)=>re.text(kn,je+Kt[0]+Kt[1]+vt,Qe(Ge,An))),re.setFont("helvetica","normal"),Mt.forEach((kn,An)=>re.text(kn,je+Kt[0]+vt,Qe(Ge,An))),Bt.forEach((kn,An)=>re.text(kn,je+Kt[0]+Kt[1]+Kt[2]+vt,Qe(Ge,An))),Ge+=bn,ut+=1}),Lt(Nn)},on=fn=>{const In=[32,75,32,51],Nn=5.8,Kt=Gt,Fn=st(3),vt=it=>it-3,Ke=(it,Qe=0)=>vt(it)+Fn+2.5+Qe*3.2;ir(Nn+4),re.setFont("helvetica","normal"),re.setFontSize(8.5),fn.forEach((it,Qe)=>{const[ut,Lt]=it,wt=re.splitTextToSize(ut?.[0]||"",In[0]-Kt*2),Ot=re.splitTextToSize(ut?.[1]||"-",In[1]-Kt*2),Nt=re.splitTextToSize(Lt?.[0]||"",In[2]-Kt*2),kt=re.splitTextToSize(Lt?.[1]||"",In[3]-Kt*2),Mt=Math.max(wt.length||1,Ot.length||1,Nt.length||1,kt.length||1),$t=Math.max(Nn,Mt*3.2+1.2);ir($t+2),Qe%2===0&&(re.setFillColor(245,245,245),re.rect(je,vt(Ge),Ne,$t,"F")),re.setDrawColor(Ut),re.rect(je,vt(Ge),Ne,$t,"S");let Bt=je;for(let Qt=0;Qt<3;Qt++)Bt+=In[Qt],re.line(Bt,vt(Ge),Bt,vt(Ge)+$t);re.setFont("helvetica","bold"),wt.forEach((Qt,bn)=>re.text(Qt,je+Kt,Ke(Ge,bn))),Nt.forEach((Qt,bn)=>re.text(Qt,je+In[0]+In[1]+Kt,Ke(Ge,bn))),re.setFont("helvetica","normal"),Ot.forEach((Qt,bn)=>re.text(Qt,je+In[0]+Kt,Ke(Ge,bn))),kt.forEach((Qt,bn)=>re.text(Qt,je+In[0]+In[1]+In[2]+Kt,Ke(Ge,bn))),Ge+=$t})},As=(fn,In)=>{const Nn=[95,55,Ne-150],Kt=5.8,Fn=Gt;ir(Kt+6),re.setFillColor(tn),re.setDrawColor(Ut),re.setLineWidth(.2),re.rect(je,Ge-3.2,Ne,Kt,"FD"),re.setFont("helvetica","bold"),re.setFontSize(8.5),re.text("Total Amount In Words",je+Gt,Ge+.8),re.text("Details",je+Nn[0]+Gt,Ge+.8),re.text("Amount",je+Nn[0]+Nn[1]+Gt,Ge+.8),re.line(je+Nn[0],Ge-3.2,je+Nn[0],Ge-3.2+Kt),re.line(je+Nn[0]+Nn[1],Ge-3.2,je+Nn[0]+Nn[1],Ge-3.2+Kt),Ge+=Kt,re.setFont("helvetica","normal"),re.setFontSize(8.5);const vt=In.map(ut=>{const Lt=re.splitTextToSize(ut.detail,Nn[1]-Fn*2),wt=re.splitTextToSize(ut.value,Nn[2]-Fn*2),Ot=Math.max(Lt.length||1,wt.length||1),Nt=Math.max(Kt,Ot*3.2+1.2);return{detailLines:Lt,valueLines:wt,rowHeight:Nt}}),Ke=vt.reduce((ut,Lt)=>ut+Lt.rowHeight,0);ir(Ke+2),re.setDrawColor(Ut),re.rect(je,Ge-3.2,Nn[0],Ke,"S");const it=re.splitTextToSize(fn,Nn[0]-Fn*3);re.setFont("helvetica","bold"),it.forEach((ut,Lt)=>{re.text(ut,je+Fn,Ge+.1+yn+Lt*3.2)});let Qe=Ge;vt.forEach((ut,Lt)=>{Lt%2===0&&(re.setFillColor(245,245,245),re.rect(je+Nn[0],Qe-3.2,Nn[1]+Nn[2],ut.rowHeight,"F")),re.setDrawColor(Ut),re.rect(je+Nn[0],Qe-3.2,Nn[1]+Nn[2],ut.rowHeight,"S"),re.line(je+Nn[0]+Nn[1],Qe-3.2,je+Nn[0]+Nn[1],Qe-3.2+ut.rowHeight),(In[Lt]?.detail||"").trim().toLowerCase()==="grand total"?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),ut.detailLines.forEach((wt,Ot)=>{re.text(wt,je+Nn[0]+Fn,Qe+.1+yn+Ot*3.2)}),(In[Lt]?.detail||"").trim().toLowerCase()==="grand total"?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),ut.valueLines.forEach((wt,Ot)=>{re.text(wt,je+Nn[0]+Nn[1]+Fn,Qe+.1+yn+Ot*3.2)}),Qe+=ut.rowHeight}),Ge=Qe},Us=v.invoiceType||"PROFORMA INVOICE",fs=Us==="TAX INVOICE"?"T.I. No":"P.I No",Ps=Us==="TAX INVOICE"?"TI":"PI",lr=new Date,Fr=lr.getMonth()>=3?`${lr.getFullYear()}-${String(lr.getFullYear()+1).slice(-2)}`:`${lr.getFullYear()-1}-${String(lr.getFullYear()).slice(-2)}`,yr=String(te?.id||0).padStart(3,"0"),ks=`RNS/${Fr}/RNS-${Ps}-${yr}`,Jr=[["GSTIN",v.clientGstin||""]],Tr=[];v.orderReferenceType==="po"?Jr.push(["P.O. No.",v.purchaseOrderNo||"-"]):Jr.push(["W.O. No.",v.workOrderNo||"-"]),v.vehicleNo.trim()&&Tr.push(`Vehicle No. - ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&Tr.push(`L.R. No. - ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&Tr.push(`D.C No. - ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&Tr.push(`Gate Pass - ${v.dispatchGatePass||"-"}`);const fi=Tr.length?Tr.join(",    "):"-",es=[];for(let fn=0;fn<Jr.length;fn+=2)es.push([Jr[fn],Jr[fn+1]]);ys(at),re.setFontSize(16),re.setFont("helvetica","bold"),re.setTextColor("#da2032"),re.text(Us,D/2,Ge,{align:"center"}),Ge+=10,re.setFont("helvetica","normal"),re.setTextColor(0,0,0),re.setFontSize(9),re.text(`CIN: ${ue?.cin||""}`,je,Ge),re.text(`Company GSTIN: ${ue?.companyGstin||"07AAPCR3026H1ZA"}`,D/2-20,Ge),re.text(`${fs}: ${ks}`,D-je-50,Ge),Ge+=5,re.text(`Email: ${ue?.email||"sales@reviranexgen.com"}`,D/2-20,Ge),re.text(`Date: ${new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,D-je-50,Ge),Ge+=8,Nr("Client Details",11),xr([["Organisation Name",v.organisationName],["Registered Address",v.registeredAddress],["Consignee Address",v.consigneeAddress]],es,[["Dispatch Details",fi]]),Ge+=pr;const Ts=["Sr.No.","Description of Goods","HSN Code","Qty.","Unit","Rate","%age","Basic Amount (INR)"],as=[12,55,20,13,13,20,14,43],zs=ee.filter(fn=>fn.description.trim()).map(fn=>[String(fn.serialNo),fn.description,fn.hsnCode,String(fn.quantity),fn.unit||"LS",Xe(Number(fn.ratePerUnit)||0),`${Number(fn.percentage)||0}%`,Xe(Number(fn.amount)||0)]);ir(15),re.setFillColor(tn),re.setDrawColor(Ut),re.setLineWidth(.2),re.rect(je,Ge-3,Ne,5.8,"FD"),re.setFont("helvetica","bold"),re.setFontSize(8);let mr=je;Ts.forEach((fn,In)=>{re.line(mr,Ge-3,mr,Ge+2.8),re.text(fn,mr+Gt,Ge+.8),mr+=as[In]}),re.line(mr,Ge-3,mr,Ge+2.8),Ge+=5.8,re.setFont("helvetica","normal"),zs.forEach((fn,In)=>{const Nn=fn.map((Ke,it)=>re.splitTextToSize(Ke,as[it]-Gt*2)),Kt=Math.max(...Nn.map(Ke=>Ke.length)),Fn=Math.max(5.8,Kt*3.2+1.2);ir(Fn+2),In%2===0&&(re.setFillColor(245,245,245),re.rect(je,Ge-3,Ne,Fn,"F")),re.setDrawColor(Ut),re.rect(je,Ge-3,Ne,Fn,"S");let vt=je;Nn.forEach((Ke,it)=>{re.line(vt,Ge-3,vt,Ge-3+Fn),it===0?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),Ke.forEach((Qe,ut)=>{re.text(Qe,vt+Gt,Ge+.1+yn+ut*3.2)}),vt+=as[it]}),re.line(vt,Ge-3,vt,Ge-3+Fn),Ge+=Fn}),Ge+=pr;const hs=[{detail:"Total Amount (INR)",value:an(ge.totalAmount)},{detail:"Total Amount before Tax",value:an(ge.totalAmount)},{detail:"(1) Add: CGST",value:an(ge.cgstAmount)},{detail:"(2) Add: SGST",value:an(ge.sgstAmount)},{detail:"(3) Add: IGST",value:an(ge.igstAmount)},{detail:"Total GST",value:an(ge.totalTax)},{detail:"Grand Total",value:an(ge.grandTotal)}];As(se(ge.grandTotal),hs),Ge+=pr,Nr("Bank Details",11),on([[["Account Name",ue?.entityName||"Revira NexGen Structures Pvt. Ltd"],["Account Number","73361900002657"]],[["Address",ue?.headOfficeAddress||"28, E2 Block, Shivram Park Nangloi Delhi - 110041"],["IFSC Code","YESB0000733"]]]),Ge+=pr,ir(20),re.text(`For, ${ue?.entityName||"Revira NexGen Structures Pvt. Ltd"}`,D-je-60,Ge),Ge+=18,re.text("Authorised Signatory",D-je-50,Ge);const Xs=new Date,Qi=`${String(Xs.getDate()).padStart(2,"0")}${String(Xs.getMonth()+1).padStart(2,"0")}${Xs.getFullYear()}`,qi=(ue?.entityName||"RNS").split(" ").map(fn=>fn[0]).join(""),Un=`${Us==="TAX INVOICE"?"TAX_INVOICE":"PROFORMA_INVOICE"}_${Qi}_${qi}_${v.revision}.pdf`,bi=ve?re.output("datauristring",{filename:Un}):void 0;return X&&re.save(Un),B||a({title:X?"PDF exported":"PDF generated",description:X?`Invoice saved as ${Un}`:"Invoice PDF is ready."}),{fileName:Un,dataUri:bi}}catch(re){return console.error("PDF export error:",re),B||a({title:"Export failed",description:"Failed to export invoice PDF. Please try again.",variant:"destructive"}),null}},ft=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,mt=()=>{if(!O?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}P({to:Q?.emailAddress||"",subject:`Invoice ${v.invoiceNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${ft}`}),f(!0)},Ft=async()=>{if(!O?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}const xe=S.to.split(/[,\s;]+/).map(B=>B.trim()).filter(Boolean);if(xe.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const X=await Ze({save:!1,silent:!0,returnDataUri:!0});if(!X?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for email.",variant:"destructive"});return}try{const B=X.dataUri.split(",")[1]||"",re=await(await wn("POST",`/api/invoices/${O.id}/send-email`,{to:xe,subject:S.subject.trim(),message:S.message.trim(),fileName:X.fileName,pdfBase64:B})).json(),D=Array.isArray(re?.accepted)?re.accepted:[],H=D.length>0?D.join(", "):xe.join(", ");a({title:"Email queued",description:`SMTP accepted: ${H}.`}),f(!1)}catch(B){a({title:"Send failed",description:B?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},le=()=>{if(!O?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const xe=(Q?.mobileNumber||"").replace(/\D/g,""),X=xe.length===10?`91${xe}`:xe;F({mobile:X,message:`Please find the attached file for details

${ft}`}),j(!0)},gt=async()=>{if(!O?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const xe=_.mobile.split(/[,\s;]+/).map(B=>B.replace(/\D/g,"")).filter(Boolean);if(xe.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}I(!0);const X=await Ze({save:!1,silent:!0,returnDataUri:!0});if(!X?.dataUri){I(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for WhatsApp send.",variant:"destructive"});return}try{const B=X.dataUri.split(",")[1]||"";await wn("POST",`/api/invoices/${O.id}/send-whatsapp`,{to:xe,message:_.message.trim(),fileName:X.fileName,pdfBase64:B}),a({title:"WhatsApp sent",description:`Invoice sent to ${xe.join(", ")}.`}),j(!1)}catch(B){a({title:"Send failed",description:B?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{I(!1)}};return!te||!Q||!W?s.jsx(qs,{user:W,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(qs,{user:W,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>r("/projects"),"data-testid":"button-back",children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:te.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(nu,{className:"h-4 w-4"}),te.location]})]})]}),s.jsxs(qe,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-invoice",children:[s.jsx(Aa,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:O?.revision||v.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(qm,{className:"h-4 w-4"})}),O&&s.jsx(qe,{variant:"outline",size:"icon",onClick:()=>ne.mutate(),disabled:ne.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:s.jsx(Ud,{className:"w-4 h-4"})}),s.jsxs(qe,{onClick:Ze,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Dh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(qe,{variant:"outline",size:"icon",onClick:mt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-invoice",title:"Send invoice by email",children:s.jsx(fu,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"outline",size:"icon",onClick:le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-invoice",title:"Send invoice on WhatsApp",children:s.jsx(Um,{className:"w-4 h-4"})}),s.jsxs(qe,{variant:"outline",onClick:ye,disabled:M.isPending||L.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-invoice",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),M.isPending||L.isPending?"Saving...":"Save Changes"]}),O&&z&&z.length>1&&s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this invoice (${O.revision})?`)&&me.mutate(O.id)},"data-testid":"button-delete-invoice",children:s.jsx(vr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsxs(is,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Aa,{className:"w-5 h-5"}),"INVOICE DETAILS"]})}),s.jsxs(_n,{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Invoice Type"}),s.jsxs(Rl,{value:v.invoiceType,onValueChange:xe=>q({...v,invoiceType:xe}),children:[s.jsx(Yo,{"data-testid":"select-invoice-type",children:s.jsx(Dl,{})}),s.jsxs(Xo,{children:[s.jsx(ha,{value:"PROFORMA INVOICE",children:"PROFORMA INVOICE"}),s.jsx(ha,{value:"TAX INVOICE",children:"TAX INVOICE"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Invoice No."}),s.jsx(et,{value:v.invoiceNumber,onChange:xe=>q({...v,invoiceNumber:xe.target.value}),"data-testid":"input-invoice-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(et,{value:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),disabled:!0})]})]})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"CLIENT DETAILS"})}),s.jsxs(_n,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Organisation Name"}),s.jsx(et,{value:v.organisationName,onChange:xe=>q({...v,organisationName:xe.target.value}),"data-testid":"input-organisation-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Client GSTIN"}),s.jsx(et,{value:v.clientGstin,onChange:xe=>q({...v,clientGstin:xe.target.value}),"data-testid":"input-client-gstin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Registered Address"}),s.jsx(et,{value:v.registeredAddress,onChange:xe=>q({...v,registeredAddress:xe.target.value}),"data-testid":"input-registered-address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Consignee Address"}),s.jsx(Rr,{value:v.consigneeAddress,onChange:xe=>q({...v,consigneeAddress:xe.target.value}),rows:2,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Order Reference Selection"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Reference Type"}),s.jsxs(Rl,{value:v.orderReferenceType,onValueChange:xe=>q({...v,orderReferenceType:xe}),children:[s.jsx(Yo,{"data-testid":"select-order-reference-type",children:s.jsx(Dl,{})}),s.jsxs(Xo,{children:[s.jsx(ha,{value:"wo",children:"W.O. No."}),s.jsx(ha,{value:"po",children:"P.O. No."})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:v.orderReferenceType==="po"?"P.O. No.":"W.O. No."}),s.jsx(et,{value:v.orderReferenceType==="po"?v.purchaseOrderNo:v.workOrderNo,onChange:xe=>q({...v,...v.orderReferenceType==="po"?{purchaseOrderNo:xe.target.value}:{workOrderNo:xe.target.value}}),"data-testid":v.orderReferenceType==="po"?"input-po-number":"input-work-order"})]})]})]}),s.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Dispatch Details"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(et,{value:v.vehicleNo,onChange:xe=>q({...v,vehicleNo:xe.target.value}),"data-testid":"input-vehicle-no"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ih,{checked:v.showDispatchLrNo,onCheckedChange:xe=>q({...v,showDispatchLrNo:xe===!0}),"data-testid":"checkbox-dispatch-lr"}),"L.R. No."]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ih,{checked:v.showDispatchPo,onCheckedChange:xe=>q({...v,showDispatchPo:xe===!0}),"data-testid":"checkbox-dispatch-po"}),"D.C No."]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ih,{checked:v.showDispatchGatePass,onCheckedChange:xe=>q({...v,showDispatchGatePass:xe===!0}),"data-testid":"checkbox-dispatch-gate-pass"}),"Gate Pass"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.showDispatchLrNo&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"L.R. No."}),s.jsx(et,{value:v.dispatchLrNo,onChange:xe=>q({...v,dispatchLrNo:xe.target.value}),"data-testid":"input-dispatch-lr"})]}),v.showDispatchPo&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"D.C No."}),s.jsx(et,{value:v.dispatchPoNo,onChange:xe=>q({...v,dispatchPoNo:xe.target.value}),"data-testid":"input-dispatch-po"})]}),v.showDispatchGatePass&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Gate Pass"}),s.jsx(et,{value:v.dispatchGatePass,onChange:xe=>q({...v,dispatchGatePass:xe.target.value}),"data-testid":"input-dispatch-gate-pass"})]})]})]})]})]}),s.jsxs(Cn,{children:[s.jsxs(ss,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[s.jsx(is,{className:"text-lg text-slate-700",children:"INVOICE ITEMS"}),s.jsxs(qe,{size:"sm",onClick:be,"data-testid":"button-add-item",children:[s.jsx(_a,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),s.jsx(_n,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"Sr."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600",children:"Description"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"HSN Code"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Qty"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Unit"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"Rate"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"Amount"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsx("tbody",{children:ee.map(xe=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(et,{value:xe.serialNo,onChange:X=>Ie(xe.id,"serialNo",parseInt(X.target.value)||1),className:"w-14 text-center","data-testid":`input-serial-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Rr,{value:xe.description,onChange:X=>Ie(xe.id,"description",X.target.value),rows:2,placeholder:"Description","data-testid":`input-description-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:xe.hsnCode,onChange:X=>Ie(xe.id,"hsnCode",X.target.value),"data-testid":`input-hsn-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:xe.quantity,onChange:X=>Ie(xe.id,"quantity",parseFloat(X.target.value)||0),"data-testid":`input-qty-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:xe.unit,onChange:X=>Ie(xe.id,"unit",X.target.value),"data-testid":`input-unit-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:xe.ratePerUnit,onChange:X=>Ie(xe.id,"ratePerUnit",parseFloat(X.target.value)||0),"data-testid":`input-rate-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:xe.amount,onChange:X=>Ie(xe.id,"amount",parseFloat(X.target.value)||0),"data-testid":`input-amount-${xe.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>Re(xe.id),disabled:ee.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${xe.id}`,children:s.jsx(df,{className:"w-4 h-4"})})})]},xe.id))})]})})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"TAX & TOTALS"})}),s.jsx(_n,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Tax Type"}),s.jsxs(Rl,{value:v.appliedTaxType,onValueChange:xe=>q({...v,appliedTaxType:xe}),children:[s.jsx(Yo,{"data-testid":"select-tax-type",children:s.jsx(Dl,{})}),s.jsxs(Xo,{children:[s.jsx(ha,{value:"igst",children:"IGST (Interstate)"}),s.jsx(ha,{value:"cgst_sgst",children:"CGST + SGST (Intrastate)"})]})]})]}),v.appliedTaxType==="cgst_sgst"?s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CGST Rate (%)"}),s.jsx(et,{type:"number",value:v.cgstRate,onChange:xe=>q({...v,cgstRate:xe.target.value}),"data-testid":"input-cgst-rate"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"SGST Rate (%)"}),s.jsx(et,{type:"number",value:v.sgstRate,onChange:xe=>q({...v,sgstRate:xe.target.value}),"data-testid":"input-sgst-rate"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"IGST Rate (%)"}),s.jsx(et,{type:"number",value:v.igstRate,onChange:xe=>q({...v,igstRate:xe.target.value}),"data-testid":"input-igst-rate"})]})]}),s.jsxs("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Total Amount"}),s.jsx("span",{className:"font-medium",children:Me(ge.totalAmount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Amount before Tax"}),s.jsx("span",{className:"font-medium",children:Me(ge.totalAmount)})]}),v.appliedTaxType==="cgst_sgst"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"CGST"}),s.jsx("span",{children:Me(ge.cgstAmount)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"SGST"}),s.jsx("span",{children:Me(ge.sgstAmount)})]})]}):s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"IGST"}),s.jsx("span",{children:Me(ge.igstAmount)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-slate-600",children:"Total Tax"}),s.jsx("span",{className:"font-medium",children:Me(ge.totalTax)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2 text-lg",children:[s.jsx("span",{className:"font-bold text-slate-700",children:"Grand Total"}),s.jsx("span",{className:"font-bold text-blue-600",children:Me(ge.grandTotal)})]}),s.jsx("div",{className:"text-sm text-slate-500 mt-2",children:se(ge.grandTotal)})]})]})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"BANK DETAILS"})}),s.jsx(_n,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Account Name:"}),s.jsx("span",{className:"ml-2 font-medium",children:ue?.entityName||"Revira NexGen Structures Pvt. Ltd"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Account Number:"}),s.jsx("span",{className:"ml-2 font-medium",children:"073361900002657"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Bank Address:"}),s.jsx("span",{className:"ml-2 font-medium",children:ue?.headOfficeAddress||"28 E2 Block, Shivram Park, Nangloi, Delhi 41"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"IFSC Code:"}),s.jsx("span",{className:"ml-2 font-medium",children:"YESB0000733"})]})]})})]})]})]}),s.jsx(xi,{open:o,onOpenChange:u,children:s.jsxs(ci,{className:"max-w-md",children:[s.jsx(ui,{children:s.jsx(di,{children:"Invoice Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:z?.map(xe=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${xe.id===O?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/projects/${e}/invoice/${xe.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:xe.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(xe.createdAt).toLocaleDateString()})]}),z&&z.length>1&&s.jsx(qe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:X=>{X.stopPropagation(),confirm(`Are you sure you want to delete version ${xe.revision}?`)&&me.mutate(xe.id)},"data-testid":`button-delete-version-${xe.id}`,children:s.jsx(vr,{className:"w-4 h-4"})})]})},xe.id))})]})}),s.jsx(xi,{open:c,onOpenChange:f,children:s.jsxs(ci,{className:"sm:max-w-xl",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Invoice by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(et,{value:S.to,onChange:xe=>P(X=>({...X,to:xe.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(et,{value:S.subject,onChange:xe=>P(X=>({...X,subject:xe.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Rr,{value:S.message,onChange:xe=>P(X=>({...X,message:xe.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-invoice"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-invoice",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:Ft,disabled:p,"data-testid":"button-send-email-submit-invoice",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(xi,{open:b,onOpenChange:j,children:s.jsxs(ci,{className:"sm:max-w-lg",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Invoice on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(et,{value:_.mobile,onChange:xe=>F(X=>({...X,mobile:xe.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Rr,{value:_.message,onChange:xe=>F(X=>({...X,message:xe.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-invoice"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-invoice",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:gt,disabled:y,"data-testid":"button-send-whatsapp-submit-invoice",children:y?"Sending...":"Submit"})]})]})]})})]})}function k5(){const t=Xu(),e=t.id,n=t.gatePassId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,I]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,F]=k.useState({mobile:"",message:""}),[v,q]=k.useState({gatePassNumber:"",revision:"R-001",gatePassType:"GATE PASS",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),ee=X=>{const B=X.split(/\s+/).map(ve=>ve.trim()).filter(Boolean);return B.length?B.map(ve=>ve[0]).join("").toUpperCase():"PROJECT"},ae=X=>{const B=String(X.getDate()).padStart(2,"0"),ve=String(X.getMonth()+1).padStart(2,"0"),re=String(X.getFullYear()).slice(-2);return`${B}-${ve}-${re}`},[W,te]=k.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:Q}=Ea(),{data:ue}=Ln({queryKey:["/api/projects",e],queryFn:async()=>{const X=await fetch(`/api/projects/${e}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch project");return X.json()},enabled:!!e}),{data:O}=Ln({queryKey:["/api/clients",ue?.clientId],queryFn:async()=>{const X=await fetch(`/api/clients/${ue?.clientId}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch client");return X.json()},enabled:!!ue?.clientId}),{data:R}=Ln({queryKey:["/api/branding"],enabled:!!Q}),{data:z}=Ln({queryKey:["/api/gate-passes",n],queryFn:async()=>{if(n){const B=await fetch(`/api/gate-passes/${n}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch gate pass");return B.json()}const X=await fetch(`/api/projects/${e}/gate-pass`,{credentials:"include"});if(!X.ok){if(X.status===404)return null;throw new Error("Failed to fetch gate pass")}return X.json()},enabled:!!e}),{data:Y}=Ln({queryKey:["/api/gate-passes",z?.id,"items"],queryFn:async()=>{const X=await fetch(`/api/gate-passes/${z?.id}/items`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch items");return X.json()},enabled:!!z?.id}),{data:Ce}=Ln({queryKey:["/api/projects",e,"gate-pass-versions"],queryFn:async()=>{const X=await fetch(`/api/projects/${e}/gate-pass-versions`,{credentials:"include"});return X.ok?X.json():[]},enabled:!!e}),Ae=X=>{if(!X)return{};try{const B=JSON.parse(X);return B&&typeof B=="object"?B:{}}catch{return{}}};k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),k.useCallback(()=>{const X=[];return v.vehicleNo.trim()&&X.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&X.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&X.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&X.push(`Gate Pass: ${v.dispatchGatePass||"-"}`),X.length?X.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]);const Pe=k.useCallback(()=>{const X={gatePassType:v.gatePassType,issueNo:v.issueNo,issueDate:v.issueDate,revNo:v.revNo,revDate:v.revDate,consigneeName:v.consigneeName,consigneeAddressText:v.consigneeAddressText,modeOfTransport:v.modeOfTransport,vehicleNumber:v.vehicleNumber,transportVehicle:v.transportVehicle,contactNo:v.contactNo,contactPerson:v.contactPerson,remarkText:v.remarkText,storeKeeperSignature:v.storeKeeperSignature,qcEnggSignature:v.qcEnggSignature,storeInchargeSignature:v.storeInchargeSignature,plantHeadSignature:v.plantHeadSignature,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(X)},[v]);k.useEffect(()=>{if(ue&&O&&!z){const X=new Date,B=ee(ue.projectName),ve=ae(X);q(re=>({...re,gatePassNumber:`RNS/${B}/${ve}/RNS-GT-002`,issueDate:X.toISOString().split("T")[0],revDate:X.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:O.name,registeredAddress:O.location,consigneeAddress:`${O.name}
${O.location}`,clientGstin:O.gstNo||""}))}},[ue,O,z]),k.useEffect(()=>{if(z){const X=Ae(z.contentSections),B=je=>(je||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),ve=X.orderReferenceType||(X.showPurchaseOrderNo?"po":"wo"),re=X.vehicleNo!==void 0||X.showDispatchLrNo!==void 0||X.showDispatchPo!==void 0||X.showDispatchGatePass!==void 0||X.dispatchLrNo!==void 0||X.dispatchPoNo!==void 0||X.dispatchGatePass!==void 0,D=X.transportVehicle||z.dispatchDetails||"",H=D.includes("-")?D.split("-").map(je=>je.trim()):[];q({gatePassNumber:z.gatePassNumber,revision:z.revision,gatePassType:X.gatePassType||"GATE PASS",issueNo:X.issueNo||"001",issueDate:X.issueDate||"",revNo:X.revNo||"00",revDate:X.revDate||"",consigneeName:X.consigneeName||z.organisationName||"",consigneeAddressText:X.consigneeAddressText||z.registeredAddress||"",modeOfTransport:X.modeOfTransport||H[0]||"By Road",vehicleNumber:X.vehicleNumber||H[1]||"",transportVehicle:X.transportVehicle||X.vehicleNo||z.dispatchDetails||"",contactNo:X.contactNo||"",contactPerson:X.contactPerson||"",remarkText:X.remarkText||"",storeKeeperSignature:X.storeKeeperSignature||"",qcEnggSignature:X.qcEnggSignature||"",storeInchargeSignature:X.storeInchargeSignature||"",plantHeadSignature:X.plantHeadSignature||"",organisationName:z.organisationName,registeredAddress:z.registeredAddress,consigneeAddress:z.consigneeAddress,clientGstin:z.clientGstin||"",workOrderNo:B(z.workOrderNo)||"NIL",orderReferenceType:ve,purchaseOrderNo:X.purchaseOrderNo||(ve==="po"?B(z.workOrderNo):""),dispatchDetails:z.dispatchDetails||"-",vehicleNo:X.vehicleNo||(!re&&z.dispatchDetails&&z.dispatchDetails!=="-"?z.dispatchDetails:""),showDispatchLrNo:X.showDispatchLrNo??!1,showDispatchPo:X.showDispatchPo??!1,showDispatchGatePass:X.showDispatchGatePass??!1,dispatchLrNo:X.dispatchLrNo||"",dispatchPoNo:X.dispatchPoNo||"",dispatchGatePass:X.dispatchGatePass||"",appliedTaxType:z.appliedTaxType||"igst",cgstRate:z.cgstRate||"9",sgstRate:z.sgstRate||"9",igstRate:z.igstRate||"18"})}},[z]),k.useEffect(()=>{Y&&Y.length>0&&te(Y.map((X,B)=>({id:X.id,serialNo:X.serialNo>0?X.serialNo:B+1,partMark:X.hsnCode||"",materialDescription:X.description||"",materialSize:X.ratePerUnit&&X.ratePerUnit!=="0"?X.ratePerUnit:"-",quantity:Number(X.quantity)||0,asslyPartSl:X.unit||"",approxValue:X.amount&&X.amount!=="0"?X.amount:"-",remarks:X.remarks||""})))},[Y]);const ge=k.useCallback(()=>{const X=W.reduce((je,Ne)=>{const Te=Number(String(Ne.approxValue).replace(/,/g,""));return je+(Number.isFinite(Te)?Te:0)},0);let B=0,ve=0,re=0;v.appliedTaxType==="cgst_sgst"?(B=X*(Number(v.cgstRate)/100),ve=X*(Number(v.sgstRate)/100)):re=X*(Number(v.igstRate)/100);const D=B+ve+re,H=X+D;return{totalAmount:X,cgstAmount:B,sgstAmount:ve,igstAmount:re,totalTax:D,grandTotal:H}},[W,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=(X,B="0")=>{const ve=Number(String(X??"").replace(/,/g,"").trim());return Number.isFinite(ve)?String(ve):B},se=(X,B)=>{const ve=R?.[B]||"";q(re=>re[X]?{...re,[X]:""}:ve?{...re,[X]:ve}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),re))},M=k.useCallback(()=>W.slice(0,5).filter(X=>X.partMark.trim()||X.materialDescription.trim()),[W]),L=Dr({mutationFn:async()=>{const X=M(),ve=await(await wn("POST","/api/gate-passes",{projectId:Number(e),gatePassNumber:v.gatePassNumber,revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(let re=0;re<X.length;re++){const D=X[re];await wn("POST",`/api/gate-passes/${ve.id}/items`,{serialNo:D.serialNo>0?D.serialNo:re+1,description:D.materialDescription,hsnCode:D.partMark,quantity:De(D.quantity),unit:D.asslyPartSl,ratePerUnit:De(D.materialSize,"0"),percentage:"0",amount:De(D.approxValue,"0"),remarks:D.remarks})}return ve},onSuccess:X=>{Bn.invalidateQueries({queryKey:["/api/gate-passes"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"gate-pass-versions"]}),r(`/projects/${e}/gate-pass/${X.id}`),a({title:"Gate Pass saved",description:"The gate pass has been created successfully."})},onError:X=>{a({title:"Error",description:X.message||"Failed to create gate pass",variant:"destructive"})}}),ne=Dr({mutationFn:async()=>{const X=M();await wn("PUT",`/api/gate-passes/${z?.id}`,{gatePassNumber:v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002",revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let B=Y||[];if(!B.length){const ve=await fetch(`/api/gate-passes/${z?.id}/items`,{credentials:"include"});ve.ok&&(B=await ve.json())}for(const ve of B)await wn("DELETE",`/api/gate-pass-items/${ve.id}`);for(let ve=0;ve<X.length;ve++){const re=X[ve];await wn("POST",`/api/gate-passes/${z?.id}/items`,{serialNo:re.serialNo>0?re.serialNo:ve+1,description:re.materialDescription,hsnCode:re.partMark,quantity:De(re.quantity),unit:re.asslyPartSl,ratePerUnit:De(re.materialSize,"0"),percentage:"0",amount:De(re.approxValue,"0"),remarks:re.remarks})}},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/gate-passes"]}),Bn.invalidateQueries({queryKey:["/api/gate-passes",z?.id,"items"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass updated",description:"The gate pass has been updated successfully."})},onError:X=>{a({title:"Error",description:X.message||"Failed to update gate pass",variant:"destructive"})}}),me=Dr({mutationFn:async()=>(await wn("POST",`/api/gate-passes/${z?.id}/duplicate`,{})).json(),onSuccess:X=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"gate-pass-versions"]}),r(`/projects/${e}/gate-pass/${X.id}`),a({title:"Gate Pass duplicated",description:`Created new version: ${X.revision}`})},onError:X=>{a({title:"Error",description:X.message||"Failed to duplicate gate pass",variant:"destructive"})}}),ye=Dr({mutationFn:async X=>{await wn("DELETE",`/api/gate-passes/${X}`,void 0)},onSuccess:()=>{if(Bn.invalidateQueries({queryKey:["/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass deleted",description:"The gate pass version has been deleted."}),u(!1),Ce&&Ce.length>1){const X=Ce.filter(B=>B.id!==z?.id);X.length>0?r(`/projects/${e}/gate-pass/${X[0].id}`):r(`/projects/${e}/gate-pass`)}else r(`/projects/${e}/gate-pass`)},onError:X=>{a({title:"Error",description:X.message||"Failed to delete gate pass",variant:"destructive"})}}),be=()=>{z?ne.mutate():L.mutate()},Re=()=>{const X=Math.max(...W.map(B=>B.id),0)+1;te([...W,{id:X,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},Ie=X=>{if(W.length>1){const B=W.filter(ve=>ve.id!==X);te(B.map((ve,re)=>({...ve,serialNo:re+1})))}},Me=(X,B,ve)=>{te(re=>re.map(D=>D.id===X?{...D,[B]:ve}:D))},Ze=()=>W.reduce((X,B)=>{const ve=Number(String(B.approxValue||"").replace(/,/g,"").trim());return X+(Number.isFinite(ve)?ve:0)},0),ft=async X=>{const B=X?.save??!0,ve=X?.silent??!1,re=X?.returnDataUri??!1;try{const D=new un({orientation:"portrait",unit:"mm",format:"a4"}),H=210,je=297,Ne=15,Te=H-Ne*2,$e=35,st=30,ct=vt=>vt*.2646,jt=ct(80),Pt=ct(50),pr=ct(80),yn=ct(10),Gt=ct(3),Ut=ct(3),tn="#eeb7b7",Ge="#fff5f5";let at=$e+10,Xe=1;const an=vt=>vt.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),sr=vt=>an(vt),gn=vt=>new Promise((Ke,it)=>{const Qe=new Image;Qe.crossOrigin="anonymous",Qe.onload=()=>{const ut=document.createElement("canvas");ut.width=Qe.width,ut.height=Qe.height,ut.getContext("2d")?.drawImage(Qe,0,0),Ke(ut.toDataURL("image/png"))},Qe.onerror=it,Qe.src=vt});let Jt=null,Dn=null,ys=null;try{R?.headerUrl&&(Jt=await gn(R.headerUrl)),R?.footerUrl&&(Dn=await gn(R.footerUrl)),R?.stampUrl&&(ys=await gn(R.stampUrl))}catch(vt){console.warn("Failed to load branding images:",vt)}const ir=vt=>{Jt&&D.addImage(Jt,"PNG",0,0,H,$e),Dn&&D.addImage(Dn,"PNG",0,je-st,H,st),ys&&D.addImage(ys,"PNG",H-Pt-jt,je-pr-jt,jt,jt),D.setFontSize(8),D.setTextColor(128,128,128),D.text(`Page ${vt}`,H/2,je-8,{align:"center"})},Nr=vt=>at+vt>je-st-10?(D.addPage(),Xe++,ir(Xe),at=$e+10,!0):!1,xr=(vt,Ke=12)=>{at+=4,Nr(12),D.setFillColor("#d92134"),D.rect(Ne,at-3.5,4,5,"F"),D.setFont("helvetica","bold"),D.setFontSize(Ke),D.setTextColor("#1e3a5f"),D.text(vt,Ne+7,at),at+=5.5},on=(vt,Ke,it=[])=>{const Qe=[38,57,38,57],ut=5.8,Lt=Ut,wt=ct(3),Ot=$t=>$t-3,Nt=($t,Bt=0)=>Ot($t)+wt+2.5+Bt*3.2;Nr(ut+4),D.setFont("helvetica","normal"),D.setFontSize(8.5);let kt=0;const Mt=$t=>$t.forEach(([Bt,Qt])=>{const bn=D.splitTextToSize(Bt,Qe[0]-Lt*2),Er=D.splitTextToSize(Qt||"-",Qe[1]+Qe[2]+Qe[3]-Lt*2),kn=Math.max(bn.length||1,Er.length||1),An=Math.max(ut,kn*3.2+1.2);if(Nr(An+2),kt%2===0&&(D.setFillColor(245,245,245),D.rect(Ne,Ot(at),Te,An,"F")),D.setDrawColor(tn),D.rect(Ne,Ot(at),Te,An,"S"),D.line(Ne+Qe[0],Ot(at),Ne+Qe[0],Ot(at)+An),D.setFont("helvetica","bold"),bn.forEach((ln,E)=>{D.text(ln,Ne+Lt,Nt(at,E))}),Bt==="Dispatch Details"&&Qt){const ln=Qt.split(",").map(we=>we.trim()).filter(Boolean),E=Ne+Qe[0]+Lt,oe=Ne+Qe[0]+Qe[1]+Qe[2]+Qe[3]-Lt;let he=E,_e=Nt(at,0);ln.forEach((we,Rt)=>{const Gn=Rt<ln.length-1?", ":"",Vt=we.indexOf(" - "),Vn=Vt>-1?we.slice(0,Vt):we,$r=Vt>-1?we.slice(Vt):"",Or=D.getTextWidth(Vn),ts=D.getTextWidth($r+Gn);he+Or+ts>oe&&(he=E,_e+=3.2),D.setFont("helvetica","bold"),D.text(Vn,he,_e),he+=Or,D.setFont("helvetica","normal"),D.text($r+Gn,he,_e),he+=ts})}else D.setFont("helvetica","normal"),Er.forEach((ln,E)=>{D.text(ln,Ne+Qe[0]+Lt,Nt(at,E))});at+=An,kt+=1});Mt(vt),Ke.forEach($t=>{const[Bt,Qt]=$t,bn=D.splitTextToSize(Bt?.[0]||"",Qe[0]-Lt*2),Er=D.splitTextToSize(Bt?.[1]||"-",Qe[1]-Lt*2),kn=D.splitTextToSize(Qt?.[0]||"",Qe[2]-Lt*2),An=D.splitTextToSize(Qt?.[1]||"",Qe[3]-Lt*2),ln=Math.max(bn.length||1,Er.length||1,kn.length||1,An.length||1),E=Math.max(ut,ln*3.2+1.2);Nr(E+2),kt%2===0&&(D.setFillColor(245,245,245),D.rect(Ne,Ot(at),Te,E,"F")),D.setDrawColor(tn),D.rect(Ne,Ot(at),Te,E,"S");let oe=Ne;for(let he=0;he<3;he++)oe+=Qe[he],D.line(oe,Ot(at),oe,Ot(at)+E);D.setFont("helvetica","bold"),bn.forEach((he,_e)=>D.text(he,Ne+Lt,Nt(at,_e))),kn.forEach((he,_e)=>D.text(he,Ne+Qe[0]+Qe[1]+Lt,Nt(at,_e))),D.setFont("helvetica","normal"),Er.forEach((he,_e)=>D.text(he,Ne+Qe[0]+Lt,Nt(at,_e))),An.forEach((he,_e)=>D.text(he,Ne+Qe[0]+Qe[1]+Qe[2]+Lt,Nt(at,_e))),at+=E,kt+=1}),Mt(it)},As=vt=>{const Ke=[32,75,32,51],it=5.8,Qe=Ut,ut=ct(3),Lt=Ot=>Ot-3,wt=(Ot,Nt=0)=>Lt(Ot)+ut+2.5+Nt*3.2;Nr(it+4),D.setFont("helvetica","normal"),D.setFontSize(8.5),vt.forEach((Ot,Nt)=>{const[kt,Mt]=Ot,$t=D.splitTextToSize(kt?.[0]||"",Ke[0]-Qe*2),Bt=D.splitTextToSize(kt?.[1]||"-",Ke[1]-Qe*2),Qt=D.splitTextToSize(Mt?.[0]||"",Ke[2]-Qe*2),bn=D.splitTextToSize(Mt?.[1]||"",Ke[3]-Qe*2),Er=Math.max($t.length||1,Bt.length||1,Qt.length||1,bn.length||1),kn=Math.max(it,Er*3.2+1.2);Nr(kn+2),Nt%2===0&&(D.setFillColor(245,245,245),D.rect(Ne,Lt(at),Te,kn,"F")),D.setDrawColor(tn),D.rect(Ne,Lt(at),Te,kn,"S");let An=Ne;for(let ln=0;ln<3;ln++)An+=Ke[ln],D.line(An,Lt(at),An,Lt(at)+kn);D.setFont("helvetica","bold"),$t.forEach((ln,E)=>D.text(ln,Ne+Qe,wt(at,E))),Qt.forEach((ln,E)=>D.text(ln,Ne+Ke[0]+Ke[1]+Qe,wt(at,E))),D.setFont("helvetica","normal"),Bt.forEach((ln,E)=>D.text(ln,Ne+Ke[0]+Qe,wt(at,E))),bn.forEach((ln,E)=>D.text(ln,Ne+Ke[0]+Ke[1]+Ke[2]+Qe,wt(at,E))),at+=kn})},Us=(vt,Ke)=>{const it=[95,55,Te-150],Qe=5.8,ut=Ut;Nr(Qe+6),D.setFillColor(Ge),D.setDrawColor(tn),D.setLineWidth(.2),D.rect(Ne,at-3.2,Te,Qe,"FD"),D.setFont("helvetica","bold"),D.setFontSize(8.5),D.text("Total Amount In Words",Ne+Ut,at+.8),D.text("Details",Ne+it[0]+Ut,at+.8),D.text("Amount",Ne+it[0]+it[1]+Ut,at+.8),D.line(Ne+it[0],at-3.2,Ne+it[0],at-3.2+Qe),D.line(Ne+it[0]+it[1],at-3.2,Ne+it[0]+it[1],at-3.2+Qe),at+=Qe,D.setFont("helvetica","normal"),D.setFontSize(8.5);const Lt=Ke.map(kt=>{const Mt=D.splitTextToSize(kt.detail,it[1]-ut*2),$t=D.splitTextToSize(kt.value,it[2]-ut*2),Bt=Math.max(Mt.length||1,$t.length||1),Qt=Math.max(Qe,Bt*3.2+1.2);return{detailLines:Mt,valueLines:$t,rowHeight:Qt}}),wt=Lt.reduce((kt,Mt)=>kt+Mt.rowHeight,0);Nr(wt+2),D.setDrawColor(tn),D.rect(Ne,at-3.2,it[0],wt,"S");const Ot=D.splitTextToSize(vt,it[0]-ut*3);D.setFont("helvetica","bold"),Ot.forEach((kt,Mt)=>{D.text(kt,Ne+ut,at+.1+Gt+Mt*3.2)});let Nt=at;Lt.forEach((kt,Mt)=>{Mt%2===0&&(D.setFillColor(245,245,245),D.rect(Ne+it[0],Nt-3.2,it[1]+it[2],kt.rowHeight,"F")),D.setDrawColor(tn),D.rect(Ne+it[0],Nt-3.2,it[1]+it[2],kt.rowHeight,"S"),D.line(Ne+it[0]+it[1],Nt-3.2,Ne+it[0]+it[1],Nt-3.2+kt.rowHeight),(Ke[Mt]?.detail||"").trim().toLowerCase()==="grand total"?D.setFont("helvetica","bold"):D.setFont("helvetica","normal"),kt.detailLines.forEach(($t,Bt)=>{D.text($t,Ne+it[0]+ut,Nt+.1+Gt+Bt*3.2)}),(Ke[Mt]?.detail||"").trim().toLowerCase()==="grand total"?D.setFont("helvetica","bold"):D.setFont("helvetica","normal"),kt.valueLines.forEach(($t,Bt)=>{D.text($t,Ne+it[0]+it[1]+ut,Nt+.1+Gt+Bt*3.2)}),Nt+=kt.rowHeight}),at=Nt},fs="NON-RETURNABLE GATE PASS",Ps=v.issueDate?new Date(v.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),lr=v.revDate?new Date(v.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");ir(Xe),D.setFontSize(16),D.setFont("helvetica","bold"),D.setTextColor("#da2032"),D.text(fs,H/2,at,{align:"center"}),at+=8,xr("Gate Pass Details",11),on([["Doc. No",v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002"],["Date",Ps||"-"],["CONSIGNEE NAME",v.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",v.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",v.modeOfTransport||"By Road"],["Vehicle No.",v.vehicleNumber||"MH 40 CX 2839"],["Contact No.",v.contactNo||"7972800638"],["Contact person",v.contactPerson||"SAILESH"]],[]),at+=yn;const Fr=["SR. NO.","PARTMARK","MATERIAL DISCRIPTION","MATERIAL SIZE","QUANTITY","ASSLY PART SL","APPROX. VALUE"],yr=[14,25,40,29,20,24,28],ks=W.filter(vt=>vt.partMark.trim()||vt.materialDescription.trim()).map(vt=>[vt.serialNo?String(vt.serialNo):"",vt.partMark,vt.materialDescription,vt.materialSize,String(vt.quantity),vt.asslyPartSl,vt.approxValue]);Nr(15),D.setFillColor(Ge),D.setDrawColor(tn),D.setLineWidth(.2),D.rect(Ne,at-3,Te,5.8,"FD"),D.setFont("helvetica","bold"),D.setFontSize(8);let Jr=Ne;Fr.forEach((vt,Ke)=>{D.line(Jr,at-3,Jr,at+2.8),D.text(vt,Jr+Ut,at+.8),Jr+=yr[Ke]}),D.line(Jr,at-3,Jr,at+2.8),at+=5.8,D.setFont("helvetica","normal"),ks.forEach((vt,Ke)=>{const it=vt.map((wt,Ot)=>D.splitTextToSize(wt,yr[Ot]-Ut*2)),Qe=Math.max(...it.map(wt=>wt.length)),ut=Math.max(5.8,Qe*3.2+1.2);Nr(ut+2),Ke%2===0&&(D.setFillColor(245,245,245),D.rect(Ne,at-3,Te,ut,"F")),D.setDrawColor(tn),D.rect(Ne,at-3,Te,ut,"S");let Lt=Ne;it.forEach((wt,Ot)=>{D.line(Lt,at-3,Lt,at-3+ut),Ot===0?D.setFont("helvetica","bold"):D.setFont("helvetica","normal"),wt.forEach((Nt,kt)=>{D.text(Nt,Lt+Ut,at+.1+Gt+kt*3.2)}),Lt+=yr[Ot]}),D.line(Lt,at-3,Lt,at-3+ut),at+=ut});const Tr=W.reduce((vt,Ke)=>vt+(Number(Ke.quantity)||0),0),fi=Ze(),Ts=["","","TOTAL","",String(Tr),"",fi.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((vt,Ke)=>D.splitTextToSize(vt,yr[Ke]-Ut*2)),as=Math.max(...Ts.map(vt=>vt.length)),zs=Math.max(5.8,as*3.2+1.2);Nr(zs+2),D.setFillColor(245,245,245),D.rect(Ne,at-3,Te,zs,"F"),D.setDrawColor(tn),D.rect(Ne,at-3,Te,zs,"S");let mr=Ne;Ts.forEach((vt,Ke)=>{D.line(mr,at-3,mr,at-3+zs),D.setFont("helvetica",Ke===2||Ke===4||Ke===5||Ke===6?"bold":"normal"),vt.forEach((it,Qe)=>{D.text(it,mr+Ut,at+.1+Gt+Qe*3.2)}),mr+=yr[Ke]}),D.line(mr,at-3,mr,at-3+zs),at+=zs,at+=yn,xr("Remark",11);const hs=18;Nr(hs+5),D.setDrawColor(tn),D.rect(Ne,at-3,Te,hs,"S"),D.setFont("helvetica","normal"),D.setFontSize(9),D.splitTextToSize(v.remarkText||"-",Te-2*Ut).forEach((vt,Ke)=>{D.text(vt,Ne+Ut,at+.1+Gt+Ke*3.2)}),at+=hs+yn,xr("Signature",11);const Qi=[{label:"Store Keeper",data:v.storeKeeperSignature},{label:"Qc Engg.",data:v.qcEnggSignature},{label:"Store Incharge",data:v.storeInchargeSignature},{label:"Plant Head",data:v.plantHeadSignature}],qi=3,ki=22,Un=(Te-qi*3)/4;Nr(ki+12),Qi.forEach((vt,Ke)=>{const it=Ne+Ke*(Un+qi);if(D.rect(it,at-3,Un,ki,"S"),vt.data)try{const Qe=D.getImageProperties(vt.data),ut=Qe.width||1,Lt=Qe.height||1,wt=Un-2,Ot=ki-7,Nt=ut/Lt,kt=wt/Ot;let Mt=wt,$t=Ot;Nt>kt?$t=wt/Nt:Mt=Ot*Nt;const Bt=it+1+(wt-Mt)/2,Qt=at-2.2+(Ot-$t)/2;D.addImage(vt.data,"PNG",Bt,Qt,Mt,$t)}catch{}D.setFont("helvetica","bold"),D.setFontSize(8),D.text(vt.label,it+Un/2,at+ki-1.2,{align:"center"})}),at+=ki;const bi=new Date,fn=`${String(bi.getDate()).padStart(2,"0")}${String(bi.getMonth()+1).padStart(2,"0")}${bi.getFullYear()}`,In=(R?.entityName||"RNS").split(" ").map(vt=>vt[0]).join(""),Kt=`GATE_PASS_${fn}_${In}_${v.revision}.pdf`,Fn=re?D.output("datauristring",{filename:Kt}):void 0;return B&&D.save(Kt),ve||a({title:B?"PDF exported":"PDF generated",description:B?`Gate Pass saved as ${Kt}`:"Gate pass PDF is ready."}),{fileName:Kt,dataUri:Fn}}catch(D){return console.error("PDF export error:",D),ve||a({title:"Export failed",description:"Failed to export gate pass PDF. Please try again.",variant:"destructive"}),null}},mt=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,Ft=()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}P({to:O?.emailAddress||"",subject:`Gate Pass ${v.gatePassNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${mt}`}),f(!0)},le=async()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}const X=S.to.split(/[,\s;]+/).map(ve=>ve.trim()).filter(Boolean);if(X.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const B=await ft({save:!1,silent:!0,returnDataUri:!0});if(!B?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for email.",variant:"destructive"});return}try{const ve=B.dataUri.split(",")[1]||"",D=await(await wn("POST",`/api/gate-passes/${z.id}/send-email`,{to:X,subject:S.subject.trim(),message:S.message.trim(),fileName:B.fileName,pdfBase64:ve})).json(),H=Array.isArray(D?.accepted)?D.accepted:[],je=H.length>0?H.join(", "):X.join(", ");a({title:"Email queued",description:`SMTP accepted: ${je}.`}),f(!1)}catch(ve){a({title:"Send failed",description:ve?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},gt=()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const X=(O?.mobileNumber||"").replace(/\D/g,""),B=X.length===10?`91${X}`:X;F({mobile:B,message:`Please find the attached file for details

${mt}`}),j(!0)},xe=async()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const X=_.mobile.split(/[,\s;]+/).map(ve=>ve.replace(/\D/g,"")).filter(Boolean);if(X.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}I(!0);const B=await ft({save:!1,silent:!0,returnDataUri:!0});if(!B?.dataUri){I(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for WhatsApp send.",variant:"destructive"});return}try{const ve=B.dataUri.split(",")[1]||"";await wn("POST",`/api/gate-passes/${z.id}/send-whatsapp`,{to:X,message:_.message.trim(),fileName:B.fileName,pdfBase64:ve}),a({title:"WhatsApp sent",description:`Gate pass sent to ${X.join(", ")}.`}),j(!1)}catch(ve){a({title:"Send failed",description:ve?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{I(!1)}};return!ue||!O||!Q?s.jsx(qs,{user:Q,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(qs,{user:Q,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>r("/projects"),"data-testid":"button-back",children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:ue.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(nu,{className:"h-4 w-4"}),ue.location]})]})]}),s.jsxs(qe,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/projects/${e}/gate-pass`),"data-testid":"button-new-gate-pass",children:[s.jsx(Aa,{className:"w-4 h-4 mr-2"}),"New Gate Pass"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:z?.revision||v.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(qm,{className:"h-4 w-4"})}),z&&s.jsx(qe,{variant:"outline",size:"icon",onClick:()=>me.mutate(),disabled:me.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-gate-pass",children:s.jsx(Ud,{className:"w-4 h-4"})}),s.jsxs(qe,{onClick:ft,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Dh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(qe,{variant:"outline",size:"icon",onClick:Ft,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-gate-pass",title:"Send gate pass by email",children:s.jsx(fu,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"outline",size:"icon",onClick:gt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-gate-pass",title:"Send gate pass on WhatsApp",children:s.jsx(Um,{className:"w-4 h-4"})}),s.jsxs(qe,{variant:"outline",onClick:be,disabled:L.isPending||ne.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-gate-pass",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),L.isPending||ne.isPending?"Saving...":"Save Changes"]}),z&&Ce&&Ce.length>1&&s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this gate pass (${z.revision})?`)&&ye.mutate(z.id)},"data-testid":"button-delete-gate-pass",children:s.jsx(vr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsxs(is,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Aa,{className:"w-5 h-5"}),"GATE PASS DETAILS"]})}),s.jsxs(_n,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),s.jsx(et,{value:v.gatePassNumber,onChange:X=>q({...v,gatePassNumber:X.target.value}),"data-testid":"input-doc-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(et,{type:"date",value:v.issueDate,onChange:X=>q({...v,issueDate:X.target.value}),"data-testid":"input-date"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),s.jsx(et,{value:v.consigneeName,onChange:X=>q({...v,consigneeName:X.target.value}),"data-testid":"input-consignee-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),s.jsx(Rr,{value:v.consigneeAddressText,onChange:X=>q({...v,consigneeAddressText:X.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),s.jsx(et,{value:v.modeOfTransport,onChange:X=>q({...v,modeOfTransport:X.target.value}),"data-testid":"input-mode-of-transport"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(et,{value:v.vehicleNumber,onChange:X=>q({...v,vehicleNumber:X.target.value}),"data-testid":"input-vehicle-number"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),s.jsx(et,{value:v.contactNo,onChange:X=>q({...v,contactNo:X.target.value}),"data-testid":"input-contact-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),s.jsx(et,{value:v.contactPerson,onChange:X=>q({...v,contactPerson:X.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),s.jsxs(Cn,{children:[s.jsxs(ss,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[s.jsx(is,{className:"text-lg text-slate-700",children:"GATE PASS ITEMS"}),s.jsxs(qe,{size:"sm",onClick:Re,"data-testid":"button-add-item",children:[s.jsx(_a,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),s.jsx(_n,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"PARTMARK"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"ASSLY PART SL"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsxs("tbody",{children:[W.map(X=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.serialNo===0?"":X.serialNo,onChange:B=>Me(X.id,"serialNo",parseInt(B.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.partMark,onChange:B=>Me(X.id,"partMark",B.target.value),"data-testid":`input-partmark-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.materialDescription,onChange:B=>Me(X.id,"materialDescription",B.target.value),"data-testid":`input-material-description-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.materialSize,onChange:B=>Me(X.id,"materialSize",B.target.value),"data-testid":`input-material-size-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:X.quantity,onChange:B=>Me(X.id,"quantity",parseFloat(B.target.value)||0),"data-testid":`input-qty-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.asslyPartSl,onChange:B=>Me(X.id,"asslyPartSl",B.target.value),"data-testid":`input-assly-part-sl-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:X.approxValue,onChange:B=>Me(X.id,"approxValue",B.target.value),"data-testid":`input-approx-value-${X.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>Ie(X.id),disabled:W.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${X.id}`,children:s.jsx(df,{className:"w-4 h-4"})})})]},X.id)),s.jsxs("tr",{className:"border-t bg-slate-50",children:[s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:W.reduce((X,B)=>X+(Number(B.quantity)||0),0)}),s.jsx("td",{className:"p-3 font-semibold"}),s.jsx("td",{className:"p-3 font-semibold",children:Ze().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3"})]})]})]})})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"REMARK"})}),s.jsx(_n,{className:"p-6",children:s.jsx(Rr,{value:v.remarkText,onChange:X=>q({...v,remarkText:X.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),s.jsx(_n,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:v.storeKeeperSignature?s.jsx("img",{src:v.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.storeKeeperSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:v.qcEnggSignature?s.jsx("img",{src:v.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),s.jsx("span",{className:"text-xs text-slate-500",children:v.qcEnggSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:v.storeInchargeSignature?s.jsx("img",{src:v.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.storeInchargeSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:v.plantHeadSignature?s.jsx("img",{src:v.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),s.jsx(xi,{open:o,onOpenChange:u,children:s.jsxs(ci,{className:"max-w-md",children:[s.jsx(ui,{children:s.jsx(di,{children:"Gate Pass Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ce?.map(X=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${X.id===z?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/projects/${e}/gate-pass/${X.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:X.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(X.createdAt).toLocaleDateString()})]}),Ce&&Ce.length>1&&s.jsx(qe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:B=>{B.stopPropagation(),confirm(`Are you sure you want to delete version ${X.revision}?`)&&ye.mutate(X.id)},"data-testid":`button-delete-version-${X.id}`,children:s.jsx(vr,{className:"w-4 h-4"})})]})},X.id))})]})}),s.jsx(xi,{open:c,onOpenChange:f,children:s.jsxs(ci,{className:"sm:max-w-xl",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Gate Pass by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(et,{value:S.to,onChange:X=>P(B=>({...B,to:X.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(et,{value:S.subject,onChange:X=>P(B=>({...B,subject:X.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Rr,{value:S.message,onChange:X=>P(B=>({...B,message:X.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-gate-pass"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-gate-pass",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:le,disabled:p,"data-testid":"button-send-email-submit-gate-pass",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(xi,{open:b,onOpenChange:j,children:s.jsxs(ci,{className:"sm:max-w-lg",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Gate Pass on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(et,{value:_.mobile,onChange:X=>F(B=>({...B,mobile:X.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Rr,{value:_.message,onChange:X=>F(B=>({...B,message:X.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-gate-pass"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-gate-pass",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:xe,disabled:y,"data-testid":"button-send-whatsapp-submit-gate-pass",children:y?"Sending...":"Submit"})]})]})]})})]})}function T5(){const t=Xu(),e=t.id,n=t.deliveryChallanId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,I]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,F]=k.useState({mobile:"",message:""}),[v,q]=k.useState({gatePassNumber:"",revision:"R-001",gatePassType:"Delivery Challan",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),ee=B=>{const ve=B.split(/\s+/).map(re=>re.trim()).filter(Boolean);return ve.length?ve.map(re=>re[0]).join("").toUpperCase():"PROJECT"},ae=B=>{const ve=String(B.getDate()).padStart(2,"0"),re=String(B.getMonth()+1).padStart(2,"0"),D=String(B.getFullYear()).slice(-2);return`${ve}-${re}-${D}`},[W,te]=k.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:Q}=Ea(),{data:ue}=Ln({queryKey:["/api/projects",e],queryFn:async()=>{const B=await fetch(`/api/projects/${e}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch project");return B.json()},enabled:!!e}),{data:O}=Ln({queryKey:["/api/clients",ue?.clientId],queryFn:async()=>{const B=await fetch(`/api/clients/${ue?.clientId}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch client");return B.json()},enabled:!!ue?.clientId}),{data:R}=Ln({queryKey:["/api/branding"],enabled:!!Q}),{data:z}=Ln({queryKey:["/api/delivery-challans",n],queryFn:async()=>{if(n){const ve=await fetch(`/api/delivery-challans/${n}`,{credentials:"include"});if(!ve.ok)throw new Error("Failed to fetch Delivery Challan");return ve.json()}const B=await fetch(`/api/projects/${e}/delivery-challan`,{credentials:"include"});if(!B.ok){if(B.status===404)return null;throw new Error("Failed to fetch Delivery Challan")}return B.json()},enabled:!!e}),{data:Y}=Ln({queryKey:["/api/delivery-challans",z?.id,"items"],queryFn:async()=>{const B=await fetch(`/api/delivery-challans/${z?.id}/items`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch items");return B.json()},enabled:!!z?.id}),{data:Ce}=Ln({queryKey:["/api/projects",e,"delivery-challan-versions"],queryFn:async()=>{const B=await fetch(`/api/projects/${e}/delivery-challan-versions`,{credentials:"include"});return B.ok?B.json():[]},enabled:!!e}),Ae=B=>{if(!B)return{};try{const ve=JSON.parse(B);return ve&&typeof ve=="object"?ve:{}}catch{return{}}};k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),k.useCallback(()=>{const B=[];return v.vehicleNo.trim()&&B.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&B.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&B.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&B.push(`Delivery Challan: ${v.dispatchGatePass||"-"}`),B.length?B.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]);const Pe=k.useCallback(()=>{const B={gatePassType:v.gatePassType,issueNo:v.issueNo,issueDate:v.issueDate,revNo:v.revNo,revDate:v.revDate,consigneeName:v.consigneeName,consigneeAddressText:v.consigneeAddressText,modeOfTransport:v.modeOfTransport,vehicleNumber:v.vehicleNumber,transportVehicle:v.transportVehicle,contactNo:v.contactNo,contactPerson:v.contactPerson,remarkText:v.remarkText,storeKeeperSignature:v.storeKeeperSignature,qcEnggSignature:v.qcEnggSignature,storeInchargeSignature:v.storeInchargeSignature,plantHeadSignature:v.plantHeadSignature,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(B)},[v]);k.useEffect(()=>{if(ue&&O&&!z){const B=new Date,ve=ee(ue.projectName),re=ae(B);q(D=>({...D,gatePassNumber:`RNS/${ve}/${re}/RNS-DC-002`,issueDate:B.toISOString().split("T")[0],revDate:B.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:O.name,registeredAddress:O.location,consigneeAddress:`${O.name}
${O.location}`,clientGstin:O.gstNo||""}))}},[ue,O,z]),k.useEffect(()=>{if(z){const B=Ae(z.contentSections),ve=Ne=>(Ne||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),re=B.orderReferenceType||(B.showPurchaseOrderNo?"po":"wo"),D=B.vehicleNo!==void 0||B.showDispatchLrNo!==void 0||B.showDispatchPo!==void 0||B.showDispatchGatePass!==void 0||B.dispatchLrNo!==void 0||B.dispatchPoNo!==void 0||B.dispatchGatePass!==void 0,H=B.transportVehicle||z.dispatchDetails||"",je=H.includes("-")?H.split("-").map(Ne=>Ne.trim()):[];q({gatePassNumber:z.deliveryChallanNumber,revision:z.revision,gatePassType:B.gatePassType||"Delivery Challan",issueNo:B.issueNo||"001",issueDate:B.issueDate||"",revNo:B.revNo||"00",revDate:B.revDate||"",consigneeName:B.consigneeName||z.organisationName||"",consigneeAddressText:B.consigneeAddressText||z.registeredAddress||"",modeOfTransport:B.modeOfTransport||je[0]||"By Road",vehicleNumber:B.vehicleNumber||je[1]||"",transportVehicle:B.transportVehicle||B.vehicleNo||z.dispatchDetails||"",contactNo:B.contactNo||"",contactPerson:B.contactPerson||"",remarkText:B.remarkText||"",storeKeeperSignature:B.storeKeeperSignature||"",qcEnggSignature:B.qcEnggSignature||"",storeInchargeSignature:B.storeInchargeSignature||"",plantHeadSignature:B.plantHeadSignature||"",organisationName:z.organisationName,registeredAddress:z.registeredAddress,consigneeAddress:z.consigneeAddress,clientGstin:z.clientGstin||"",workOrderNo:ve(z.workOrderNo)||"NIL",orderReferenceType:re,purchaseOrderNo:B.purchaseOrderNo||(re==="po"?ve(z.workOrderNo):""),dispatchDetails:z.dispatchDetails||"-",vehicleNo:B.vehicleNo||(!D&&z.dispatchDetails&&z.dispatchDetails!=="-"?z.dispatchDetails:""),showDispatchLrNo:B.showDispatchLrNo??!1,showDispatchPo:B.showDispatchPo??!1,showDispatchGatePass:B.showDispatchGatePass??!1,dispatchLrNo:B.dispatchLrNo||"",dispatchPoNo:B.dispatchPoNo||"",dispatchGatePass:B.dispatchGatePass||"",appliedTaxType:z.appliedTaxType||"igst",cgstRate:z.cgstRate||"9",sgstRate:z.sgstRate||"9",igstRate:z.igstRate||"18"})}},[z]),k.useEffect(()=>{Y&&Y.length>0&&te(Y.map((B,ve)=>({id:B.id,serialNo:B.serialNo>0?B.serialNo:ve+1,partMark:B.hsnCode||"",materialDescription:B.description||"",materialSize:B.ratePerUnit&&B.ratePerUnit!=="0"?B.ratePerUnit:"-",quantity:Number(B.quantity)||0,asslyPartSl:B.unit||"",approxValue:B.amount&&B.amount!=="0"?B.amount:"-",remarks:B.remarks||""})))},[Y]);const ge=k.useCallback(()=>{const B=W.reduce((Ne,Te)=>{const $e=Number(String(Te.approxValue).replace(/,/g,""));return Ne+(Number.isFinite($e)?$e:0)},0);let ve=0,re=0,D=0;v.appliedTaxType==="cgst_sgst"?(ve=B*(Number(v.cgstRate)/100),re=B*(Number(v.sgstRate)/100)):D=B*(Number(v.igstRate)/100);const H=ve+re+D,je=B+H;return{totalAmount:B,cgstAmount:ve,sgstAmount:re,igstAmount:D,totalTax:H,grandTotal:je}},[W,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=(B,ve="0")=>{const re=Number(String(B??"").replace(/,/g,"").trim());return Number.isFinite(re)?String(re):ve},se=(B,ve)=>{const re=B.materialDescription.trim()||B.partMark.trim()||"ITEM",D=String(B.materialSize??"").replace(/,/g,"").trim(),H=/^-?\d+(\.\d+)?$/.test(D);return{serialNo:B.serialNo>0?B.serialNo:ve+1,description:re,hsnCode:B.partMark.trim()||void 0,quantity:De(B.quantity),unit:B.asslyPartSl.trim()||"NOS",ratePerUnit:H?De(D,"0"):"0",percentage:"0",amount:De(B.approxValue,"0"),remarks:B.remarks}},M=(B,ve)=>{const re=R?.[ve]||"";q(D=>D[B]?{...D,[B]:""}:re?{...D,[B]:re}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),D))},L=k.useCallback(()=>{const B=ve=>{const re=String(ve??"").trim();return re!==""&&re!=="-"};return W.slice(0,5).filter(ve=>B(ve.materialDescription)||B(ve.materialSize)||B(ve.partMark)||B(ve.asslyPartSl)||B(ve.approxValue)||Number(ve.quantity)>0)},[W]),ne=Dr({mutationFn:async()=>{const B=L(),re=await(await wn("POST","/api/delivery-challans",{projectId:Number(e),deliveryChallanNumber:v.gatePassNumber,revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(let D=0;D<B.length;D++){const H=B[D];await wn("POST",`/api/delivery-challans/${re.id}/items`,se(H,D))}return re},onSuccess:B=>{Bn.invalidateQueries({queryKey:["/api/delivery-challans"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"delivery-challan-versions"]}),r(`/projects/${e}/delivery-challan/${B.id}`),a({title:"Delivery Challan saved",description:"The delivery challan has been created successfully."})},onError:B=>{a({title:"Error",description:B.message||"Failed to create delivery challan",variant:"destructive"})}}),me=Dr({mutationFn:async()=>{const B=L();await wn("PUT",`/api/delivery-challans/${z?.id}`,{deliveryChallanNumber:v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002",revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Pe(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let ve=Y||[];if(!ve.length){const re=await fetch(`/api/delivery-challans/${z?.id}/items`,{credentials:"include"});re.ok&&(ve=await re.json())}for(const re of ve)await wn("DELETE",`/api/delivery-challan-items/${re.id}`);for(let re=0;re<B.length;re++){const D=B[re];await wn("POST",`/api/delivery-challans/${z?.id}/items`,se(D,re))}},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/delivery-challans"]}),Bn.invalidateQueries({queryKey:["/api/delivery-challans",z?.id,"items"]}),Bn.invalidateQueries({queryKey:["/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan updated",description:"The delivery challan has been updated successfully."})},onError:B=>{a({title:"Error",description:B.message||"Failed to update delivery challan",variant:"destructive"})}}),ye=Dr({mutationFn:async()=>(await wn("POST",`/api/delivery-challans/${z?.id}/duplicate`,{})).json(),onSuccess:B=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"delivery-challan-versions"]}),r(`/projects/${e}/delivery-challan/${B.id}`),a({title:"Delivery Challan duplicated",description:`Created new version: ${B.revision}`})},onError:B=>{a({title:"Error",description:B.message||"Failed to duplicate delivery challan",variant:"destructive"})}}),be=Dr({mutationFn:async B=>{await wn("DELETE",`/api/delivery-challans/${B}`,void 0)},onSuccess:()=>{if(Bn.invalidateQueries({queryKey:["/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan deleted",description:"The delivery challan version has been deleted."}),u(!1),Ce&&Ce.length>1){const B=Ce.filter(ve=>ve.id!==z?.id);B.length>0?r(`/projects/${e}/delivery-challan/${B[0].id}`):r(`/projects/${e}/delivery-challan`)}else r(`/projects/${e}/delivery-challan`)},onError:B=>{a({title:"Error",description:B.message||"Failed to delete delivery challan",variant:"destructive"})}}),Re=()=>{z?me.mutate():ne.mutate()},Ie=()=>{const B=Math.max(...W.map(ve=>ve.id),0)+1;te([...W,{id:B,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},Me=B=>{if(W.length>1){const ve=W.filter(re=>re.id!==B);te(ve.map((re,D)=>({...re,serialNo:D+1})))}},Ze=(B,ve,re)=>{te(D=>D.map(H=>H.id===B?{...H,[ve]:re}:H))},ft=()=>W.reduce((B,ve)=>{const re=Number(String(ve.approxValue||"").replace(/,/g,"").trim());return B+(Number.isFinite(re)?re:0)},0),mt=async B=>{const ve=B?.save??!0,re=B?.silent??!1,D=B?.returnDataUri??!1;try{const H=new un({orientation:"portrait",unit:"mm",format:"a4"}),je=210,Ne=297,Te=15,$e=je-Te*2,st=35,ct=30,jt=Ke=>Ke*.2646,Pt=jt(80),pr=jt(50),yn=jt(80),Gt=jt(10),Ut=jt(3),tn=jt(3),Ge="#eeb7b7",at="#fff5f5";let Xe=st+10,an=1;const sr=Ke=>Ke.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),gn=Ke=>sr(Ke),Jt=Ke=>new Promise((it,Qe)=>{const ut=new Image;ut.crossOrigin="anonymous",ut.onload=()=>{const Lt=document.createElement("canvas");Lt.width=ut.width,Lt.height=ut.height,Lt.getContext("2d")?.drawImage(ut,0,0),it(Lt.toDataURL("image/png"))},ut.onerror=Qe,ut.src=Ke});let Dn=null,ys=null,ir=null;try{R?.headerUrl&&(Dn=await Jt(R.headerUrl)),R?.footerUrl&&(ys=await Jt(R.footerUrl)),R?.stampUrl&&(ir=await Jt(R.stampUrl))}catch(Ke){console.warn("Failed to load branding images:",Ke)}const Nr=Ke=>{Dn&&H.addImage(Dn,"PNG",0,0,je,st),ys&&H.addImage(ys,"PNG",0,Ne-ct,je,ct),ir&&H.addImage(ir,"PNG",je-pr-Pt,Ne-yn-Pt,Pt,Pt),H.setFontSize(8),H.setTextColor(128,128,128),H.text(`Page ${Ke}`,je/2,Ne-8,{align:"center"})},xr=Ke=>Xe+Ke>Ne-ct-10?(H.addPage(),an++,Nr(an),Xe=st+10,!0):!1,on=(Ke,it=12)=>{Xe+=4,xr(12),H.setFillColor("#d92134"),H.rect(Te,Xe-3.5,4,5,"F"),H.setFont("helvetica","bold"),H.setFontSize(it),H.setTextColor("#1e3a5f"),H.text(Ke,Te+7,Xe),Xe+=5.5},As=(Ke,it,Qe=[])=>{const ut=[38,57,38,57],Lt=5.8,wt=tn,Ot=jt(3),Nt=Bt=>Bt-3,kt=(Bt,Qt=0)=>Nt(Bt)+Ot+2.5+Qt*3.2;xr(Lt+4),H.setFont("helvetica","normal"),H.setFontSize(8.5);let Mt=0;const $t=Bt=>Bt.forEach(([Qt,bn])=>{const Er=H.splitTextToSize(Qt,ut[0]-wt*2),kn=H.splitTextToSize(bn||"-",ut[1]+ut[2]+ut[3]-wt*2),An=Math.max(Er.length||1,kn.length||1),ln=Math.max(Lt,An*3.2+1.2);if(xr(ln+2),Mt%2===0&&(H.setFillColor(245,245,245),H.rect(Te,Nt(Xe),$e,ln,"F")),H.setDrawColor(Ge),H.rect(Te,Nt(Xe),$e,ln,"S"),H.line(Te+ut[0],Nt(Xe),Te+ut[0],Nt(Xe)+ln),H.setFont("helvetica","bold"),Er.forEach((E,oe)=>{H.text(E,Te+wt,kt(Xe,oe))}),Qt==="Dispatch Details"&&bn){const E=bn.split(",").map(Rt=>Rt.trim()).filter(Boolean),oe=Te+ut[0]+wt,he=Te+ut[0]+ut[1]+ut[2]+ut[3]-wt;let _e=oe,we=kt(Xe,0);E.forEach((Rt,Gn)=>{const Vt=Gn<E.length-1?", ":"",Vn=Rt.indexOf(" - "),$r=Vn>-1?Rt.slice(0,Vn):Rt,Or=Vn>-1?Rt.slice(Vn):"",ts=H.getTextWidth($r),hi=H.getTextWidth(Or+Vt);_e+ts+hi>he&&(_e=oe,we+=3.2),H.setFont("helvetica","bold"),H.text($r,_e,we),_e+=ts,H.setFont("helvetica","normal"),H.text(Or+Vt,_e,we),_e+=hi})}else H.setFont("helvetica","normal"),kn.forEach((E,oe)=>{H.text(E,Te+ut[0]+wt,kt(Xe,oe))});Xe+=ln,Mt+=1});$t(Ke),it.forEach(Bt=>{const[Qt,bn]=Bt,Er=H.splitTextToSize(Qt?.[0]||"",ut[0]-wt*2),kn=H.splitTextToSize(Qt?.[1]||"-",ut[1]-wt*2),An=H.splitTextToSize(bn?.[0]||"",ut[2]-wt*2),ln=H.splitTextToSize(bn?.[1]||"",ut[3]-wt*2),E=Math.max(Er.length||1,kn.length||1,An.length||1,ln.length||1),oe=Math.max(Lt,E*3.2+1.2);xr(oe+2),Mt%2===0&&(H.setFillColor(245,245,245),H.rect(Te,Nt(Xe),$e,oe,"F")),H.setDrawColor(Ge),H.rect(Te,Nt(Xe),$e,oe,"S");let he=Te;for(let _e=0;_e<3;_e++)he+=ut[_e],H.line(he,Nt(Xe),he,Nt(Xe)+oe);H.setFont("helvetica","bold"),Er.forEach((_e,we)=>H.text(_e,Te+wt,kt(Xe,we))),An.forEach((_e,we)=>H.text(_e,Te+ut[0]+ut[1]+wt,kt(Xe,we))),H.setFont("helvetica","normal"),kn.forEach((_e,we)=>H.text(_e,Te+ut[0]+wt,kt(Xe,we))),ln.forEach((_e,we)=>H.text(_e,Te+ut[0]+ut[1]+ut[2]+wt,kt(Xe,we))),Xe+=oe,Mt+=1}),$t(Qe)},Us=Ke=>{const it=[32,75,32,51],Qe=5.8,ut=tn,Lt=jt(3),wt=Nt=>Nt-3,Ot=(Nt,kt=0)=>wt(Nt)+Lt+2.5+kt*3.2;xr(Qe+4),H.setFont("helvetica","normal"),H.setFontSize(8.5),Ke.forEach((Nt,kt)=>{const[Mt,$t]=Nt,Bt=H.splitTextToSize(Mt?.[0]||"",it[0]-ut*2),Qt=H.splitTextToSize(Mt?.[1]||"-",it[1]-ut*2),bn=H.splitTextToSize($t?.[0]||"",it[2]-ut*2),Er=H.splitTextToSize($t?.[1]||"",it[3]-ut*2),kn=Math.max(Bt.length||1,Qt.length||1,bn.length||1,Er.length||1),An=Math.max(Qe,kn*3.2+1.2);xr(An+2),kt%2===0&&(H.setFillColor(245,245,245),H.rect(Te,wt(Xe),$e,An,"F")),H.setDrawColor(Ge),H.rect(Te,wt(Xe),$e,An,"S");let ln=Te;for(let E=0;E<3;E++)ln+=it[E],H.line(ln,wt(Xe),ln,wt(Xe)+An);H.setFont("helvetica","bold"),Bt.forEach((E,oe)=>H.text(E,Te+ut,Ot(Xe,oe))),bn.forEach((E,oe)=>H.text(E,Te+it[0]+it[1]+ut,Ot(Xe,oe))),H.setFont("helvetica","normal"),Qt.forEach((E,oe)=>H.text(E,Te+it[0]+ut,Ot(Xe,oe))),Er.forEach((E,oe)=>H.text(E,Te+it[0]+it[1]+it[2]+ut,Ot(Xe,oe))),Xe+=An})},fs=(Ke,it)=>{const Qe=[95,55,$e-150],ut=5.8,Lt=tn;xr(ut+6),H.setFillColor(at),H.setDrawColor(Ge),H.setLineWidth(.2),H.rect(Te,Xe-3.2,$e,ut,"FD"),H.setFont("helvetica","bold"),H.setFontSize(8.5),H.text("Total Amount In Words",Te+tn,Xe+.8),H.text("Details",Te+Qe[0]+tn,Xe+.8),H.text("Amount",Te+Qe[0]+Qe[1]+tn,Xe+.8),H.line(Te+Qe[0],Xe-3.2,Te+Qe[0],Xe-3.2+ut),H.line(Te+Qe[0]+Qe[1],Xe-3.2,Te+Qe[0]+Qe[1],Xe-3.2+ut),Xe+=ut,H.setFont("helvetica","normal"),H.setFontSize(8.5);const wt=it.map(Mt=>{const $t=H.splitTextToSize(Mt.detail,Qe[1]-Lt*2),Bt=H.splitTextToSize(Mt.value,Qe[2]-Lt*2),Qt=Math.max($t.length||1,Bt.length||1),bn=Math.max(ut,Qt*3.2+1.2);return{detailLines:$t,valueLines:Bt,rowHeight:bn}}),Ot=wt.reduce((Mt,$t)=>Mt+$t.rowHeight,0);xr(Ot+2),H.setDrawColor(Ge),H.rect(Te,Xe-3.2,Qe[0],Ot,"S");const Nt=H.splitTextToSize(Ke,Qe[0]-Lt*3);H.setFont("helvetica","bold"),Nt.forEach((Mt,$t)=>{H.text(Mt,Te+Lt,Xe+.1+Ut+$t*3.2)});let kt=Xe;wt.forEach((Mt,$t)=>{$t%2===0&&(H.setFillColor(245,245,245),H.rect(Te+Qe[0],kt-3.2,Qe[1]+Qe[2],Mt.rowHeight,"F")),H.setDrawColor(Ge),H.rect(Te+Qe[0],kt-3.2,Qe[1]+Qe[2],Mt.rowHeight,"S"),H.line(Te+Qe[0]+Qe[1],kt-3.2,Te+Qe[0]+Qe[1],kt-3.2+Mt.rowHeight),(it[$t]?.detail||"").trim().toLowerCase()==="grand total"?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Mt.detailLines.forEach((Bt,Qt)=>{H.text(Bt,Te+Qe[0]+Lt,kt+.1+Ut+Qt*3.2)}),(it[$t]?.detail||"").trim().toLowerCase()==="grand total"?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Mt.valueLines.forEach((Bt,Qt)=>{H.text(Bt,Te+Qe[0]+Qe[1]+Lt,kt+.1+Ut+Qt*3.2)}),kt+=Mt.rowHeight}),Xe=kt},Ps="DELIVERY CHALLAN",lr=v.issueDate?new Date(v.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),Fr=v.revDate?new Date(v.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");Nr(an),H.setFontSize(16),H.setFont("helvetica","bold"),H.setTextColor("#da2032"),H.text(Ps,je/2,Xe,{align:"center"}),Xe+=8,on("Delivery Challan Details",11),As([["Doc. No",v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002"],["Date",lr||"-"],["CONSIGNEE NAME",v.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",v.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",v.modeOfTransport||"By Road"],["Vehicle No.",v.vehicleNumber||"MH 40 CX 2839"],["Contact No.",v.contactNo||"7972800638"],["Contact person",v.contactPerson||"SAILESH"]],[]),Xe+=Gt;const yr=["SR. NO.","MATERIAL DISCRIPTION","MATERIAL SIZE","ITEM CODE","UNIT","QUANTITY","APPROX. VALUE"],ks=[14,40,29,25,24,20,28],Jr=W.filter(Ke=>Ke.partMark.trim()||Ke.materialDescription.trim()).map(Ke=>[Ke.serialNo?String(Ke.serialNo):"",Ke.materialDescription,Ke.materialSize,Ke.partMark,Ke.asslyPartSl,String(Ke.quantity),Ke.approxValue]);xr(15),H.setFillColor(at),H.setDrawColor(Ge),H.setLineWidth(.2),H.rect(Te,Xe-3,$e,5.8,"FD"),H.setFont("helvetica","bold"),H.setFontSize(8);let Tr=Te;yr.forEach((Ke,it)=>{H.line(Tr,Xe-3,Tr,Xe+2.8),H.text(Ke,Tr+tn,Xe+.8),Tr+=ks[it]}),H.line(Tr,Xe-3,Tr,Xe+2.8),Xe+=5.8,H.setFont("helvetica","normal"),Jr.forEach((Ke,it)=>{const Qe=Ke.map((Ot,Nt)=>H.splitTextToSize(Ot,ks[Nt]-tn*2)),ut=Math.max(...Qe.map(Ot=>Ot.length)),Lt=Math.max(5.8,ut*3.2+1.2);xr(Lt+2),it%2===0&&(H.setFillColor(245,245,245),H.rect(Te,Xe-3,$e,Lt,"F")),H.setDrawColor(Ge),H.rect(Te,Xe-3,$e,Lt,"S");let wt=Te;Qe.forEach((Ot,Nt)=>{H.line(wt,Xe-3,wt,Xe-3+Lt),Nt===0?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Ot.forEach((kt,Mt)=>{H.text(kt,wt+tn,Xe+.1+Ut+Mt*3.2)}),wt+=ks[Nt]}),H.line(wt,Xe-3,wt,Xe-3+Lt),Xe+=Lt});const fi=W.reduce((Ke,it)=>Ke+(Number(it.quantity)||0),0),es=ft(),as=["","","TOTAL","",String(fi),"",es.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((Ke,it)=>H.splitTextToSize(Ke,ks[it]-tn*2)),zs=Math.max(...as.map(Ke=>Ke.length)),mr=Math.max(5.8,zs*3.2+1.2);xr(mr+2),H.setFillColor(245,245,245),H.rect(Te,Xe-3,$e,mr,"F"),H.setDrawColor(Ge),H.rect(Te,Xe-3,$e,mr,"S");let hs=Te;as.forEach((Ke,it)=>{H.line(hs,Xe-3,hs,Xe-3+mr),H.setFont("helvetica",it===2||it===4||it===5||it===6?"bold":"normal"),Ke.forEach((Qe,ut)=>{H.text(Qe,hs+tn,Xe+.1+Ut+ut*3.2)}),hs+=ks[it]}),H.line(hs,Xe-3,hs,Xe-3+mr),Xe+=mr,Xe+=Gt,on("Remark",11);const Xs=18;xr(Xs+5),H.setDrawColor(Ge),H.rect(Te,Xe-3,$e,Xs,"S"),H.setFont("helvetica","normal"),H.setFontSize(9),H.splitTextToSize(v.remarkText||"-",$e-2*tn).forEach((Ke,it)=>{H.text(Ke,Te+tn,Xe+.1+Ut+it*3.2)}),Xe+=Xs+Gt,on("Signature",11);const qi=[{label:"Store Keeper",data:v.storeKeeperSignature},{label:"Qc Engg.",data:v.qcEnggSignature},{label:"Store Incharge",data:v.storeInchargeSignature},{label:"Plant Head",data:v.plantHeadSignature}],ki=3,Un=22,bi=($e-ki*3)/4;xr(Un+12),qi.forEach((Ke,it)=>{const Qe=Te+it*(bi+ki);if(H.rect(Qe,Xe-3,bi,Un,"S"),Ke.data)try{const ut=H.getImageProperties(Ke.data),Lt=ut.width||1,wt=ut.height||1,Ot=bi-2,Nt=Un-7,kt=Lt/wt,Mt=Ot/Nt;let $t=Ot,Bt=Nt;kt>Mt?Bt=Ot/kt:$t=Nt*kt;const Qt=Qe+1+(Ot-$t)/2,bn=Xe-2.2+(Nt-Bt)/2;H.addImage(Ke.data,"PNG",Qt,bn,$t,Bt)}catch{}H.setFont("helvetica","bold"),H.setFontSize(8),H.text(Ke.label,Qe+bi/2,Xe+Un-1.2,{align:"center"})}),Xe+=Un;const fn=new Date,In=`${String(fn.getDate()).padStart(2,"0")}${String(fn.getMonth()+1).padStart(2,"0")}${fn.getFullYear()}`,Nn=(R?.entityName||"RNS").split(" ").map(Ke=>Ke[0]).join(""),Fn=`GATE_PASS_${In}_${Nn}_${v.revision}.pdf`,vt=D?H.output("datauristring",{filename:Fn}):void 0;return ve&&H.save(Fn),re||a({title:ve?"PDF exported":"PDF generated",description:ve?`Delivery Challan saved as ${Fn}`:"Delivery challan PDF is ready."}),{fileName:Fn,dataUri:vt}}catch(H){return console.error("PDF export error:",H),re||a({title:"Export failed",description:"Failed to export delivery challan PDF. Please try again.",variant:"destructive"}),null}},Ft=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,le=()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}P({to:O?.emailAddress||"",subject:`Delivery Challan ${v.gatePassNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${Ft}`}),f(!0)},gt=async()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}const B=S.to.split(/[,\s;]+/).map(re=>re.trim()).filter(Boolean);if(B.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const ve=await mt({save:!1,silent:!0,returnDataUri:!0});if(!ve?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for email.",variant:"destructive"});return}try{const re=ve.dataUri.split(",")[1]||"",H=await(await wn("POST",`/api/delivery-challans/${z.id}/send-email`,{to:B,subject:S.subject.trim(),message:S.message.trim(),fileName:ve.fileName,pdfBase64:re})).json(),je=Array.isArray(H?.accepted)?H.accepted:[],Ne=je.length>0?je.join(", "):B.join(", ");a({title:"Email queued",description:`SMTP accepted: ${Ne}.`}),f(!1)}catch(re){a({title:"Send failed",description:re?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},xe=()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const B=(O?.mobileNumber||"").replace(/\D/g,""),ve=B.length===10?`91${B}`:B;F({mobile:ve,message:`Please find the attached file for details

${Ft}`}),j(!0)},X=async()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const B=_.mobile.split(/[,\s;]+/).map(re=>re.replace(/\D/g,"")).filter(Boolean);if(B.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}I(!0);const ve=await mt({save:!1,silent:!0,returnDataUri:!0});if(!ve?.dataUri){I(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for WhatsApp send.",variant:"destructive"});return}try{const re=ve.dataUri.split(",")[1]||"";await wn("POST",`/api/delivery-challans/${z.id}/send-whatsapp`,{to:B,message:_.message.trim(),fileName:ve.fileName,pdfBase64:re}),a({title:"WhatsApp sent",description:`Delivery challan sent to ${B.join(", ")}.`}),j(!1)}catch(re){a({title:"Send failed",description:re?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{I(!1)}};return!ue||!O||!Q?s.jsx(qs,{user:Q,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(qs,{user:Q,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>r("/projects"),"data-testid":"button-back",children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:ue.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(nu,{className:"h-4 w-4"}),ue.location]})]})]}),s.jsxs(qe,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/projects/${e}/delivery-challan`),"data-testid":"button-new-delivery-challan",children:[s.jsx(Aa,{className:"w-4 h-4 mr-2"}),"New Delivery Challan"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:z?.revision||v.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(qm,{className:"h-4 w-4"})}),z&&s.jsx(qe,{variant:"outline",size:"icon",onClick:()=>ye.mutate(),disabled:ye.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-delivery-challan",children:s.jsx(Ud,{className:"w-4 h-4"})}),s.jsxs(qe,{onClick:mt,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Dh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(qe,{variant:"outline",size:"icon",onClick:le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-delivery-challan",title:"Send delivery challan by email",children:s.jsx(fu,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"outline",size:"icon",onClick:xe,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-delivery-challan",title:"Send delivery challan on WhatsApp",children:s.jsx(Um,{className:"w-4 h-4"})}),s.jsxs(qe,{variant:"outline",onClick:Re,disabled:ne.isPending||me.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-delivery-challan",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),ne.isPending||me.isPending?"Saving...":"Save Changes"]}),z&&Ce&&Ce.length>1&&s.jsx(qe,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this Delivery Challan (${z.revision})?`)&&be.mutate(z.id)},"data-testid":"button-delete-delivery-challan",children:s.jsx(vr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsxs(is,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Aa,{className:"w-5 h-5"}),"Delivery Challan DETAILS"]})}),s.jsxs(_n,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),s.jsx(et,{value:v.gatePassNumber,onChange:B=>q({...v,gatePassNumber:B.target.value}),"data-testid":"input-doc-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(et,{type:"date",value:v.issueDate,onChange:B=>q({...v,issueDate:B.target.value}),"data-testid":"input-date"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),s.jsx(et,{value:v.consigneeName,onChange:B=>q({...v,consigneeName:B.target.value}),"data-testid":"input-consignee-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),s.jsx(Rr,{value:v.consigneeAddressText,onChange:B=>q({...v,consigneeAddressText:B.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),s.jsx(et,{value:v.modeOfTransport,onChange:B=>q({...v,modeOfTransport:B.target.value}),"data-testid":"input-mode-of-transport"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(et,{value:v.vehicleNumber,onChange:B=>q({...v,vehicleNumber:B.target.value}),"data-testid":"input-vehicle-number"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),s.jsx(et,{value:v.contactNo,onChange:B=>q({...v,contactNo:B.target.value}),"data-testid":"input-contact-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),s.jsx(et,{value:v.contactPerson,onChange:B=>q({...v,contactPerson:B.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),s.jsxs(Cn,{children:[s.jsxs(ss,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[s.jsx(is,{className:"text-lg text-slate-700",children:"Delivery Challan ITEMS"}),s.jsxs(qe,{size:"sm",onClick:Ie,"data-testid":"button-add-item",children:[s.jsx(_a,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),s.jsx(_n,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"ITEM CODE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"UNIT"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsxs("tbody",{children:[W.map(B=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.serialNo===0?"":B.serialNo,onChange:ve=>Ze(B.id,"serialNo",parseInt(ve.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.materialDescription,onChange:ve=>Ze(B.id,"materialDescription",ve.target.value),"data-testid":`input-material-description-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.materialSize,onChange:ve=>Ze(B.id,"materialSize",ve.target.value),"data-testid":`input-material-size-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.partMark,onChange:ve=>Ze(B.id,"partMark",ve.target.value),"data-testid":`input-partmark-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.asslyPartSl,onChange:ve=>Ze(B.id,"asslyPartSl",ve.target.value),"data-testid":`input-assly-part-sl-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{type:"number",value:B.quantity,onChange:ve=>Ze(B.id,"quantity",parseFloat(ve.target.value)||0),"data-testid":`input-qty-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(et,{value:B.approxValue,onChange:ve=>Ze(B.id,"approxValue",ve.target.value),"data-testid":`input-approx-value-${B.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>Me(B.id),disabled:W.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${B.id}`,children:s.jsx(df,{className:"w-4 h-4"})})})]},B.id)),s.jsxs("tr",{className:"border-t bg-slate-50",children:[s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:W.reduce((B,ve)=>B+(Number(ve.quantity)||0),0)}),s.jsx("td",{className:"p-3 font-semibold",children:ft().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3"})]})]})]})})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"REMARK"})}),s.jsx(_n,{className:"p-6",children:s.jsx(Rr,{value:v.remarkText,onChange:B=>q({...v,remarkText:B.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{className:"bg-slate-100",children:s.jsx(is,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),s.jsx(_n,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>M("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:v.storeKeeperSignature?s.jsx("img",{src:v.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.storeKeeperSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>M("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:v.qcEnggSignature?s.jsx("img",{src:v.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),s.jsx("span",{className:"text-xs text-slate-500",children:v.qcEnggSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>M("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:v.storeInchargeSignature?s.jsx("img",{src:v.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.storeInchargeSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>M("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:v.plantHeadSignature?s.jsx("img",{src:v.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),s.jsx("span",{className:"text-xs text-slate-500",children:v.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),s.jsx(xi,{open:o,onOpenChange:u,children:s.jsxs(ci,{className:"max-w-md",children:[s.jsx(ui,{children:s.jsx(di,{children:"Delivery Challan Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ce?.map(B=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${B.id===z?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/projects/${e}/delivery-challan/${B.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:B.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(B.createdAt).toLocaleDateString()})]}),Ce&&Ce.length>1&&s.jsx(qe,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:ve=>{ve.stopPropagation(),confirm(`Are you sure you want to delete version ${B.revision}?`)&&be.mutate(B.id)},"data-testid":`button-delete-version-${B.id}`,children:s.jsx(vr,{className:"w-4 h-4"})})]})},B.id))})]})}),s.jsx(xi,{open:c,onOpenChange:f,children:s.jsxs(ci,{className:"sm:max-w-xl",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Delivery Challan by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(et,{value:S.to,onChange:B=>P(ve=>({...ve,to:B.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(et,{value:S.subject,onChange:B=>P(ve=>({...ve,subject:B.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Rr,{value:S.message,onChange:B=>P(ve=>({...ve,message:B.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-delivery-challan"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-delivery-challan",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:gt,disabled:p,"data-testid":"button-send-email-submit-delivery-challan",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(xi,{open:b,onOpenChange:j,children:s.jsxs(ci,{className:"sm:max-w-lg",children:[s.jsx(ui,{children:s.jsx(di,{children:"Send Delivery Challan on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(et,{value:_.mobile,onChange:B=>F(ve=>({...ve,mobile:B.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Rr,{value:_.message,onChange:B=>F(ve=>({...ve,message:B.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-delivery-challan"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-delivery-challan",children:"Cancel"}),s.jsx(qe,{type:"button",onClick:X,disabled:y,"data-testid":"button-send-whatsapp-submit-delivery-challan",children:y?"Sending...":"Submit"})]})]})]})})]})}const M1=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],E5=t=>M1.find(e=>e.value===t)?.label||t;function r7(){const{id:t}=Xu(),e=Number(t),[,n]=za(),{data:r}=Ea(),{toast:a}=$a(),[o,u]=k.useState(""),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(null),[y,I]=k.useState(null),[S,P]=k.useState(null),[_,F]=k.useState({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""}),[v,q]=k.useState({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""}),ee=(L,ne)=>{if(L.size>5*1024*1024){a({title:"File too large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}const me=new FileReader;me.onloadend=()=>{ne(typeof me.result=="string"?me.result:"")},me.readAsDataURL(L)},ae=L=>{const ne=L.target.files?.[0];ne&&ee(ne,me=>F(ye=>({...ye,attachmentUrl:me})))},W=L=>{const ne=L.target.files?.[0];ne&&ee(ne,me=>q(ye=>({...ye,attachmentUrl:me})))},te=L=>L?L.startsWith("data:")?"Open Attachment":L:"-",Q=async(L,ne)=>{if(!(L.headers.get("content-type")||"").includes("application/json"))throw new Error(ne);return L.json()},{data:ue,isLoading:O}=Ln({queryKey:["/api/projects",e],queryFn:async()=>{const L=await fetch(`/api/projects/${e}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch project");return L.json()},enabled:Number.isFinite(e)&&e>0}),{data:R}=Ln({queryKey:["/api/clients",ue?.clientId],queryFn:async()=>{const L=await fetch(`/api/clients/${ue?.clientId}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch client");return L.json()},enabled:!!ue?.clientId}),{data:z}=Ln({queryKey:["/api/projects",e,"ledger","budget"],queryFn:async()=>{const L=await fetch(`/api/projects/${e}/ledger/budget`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch budget");return Q(L,"Ledger budget API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),{data:Y=[],isLoading:Ce}=Ln({queryKey:["/api/projects",e,"ledger","entries"],queryFn:async()=>{const L=await fetch(`/api/projects/${e}/ledger/entries`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch ledger entries");return Q(L,"Ledger entries API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),Ae=Dr({mutationFn:async()=>{const L=Number(String(o).replace(/,/g,"").trim()),ne=Number.isFinite(L)?L:0,me=await wn("PUT",`/api/projects/${e}/ledger/budget`,{projectValue:String(ne)});return Q(me,"Ledger budget API is unavailable. Please restart backend.")},onSuccess:L=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"ledger","budget"]}),u(String(Number(L?.projectValue||0))),a({title:"Budget saved",description:"Project budget updated successfully."})},onError:L=>{a({title:"Error",description:L.message||"Failed to save budget",variant:"destructive"})}}),Pe=Dr({mutationFn:async({id:L,payload:ne})=>{if(L){const ye=await wn("PUT",`/api/ledger-entries/${L}`,ne);await Q(ye,"Ledger update API is unavailable. Please restart backend.");return}const me=await wn("POST",`/api/projects/${e}/ledger/entries`,ne);await Q(me,"Ledger create API is unavailable. Please restart backend.")},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"ledger","entries"]}),f(!1),m(!1),j(null),I(null),a({title:"Entry saved",description:"Ledger entry saved in database."})},onError:L=>{a({title:"Error",description:L.message||"Failed to add entry",variant:"destructive"})}}),ce=Dr({mutationFn:async L=>{await wn("DELETE",`/api/ledger-entries/${L}`)},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/projects",e,"ledger","entries"]}),P(null),a({title:"Entry deleted",description:"Ledger entry deleted successfully."})},onError:L=>{a({title:"Error",description:L.message||"Failed to delete entry",variant:"destructive"})}});k.useEffect(()=>{z&&z.projectValue!==void 0&&z.projectValue!==null&&u(String(Number(z.projectValue)))},[z?.projectValue]);const ge=k.useMemo(()=>{const L=Y.filter(ye=>ye.entryType==="expense").reduce((ye,be)=>ye+(Number(be.amount)||0),0),ne=Y.filter(ye=>ye.entryType==="receipt").reduce((ye,be)=>ye+(Number(be.amount)||0),0),me=Number(z?.projectValue||0);return{totalBudget:me,totalExpenses:L,totalReceived:ne,balanceAmount:ne-L,remainingBudget:me-L}},[Y,z]),De=k.useMemo(()=>{const L=[...Y].sort((ye,be)=>{const Re=new Date(ye.entryDate).getTime(),Ie=new Date(be.entryDate).getTime();return Re!==Ie?Re-Ie:ye.id-be.id});let ne=0;const me={};return L.forEach(ye=>{const be=Number(ye.amount)||0;ne+=ye.entryType==="expense"?-be:be,me[ye.id]=ne}),[...Y].sort((ye,be)=>{const Re=new Date(ye.entryDate).getTime(),Ie=new Date(be.entryDate).getTime();return Re!==Ie?Ie-Re:be.id-ye.id}).map(ye=>({...ye,runningBalance:me[ye.id]||0}))},[Y]),se=()=>{if(!_.entryDate||!_.category||!_.description||!_.amount){a({title:"Missing fields",description:"Fill date, category, description and amount.",variant:"destructive"});return}Pe.mutate({id:b||void 0,payload:{entryDate:_.entryDate,entryType:"expense",category:_.category,description:_.description,amount:_.amount,paymentMode:_.paymentMode,remarks:"",reference:_.reference,attachmentUrl:_.attachmentUrl}}),F({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},M=()=>{if(!v.entryDate||!v.amount){a({title:"Missing fields",description:"Fill received date and amount.",variant:"destructive"});return}Pe.mutate({id:y||void 0,payload:{entryDate:v.entryDate,entryType:"receipt",category:"Client Receipt",description:"Payment received from client",amount:v.amount,paymentMode:v.paymentMode,remarks:v.remarks,reference:v.reference,receivedAgainst:v.receivedAgainst,chequeNumber:v.paymentMode==="cheque"?v.chequeNumber:"",bankName:v.paymentMode==="cheque"?v.bankName:"",chequeDate:v.paymentMode==="cheque"?v.chequeDate:"",utrNumber:"",attachmentUrl:v.attachmentUrl}}),q({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})};return O?s.jsx(qs,{user:r,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):ue?s.jsx(qs,{user:r,children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6 px-1 sm:px-0",children:[s.jsx("div",{className:"flex items-start sm:items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>n("/projects"),children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Project Ledger"}),s.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 break-words",children:[ue.projectName," ",R?`- ${R.name}`:""]})]})]})}),s.jsxs(Cn,{className:"border-[#eeb7b7]",children:[s.jsx(ss,{className:"bg-slate-50",children:s.jsx(is,{className:"text-[#d92134]",children:"Budget Initialization"})}),s.jsx(_n,{className:"pt-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Project Cost / Project Value"}),s.jsx(et,{type:"number",value:o,onChange:L=>u(L.target.value),placeholder:z?.projectValue||"0.00","data-testid":"input-ledger-budget"})]}),s.jsx(qe,{className:"w-full md:w-auto",onClick:()=>Ae.mutate(),disabled:Ae.isPending,"data-testid":"button-save-ledger-budget",children:Ae.isPending?"Saving...":"Save Budget"}),s.jsxs("div",{className:"text-sm text-slate-600 md:text-right",children:["Current Budget: ",s.jsxs("span",{className:"font-semibold",children:["Rs. ",Number(z?.projectValue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 gap-3",children:[s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Budget"}),s.jsxs("p",{className:"text-lg font-bold",children:["Rs. ",ge.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Expenses"}),s.jsxs("p",{className:"text-lg font-bold text-red-600",children:["Rs. ",ge.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Received"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs. ",ge.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Balance (Received - Expenses)"}),s.jsxs("p",{className:`text-lg font-bold ${ge.balanceAmount>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",ge.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Remaining Budget"}),s.jsxs("p",{className:`text-lg font-bold ${ge.remainingBudget>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",ge.remainingBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{children:s.jsx(is,{className:"text-base",children:"Add Ledger Entries"})}),s.jsxs(_n,{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(xi,{open:c,onOpenChange:f,children:[s.jsx(Ah,{asChild:!0,children:s.jsxs(qe,{className:"w-full sm:w-auto","data-testid":"button-open-expense-dialog",onClick:()=>{j(null),F({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},children:[s.jsx(f_,{className:"w-4 h-4 mr-2"})," Add Expense"]})}),s.jsxs(ci,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(ui,{children:s.jsx(di,{children:"Add Expense"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{type:"date",value:_.entryDate,onChange:L=>F({..._,entryDate:L.target.value})}),s.jsx(et,{placeholder:"Expense category/type",value:_.category,onChange:L=>F({..._,category:L.target.value})})]}),s.jsx(Rr,{placeholder:"Description / remarks",value:_.description,onChange:L=>F({..._,description:L.target.value})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{type:"number",placeholder:"Amount",value:_.amount,onChange:L=>F({..._,amount:L.target.value})}),s.jsxs(Rl,{value:_.paymentMode,onValueChange:L=>F({..._,paymentMode:L}),children:[s.jsx(Yo,{children:s.jsx(Dl,{placeholder:"Mode of payment"})}),s.jsx(Xo,{children:M1.map(L=>s.jsx(ha,{value:L.value,children:L.label},L.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{placeholder:"Reference / bill no.",value:_.reference,onChange:L=>F({..._,reference:L.target.value})}),s.jsx(et,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:ae})]}),_.attachmentUrl?s.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,s.jsx(qe,{onClick:se,disabled:Pe.isPending,className:"w-full","data-testid":"button-add-expense",children:Pe.isPending?"Saving...":b?"Update Expense":"Save Expense"})]})]})]}),s.jsxs(xi,{open:p,onOpenChange:m,children:[s.jsx(Ah,{asChild:!0,children:s.jsxs(qe,{variant:"outline",className:"w-full sm:w-auto","data-testid":"button-open-receipt-dialog",onClick:()=>{I(null),q({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})},children:[s.jsx(h_,{className:"w-4 h-4 mr-2"})," Add Client Receipt"]})}),s.jsxs(ci,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(ui,{children:s.jsx(di,{children:"Add Client Receipt"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{type:"date",value:v.entryDate,onChange:L=>q({...v,entryDate:L.target.value})}),s.jsx(et,{type:"number",placeholder:"Amount received",value:v.amount,onChange:L=>q({...v,amount:L.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{placeholder:"Received against (milestone/invoice/term)",value:v.receivedAgainst,onChange:L=>q({...v,receivedAgainst:L.target.value})}),s.jsxs(Rl,{value:v.paymentMode,onValueChange:L=>q({...v,paymentMode:L}),children:[s.jsx(Yo,{children:s.jsx(Dl,{placeholder:"Mode of receipt"})}),s.jsx(Xo,{children:M1.map(L=>s.jsx(ha,{value:L.value,children:L.label},L.value))})]})]}),v.paymentMode==="cheque"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx(et,{placeholder:"Cheque number",value:v.chequeNumber,onChange:L=>q({...v,chequeNumber:L.target.value})}),s.jsx(et,{placeholder:"Bank name",value:v.bankName,onChange:L=>q({...v,bankName:L.target.value})}),s.jsx(et,{type:"date",value:v.chequeDate,onChange:L=>q({...v,chequeDate:L.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(et,{placeholder:"Reference details",value:v.reference,onChange:L=>q({...v,reference:L.target.value})}),s.jsx(et,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:W})]}),v.attachmentUrl?s.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,s.jsx(Rr,{placeholder:"Remarks",value:v.remarks,onChange:L=>q({...v,remarks:L.target.value})}),s.jsx(qe,{onClick:M,disabled:Pe.isPending,className:"w-full","data-testid":"button-add-receipt",children:Pe.isPending?"Saving...":y?"Update Receipt":"Save Receipt"})]})]})]})]})]}),s.jsxs(Cn,{children:[s.jsx(ss,{children:s.jsxs(is,{className:"text-base flex items-center gap-2",children:[s.jsx(am,{className:"w-4 h-4"})," Ledger View"]})}),s.jsxs(_n,{className:"p-0",children:[s.jsx("div",{className:"md:hidden p-3 space-y-3",children:Ce?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):De.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."}):De.map(L=>{const ne=Number(L.amount)||0;return s.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"text-xs text-slate-500",children:L.entryDate}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`text-xs font-semibold ${L.entryType==="expense"?"text-red-600":"text-green-600"}`,children:L.entryType==="expense"?"Expense":"Receipt"}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{L.entryType==="expense"?(j(L.id),F({entryDate:L.entryDate,category:L.category,description:L.description,amount:String(Number(L.amount)||0),paymentMode:L.paymentMode,reference:L.reference||"",attachmentUrl:L.attachmentUrl||""}),f(!0)):(I(L.id),q({entryDate:L.entryDate,amount:String(Number(L.amount)||0),receivedAgainst:L.receivedAgainst||"",paymentMode:L.paymentMode,remarks:L.remarks||"",reference:L.reference||"",chequeNumber:L.chequeNumber||"",bankName:L.bankName||"",chequeDate:L.chequeDate||"",attachmentUrl:L.attachmentUrl||""}),m(!0))},children:s.jsx($u,{className:"w-3 h-3"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600",onClick:()=>P(L),disabled:ce.isPending,children:s.jsx(vr,{className:"w-3 h-3"})})]})]}),s.jsx("div",{className:"text-sm font-medium text-slate-800",children:L.category}),s.jsx("div",{className:"text-xs text-slate-500",children:L.description}),s.jsxs("div",{className:"text-xs text-slate-600",children:["Mode: ",E5(L.paymentMode)]}),L.receivedAgainst?s.jsxs("div",{className:"text-xs text-slate-600",children:["Against: ",L.receivedAgainst]}):null,s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-500",children:"Amount"}),s.jsxs("span",{className:L.entryType==="expense"?"text-red-600 font-semibold":"text-green-600 font-semibold",children:["Rs. ",ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-500",children:"Running Balance"}),s.jsxs("span",{className:L.runningBalance>=0?"text-green-700 font-semibold":"text-red-700 font-semibold",children:["Rs. ",L.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(L.remarks||L.reference||L.utrNumber||L.chequeNumber||L.attachmentUrl)&&s.jsxs("div",{className:"pt-1 border-t text-xs text-slate-600 space-y-1",children:[L.remarks?s.jsxs("div",{children:["Remarks: ",L.remarks]}):null,L.reference?s.jsxs("div",{children:["Ref: ",L.reference]}):null,L.utrNumber?s.jsxs("div",{children:["UTR: ",L.utrNumber]}):null,L.chequeNumber?s.jsxs("div",{children:["Cheque: ",L.chequeNumber]}):null,L.attachmentUrl?s.jsxs("div",{children:["Attach:"," ",s.jsx("a",{className:"text-blue-600 underline",href:L.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(L.attachmentUrl)})]}):null]})]},L.id)})}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left",children:"Date"}),s.jsx("th",{className:"p-3 text-left",children:"Type"}),s.jsx("th",{className:"p-3 text-left",children:"Category / Particulars"}),s.jsx("th",{className:"p-3 text-left",children:"Payment Mode"}),s.jsx("th",{className:"p-3 text-right",children:"Debit"}),s.jsx("th",{className:"p-3 text-right",children:"Credit"}),s.jsx("th",{className:"p-3 text-left",children:"Remarks"}),s.jsx("th",{className:"p-3 text-left",children:"Reference / Attachment"}),s.jsx("th",{className:"p-3 text-right",children:"Running Balance"}),s.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),s.jsx("tbody",{children:Ce?s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"Loading..."})}):De.length===0?s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"No ledger entries yet."})}):De.map(L=>{const ne=Number(L.amount)||0;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:L.entryDate}),s.jsx("td",{className:`p-3 font-semibold ${L.entryType==="expense"?"text-red-600":"text-green-600"}`,children:L.entryType==="expense"?"Expense":"Receipt"}),s.jsxs("td",{className:"p-3",children:[s.jsx("div",{className:"font-medium",children:L.category}),s.jsx("div",{className:"text-xs text-slate-500",children:L.description}),L.receivedAgainst?s.jsxs("div",{className:"text-xs text-slate-500",children:["Against: ",L.receivedAgainst]}):null]}),s.jsx("td",{className:"p-3",children:E5(L.paymentMode)}),s.jsx("td",{className:"p-3 text-right text-red-600",children:L.entryType==="expense"?ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),s.jsx("td",{className:"p-3 text-right text-green-600",children:L.entryType==="receipt"?ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),s.jsx("td",{className:"p-3",children:L.remarks||"-"}),s.jsxs("td",{className:"p-3",children:[s.jsx("div",{children:L.reference||"-"}),L.utrNumber?s.jsxs("div",{className:"text-xs text-slate-500",children:["UTR: ",L.utrNumber]}):null,L.chequeNumber?s.jsxs("div",{className:"text-xs text-slate-500",children:["Cheque: ",L.chequeNumber]}):null,L.attachmentUrl?s.jsxs("div",{className:"text-xs text-slate-500",children:["Attach:"," ",s.jsx("a",{className:"text-blue-600 underline",href:L.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(L.attachmentUrl)})]}):null]}),s.jsx("td",{className:`p-3 text-right font-semibold ${L.runningBalance>=0?"text-green-700":"text-red-700"}`,children:L.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(qe,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{L.entryType==="expense"?(j(L.id),F({entryDate:L.entryDate,category:L.category,description:L.description,amount:String(Number(L.amount)||0),paymentMode:L.paymentMode,reference:L.reference||"",attachmentUrl:L.attachmentUrl||""}),f(!0)):(I(L.id),q({entryDate:L.entryDate,amount:String(Number(L.amount)||0),receivedAgainst:L.receivedAgainst||"",paymentMode:L.paymentMode,remarks:L.remarks||"",reference:L.reference||"",chequeNumber:L.chequeNumber||"",bankName:L.bankName||"",chequeDate:L.chequeDate||"",attachmentUrl:L.attachmentUrl||""}),m(!0))},children:s.jsx($u,{className:"w-3.5 h-3.5"})}),s.jsx(qe,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-600",onClick:()=>P(L),disabled:ce.isPending,children:s.jsx(vr,{className:"w-3.5 h-3.5"})})]})})]},L.id)})})]})}),s.jsxs("div",{className:"border-t bg-slate-50 p-3 text-sm flex flex-wrap gap-4",children:[s.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[s.jsx(m_,{className:"w-4 h-4"})," Total Budget: Rs. ",ge.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:"font-semibold text-red-600",children:["Total Expenses: Rs. ",ge.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:"font-semibold text-green-600",children:["Total Received: Rs. ",ge.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:`font-semibold ${ge.balanceAmount>=0?"text-green-700":"text-red-700"}`,children:[s.jsx(l_,{className:"w-4 h-4 inline mr-1"})," Balance: Rs. ",ge.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),s.jsx(xi,{open:!!S,onOpenChange:L=>!L&&P(null),children:s.jsxs(ci,{className:"sm:max-w-md",children:[s.jsxs(ui,{children:[s.jsx(di,{children:"Delete Ledger Entry?"}),s.jsx(sf,{children:S?`Are you sure you want to delete this ${S.entryType} entry dated ${S.entryDate}? This action cannot be undone.`:"This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(qe,{type:"button",variant:"outline",autoFocus:!0,onClick:()=>P(null),disabled:ce.isPending,"data-testid":"button-cancel-delete-ledger-entry",children:"Cancel"}),s.jsx(qe,{type:"button",variant:"destructive",onClick:()=>S&&ce.mutate(S.id),disabled:ce.isPending,"data-testid":"button-confirm-delete-ledger-entry",children:ce.isPending?"Deleting...":"Delete"})]})]})})]})}):s.jsx(qs,{user:r,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),s.jsx(qe,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})})}const s7=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],qp=t=>Number(t||0)||0;function i7(){const{id:t}=Xu(),e=Number(t),[,n]=za(),{data:r}=Ea(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),{data:p,isLoading:m}=Ln({queryKey:["/api/clients",e],queryFn:async()=>{const W=await fetch(`/api/clients/${e}`,{credentials:"include"});if(!W.ok)throw new Error("Failed to load client");return W.json()},enabled:Number.isFinite(e)&&e>0}),{data:b=[],isLoading:j}=Ln({queryKey:["/api/client-ledger/projects",e],queryFn:async()=>{const W=await fetch("/api/projects",{credentials:"include"});if(!W.ok)throw new Error("Failed to load projects");return(await W.json()).filter(Q=>Q.clientId===e)},enabled:Number.isFinite(e)&&e>0}),{data:y=[],isLoading:I}=Ln({queryKey:["/api/client-ledger/invoices",e],queryFn:async()=>{const W=await fetch("/api/invoices",{credentials:"include"});if(!W.ok)throw new Error("Failed to load invoices");const te=await W.json(),Q=new Set(b.map(ue=>ue.id));return te.filter(ue=>Q.has(ue.projectId))},enabled:b.length>0}),{data:S=[],isLoading:P}=Ln({queryKey:["/api/client-ledger/receipts",e,b.map(W=>W.id).join(",")],queryFn:async()=>(await Promise.all(b.map(async te=>{const Q=await fetch(`/api/projects/${te.id}/ledger/entries`,{credentials:"include"});return Q.ok?(await Q.json()).filter(O=>O.entryType==="receipt"):[]}))).flat(),enabled:b.length>0}),_=Dr({mutationFn:async()=>{if(!c.projectId)throw new Error("Select a project");if(!c.entryDate||!c.amount)throw new Error("Date and amount are required");const W={entryDate:c.entryDate,entryType:"receipt",category:"Client Receipt",description:"Amount received from client",amount:c.amount,paymentMode:c.paymentMode,remarks:c.remarks,reference:c.reference,receivedAgainst:c.receivedAgainst,chequeNumber:"",bankName:"",chequeDate:"",utrNumber:"",attachmentUrl:""};await wn("POST",`/api/projects/${c.projectId}/ledger/entries`,W)},onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/client-ledger/receipts",e]}),u(!1),f({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),a({title:"Saved",description:"Received amount has been added."})},onError:W=>{a({title:"Error",description:W.message||"Failed to save",variant:"destructive"})}}),F=k.useMemo(()=>{const W=new Map;return b.forEach(te=>W.set(te.id,te)),W},[b]),v=k.useMemo(()=>b.map(W=>{const te=y.filter(ue=>ue.projectId===W.id).reduce((ue,O)=>ue+qp(O.grandTotal),0),Q=S.filter(ue=>ue.projectId===W.id).reduce((ue,O)=>ue+qp(O.amount),0);return{projectId:W.id,projectName:W.projectName,debit:te,credit:Q,balance:te-Q}}),[b,y,S]),q=k.useMemo(()=>{const W=v.reduce((Q,ue)=>Q+ue.debit,0),te=v.reduce((Q,ue)=>Q+ue.credit,0);return{debit:W,credit:te,balance:W-te}},[v]),ee=k.useMemo(()=>{const W=y.map(Q=>({date:new Date(Q.createdAt),dateText:new Date(Q.createdAt).toLocaleDateString("en-GB"),particulars:`Invoice ${Q.invoiceNumber} - ${F.get(Q.projectId)?.projectName||"Project"}`,vchType:"Sales",vchNo:Q.invoiceNumber||String(Q.id),debit:qp(Q.grandTotal),credit:0})),te=S.map(Q=>({date:new Date(Q.entryDate),dateText:new Date(Q.entryDate).toLocaleDateString("en-GB"),particulars:`Receipt - ${F.get(Q.projectId)?.projectName||"Project"}`,vchType:"Receipt",vchNo:Q.reference||String(Q.id),debit:0,credit:qp(Q.amount)}));return[...W,...te].sort((Q,ue)=>Q.date.getTime()-ue.date.getTime())},[y,S,F]),ae=()=>{const W=new un({orientation:"portrait",unit:"mm",format:"a4"}),te=12,ue=210-te*2;let O=15;W.setFont("helvetica","bold"),W.setFontSize(14),W.text(`Client Ledger - ${p?.name||"Client"}`,te,O),O+=7,W.setFont("helvetica","normal"),W.setFontSize(10),W.text(`Date: ${new Date().toLocaleDateString("en-GB")}`,te,O),O+=7;const R=[{key:"date",label:"Date",width:24},{key:"part",label:"Particulars",width:68},{key:"type",label:"Vch Type",width:24},{key:"no",label:"Vch No.",width:26},{key:"debit",label:"Debit",width:24},{key:"credit",label:"Credit",width:24}],z=()=>{W.setFont("helvetica","bold"),W.setFontSize(9);let Ae=te;R.forEach(Pe=>{W.text(Pe.label,Ae+1,O),Ae+=Pe.width}),O+=2,W.line(te,O,te+ue,O),O+=4};z(),W.setFont("helvetica","normal"),W.setFontSize(9),ee.forEach(Ae=>{O>276&&(W.addPage(),O=15,z(),W.setFont("helvetica","normal"));let Pe=te;[Ae.dateText,Ae.particulars,Ae.vchType,Ae.vchNo,Ae.debit>0?Ae.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"",Ae.credit>0?Ae.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):""].forEach((ge,De)=>{const se=R[De],M=se.key==="debit"||se.key==="credit";W.text(String(ge),M?Pe+se.width-1:Pe+1,O,{align:M?"right":"left"}),Pe+=se.width}),O+=5}),O+=2,W.line(te+ue-48,O,te+ue,O),O+=5,W.setFont("helvetica","bold"),W.text(`Total Debit: ${q.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+ue-2,O,{align:"right"}),O+=5,W.text(`Total Credit: ${q.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+ue-2,O,{align:"right"}),O+=5;const Y=q.balance>=0?"Closing Balance (Dr)":"Closing Balance (Cr)";W.text(`${Y}: ${Math.abs(q.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+ue-2,O,{align:"right"});const Ce=`ClientLedger_${p?.name?.replace(/\s+/g,"_")||"Client"}_${new Date().toISOString().slice(0,10)}.pdf`;W.save(Ce)};return m||j?s.jsx(qs,{user:r,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):p?s.jsx(qs,{user:r,children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qe,{variant:"ghost",size:"icon",onClick:()=>n("/clients"),children:s.jsx(cf,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(am,{className:"h-6 w-6 text-[#d92134]"}),"Client Ledger"]}),s.jsx("p",{className:"text-sm text-slate-500",children:p.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(xi,{open:o,onOpenChange:u,children:[s.jsx(Ah,{asChild:!0,children:s.jsxs(qe,{className:"bg-[#d92134] hover:bg-[#b91c2c]","data-testid":"button-add-client-receipt",children:[s.jsx(_a,{className:"h-4 w-4 mr-2"}),"Add Received Amount"]})}),s.jsxs(ci,{className:"sm:max-w-xl",children:[s.jsx(ui,{children:s.jsx(di,{children:"Add Received Amount"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Rl,{value:c.projectId,onValueChange:W=>f(te=>({...te,projectId:W})),children:[s.jsx(Yo,{children:s.jsx(Dl,{placeholder:"Select project"})}),s.jsx(Xo,{children:b.map(W=>s.jsx(ha,{value:String(W.id),children:W.projectName},W.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(et,{type:"date",value:c.entryDate,onChange:W=>f(te=>({...te,entryDate:W.target.value}))}),s.jsx(et,{type:"number",placeholder:"Amount",value:c.amount,onChange:W=>f(te=>({...te,amount:W.target.value}))})]}),s.jsxs(Rl,{value:c.paymentMode,onValueChange:W=>f(te=>({...te,paymentMode:W})),children:[s.jsx(Yo,{children:s.jsx(Dl,{placeholder:"Payment mode"})}),s.jsx(Xo,{children:s7.map(W=>s.jsx(ha,{value:W.value,children:W.label},W.value))})]}),s.jsx(et,{placeholder:"Received against",value:c.receivedAgainst,onChange:W=>f(te=>({...te,receivedAgainst:W.target.value}))}),s.jsx(et,{placeholder:"Reference / voucher no.",value:c.reference,onChange:W=>f(te=>({...te,reference:W.target.value}))}),s.jsx(Rr,{placeholder:"Remarks",value:c.remarks,onChange:W=>f(te=>({...te,remarks:W.target.value}))}),s.jsx(qe,{onClick:()=>_.mutate(),className:"w-full",disabled:_.isPending,children:_.isPending?"Saving...":"Save Receipt"})]})]})]}),s.jsxs(qe,{variant:"outline",onClick:ae,"data-testid":"button-export-client-ledger-pdf",children:[s.jsx(Dh,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Debit (Invoices)"}),s.jsxs("p",{className:"text-xl font-bold text-red-600",children:["Rs. ",q.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Credit (Received)"}),s.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",q.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(Cn,{children:s.jsxs(_n,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Closing Balance"}),s.jsxs("p",{className:`text-xl font-bold ${q.balance>=0?"text-red-700":"text-green-700"}`,children:["Rs. ",Math.abs(q.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",q.balance>=0?"Dr":"Cr"]})]})})]}),s.jsxs(Cn,{children:[s.jsx(ss,{children:s.jsx(is,{children:"Project-wise Ledger Summary"})}),s.jsx(_n,{className:"p-0 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left",children:"Project"}),s.jsx("th",{className:"p-3 text-right",children:"Debit (Invoice)"}),s.jsx("th",{className:"p-3 text-right",children:"Credit (Received)"}),s.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),s.jsx("tbody",{children:I||P?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"Loading..."})}):v.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"No projects found for this client."})}):v.map(W=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:W.projectName}),s.jsx("td",{className:"p-3 text-right text-red-600",children:W.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3 text-right text-green-600",children:W.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsxs("td",{className:`p-3 text-right font-semibold ${W.balance>=0?"text-red-700":"text-green-700"}`,children:[Math.abs(W.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",W.balance>=0?"Dr":"Cr"]})]},W.projectId))})]})})]})]})}):s.jsx(qs,{user:r,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Client not found"}),s.jsx(qe,{onClick:()=>n("/clients"),className:"mt-4",children:"Back to Clients"})]})})}const a7=dE.extend({logoUrl:U.string().min(1,"Logo URL is required").max(5e5,"Logo data too large"),headerUrl:U.string().min(1,"Header URL is required").max(5e5,"Header data too large"),footerUrl:U.string().min(1,"Footer URL is required").max(5e5,"Footer data too large"),stampUrl:U.string().min(1,"Stamp URL is required").max(5e5,"Stamp data too large"),storeKeeperSignUrl:U.string().max(5e5,"Store Keeper signature data too large"),qcEnggSignUrl:U.string().max(5e5,"Qc Engg. signature data too large"),storeInchargeSignUrl:U.string().max(5e5,"Store Incharge signature data too large"),plantHeadSignUrl:U.string().max(5e5,"Plant Head signature data too large"),primaryColor:U.string().min(4,"Primary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),secondaryColor:U.string().min(4,"Secondary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),email:U.string().email("Valid email is required")});function o7(){const{toast:t}=$a(),{data:e}=Ea(),n=k.useRef(null),r=mf({resolver:gf(a7),defaultValues:{logoUrl:"https://reviranexgen.com/assets/logo-with-name.png",headerUrl:"https://reviranexgen.com/assets/header.jpg",footerUrl:"https://reviranexgen.com/assets/footer.jpg",stampUrl:"https://reviranexgen.com/assets/stamp.png",storeKeeperSignUrl:"",qcEnggSignUrl:"",storeInchargeSignUrl:"",plantHeadSignUrl:"",primaryColor:"#da2032",secondaryColor:"#2f3591",entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",companyGstin:"07AAPCR3026H1ZA",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:a,isLoading:o}=Ln({queryKey:["/api/branding"]});k.useEffect(()=>{a&&r.reset({logoUrl:a.logoUrl,headerUrl:a.headerUrl,footerUrl:a.footerUrl,stampUrl:a.stampUrl,storeKeeperSignUrl:a.storeKeeperSignUrl||"",qcEnggSignUrl:a.qcEnggSignUrl||"",storeInchargeSignUrl:a.storeInchargeSignUrl||"",plantHeadSignUrl:a.plantHeadSignUrl||"",primaryColor:a.primaryColor,secondaryColor:a.secondaryColor,entityName:a.entityName,cin:a.cin,companyGstin:a.companyGstin,website:a.website,email:a.email,headOfficeAddress:a.headOfficeAddress,workshopAddress:a.workshopAddress})},[a,r]);const u=Dr({mutationFn:async v=>(await wn("PUT","/api/branding",v)).json(),onSuccess:v=>{r.reset({logoUrl:v.logoUrl,headerUrl:v.headerUrl,footerUrl:v.footerUrl,stampUrl:v.stampUrl,storeKeeperSignUrl:v.storeKeeperSignUrl||"",qcEnggSignUrl:v.qcEnggSignUrl||"",storeInchargeSignUrl:v.storeInchargeSignUrl||"",plantHeadSignUrl:v.plantHeadSignUrl||"",primaryColor:v.primaryColor,secondaryColor:v.secondaryColor,entityName:v.entityName,cin:v.cin,companyGstin:v.companyGstin,website:v.website,email:v.email,headOfficeAddress:v.headOfficeAddress,workshopAddress:v.workshopAddress}),Bn.invalidateQueries({queryKey:["/api/branding"]}),t({title:"Branding updated",description:"Your branding settings have been saved successfully."})},onError:v=>{t({title:"Error",description:v.message||"Failed to update branding",variant:"destructive"})}}),c=v=>{u.mutate(v)};if(o)return s.jsx(qs,{user:e,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const f=r.watch("logoUrl"),p=r.watch("headerUrl"),m=r.watch("footerUrl"),b=r.watch("stampUrl"),j=r.watch("storeKeeperSignUrl"),y=r.watch("qcEnggSignUrl"),I=r.watch("storeInchargeSignUrl"),S=r.watch("plantHeadSignUrl"),P=r.watch("primaryColor"),_=r.watch("secondaryColor"),F=v=>q=>{const ee=q.target.files?.[0];if(ee){if(ee.size>500*1024){t({title:"File too large",description:"Please upload an image smaller than 500KB",variant:"destructive"});return}const ae=new FileReader;ae.onloadend=()=>{const W=ae.result;r.setValue(v,W,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},ae.readAsDataURL(ee)}};return s.jsx(qs,{user:e,children:s.jsx(vf,{...r,children:s.jsxs("form",{onSubmit:r.handleSubmit(c),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg",children:s.jsx(i1,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your company branding and identity"})]})]}),s.jsxs(qe,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-primary to-primary/90","data-testid":"button-save-branding",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),u.isPending?"Saving...":"Save Changes"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Cn,{children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(x2,{className:"w-5 h-5"}),"Company Logo"]}),s.jsx(Zc,{children:"Upload or provide a URL for your company logo (max 500KB)"})]}),s.jsx(_n,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-full max-w-xs h-32 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:f?s.jsx("img",{src:f,alt:"Company Logo",className:"max-h-full max-w-full object-contain p-2","data-testid":"img-logo-preview"}):s.jsxs("div",{className:"text-slate-400 text-center",children:[s.jsx(x2,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})}),s.jsxs("div",{className:"w-full space-y-3",children:[s.jsx(ar,{control:r.control,name:"logoUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Logo URL"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"https://example.com/logo.png","data-testid":"input-logo-url"})}),s.jsx(nr,{})]})}),s.jsx("div",{className:"text-center text-sm text-slate-500",children:"or"}),s.jsx("input",{type:"file",ref:n,onChange:F("logoUrl"),accept:"image/*",className:"hidden","data-testid":"input-logo-file"}),s.jsxs(qe,{type:"button",variant:"outline",className:"w-full",onClick:()=>n.current?.click(),"data-testid":"button-upload-logo",children:[s.jsx($c,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]})]})})]}),s.jsxs(Cn,{children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(i1,{className:"w-5 h-5"}),"Brand Colors"]}),s.jsx(Zc,{children:"Set your primary and secondary brand colors"})]}),s.jsx(_n,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ar,{control:r.control,name:"primaryColor",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Primary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:v.value,onChange:v.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-primary-color"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"#da2032",className:"flex-1","data-testid":"input-primary-color-text"})})]}),s.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:P}}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"secondaryColor",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Secondary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:v.value,onChange:v.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-secondary-color"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"#2f3591",className:"flex-1","data-testid":"input-secondary-color-text"})})]}),s.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:_}}),s.jsx(nr,{})]})})]})})]}),s.jsxs(Cn,{className:"lg:col-span-2",children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(zc,{className:"w-5 h-5"}),"Document Assets"]}),s.jsx(Zc,{children:"Header, footer, and stamp images for documents (max 500KB each)"})]}),s.jsx(_n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:p?s.jsx("img",{src:p,alt:"Header",className:"max-h-full max-w-full object-contain","data-testid":"img-header-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No header"]})}),s.jsx(ar,{control:r.control,name:"headerUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Header Image"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"https://example.com/header.jpg","data-testid":"input-header-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"header-file",onChange:F("headerUrl"),accept:"image/*",className:"hidden","data-testid":"input-header-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("header-file")?.click(),"data-testid":"button-upload-header",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload Header"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:m?s.jsx("img",{src:m,alt:"Footer",className:"max-h-full max-w-full object-contain","data-testid":"img-footer-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No footer"]})}),s.jsx(ar,{control:r.control,name:"footerUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Footer Image"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"https://example.com/footer.jpg","data-testid":"input-footer-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"footer-file",onChange:F("footerUrl"),accept:"image/*",className:"hidden","data-testid":"input-footer-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("footer-file")?.click(),"data-testid":"button-upload-footer",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload Footer"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:b?s.jsx("img",{src:b,alt:"Stamp & Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-stamp-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(d_,{className:"w-6 h-6 mx-auto mb-1"}),"No stamp"]})}),s.jsx(ar,{control:r.control,name:"stampUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Company Stamp & Signature"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"https://example.com/stamp.png","data-testid":"input-stamp-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"stamp-file",onChange:F("stampUrl"),accept:"image/*",className:"hidden","data-testid":"input-stamp-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("stamp-file")?.click(),"data-testid":"button-upload-stamp",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload Stamp"]})]})]})})]}),s.jsxs(Cn,{className:"lg:col-span-2",children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(zc,{className:"w-5 h-5"}),"Signatures"]}),s.jsx(Zc,{children:"Upload signature images for Gate Pass roles (max 500KB each)"})]}),s.jsx(_n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:j?s.jsx("img",{src:j,alt:"Store Keeper Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-keeper-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(ar,{control:r.control,name:"storeKeeperSignUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Store Keeper"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"Signature URL","data-testid":"input-store-keeper-sign-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"store-keeper-sign-file",onChange:F("storeKeeperSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-keeper-sign-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-keeper-sign-file")?.click(),"data-testid":"button-upload-store-keeper-sign",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:y?s.jsx("img",{src:y,alt:"Qc Engg. Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-qc-engg-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(ar,{control:r.control,name:"qcEnggSignUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Qc Engg."}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"Signature URL","data-testid":"input-qc-engg-sign-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"qc-engg-sign-file",onChange:F("qcEnggSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-qc-engg-sign-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("qc-engg-sign-file")?.click(),"data-testid":"button-upload-qc-engg-sign",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:I?s.jsx("img",{src:I,alt:"Store Incharge Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-incharge-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(ar,{control:r.control,name:"storeInchargeSignUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Store Incharge"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"Signature URL","data-testid":"input-store-incharge-sign-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"store-incharge-sign-file",onChange:F("storeInchargeSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-incharge-sign-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-incharge-sign-file")?.click(),"data-testid":"button-upload-store-incharge-sign",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:S?s.jsx("img",{src:S,alt:"Plant Head Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-plant-head-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(ar,{control:r.control,name:"plantHeadSignUrl",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Plant Head"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"Signature URL","data-testid":"input-plant-head-sign-url"})}),s.jsx(nr,{})]})}),s.jsx("input",{type:"file",id:"plant-head-sign-file",onChange:F("plantHeadSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-plant-head-sign-file"}),s.jsxs(qe,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("plant-head-sign-file")?.click(),"data-testid":"button-upload-plant-head-sign",children:[s.jsx($c,{className:"w-3 h-3 mr-2"}),"Upload"]})]})]})})]}),s.jsxs(Cn,{className:"lg:col-span-2",children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(Z1,{className:"w-5 h-5"}),"Registry Data Core"]}),s.jsx(Zc,{children:"Company registration and legal information"})]}),s.jsx(_n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ar,{control:r.control,name:"entityName",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Entity Registered Identity"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"cin",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Corporate Registration (CIN)"}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"website",render:({field:v})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(Rb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"companyGstin",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Company GST No."}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"07AAPCR3026H1ZA","data-testid":"input-company-gstin"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"email",render:({field:v})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(fu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),s.jsx(tr,{children:s.jsx(et,{...v,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),s.jsx(nr,{})]})})]})})]}),s.jsxs(Cn,{className:"lg:col-span-2",children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(nu,{className:"w-5 h-5"}),"Locations"]}),s.jsx(Zc,{children:"Head office and workshop addresses"})]}),s.jsx(_n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ar,{control:r.control,name:"headOfficeAddress",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Head Office (H.O)"}),s.jsx(tr,{children:s.jsx(Rr,{...v,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-head-office-address"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:r.control,name:"workshopAddress",render:({field:v})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Workshop"}),s.jsx(tr,{children:s.jsx(Rr,{...v,placeholder:"Flat No. 302, 3rd Floor Rajat Residency...",rows:3,"data-testid":"input-workshop-address"})}),s.jsx(nr,{})]})})]})})]})]})]})})})}const l7=U.object({entityName:U.string().min(1,"Entity name is required"),cin:U.string().min(1,"CIN is required"),website:U.string().min(1,"Website is required"),email:U.string().email("Valid email is required"),headOfficeAddress:U.string().min(1,"Head office address is required"),workshopAddress:U.string().min(1,"Workshop address is required")});function c7(){const{toast:t}=$a(),{data:e}=Ea(),n=mf({resolver:gf(l7),defaultValues:{entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:r,isLoading:a}=Ln({queryKey:["/api/branding"]});k.useEffect(()=>{r&&n.reset({entityName:r.entityName,cin:r.cin,website:r.website,email:r.email,headOfficeAddress:r.headOfficeAddress,workshopAddress:r.workshopAddress})},[r,n]);const o=Dr({mutationFn:async c=>(await wn("PUT","/api/branding",{...r,...c})).json(),onSuccess:()=>{Bn.invalidateQueries({queryKey:["/api/branding"]}),t({title:"Settings updated",description:"Your company registry data has been saved successfully."})},onError:c=>{t({title:"Error",description:c.message||"Failed to update settings",variant:"destructive"})}}),u=c=>{o.mutate(c)};return a?s.jsx(qs,{user:e,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#da2032]"})})}):s.jsx(qs,{user:e,children:s.jsx(vf,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(u),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-[#da2032] text-white shadow-lg",children:s.jsx(Z1,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage company registry information"})]})]}),s.jsxs(qe,{type:"submit",disabled:o.isPending,className:"bg-[#da2032] hover:bg-[#c41b2b]","data-testid":"button-save-settings",children:[s.jsx(uf,{className:"w-4 h-4 mr-2"}),o.isPending?"Saving...":"Save Changes"]})]}),s.jsxs(Cn,{children:[s.jsxs(ss,{children:[s.jsxs(is,{className:"flex items-center gap-2",children:[s.jsx(Aa,{className:"w-5 h-5"}),"Company Registry Data Core"]}),s.jsx(Zc,{children:"Company registration and legal information"})]}),s.jsx(_n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ar,{control:n.control,name:"entityName",render:({field:c})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Entity Registered Identity"}),s.jsx(tr,{children:s.jsx(et,{...c,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:n.control,name:"website",render:({field:c})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(Rb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),s.jsx(tr,{children:s.jsx(et,{...c,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:n.control,name:"cin",render:({field:c})=>s.jsxs(Jn,{children:[s.jsx(er,{children:"Corporate Registration (CIN)"}),s.jsx(tr,{children:s.jsx(et,{...c,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:n.control,name:"email",render:({field:c})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(fu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),s.jsx(tr,{children:s.jsx(et,{...c,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:n.control,name:"workshopAddress",render:({field:c})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(nu,{className:"w-4 h-4"}),"Nagpur Regional Hub"]}),s.jsx(tr,{children:s.jsx(Rr,{...c,placeholder:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023",rows:3,"data-testid":"input-nagpur-address"})}),s.jsx(nr,{})]})}),s.jsx(ar,{control:n.control,name:"headOfficeAddress",render:({field:c})=>s.jsxs(Jn,{children:[s.jsxs(er,{className:"flex items-center gap-2",children:[s.jsx(nu,{className:"w-4 h-4"}),"Delhi Strategic H.O."]}),s.jsx(tr,{children:s.jsx(Rr,{...c,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-delhi-address"})}),s.jsx(nr,{})]})})]})})]})]})})})}function u7(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 p-4",children:s.jsx(Cn,{className:"w-full max-w-md border-slate-200 shadow-xl",children:s.jsxs(_n,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(r_,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"The page you are looking for does not exist or has been moved."}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx($5,{href:"/",children:s.jsx(qe,{className:"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20",children:"Return Home"})})})]})})})}function fa({component:t}){const{data:e,isLoading:n}=Ea();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx(s1,{className:"w-8 h-8 animate-spin text-primary"})}):e?s.jsx(t,{}):s.jsx(S3,{to:"/"})}function d7(){return s.jsxs(N3,{children:[s.jsx(Oi,{path:"/",component:VE}),s.jsx(Oi,{path:"/dashboard",children:s.jsx(fa,{component:sL})}),s.jsx(Oi,{path:"/clients",children:s.jsx(fa,{component:lL})}),s.jsx(Oi,{path:"/projects",children:s.jsx(fa,{component:qL})}),s.jsx(Oi,{path:"/users",children:s.jsx(fa,{component:GL})}),s.jsx(Oi,{path:"/projects/:projectId/quotation/:quotationId",children:s.jsx(fa,{component:A5})}),s.jsx(Oi,{path:"/projects/:projectId/quotation",children:s.jsx(fa,{component:A5})}),s.jsx(Oi,{path:"/projects/:id/invoice/:invoiceId",children:s.jsx(fa,{component:P5})}),s.jsx(Oi,{path:"/projects/:id/invoice",children:s.jsx(fa,{component:P5})}),s.jsx(Oi,{path:"/projects/:id/gate-pass/:gatePassId",children:s.jsx(fa,{component:k5})}),s.jsx(Oi,{path:"/projects/:id/gate-pass",children:s.jsx(fa,{component:k5})}),s.jsx(Oi,{path:"/projects/:id/delivery-challan/:deliveryChallanId",children:s.jsx(fa,{component:T5})}),s.jsx(Oi,{path:"/projects/:id/delivery-challan",children:s.jsx(fa,{component:T5})}),s.jsx(Oi,{path:"/projects/:id/ledger",children:s.jsx(fa,{component:r7})}),s.jsx(Oi,{path:"/clients/:id/ledger",children:s.jsx(fa,{component:i7})}),s.jsx(Oi,{path:"/branding",children:s.jsx(fa,{component:o7})}),s.jsx(Oi,{path:"/settings",children:s.jsx(fa,{component:c7})}),s.jsx(Oi,{component:u7})]})}function f7(){return s.jsx($3,{client:Bn,children:s.jsx(SP,{children:s.jsxs(mE,{children:[s.jsx(d7,{}),s.jsx(Y_,{})]})})})}t3.createRoot(document.getElementById("root")).render(s.jsx(f7,{}));export{Zr as _,h7 as c,L5 as g};
