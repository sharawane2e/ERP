function Vj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var u7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kg={exports:{}},Uf={},Qg={exports:{}},lr={};var Fx;function Hj(){if(Fx)return lr;Fx=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function j(se){return se===null||typeof se!="object"?null:(se=b&&se[b]||se["@@iterator"],typeof se=="function"?se:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,S={};function P(se,O,E){this.props=se,this.context=O,this.refs=S,this.updater=E||y}P.prototype.isReactComponent={},P.prototype.setState=function(se,O){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,O,"setState")},P.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function _(){}_.prototype=P.prototype;function I(se,O,E){this.props=se,this.context=O,this.refs=S,this.updater=E||y}var v=I.prototype=new _;v.constructor=I,D(v,P.prototype),v.isPureReactComponent=!0;var B=Array.isArray,ee=Object.prototype.hasOwnProperty,ae={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(se,O,E){var ne,me={},ye=null,be=null;if(O!=null)for(ne in O.ref!==void 0&&(be=O.ref),O.key!==void 0&&(ye=""+O.key),O)ee.call(O,ne)&&!W.hasOwnProperty(ne)&&(me[ne]=O[ne]);var Re=arguments.length-2;if(Re===1)me.children=E;else if(1<Re){for(var Ie=Array(Re),Me=0;Me<Re;Me++)Ie[Me]=arguments[Me+2];me.children=Ie}if(se&&se.defaultProps)for(ne in Re=se.defaultProps,Re)me[ne]===void 0&&(me[ne]=Re[ne]);return{$$typeof:t,type:se,key:ye,ref:be,props:me,_owner:ae.current}}function Q(se,O){return{$$typeof:t,type:se.type,key:O,ref:se.ref,props:se.props,_owner:se._owner}}function de(se){return typeof se=="object"&&se!==null&&se.$$typeof===t}function F(se){var O={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(E){return O[E]})}var L=/\/+/g;function z(se,O){return typeof se=="object"&&se!==null&&se.key!=null?F(""+se.key):O.toString(36)}function Y(se,O,E,ne,me){var ye=typeof se;(ye==="undefined"||ye==="boolean")&&(se=null);var be=!1;if(se===null)be=!0;else switch(ye){case"string":case"number":be=!0;break;case"object":switch(se.$$typeof){case t:case e:be=!0}}if(be)return be=se,me=me(be),se=ne===""?"."+z(be,0):ne,B(me)?(E="",se!=null&&(E=se.replace(L,"$&/")+"/"),Y(me,O,E,"",function(Me){return Me})):me!=null&&(de(me)&&(me=Q(me,E+(!me.key||be&&be.key===me.key?"":(""+me.key).replace(L,"$&/")+"/")+se)),O.push(me)),1;if(be=0,ne=ne===""?".":ne+":",B(se))for(var Re=0;Re<se.length;Re++){ye=se[Re];var Ie=ne+z(ye,Re);be+=Y(ye,O,E,Ie,me)}else if(Ie=j(se),typeof Ie=="function")for(se=Ie.call(se),Re=0;!(ye=se.next()).done;)ye=ye.value,Ie=ne+z(ye,Re++),be+=Y(ye,O,E,Ie,me);else if(ye==="object")throw O=String(se),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return be}function Ce(se,O,E){if(se==null)return se;var ne=[],me=0;return Y(se,ne,"","",function(ye){return O.call(E,ye,me++)}),ne}function _e(se){if(se._status===-1){var O=se._result;O=O(),O.then(function(E){(se._status===0||se._status===-1)&&(se._status=1,se._result=E)},function(E){(se._status===0||se._status===-1)&&(se._status=2,se._result=E)}),se._status===-1&&(se._status=0,se._result=O)}if(se._status===1)return se._result.default;throw se._result}var Ae={current:null},ce={transition:null},ge={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ce,ReactCurrentOwner:ae};function De(){throw Error("act(...) is not supported in production builds of React.")}return lr.Children={map:Ce,forEach:function(se,O,E){Ce(se,function(){O.apply(this,arguments)},E)},count:function(se){var O=0;return Ce(se,function(){O++}),O},toArray:function(se){return Ce(se,function(O){return O})||[]},only:function(se){if(!de(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},lr.Component=P,lr.Fragment=n,lr.Profiler=a,lr.PureComponent=I,lr.StrictMode=r,lr.Suspense=f,lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,lr.act=De,lr.cloneElement=function(se,O,E){if(se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+se+".");var ne=D({},se.props),me=se.key,ye=se.ref,be=se._owner;if(O!=null){if(O.ref!==void 0&&(ye=O.ref,be=ae.current),O.key!==void 0&&(me=""+O.key),se.type&&se.type.defaultProps)var Re=se.type.defaultProps;for(Ie in O)ee.call(O,Ie)&&!W.hasOwnProperty(Ie)&&(ne[Ie]=O[Ie]===void 0&&Re!==void 0?Re[Ie]:O[Ie])}var Ie=arguments.length-2;if(Ie===1)ne.children=E;else if(1<Ie){Re=Array(Ie);for(var Me=0;Me<Ie;Me++)Re[Me]=arguments[Me+2];ne.children=Re}return{$$typeof:t,type:se.type,key:me,ref:ye,props:ne,_owner:be}},lr.createContext=function(se){return se={$$typeof:u,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},se.Provider={$$typeof:o,_context:se},se.Consumer=se},lr.createElement=te,lr.createFactory=function(se){var O=te.bind(null,se);return O.type=se,O},lr.createRef=function(){return{current:null}},lr.forwardRef=function(se){return{$$typeof:c,render:se}},lr.isValidElement=de,lr.lazy=function(se){return{$$typeof:m,_payload:{_status:-1,_result:se},_init:_e}},lr.memo=function(se,O){return{$$typeof:p,type:se,compare:O===void 0?null:O}},lr.startTransition=function(se){var O=ce.transition;ce.transition={};try{se()}finally{ce.transition=O}},lr.unstable_act=De,lr.useCallback=function(se,O){return Ae.current.useCallback(se,O)},lr.useContext=function(se){return Ae.current.useContext(se)},lr.useDebugValue=function(){},lr.useDeferredValue=function(se){return Ae.current.useDeferredValue(se)},lr.useEffect=function(se,O){return Ae.current.useEffect(se,O)},lr.useId=function(){return Ae.current.useId()},lr.useImperativeHandle=function(se,O,E){return Ae.current.useImperativeHandle(se,O,E)},lr.useInsertionEffect=function(se,O){return Ae.current.useInsertionEffect(se,O)},lr.useLayoutEffect=function(se,O){return Ae.current.useLayoutEffect(se,O)},lr.useMemo=function(se,O){return Ae.current.useMemo(se,O)},lr.useReducer=function(se,O,E){return Ae.current.useReducer(se,O,E)},lr.useRef=function(se){return Ae.current.useRef(se)},lr.useState=function(se){return Ae.current.useState(se)},lr.useSyncExternalStore=function(se,O,E){return Ae.current.useSyncExternalStore(se,O,E)},lr.useTransition=function(){return Ae.current.useTransition()},lr.version="18.3.1",lr}var Ox;function Tm(){return Ox||(Ox=1,Qg.exports=Hj()),Qg.exports}var Mx;function Wj(){if(Mx)return Uf;Mx=1;var t=Tm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,b={},j=null,y=null;p!==void 0&&(j=""+p),f.key!==void 0&&(j=""+f.key),f.ref!==void 0&&(y=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(b[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)b[m]===void 0&&(b[m]=f[m]);return{$$typeof:e,type:c,key:j,ref:y,props:b,_owner:a.current}}return Uf.Fragment=n,Uf.jsx=u,Uf.jsxs=u,Uf}var Bx;function Gj(){return Bx||(Bx=1,Kg.exports=Wj()),Kg.exports}var i=Gj(),yp={},Zg={exports:{}},qa={},Yg={exports:{}},Xg={};var qx;function Kj(){return qx||(qx=1,(function(t){function e(ce,ge){var De=ce.length;ce.push(ge);e:for(;0<De;){var se=De-1>>>1,O=ce[se];if(0<a(O,ge))ce[se]=ge,ce[De]=O,De=se;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var ge=ce[0],De=ce.pop();if(De!==ge){ce[0]=De;e:for(var se=0,O=ce.length,E=O>>>1;se<E;){var ne=2*(se+1)-1,me=ce[ne],ye=ne+1,be=ce[ye];if(0>a(me,De))ye<O&&0>a(be,me)?(ce[se]=be,ce[ye]=De,se=ye):(ce[se]=me,ce[ne]=De,se=ne);else if(ye<O&&0>a(be,De))ce[se]=be,ce[ye]=De,se=ye;else break e}}return ge}function a(ce,ge){var De=ce.sortIndex-ge.sortIndex;return De!==0?De:ce.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,b=null,j=3,y=!1,D=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ce){for(var ge=n(p);ge!==null;){if(ge.callback===null)r(p);else if(ge.startTime<=ce)r(p),ge.sortIndex=ge.expirationTime,e(f,ge);else break;ge=n(p)}}function B(ce){if(S=!1,v(ce),!D)if(n(f)!==null)D=!0,_e(ee);else{var ge=n(p);ge!==null&&Ae(B,ge.startTime-ce)}}function ee(ce,ge){D=!1,S&&(S=!1,_(te),te=-1),y=!0;var De=j;try{for(v(ge),b=n(f);b!==null&&(!(b.expirationTime>ge)||ce&&!F());){var se=b.callback;if(typeof se=="function"){b.callback=null,j=b.priorityLevel;var O=se(b.expirationTime<=ge);ge=t.unstable_now(),typeof O=="function"?b.callback=O:b===n(f)&&r(f),v(ge)}else r(f);b=n(f)}if(b!==null)var E=!0;else{var ne=n(p);ne!==null&&Ae(B,ne.startTime-ge),E=!1}return E}finally{b=null,j=De,y=!1}}var ae=!1,W=null,te=-1,Q=5,de=-1;function F(){return!(t.unstable_now()-de<Q)}function L(){if(W!==null){var ce=t.unstable_now();de=ce;var ge=!0;try{ge=W(!0,ce)}finally{ge?z():(ae=!1,W=null)}}else ae=!1}var z;if(typeof I=="function")z=function(){I(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Ce=Y.port2;Y.port1.onmessage=L,z=function(){Ce.postMessage(null)}}else z=function(){P(L,0)};function _e(ce){W=ce,ae||(ae=!0,z())}function Ae(ce,ge){te=P(function(){ce(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){D||y||(D=!0,_e(ee))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(ce){switch(j){case 1:case 2:case 3:var ge=3;break;default:ge=j}var De=j;j=ge;try{return ce()}finally{j=De}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,ge){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var De=j;j=ce;try{return ge()}finally{j=De}},t.unstable_scheduleCallback=function(ce,ge,De){var se=t.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?se+De:se):De=se,ce){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=De+O,ce={id:m++,callback:ge,priorityLevel:ce,startTime:De,expirationTime:O,sortIndex:-1},De>se?(ce.sortIndex=De,e(p,ce),n(f)===null&&ce===n(p)&&(S?(_(te),te=-1):S=!0,Ae(B,De-se))):(ce.sortIndex=O,e(f,ce),D||y||(D=!0,_e(ee))),ce},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ce){var ge=j;return function(){var De=j;j=ge;try{return ce.apply(this,arguments)}finally{j=De}}}})(Xg)),Xg}var Ux;function Qj(){return Ux||(Ux=1,Yg.exports=Kj()),Yg.exports}var zx;function Zj(){if(zx)return qa;zx=1;var t=Tm(),e=Qj();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function o(s,l){u(s,l),u(s+"Capture",l)}function u(s,l){for(a[s]=l,s=0;s<l.length;s++)r.add(l[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},b={};function j(s){return f.call(b,s)?!0:f.call(m,s)?!1:p.test(s)?b[s]=!0:(m[s]=!0,!1)}function y(s,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,l,d,g){if(l===null||typeof l>"u"||y(s,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(s,l,d,g,N,A,G){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=A,this.removeEmptyString=G}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){P[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];P[l]=new S(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){P[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){P[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){P[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){P[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){P[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){P[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){P[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(_,I);P[l]=new S(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(_,I);P[l]=new S(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(_,I);P[l]=new S(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){P[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),P.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){P[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function v(s,l,d,g){var N=P.hasOwnProperty(l)?P[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,d,N,g)&&(d=null),g||N===null?j(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):N.mustUseProperty?s[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,g=N.attributeNamespace,d===null?s.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,g?s.setAttributeNS(g,l,d):s.setAttribute(l,d))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ae=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),F=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var De=Object.assign,se;function O(s){if(se===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);se=l&&l[1]||""}return`
`+se+s}var E=!1;function ne(s,l){if(!s||E)return"";E=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ye){var g=Ye}Reflect.construct(s,[],l)}else{try{l.call()}catch(Ye){g=Ye}s.call(l.prototype)}else{try{throw Error()}catch(Ye){g=Ye}s()}}catch(Ye){if(Ye&&g&&typeof Ye.stack=="string"){for(var N=Ye.stack.split(`
`),A=g.stack.split(`
`),G=N.length-1,Se=A.length-1;1<=G&&0<=Se&&N[G]!==A[Se];)Se--;for(;1<=G&&0<=Se;G--,Se--)if(N[G]!==A[Se]){if(G!==1||Se!==1)do if(G--,Se--,0>Se||N[G]!==A[Se]){var Le=`
`+N[G].replace(" at new "," at ");return s.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",s.displayName)),Le}while(1<=G&&0<=Se);break}}}finally{E=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?O(s):""}function me(s){switch(s.tag){case 5:return O(s.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function ye(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case W:return"Fragment";case ae:return"Portal";case Q:return"Profiler";case te:return"StrictMode";case z:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case de:return(s._context.displayName||"Context")+".Provider";case L:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ce:return l=s.displayName||null,l!==null?l:ye(s.type)||"Memo";case _e:l=s._payload,s=s._init;try{return ye(s(l))}catch{}}return null}function be(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Re(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ie(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Me(s){var l=Ie(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,A=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return N.call(this)},set:function(G){g=""+G,A.call(this,G)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(G){g=""+G},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Qe(s){s._valueTracker||(s._valueTracker=Me(s))}function ht(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=Ie(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function vt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Dt(s,l){var d=l.checked;return De({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function le(s,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Re(l.value!=null?l.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function xt(s,l){l=l.checked,l!=null&&v(s,"checked",l,!1)}function xe(s,l){xt(s,l);var d=Re(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?M(s,l.type,d):l.hasOwnProperty("defaultValue")&&M(s,l.type,Re(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function X(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function M(s,l,d){(l!=="number"||vt(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var ve=Array.isArray;function re(s,l,d,g){if(s=s.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<s.length;d++)N=l.hasOwnProperty("$"+s[d].value),s[d].selected!==N&&(s[d].selected=N),N&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Re(d),l=null,N=0;N<s.length;N++){if(s[N].value===d){s[N].selected=!0,g&&(s[N].defaultSelected=!0);return}l!==null||s[N].disabled||(l=s[N])}l!==null&&(l.selected=!0)}}function R(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return De({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function H(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(ve(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:Re(d)}}function je(s,l){var d=Re(l.value),g=Re(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function we(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ke(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ke(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var at,ct=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,N){MSApp.execUnsafeLocalFunction(function(){return s(l,d,g,N)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=at.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function _t(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cr=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(s){cr.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),kt[l]=kt[s]})});function yn(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||kt.hasOwnProperty(s)&&kt[s]?(""+l).trim():l+"px"}function Vt(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,N=yn(d,l[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,N):s[d]=N}}var Mt=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tn(s,l){if(l){if(Mt[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ke(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ot=null;function Xe(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var an=null,er=null,vn=null;function Yt(s){if(s=Pc(s)){if(typeof an!="function")throw Error(n(280));var l=s.stateNode;l&&(l=ju(l),an(s.stateNode,s.type,l))}}function Dn(s){er?vn?vn.push(s):vn=[s]:er=s}function ms(){if(er){var s=er,l=vn;if(vn=er=null,Yt(s),l)for(s=0;s<l.length;s++)Yt(l[s])}}function tr(s,l){return s(l)}function vr(){}var ur=!1;function on(s,l,d){if(ur)return s(l,d);ur=!0;try{return tr(s,l,d)}finally{ur=!1,(er!==null||vn!==null)&&(vr(),ms())}}function Rs(s,l){var d=s.stateNode;if(d===null)return null;var g=ju(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Ss=!1;if(c)try{var os={};Object.defineProperty(os,"passive",{get:function(){Ss=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Ss=!1}function Ds(s,l,d,g,N,A,G,Se,Le){var Ye=Array.prototype.slice.call(arguments,3);try{l.apply(d,Ye)}catch(Nt){this.onError(Nt)}}var nr=!1,Rr=null,xr=!1,gs=null,Qr={onError:function(s){nr=!0,Rr=s}};function Er(s,l,d,g,N,A,G,Se,Le){nr=!1,Rr=null,Ds.apply(Qr,arguments)}function Ws(s,l,d,g,N,A,G,Se,Le){if(Er.apply(this,arguments),nr){if(nr){var Ye=Rr;nr=!1,Rr=null}else throw Error(n(198));xr||(xr=!0,gs=Ye)}}function Zr(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function Is(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Yr(s){if(Zr(s)!==s)throw Error(n(188))}function Fs(s){var l=s.alternate;if(!l){if(l=Zr(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,g=l;;){var N=d.return;if(N===null)break;var A=N.alternate;if(A===null){if(g=N.return,g!==null){d=g;continue}break}if(N.child===A.child){for(A=N.child;A;){if(A===d)return Yr(N),s;if(A===g)return Yr(N),l;A=A.sibling}throw Error(n(188))}if(d.return!==g.return)d=N,g=A;else{for(var G=!1,Se=N.child;Se;){if(Se===d){G=!0,d=N,g=A;break}if(Se===g){G=!0,g=N,d=A;break}Se=Se.sibling}if(!G){for(Se=A.child;Se;){if(Se===d){G=!0,d=A,g=N;break}if(Se===g){G=!0,g=A,d=N;break}Se=Se.sibling}if(!G)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function dr(s){return s=Fs(s),s!==null?ls(s):null}function ls(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=ls(s);if(l!==null)return l;s=s.sibling}return null}var ai=e.unstable_scheduleCallback,Mi=e.unstable_cancelCallback,Bi=e.unstable_shouldYield,qi=e.unstable_requestPaint,Bn=e.unstable_now,vi=e.unstable_getCurrentPriorityLevel,hn=e.unstable_ImmediatePriority,Nn=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,Ht=e.unstable_LowPriority,Xt=e.unstable_IdlePriority,pt=null,it=null;function ft(s){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(pt,s,void 0,(s.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:mt,dt=Math.log,Lt=Math.LN2;function mt(s){return s>>>=0,s===0?32:31-(dt(s)/Lt|0)|0}var Tt=64,St=4194304;function It(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Jt(s,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,N=s.suspendedLanes,A=s.pingedLanes,G=d&268435455;if(G!==0){var Se=G&~N;Se!==0?g=It(Se):(A&=G,A!==0&&(g=It(A)))}else G=d&~N,G!==0?g=It(G):A!==0&&(g=It(A));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,A=l&-l,N>=A||N===16&&(A&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)d=31-Ze(l),N=1<<d,g|=s[d],l&=~N;return g}function Ut(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ft(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,N=s.expirationTimes,A=s.pendingLanes;0<A;){var G=31-Ze(A),Se=1<<G,Le=N[G];Le===-1?((Se&d)===0||(Se&g)!==0)&&(N[G]=Ut(Se,l)):Le<=l&&(s.expiredLanes|=Se),A&=~Se}}function Wt(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bn(){var s=Tt;return Tt<<=1,(Tt&4194240)===0&&(Tt=64),s}function Cr(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function dn(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Ze(l),s[l]=d}function q(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var N=31-Ze(d),A=1<<N;l[N]=0,g[N]=-1,s[N]=-1,d&=~A}}function ue(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-Ze(d),N=1<<g;N&l|s[g]&l&&(s[g]|=l),d&=~N}}var oe=0;function Te(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ne,At,An,Gt,hr,Xr=!1,_r=[],cs=null,Dr=null,us=null,Xi=new Map,et=new Map,qn=[],Bl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function il(s,l){switch(s){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Xi.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":et.delete(l.pointerId)}}function xi(s,l,d,g,N,A){return s===null||s.nativeEvent!==A?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:A,targetContainers:[N]},l!==null&&(l=Pc(l),l!==null&&At(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),s)}function ga(s,l,d,g,N){switch(l){case"focusin":return cs=xi(cs,s,l,d,g,N),!0;case"dragenter":return Dr=xi(Dr,s,l,d,g,N),!0;case"mouseover":return us=xi(us,s,l,d,g,N),!0;case"pointerover":var A=N.pointerId;return Xi.set(A,xi(Xi.get(A)||null,s,l,d,g,N)),!0;case"gotpointercapture":return A=N.pointerId,et.set(A,xi(et.get(A)||null,s,l,d,g,N)),!0}return!1}function Ha(s){var l=vl(s.target);if(l!==null){var d=Zr(l);if(d!==null){if(l=d.tag,l===13){if(l=Is(d),l!==null){s.blockedOn=l,hr(s.priority,function(){An(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ir(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=oi(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);ot=g,d.target.dispatchEvent(g),ot=null}else return l=Pc(d),l!==null&&At(l),s.blockedOn=d,!1;l.shift()}return!0}function ds(s,l,d){Ir(s)&&d.delete(l)}function Ui(){Xr=!1,cs!==null&&Ir(cs)&&(cs=null),Dr!==null&&Ir(Dr)&&(Dr=null),us!==null&&Ir(us)&&(us=null),Xi.forEach(ds),et.forEach(ds)}function Os(s,l){s.blockedOn===l&&(s.blockedOn=null,Xr||(Xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ui)))}function Co(s){function l(N){return Os(N,s)}if(0<_r.length){Os(_r[0],s);for(var d=1;d<_r.length;d++){var g=_r[d];g.blockedOn===s&&(g.blockedOn=null)}}for(cs!==null&&Os(cs,s),Dr!==null&&Os(Dr,s),us!==null&&Os(us,s),Xi.forEach(l),et.forEach(l),d=0;d<qn.length;d++)g=qn[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<qn.length&&(d=qn[0],d.blockedOn===null);)Ha(d),d.blockedOn===null&&qn.shift()}var _i=B.ReactCurrentBatchConfig,_o=!0;function ql(s,l,d,g){var N=oe,A=_i.transition;_i.transition=null;try{oe=1,co(s,l,d,g)}finally{oe=N,_i.transition=A}}function Ul(s,l,d,g){var N=oe,A=_i.transition;_i.transition=null;try{oe=4,co(s,l,d,g)}finally{oe=N,_i.transition=A}}function co(s,l,d,g){if(_o){var N=oi(s,l,d,g);if(N===null)wu(s,l,g,zi,d),il(s,g);else if(ga(N,s,l,d,g))g.stopPropagation();else if(il(s,g),l&4&&-1<Bl.indexOf(s)){for(;N!==null;){var A=Pc(N);if(A!==null&&Ne(A),A=oi(s,l,d,g),A===null&&wu(s,l,g,zi,d),A===N)break;N=A}N!==null&&g.stopPropagation()}else wu(s,l,g,null,d)}}var zi=null;function oi(s,l,d,g){if(zi=null,s=Xe(g),s=vl(s),s!==null)if(l=Zr(s),l===null)s=null;else if(d=l.tag,d===13){if(s=Is(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return zi=s,null}function li(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vi()){case hn:return 1;case Nn:return 4;case gn:case Ht:return 16;case Xt:return 536870912;default:return 16}default:return 16}}var $i=null,Ea=null,Ms=null;function yi(){if(Ms)return Ms;var s,l=Ea,d=l.length,g,N="value"in $i?$i.value:$i.textContent,A=N.length;for(s=0;s<d&&l[s]===N[s];s++);var G=d-s;for(g=1;g<=G&&l[d-g]===N[A-g];g++);return Ms=N.slice(s,1<g?1-g:void 0)}function ci(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ai(){return!0}function La(){return!1}function ui(s){function l(d,g,N,A,G){this._reactName=d,this._targetInst=N,this.type=g,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var Se in s)s.hasOwnProperty(Se)&&(d=s[Se],this[Se]=d?d(A):A[Se]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ai:La,this.isPropagationStopped=La,this}return De(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),l}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=ui(Ji),w=De({},Ji,{view:0,detail:0}),$=ui(w),pe,Pe,Be,qe=De({},w,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Be&&(Be&&s.type==="mousemove"?(pe=s.screenX-Be.screenX,Pe=s.screenY-Be.screenY):Pe=pe=0,Be=s),pe)},movementY:function(s){return"movementY"in s?s.movementY:Pe}}),Je=ui(qe),yt=De({},qe,{dataTransfer:0}),jt=ui(yt),qt=De({},w,{relatedTarget:0}),ln=ui(qt),En=De({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),ir=ui(En),mr=De({},Ji,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hn=ui(mr),Ar=De({},Ji,{data:0}),Fr=ui(Ar),Or={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vi(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Gs[s])?!!l[s]:!1}function Ao(){return Vi}var ol=De({},w,{key:function(s){if(s.key){var l=Or[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ci(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(s){return s.type==="keypress"?ci(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ci(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ll=ui(ol),zl=De({},qe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=ui(zl),ul=De({},w,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),bi=ui(ul),$l=De({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vl=ui($l),hu=De({},qe,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pu=ui(hu),Hi=[9,13,27,32],Wa=c&&"CompositionEvent"in window,uo=null;c&&"documentMode"in document&&(uo=document.documentMode);var ed=c&&"TextEvent"in window&&!uo,va=c&&(!Wa||uo&&8<uo&&11>=uo),dl=" ",xc=!1;function yc(s,l){switch(s){case"keyup":return Hi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ra=!1;function xa(s,l){switch(s){case"compositionend":return Po(l);case"keypress":return l.which!==32?null:(xc=!0,dl);case"textInput":return s=l.data,s===dl&&xc?null:s;default:return null}}function ya(s,l){if(Ra)return s==="compositionend"||!Wa&&yc(s,l)?(s=yi(),Ms=Ea=$i=null,Ra=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return va&&l.locale!=="ko"?null:l.data;default:return null}}var fl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fo(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!fl[s.type]:l==="textarea"}function ko(s,l,d,g){Dn(g),l=id(l,"onChange"),0<l.length&&(d=new al("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var To=null,ho=null;function js(s){yu(s,0)}function Hl(s){var l=tc(s);if(ht(l))return s}function po(s,l){if(s==="change")return l}var Ga=!1;if(c){var Wl;if(c){var Gl="oninput"in document;if(!Gl){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Gl=typeof bc.oninput=="function"}Wl=Gl}else Wl=!1;Ga=Wl&&(!document.documentMode||9<document.documentMode)}function wc(){To&&(To.detachEvent("onpropertychange",Eo),ho=To=null)}function Eo(s){if(s.propertyName==="value"&&Hl(ho)){var l=[];ko(l,ho,s,Xe(s)),on(js,l)}}function hl(s,l,d){s==="focusin"?(wc(),To=l,ho=d,To.attachEvent("onpropertychange",Eo)):s==="focusout"&&wc()}function pl(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hl(ho)}function Kl(s,l){if(s==="click")return Hl(l)}function ml(s,l){if(s==="input"||s==="change")return Hl(l)}function Ql(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var vs=typeof Object.is=="function"?Object.is:Ql;function ea(s,l){if(vs(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var N=d[g];if(!f.call(l,N)||!vs(s[N],l[N]))return!1}return!0}function br(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mr(s,l){var d=br(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=br(d)}}function xs(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?xs(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Bs(){for(var s=window,l=vt();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=vt(s.document)}return l}function Ka(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function mu(s){var l=Bs(),d=s.focusedElem,g=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&xs(d.ownerDocument.documentElement,d)){if(g!==null&&Ka(d)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var N=d.textContent.length,A=Math.min(g.start,N);g=g.end===void 0?A:Math.min(g.end,N),!s.extend&&A>g&&(N=g,g=A,A=N),N=Mr(d,A);var G=Mr(d,g);N&&G&&(s.rangeCount!==1||s.anchorNode!==N.node||s.anchorOffset!==N.offset||s.focusNode!==G.node||s.focusOffset!==G.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),s.removeAllRanges(),A>g?(s.addRange(l),s.extend(G.node,G.offset)):(l.setEnd(G.node,G.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Nc=c&&"documentMode"in document&&11>=document.documentMode,Lo=null,td=null,Sc=null,nd=!1;function vf(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;nd||Lo==null||Lo!==vt(g)||(g=Lo,"selectionStart"in g&&Ka(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Sc&&ea(Sc,g)||(Sc=g,g=id(td,"onSelect"),0<g.length&&(l=new al("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=Lo)))}function gu(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Zl={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Yl={},xf={};c&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function vu(s){if(Yl[s])return Yl[s];if(!Zl[s])return s;var l=Zl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in xf)return Yl[s]=l[d];return s}var yf=vu("animationend"),bf=vu("animationiteration"),wf=vu("animationstart"),Nf=vu("transitionend"),Sf=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mo(s,l){Sf.set(s,l),o(l,[s])}for(var jc=0;jc<jf.length;jc++){var Wi=jf[jc],Da=Wi.toLowerCase(),rd=Wi[0].toUpperCase()+Wi.slice(1);mo(Da,"on"+rd)}mo(yf,"onAnimationEnd"),mo(bf,"onAnimationIteration"),mo(wf,"onAnimationStart"),mo("dblclick","onDoubleClick"),mo("focusin","onFocus"),mo("focusout","onBlur"),mo(Nf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function xu(s,l,d){var g=s.type||"unknown-event";s.currentTarget=d,Ws(g,l,void 0,s),s.currentTarget=null}function yu(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],N=g.event;g=g.listeners;e:{var A=void 0;if(l)for(var G=g.length-1;0<=G;G--){var Se=g[G],Le=Se.instance,Ye=Se.currentTarget;if(Se=Se.listener,Le!==A&&N.isPropagationStopped())break e;xu(N,Se,Ye),A=Le}else for(G=0;G<g.length;G++){if(Se=g[G],Le=Se.instance,Ye=Se.currentTarget,Se=Se.listener,Le!==A&&N.isPropagationStopped())break e;xu(N,Se,Ye),A=Le}}}if(xr)throw s=gs,xr=!1,gs=null,s}function zr(s,l){var d=l[na];d===void 0&&(d=l[na]=new Set);var g=s+"__bubble";d.has(g)||(bu(l,s,2,!1),d.add(g))}function sd(s,l,d){var g=0;l&&(g|=4),bu(d,s,g,l)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Xl(s){if(!s[Cc]){s[Cc]=!0,r.forEach(function(d){d!=="selectionchange"&&(Bh.has(d)||sd(d,!1,s),sd(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Cc]||(l[Cc]=!0,sd("selectionchange",!1,l))}}function bu(s,l,d,g){switch(li(l)){case 1:var N=ql;break;case 4:N=Ul;break;default:N=co}d=N.bind(null,l,d,s),N=void 0,!Ss||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?s.addEventListener(l,d,{capture:!0,passive:N}):s.addEventListener(l,d,!0):N!==void 0?s.addEventListener(l,d,{passive:N}):s.addEventListener(l,d,!1)}function wu(s,l,d,g,N){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var G=g.tag;if(G===3||G===4){var Se=g.stateNode.containerInfo;if(Se===N||Se.nodeType===8&&Se.parentNode===N)break;if(G===4)for(G=g.return;G!==null;){var Le=G.tag;if((Le===3||Le===4)&&(Le=G.stateNode.containerInfo,Le===N||Le.nodeType===8&&Le.parentNode===N))return;G=G.return}for(;Se!==null;){if(G=vl(Se),G===null)return;if(Le=G.tag,Le===5||Le===6){g=A=G;continue e}Se=Se.parentNode}}g=g.return}on(function(){var Ye=A,Nt=Xe(d),Ct=[];e:{var bt=Sf.get(s);if(bt!==void 0){var $t=al,rn=s;switch(s){case"keypress":if(ci(d)===0)break e;case"keydown":case"keyup":$t=ll;break;case"focusin":rn="focus",$t=ln;break;case"focusout":rn="blur",$t=ln;break;case"beforeblur":case"afterblur":$t=ln;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=jt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=bi;break;case yf:case bf:case wf:$t=ir;break;case Nf:$t=Vl;break;case"scroll":$t=$;break;case"wheel":$t=pu;break;case"copy":case"cut":case"paste":$t=Hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=cl}var cn=(l&4)!==0,Zs=!cn&&s==="scroll",He=cn?bt!==null?bt+"Capture":null:bt;cn=[];for(var Oe=Ye,Ge;Oe!==null;){Ge=Oe;var Et=Ge.stateNode;if(Ge.tag===5&&Et!==null&&(Ge=Et,He!==null&&(Et=Rs(Oe,He),Et!=null&&cn.push(Nu(Oe,Et,Ge)))),Zs)break;Oe=Oe.return}0<cn.length&&(bt=new $t(bt,rn,null,d,Nt),Ct.push({event:bt,listeners:cn}))}}if((l&7)===0){e:{if(bt=s==="mouseover"||s==="pointerover",$t=s==="mouseout"||s==="pointerout",bt&&d!==ot&&(rn=d.relatedTarget||d.fromElement)&&(vl(rn)||rn[Pi]))break e;if(($t||bt)&&(bt=Nt.window===Nt?Nt:(bt=Nt.ownerDocument)?bt.defaultView||bt.parentWindow:window,$t?(rn=d.relatedTarget||d.toElement,$t=Ye,rn=rn?vl(rn):null,rn!==null&&(Zs=Zr(rn),rn!==Zs||rn.tag!==5&&rn.tag!==6)&&(rn=null)):($t=null,rn=Ye),$t!==rn)){if(cn=Je,Et="onMouseLeave",He="onMouseEnter",Oe="mouse",(s==="pointerout"||s==="pointerover")&&(cn=cl,Et="onPointerLeave",He="onPointerEnter",Oe="pointer"),Zs=$t==null?bt:tc($t),Ge=rn==null?bt:tc(rn),bt=new cn(Et,Oe+"leave",$t,d,Nt),bt.target=Zs,bt.relatedTarget=Ge,Et=null,vl(Nt)===Ye&&(cn=new cn(He,Oe+"enter",rn,d,Nt),cn.target=Ge,cn.relatedTarget=Zs,Et=cn),Zs=Et,$t&&rn)t:{for(cn=$t,He=rn,Oe=0,Ge=cn;Ge;Ge=Jl(Ge))Oe++;for(Ge=0,Et=He;Et;Et=Jl(Et))Ge++;for(;0<Oe-Ge;)cn=Jl(cn),Oe--;for(;0<Ge-Oe;)He=Jl(He),Ge--;for(;Oe--;){if(cn===He||He!==null&&cn===He.alternate)break t;cn=Jl(cn),He=Jl(He)}cn=null}else cn=null;$t!==null&&qh(Ct,bt,$t,cn,!1),rn!==null&&Zs!==null&&qh(Ct,Zs,rn,cn,!0)}}e:{if(bt=Ye?tc(Ye):window,$t=bt.nodeName&&bt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&bt.type==="file")var pn=po;else if(fo(bt))if(Ga)pn=ml;else{pn=pl;var Sn=hl}else($t=bt.nodeName)&&$t.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(pn=Kl);if(pn&&(pn=pn(s,Ye))){ko(Ct,pn,d,Nt);break e}Sn&&Sn(s,bt,Ye),s==="focusout"&&(Sn=bt._wrapperState)&&Sn.controlled&&bt.type==="number"&&M(bt,"number",bt.value)}switch(Sn=Ye?tc(Ye):window,s){case"focusin":(fo(Sn)||Sn.contentEditable==="true")&&(Lo=Sn,td=Ye,Sc=null);break;case"focusout":Sc=td=Lo=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,vf(Ct,d,Nt);break;case"selectionchange":if(Nc)break;case"keydown":case"keyup":vf(Ct,d,Nt)}var jn;if(Wa)e:{switch(s){case"compositionstart":var In="onCompositionStart";break e;case"compositionend":In="onCompositionEnd";break e;case"compositionupdate":In="onCompositionUpdate";break e}In=void 0}else Ra?yc(s,d)&&(In="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(In="onCompositionStart");In&&(va&&d.locale!=="ko"&&(Ra||In!=="onCompositionStart"?In==="onCompositionEnd"&&Ra&&(jn=yi()):($i=Nt,Ea="value"in $i?$i.value:$i.textContent,Ra=!0)),Sn=id(Ye,In),0<Sn.length&&(In=new Fr(In,s,null,d,Nt),Ct.push({event:In,listeners:Sn}),jn?In.data=jn:(jn=Po(d),jn!==null&&(In.data=jn)))),(jn=ed?xa(s,d):ya(s,d))&&(Ye=id(Ye,"onBeforeInput"),0<Ye.length&&(Nt=new Fr("onBeforeInput","beforeinput",null,d,Nt),Ct.push({event:Nt,listeners:Ye}),Nt.data=jn))}yu(Ct,l)})}function Nu(s,l,d){return{instance:s,listener:l,currentTarget:d}}function id(s,l){for(var d=l+"Capture",g=[];s!==null;){var N=s,A=N.stateNode;N.tag===5&&A!==null&&(N=A,A=Rs(s,d),A!=null&&g.unshift(Nu(s,A,N)),A=Rs(s,l),A!=null&&g.push(Nu(s,A,N))),s=s.return}return g}function Jl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function qh(s,l,d,g,N){for(var A=l._reactName,G=[];d!==null&&d!==g;){var Se=d,Le=Se.alternate,Ye=Se.stateNode;if(Le!==null&&Le===g)break;Se.tag===5&&Ye!==null&&(Se=Ye,N?(Le=Rs(d,A),Le!=null&&G.unshift(Nu(d,Le,Se))):N||(Le=Rs(d,A),Le!=null&&G.push(Nu(d,Le,Se)))),d=d.return}G.length!==0&&s.push({event:l,listeners:G})}var lg=/\r\n?/g,cg=/\u0000|\uFFFD/g;function Uh(s){return(typeof s=="string"?s:""+s).replace(lg,`
`).replace(cg,"")}function ad(s,l,d){if(l=Uh(l),Uh(s)!==l&&d)throw Error(n(425))}function _c(){}var Su=null,ec=null;function Cf(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,zh=typeof clearTimeout=="function"?clearTimeout:void 0,$h=typeof Promise=="function"?Promise:void 0,ug=typeof queueMicrotask=="function"?queueMicrotask:typeof $h<"u"?function(s){return $h.resolve(null).then(s).catch(dg)}:_f;function dg(s){setTimeout(function(){throw s})}function Af(s,l){var d=l,g=0;do{var N=d.nextSibling;if(s.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(g===0){s.removeChild(N),Co(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=N}while(d);Co(l)}function Gi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Ia(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var ta=Math.random().toString(36).slice(2),go="__reactFiber$"+ta,Ac="__reactProps$"+ta,Pi="__reactContainer$"+ta,na="__reactEvents$"+ta,fg="__reactListeners$"+ta,hg="__reactHandles$"+ta;function vl(s){var l=s[go];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Pi]||d[go]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=Ia(s);s!==null;){if(d=s[go])return d;s=Ia(s)}return l}s=d,d=s.parentNode}return null}function Pc(s){return s=s[go]||s[Pi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function tc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function ju(s){return s[Ac]||null}var Pf=[],Ro=-1;function Qa(s){return{current:s}}function Lr(s){0>Ro||(s.current=Pf[Ro],Pf[Ro]=null,Ro--)}function Br(s,l){Ro++,Pf[Ro]=s.current,s.current=l}var xl={},wi=Qa(xl),ra=Qa(!1),nc=xl;function kc(s,l){var d=s.type.contextTypes;if(!d)return xl;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},A;for(A in d)N[A]=l[A];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=N),N}function sa(s){return s=s.childContextTypes,s!=null}function od(){Lr(ra),Lr(wi)}function Vh(s,l,d){if(wi.current!==xl)throw Error(n(168));Br(wi,l),Br(ra,d)}function kf(s,l,d){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(n(108,be(s)||"Unknown",N));return De({},d,g)}function rc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||xl,nc=wi.current,Br(wi,s),Br(ra,ra.current),!0}function Hh(s,l,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=kf(s,l,nc),g.__reactInternalMemoizedMergedChildContext=s,Lr(ra),Lr(wi),Br(wi,s)):Lr(ra),Br(ra,d)}var Do=null,Cu=!1,h=!1;function x(s){Do===null?Do=[s]:Do.push(s)}function C(s){Cu=!0,x(s)}function T(){if(!h&&Do!==null){h=!0;var s=0,l=oe;try{var d=Do;for(oe=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Do=null,Cu=!1}catch(N){throw Do!==null&&(Do=Do.slice(s+1)),ai(hn,T),N}finally{oe=l,h=!1}}return null}var V=[],K=0,Z=null,J=0,ie=[],fe=0,Ee=null,$e=1,he="";function Fe(s,l){V[K++]=J,V[K++]=Z,Z=s,J=l}function ze(s,l,d){ie[fe++]=$e,ie[fe++]=he,ie[fe++]=Ee,Ee=s;var g=$e;s=he;var N=32-Ze(g)-1;g&=~(1<<N),d+=1;var A=32-Ze(l)+N;if(30<A){var G=N-N%5;A=(g&(1<<G)-1).toString(32),g>>=G,N-=G,$e=1<<32-Ze(l)+N|d<<N|g,he=A+s}else $e=1<<A|d<<N|g,he=s}function st(s){s.return!==null&&(Fe(s,1),ze(s,1,0))}function We(s){for(;s===Z;)Z=V[--K],V[K]=null,J=V[--K],V[K]=null;for(;s===Ee;)Ee=ie[--fe],ie[fe]=null,he=ie[--fe],ie[fe]=null,$e=ie[--fe],ie[fe]=null}var tt=null,rt=null,lt=!1,ut=null;function fn(s,l){var d=wo(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function Qt(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,tt=s,rt=Gi(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,tt=s,rt=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ee!==null?{id:$e,overflow:he}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=wo(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,tt=s,rt=null,!0):!1;default:return!1}}function Un(s){return(s.mode&1)!==0&&(s.flags&128)===0}function nn(s){if(lt){var l=rt;if(l){var d=l;if(!Qt(s,l)){if(Un(s))throw Error(n(418));l=Gi(d.nextSibling);var g=tt;l&&Qt(s,l)?fn(g,d):(s.flags=s.flags&-4097|2,lt=!1,tt=s)}}else{if(Un(s))throw Error(n(418));s.flags=s.flags&-4097|2,lt=!1,tt=s}}}function or(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;tt=s}function ys(s){if(s!==tt)return!1;if(!lt)return or(s),lt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Cf(s.type,s.memoizedProps)),l&&(l=rt)){if(Un(s))throw $n(),Error(n(418));for(;l;)fn(s,l),l=Gi(l.nextSibling)}if(or(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){rt=Gi(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}rt=null}}else rt=tt?Gi(s.stateNode.nextSibling):null;return!0}function $n(){for(var s=rt;s;)s=Gi(s.nextSibling)}function Zt(){rt=tt=null,lt=!1}function Rt(s){ut===null?ut=[s]:ut.push(s)}var Cs=B.ReactCurrentBatchConfig;function kn(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var N=g,A=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(G){var Se=N.refs;G===null?delete Se[A]:Se[A]=G},l._stringRef=A,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function ar(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Gr(s){var l=s._init;return l(s._payload)}function di(s){function l(He,Oe){if(s){var Ge=He.deletions;Ge===null?(He.deletions=[Oe],He.flags|=16):Ge.push(Oe)}}function d(He,Oe){if(!s)return null;for(;Oe!==null;)l(He,Oe),Oe=Oe.sibling;return null}function g(He,Oe){for(He=new Map;Oe!==null;)Oe.key!==null?He.set(Oe.key,Oe):He.set(Oe.index,Oe),Oe=Oe.sibling;return He}function N(He,Oe){return He=Bc(He,Oe),He.index=0,He.sibling=null,He}function A(He,Oe,Ge){return He.index=Ge,s?(Ge=He.alternate,Ge!==null?(Ge=Ge.index,Ge<Oe?(He.flags|=2,Oe):Ge):(He.flags|=2,Oe)):(He.flags|=1048576,Oe)}function G(He){return s&&He.alternate===null&&(He.flags|=2),He}function Se(He,Oe,Ge,Et){return Oe===null||Oe.tag!==6?(Oe=zg(Ge,He.mode,Et),Oe.return=He,Oe):(Oe=N(Oe,Ge),Oe.return=He,Oe)}function Le(He,Oe,Ge,Et){var pn=Ge.type;return pn===W?Nt(He,Oe,Ge.props.children,Et,Ge.key):Oe!==null&&(Oe.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===_e&&Gr(pn)===Oe.type)?(Et=N(Oe,Ge.props),Et.ref=kn(He,Oe,Ge),Et.return=He,Et):(Et=dp(Ge.type,Ge.key,Ge.props,null,He.mode,Et),Et.ref=kn(He,Oe,Ge),Et.return=He,Et)}function Ye(He,Oe,Ge,Et){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ge.containerInfo||Oe.stateNode.implementation!==Ge.implementation?(Oe=$g(Ge,He.mode,Et),Oe.return=He,Oe):(Oe=N(Oe,Ge.children||[]),Oe.return=He,Oe)}function Nt(He,Oe,Ge,Et,pn){return Oe===null||Oe.tag!==7?(Oe=Ru(Ge,He.mode,Et,pn),Oe.return=He,Oe):(Oe=N(Oe,Ge),Oe.return=He,Oe)}function Ct(He,Oe,Ge){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=zg(""+Oe,He.mode,Ge),Oe.return=He,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case ee:return Ge=dp(Oe.type,Oe.key,Oe.props,null,He.mode,Ge),Ge.ref=kn(He,null,Oe),Ge.return=He,Ge;case ae:return Oe=$g(Oe,He.mode,Ge),Oe.return=He,Oe;case _e:var Et=Oe._init;return Ct(He,Et(Oe._payload),Ge)}if(ve(Oe)||ge(Oe))return Oe=Ru(Oe,He.mode,Ge,null),Oe.return=He,Oe;ar(He,Oe)}return null}function bt(He,Oe,Ge,Et){var pn=Oe!==null?Oe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return pn!==null?null:Se(He,Oe,""+Ge,Et);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case ee:return Ge.key===pn?Le(He,Oe,Ge,Et):null;case ae:return Ge.key===pn?Ye(He,Oe,Ge,Et):null;case _e:return pn=Ge._init,bt(He,Oe,pn(Ge._payload),Et)}if(ve(Ge)||ge(Ge))return pn!==null?null:Nt(He,Oe,Ge,Et,null);ar(He,Ge)}return null}function $t(He,Oe,Ge,Et,pn){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return He=He.get(Ge)||null,Se(Oe,He,""+Et,pn);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case ee:return He=He.get(Et.key===null?Ge:Et.key)||null,Le(Oe,He,Et,pn);case ae:return He=He.get(Et.key===null?Ge:Et.key)||null,Ye(Oe,He,Et,pn);case _e:var Sn=Et._init;return $t(He,Oe,Ge,Sn(Et._payload),pn)}if(ve(Et)||ge(Et))return He=He.get(Ge)||null,Nt(Oe,He,Et,pn,null);ar(Oe,Et)}return null}function rn(He,Oe,Ge,Et){for(var pn=null,Sn=null,jn=Oe,In=Oe=0,Ri=null;jn!==null&&In<Ge.length;In++){jn.index>In?(Ri=jn,jn=null):Ri=jn.sibling;var Pr=bt(He,jn,Ge[In],Et);if(Pr===null){jn===null&&(jn=Ri);break}s&&jn&&Pr.alternate===null&&l(He,jn),Oe=A(Pr,Oe,In),Sn===null?pn=Pr:Sn.sibling=Pr,Sn=Pr,jn=Ri}if(In===Ge.length)return d(He,jn),lt&&Fe(He,In),pn;if(jn===null){for(;In<Ge.length;In++)jn=Ct(He,Ge[In],Et),jn!==null&&(Oe=A(jn,Oe,In),Sn===null?pn=jn:Sn.sibling=jn,Sn=jn);return lt&&Fe(He,In),pn}for(jn=g(He,jn);In<Ge.length;In++)Ri=$t(jn,He,In,Ge[In],Et),Ri!==null&&(s&&Ri.alternate!==null&&jn.delete(Ri.key===null?In:Ri.key),Oe=A(Ri,Oe,In),Sn===null?pn=Ri:Sn.sibling=Ri,Sn=Ri);return s&&jn.forEach(function(qc){return l(He,qc)}),lt&&Fe(He,In),pn}function cn(He,Oe,Ge,Et){var pn=ge(Ge);if(typeof pn!="function")throw Error(n(150));if(Ge=pn.call(Ge),Ge==null)throw Error(n(151));for(var Sn=pn=null,jn=Oe,In=Oe=0,Ri=null,Pr=Ge.next();jn!==null&&!Pr.done;In++,Pr=Ge.next()){jn.index>In?(Ri=jn,jn=null):Ri=jn.sibling;var qc=bt(He,jn,Pr.value,Et);if(qc===null){jn===null&&(jn=Ri);break}s&&jn&&qc.alternate===null&&l(He,jn),Oe=A(qc,Oe,In),Sn===null?pn=qc:Sn.sibling=qc,Sn=qc,jn=Ri}if(Pr.done)return d(He,jn),lt&&Fe(He,In),pn;if(jn===null){for(;!Pr.done;In++,Pr=Ge.next())Pr=Ct(He,Pr.value,Et),Pr!==null&&(Oe=A(Pr,Oe,In),Sn===null?pn=Pr:Sn.sibling=Pr,Sn=Pr);return lt&&Fe(He,In),pn}for(jn=g(He,jn);!Pr.done;In++,Pr=Ge.next())Pr=$t(jn,He,In,Pr.value,Et),Pr!==null&&(s&&Pr.alternate!==null&&jn.delete(Pr.key===null?In:Pr.key),Oe=A(Pr,Oe,In),Sn===null?pn=Pr:Sn.sibling=Pr,Sn=Pr);return s&&jn.forEach(function($j){return l(He,$j)}),lt&&Fe(He,In),pn}function Zs(He,Oe,Ge,Et){if(typeof Ge=="object"&&Ge!==null&&Ge.type===W&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case ee:e:{for(var pn=Ge.key,Sn=Oe;Sn!==null;){if(Sn.key===pn){if(pn=Ge.type,pn===W){if(Sn.tag===7){d(He,Sn.sibling),Oe=N(Sn,Ge.props.children),Oe.return=He,He=Oe;break e}}else if(Sn.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===_e&&Gr(pn)===Sn.type){d(He,Sn.sibling),Oe=N(Sn,Ge.props),Oe.ref=kn(He,Sn,Ge),Oe.return=He,He=Oe;break e}d(He,Sn);break}else l(He,Sn);Sn=Sn.sibling}Ge.type===W?(Oe=Ru(Ge.props.children,He.mode,Et,Ge.key),Oe.return=He,He=Oe):(Et=dp(Ge.type,Ge.key,Ge.props,null,He.mode,Et),Et.ref=kn(He,Oe,Ge),Et.return=He,He=Et)}return G(He);case ae:e:{for(Sn=Ge.key;Oe!==null;){if(Oe.key===Sn)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ge.containerInfo&&Oe.stateNode.implementation===Ge.implementation){d(He,Oe.sibling),Oe=N(Oe,Ge.children||[]),Oe.return=He,He=Oe;break e}else{d(He,Oe);break}else l(He,Oe);Oe=Oe.sibling}Oe=$g(Ge,He.mode,Et),Oe.return=He,He=Oe}return G(He);case _e:return Sn=Ge._init,Zs(He,Oe,Sn(Ge._payload),Et)}if(ve(Ge))return rn(He,Oe,Ge,Et);if(ge(Ge))return cn(He,Oe,Ge,Et);ar(He,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,Oe!==null&&Oe.tag===6?(d(He,Oe.sibling),Oe=N(Oe,Ge),Oe.return=He,He=Oe):(d(He,Oe),Oe=zg(Ge,He.mode,Et),Oe.return=He,He=Oe),G(He)):d(He,Oe)}return Zs}var qs=di(!0),fs=di(!1),Ks=Qa(null),fi=null,rs=null,fr=null;function wr(){fr=rs=fi=null}function ss(s){var l=Ks.current;Lr(Ks),s._currentValue=l}function Nr(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function bs(s,l){fi=s,fr=rs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Oa=!0),s.firstContext=null)}function ws(s){var l=s._currentValue;if(fr!==s)if(s={context:s,memoizedValue:l,next:null},rs===null){if(fi===null)throw Error(n(308));rs=s,fi.dependencies={lanes:0,firstContext:s}}else rs=rs.next=s;return l}var $r=null;function ki(s){$r===null?$r=[s]:$r.push(s)}function qr(s,l,d,g){var N=l.interleaved;return N===null?(d.next=d,ki(l)):(d.next=N.next,N.next=d),l.interleaved=d,Vr(s,g)}function Vr(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Us=!1;function Ni(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ia(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function _s(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function As(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Sr&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,Vr(s,d)}return N=g.interleaved,N===null?(l.next=l,ki(g)):(l.next=N.next,N.next=l),g.interleaved=l,Vr(s,d)}function Ti(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,ue(s,d)}}function Hr(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var N=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var G={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};A===null?N=A=G:A=A.next=G,d=d.next}while(d!==null);A===null?N=A=l:A=A.next=l}else N=A=l;d={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:A,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Ei(s,l,d,g){var N=s.updateQueue;Us=!1;var A=N.firstBaseUpdate,G=N.lastBaseUpdate,Se=N.shared.pending;if(Se!==null){N.shared.pending=null;var Le=Se,Ye=Le.next;Le.next=null,G===null?A=Ye:G.next=Ye,G=Le;var Nt=s.alternate;Nt!==null&&(Nt=Nt.updateQueue,Se=Nt.lastBaseUpdate,Se!==G&&(Se===null?Nt.firstBaseUpdate=Ye:Se.next=Ye,Nt.lastBaseUpdate=Le))}if(A!==null){var Ct=N.baseState;G=0,Nt=Ye=Le=null,Se=A;do{var bt=Se.lane,$t=Se.eventTime;if((g&bt)===bt){Nt!==null&&(Nt=Nt.next={eventTime:$t,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var rn=s,cn=Se;switch(bt=l,$t=d,cn.tag){case 1:if(rn=cn.payload,typeof rn=="function"){Ct=rn.call($t,Ct,bt);break e}Ct=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=cn.payload,bt=typeof rn=="function"?rn.call($t,Ct,bt):rn,bt==null)break e;Ct=De({},Ct,bt);break e;case 2:Us=!0}}Se.callback!==null&&Se.lane!==0&&(s.flags|=64,bt=N.effects,bt===null?N.effects=[Se]:bt.push(Se))}else $t={eventTime:$t,lane:bt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Nt===null?(Ye=Nt=$t,Le=Ct):Nt=Nt.next=$t,G|=bt;if(Se=Se.next,Se===null){if(Se=N.shared.pending,Se===null)break;bt=Se,Se=bt.next,bt.next=null,N.lastBaseUpdate=bt,N.shared.pending=null}}while(!0);if(Nt===null&&(Le=Ct),N.baseState=Le,N.firstBaseUpdate=Ye,N.lastBaseUpdate=Nt,l=N.shared.interleaved,l!==null){N=l;do G|=N.lane,N=N.next;while(N!==l)}else A===null&&(N.shared.lanes=0);ku|=G,s.lanes=G,s.memoizedState=Ct}}function Fa(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],N=g.callback;if(N!==null){if(g.callback=null,g=d,typeof N!="function")throw Error(n(191,N));N.call(g)}}}var Za={},hi=Qa(Za),Ps=Qa(Za),yl=Qa(Za);function Io(s){if(s===Za)throw Error(n(174));return s}function Tc(s,l){switch(Br(yl,l),Br(Ps,s),Br(hi,Za),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ve(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Ve(l,s)}Lr(hi),Br(hi,l)}function vo(){Lr(hi),Lr(Ps),Lr(yl)}function Wh(s){Io(yl.current);var l=Io(hi.current),d=Ve(l,s.type);l!==d&&(Br(Ps,s),Br(hi,d))}function Tf(s){Ps.current===s&&(Lr(hi),Lr(Ps))}var Jr=Qa(0);function Ya(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ef=[];function Lf(){for(var s=0;s<Ef.length;s++)Ef[s]._workInProgressVersionPrimary=null;Ef.length=0}var ld=B.ReactCurrentDispatcher,cd=B.ReactCurrentBatchConfig,xo=0,is=null,zs=null,ks=null,Ec=!1,Fo=!1,Lc=0,pg=0;function Qs(){throw Error(n(321))}function ud(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!vs(s[d],l[d]))return!1;return!0}function _u(s,l,d,g,N,A){if(xo=A,is=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ld.current=s===null||s.memoizedState===null?mj:gj,s=d(g,N),Fo){A=0;do{if(Fo=!1,Lc=0,25<=A)throw Error(n(301));A+=1,ks=zs=null,l.updateQueue=null,ld.current=vj,s=d(g,N)}while(Fo)}if(ld.current=Yh,l=zs!==null&&zs.next!==null,xo=0,ks=zs=is=null,Ec=!1,l)throw Error(n(300));return s}function yo(){var s=Lc!==0;return Lc=0,s}function Xa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ks===null?is.memoizedState=ks=s:ks=ks.next=s,ks}function ba(){if(zs===null){var s=is.alternate;s=s!==null?s.memoizedState:null}else s=zs.next;var l=ks===null?is.memoizedState:ks.next;if(l!==null)ks=l,zs=s;else{if(s===null)throw Error(n(310));zs=s,s={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},ks===null?is.memoizedState=ks=s:ks=ks.next=s}return ks}function Au(s,l){return typeof l=="function"?l(s):l}function dd(s){var l=ba(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=zs,N=g.baseQueue,A=d.pending;if(A!==null){if(N!==null){var G=N.next;N.next=A.next,A.next=G}g.baseQueue=N=A,d.pending=null}if(N!==null){A=N.next,g=g.baseState;var Se=G=null,Le=null,Ye=A;do{var Nt=Ye.lane;if((xo&Nt)===Nt)Le!==null&&(Le=Le.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),g=Ye.hasEagerState?Ye.eagerState:s(g,Ye.action);else{var Ct={lane:Nt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Le===null?(Se=Le=Ct,G=g):Le=Le.next=Ct,is.lanes|=Nt,ku|=Nt}Ye=Ye.next}while(Ye!==null&&Ye!==A);Le===null?G=g:Le.next=Se,vs(g,l.memoizedState)||(Oa=!0),l.memoizedState=g,l.baseState=G,l.baseQueue=Le,d.lastRenderedState=g}if(s=d.interleaved,s!==null){N=s;do A=N.lane,is.lanes|=A,ku|=A,N=N.next;while(N!==s)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function bl(s){var l=ba(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,N=d.pending,A=l.memoizedState;if(N!==null){d.pending=null;var G=N=N.next;do A=s(A,G.action),G=G.next;while(G!==N);vs(A,l.memoizedState)||(Oa=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),d.lastRenderedState=A}return[A,g]}function Gh(){}function Rf(s,l){var d=is,g=ba(),N=l(),A=!vs(g.memoizedState,N);if(A&&(g.memoizedState=N,Oa=!0),g=g.queue,pd(Qh.bind(null,d,g,s),[s]),g.getSnapshot!==l||A||ks!==null&&ks.memoizedState.tag&1){if(d.flags|=2048,wa(9,Df.bind(null,d,g,N,l),void 0,null),Li===null)throw Error(n(349));(xo&30)!==0||Kh(d,l,N)}return N}function Kh(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=is.updateQueue,l===null?(l={lastEffect:null,stores:null},is.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Df(s,l,d,g){l.value=d,l.getSnapshot=g,Rc(l)&&fd(s)}function Qh(s,l,d){return d(function(){Rc(l)&&fd(s)})}function Rc(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!vs(s,d)}catch{return!0}}function fd(s){var l=Vr(s,1);l!==null&&Uo(l,s,1,-1)}function Pu(s){var l=Xa();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:s},l.queue=s,s=s.dispatch=pj.bind(null,is,s),[l.memoizedState,s]}function wa(s,l,d,g){return s={tag:s,create:l,destroy:d,deps:g,next:null},l=is.updateQueue,l===null?(l={lastEffect:null,stores:null},is.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s)),s}function Oo(){return ba().memoizedState}function Ja(s,l,d,g){var N=Xa();is.flags|=s,N.memoizedState=wa(1|l,d,void 0,g===void 0?null:g)}function sc(s,l,d,g){var N=ba();g=g===void 0?null:g;var A=void 0;if(zs!==null){var G=zs.memoizedState;if(A=G.destroy,g!==null&&ud(g,G.deps)){N.memoizedState=wa(l,d,A,g);return}}is.flags|=s,N.memoizedState=wa(1|l,d,A,g)}function hd(s,l){return Ja(8390656,8,s,l)}function pd(s,l){return sc(2048,8,s,l)}function Zh(s,l){return sc(4,2,s,l)}function md(s,l){return sc(4,4,s,l)}function gd(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function D1(s,l,d){return d=d!=null?d.concat([s]):null,sc(4,4,gd.bind(null,l,s),d)}function mg(){}function I1(s,l){var d=ba();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&ud(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function F1(s,l){var d=ba();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&ud(l,g[1])?g[0]:(s=s(),d.memoizedState=[s,l],s)}function O1(s,l,d){return(xo&21)===0?(s.baseState&&(s.baseState=!1,Oa=!0),s.memoizedState=d):(vs(d,l)||(d=bn(),is.lanes|=d,ku|=d,s.baseState=!0),l)}function fj(s,l){var d=oe;oe=d!==0&&4>d?d:4,s(!0);var g=cd.transition;cd.transition={};try{s(!1),l()}finally{oe=d,cd.transition=g}}function M1(){return ba().memoizedState}function hj(s,l,d){var g=Oc(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},B1(s))q1(l,d);else if(d=qr(s,l,d,g),d!==null){var N=Sa();Uo(d,s,g,N),U1(d,l,g)}}function pj(s,l,d){var g=Oc(s),N={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(B1(s))q1(l,N);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var G=l.lastRenderedState,Se=A(G,d);if(N.hasEagerState=!0,N.eagerState=Se,vs(Se,G)){var Le=l.interleaved;Le===null?(N.next=N,ki(l)):(N.next=Le.next,Le.next=N),l.interleaved=N;return}}catch{}d=qr(s,l,N,g),d!==null&&(N=Sa(),Uo(d,s,g,N),U1(d,l,g))}}function B1(s){var l=s.alternate;return s===is||l!==null&&l===is}function q1(s,l){Fo=Ec=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function U1(s,l,d){if((d&4194240)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,ue(s,d)}}var Yh={readContext:ws,useCallback:Qs,useContext:Qs,useEffect:Qs,useImperativeHandle:Qs,useInsertionEffect:Qs,useLayoutEffect:Qs,useMemo:Qs,useReducer:Qs,useRef:Qs,useState:Qs,useDebugValue:Qs,useDeferredValue:Qs,useTransition:Qs,useMutableSource:Qs,useSyncExternalStore:Qs,useId:Qs,unstable_isNewReconciler:!1},mj={readContext:ws,useCallback:function(s,l){return Xa().memoizedState=[s,l===void 0?null:l],s},useContext:ws,useEffect:hd,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,Ja(4194308,4,gd.bind(null,l,s),d)},useLayoutEffect:function(s,l){return Ja(4194308,4,s,l)},useInsertionEffect:function(s,l){return Ja(4,2,s,l)},useMemo:function(s,l){var d=Xa();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var g=Xa();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=hj.bind(null,is,s),[g.memoizedState,s]},useRef:function(s){var l=Xa();return s={current:s},l.memoizedState=s},useState:Pu,useDebugValue:mg,useDeferredValue:function(s){return Xa().memoizedState=s},useTransition:function(){var s=Pu(!1),l=s[0];return s=fj.bind(null,s[1]),Xa().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var g=is,N=Xa();if(lt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Li===null)throw Error(n(349));(xo&30)!==0||Kh(g,l,d)}N.memoizedState=d;var A={value:d,getSnapshot:l};return N.queue=A,hd(Qh.bind(null,g,A,s),[s]),g.flags|=2048,wa(9,Df.bind(null,g,A,d,l),void 0,null),d},useId:function(){var s=Xa(),l=Li.identifierPrefix;if(lt){var d=he,g=$e;d=(g&~(1<<32-Ze(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Lc++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=pg++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},gj={readContext:ws,useCallback:I1,useContext:ws,useEffect:pd,useImperativeHandle:D1,useInsertionEffect:Zh,useLayoutEffect:md,useMemo:F1,useReducer:dd,useRef:Oo,useState:function(){return dd(Au)},useDebugValue:mg,useDeferredValue:function(s){var l=ba();return O1(l,zs.memoizedState,s)},useTransition:function(){var s=dd(Au)[0],l=ba().memoizedState;return[s,l]},useMutableSource:Gh,useSyncExternalStore:Rf,useId:M1,unstable_isNewReconciler:!1},vj={readContext:ws,useCallback:I1,useContext:ws,useEffect:pd,useImperativeHandle:D1,useInsertionEffect:Zh,useLayoutEffect:md,useMemo:F1,useReducer:bl,useRef:Oo,useState:function(){return bl(Au)},useDebugValue:mg,useDeferredValue:function(s){var l=ba();return zs===null?l.memoizedState=s:O1(l,zs.memoizedState,s)},useTransition:function(){var s=bl(Au)[0],l=ba().memoizedState;return[s,l]},useMutableSource:Gh,useSyncExternalStore:Rf,useId:M1,unstable_isNewReconciler:!1};function Mo(s,l){if(s&&s.defaultProps){l=De({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function gg(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:De({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Xh={isMounted:function(s){return(s=s._reactInternals)?Zr(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var g=Sa(),N=Oc(s),A=_s(g,N);A.payload=l,d!=null&&(A.callback=d),l=As(s,A,N),l!==null&&(Uo(l,s,N,g),Ti(l,s,N))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=Sa(),N=Oc(s),A=_s(g,N);A.tag=1,A.payload=l,d!=null&&(A.callback=d),l=As(s,A,N),l!==null&&(Uo(l,s,N,g),Ti(l,s,N))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Sa(),g=Oc(s),N=_s(d,g);N.tag=2,l!=null&&(N.callback=l),l=As(s,N,g),l!==null&&(Uo(l,s,g,d),Ti(l,s,g))}};function z1(s,l,d,g,N,A,G){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,A,G):l.prototype&&l.prototype.isPureReactComponent?!ea(d,g)||!ea(N,A):!0}function $1(s,l,d){var g=!1,N=xl,A=l.contextType;return typeof A=="object"&&A!==null?A=ws(A):(N=sa(l)?nc:wi.current,g=l.contextTypes,A=(g=g!=null)?kc(s,N):xl),l=new l(d,A),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Xh,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=N,s.__reactInternalMemoizedMaskedChildContext=A),l}function V1(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&Xh.enqueueReplaceState(l,l.state,null)}function vg(s,l,d,g){var N=s.stateNode;N.props=d,N.state=s.memoizedState,N.refs={},Ni(s);var A=l.contextType;typeof A=="object"&&A!==null?N.context=ws(A):(A=sa(l)?nc:wi.current,N.context=kc(s,A)),N.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(gg(s,l,A,d),N.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&Xh.enqueueReplaceState(N,N.state,null),Ei(s,d,N,g),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308)}function vd(s,l){try{var d="",g=l;do d+=me(g),g=g.return;while(g);var N=d}catch(A){N=`
Error generating stack: `+A.message+`
`+A.stack}return{value:s,source:l,stack:N,digest:null}}function xg(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function yg(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var xj=typeof WeakMap=="function"?WeakMap:Map;function H1(s,l,d){d=_s(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){ip||(ip=!0,Dg=g),yg(s,l)},d}function W1(s,l,d){d=_s(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;d.payload=function(){return g(N)},d.callback=function(){yg(s,l)}}var A=s.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(d.callback=function(){yg(s,l),typeof g!="function"&&(Ic===null?Ic=new Set([this]):Ic.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})}),d}function G1(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new xj;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(d)||(N.add(d),s=Lj.bind(null,s,l,d),l.then(s,s))}function K1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Q1(s,l,d,g,N){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=_s(-1,1),l.tag=2,As(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=N,s)}var yj=B.ReactCurrentOwner,Oa=!1;function Na(s,l,d,g){l.child=s===null?fs(l,null,d,g):qs(l,s.child,d,g)}function Z1(s,l,d,g,N){d=d.render;var A=l.ref;return bs(l,N),g=_u(s,l,d,g,A,N),d=yo(),s!==null&&!Oa?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~N,ic(s,l,N)):(lt&&d&&st(l),l.flags|=1,Na(s,l,g,N),l.child)}function Y1(s,l,d,g,N){if(s===null){var A=d.type;return typeof A=="function"&&!Ug(A)&&A.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=A,X1(s,l,A,g,N)):(s=dp(d.type,null,g,l,l.mode,N),s.ref=l.ref,s.return=l,l.child=s)}if(A=s.child,(s.lanes&N)===0){var G=A.memoizedProps;if(d=d.compare,d=d!==null?d:ea,d(G,g)&&s.ref===l.ref)return ic(s,l,N)}return l.flags|=1,s=Bc(A,g),s.ref=l.ref,s.return=l,l.child=s}function X1(s,l,d,g,N){if(s!==null){var A=s.memoizedProps;if(ea(A,g)&&s.ref===l.ref)if(Oa=!1,l.pendingProps=g=A,(s.lanes&N)!==0)(s.flags&131072)!==0&&(Oa=!0);else return l.lanes=s.lanes,ic(s,l,N)}return bg(s,l,d,g,N)}function J1(s,l,d){var g=l.pendingProps,N=g.children,A=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(yd,eo),eo|=d;else{if((d&1073741824)===0)return s=A!==null?A.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Br(yd,eo),eo|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=A!==null?A.baseLanes:d,Br(yd,eo),eo|=g}else A!==null?(g=A.baseLanes|d,l.memoizedState=null):g=d,Br(yd,eo),eo|=g;return Na(s,l,N,d),l.child}function ex(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function bg(s,l,d,g,N){var A=sa(d)?nc:wi.current;return A=kc(l,A),bs(l,N),d=_u(s,l,d,g,A,N),g=yo(),s!==null&&!Oa?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~N,ic(s,l,N)):(lt&&g&&st(l),l.flags|=1,Na(s,l,d,N),l.child)}function tx(s,l,d,g,N){if(sa(d)){var A=!0;rc(l)}else A=!1;if(bs(l,N),l.stateNode===null)ep(s,l),$1(l,d,g),vg(l,d,g,N),g=!0;else if(s===null){var G=l.stateNode,Se=l.memoizedProps;G.props=Se;var Le=G.context,Ye=d.contextType;typeof Ye=="object"&&Ye!==null?Ye=ws(Ye):(Ye=sa(d)?nc:wi.current,Ye=kc(l,Ye));var Nt=d.getDerivedStateFromProps,Ct=typeof Nt=="function"||typeof G.getSnapshotBeforeUpdate=="function";Ct||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Se!==g||Le!==Ye)&&V1(l,G,g,Ye),Us=!1;var bt=l.memoizedState;G.state=bt,Ei(l,g,G,N),Le=l.memoizedState,Se!==g||bt!==Le||ra.current||Us?(typeof Nt=="function"&&(gg(l,d,Nt,g),Le=l.memoizedState),(Se=Us||z1(l,d,Se,g,bt,Le,Ye))?(Ct||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(l.flags|=4194308)):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Le),G.props=g,G.state=Le,G.context=Ye,g=Se):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{G=l.stateNode,ia(s,l),Se=l.memoizedProps,Ye=l.type===l.elementType?Se:Mo(l.type,Se),G.props=Ye,Ct=l.pendingProps,bt=G.context,Le=d.contextType,typeof Le=="object"&&Le!==null?Le=ws(Le):(Le=sa(d)?nc:wi.current,Le=kc(l,Le));var $t=d.getDerivedStateFromProps;(Nt=typeof $t=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Se!==Ct||bt!==Le)&&V1(l,G,g,Le),Us=!1,bt=l.memoizedState,G.state=bt,Ei(l,g,G,N);var rn=l.memoizedState;Se!==Ct||bt!==rn||ra.current||Us?(typeof $t=="function"&&(gg(l,d,$t,g),rn=l.memoizedState),(Ye=Us||z1(l,d,Ye,g,bt,rn,Le)||!1)?(Nt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(g,rn,Le),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(g,rn,Le)),typeof G.componentDidUpdate=="function"&&(l.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof G.componentDidUpdate!="function"||Se===s.memoizedProps&&bt===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Se===s.memoizedProps&&bt===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=rn),G.props=g,G.state=rn,G.context=Le,g=Ye):(typeof G.componentDidUpdate!="function"||Se===s.memoizedProps&&bt===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Se===s.memoizedProps&&bt===s.memoizedState||(l.flags|=1024),g=!1)}return wg(s,l,d,g,A,N)}function wg(s,l,d,g,N,A){ex(s,l);var G=(l.flags&128)!==0;if(!g&&!G)return N&&Hh(l,d,!1),ic(s,l,A);g=l.stateNode,yj.current=l;var Se=G&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&G?(l.child=qs(l,s.child,null,A),l.child=qs(l,null,Se,A)):Na(s,l,Se,A),l.memoizedState=g.state,N&&Hh(l,d,!0),l.child}function nx(s){var l=s.stateNode;l.pendingContext?Vh(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Vh(s,l.context,!1),Tc(s,l.containerInfo)}function rx(s,l,d,g,N){return Zt(),Rt(N),l.flags|=256,Na(s,l,d,g),l.child}var Ng={dehydrated:null,treeContext:null,retryLane:0};function Sg(s){return{baseLanes:s,cachePool:null,transitions:null}}function sx(s,l,d){var g=l.pendingProps,N=Jr.current,A=!1,G=(l.flags&128)!==0,Se;if((Se=G)||(Se=s!==null&&s.memoizedState===null?!1:(N&2)!==0),Se?(A=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(N|=1),Br(Jr,N&1),s===null)return nn(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(G=g.children,s=g.fallback,A?(g=l.mode,A=l.child,G={mode:"hidden",children:G},(g&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=G):A=fp(G,g,0,null),s=Ru(s,g,d,null),A.return=l,s.return=l,A.sibling=s,l.child=A,l.child.memoizedState=Sg(d),l.memoizedState=Ng,s):jg(l,G));if(N=s.memoizedState,N!==null&&(Se=N.dehydrated,Se!==null))return bj(s,l,G,g,Se,N,d);if(A){A=g.fallback,G=l.mode,N=s.child,Se=N.sibling;var Le={mode:"hidden",children:g.children};return(G&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=Le,l.deletions=null):(g=Bc(N,Le),g.subtreeFlags=N.subtreeFlags&14680064),Se!==null?A=Bc(Se,A):(A=Ru(A,G,d,null),A.flags|=2),A.return=l,g.return=l,g.sibling=A,l.child=g,g=A,A=l.child,G=s.child.memoizedState,G=G===null?Sg(d):{baseLanes:G.baseLanes|d,cachePool:null,transitions:G.transitions},A.memoizedState=G,A.childLanes=s.childLanes&~d,l.memoizedState=Ng,g}return A=s.child,s=A.sibling,g=Bc(A,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=g,l.memoizedState=null,g}function jg(s,l){return l=fp({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Jh(s,l,d,g){return g!==null&&Rt(g),qs(l,s.child,null,d),s=jg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function bj(s,l,d,g,N,A,G){if(d)return l.flags&256?(l.flags&=-257,g=xg(Error(n(422))),Jh(s,l,G,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(A=g.fallback,N=l.mode,g=fp({mode:"visible",children:g.children},N,0,null),A=Ru(A,N,G,null),A.flags|=2,g.return=l,A.return=l,g.sibling=A,l.child=g,(l.mode&1)!==0&&qs(l,s.child,null,G),l.child.memoizedState=Sg(G),l.memoizedState=Ng,A);if((l.mode&1)===0)return Jh(s,l,G,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var Se=g.dgst;return g=Se,A=Error(n(419)),g=xg(A,g,void 0),Jh(s,l,G,g)}if(Se=(G&s.childLanes)!==0,Oa||Se){if(g=Li,g!==null){switch(G&-G){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|G))!==0?0:N,N!==0&&N!==A.retryLane&&(A.retryLane=N,Vr(s,N),Uo(g,s,N,-1))}return qg(),g=xg(Error(n(421))),Jh(s,l,G,g)}return N.data==="$?"?(l.flags|=128,l.child=s.child,l=Rj.bind(null,s),N._reactRetry=l,null):(s=A.treeContext,rt=Gi(N.nextSibling),tt=l,lt=!0,ut=null,s!==null&&(ie[fe++]=$e,ie[fe++]=he,ie[fe++]=Ee,$e=s.id,he=s.overflow,Ee=l),l=jg(l,g.children),l.flags|=4096,l)}function ix(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Nr(s.return,l,d)}function Cg(s,l,d,g,N){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:N}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=d,A.tailMode=N)}function ax(s,l,d){var g=l.pendingProps,N=g.revealOrder,A=g.tail;if(Na(s,l,g.children,d),g=Jr.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ix(s,d,l);else if(s.tag===19)ix(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Br(Jr,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)s=d.alternate,s!==null&&Ya(s)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),Cg(l,!1,N,d,A);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(s=N.alternate,s!==null&&Ya(s)===null){l.child=N;break}s=N.sibling,N.sibling=d,d=N,N=s}Cg(l,!0,d,null,A);break;case"together":Cg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ep(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ic(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),ku|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=Bc(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Bc(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function wj(s,l,d){switch(l.tag){case 3:nx(l),Zt();break;case 5:Wh(l);break;case 1:sa(l.type)&&rc(l);break;case 4:Tc(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;Br(Ks,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Br(Jr,Jr.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?sx(s,l,d):(Br(Jr,Jr.current&1),s=ic(s,l,d),s!==null?s.sibling:null);Br(Jr,Jr.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(s.flags&128)!==0){if(g)return ax(s,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Br(Jr,Jr.current),g)break;return null;case 22:case 23:return l.lanes=0,J1(s,l,d)}return ic(s,l,d)}var ox,_g,lx,cx;ox=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},_g=function(){},lx=function(s,l,d,g){var N=s.memoizedProps;if(N!==g){s=l.stateNode,Io(hi.current);var A=null;switch(d){case"input":N=Dt(s,N),g=Dt(s,g),A=[];break;case"select":N=De({},N,{value:void 0}),g=De({},g,{value:void 0}),A=[];break;case"textarea":N=R(s,N),g=R(s,g),A=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=_c)}tn(d,g);var G;d=null;for(Ye in N)if(!g.hasOwnProperty(Ye)&&N.hasOwnProperty(Ye)&&N[Ye]!=null)if(Ye==="style"){var Se=N[Ye];for(G in Se)Se.hasOwnProperty(G)&&(d||(d={}),d[G]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(a.hasOwnProperty(Ye)?A||(A=[]):(A=A||[]).push(Ye,null));for(Ye in g){var Le=g[Ye];if(Se=N?.[Ye],g.hasOwnProperty(Ye)&&Le!==Se&&(Le!=null||Se!=null))if(Ye==="style")if(Se){for(G in Se)!Se.hasOwnProperty(G)||Le&&Le.hasOwnProperty(G)||(d||(d={}),d[G]="");for(G in Le)Le.hasOwnProperty(G)&&Se[G]!==Le[G]&&(d||(d={}),d[G]=Le[G])}else d||(A||(A=[]),A.push(Ye,d)),d=Le;else Ye==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Se=Se?Se.__html:void 0,Le!=null&&Se!==Le&&(A=A||[]).push(Ye,Le)):Ye==="children"?typeof Le!="string"&&typeof Le!="number"||(A=A||[]).push(Ye,""+Le):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ye)?(Le!=null&&Ye==="onScroll"&&zr("scroll",s),A||Se===Le||(A=[])):(A=A||[]).push(Ye,Le))}d&&(A=A||[]).push("style",d);var Ye=A;(l.updateQueue=Ye)&&(l.flags|=4)}},cx=function(s,l,d,g){d!==g&&(l.flags|=4)};function If(s,l){if(!lt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function aa(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var N=s.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=s,N=N.sibling;else for(N=s.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=s,N=N.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function Nj(s,l,d){var g=l.pendingProps;switch(We(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aa(l),null;case 1:return sa(l.type)&&od(),aa(l),null;case 3:return g=l.stateNode,vo(),Lr(ra),Lr(wi),Lf(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(ys(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ut!==null&&(Og(ut),ut=null))),_g(s,l),aa(l),null;case 5:Tf(l);var N=Io(yl.current);if(d=l.type,s!==null&&l.stateNode!=null)lx(s,l,d,g,N),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return aa(l),null}if(s=Io(hi.current),ys(l)){g=l.stateNode,d=l.type;var A=l.memoizedProps;switch(g[go]=l,g[Ac]=A,s=(l.mode&1)!==0,d){case"dialog":zr("cancel",g),zr("close",g);break;case"iframe":case"object":case"embed":zr("load",g);break;case"video":case"audio":for(N=0;N<gl.length;N++)zr(gl[N],g);break;case"source":zr("error",g);break;case"img":case"image":case"link":zr("error",g),zr("load",g);break;case"details":zr("toggle",g);break;case"input":le(g,A),zr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!A.multiple},zr("invalid",g);break;case"textarea":H(g,A),zr("invalid",g)}tn(d,A),N=null;for(var G in A)if(A.hasOwnProperty(G)){var Se=A[G];G==="children"?typeof Se=="string"?g.textContent!==Se&&(A.suppressHydrationWarning!==!0&&ad(g.textContent,Se,s),N=["children",Se]):typeof Se=="number"&&g.textContent!==""+Se&&(A.suppressHydrationWarning!==!0&&ad(g.textContent,Se,s),N=["children",""+Se]):a.hasOwnProperty(G)&&Se!=null&&G==="onScroll"&&zr("scroll",g)}switch(d){case"input":Qe(g),X(g,A,!0);break;case"textarea":Qe(g),we(g);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(g.onclick=_c)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{G=N.nodeType===9?N:N.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ke(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=G.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=G.createElement(d,{is:g.is}):(s=G.createElement(d),d==="select"&&(G=s,g.multiple?G.multiple=!0:g.size&&(G.size=g.size))):s=G.createElementNS(s,d),s[go]=l,s[Ac]=g,ox(s,l,!1,!1),l.stateNode=s;e:{switch(G=Ke(d,g),d){case"dialog":zr("cancel",s),zr("close",s),N=g;break;case"iframe":case"object":case"embed":zr("load",s),N=g;break;case"video":case"audio":for(N=0;N<gl.length;N++)zr(gl[N],s);N=g;break;case"source":zr("error",s),N=g;break;case"img":case"image":case"link":zr("error",s),zr("load",s),N=g;break;case"details":zr("toggle",s),N=g;break;case"input":le(s,g),N=Dt(s,g),zr("invalid",s);break;case"option":N=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},N=De({},g,{value:void 0}),zr("invalid",s);break;case"textarea":H(s,g),N=R(s,g),zr("invalid",s);break;default:N=g}tn(d,N),Se=N;for(A in Se)if(Se.hasOwnProperty(A)){var Le=Se[A];A==="style"?Vt(s,Le):A==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&ct(s,Le)):A==="children"?typeof Le=="string"?(d!=="textarea"||Le!=="")&&_t(s,Le):typeof Le=="number"&&_t(s,""+Le):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(a.hasOwnProperty(A)?Le!=null&&A==="onScroll"&&zr("scroll",s):Le!=null&&v(s,A,Le,G))}switch(d){case"input":Qe(s),X(s,g,!1);break;case"textarea":Qe(s),we(s);break;case"option":g.value!=null&&s.setAttribute("value",""+Re(g.value));break;case"select":s.multiple=!!g.multiple,A=g.value,A!=null?re(s,!!g.multiple,A,!1):g.defaultValue!=null&&re(s,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(s.onclick=_c)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return aa(l),null;case 6:if(s&&l.stateNode!=null)cx(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Io(yl.current),Io(hi.current),ys(l)){if(g=l.stateNode,d=l.memoizedProps,g[go]=l,(A=g.nodeValue!==d)&&(s=tt,s!==null))switch(s.tag){case 3:ad(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ad(g.nodeValue,d,(s.mode&1)!==0)}A&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[go]=l,l.stateNode=g}return aa(l),null;case 13:if(Lr(Jr),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&rt!==null&&(l.mode&1)!==0&&(l.flags&128)===0)$n(),Zt(),l.flags|=98560,A=!1;else if(A=ys(l),g!==null&&g.dehydrated!==null){if(s===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[go]=l}else Zt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;aa(l),A=!1}else ut!==null&&(Og(ut),ut=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Jr.current&1)!==0?Si===0&&(Si=3):qg())),l.updateQueue!==null&&(l.flags|=4),aa(l),null);case 4:return vo(),_g(s,l),s===null&&Xl(l.stateNode.containerInfo),aa(l),null;case 10:return ss(l.type._context),aa(l),null;case 17:return sa(l.type)&&od(),aa(l),null;case 19:if(Lr(Jr),A=l.memoizedState,A===null)return aa(l),null;if(g=(l.flags&128)!==0,G=A.rendering,G===null)if(g)If(A,!1);else{if(Si!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(G=Ya(s),G!==null){for(l.flags|=128,If(A,!1),g=G.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)A=d,s=g,A.flags&=14680066,G=A.alternate,G===null?(A.childLanes=0,A.lanes=s,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=G.childLanes,A.lanes=G.lanes,A.child=G.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=G.memoizedProps,A.memoizedState=G.memoizedState,A.updateQueue=G.updateQueue,A.type=G.type,s=G.dependencies,A.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Br(Jr,Jr.current&1|2),l.child}s=s.sibling}A.tail!==null&&Bn()>bd&&(l.flags|=128,g=!0,If(A,!1),l.lanes=4194304)}else{if(!g)if(s=Ya(G),s!==null){if(l.flags|=128,g=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),If(A,!0),A.tail===null&&A.tailMode==="hidden"&&!G.alternate&&!lt)return aa(l),null}else 2*Bn()-A.renderingStartTime>bd&&d!==1073741824&&(l.flags|=128,g=!0,If(A,!1),l.lanes=4194304);A.isBackwards?(G.sibling=l.child,l.child=G):(d=A.last,d!==null?d.sibling=G:l.child=G,A.last=G)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=Bn(),l.sibling=null,d=Jr.current,Br(Jr,g?d&1|2:d&1),l):(aa(l),null);case 22:case 23:return Bg(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(eo&1073741824)!==0&&(aa(l),l.subtreeFlags&6&&(l.flags|=8192)):aa(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function Sj(s,l){switch(We(l),l.tag){case 1:return sa(l.type)&&od(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return vo(),Lr(ra),Lr(wi),Lf(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Tf(l),null;case 13:if(Lr(Jr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Zt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Lr(Jr),null;case 4:return vo(),null;case 10:return ss(l.type._context),null;case 22:case 23:return Bg(),null;case 24:return null;default:return null}}var tp=!1,oa=!1,jj=typeof WeakSet=="function"?WeakSet:Set,en=null;function xd(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){$s(s,l,g)}else d.current=null}function Ag(s,l,d){try{d()}catch(g){$s(s,l,g)}}var ux=!1;function Cj(s,l){if(Su=_o,s=Bs(),Ka(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var N=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break e}var G=0,Se=-1,Le=-1,Ye=0,Nt=0,Ct=s,bt=null;t:for(;;){for(var $t;Ct!==d||N!==0&&Ct.nodeType!==3||(Se=G+N),Ct!==A||g!==0&&Ct.nodeType!==3||(Le=G+g),Ct.nodeType===3&&(G+=Ct.nodeValue.length),($t=Ct.firstChild)!==null;)bt=Ct,Ct=$t;for(;;){if(Ct===s)break t;if(bt===d&&++Ye===N&&(Se=G),bt===A&&++Nt===g&&(Le=G),($t=Ct.nextSibling)!==null)break;Ct=bt,bt=Ct.parentNode}Ct=$t}d=Se===-1||Le===-1?null:{start:Se,end:Le}}else d=null}d=d||{start:0,end:0}}else d=null;for(ec={focusedElem:s,selectionRange:d},_o=!1,en=l;en!==null;)if(l=en,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,en=s;else for(;en!==null;){l=en;try{var rn=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var cn=rn.memoizedProps,Zs=rn.memoizedState,He=l.stateNode,Oe=He.getSnapshotBeforeUpdate(l.elementType===l.type?cn:Mo(l.type,cn),Zs);He.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var Ge=l.stateNode.containerInfo;Ge.nodeType===1?Ge.textContent="":Ge.nodeType===9&&Ge.documentElement&&Ge.removeChild(Ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Et){$s(l,l.return,Et)}if(s=l.sibling,s!==null){s.return=l.return,en=s;break}en=l.return}return rn=ux,ux=!1,rn}function Ff(s,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&s)===s){var A=N.destroy;N.destroy=void 0,A!==void 0&&Ag(l,d,A)}N=N.next}while(N!==g)}}function np(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Pg(s){var l=s.ref;if(l!==null){var d=s.stateNode;s.tag,s=d,typeof l=="function"?l(s):l.current=s}}function dx(s){var l=s.alternate;l!==null&&(s.alternate=null,dx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[go],delete l[Ac],delete l[na],delete l[fg],delete l[hg])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function fx(s){return s.tag===5||s.tag===3||s.tag===4}function hx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kg(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=_c));else if(g!==4&&(s=s.child,s!==null))for(kg(s,l,d),s=s.sibling;s!==null;)kg(s,l,d),s=s.sibling}function Tg(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(Tg(s,l,d),s=s.sibling;s!==null;)Tg(s,l,d),s=s.sibling}var Ki=null,Bo=!1;function Dc(s,l,d){for(d=d.child;d!==null;)px(s,l,d),d=d.sibling}function px(s,l,d){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(pt,d)}catch{}switch(d.tag){case 5:oa||xd(d,l);case 6:var g=Ki,N=Bo;Ki=null,Dc(s,l,d),Ki=g,Bo=N,Ki!==null&&(Bo?(s=Ki,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Ki.removeChild(d.stateNode));break;case 18:Ki!==null&&(Bo?(s=Ki,d=d.stateNode,s.nodeType===8?Af(s.parentNode,d):s.nodeType===1&&Af(s,d),Co(s)):Af(Ki,d.stateNode));break;case 4:g=Ki,N=Bo,Ki=d.stateNode.containerInfo,Bo=!0,Dc(s,l,d),Ki=g,Bo=N;break;case 0:case 11:case 14:case 15:if(!oa&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var A=N,G=A.destroy;A=A.tag,G!==void 0&&((A&2)!==0||(A&4)!==0)&&Ag(d,l,G),N=N.next}while(N!==g)}Dc(s,l,d);break;case 1:if(!oa&&(xd(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(Se){$s(d,l,Se)}Dc(s,l,d);break;case 21:Dc(s,l,d);break;case 22:d.mode&1?(oa=(g=oa)||d.memoizedState!==null,Dc(s,l,d),oa=g):Dc(s,l,d);break;default:Dc(s,l,d)}}function mx(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new jj),l.forEach(function(g){var N=Dj.bind(null,s,g);d.has(g)||(d.add(g),g.then(N,N))})}}function qo(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var N=d[g];try{var A=s,G=l,Se=G;e:for(;Se!==null;){switch(Se.tag){case 5:Ki=Se.stateNode,Bo=!1;break e;case 3:Ki=Se.stateNode.containerInfo,Bo=!0;break e;case 4:Ki=Se.stateNode.containerInfo,Bo=!0;break e}Se=Se.return}if(Ki===null)throw Error(n(160));px(A,G,N),Ki=null,Bo=!1;var Le=N.alternate;Le!==null&&(Le.return=null),N.return=null}catch(Ye){$s(N,l,Ye)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)gx(l,s),l=l.sibling}function gx(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(qo(l,s),wl(s),g&4){try{Ff(3,s,s.return),np(3,s)}catch(cn){$s(s,s.return,cn)}try{Ff(5,s,s.return)}catch(cn){$s(s,s.return,cn)}}break;case 1:qo(l,s),wl(s),g&512&&d!==null&&xd(d,d.return);break;case 5:if(qo(l,s),wl(s),g&512&&d!==null&&xd(d,d.return),s.flags&32){var N=s.stateNode;try{_t(N,"")}catch(cn){$s(s,s.return,cn)}}if(g&4&&(N=s.stateNode,N!=null)){var A=s.memoizedProps,G=d!==null?d.memoizedProps:A,Se=s.type,Le=s.updateQueue;if(s.updateQueue=null,Le!==null)try{Se==="input"&&A.type==="radio"&&A.name!=null&&xt(N,A),Ke(Se,G);var Ye=Ke(Se,A);for(G=0;G<Le.length;G+=2){var Nt=Le[G],Ct=Le[G+1];Nt==="style"?Vt(N,Ct):Nt==="dangerouslySetInnerHTML"?ct(N,Ct):Nt==="children"?_t(N,Ct):v(N,Nt,Ct,Ye)}switch(Se){case"input":xe(N,A);break;case"textarea":je(N,A);break;case"select":var bt=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!A.multiple;var $t=A.value;$t!=null?re(N,!!A.multiple,$t,!1):bt!==!!A.multiple&&(A.defaultValue!=null?re(N,!!A.multiple,A.defaultValue,!0):re(N,!!A.multiple,A.multiple?[]:"",!1))}N[Ac]=A}catch(cn){$s(s,s.return,cn)}}break;case 6:if(qo(l,s),wl(s),g&4){if(s.stateNode===null)throw Error(n(162));N=s.stateNode,A=s.memoizedProps;try{N.nodeValue=A}catch(cn){$s(s,s.return,cn)}}break;case 3:if(qo(l,s),wl(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Co(l.containerInfo)}catch(cn){$s(s,s.return,cn)}break;case 4:qo(l,s),wl(s);break;case 13:qo(l,s),wl(s),N=s.child,N.flags&8192&&(A=N.memoizedState!==null,N.stateNode.isHidden=A,!A||N.alternate!==null&&N.alternate.memoizedState!==null||(Rg=Bn())),g&4&&mx(s);break;case 22:if(Nt=d!==null&&d.memoizedState!==null,s.mode&1?(oa=(Ye=oa)||Nt,qo(l,s),oa=Ye):qo(l,s),wl(s),g&8192){if(Ye=s.memoizedState!==null,(s.stateNode.isHidden=Ye)&&!Nt&&(s.mode&1)!==0)for(en=s,Nt=s.child;Nt!==null;){for(Ct=en=Nt;en!==null;){switch(bt=en,$t=bt.child,bt.tag){case 0:case 11:case 14:case 15:Ff(4,bt,bt.return);break;case 1:xd(bt,bt.return);var rn=bt.stateNode;if(typeof rn.componentWillUnmount=="function"){g=bt,d=bt.return;try{l=g,rn.props=l.memoizedProps,rn.state=l.memoizedState,rn.componentWillUnmount()}catch(cn){$s(g,d,cn)}}break;case 5:xd(bt,bt.return);break;case 22:if(bt.memoizedState!==null){yx(Ct);continue}}$t!==null?($t.return=bt,en=$t):yx(Ct)}Nt=Nt.sibling}e:for(Nt=null,Ct=s;;){if(Ct.tag===5){if(Nt===null){Nt=Ct;try{N=Ct.stateNode,Ye?(A=N.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Se=Ct.stateNode,Le=Ct.memoizedProps.style,G=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,Se.style.display=yn("display",G))}catch(cn){$s(s,s.return,cn)}}}else if(Ct.tag===6){if(Nt===null)try{Ct.stateNode.nodeValue=Ye?"":Ct.memoizedProps}catch(cn){$s(s,s.return,cn)}}else if((Ct.tag!==22&&Ct.tag!==23||Ct.memoizedState===null||Ct===s)&&Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}if(Ct===s)break e;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===s)break e;Nt===Ct&&(Nt=null),Ct=Ct.return}Nt===Ct&&(Nt=null),Ct.sibling.return=Ct.return,Ct=Ct.sibling}}break;case 19:qo(l,s),wl(s),g&4&&mx(s);break;case 21:break;default:qo(l,s),wl(s)}}function wl(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(fx(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(_t(N,""),g.flags&=-33);var A=hx(s);Tg(s,A,N);break;case 3:case 4:var G=g.stateNode.containerInfo,Se=hx(s);kg(s,Se,G);break;default:throw Error(n(161))}}catch(Le){$s(s,s.return,Le)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function _j(s,l,d){en=s,vx(s)}function vx(s,l,d){for(var g=(s.mode&1)!==0;en!==null;){var N=en,A=N.child;if(N.tag===22&&g){var G=N.memoizedState!==null||tp;if(!G){var Se=N.alternate,Le=Se!==null&&Se.memoizedState!==null||oa;Se=tp;var Ye=oa;if(tp=G,(oa=Le)&&!Ye)for(en=N;en!==null;)G=en,Le=G.child,G.tag===22&&G.memoizedState!==null?bx(N):Le!==null?(Le.return=G,en=Le):bx(N);for(;A!==null;)en=A,vx(A),A=A.sibling;en=N,tp=Se,oa=Ye}xx(s)}else(N.subtreeFlags&8772)!==0&&A!==null?(A.return=N,en=A):xx(s)}}function xx(s){for(;en!==null;){var l=en;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:oa||np(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!oa)if(d===null)g.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:Mo(l.type,d.memoizedProps);g.componentDidUpdate(N,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&Fa(l,A,g);break;case 3:var G=l.updateQueue;if(G!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Fa(l,G,d)}break;case 5:var Se=l.stateNode;if(d===null&&l.flags&4){d=Se;var Le=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&d.focus();break;case"img":Le.src&&(d.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ye=l.alternate;if(Ye!==null){var Nt=Ye.memoizedState;if(Nt!==null){var Ct=Nt.dehydrated;Ct!==null&&Co(Ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}oa||l.flags&512&&Pg(l)}catch(bt){$s(l,l.return,bt)}}if(l===s){en=null;break}if(d=l.sibling,d!==null){d.return=l.return,en=d;break}en=l.return}}function yx(s){for(;en!==null;){var l=en;if(l===s){en=null;break}var d=l.sibling;if(d!==null){d.return=l.return,en=d;break}en=l.return}}function bx(s){for(;en!==null;){var l=en;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{np(4,l)}catch(Le){$s(l,d,Le)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(Le){$s(l,N,Le)}}var A=l.return;try{Pg(l)}catch(Le){$s(l,A,Le)}break;case 5:var G=l.return;try{Pg(l)}catch(Le){$s(l,G,Le)}}}catch(Le){$s(l,l.return,Le)}if(l===s){en=null;break}var Se=l.sibling;if(Se!==null){Se.return=l.return,en=Se;break}en=l.return}}var Aj=Math.ceil,rp=B.ReactCurrentDispatcher,Eg=B.ReactCurrentOwner,bo=B.ReactCurrentBatchConfig,Sr=0,Li=null,pi=null,Qi=0,eo=0,yd=Qa(0),Si=0,Of=null,ku=0,sp=0,Lg=0,Mf=null,Ma=null,Rg=0,bd=1/0,ac=null,ip=!1,Dg=null,Ic=null,ap=!1,Fc=null,op=0,Bf=0,Ig=null,lp=-1,cp=0;function Sa(){return(Sr&6)!==0?Bn():lp!==-1?lp:lp=Bn()}function Oc(s){return(s.mode&1)===0?1:(Sr&2)!==0&&Qi!==0?Qi&-Qi:Cs.transition!==null?(cp===0&&(cp=bn()),cp):(s=oe,s!==0||(s=window.event,s=s===void 0?16:li(s.type)),s)}function Uo(s,l,d,g){if(50<Bf)throw Bf=0,Ig=null,Error(n(185));dn(s,d,g),((Sr&2)===0||s!==Li)&&(s===Li&&((Sr&2)===0&&(sp|=d),Si===4&&Mc(s,Qi)),Ba(s,g),d===1&&Sr===0&&(l.mode&1)===0&&(bd=Bn()+500,Cu&&T()))}function Ba(s,l){var d=s.callbackNode;Ft(s,l);var g=Jt(s,s===Li?Qi:0);if(g===0)d!==null&&Mi(d),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(d!=null&&Mi(d),l===1)s.tag===0?C(Nx.bind(null,s)):x(Nx.bind(null,s)),ug(function(){(Sr&6)===0&&T()}),d=null;else{switch(Te(g)){case 1:d=hn;break;case 4:d=Nn;break;case 16:d=gn;break;case 536870912:d=Xt;break;default:d=gn}d=Tx(d,wx.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function wx(s,l){if(lp=-1,cp=0,(Sr&6)!==0)throw Error(n(327));var d=s.callbackNode;if(wd()&&s.callbackNode!==d)return null;var g=Jt(s,s===Li?Qi:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||l)l=up(s,g);else{l=g;var N=Sr;Sr|=2;var A=jx();(Li!==s||Qi!==l)&&(ac=null,bd=Bn()+500,Eu(s,l));do try{Tj();break}catch(Se){Sx(s,Se)}while(!0);wr(),rp.current=A,Sr=N,pi!==null?l=0:(Li=null,Qi=0,l=Si)}if(l!==0){if(l===2&&(N=Wt(s),N!==0&&(g=N,l=Fg(s,N))),l===1)throw d=Of,Eu(s,0),Mc(s,g),Ba(s,Bn()),d;if(l===6)Mc(s,g);else{if(N=s.current.alternate,(g&30)===0&&!Pj(N)&&(l=up(s,g),l===2&&(A=Wt(s),A!==0&&(g=A,l=Fg(s,A))),l===1))throw d=Of,Eu(s,0),Mc(s,g),Ba(s,Bn()),d;switch(s.finishedWork=N,s.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Lu(s,Ma,ac);break;case 3:if(Mc(s,g),(g&130023424)===g&&(l=Rg+500-Bn(),10<l)){if(Jt(s,0)!==0)break;if(N=s.suspendedLanes,(N&g)!==g){Sa(),s.pingedLanes|=s.suspendedLanes&N;break}s.timeoutHandle=_f(Lu.bind(null,s,Ma,ac),l);break}Lu(s,Ma,ac);break;case 4:if(Mc(s,g),(g&4194240)===g)break;for(l=s.eventTimes,N=-1;0<g;){var G=31-Ze(g);A=1<<G,G=l[G],G>N&&(N=G),g&=~A}if(g=N,g=Bn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Aj(g/1960))-g,10<g){s.timeoutHandle=_f(Lu.bind(null,s,Ma,ac),g);break}Lu(s,Ma,ac);break;case 5:Lu(s,Ma,ac);break;default:throw Error(n(329))}}}return Ba(s,Bn()),s.callbackNode===d?wx.bind(null,s):null}function Fg(s,l){var d=Mf;return s.current.memoizedState.isDehydrated&&(Eu(s,l).flags|=256),s=up(s,l),s!==2&&(l=Ma,Ma=d,l!==null&&Og(l)),s}function Og(s){Ma===null?Ma=s:Ma.push.apply(Ma,s)}function Pj(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var N=d[g],A=N.getSnapshot;N=N.value;try{if(!vs(A(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mc(s,l){for(l&=~Lg,l&=~sp,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-Ze(l),g=1<<d;s[d]=-1,l&=~g}}function Nx(s){if((Sr&6)!==0)throw Error(n(327));wd();var l=Jt(s,0);if((l&1)===0)return Ba(s,Bn()),null;var d=up(s,l);if(s.tag!==0&&d===2){var g=Wt(s);g!==0&&(l=g,d=Fg(s,g))}if(d===1)throw d=Of,Eu(s,0),Mc(s,l),Ba(s,Bn()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Lu(s,Ma,ac),Ba(s,Bn()),null}function Mg(s,l){var d=Sr;Sr|=1;try{return s(l)}finally{Sr=d,Sr===0&&(bd=Bn()+500,Cu&&T())}}function Tu(s){Fc!==null&&Fc.tag===0&&(Sr&6)===0&&wd();var l=Sr;Sr|=1;var d=bo.transition,g=oe;try{if(bo.transition=null,oe=1,s)return s()}finally{oe=g,bo.transition=d,Sr=l,(Sr&6)===0&&T()}}function Bg(){eo=yd.current,Lr(yd)}function Eu(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,zh(d)),pi!==null)for(d=pi.return;d!==null;){var g=d;switch(We(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&od();break;case 3:vo(),Lr(ra),Lr(wi),Lf();break;case 5:Tf(g);break;case 4:vo();break;case 13:Lr(Jr);break;case 19:Lr(Jr);break;case 10:ss(g.type._context);break;case 22:case 23:Bg()}d=d.return}if(Li=s,pi=s=Bc(s.current,null),Qi=eo=l,Si=0,Of=null,Lg=sp=ku=0,Ma=Mf=null,$r!==null){for(l=0;l<$r.length;l++)if(d=$r[l],g=d.interleaved,g!==null){d.interleaved=null;var N=g.next,A=d.pending;if(A!==null){var G=A.next;A.next=N,g.next=G}d.pending=g}$r=null}return s}function Sx(s,l){do{var d=pi;try{if(wr(),ld.current=Yh,Ec){for(var g=is.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}Ec=!1}if(xo=0,ks=zs=is=null,Fo=!1,Lc=0,Eg.current=null,d===null||d.return===null){Si=1,Of=l,pi=null;break}e:{var A=s,G=d.return,Se=d,Le=l;if(l=Qi,Se.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var Ye=Le,Nt=Se,Ct=Nt.tag;if((Nt.mode&1)===0&&(Ct===0||Ct===11||Ct===15)){var bt=Nt.alternate;bt?(Nt.updateQueue=bt.updateQueue,Nt.memoizedState=bt.memoizedState,Nt.lanes=bt.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var $t=K1(G);if($t!==null){$t.flags&=-257,Q1($t,G,Se,A,l),$t.mode&1&&G1(A,Ye,l),l=$t,Le=Ye;var rn=l.updateQueue;if(rn===null){var cn=new Set;cn.add(Le),l.updateQueue=cn}else rn.add(Le);break e}else{if((l&1)===0){G1(A,Ye,l),qg();break e}Le=Error(n(426))}}else if(lt&&Se.mode&1){var Zs=K1(G);if(Zs!==null){(Zs.flags&65536)===0&&(Zs.flags|=256),Q1(Zs,G,Se,A,l),Rt(vd(Le,Se));break e}}A=Le=vd(Le,Se),Si!==4&&(Si=2),Mf===null?Mf=[A]:Mf.push(A),A=G;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var He=H1(A,Le,l);Hr(A,He);break e;case 1:Se=Le;var Oe=A.type,Ge=A.stateNode;if((A.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(Ic===null||!Ic.has(Ge)))){A.flags|=65536,l&=-l,A.lanes|=l;var Et=W1(A,Se,l);Hr(A,Et);break e}}A=A.return}while(A!==null)}_x(d)}catch(pn){l=pn,pi===d&&d!==null&&(pi=d=d.return);continue}break}while(!0)}function jx(){var s=rp.current;return rp.current=Yh,s===null?Yh:s}function qg(){(Si===0||Si===3||Si===2)&&(Si=4),Li===null||(ku&268435455)===0&&(sp&268435455)===0||Mc(Li,Qi)}function up(s,l){var d=Sr;Sr|=2;var g=jx();(Li!==s||Qi!==l)&&(ac=null,Eu(s,l));do try{kj();break}catch(N){Sx(s,N)}while(!0);if(wr(),Sr=d,rp.current=g,pi!==null)throw Error(n(261));return Li=null,Qi=0,Si}function kj(){for(;pi!==null;)Cx(pi)}function Tj(){for(;pi!==null&&!Bi();)Cx(pi)}function Cx(s){var l=kx(s.alternate,s,eo);s.memoizedProps=s.pendingProps,l===null?_x(s):pi=l,Eg.current=null}function _x(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=Nj(d,l,eo),d!==null){pi=d;return}}else{if(d=Sj(d,l),d!==null){d.flags&=32767,pi=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Si=6,pi=null;return}}if(l=l.sibling,l!==null){pi=l;return}pi=l=s}while(l!==null);Si===0&&(Si=5)}function Lu(s,l,d){var g=oe,N=bo.transition;try{bo.transition=null,oe=1,Ej(s,l,d,g)}finally{bo.transition=N,oe=g}return null}function Ej(s,l,d,g){do wd();while(Fc!==null);if((Sr&6)!==0)throw Error(n(327));d=s.finishedWork;var N=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var A=d.lanes|d.childLanes;if(q(s,A),s===Li&&(pi=Li=null,Qi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||ap||(ap=!0,Tx(gn,function(){return wd(),null})),A=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||A){A=bo.transition,bo.transition=null;var G=oe;oe=1;var Se=Sr;Sr|=4,Eg.current=null,Cj(s,d),gx(d,s),mu(ec),_o=!!Su,ec=Su=null,s.current=d,_j(d),qi(),Sr=Se,oe=G,bo.transition=A}else s.current=d;if(ap&&(ap=!1,Fc=s,op=N),A=s.pendingLanes,A===0&&(Ic=null),ft(d.stateNode),Ba(s,Bn()),l!==null)for(g=s.onRecoverableError,d=0;d<l.length;d++)N=l[d],g(N.value,{componentStack:N.stack,digest:N.digest});if(ip)throw ip=!1,s=Dg,Dg=null,s;return(op&1)!==0&&s.tag!==0&&wd(),A=s.pendingLanes,(A&1)!==0?s===Ig?Bf++:(Bf=0,Ig=s):Bf=0,T(),null}function wd(){if(Fc!==null){var s=Te(op),l=bo.transition,d=oe;try{if(bo.transition=null,oe=16>s?16:s,Fc===null)var g=!1;else{if(s=Fc,Fc=null,op=0,(Sr&6)!==0)throw Error(n(331));var N=Sr;for(Sr|=4,en=s.current;en!==null;){var A=en,G=A.child;if((en.flags&16)!==0){var Se=A.deletions;if(Se!==null){for(var Le=0;Le<Se.length;Le++){var Ye=Se[Le];for(en=Ye;en!==null;){var Nt=en;switch(Nt.tag){case 0:case 11:case 15:Ff(8,Nt,A)}var Ct=Nt.child;if(Ct!==null)Ct.return=Nt,en=Ct;else for(;en!==null;){Nt=en;var bt=Nt.sibling,$t=Nt.return;if(dx(Nt),Nt===Ye){en=null;break}if(bt!==null){bt.return=$t,en=bt;break}en=$t}}}var rn=A.alternate;if(rn!==null){var cn=rn.child;if(cn!==null){rn.child=null;do{var Zs=cn.sibling;cn.sibling=null,cn=Zs}while(cn!==null)}}en=A}}if((A.subtreeFlags&2064)!==0&&G!==null)G.return=A,en=G;else e:for(;en!==null;){if(A=en,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Ff(9,A,A.return)}var He=A.sibling;if(He!==null){He.return=A.return,en=He;break e}en=A.return}}var Oe=s.current;for(en=Oe;en!==null;){G=en;var Ge=G.child;if((G.subtreeFlags&2064)!==0&&Ge!==null)Ge.return=G,en=Ge;else e:for(G=Oe;en!==null;){if(Se=en,(Se.flags&2048)!==0)try{switch(Se.tag){case 0:case 11:case 15:np(9,Se)}}catch(pn){$s(Se,Se.return,pn)}if(Se===G){en=null;break e}var Et=Se.sibling;if(Et!==null){Et.return=Se.return,en=Et;break e}en=Se.return}}if(Sr=N,T(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(pt,s)}catch{}g=!0}return g}finally{oe=d,bo.transition=l}}return!1}function Ax(s,l,d){l=vd(d,l),l=H1(s,l,1),s=As(s,l,1),l=Sa(),s!==null&&(dn(s,1,l),Ba(s,l))}function $s(s,l,d){if(s.tag===3)Ax(s,s,d);else for(;l!==null;){if(l.tag===3){Ax(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ic===null||!Ic.has(g))){s=vd(d,s),s=W1(l,s,1),l=As(l,s,1),s=Sa(),l!==null&&(dn(l,1,s),Ba(l,s));break}}l=l.return}}function Lj(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),l=Sa(),s.pingedLanes|=s.suspendedLanes&d,Li===s&&(Qi&d)===d&&(Si===4||Si===3&&(Qi&130023424)===Qi&&500>Bn()-Rg?Eu(s,0):Lg|=d),Ba(s,l)}function Px(s,l){l===0&&((s.mode&1)===0?l=1:(l=St,St<<=1,(St&130023424)===0&&(St=4194304)));var d=Sa();s=Vr(s,l),s!==null&&(dn(s,l,d),Ba(s,d))}function Rj(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),Px(s,d)}function Dj(s,l){var d=0;switch(s.tag){case 13:var g=s.stateNode,N=s.memoizedState;N!==null&&(d=N.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Px(s,d)}var kx;kx=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||ra.current)Oa=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return Oa=!1,wj(s,l,d);Oa=(s.flags&131072)!==0}else Oa=!1,lt&&(l.flags&1048576)!==0&&ze(l,J,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;ep(s,l),s=l.pendingProps;var N=kc(l,wi.current);bs(l,d),N=_u(null,l,g,s,N,d);var A=yo();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,sa(g)?(A=!0,rc(l)):A=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ni(l),N.updater=Xh,l.stateNode=N,N._reactInternals=l,vg(l,g,s,d),l=wg(null,l,g,!0,A,d)):(l.tag=0,lt&&A&&st(l),Na(null,l,N,d),l=l.child),l;case 16:g=l.elementType;e:{switch(ep(s,l),s=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=Fj(g),s=Mo(g,s),N){case 0:l=bg(null,l,g,s,d);break e;case 1:l=tx(null,l,g,s,d);break e;case 11:l=Z1(null,l,g,s,d);break e;case 14:l=Y1(null,l,g,Mo(g.type,s),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Mo(g,N),bg(s,l,g,N,d);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Mo(g,N),tx(s,l,g,N,d);case 3:e:{if(nx(l),s===null)throw Error(n(387));g=l.pendingProps,A=l.memoizedState,N=A.element,ia(s,l),Ei(l,g,null,d);var G=l.memoizedState;if(g=G.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){N=vd(Error(n(423)),l),l=rx(s,l,g,d,N);break e}else if(g!==N){N=vd(Error(n(424)),l),l=rx(s,l,g,d,N);break e}else for(rt=Gi(l.stateNode.containerInfo.firstChild),tt=l,lt=!0,ut=null,d=fs(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zt(),g===N){l=ic(s,l,d);break e}Na(s,l,g,d)}l=l.child}return l;case 5:return Wh(l),s===null&&nn(l),g=l.type,N=l.pendingProps,A=s!==null?s.memoizedProps:null,G=N.children,Cf(g,N)?G=null:A!==null&&Cf(g,A)&&(l.flags|=32),ex(s,l),Na(s,l,G,d),l.child;case 6:return s===null&&nn(l),null;case 13:return sx(s,l,d);case 4:return Tc(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=qs(l,null,g,d):Na(s,l,g,d),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Mo(g,N),Z1(s,l,g,N,d);case 7:return Na(s,l,l.pendingProps,d),l.child;case 8:return Na(s,l,l.pendingProps.children,d),l.child;case 12:return Na(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,A=l.memoizedProps,G=N.value,Br(Ks,g._currentValue),g._currentValue=G,A!==null)if(vs(A.value,G)){if(A.children===N.children&&!ra.current){l=ic(s,l,d);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var Se=A.dependencies;if(Se!==null){G=A.child;for(var Le=Se.firstContext;Le!==null;){if(Le.context===g){if(A.tag===1){Le=_s(-1,d&-d),Le.tag=2;var Ye=A.updateQueue;if(Ye!==null){Ye=Ye.shared;var Nt=Ye.pending;Nt===null?Le.next=Le:(Le.next=Nt.next,Nt.next=Le),Ye.pending=Le}}A.lanes|=d,Le=A.alternate,Le!==null&&(Le.lanes|=d),Nr(A.return,d,l),Se.lanes|=d;break}Le=Le.next}}else if(A.tag===10)G=A.type===l.type?null:A.child;else if(A.tag===18){if(G=A.return,G===null)throw Error(n(341));G.lanes|=d,Se=G.alternate,Se!==null&&(Se.lanes|=d),Nr(G,d,l),G=A.sibling}else G=A.child;if(G!==null)G.return=A;else for(G=A;G!==null;){if(G===l){G=null;break}if(A=G.sibling,A!==null){A.return=G.return,G=A;break}G=G.return}A=G}Na(s,l,N.children,d),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,bs(l,d),N=ws(N),g=g(N),l.flags|=1,Na(s,l,g,d),l.child;case 14:return g=l.type,N=Mo(g,l.pendingProps),N=Mo(g.type,N),Y1(s,l,g,N,d);case 15:return X1(s,l,l.type,l.pendingProps,d);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:Mo(g,N),ep(s,l),l.tag=1,sa(g)?(s=!0,rc(l)):s=!1,bs(l,d),$1(l,g,N),vg(l,g,N,d),wg(null,l,g,!0,s,d);case 19:return ax(s,l,d);case 22:return J1(s,l,d)}throw Error(n(156,l.tag))};function Tx(s,l){return ai(s,l)}function Ij(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(s,l,d,g){return new Ij(s,l,d,g)}function Ug(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Fj(s){if(typeof s=="function")return Ug(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===Ce)return 14}return 2}function Bc(s,l){var d=s.alternate;return d===null?(d=wo(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function dp(s,l,d,g,N,A){var G=2;if(g=s,typeof s=="function")Ug(s)&&(G=1);else if(typeof s=="string")G=5;else e:switch(s){case W:return Ru(d.children,N,A,l);case te:G=8,N|=8;break;case Q:return s=wo(12,d,l,N|2),s.elementType=Q,s.lanes=A,s;case z:return s=wo(13,d,l,N),s.elementType=z,s.lanes=A,s;case Y:return s=wo(19,d,l,N),s.elementType=Y,s.lanes=A,s;case Ae:return fp(d,N,A,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case de:G=10;break e;case F:G=9;break e;case L:G=11;break e;case Ce:G=14;break e;case _e:G=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=wo(G,d,l,N),l.elementType=s,l.type=g,l.lanes=A,l}function Ru(s,l,d,g){return s=wo(7,s,g,l),s.lanes=d,s}function fp(s,l,d,g){return s=wo(22,s,g,l),s.elementType=Ae,s.lanes=d,s.stateNode={isHidden:!1},s}function zg(s,l,d){return s=wo(6,s,null,l),s.lanes=d,s}function $g(s,l,d){return l=wo(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Oj(s,l,d,g,N){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Vg(s,l,d,g,N,A,G,Se,Le){return s=new Oj(s,l,d,Se,Le),l===1?(l=1,A===!0&&(l|=8)):l=0,A=wo(3,null,null,l),s.current=A,A.stateNode=s,A.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(A),s}function Mj(s,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:g==null?null:""+g,children:s,containerInfo:l,implementation:d}}function Ex(s){if(!s)return xl;s=s._reactInternals;e:{if(Zr(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(sa(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(sa(d))return kf(s,d,l)}return l}function Lx(s,l,d,g,N,A,G,Se,Le){return s=Vg(d,g,!0,s,N,A,G,Se,Le),s.context=Ex(null),d=s.current,g=Sa(),N=Oc(d),A=_s(g,N),A.callback=l??null,As(d,A,N),s.current.lanes=N,dn(s,N,g),Ba(s,g),s}function hp(s,l,d,g){var N=l.current,A=Sa(),G=Oc(N);return d=Ex(d),l.context===null?l.context=d:l.pendingContext=d,l=_s(A,G),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=As(N,l,G),s!==null&&(Uo(s,N,G,A),Ti(s,N,G)),G}function pp(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function Rx(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Hg(s,l){Rx(s,l),(s=s.alternate)&&Rx(s,l)}function Bj(){return null}var Dx=typeof reportError=="function"?reportError:function(s){console.error(s)};function Wg(s){this._internalRoot=s}mp.prototype.render=Wg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));hp(s,l,null,null)},mp.prototype.unmount=Wg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Tu(function(){hp(null,s,null,null)}),l[Pi]=null}};function mp(s){this._internalRoot=s}mp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Gt();s={blockedOn:null,target:s,priority:l};for(var d=0;d<qn.length&&l!==0&&l<qn[d].priority;d++);qn.splice(d,0,s),d===0&&Ha(s)}};function Gg(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function gp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ix(){}function qj(s,l,d,g,N){if(N){if(typeof g=="function"){var A=g;g=function(){var Ye=pp(G);A.call(Ye)}}var G=Lx(l,g,s,0,null,!1,!1,"",Ix);return s._reactRootContainer=G,s[Pi]=G.current,Xl(s.nodeType===8?s.parentNode:s),Tu(),G}for(;N=s.lastChild;)s.removeChild(N);if(typeof g=="function"){var Se=g;g=function(){var Ye=pp(Le);Se.call(Ye)}}var Le=Vg(s,0,!1,null,null,!1,!1,"",Ix);return s._reactRootContainer=Le,s[Pi]=Le.current,Xl(s.nodeType===8?s.parentNode:s),Tu(function(){hp(l,Le,d,g)}),Le}function vp(s,l,d,g,N){var A=d._reactRootContainer;if(A){var G=A;if(typeof N=="function"){var Se=N;N=function(){var Le=pp(G);Se.call(Le)}}hp(l,G,s,N)}else G=qj(d,l,s,N,g);return pp(G)}Ne=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=It(l.pendingLanes);d!==0&&(ue(l,d|1),Ba(l,Bn()),(Sr&6)===0&&(bd=Bn()+500,T()))}break;case 13:Tu(function(){var g=Vr(s,1);if(g!==null){var N=Sa();Uo(g,s,1,N)}}),Hg(s,1)}},At=function(s){if(s.tag===13){var l=Vr(s,134217728);if(l!==null){var d=Sa();Uo(l,s,134217728,d)}Hg(s,134217728)}},An=function(s){if(s.tag===13){var l=Oc(s),d=Vr(s,l);if(d!==null){var g=Sa();Uo(d,s,l,g)}Hg(s,l)}},Gt=function(){return oe},hr=function(s,l){var d=oe;try{return oe=s,l()}finally{oe=d}},an=function(s,l,d){switch(l){case"input":if(xe(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var N=ju(g);if(!N)throw Error(n(90));ht(g),xe(g,N)}}}break;case"textarea":je(s,d);break;case"select":l=d.value,l!=null&&re(s,!!d.multiple,l,!1)}},tr=Mg,vr=Tu;var Uj={usingClientEntryPoint:!1,Events:[Pc,tc,ju,Dn,ms,Mg]},qf={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zj={bundleType:qf.bundleType,version:qf.version,rendererPackageName:qf.rendererPackageName,rendererConfig:qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=dr(s),s===null?null:s.stateNode},findFiberByHostInstance:qf.findFiberByHostInstance||Bj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{pt=xp.inject(zj),it=xp}catch{}}return qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uj,qa.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gg(l))throw Error(n(200));return Mj(s,l,null,d)},qa.createRoot=function(s,l){if(!Gg(s))throw Error(n(299));var d=!1,g="",N=Dx;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=Vg(s,1,!1,null,null,d,!1,g,N),s[Pi]=l.current,Xl(s.nodeType===8?s.parentNode:s),new Wg(l)},qa.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=dr(l),s=s===null?null:s.stateNode,s},qa.flushSync=function(s){return Tu(s)},qa.hydrate=function(s,l,d){if(!gp(l))throw Error(n(200));return vp(null,s,l,!0,d)},qa.hydrateRoot=function(s,l,d){if(!Gg(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,N=!1,A="",G=Dx;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onRecoverableError!==void 0&&(G=d.onRecoverableError)),l=Lx(l,null,s,1,d??null,N,!1,A,G),s[Pi]=l.current,Xl(s),g)for(s=0;s<g.length;s++)d=g[s],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new mp(l)},qa.render=function(s,l,d){if(!gp(l))throw Error(n(200));return vp(null,s,l,!1,d)},qa.unmountComponentAtNode=function(s){if(!gp(s))throw Error(n(40));return s._reactRootContainer?(Tu(function(){vp(null,null,s,!1,function(){s._reactRootContainer=null,s[Pi]=null})}),!0):!1},qa.unstable_batchedUpdates=Mg,qa.unstable_renderSubtreeIntoContainer=function(s,l,d,g){if(!gp(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return vp(s,l,d,!1,g)},qa.version="18.3.1-next-f1338f8080-20240426",qa}var $x;function T5(){if($x)return Zg.exports;$x=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zg.exports=Zj(),Zg.exports}var Vx;function Yj(){if(Vx)return yp;Vx=1;var t=T5();return yp.createRoot=t.createRoot,yp.hydrateRoot=t.hydrateRoot,yp}var Xj=Yj();function Jj(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,a,o,u=[],c="",f=t.split("/");for(f[0]||f.shift();a=f.shift();)n=a[0],n==="*"?(u.push(n),c+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=a.indexOf("?",1),o=a.indexOf(".",1),u.push(a.substring(1,~r?r:~o?o:a.length)),c+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~r?"?":"")+"\\"+a.substring(o))):c+="/"+a;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var k=Tm();const xn=k5(k),E5=Vj({__proto__:null,default:xn},[k]);var Jg={exports:{}},e0={};var Hx;function e3(){if(Hx)return e0;Hx=1;var t=Tm();function e(b,j){return b===j&&(b!==0||1/b===1/j)||b!==b&&j!==j}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(b,j){var y=j(),D=r({inst:{value:y,getSnapshot:j}}),S=D[0].inst,P=D[1];return o(function(){S.value=y,S.getSnapshot=j,f(S)&&P({inst:S})},[b,y,j]),a(function(){return f(S)&&P({inst:S}),b(function(){f(S)&&P({inst:S})})},[b]),u(y),y}function f(b){var j=b.getSnapshot;b=b.value;try{var y=j();return!n(b,y)}catch{return!0}}function p(b,j){return j()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return e0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,e0}var Wx;function t3(){return Wx||(Wx=1,Jg.exports=e3()),Jg.exports}var n3=t3();const r3=E5.useInsertionEffect,s3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L5=s3?k.useLayoutEffect:k.useEffect,i3=r3||L5,Fv=t=>{const e=k.useRef([t,(...n)=>e[0](...n)]).current;return i3(()=>{e[0]=t}),e[1]},a3="popstate",Ov="pushState",Mv="replaceState",o3="hashchange",Gx=[a3,Ov,Mv,o3],l3=t=>{for(const e of Gx)addEventListener(e,t);return()=>{for(const e of Gx)removeEventListener(e,t)}},R5=(t,e)=>n3.useSyncExternalStore(l3,t,e),c3=()=>location.search,u3=({ssrSearch:t=""}={})=>R5(c3,()=>t),Kx=()=>location.pathname,d3=({ssrPath:t}={})=>R5(Kx,t?()=>t:Kx),f3=(t,{replace:e=!1,state:n=null}={})=>history[e?Mv:Ov](n,"",t),h3=(t={})=>[d3(t),f3],Qx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Qx]>"u"){for(const t of[Ov,Mv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Qx,{value:!0})}const p3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",D5=(t="")=>t==="/"?"":t,m3=(t,e)=>t[0]==="~"?t.slice(1):D5(e)+t,g3=(t="",e)=>p3(Zx(D5(t)),Zx(e)),Zx=t=>{try{return decodeURI(t)}catch{return t}},I5={hook:h3,searchHook:u3,parser:Jj,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},F5=k.createContext(I5),kh=()=>k.useContext(F5),O5={},M5=k.createContext(O5),Zu=()=>k.useContext(M5),Em=t=>{const[e,n]=t.hook(t);return[g3(t.base,e),Fv((r,a)=>n(m3(r,t.base),a))]},za=()=>Em(kh()),B5=(t,e,n,r)=>{const{pattern:a,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),u=a.exec(n)||[],[c,...f]=u;return c!==void 0?[!0,(()=>{const p=o!==!1?Object.fromEntries(o.map((b,j)=>[b,f[j]])):u.groups;let m={...f};return p&&Object.assign(m,p),m})(),...r?[c]:[]]:[!1,null]},v3=({children:t,...e})=>{const n=kh(),r=e.hook?I5:n;let a=r;const[o,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??e.hook?.hrefs;let c=k.useRef({}),f=c.current,p=f;for(let m in r){const b=m==="base"?r[m]+(e[m]||""):e[m]||r[m];f===p&&b!==p[m]&&(c.current=p={...p}),p[m]=b,b!==r[m]&&(a=p)}return k.createElement(F5.Provider,{value:a,children:t})},Yx=({children:t,component:e},n)=>e?k.createElement(e,{params:n}):typeof t=="function"?t(n):t,x3=t=>{let e=k.useRef(O5),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Di=({path:t,nest:e,match:n,...r})=>{const a=kh(),[o]=Em(a),[u,c,f]=n??B5(a.parser,t,o,e),p=x3({...Zu(),...c});if(!u)return null;const m=f?k.createElement(v3,{base:f},Yx(r,p)):Yx(r,p);return k.createElement(M5.Provider,{value:p,children:m})},q5=k.forwardRef((t,e)=>{const n=kh(),[r,a]=Em(n),{to:o="",href:u=o,onClick:c,asChild:f,children:p,className:m,replace:b,state:j,...y}=t,D=Fv(P=>{P.ctrlKey||P.metaKey||P.altKey||P.shiftKey||P.button!==0||(c?.(P),P.defaultPrevented||(P.preventDefault(),a(u,t)))}),S=n.hrefs(u[0]==="~"?u.slice(1):n.base+u,n);return f&&k.isValidElement(p)?k.cloneElement(p,{onClick:D,href:S}):k.createElement("a",{...y,onClick:D,href:S,className:m?.call?m(r===u):m,children:p,ref:e})}),U5=t=>Array.isArray(t)?t.flatMap(e=>U5(e&&e.type===k.Fragment?e.props.children:e)):[t],y3=({children:t,location:e})=>{const n=kh(),[r]=Em(n);for(const a of U5(t)){let o=0;if(k.isValidElement(a)&&(o=B5(n.parser,a.props.path,e||r,a.props.nest))[0])return k.cloneElement(a,{match:o})}return null},b3=t=>{const{to:e,href:n=e}=t,[,r]=za(),a=Fv(()=>r(e||n,t));return L5(()=>{a()},[]),null};var rf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bu=typeof window>"u"||"Deno"in globalThis;function No(){}function w3(t,e){return typeof t=="function"?t(e):t}function $0(t){return typeof t=="number"&&t>=0&&t!==1/0}function z5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Od(t,e){return typeof t=="function"?t(e):t}function Ho(t,e){return typeof t=="function"?t(e):t}function Xx(t,e){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:u,stale:c}=t;if(u){if(r){if(e.queryHash!==Bv(u,e.options))return!1}else if(!ih(e.queryKey,u))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function Jx(t,e){const{exact:n,status:r,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(qu(e.options.mutationKey)!==qu(o))return!1}else if(!ih(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function Bv(t,e){return(e?.queryKeyHashFn||qu)(t)}function qu(t){return JSON.stringify(t,(e,n)=>V0(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function ih(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ih(t[n],e[n])):!1}function $5(t,e){if(t===e)return t;const n=e2(t)&&e2(e);if(n||V0(t)&&V0(e)){const r=n?t:Object.keys(t),a=r.length,o=n?e:Object.keys(e),u=o.length,c=n?[]:{};let f=0;for(let p=0;p<u;p++){const m=n?p:o[p];(!n&&r.includes(m)||n)&&t[m]===void 0&&e[m]===void 0?(c[m]=void 0,f++):(c[m]=$5(t[m],e[m]),c[m]===t[m]&&t[m]!==void 0&&f++)}return a===u&&f===a?t:c}return e}function tm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function e2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function V0(t){if(!t2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!t2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function t2(t){return Object.prototype.toString.call(t)==="[object Object]"}function N3(t){return new Promise(e=>{setTimeout(e,t)})}function H0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$5(t,e):e}function S3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function j3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var qv=Symbol();function V5(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===qv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var C3=class extends rf{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Bu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Uv=new C3,_3=class extends rf{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Bu&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},nm=new _3;function W0(){let t,e;const n=new Promise((a,o)=>{t=a,e=o});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),e(a)},n}function A3(t){return Math.min(1e3*2**t,3e4)}function H5(t){return(t??"online")==="online"?nm.isOnline():!0}var W5=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function t0(t){return t instanceof W5}function G5(t){let e=!1,n=0,r=!1,a;const o=W0(),u=S=>{r||(j(new W5(S)),t.abort?.())},c=()=>{e=!0},f=()=>{e=!1},p=()=>Uv.isFocused()&&(t.networkMode==="always"||nm.isOnline())&&t.canRun(),m=()=>H5(t.networkMode)&&t.canRun(),b=S=>{r||(r=!0,t.onSuccess?.(S),a?.(),o.resolve(S))},j=S=>{r||(r=!0,t.onError?.(S),a?.(),o.reject(S))},y=()=>new Promise(S=>{a=P=>{(r||p())&&S(P)},t.onPause?.()}).then(()=>{a=void 0,r||t.onContinue?.()}),D=()=>{if(r)return;let S;const P=n===0?t.initialPromise:void 0;try{S=P??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(b).catch(_=>{if(r)return;const I=t.retry??(Bu?0:3),v=t.retryDelay??A3,B=typeof v=="function"?v(n,_):v,ee=I===!0||typeof I=="number"&&n<I||typeof I=="function"&&I(n,_);if(e||!ee){j(_);return}n++,t.onFail?.(n,_),N3(B).then(()=>p()?void 0:y()).then(()=>{e?j(_):D()})})};return{promise:o,cancel:u,continue:()=>(a?.(),o),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?D():y().then(D),o)}}function P3(){let t=[],e=0,n=c=>{c()},r=c=>{c()},a=c=>setTimeout(c,0);const o=c=>{e?t.push(c):a(()=>{n(c)})},u=()=>{const c=t;t=[],c.length&&a(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||u()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var Ci=P3(),K5=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$0(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},k3=class extends K5{#e;#t;#r;#n;#a;#i;constructor(t){super(),this.#i=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=T3(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const n=H0(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(No).catch(No):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ho(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!z5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#i?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},a=()=>{const c=V5(this.options,e),f={queryKey:this.queryKey,meta:this.meta};return r(f),this.#i=!1,this.options.persister?this.options.persister(c,f,this):c(f)},o={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};r(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const u=c=>{t0(c)&&c.silent||this.#s({type:"error",error:c}),t0(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=G5({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:c=>{if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(f){u(f);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,f)=>{this.#s({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Q5(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return t0(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Ci.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function Q5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:H5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function T3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var E3=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,a=e.queryHash??Bv(r,e);let o=this.get(a);return o||(o=new k3({cache:this,queryKey:r,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ci.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Xx(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Xx(t,n)):e}notify(t){Ci.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Ci.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ci.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},L3=class extends K5{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||Z5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){this.#r=G5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,a)=>{this.#n({type:"failed",failureCount:r,error:a})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#r.canStart();try{if(!e){this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#n({type:"pending",context:a,variables:t,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ci.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function Z5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var R3=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,n){const r=new L3({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){const e=bp(t),n=this.#e.get(e)??[];n.push(t),this.#e.set(e,n),this.notify({type:"added",mutation:t})}remove(t){const e=bp(t);if(this.#e.has(e)){const n=this.#e.get(e)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(e):this.#e.set(e,n))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(bp(t))?.find(n=>n.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(bp(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Ci.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Jx(e,n))}findAll(t={}){return this.getAll().filter(e=>Jx(t,e))}notify(t){Ci.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Ci.batch(()=>Promise.all(t.map(e=>e.continue().catch(No))))}};function bp(t){return t.options.scope?.id??String(t.mutationId)}function n2(t){return{onFetch:(e,n)=>{const r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const p=async()=>{let m=!1;const b=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},j=V5(e.options,e.fetchOptions),y=async(D,S,P)=>{if(m)return Promise.reject();if(S==null&&D.pages.length)return Promise.resolve(D);const _={queryKey:e.queryKey,pageParam:S,direction:P?"backward":"forward",meta:e.options.meta};b(_);const I=await j(_),{maxPages:v}=e.options,B=P?j3:S3;return{pages:B(D.pages,I,v),pageParams:B(D.pageParams,S,v)}};if(a&&o.length){const D=a==="backward",S=D?D3:r2,P={pages:o,pageParams:u},_=S(r,P);c=await y(P,_,D)}else{const D=t??o.length;do{const S=f===0?u[0]??r.initialPageParam:r2(r,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<D)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function r2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function D3(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var I3=class{#e;#t;#r;#n;#a;#i;#s;#o;constructor(t={}){this.#e=t.queryCache||new E3,this.#t=t.mutationCache||new R3,this.#r=t.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=Uv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=nm.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Od(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,u=w3(e,o);if(u!==void 0)return this.#e.build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Ci.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Ci.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Ci.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Ci.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(No).catch(No)}invalidateQueries(t={},e={}){return Ci.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:e?.cancelRefetch??!0},r=Ci.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(No)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(No)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Od(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(No).catch(No)}fetchInfiniteQuery(t){return t.behavior=n2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(No).catch(No)}ensureInfiniteQueryData(t){return t.behavior=n2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nm.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set(qu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()];let n={};return e.forEach(r=>{ih(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){this.#a.set(qu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()];let n={};return e.forEach(r=>{ih(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===qv&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},F3=class extends rf{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#s=W0(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#i;#s;#o;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),s2(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return G0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return G0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ho(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),n._defaulted&&!tm(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&i2(this.#t,r,this.options,n)&&this.#d(),this.updateResult(e),a&&(this.#t!==r||Ho(this.options.enabled,this.#t)!==Ho(n.enabled,this.#t)||Od(this.options.staleTime,this.#t)!==Od(n.staleTime,this.#t))&&this.#g();const o=this.#v();a&&(this.#t!==r||Ho(this.options.enabled,this.#t)!==Ho(n.enabled,this.#t)||o!==this.#l)&&this.#x(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return M3(this,n)&&(this.#n=n,this.#i=this.options,this.#a=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(t){this.#N();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(No)),e}#g(){this.#b();const t=Od(this.options.staleTime,this.#t);if(Bu||this.#n.isStale||!$0(t))return;const n=z5(this.#n.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(t){this.#w(),this.#l=t,!(Bu||Ho(this.options.enabled,this.#t)===!1||!$0(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||Uv.isFocused())&&this.#d()},this.#l))}#y(){this.#g(),this.#x(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,a=this.#n,o=this.#a,u=this.#i,f=t!==n?t.state:this.#r,{state:p}=t;let m={...p},b=!1,j;if(e._optimisticResults){const W=this.hasListeners(),te=!W&&s2(t,e),Q=W&&i2(t,n,e,r);(te||Q)&&(m={...m,...Q5(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:D,status:S}=m;if(e.select&&m.data!==void 0)if(a&&m.data===o?.data&&e.select===this.#m)j=this.#f;else try{this.#m=e.select,j=e.select(m.data),j=H0(a?.data,j,e),this.#f=j,this.#o=null}catch(W){this.#o=W}else j=m.data;if(e.placeholderData!==void 0&&j===void 0&&S==="pending"){let W;if(a?.isPlaceholderData&&e.placeholderData===u?.placeholderData)W=a.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#o=null}catch(te){this.#o=te}W!==void 0&&(S="success",j=H0(a?.data,W,e),b=!0)}this.#o&&(y=this.#o,j=this.#f,D=Date.now(),S="error");const P=m.fetchStatus==="fetching",_=S==="pending",I=S==="error",v=_&&P,B=j!==void 0,ae={status:S,fetchStatus:m.fetchStatus,isPending:_,isSuccess:S==="success",isError:I,isInitialLoading:v,isLoading:v,data:j,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:D,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:P,isRefetching:P&&!_,isLoadingError:I&&!B,isPaused:m.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:I&&B,isStale:zv(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const W=de=>{ae.status==="error"?de.reject(ae.error):ae.data!==void 0&&de.resolve(ae.data)},te=()=>{const de=this.#s=ae.promise=W0();W(de)},Q=this.#s;switch(Q.status){case"pending":t.queryHash===n.queryHash&&W(Q);break;case"fulfilled":(ae.status==="error"||ae.data!==Q.value)&&te();break;case"rejected":(ae.status!=="error"||ae.error!==Q.reason)&&te();break}}return ae}updateResult(t){const e=this.#n,n=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#h=this.#t),tm(n,e))return;this.#n=n;const r={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!this.#p.size)return!0;const c=new Set(u??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#n).some(f=>{const p=f;return this.#n[p]!==e[p]&&c.has(p)})};t?.listeners!==!1&&a()&&(r.listeners=!0),this.#S({...r,...t})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(t){Ci.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function O3(t,e){return Ho(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function s2(t,e){return O3(t,e)||t.state.data!==void 0&&G0(t,e,e.refetchOnMount)}function G0(t,e,n){if(Ho(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&zv(t,e)}return!1}function i2(t,e,n,r){return(t!==e||Ho(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&zv(t,n)}function zv(t,e){return Ho(e.enabled,t)!==!1&&t.isStaleByTime(Od(e.staleTime,t))}function M3(t,e){return!tm(t.getCurrentResult(),e)}var B3=class extends rf{#e;#t=void 0;#r;#n;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),tm(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&qu(n.mutationKey)!==qu(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){const e=this.#r?.state??Z5();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){Ci.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,n,r),this.#n.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#n.onError?.(e.error,n,r),this.#n.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},Y5=k.createContext(void 0),Lm=t=>{const e=k.useContext(Y5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},q3=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(Y5.Provider,{value:t,children:e})),X5=k.createContext(!1),U3=()=>k.useContext(X5);X5.Provider;function z3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $3=k.createContext(z3()),V3=()=>k.useContext($3);function J5(t,e){return typeof t=="function"?t(...e):!!t}function K0(){}var H3=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},W3=t=>{k.useEffect(()=>{t.clearReset()},[t])},G3=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&J5(n,[t.error,r]),K3=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Q3=(t,e)=>t.isLoading&&t.isFetching&&!e,Z3=(t,e)=>t?.suspense&&e.isPending,a2=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Y3(t,e,n){const r=Lm(),a=U3(),o=V3(),u=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=a?"isRestoring":"optimistic",K3(u),H3(u,o),W3(o);const c=!r.getQueryCache().get(u.queryHash),[f]=k.useState(()=>new e(r,u)),p=f.getOptimisticResult(u);if(k.useSyncExternalStore(k.useCallback(m=>{const b=a?K0:f.subscribe(Ci.batchCalls(m));return f.updateResult(),b},[f,a]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k.useEffect(()=>{f.setOptions(u,{listeners:!1})},[u,f]),Z3(u,p))throw a2(u,f,o);if(G3({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw p.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!Bu&&Q3(p,a)&&(c?a2(u,f,o):r.getQueryCache().get(u.queryHash)?.promise)?.catch(K0).finally(()=>{f.updateResult()}),u.notifyOnChangeProps?p:f.trackResult(p)}function Ln(t,e){return Y3(t,F3)}function Tr(t,e){const n=Lm(),[r]=k.useState(()=>new B3(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const a=k.useSyncExternalStore(k.useCallback(u=>r.subscribe(Ci.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=k.useCallback((u,c)=>{r.mutate(u,c).catch(K0)},[r]);if(a.error&&J5(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function eb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function wn(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await eb(r),r}const X3=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/revira"),{credentials:"include"});return await eb(n),await n.json()},On=new I3({defaultOptions:{queries:{queryFn:X3({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),J3=1,eC=1e6;let n0=0;function tC(){return n0=(n0+1)%Number.MAX_SAFE_INTEGER,n0.toString()}const r0=new Map,o2=t=>{if(r0.has(t))return;const e=setTimeout(()=>{r0.delete(t),Jf({type:"REMOVE_TOAST",toastId:t})},eC);r0.set(t,e)},nC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,J3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?o2(n):t.toasts.forEach(r=>{o2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Bp=[];let qp={toasts:[]};function Jf(t){qp=nC(qp,t),Bp.forEach(e=>{e(qp)})}function rC({...t}){const e=tC(),n=a=>Jf({type:"UPDATE_TOAST",toast:{...a,id:e}}),r=()=>Jf({type:"DISMISS_TOAST",toastId:e});return Jf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||r()}}}),{id:e,dismiss:r,update:n}}function $a(){const[t,e]=k.useState(qp);return k.useEffect(()=>(Bp.push(e),()=>{const n=Bp.indexOf(e);n>-1&&Bp.splice(n,1)}),[t]),{...t,toast:rC,dismiss:n=>Jf({type:"DISMISS_TOAST",toastId:n})}}var sf=T5();const sC=k5(sf);function zn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return e?.(a)}}function l2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tb(...t){return e=>{let n=!1;const r=t.map(a=>{const o=l2(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():l2(t[a],null)}}}}function Kr(...t){return k.useCallback(tb(...t),t)}function iC(t,e){const n=k.createContext(e),r=o=>{const{children:u,...c}=o,f=k.useMemo(()=>c,Object.values(c));return i.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function a(o){const u=k.useContext(n);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,a]}function Il(t,e=[]){let n=[];function r(o,u){const c=k.createContext(u),f=n.length;n=[...n,u];const p=b=>{const{scope:j,children:y,...D}=b,S=j?.[t]?.[f]||c,P=k.useMemo(()=>D,Object.values(D));return i.jsx(S.Provider,{value:P,children:y})};p.displayName=o+"Provider";function m(b,j){const y=j?.[t]?.[f]||c,D=k.useContext(y);if(D)return D;if(u!==void 0)return u;throw new Error(`\`${b}\` must be used within \`${o}\``)}return[p,m]}const a=()=>{const o=n.map(u=>k.createContext(u));return function(c){const f=c?.[t]||o;return k.useMemo(()=>({[`__scope${t}`]:{...c,[t]:f}}),[c,f])}};return a.scopeName=t,[r,aC(a,...e)]}function aC(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const u=r.reduce((c,{useScope:f,scopeName:p})=>{const b=f(o)[`__scope${p}`];return{...c,...b}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}function Qd(t){const e=oC(t),n=k.forwardRef((r,a)=>{const{children:o,...u}=r,c=k.Children.toArray(o),f=c.find(cC);if(f){const p=f.props.children,m=c.map(b=>b===f?k.Children.count(p)>1?k.Children.only(null):k.isValidElement(p)?p.props.children:null:b);return i.jsx(e,{...u,ref:a,children:k.isValidElement(p)?k.cloneElement(p,void 0,m):null})}return i.jsx(e,{...u,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}var nb=Qd("Slot");function oC(t){const e=k.forwardRef((n,r)=>{const{children:a,...o}=n;if(k.isValidElement(a)){const u=dC(a),c=uC(o,a.props);return a.type!==k.Fragment&&(c.ref=r?tb(r,u):u),k.cloneElement(a,c)}return k.Children.count(a)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rb=Symbol("radix.slottable");function lC(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=rb,e}function cC(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rb}function uC(t,e){const n={...e};for(const r in e){const a=t[r],o=e[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...c)=>{o(...c),a(...c)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function dC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function $v(t){const e=t+"CollectionProvider",[n,r]=Il(e),[a,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:P,children:_}=S,I=xn.useRef(null),v=xn.useRef(new Map).current;return i.jsx(a,{scope:P,itemMap:v,collectionRef:I,children:_})};u.displayName=e;const c=t+"CollectionSlot",f=Qd(c),p=xn.forwardRef((S,P)=>{const{scope:_,children:I}=S,v=o(c,_),B=Kr(P,v.collectionRef);return i.jsx(f,{ref:B,children:I})});p.displayName=c;const m=t+"CollectionItemSlot",b="data-radix-collection-item",j=Qd(m),y=xn.forwardRef((S,P)=>{const{scope:_,children:I,...v}=S,B=xn.useRef(null),ee=Kr(P,B),ae=o(m,_);return xn.useEffect(()=>(ae.itemMap.set(B,{ref:B,...v}),()=>{ae.itemMap.delete(B)})),i.jsx(j,{[b]:"",ref:ee,children:I})});y.displayName=m;function D(S){const P=o(t+"CollectionConsumer",S);return xn.useCallback(()=>{const I=P.collectionRef.current;if(!I)return[];const v=Array.from(I.querySelectorAll(`[${b}]`));return Array.from(P.itemMap.values()).sort((ae,W)=>v.indexOf(ae.ref.current)-v.indexOf(W.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:u,Slot:p,ItemSlot:y},D,r]}var fC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Wn=fC.reduce((t,e)=>{const n=Qd(`Primitive.${e}`),r=k.forwardRef((a,o)=>{const{asChild:u,...c}=a,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(f,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function sb(t,e){t&&sf.flushSync(()=>t.dispatchEvent(e))}function Ua(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>e.current?.(...n),[])}function hC(t,e=globalThis?.document){const n=Ua(t);k.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var pC="DismissableLayer",Q0="dismissableLayer.update",mC="dismissableLayer.pointerDownOutside",gC="dismissableLayer.focusOutside",c2,ib=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Th=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:u,onDismiss:c,...f}=t,p=k.useContext(ib),[m,b]=k.useState(null),j=m?.ownerDocument??globalThis?.document,[,y]=k.useState({}),D=Kr(e,W=>b(W)),S=Array.from(p.layers),[P]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),_=S.indexOf(P),I=m?S.indexOf(m):-1,v=p.layersWithOutsidePointerEventsDisabled.size>0,B=I>=_,ee=xC(W=>{const te=W.target,Q=[...p.branches].some(de=>de.contains(te));!B||Q||(a?.(W),u?.(W),W.defaultPrevented||c?.())},j),ae=yC(W=>{const te=W.target;[...p.branches].some(de=>de.contains(te))||(o?.(W),u?.(W),W.defaultPrevented||c?.())},j);return hC(W=>{I===p.layers.size-1&&(r?.(W),!W.defaultPrevented&&c&&(W.preventDefault(),c()))},j),k.useEffect(()=>{if(m)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(c2=j.body.style.pointerEvents,j.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),u2(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(j.body.style.pointerEvents=c2)}},[m,j,n,p]),k.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),u2())},[m,p]),k.useEffect(()=>{const W=()=>y({});return document.addEventListener(Q0,W),()=>document.removeEventListener(Q0,W)},[]),i.jsx(Wn.div,{...f,ref:D,style:{pointerEvents:v?B?"auto":"none":void 0,...t.style},onFocusCapture:zn(t.onFocusCapture,ae.onFocusCapture),onBlurCapture:zn(t.onBlurCapture,ae.onBlurCapture),onPointerDownCapture:zn(t.onPointerDownCapture,ee.onPointerDownCapture)})});Th.displayName=pC;var vC="DismissableLayerBranch",ab=k.forwardRef((t,e)=>{const n=k.useContext(ib),r=k.useRef(null),a=Kr(e,r);return k.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Wn.div,{...t,ref:a})});ab.displayName=vC;function xC(t,e=globalThis?.document){const n=Ua(t),r=k.useRef(!1),a=k.useRef(()=>{});return k.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let f=function(){ob(mC,n,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=f,e.addEventListener("click",a.current,{once:!0})):f()}else e.removeEventListener("click",a.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",a.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function yC(t,e=globalThis?.document){const n=Ua(t),r=k.useRef(!1);return k.useEffect(()=>{const a=o=>{o.target&&!r.current&&ob(gC,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function u2(){const t=new CustomEvent(Q0);document.dispatchEvent(t)}function ob(t,e,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?sb(a,o):a.dispatchEvent(o)}var bC=Th,wC=ab,gi=globalThis?.document?k.useLayoutEffect:()=>{},NC="Portal",Rm=k.forwardRef((t,e)=>{const{container:n,...r}=t,[a,o]=k.useState(!1);gi(()=>o(!0),[]);const u=n||a&&globalThis?.document?.body;return u?sC.createPortal(i.jsx(Wn.div,{...r,ref:e}),u):null});Rm.displayName=NC;function SC(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var cu=t=>{const{present:e,children:n}=t,r=jC(e),a=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),o=Kr(r.ref,CC(a));return typeof n=="function"||r.isPresent?k.cloneElement(a,{ref:o}):null};cu.displayName="Presence";function jC(t){const[e,n]=k.useState(),r=k.useRef({}),a=k.useRef(t),o=k.useRef("none"),u=t?"mounted":"unmounted",[c,f]=SC(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const p=wp(r.current);o.current=c==="mounted"?p:"none"},[c]),gi(()=>{const p=r.current,m=a.current;if(m!==t){const j=o.current,y=wp(p);t?f("MOUNT"):y==="none"||p?.display==="none"?f("UNMOUNT"):f(m&&j!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,f]),gi(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,b=y=>{const S=wp(r.current).includes(y.animationName);if(y.target===e&&S&&(f("ANIMATION_END"),!a.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},j=y=>{y.target===e&&(o.current=wp(r.current))};return e.addEventListener("animationstart",j),e.addEventListener("animationcancel",b),e.addEventListener("animationend",b),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",j),e.removeEventListener("animationcancel",b),e.removeEventListener("animationend",b)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:k.useCallback(p=>{p&&(r.current=getComputedStyle(p)),n(p)},[])}}function wp(t){return t?.animationName||"none"}function CC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jc({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,a]=_C({defaultProp:e,onChange:n}),o=t!==void 0,u=o?t:r,c=Ua(n),f=k.useCallback(p=>{if(o){const b=typeof p=="function"?p(t):p;b!==t&&c(b)}else a(p)},[o,t,a,c]);return[u,f]}function _C({defaultProp:t,onChange:e}){const n=k.useState(t),[r]=n,a=k.useRef(r),o=Ua(e);return k.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}var AC="VisuallyHidden",Eh=k.forwardRef((t,e)=>i.jsx(Wn.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Eh.displayName=AC;var PC=Eh,Vv="ToastProvider",[Hv,kC,TC]=$v("Toast"),[lb]=Il("Toast",[TC]),[EC,Dm]=lb(Vv),cb=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:u}=t,[c,f]=k.useState(null),[p,m]=k.useState(0),b=k.useRef(!1),j=k.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vv}\`. Expected non-empty \`string\`.`),i.jsx(Hv.Provider,{scope:e,children:i.jsx(EC,{scope:e,label:n,duration:r,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:c,onViewportChange:f,onToastAdd:k.useCallback(()=>m(y=>y+1),[]),onToastRemove:k.useCallback(()=>m(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:j,children:u})})};cb.displayName=Vv;var ub="ToastViewport",LC=["F8"],Z0="toast.viewportPause",Y0="toast.viewportResume",db=k.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=LC,label:a="Notifications ({hotkey})",...o}=t,u=Dm(ub,n),c=kC(n),f=k.useRef(null),p=k.useRef(null),m=k.useRef(null),b=k.useRef(null),j=Kr(e,b,u.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=u.toastCount>0;k.useEffect(()=>{const P=_=>{r.length!==0&&r.every(v=>_[v]||_.code===v)&&b.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),k.useEffect(()=>{const P=f.current,_=b.current;if(D&&P&&_){const I=()=>{if(!u.isClosePausedRef.current){const ae=new CustomEvent(Z0);_.dispatchEvent(ae),u.isClosePausedRef.current=!0}},v=()=>{if(u.isClosePausedRef.current){const ae=new CustomEvent(Y0);_.dispatchEvent(ae),u.isClosePausedRef.current=!1}},B=ae=>{!P.contains(ae.relatedTarget)&&v()},ee=()=>{P.contains(document.activeElement)||v()};return P.addEventListener("focusin",I),P.addEventListener("focusout",B),P.addEventListener("pointermove",I),P.addEventListener("pointerleave",ee),window.addEventListener("blur",I),window.addEventListener("focus",v),()=>{P.removeEventListener("focusin",I),P.removeEventListener("focusout",B),P.removeEventListener("pointermove",I),P.removeEventListener("pointerleave",ee),window.removeEventListener("blur",I),window.removeEventListener("focus",v)}}},[D,u.isClosePausedRef]);const S=k.useCallback(({tabbingDirection:P})=>{const I=c().map(v=>{const B=v.ref.current,ee=[B,...HC(B)];return P==="forwards"?ee:ee.reverse()});return(P==="forwards"?I.reverse():I).flat()},[c]);return k.useEffect(()=>{const P=b.current;if(P){const _=I=>{const v=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!v){const ee=document.activeElement,ae=I.shiftKey;if(I.target===P&&ae){p.current?.focus();return}const Q=S({tabbingDirection:ae?"backwards":"forwards"}),de=Q.findIndex(F=>F===ee);s0(Q.slice(de+1))?I.preventDefault():ae?p.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",_),()=>P.removeEventListener("keydown",_)}},[c,S]),i.jsxs(wC,{ref:f,role:"region","aria-label":a.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&i.jsx(X0,{ref:p,onFocusFromOutsideViewport:()=>{const P=S({tabbingDirection:"forwards"});s0(P)}}),i.jsx(Hv.Slot,{scope:n,children:i.jsx(Wn.ol,{tabIndex:-1,...o,ref:j})}),D&&i.jsx(X0,{ref:m,onFocusFromOutsideViewport:()=>{const P=S({tabbingDirection:"backwards"});s0(P)}})]})});db.displayName=ub;var fb="ToastFocusProxy",X0=k.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=t,o=Dm(fb,n);return i.jsx(Eh,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:u=>{const c=u.relatedTarget;!o.viewport?.contains(c)&&r()}})});X0.displayName=fb;var Im="Toast",RC="toast.swipeStart",DC="toast.swipeMove",IC="toast.swipeCancel",FC="toast.swipeEnd",hb=k.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o,...u}=t,[c=!0,f]=Jc({prop:r,defaultProp:a,onChange:o});return i.jsx(cu,{present:n||c,children:i.jsx(BC,{open:c,...u,ref:e,onClose:()=>f(!1),onPause:Ua(t.onPause),onResume:Ua(t.onResume),onSwipeStart:zn(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:zn(t.onSwipeMove,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${b}px`)}),onSwipeCancel:zn(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:zn(t.onSwipeEnd,p=>{const{x:m,y:b}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${b}px`),f(!1)})})})});hb.displayName=Im;var[OC,MC]=lb(Im,{onClose(){}}),BC=k.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:o,onClose:u,onEscapeKeyDown:c,onPause:f,onResume:p,onSwipeStart:m,onSwipeMove:b,onSwipeCancel:j,onSwipeEnd:y,...D}=t,S=Dm(Im,n),[P,_]=k.useState(null),I=Kr(e,Y=>_(Y)),v=k.useRef(null),B=k.useRef(null),ee=a||S.duration,ae=k.useRef(0),W=k.useRef(ee),te=k.useRef(0),{onToastAdd:Q,onToastRemove:de}=S,F=Ua(()=>{P?.contains(document.activeElement)&&S.viewport?.focus(),u()}),L=k.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(te.current),ae.current=new Date().getTime(),te.current=window.setTimeout(F,Y))},[F]);k.useEffect(()=>{const Y=S.viewport;if(Y){const Ce=()=>{L(W.current),p?.()},_e=()=>{const Ae=new Date().getTime()-ae.current;W.current=W.current-Ae,window.clearTimeout(te.current),f?.()};return Y.addEventListener(Z0,_e),Y.addEventListener(Y0,Ce),()=>{Y.removeEventListener(Z0,_e),Y.removeEventListener(Y0,Ce)}}},[S.viewport,ee,f,p,L]),k.useEffect(()=>{o&&!S.isClosePausedRef.current&&L(ee)},[o,ee,S.isClosePausedRef,L]),k.useEffect(()=>(Q(),()=>de()),[Q,de]);const z=k.useMemo(()=>P?bb(P):null,[P]);return S.viewport?i.jsxs(i.Fragment,{children:[z&&i.jsx(qC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),i.jsx(OC,{scope:n,onClose:F,children:sf.createPortal(i.jsx(Hv.ItemSlot,{scope:n,children:i.jsx(bC,{asChild:!0,onEscapeKeyDown:zn(c,()=>{S.isFocusedToastEscapeKeyDownRef.current||F(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Wn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...D,ref:I,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:zn(t.onKeyDown,Y=>{Y.key==="Escape"&&(c?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:zn(t.onPointerDown,Y=>{Y.button===0&&(v.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:zn(t.onPointerMove,Y=>{if(!v.current)return;const Ce=Y.clientX-v.current.x,_e=Y.clientY-v.current.y,Ae=!!B.current,ce=["left","right"].includes(S.swipeDirection),ge=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,De=ce?ge(0,Ce):0,se=ce?0:ge(0,_e),O=Y.pointerType==="touch"?10:2,E={x:De,y:se},ne={originalEvent:Y,delta:E};Ae?(B.current=E,Np(DC,b,ne,{discrete:!1})):d2(E,S.swipeDirection,O)?(B.current=E,Np(RC,m,ne,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(Ce)>O||Math.abs(_e)>O)&&(v.current=null)}),onPointerUp:zn(t.onPointerUp,Y=>{const Ce=B.current,_e=Y.target;if(_e.hasPointerCapture(Y.pointerId)&&_e.releasePointerCapture(Y.pointerId),B.current=null,v.current=null,Ce){const Ae=Y.currentTarget,ce={originalEvent:Y,delta:Ce};d2(Ce,S.swipeDirection,S.swipeThreshold)?Np(FC,y,ce,{discrete:!0}):Np(IC,j,ce,{discrete:!0}),Ae.addEventListener("click",ge=>ge.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),qC=t=>{const{__scopeToast:e,children:n,...r}=t,a=Dm(Im,e),[o,u]=k.useState(!1),[c,f]=k.useState(!1);return $C(()=>u(!0)),k.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),c?null:i.jsx(Rm,{asChild:!0,children:i.jsx(Eh,{...r,children:o&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},UC="ToastTitle",pb=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Wn.div,{...r,ref:e})});pb.displayName=UC;var zC="ToastDescription",mb=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Wn.div,{...r,ref:e})});mb.displayName=zC;var gb="ToastAction",vb=k.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(yb,{altText:n,asChild:!0,children:i.jsx(Wv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${gb}\`. Expected non-empty \`string\`.`),null)});vb.displayName=gb;var xb="ToastClose",Wv=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,a=MC(xb,n);return i.jsx(yb,{asChild:!0,children:i.jsx(Wn.button,{type:"button",...r,ref:e,onClick:zn(t.onClick,a.onClose)})})});Wv.displayName=xb;var yb=k.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...a}=t;return i.jsx(Wn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:e})});function bb(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VC(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const u=r.dataset.radixToastAnnounceAlt;u&&e.push(u)}else e.push(...bb(r))}}),e}function Np(t,e,n,{discrete:r}){const a=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?sb(a,o):a.dispatchEvent(o)}var d2=(t,e,n=0)=>{const r=Math.abs(t.x),a=Math.abs(t.y),o=r>a;return e==="left"||e==="right"?o&&r>n:!o&&a>n};function $C(t=()=>{}){const e=Ua(t);gi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function VC(t){return t.nodeType===t.ELEMENT_NODE}function HC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function s0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var WC=cb,wb=db,Nb=hb,Sb=pb,jb=mb,Cb=vb,_b=Wv;function Ab(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Ab(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pb(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Ab(t))&&(r&&(r+=" "),r+=e);return r}const f2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,h2=Pb,Fm=(t,e)=>n=>{var r;if(e?.variants==null)return h2(t,n?.class,n?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const m=n?.[p],b=o?.[p];if(m===null)return null;const j=f2(m)||f2(b);return a[p][j]}),c=n&&Object.entries(n).reduce((p,m)=>{let[b,j]=m;return j===void 0||(p[b]=j),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:b,className:j,...y}=m;return Object.entries(y).every(D=>{let[S,P]=D;return Array.isArray(P)?P.includes({...o,...c}[S]):{...o,...c}[S]===P})?[...p,b,j]:p},[]);return h2(t,u,f,n?.class,n?.className)};const GC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");var KC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const QC=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:u,...c},f)=>k.createElement("svg",{ref:f,...KC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kb("lucide",a),...c},[...u.map(([p,m])=>k.createElement(p,m)),...Array.isArray(o)?o:[o]]));const Pn=(t,e)=>{const n=k.forwardRef(({className:r,...a},o)=>k.createElement(QC,{ref:o,iconNode:e,className:kb(`lucide-${GC(t)}`,r),...a}));return n.displayName=`${t}`,n};const af=Pn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ZC=Pn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const YC=Pn("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const XC=Pn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const p2=Pn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Gv=Pn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const JC=Pn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Dd=Pn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Md=Pn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Up=Pn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const e_=Pn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const J0=Pn("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const ah=Pn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ev=Pn("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);const Lh=Pn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Om=Pn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Uc=Pn("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const _a=Pn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const rm=Pn("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const Tb=Pn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const m2=Pn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const t_=Pn("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);const sm=Pn("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const n_=Pn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const tv=Pn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const r_=Pn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const uu=Pn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const eu=Pn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const s_=Pn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Mm=Pn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const nv=Pn("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const to=Pn("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const Uu=Pn("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Eb=Pn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Fi=Pn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const rv=Pn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const of=Pn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const i_=Pn("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Kv=Pn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const a_=Pn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const o_=Pn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const l_=Pn("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);const pr=Pn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const c_=Pn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const u_=Pn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const zc=Pn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const d_=Pn("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const oh=Pn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const f_=Pn("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const lf=Pn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qv="-",h_=t=>{const e=m_(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const c=u.split(Qv);return c[0]===""&&c.length!==1&&c.shift(),Lb(c,e)||p_(u)},getConflictingClassGroupIds:(u,c)=>{const f=n[u]||[];return c&&r[u]?[...f,...r[u]]:f}}},Lb=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),a=r?Lb(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(Qv);return e.validators.find(({validator:u})=>u(o))?.classGroupId},g2=/^\[(.+)\]$/,p_=t=>{if(g2.test(t)){const e=g2.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},m_=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return v_(Object.entries(t.classGroups),n).forEach(([o,u])=>{sv(u,r,o,e)}),r},sv=(t,e,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:v2(e,a);o.classGroupId=n;return}if(typeof a=="function"){if(g_(a)){sv(a(r),e,n,r);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,u])=>{sv(u,v2(e,o),n,r)})})},v2=(t,e)=>{let n=t;return e.split(Qv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},g_=t=>t.isThemeGetter,v_=(t,e)=>e?t.map(([n,r])=>{const a=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([u,c])=>[e+u,c])):o);return[n,a]}):t,x_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const a=(o,u)=>{n.set(o,u),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let u=n.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return a(o,u),u},set(o,u){n.has(o)?n.set(o,u):a(o,u)}}},Rb="!",y_=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,a=e[0],o=e.length,u=c=>{const f=[];let p=0,m=0,b;for(let P=0;P<c.length;P++){let _=c[P];if(p===0){if(_===a&&(r||c.slice(P,P+o)===e)){f.push(c.slice(m,P)),m=P+o;continue}if(_==="/"){b=P;continue}}_==="["?p++:_==="]"&&p--}const j=f.length===0?c:c.substring(m),y=j.startsWith(Rb),D=y?j.substring(1):j,S=b&&b>m?b-m:void 0;return{modifiers:f,hasImportantModifier:y,baseClassName:D,maybePostfixModifierPosition:S}};return n?c=>n({className:c,parseClassName:u}):u},b_=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},w_=t=>({cache:x_(t.cacheSize),parseClassName:y_(t),...h_(t)}),N_=/\s+/,S_=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=e,o=[],u=t.trim().split(N_);let c="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{modifiers:m,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:y}=n(p);let D=!!y,S=r(D?j.substring(0,y):j);if(!S){if(!D){c=p+(c.length>0?" "+c:c);continue}if(S=r(j),!S){c=p+(c.length>0?" "+c:c);continue}D=!1}const P=b_(m).join(":"),_=b?P+Rb:P,I=_+S;if(o.includes(I))continue;o.push(I);const v=a(S,D);for(let B=0;B<v.length;++B){const ee=v[B];o.push(_+ee)}c=p+(c.length>0?" "+c:c)}return c};function j_(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Db(e))&&(r&&(r+=" "),r+=n);return r}const Db=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Db(t[r]))&&(n&&(n+=" "),n+=e);return n};function C_(t,...e){let n,r,a,o=u;function u(f){const p=e.reduce((m,b)=>b(m),t());return n=w_(p),r=n.cache.get,a=n.cache.set,o=c,c(f)}function c(f){const p=r(f);if(p)return p;const m=S_(f,n);return a(f,m),m}return function(){return o(j_.apply(null,arguments))}}const hs=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Ib=/^\[(?:([a-z-]+):)?(.+)\]$/i,__=/^\d+\/\d+$/,A_=new Set(["px","full","screen"]),P_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,L_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oc=t=>Bd(t)||A_.has(t)||__.test(t),$c=t=>cf(t,"length",q_),Bd=t=>!!t&&!Number.isNaN(Number(t)),i0=t=>cf(t,"number",Bd),zf=t=>!!t&&Number.isInteger(Number(t)),R_=t=>t.endsWith("%")&&Bd(t.slice(0,-1)),Kn=t=>Ib.test(t),Vc=t=>P_.test(t),D_=new Set(["length","size","percentage"]),I_=t=>cf(t,D_,Fb),F_=t=>cf(t,"position",Fb),O_=new Set(["image","url"]),M_=t=>cf(t,O_,z_),B_=t=>cf(t,"",U_),$f=()=>!0,cf=(t,e,n)=>{const r=Ib.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},q_=t=>k_.test(t)&&!T_.test(t),Fb=()=>!1,U_=t=>E_.test(t),z_=t=>L_.test(t),$_=()=>{const t=hs("colors"),e=hs("spacing"),n=hs("blur"),r=hs("brightness"),a=hs("borderColor"),o=hs("borderRadius"),u=hs("borderSpacing"),c=hs("borderWidth"),f=hs("contrast"),p=hs("grayscale"),m=hs("hueRotate"),b=hs("invert"),j=hs("gap"),y=hs("gradientColorStops"),D=hs("gradientColorStopPositions"),S=hs("inset"),P=hs("margin"),_=hs("opacity"),I=hs("padding"),v=hs("saturate"),B=hs("scale"),ee=hs("sepia"),ae=hs("skew"),W=hs("space"),te=hs("translate"),Q=()=>["auto","contain","none"],de=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Kn,e],L=()=>[Kn,e],z=()=>["",oc,$c],Y=()=>["auto",Bd,Kn],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_e=()=>["solid","dashed","dotted","double","none"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["start","end","center","between","around","evenly","stretch"],ge=()=>["","0",Kn],De=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Bd,Kn];return{cacheSize:500,separator:":",theme:{colors:[$f],spacing:[oc,$c],blur:["none","",Vc,Kn],brightness:se(),borderColor:[t],borderRadius:["none","","full",Vc,Kn],borderSpacing:L(),borderWidth:z(),contrast:se(),grayscale:ge(),hueRotate:se(),invert:ge(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[R_,$c],inset:F(),margin:F(),opacity:se(),padding:L(),saturate:se(),scale:se(),sepia:ge(),skew:se(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Kn]}],container:["container"],columns:[{columns:[Vc]}],"break-after":[{"break-after":De()}],"break-before":[{"break-before":De()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),Kn]}],overflow:[{overflow:de()}],"overflow-x":[{"overflow-x":de()}],"overflow-y":[{"overflow-y":de()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zf,Kn]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Kn]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",zf,Kn]}],"grid-cols":[{"grid-cols":[$f]}],"col-start-end":[{col:["auto",{span:["full",zf,Kn]},Kn]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[$f]}],"row-start-end":[{row:["auto",{span:[zf,Kn]},Kn]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Kn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Kn]}],gap:[{gap:[j]}],"gap-x":[{"gap-x":[j]}],"gap-y":[{"gap-y":[j]}],"justify-content":[{justify:["normal",...ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Kn,e]}],"min-w":[{"min-w":[Kn,e,"min","max","fit"]}],"max-w":[{"max-w":[Kn,e,"none","full","min","max","fit","prose",{screen:[Vc]},Vc]}],h:[{h:[Kn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Kn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Kn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Kn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vc,$c]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",i0]}],"font-family":[{font:[$f]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Kn]}],"line-clamp":[{"line-clamp":["none",Bd,i0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oc,Kn]}],"list-image":[{"list-image":["none",Kn]}],"list-style-type":[{list:["none","disc","decimal",Kn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oc,$c]}],"underline-offset":[{"underline-offset":["auto",oc,Kn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Kn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Kn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),F_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",I_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},M_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[..._e(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:_e()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",..._e()]}],"outline-offset":[{"outline-offset":[oc,Kn]}],"outline-w":[{outline:[oc,$c]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[oc,$c]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vc,B_]}],"shadow-color":[{shadow:[$f]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ae()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Vc,Kn]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[b]}],saturate:[{saturate:[v]}],sepia:[{sepia:[ee]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Kn]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Kn]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Kn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[zf,Kn]}],"translate-x":[{"translate-x":[te]}],"translate-y":[{"translate-y":[te]}],"skew-x":[{"skew-x":[ae]}],"skew-y":[{"skew-y":[ae]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Kn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Kn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Kn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[oc,$c,i0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},V_=C_($_);function Mn(...t){return V_(Pb(t))}const H_=WC,Ob=k.forwardRef(({className:t,...e},n)=>i.jsx(wb,{ref:n,className:Mn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ob.displayName=wb.displayName;const W_=Fm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Mb=k.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(Nb,{ref:r,className:Mn(W_({variant:e}),t),...n}));Mb.displayName=Nb.displayName;const G_=k.forwardRef(({className:t,...e},n)=>i.jsx(Cb,{ref:n,className:Mn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));G_.displayName=Cb.displayName;const Bb=k.forwardRef(({className:t,...e},n)=>i.jsx(_b,{ref:n,className:Mn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(lf,{className:"h-4 w-4"})}));Bb.displayName=_b.displayName;const qb=k.forwardRef(({className:t,...e},n)=>i.jsx(Sb,{ref:n,className:Mn("text-sm font-semibold",t),...e}));qb.displayName=Sb.displayName;const Ub=k.forwardRef(({className:t,...e},n)=>i.jsx(jb,{ref:n,className:Mn("text-sm opacity-90",t),...e}));Ub.displayName=jb.displayName;function K_(){const{toasts:t}=$a();return i.jsxs(H_,{children:[t.map(function({id:e,title:n,description:r,action:a,...o}){return i.jsxs(Mb,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(qb,{children:n}),r&&i.jsx(Ub,{children:r})]}),a,i.jsx(Bb,{})]},e)}),i.jsx(Ob,{})]})}var Q_=E5[" useId ".trim().toString()]||(()=>{}),Z_=0;function Yc(t){const[e,n]=k.useState(Q_());return gi(()=>{n(r=>r??String(Z_++))},[t]),e?`radix-${e}`:""}const Y_=["top","right","bottom","left"],tu=Math.min,so=Math.max,im=Math.round,Sp=Math.floor,Pl=t=>({x:t,y:t}),X_={left:"right",right:"left",bottom:"top",top:"bottom"},J_={start:"end",end:"start"};function iv(t,e,n){return so(t,tu(e,n))}function pc(t,e){return typeof t=="function"?t(e):t}function mc(t){return t.split("-")[0]}function uf(t){return t.split("-")[1]}function Zv(t){return t==="x"?"y":"x"}function Yv(t){return t==="y"?"height":"width"}function nu(t){return["top","bottom"].includes(mc(t))?"y":"x"}function Xv(t){return Zv(nu(t))}function eA(t,e,n){n===void 0&&(n=!1);const r=uf(t),a=Xv(t),o=Yv(a);let u=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(u=am(u)),[u,am(u)]}function tA(t){const e=am(t);return[av(t),e,av(e)]}function av(t){return t.replace(/start|end/g,e=>J_[e])}function nA(t,e,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:r:e?r:a;case"left":case"right":return e?o:u;default:return[]}}function rA(t,e,n,r){const a=uf(t);let o=nA(mc(t),n==="start",r);return a&&(o=o.map(u=>u+"-"+a),e&&(o=o.concat(o.map(av)))),o}function am(t){return t.replace(/left|right|bottom|top/g,e=>X_[e])}function sA(t){return{top:0,right:0,bottom:0,left:0,...t}}function zb(t){return typeof t!="number"?sA(t):{top:t,right:t,bottom:t,left:t}}function om(t){const{x:e,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:e,right:e+r,bottom:n+a,x:e,y:n}}function x2(t,e,n){let{reference:r,floating:a}=t;const o=nu(e),u=Xv(e),c=Yv(u),f=mc(e),p=o==="y",m=r.x+r.width/2-a.width/2,b=r.y+r.height/2-a.height/2,j=r[c]/2-a[c]/2;let y;switch(f){case"top":y={x:m,y:r.y-a.height};break;case"bottom":y={x:m,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:b};break;case"left":y={x:r.x-a.width,y:b};break;default:y={x:r.x,y:r.y}}switch(uf(e)){case"start":y[u]-=j*(n&&p?-1:1);break;case"end":y[u]+=j*(n&&p?-1:1);break}return y}const iA=async(t,e,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:u}=n,c=o.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:b}=x2(p,r,f),j=r,y={},D=0;for(let S=0;S<c.length;S++){const{name:P,fn:_}=c[S],{x:I,y:v,data:B,reset:ee}=await _({x:m,y:b,initialPlacement:r,placement:j,strategy:a,middlewareData:y,rects:p,platform:u,elements:{reference:t,floating:e}});m=I??m,b=v??b,y={...y,[P]:{...y[P],...B}},ee&&D<=50&&(D++,typeof ee=="object"&&(ee.placement&&(j=ee.placement),ee.rects&&(p=ee.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:a}):ee.rects),{x:m,y:b}=x2(p,j,f)),S=-1)}return{x:m,y:b,placement:j,strategy:a,middlewareData:y}};async function lh(t,e){var n;e===void 0&&(e={});const{x:r,y:a,platform:o,rects:u,elements:c,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:b="floating",altBoundary:j=!1,padding:y=0}=pc(e,t),D=zb(y),P=c[j?b==="floating"?"reference":"floating":b],_=om(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(P)))==null||n?P:P.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:p,rootBoundary:m,strategy:f})),I=b==="floating"?{x:r,y:a,width:u.floating.width,height:u.floating.height}:u.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),B=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},ee=om(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:v,strategy:f}):I);return{top:(_.top-ee.top+D.top)/B.y,bottom:(ee.bottom-_.bottom+D.bottom)/B.y,left:(_.left-ee.left+D.left)/B.x,right:(ee.right-_.right+D.right)/B.x}}const aA=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:a,rects:o,platform:u,elements:c,middlewareData:f}=e,{element:p,padding:m=0}=pc(t,e)||{};if(p==null)return{};const b=zb(m),j={x:n,y:r},y=Xv(a),D=Yv(y),S=await u.getDimensions(p),P=y==="y",_=P?"top":"left",I=P?"bottom":"right",v=P?"clientHeight":"clientWidth",B=o.reference[D]+o.reference[y]-j[y]-o.floating[D],ee=j[y]-o.reference[y],ae=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let W=ae?ae[v]:0;(!W||!await(u.isElement==null?void 0:u.isElement(ae)))&&(W=c.floating[v]||o.floating[D]);const te=B/2-ee/2,Q=W/2-S[D]/2-1,de=tu(b[_],Q),F=tu(b[I],Q),L=de,z=W-S[D]-F,Y=W/2-S[D]/2+te,Ce=iv(L,Y,z),_e=!f.arrow&&uf(a)!=null&&Y!==Ce&&o.reference[D]/2-(Y<L?de:F)-S[D]/2<0,Ae=_e?Y<L?Y-L:Y-z:0;return{[y]:j[y]+Ae,data:{[y]:Ce,centerOffset:Y-Ce-Ae,..._e&&{alignmentOffset:Ae}},reset:_e}}}),oA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:a,middlewareData:o,rects:u,initialPlacement:c,platform:f,elements:p}=e,{mainAxis:m=!0,crossAxis:b=!0,fallbackPlacements:j,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:S=!0,...P}=pc(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=mc(a),I=nu(c),v=mc(c)===c,B=await(f.isRTL==null?void 0:f.isRTL(p.floating)),ee=j||(v||!S?[am(c)]:tA(c)),ae=D!=="none";!j&&ae&&ee.push(...rA(c,S,D,B));const W=[c,...ee],te=await lh(e,P),Q=[];let de=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&Q.push(te[_]),b){const Y=eA(a,u,B);Q.push(te[Y[0]],te[Y[1]])}if(de=[...de,{placement:a,overflows:Q}],!Q.every(Y=>Y<=0)){var F,L;const Y=(((F=o.flip)==null?void 0:F.index)||0)+1,Ce=W[Y];if(Ce)return{data:{index:Y,overflows:de},reset:{placement:Ce}};let _e=(L=de.filter(Ae=>Ae.overflows[0]<=0).sort((Ae,ce)=>Ae.overflows[1]-ce.overflows[1])[0])==null?void 0:L.placement;if(!_e)switch(y){case"bestFit":{var z;const Ae=(z=de.filter(ce=>{if(ae){const ge=nu(ce.placement);return ge===I||ge==="y"}return!0}).map(ce=>[ce.placement,ce.overflows.filter(ge=>ge>0).reduce((ge,De)=>ge+De,0)]).sort((ce,ge)=>ce[1]-ge[1])[0])==null?void 0:z[0];Ae&&(_e=Ae);break}case"initialPlacement":_e=c;break}if(a!==_e)return{reset:{placement:_e}}}return{}}}};function y2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function b2(t){return Y_.some(e=>t[e]>=0)}const lA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...a}=pc(t,e);switch(r){case"referenceHidden":{const o=await lh(e,{...a,elementContext:"reference"}),u=y2(o,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:b2(u)}}}case"escaped":{const o=await lh(e,{...a,altBoundary:!0}),u=y2(o,n.floating);return{data:{escapedOffsets:u,escaped:b2(u)}}}default:return{}}}}};async function cA(t,e){const{placement:n,platform:r,elements:a}=t,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),u=mc(n),c=uf(n),f=nu(n)==="y",p=["left","top"].includes(u)?-1:1,m=o&&f?-1:1,b=pc(e,t);let{mainAxis:j,crossAxis:y,alignmentAxis:D}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return c&&typeof D=="number"&&(y=c==="end"?D*-1:D),f?{x:y*m,y:j*p}:{x:j*p,y:y*m}}const uA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:a,y:o,placement:u,middlewareData:c}=e,f=await cA(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:u}}}}},dA=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:a}=e,{mainAxis:o=!0,crossAxis:u=!1,limiter:c={fn:P=>{let{x:_,y:I}=P;return{x:_,y:I}}},...f}=pc(t,e),p={x:n,y:r},m=await lh(e,f),b=nu(mc(a)),j=Zv(b);let y=p[j],D=p[b];if(o){const P=j==="y"?"top":"left",_=j==="y"?"bottom":"right",I=y+m[P],v=y-m[_];y=iv(I,y,v)}if(u){const P=b==="y"?"top":"left",_=b==="y"?"bottom":"right",I=D+m[P],v=D-m[_];D=iv(I,D,v)}const S=c.fn({...e,[j]:y,[b]:D});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[j]:o,[b]:u}}}}}},fA=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:a,rects:o,middlewareData:u}=e,{offset:c=0,mainAxis:f=!0,crossAxis:p=!0}=pc(t,e),m={x:n,y:r},b=nu(a),j=Zv(b);let y=m[j],D=m[b];const S=pc(c,e),P=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const v=j==="y"?"height":"width",B=o.reference[j]-o.floating[v]+P.mainAxis,ee=o.reference[j]+o.reference[v]-P.mainAxis;y<B?y=B:y>ee&&(y=ee)}if(p){var _,I;const v=j==="y"?"width":"height",B=["top","left"].includes(mc(a)),ee=o.reference[b]-o.floating[v]+(B&&((_=u.offset)==null?void 0:_[b])||0)+(B?0:P.crossAxis),ae=o.reference[b]+o.reference[v]+(B?0:((I=u.offset)==null?void 0:I[b])||0)-(B?P.crossAxis:0);D<ee?D=ee:D>ae&&(D=ae)}return{[j]:y,[b]:D}}}},hA=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:a,rects:o,platform:u,elements:c}=e,{apply:f=()=>{},...p}=pc(t,e),m=await lh(e,p),b=mc(a),j=uf(a),y=nu(a)==="y",{width:D,height:S}=o.floating;let P,_;b==="top"||b==="bottom"?(P=b,_=j===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(_=b,P=j==="end"?"top":"bottom");const I=S-m.top-m.bottom,v=D-m.left-m.right,B=tu(S-m[P],I),ee=tu(D-m[_],v),ae=!e.middlewareData.shift;let W=B,te=ee;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(te=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=I),ae&&!j){const de=so(m.left,0),F=so(m.right,0),L=so(m.top,0),z=so(m.bottom,0);y?te=D-2*(de!==0||F!==0?de+F:so(m.left,m.right)):W=S-2*(L!==0||z!==0?L+z:so(m.top,m.bottom))}await f({...e,availableWidth:te,availableHeight:W});const Q=await u.getDimensions(c.floating);return D!==Q.width||S!==Q.height?{reset:{rects:!0}}:{}}}};function Bm(){return typeof window<"u"}function df(t){return $b(t)?(t.nodeName||"").toLowerCase():"#document"}function oo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Fl(t){var e;return(e=($b(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $b(t){return Bm()?t instanceof Node||t instanceof oo(t).Node:!1}function Xo(t){return Bm()?t instanceof Element||t instanceof oo(t).Element:!1}function Ll(t){return Bm()?t instanceof HTMLElement||t instanceof oo(t).HTMLElement:!1}function w2(t){return!Bm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof oo(t).ShadowRoot}function Rh(t){const{overflow:e,overflowX:n,overflowY:r,display:a}=Jo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(a)}function pA(t){return["table","td","th"].includes(df(t))}function qm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Jv(t){const e=e1(),n=Xo(t)?Jo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function mA(t){let e=ru(t);for(;Ll(e)&&!Zd(e);){if(Jv(e))return e;if(qm(e))return null;e=ru(e)}return null}function e1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zd(t){return["html","body","#document"].includes(df(t))}function Jo(t){return oo(t).getComputedStyle(t)}function Um(t){return Xo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ru(t){if(df(t)==="html")return t;const e=t.assignedSlot||t.parentNode||w2(t)&&t.host||Fl(t);return w2(e)?e.host:e}function Vb(t){const e=ru(t);return Zd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ll(e)&&Rh(e)?e:Vb(e)}function ch(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=Vb(t),o=a===((r=t.ownerDocument)==null?void 0:r.body),u=oo(a);if(o){const c=ov(u);return e.concat(u,u.visualViewport||[],Rh(a)?a:[],c&&n?ch(c):[])}return e.concat(a,ch(a,[],n))}function ov(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Hb(t){const e=Jo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=Ll(t),o=a?t.offsetWidth:n,u=a?t.offsetHeight:r,c=im(n)!==o||im(r)!==u;return c&&(n=o,r=u),{width:n,height:r,$:c}}function t1(t){return Xo(t)?t:t.contextElement}function qd(t){const e=t1(t);if(!Ll(e))return Pl(1);const n=e.getBoundingClientRect(),{width:r,height:a,$:o}=Hb(e);let u=(o?im(n.width):n.width)/r,c=(o?im(n.height):n.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const gA=Pl(0);function Wb(t){const e=oo(t);return!e1()||!e.visualViewport?gA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vA(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==oo(t)?!1:e}function zu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),o=t1(t);let u=Pl(1);e&&(r?Xo(r)&&(u=qd(r)):u=qd(t));const c=vA(o,n,r)?Wb(o):Pl(0);let f=(a.left+c.x)/u.x,p=(a.top+c.y)/u.y,m=a.width/u.x,b=a.height/u.y;if(o){const j=oo(o),y=r&&Xo(r)?oo(r):r;let D=j,S=ov(D);for(;S&&r&&y!==D;){const P=qd(S),_=S.getBoundingClientRect(),I=Jo(S),v=_.left+(S.clientLeft+parseFloat(I.paddingLeft))*P.x,B=_.top+(S.clientTop+parseFloat(I.paddingTop))*P.y;f*=P.x,p*=P.y,m*=P.x,b*=P.y,f+=v,p+=B,D=oo(S),S=ov(D)}}return om({width:m,height:b,x:f,y:p})}function n1(t,e){const n=Um(t).scrollLeft;return e?e.left+n:zu(Fl(t)).left+n}function Gb(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=r.left+e.scrollLeft-(n?0:n1(t,r)),o=r.top+e.scrollTop;return{x:a,y:o}}function xA(t){let{elements:e,rect:n,offsetParent:r,strategy:a}=t;const o=a==="fixed",u=Fl(r),c=e?qm(e.floating):!1;if(r===u||c&&o)return n;let f={scrollLeft:0,scrollTop:0},p=Pl(1);const m=Pl(0),b=Ll(r);if((b||!b&&!o)&&((df(r)!=="body"||Rh(u))&&(f=Um(r)),Ll(r))){const y=zu(r);p=qd(r),m.x=y.x+r.clientLeft,m.y=y.y+r.clientTop}const j=u&&!b&&!o?Gb(u,f,!0):Pl(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+m.x+j.x,y:n.y*p.y-f.scrollTop*p.y+m.y+j.y}}function yA(t){return Array.from(t.getClientRects())}function bA(t){const e=Fl(t),n=Um(t),r=t.ownerDocument.body,a=so(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=so(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+n1(t);const c=-n.scrollTop;return Jo(r).direction==="rtl"&&(u+=so(e.clientWidth,r.clientWidth)-a),{width:a,height:o,x:u,y:c}}function wA(t,e){const n=oo(t),r=Fl(t),a=n.visualViewport;let o=r.clientWidth,u=r.clientHeight,c=0,f=0;if(a){o=a.width,u=a.height;const p=e1();(!p||p&&e==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:o,height:u,x:c,y:f}}function NA(t,e){const n=zu(t,!0,e==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,o=Ll(t)?qd(t):Pl(1),u=t.clientWidth*o.x,c=t.clientHeight*o.y,f=a*o.x,p=r*o.y;return{width:u,height:c,x:f,y:p}}function N2(t,e,n){let r;if(e==="viewport")r=wA(t,n);else if(e==="document")r=bA(Fl(t));else if(Xo(e))r=NA(e,n);else{const a=Wb(t);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return om(r)}function Kb(t,e){const n=ru(t);return n===e||!Xo(n)||Zd(n)?!1:Jo(n).position==="fixed"||Kb(n,e)}function SA(t,e){const n=e.get(t);if(n)return n;let r=ch(t,[],!1).filter(c=>Xo(c)&&df(c)!=="body"),a=null;const o=Jo(t).position==="fixed";let u=o?ru(t):t;for(;Xo(u)&&!Zd(u);){const c=Jo(u),f=Jv(u);!f&&c.position==="fixed"&&(a=null),(o?!f&&!a:!f&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Rh(u)&&!f&&Kb(t,u))?r=r.filter(m=>m!==u):a=c,u=ru(u)}return e.set(t,r),r}function jA(t){let{element:e,boundary:n,rootBoundary:r,strategy:a}=t;const u=[...n==="clippingAncestors"?qm(e)?[]:SA(e,this._c):[].concat(n),r],c=u[0],f=u.reduce((p,m)=>{const b=N2(e,m,a);return p.top=so(b.top,p.top),p.right=tu(b.right,p.right),p.bottom=tu(b.bottom,p.bottom),p.left=so(b.left,p.left),p},N2(e,c,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function CA(t){const{width:e,height:n}=Hb(t);return{width:e,height:n}}function _A(t,e,n){const r=Ll(e),a=Fl(e),o=n==="fixed",u=zu(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=Pl(0);if(r||!r&&!o)if((df(e)!=="body"||Rh(a))&&(c=Um(e)),r){const j=zu(e,!0,o,e);f.x=j.x+e.clientLeft,f.y=j.y+e.clientTop}else a&&(f.x=n1(a));const p=a&&!r&&!o?Gb(a,c):Pl(0),m=u.left+c.scrollLeft-f.x-p.x,b=u.top+c.scrollTop-f.y-p.y;return{x:m,y:b,width:u.width,height:u.height}}function a0(t){return Jo(t).position==="static"}function S2(t,e){if(!Ll(t)||Jo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Fl(t)===n&&(n=n.ownerDocument.body),n}function Qb(t,e){const n=oo(t);if(qm(t))return n;if(!Ll(t)){let a=ru(t);for(;a&&!Zd(a);){if(Xo(a)&&!a0(a))return a;a=ru(a)}return n}let r=S2(t,e);for(;r&&pA(r)&&a0(r);)r=S2(r,e);return r&&Zd(r)&&a0(r)&&!Jv(r)?n:r||mA(t)||n}const AA=async function(t){const e=this.getOffsetParent||Qb,n=this.getDimensions,r=await n(t.floating);return{reference:_A(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PA(t){return Jo(t).direction==="rtl"}const kA={convertOffsetParentRelativeRectToViewportRelativeRect:xA,getDocumentElement:Fl,getClippingRect:jA,getOffsetParent:Qb,getElementRects:AA,getClientRects:yA,getDimensions:CA,getScale:qd,isElement:Xo,isRTL:PA};function Zb(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function TA(t,e){let n=null,r;const a=Fl(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function u(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const p=t.getBoundingClientRect(),{left:m,top:b,width:j,height:y}=p;if(c||e(),!j||!y)return;const D=Sp(b),S=Sp(a.clientWidth-(m+j)),P=Sp(a.clientHeight-(b+y)),_=Sp(m),v={rootMargin:-D+"px "+-S+"px "+-P+"px "+-_+"px",threshold:so(0,tu(1,f))||1};let B=!0;function ee(ae){const W=ae[0].intersectionRatio;if(W!==f){if(!B)return u();W?u(!1,W):r=setTimeout(()=>{u(!1,1e-7)},1e3)}W===1&&!Zb(p,t.getBoundingClientRect())&&u(),B=!1}try{n=new IntersectionObserver(ee,{...v,root:a.ownerDocument})}catch{n=new IntersectionObserver(ee,v)}n.observe(t)}return u(!0),o}function EA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,p=t1(t),m=a||o?[...p?ch(p):[],...ch(e)]:[];m.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const b=p&&c?TA(p,n):null;let j=-1,y=null;u&&(y=new ResizeObserver(_=>{let[I]=_;I&&I.target===p&&y&&(y.unobserve(e),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{var v;(v=y)==null||v.observe(e)})),n()}),p&&!f&&y.observe(p),y.observe(e));let D,S=f?zu(t):null;f&&P();function P(){const _=zu(t);S&&!Zb(S,_)&&n(),S=_,D=requestAnimationFrame(P)}return n(),()=>{var _;m.forEach(I=>{a&&I.removeEventListener("scroll",n),o&&I.removeEventListener("resize",n)}),b?.(),(_=y)==null||_.disconnect(),y=null,f&&cancelAnimationFrame(D)}}const LA=uA,RA=dA,DA=oA,IA=hA,FA=lA,j2=aA,OA=fA,MA=(t,e,n)=>{const r=new Map,a={platform:kA,...n},o={...a.platform,_c:r};return iA(t,e,{...a,platform:o})};var zp=typeof document<"u"?k.useLayoutEffect:k.useEffect;function lm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!lm(t[r],e[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&t.$$typeof)&&!lm(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function Yb(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function C2(t,e){const n=Yb(t);return Math.round(e*n)/n}function o0(t){const e=k.useRef(t);return zp(()=>{e.current=t}),e}function BA(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:u}={},transform:c=!0,whileElementsMounted:f,open:p}=t,[m,b]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[j,y]=k.useState(r);lm(j,r)||y(r);const[D,S]=k.useState(null),[P,_]=k.useState(null),I=k.useCallback(ce=>{ce!==ae.current&&(ae.current=ce,S(ce))},[]),v=k.useCallback(ce=>{ce!==W.current&&(W.current=ce,_(ce))},[]),B=o||D,ee=u||P,ae=k.useRef(null),W=k.useRef(null),te=k.useRef(m),Q=f!=null,de=o0(f),F=o0(a),L=o0(p),z=k.useCallback(()=>{if(!ae.current||!W.current)return;const ce={placement:e,strategy:n,middleware:j};F.current&&(ce.platform=F.current),MA(ae.current,W.current,ce).then(ge=>{const De={...ge,isPositioned:L.current!==!1};Y.current&&!lm(te.current,De)&&(te.current=De,sf.flushSync(()=>{b(De)}))})},[j,e,n,F,L]);zp(()=>{p===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,b(ce=>({...ce,isPositioned:!1})))},[p]);const Y=k.useRef(!1);zp(()=>(Y.current=!0,()=>{Y.current=!1}),[]),zp(()=>{if(B&&(ae.current=B),ee&&(W.current=ee),B&&ee){if(de.current)return de.current(B,ee,z);z()}},[B,ee,z,de,Q]);const Ce=k.useMemo(()=>({reference:ae,floating:W,setReference:I,setFloating:v}),[I,v]),_e=k.useMemo(()=>({reference:B,floating:ee}),[B,ee]),Ae=k.useMemo(()=>{const ce={position:n,left:0,top:0};if(!_e.floating)return ce;const ge=C2(_e.floating,m.x),De=C2(_e.floating,m.y);return c?{...ce,transform:"translate("+ge+"px, "+De+"px)",...Yb(_e.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ge,top:De}},[n,c,_e.floating,m.x,m.y]);return k.useMemo(()=>({...m,update:z,refs:Ce,elements:_e,floatingStyles:Ae}),[m,z,Ce,_e,Ae])}const qA=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?j2({element:r.current,padding:a}).fn(n):{}:r?j2({element:r,padding:a}).fn(n):{}}}},UA=(t,e)=>({...LA(t),options:[t,e]}),zA=(t,e)=>({...RA(t),options:[t,e]}),$A=(t,e)=>({...OA(t),options:[t,e]}),VA=(t,e)=>({...DA(t),options:[t,e]}),HA=(t,e)=>({...IA(t),options:[t,e]}),WA=(t,e)=>({...FA(t),options:[t,e]}),GA=(t,e)=>({...qA(t),options:[t,e]});var KA="Arrow",Xb=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:a=5,...o}=t;return i.jsx(Wn.svg,{...o,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xb.displayName=KA;var QA=Xb;function Jb(t){const[e,n]=k.useState(void 0);return gi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let u,c;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;u=p.inlineSize,c=p.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var r1="Popper",[ew,zm]=Il(r1),[ZA,tw]=ew(r1),nw=t=>{const{__scopePopper:e,children:n}=t,[r,a]=k.useState(null);return i.jsx(ZA,{scope:e,anchor:r,onAnchorChange:a,children:n})};nw.displayName=r1;var rw="PopperAnchor",sw=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...a}=t,o=tw(rw,n),u=k.useRef(null),c=Kr(e,u);return k.useEffect(()=>{o.onAnchorChange(r?.current||u.current)}),r?null:i.jsx(Wn.div,{...a,ref:c})});sw.displayName=rw;var s1="PopperContent",[YA,XA]=ew(s1),iw=k.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:b="partial",hideWhenDetached:j=!1,updatePositionStrategy:y="optimized",onPlaced:D,...S}=t,P=tw(s1,n),[_,I]=k.useState(null),v=Kr(e,be=>I(be)),[B,ee]=k.useState(null),ae=Jb(B),W=ae?.width??0,te=ae?.height??0,Q=r+(o!=="center"?"-"+o:""),de=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},F=Array.isArray(p)?p:[p],L=F.length>0,z={padding:de,boundary:F.filter(eP),altBoundary:L},{refs:Y,floatingStyles:Ce,placement:_e,isPositioned:Ae,middlewareData:ce}=BA({strategy:"fixed",placement:Q,whileElementsMounted:(...be)=>EA(...be,{animationFrame:y==="always"}),elements:{reference:P.anchor},middleware:[UA({mainAxis:a+te,alignmentAxis:u}),f&&zA({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?$A():void 0,...z}),f&&VA({...z}),HA({...z,apply:({elements:be,rects:Re,availableWidth:Ie,availableHeight:Me})=>{const{width:Qe,height:ht}=Re.reference,vt=be.floating.style;vt.setProperty("--radix-popper-available-width",`${Ie}px`),vt.setProperty("--radix-popper-available-height",`${Me}px`),vt.setProperty("--radix-popper-anchor-width",`${Qe}px`),vt.setProperty("--radix-popper-anchor-height",`${ht}px`)}}),B&&GA({element:B,padding:c}),tP({arrowWidth:W,arrowHeight:te}),j&&WA({strategy:"referenceHidden",...z})]}),[ge,De]=lw(_e),se=Ua(D);gi(()=>{Ae&&se?.()},[Ae,se]);const O=ce.arrow?.x,E=ce.arrow?.y,ne=ce.arrow?.centerOffset!==0,[me,ye]=k.useState();return gi(()=>{_&&ye(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ce,transform:Ae?Ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[ce.transformOrigin?.x,ce.transformOrigin?.y].join(" "),...ce.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(YA,{scope:n,placedSide:ge,onArrowChange:ee,arrowX:O,arrowY:E,shouldHideArrow:ne,children:i.jsx(Wn.div,{"data-side":ge,"data-align":De,...S,ref:v,style:{...S.style,animation:Ae?void 0:"none"}})})})});iw.displayName=s1;var aw="PopperArrow",JA={top:"bottom",right:"left",bottom:"top",left:"right"},ow=k.forwardRef(function(e,n){const{__scopePopper:r,...a}=e,o=XA(aw,r),u=JA[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(QA,{...a,ref:n,style:{...a.style,display:"block"}})})});ow.displayName=aw;function eP(t){return t!==null}var tP=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:a}=e,u=a.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[p,m]=lw(n),b={start:"0%",center:"50%",end:"100%"}[m],j=(a.arrow?.x??0)+c/2,y=(a.arrow?.y??0)+f/2;let D="",S="";return p==="bottom"?(D=u?b:`${j}px`,S=`${-f}px`):p==="top"?(D=u?b:`${j}px`,S=`${r.floating.height+f}px`):p==="right"?(D=`${-f}px`,S=u?b:`${y}px`):p==="left"&&(D=`${r.floating.width+f}px`,S=u?b:`${y}px`),{data:{x:D,y:S}}}});function lw(t){const[e,n="center"]=t.split("-");return[e,n]}var nP=nw,cw=sw,uw=iw,dw=ow,[$m]=Il("Tooltip",[zm]),i1=zm(),fw="TooltipProvider",rP=700,_2="tooltip.open",[sP,hw]=$m(fw),pw=t=>{const{__scopeTooltip:e,delayDuration:n=rP,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:o}=t,u=k.useRef(!0),c=k.useRef(!1),f=k.useRef(0);return k.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),i.jsx(sP,{scope:e,isOpenDelayedRef:u,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:k.useCallback(p=>{c.current=p},[]),disableHoverableContent:a,children:o})};pw.displayName=fw;var mw="Tooltip",[f7,Vm]=$m(mw),lv="TooltipTrigger",iP=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=Vm(lv,n),o=hw(lv,n),u=i1(n),c=k.useRef(null),f=Kr(e,c,a.onTriggerChange),p=k.useRef(!1),m=k.useRef(!1),b=k.useCallback(()=>p.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),i.jsx(cw,{asChild:!0,...u,children:i.jsx(Wn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:f,onPointerMove:zn(t.onPointerMove,j=>{j.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:zn(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:zn(t.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:zn(t.onFocus,()=>{p.current||a.onOpen()}),onBlur:zn(t.onBlur,a.onClose),onClick:zn(t.onClick,a.onClose)})})});iP.displayName=lv;var aP="TooltipPortal",[h7,oP]=$m(aP,{forceMount:void 0}),Yd="TooltipContent",gw=k.forwardRef((t,e)=>{const n=oP(Yd,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...o}=t,u=Vm(Yd,t.__scopeTooltip);return i.jsx(cu,{present:r||u.open,children:u.disableHoverableContent?i.jsx(vw,{side:a,...o,ref:e}):i.jsx(lP,{side:a,...o,ref:e})})}),lP=k.forwardRef((t,e)=>{const n=Vm(Yd,t.__scopeTooltip),r=hw(Yd,t.__scopeTooltip),a=k.useRef(null),o=Kr(e,a),[u,c]=k.useState(null),{trigger:f,onClose:p}=n,m=a.current,{onPointerInTransitChange:b}=r,j=k.useCallback(()=>{c(null),b(!1)},[b]),y=k.useCallback((D,S)=>{const P=D.currentTarget,_={x:D.clientX,y:D.clientY},I=hP(_,P.getBoundingClientRect()),v=pP(_,I),B=mP(S.getBoundingClientRect()),ee=vP([...v,...B]);c(ee),b(!0)},[b]);return k.useEffect(()=>()=>j(),[j]),k.useEffect(()=>{if(f&&m){const D=P=>y(P,m),S=P=>y(P,f);return f.addEventListener("pointerleave",D),m.addEventListener("pointerleave",S),()=>{f.removeEventListener("pointerleave",D),m.removeEventListener("pointerleave",S)}}},[f,m,y,j]),k.useEffect(()=>{if(u){const D=S=>{const P=S.target,_={x:S.clientX,y:S.clientY},I=f?.contains(P)||m?.contains(P),v=!gP(_,u);I?j():v&&(j(),p())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[f,m,u,p,j]),i.jsx(vw,{...t,ref:o})}),[cP,uP]=$m(mw,{isInside:!1}),dP=lC("TooltipContent"),vw=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:u,...c}=t,f=Vm(Yd,n),p=i1(n),{onClose:m}=f;return k.useEffect(()=>(document.addEventListener(_2,m),()=>document.removeEventListener(_2,m)),[m]),k.useEffect(()=>{if(f.trigger){const b=j=>{j.target?.contains(f.trigger)&&m()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[f.trigger,m]),i.jsx(Th,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:b=>b.preventDefault(),onDismiss:m,children:i.jsxs(uw,{"data-state":f.stateAttribute,...p,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(dP,{children:r}),i.jsx(cP,{scope:n,isInside:!0,children:i.jsx(PC,{id:f.contentId,role:"tooltip",children:a||r})})]})})});gw.displayName=Yd;var xw="TooltipArrow",fP=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=i1(n);return uP(xw,n).isInside?null:i.jsx(dw,{...a,...r,ref:e})});fP.displayName=xw;function hP(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,a,o)){case o:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function pP(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function mP(t){const{top:e,right:n,bottom:r,left:a}=t;return[{x:a,y:e},{x:n,y:e},{x:n,y:r},{x:a,y:r}]}function gP(t,e){const{x:n,y:r}=t;let a=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const c=e[o].x,f=e[o].y,p=e[u].x,m=e[u].y;f>r!=m>r&&n<(p-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function vP(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),xP(e)}function xP(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const a=t[r];for(;e.length>=2;){const o=e[e.length-1],u=e[e.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const o=n[n.length-1],u=n[n.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))n.pop();else break}n.push(a)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var yP=pw,yw=gw;const bP=yP,wP=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(yw,{ref:r,sideOffset:e,className:Mn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));wP.displayName=yw.displayName;var yr;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),u={};for(const c of o)u[c]=a[c];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(yr||(yr={}));var cv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(cv||(cv={}));const Kt=yr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fc=t=>{switch(typeof t){case"undefined":return Kt.undefined;case"string":return Kt.string;case"number":return isNaN(t)?Kt.nan:Kt.number;case"boolean":return Kt.boolean;case"function":return Kt.function;case"bigint":return Kt.bigint;case"symbol":return Kt.symbol;case"object":return Array.isArray(t)?Kt.array:t===null?Kt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Kt.promise:typeof Map<"u"&&t instanceof Map?Kt.map:typeof Set<"u"&&t instanceof Set?Kt.set:typeof Date<"u"&&t instanceof Date?Kt.date:Kt.object;default:return Kt.unknown}},Pt=yr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),NP=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class lo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let c=r,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(n(u))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return a(this),r}static assert(e){if(!(e instanceof lo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}lo.create=t=>new lo(t);const Xd=(t,e)=>{let n;switch(t.code){case Pt.invalid_type:t.received===Kt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yr.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${yr.joinValues(t.keys,", ")}`;break;case Pt.invalid_union:n="Invalid input";break;case Pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yr.joinValues(t.options)}`;break;case Pt.invalid_enum_value:n=`Invalid enum value. Expected ${yr.joinValues(t.options)}, received '${t.received}'`;break;case Pt.invalid_arguments:n="Invalid function arguments";break;case Pt.invalid_return_type:n="Invalid function return type";break;case Pt.invalid_date:n="Invalid date";break;case Pt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Pt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Pt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Pt.custom:n="Invalid input";break;case Pt.invalid_intersection_types:n="Intersection results could not be merged";break;case Pt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Pt.not_finite:n="Number must be finite";break;default:n=e.defaultError,yr.assertNever(t)}return{message:n}};let bw=Xd;function SP(t){bw=t}function cm(){return bw}const um=t=>{const{data:e,path:n,errorMaps:r,issueData:a}=t,o=[...n,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="";const f=r.filter(p=>!!p).slice().reverse();for(const p of f)c=p(u,{data:e,defaultError:c}).message;return{...a,path:o,message:c}},jP=[];function Bt(t,e){const n=cm(),r=um({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Xd?void 0:Xd].filter(a=>!!a)});t.common.issues.push(r)}class pa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const a of n){if(a.status==="aborted")return Rn;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const a of n){const o=await a.key,u=await a.value;r.push({key:o,value:u})}return pa.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const a of n){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return Rn;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const Rn=Object.freeze({status:"aborted"}),Id=t=>({status:"dirty",value:t}),Aa=t=>({status:"valid",value:t}),uv=t=>t.status==="aborted",dv=t=>t.status==="dirty",$u=t=>t.status==="valid",uh=t=>typeof Promise<"u"&&t instanceof Promise;function dm(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function ww(t,e,n,r,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var mn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(mn||(mn={}));var Qf,Zf;class Rl{constructor(e,n,r,a){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const A2=(t,e)=>{if($u(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lo(t.common.issues);return this._error=n,this._error}}};function Gn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:a}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,c)=>{var f,p;const{message:m}=t;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(f=m??r)!==null&&f!==void 0?f:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??n)!==null&&p!==void 0?p:c.defaultError}},description:a}}class sr{get description(){return this._def.description}_getType(e){return fc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pa,ctx:{common:e.parent.common,data:e.data,parsedType:fc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(uh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const a={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fc(e)},o=this._parseSync({data:e,path:a.path,parent:a});return A2(a,o)}"~validate"(e){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fc(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return $u(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>$u(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fc(e)},a=this._parse({data:e,path:r.path,parent:r}),o=await(uh(a)?a:Promise.resolve(a));return A2(r,o)}refine(e,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,o)=>{const u=e(a),c=()=>o.addIssue({code:Pt.custom,...r(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(e){return new el({schema:this,typeName:Tn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return kl.create(this,this._def)}nullable(){return ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qo.create(this)}promise(){return ef.create(this,this._def)}or(e){return ph.create([this,e],this._def)}and(e){return mh.create(this,e,this._def)}transform(e){return new el({...Gn(this._def),schema:this,typeName:Tn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new bh({...Gn(this._def),innerType:this,defaultValue:n,typeName:Tn.ZodDefault})}brand(){return new a1({typeName:Tn.ZodBranded,type:this,...Gn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new wh({...Gn(this._def),innerType:this,catchValue:n,typeName:Tn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Dh.create(this,e)}readonly(){return Nh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CP=/^c[^\s-]{8,}$/i,_P=/^[0-9a-z]+$/,AP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kP=/^[a-z0-9_-]{21}$/i,TP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,LP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let l0;const DP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Nw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qP=new RegExp(`^${Nw}$`);function Sw(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function UP(t){return new RegExp(`^${Sw(t)}$`)}function jw(t){let e=`${Nw}T${Sw(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zP(t,e){return!!((e==="v4"||!e)&&DP.test(t)||(e==="v6"||!e)&&FP.test(t))}function $P(t,e){if(!TP.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function VP(t,e){return!!((e==="v4"||!e)&&IP.test(t)||(e==="v6"||!e)&&OP.test(t))}class Ko extends sr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Kt.string){const o=this._getOrReturnCtx(e);return Bt(o,{code:Pt.invalid_type,expected:Kt.string,received:o.parsedType}),Rn}const r=new pa;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(a=this._getOrReturnCtx(e,a),u?Bt(a,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&Bt(a,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")LP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"email",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")l0||(l0=new RegExp(RP,"u")),l0.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"emoji",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")PP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"uuid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")kP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"nanoid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")CP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"cuid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")_P.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"cuid2",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")AP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"ulid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Bt(a,{validation:"url",code:Pt.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"regex",code:Pt.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?jw(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?qP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?UP(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?EP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"duration",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?zP(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"ip",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?$P(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"jwt",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?VP(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"cidr",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?MP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"base64",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?BP.test(e.data)||(a=this._getOrReturnCtx(e,a),Bt(a,{validation:"base64url",code:Pt.invalid_string,message:o.message}),r.dirty()):yr.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(a=>e.test(a),{validation:n,code:Pt.invalid_string,...mn.errToObj(r)})}_addCheck(e){return new Ko({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...mn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...mn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...mn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...mn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...mn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...mn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...mn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...mn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...mn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...mn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...mn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...mn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...mn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...mn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...mn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...mn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...mn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...mn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...mn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...mn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...mn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...mn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...mn.errToObj(n)})}nonempty(e){return this.min(1,mn.errToObj(e))}trim(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ko.create=t=>{var e;return new Ko({checks:[],typeName:Tn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Gn(t)})};function HP(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=n>r?n:r,o=parseInt(t.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return o%u/Math.pow(10,a)}class su extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Kt.number){const o=this._getOrReturnCtx(e);return Bt(o,{code:Pt.invalid_type,expected:Kt.number,received:o.parsedType}),Rn}let r;const a=new pa;for(const o of this._def.checks)o.kind==="int"?yr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?HP(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.not_finite,message:o.message}),a.dirty()):yr.assertNever(o);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,mn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,mn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,mn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,mn.toString(n))}setLimit(e,n,r,a){return new su({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:mn.toString(a)}]})}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:mn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:mn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:mn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}su.create=t=>new su({checks:[],typeName:Tn.ZodNumber,coerce:t?.coerce||!1,...Gn(t)});class iu extends sr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Kt.bigint)return this._getInvalidInput(e);let r;const a=new pa;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Bt(r,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):yr.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Bt(n,{code:Pt.invalid_type,expected:Kt.bigint,received:n.parsedType}),Rn}gte(e,n){return this.setLimit("min",e,!0,mn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,mn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,mn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,mn.toString(n))}setLimit(e,n,r,a){return new iu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:mn.toString(a)}]})}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:mn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}iu.create=t=>{var e;return new iu({checks:[],typeName:Tn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Gn(t)})};class dh extends sr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Kt.boolean){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.boolean,received:r.parsedType}),Rn}return Aa(e.data)}}dh.create=t=>new dh({typeName:Tn.ZodBoolean,coerce:t?.coerce||!1,...Gn(t)});class Vu extends sr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Kt.date){const o=this._getOrReturnCtx(e);return Bt(o,{code:Pt.invalid_type,expected:Kt.date,received:o.parsedType}),Rn}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Bt(o,{code:Pt.invalid_date}),Rn}const r=new pa;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),Bt(a,{code:Pt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):yr.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:mn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:mn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Vu.create=t=>new Vu({checks:[],coerce:t?.coerce||!1,typeName:Tn.ZodDate,...Gn(t)});class fm extends sr{_parse(e){if(this._getType(e)!==Kt.symbol){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.symbol,received:r.parsedType}),Rn}return Aa(e.data)}}fm.create=t=>new fm({typeName:Tn.ZodSymbol,...Gn(t)});class fh extends sr{_parse(e){if(this._getType(e)!==Kt.undefined){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.undefined,received:r.parsedType}),Rn}return Aa(e.data)}}fh.create=t=>new fh({typeName:Tn.ZodUndefined,...Gn(t)});class hh extends sr{_parse(e){if(this._getType(e)!==Kt.null){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.null,received:r.parsedType}),Rn}return Aa(e.data)}}hh.create=t=>new hh({typeName:Tn.ZodNull,...Gn(t)});class Jd extends sr{constructor(){super(...arguments),this._any=!0}_parse(e){return Aa(e.data)}}Jd.create=t=>new Jd({typeName:Tn.ZodAny,...Gn(t)});class Ou extends sr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Aa(e.data)}}Ou.create=t=>new Ou({typeName:Tn.ZodUnknown,...Gn(t)});class gc extends sr{_parse(e){const n=this._getOrReturnCtx(e);return Bt(n,{code:Pt.invalid_type,expected:Kt.never,received:n.parsedType}),Rn}}gc.create=t=>new gc({typeName:Tn.ZodNever,...Gn(t)});class hm extends sr{_parse(e){if(this._getType(e)!==Kt.undefined){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.void,received:r.parsedType}),Rn}return Aa(e.data)}}hm.create=t=>new hm({typeName:Tn.ZodVoid,...Gn(t)});class Qo extends sr{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),a=this._def;if(n.parsedType!==Kt.array)return Bt(n,{code:Pt.invalid_type,expected:Kt.array,received:n.parsedType}),Rn;if(a.exactLength!==null){const u=n.data.length>a.exactLength.value,c=n.data.length<a.exactLength.value;(u||c)&&(Bt(n,{code:u?Pt.too_big:Pt.too_small,minimum:c?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Bt(n,{code:Pt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Bt(n,{code:Pt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,c)=>a.type._parseAsync(new Rl(n,u,n.path,c)))).then(u=>pa.mergeArray(r,u));const o=[...n.data].map((u,c)=>a.type._parseSync(new Rl(n,u,n.path,c)));return pa.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Qo({...this._def,minLength:{value:e,message:mn.toString(n)}})}max(e,n){return new Qo({...this._def,maxLength:{value:e,message:mn.toString(n)}})}length(e,n){return new Qo({...this._def,exactLength:{value:e,message:mn.toString(n)}})}nonempty(e){return this.min(1,e)}}Qo.create=(t,e)=>new Qo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Tn.ZodArray,...Gn(e)});function Ed(t){if(t instanceof Es){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=kl.create(Ed(r))}return new Es({...t._def,shape:()=>e})}else return t instanceof Qo?new Qo({...t._def,type:Ed(t.element)}):t instanceof kl?kl.create(Ed(t.unwrap())):t instanceof ou?ou.create(Ed(t.unwrap())):t instanceof Dl?Dl.create(t.items.map(e=>Ed(e))):t}class Es extends sr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yr.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Kt.object){const p=this._getOrReturnCtx(e);return Bt(p,{code:Pt.invalid_type,expected:Kt.object,received:p.parsedType}),Rn}const{status:r,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof gc&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||c.push(p);const f=[];for(const p of u){const m=o[p],b=a.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new Rl(a,b,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof gc){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(p==="strict")c.length>0&&(Bt(a,{code:Pt.unrecognized_keys,keys:c}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of c){const b=a.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new Rl(a,b,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of f){const b=await m.key,j=await m.value;p.push({key:b,value:j,alwaysSet:m.alwaysSet})}return p}).then(p=>pa.mergeObjectSync(r,p)):pa.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return mn.errToObj,new Es({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o,u,c;const f=(u=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,r).message)!==null&&u!==void 0?u:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=mn.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new Es({...this._def,unknownKeys:"strip"})}passthrough(){return new Es({...this._def,unknownKeys:"passthrough"})}extend(e){return new Es({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Es({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Tn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Es({...this._def,catchall:e})}pick(e){const n={};return yr.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Es({...this._def,shape:()=>n})}omit(e){const n={};return yr.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Es({...this._def,shape:()=>n})}deepPartial(){return Ed(this)}partial(e){const n={};return yr.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?n[r]=a:n[r]=a.optional()}),new Es({...this._def,shape:()=>n})}required(e){const n={};return yr.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof kl;)o=o._def.innerType;n[r]=o}}),new Es({...this._def,shape:()=>n})}keyof(){return Cw(yr.objectKeys(this.shape))}}Es.create=(t,e)=>new Es({shape:()=>t,unknownKeys:"strip",catchall:gc.create(),typeName:Tn.ZodObject,...Gn(e)});Es.strictCreate=(t,e)=>new Es({shape:()=>t,unknownKeys:"strict",catchall:gc.create(),typeName:Tn.ZodObject,...Gn(e)});Es.lazycreate=(t,e)=>new Es({shape:t,unknownKeys:"strip",catchall:gc.create(),typeName:Tn.ZodObject,...Gn(e)});class ph extends sr{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new lo(c.ctx.common.issues));return Bt(n,{code:Pt.invalid_union,unionErrors:u}),Rn}if(n.common.async)return Promise.all(r.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const f of r){const p={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new lo(f));return Bt(n,{code:Pt.invalid_union,unionErrors:c}),Rn}}get options(){return this._def.options}}ph.create=(t,e)=>new ph({options:t,typeName:Tn.ZodUnion,...Gn(e)});const dc=t=>t instanceof vh?dc(t.schema):t instanceof el?dc(t.innerType()):t instanceof xh?[t.value]:t instanceof au?t.options:t instanceof yh?yr.objectValues(t.enum):t instanceof bh?dc(t._def.innerType):t instanceof fh?[void 0]:t instanceof hh?[null]:t instanceof kl?[void 0,...dc(t.unwrap())]:t instanceof ou?[null,...dc(t.unwrap())]:t instanceof a1||t instanceof Nh?dc(t.unwrap()):t instanceof wh?dc(t._def.innerType):[];class Hm extends sr{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Kt.object)return Bt(n,{code:Pt.invalid_type,expected:Kt.object,received:n.parsedType}),Rn;const r=this.discriminator,a=n.data[r],o=this.optionsMap.get(a);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(Bt(n,{code:Pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Rn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const a=new Map;for(const o of n){const u=dc(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of u){if(a.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);a.set(c,o)}}return new Hm({typeName:Tn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...Gn(r)})}}function fv(t,e){const n=fc(t),r=fc(e);if(t===e)return{valid:!0,data:t};if(n===Kt.object&&r===Kt.object){const a=yr.objectKeys(e),o=yr.objectKeys(t).filter(c=>a.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=fv(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(n===Kt.array&&r===Kt.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=fv(u,c);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return n===Kt.date&&r===Kt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class mh extends sr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=(o,u)=>{if(uv(o)||uv(u))return Rn;const c=fv(o.value,u.value);return c.valid?((dv(o)||dv(u))&&n.dirty(),{status:n.value,value:c.data}):(Bt(r,{code:Pt.invalid_intersection_types}),Rn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}mh.create=(t,e,n)=>new mh({left:t,right:e,typeName:Tn.ZodIntersection,...Gn(n)});class Dl extends sr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Kt.array)return Bt(r,{code:Pt.invalid_type,expected:Kt.array,received:r.parsedType}),Rn;if(r.data.length<this._def.items.length)return Bt(r,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rn;!this._def.rest&&r.data.length>this._def.items.length&&(Bt(r,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Rl(r,u,r.path,c)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>pa.mergeArray(n,u)):pa.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Dl({...this._def,rest:e})}}Dl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dl({items:t,typeName:Tn.ZodTuple,rest:null,...Gn(e)})};class gh extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Kt.object)return Bt(r,{code:Pt.invalid_type,expected:Kt.object,received:r.parsedType}),Rn;const a=[],o=this._def.keyType,u=this._def.valueType;for(const c in r.data)a.push({key:o._parse(new Rl(r,c,r.path,c)),value:u._parse(new Rl(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?pa.mergeObjectAsync(n,a):pa.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof sr?new gh({keyType:e,valueType:n,typeName:Tn.ZodRecord,...Gn(r)}):new gh({keyType:Ko.create(),valueType:e,typeName:Tn.ZodRecord,...Gn(n)})}}class pm extends sr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Kt.map)return Bt(r,{code:Pt.invalid_type,expected:Kt.map,received:r.parsedType}),Rn;const a=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([c,f],p)=>({key:a._parse(new Rl(r,c,r.path,[p,"key"])),value:o._parse(new Rl(r,f,r.path,[p,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return Rn;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of u){const p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return Rn;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}}}}pm.create=(t,e,n)=>new pm({valueType:e,keyType:t,typeName:Tn.ZodMap,...Gn(n)});class Hu extends sr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Kt.set)return Bt(r,{code:Pt.invalid_type,expected:Kt.set,received:r.parsedType}),Rn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Bt(r,{code:Pt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Bt(r,{code:Pt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const m of f){if(m.status==="aborted")return Rn;m.status==="dirty"&&n.dirty(),p.add(m.value)}return{status:n.value,value:p}}const c=[...r.data.values()].map((f,p)=>o._parse(new Rl(r,f,r.path,p)));return r.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,n){return new Hu({...this._def,minSize:{value:e,message:mn.toString(n)}})}max(e,n){return new Hu({...this._def,maxSize:{value:e,message:mn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Hu.create=(t,e)=>new Hu({valueType:t,minSize:null,maxSize:null,typeName:Tn.ZodSet,...Gn(e)});class Ud extends sr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Kt.function)return Bt(n,{code:Pt.invalid_type,expected:Kt.function,received:n.parsedType}),Rn;function r(c,f){return um({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cm(),Xd].filter(p=>!!p),issueData:{code:Pt.invalid_arguments,argumentsError:f}})}function a(c,f){return um({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cm(),Xd].filter(p=>!!p),issueData:{code:Pt.invalid_return_type,returnTypeError:f}})}const o={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof ef){const c=this;return Aa(async function(...f){const p=new lo([]),m=await c._def.args.parseAsync(f,o).catch(y=>{throw p.addIssue(r(f,y)),p}),b=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(b,o).catch(y=>{throw p.addIssue(a(b,y)),p})})}else{const c=this;return Aa(function(...f){const p=c._def.args.safeParse(f,o);if(!p.success)throw new lo([r(f,p.error)]);const m=Reflect.apply(u,this,p.data),b=c._def.returns.safeParse(m,o);if(!b.success)throw new lo([a(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ud({...this._def,args:Dl.create(e).rest(Ou.create())})}returns(e){return new Ud({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ud({args:e||Dl.create([]).rest(Ou.create()),returns:n||Ou.create(),typeName:Tn.ZodFunction,...Gn(r)})}}class vh extends sr{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}vh.create=(t,e)=>new vh({getter:t,typeName:Tn.ZodLazy,...Gn(e)});class xh extends sr{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Bt(n,{received:n.data,code:Pt.invalid_literal,expected:this._def.value}),Rn}return{status:"valid",value:e.data}}get value(){return this._def.value}}xh.create=(t,e)=>new xh({value:t,typeName:Tn.ZodLiteral,...Gn(e)});function Cw(t,e){return new au({values:t,typeName:Tn.ZodEnum,...Gn(e)})}class au extends sr{constructor(){super(...arguments),Qf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Bt(n,{expected:yr.joinValues(r),received:n.parsedType,code:Pt.invalid_type}),Rn}if(dm(this,Qf)||ww(this,Qf,new Set(this._def.values)),!dm(this,Qf).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Bt(n,{received:n.data,code:Pt.invalid_enum_value,options:r}),Rn}return Aa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return au.create(e,{...this._def,...n})}exclude(e,n=this._def){return au.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Qf=new WeakMap;au.create=Cw;class yh extends sr{constructor(){super(...arguments),Zf.set(this,void 0)}_parse(e){const n=yr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Kt.string&&r.parsedType!==Kt.number){const a=yr.objectValues(n);return Bt(r,{expected:yr.joinValues(a),received:r.parsedType,code:Pt.invalid_type}),Rn}if(dm(this,Zf)||ww(this,Zf,new Set(yr.getValidEnumValues(this._def.values))),!dm(this,Zf).has(e.data)){const a=yr.objectValues(n);return Bt(r,{received:r.data,code:Pt.invalid_enum_value,options:a}),Rn}return Aa(e.data)}get enum(){return this._def.values}}Zf=new WeakMap;yh.create=(t,e)=>new yh({values:t,typeName:Tn.ZodNativeEnum,...Gn(e)});class ef extends sr{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Kt.promise&&n.common.async===!1)return Bt(n,{code:Pt.invalid_type,expected:Kt.promise,received:n.parsedType}),Rn;const r=n.parsedType===Kt.promise?n.data:Promise.resolve(n.data);return Aa(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ef.create=(t,e)=>new ef({type:t,typeName:Tn.ZodPromise,...Gn(e)});class el extends sr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Tn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{Bt(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async c=>{if(n.value==="aborted")return Rn;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?Rn:f.status==="dirty"||n.value==="dirty"?Id(f.value):f});{if(n.value==="aborted")return Rn;const c=this._def.schema._parseSync({data:u,path:r.path,parent:r});return c.status==="aborted"?Rn:c.status==="dirty"||n.value==="dirty"?Id(c.value):c}}if(a.type==="refinement"){const u=c=>{const f=a.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Rn:(c.status==="dirty"&&n.dirty(),u(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Rn:(c.status==="dirty"&&n.dirty(),u(c.value).then(()=>({status:n.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$u(u))return u;const c=a.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>$u(u)?Promise.resolve(a.transform(u.value,o)).then(c=>({status:n.value,value:c})):u);yr.assertNever(a)}}el.create=(t,e,n)=>new el({schema:t,typeName:Tn.ZodEffects,effect:e,...Gn(n)});el.createWithPreprocess=(t,e,n)=>new el({schema:e,effect:{type:"preprocess",transform:t},typeName:Tn.ZodEffects,...Gn(n)});class kl extends sr{_parse(e){return this._getType(e)===Kt.undefined?Aa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kl.create=(t,e)=>new kl({innerType:t,typeName:Tn.ZodOptional,...Gn(e)});class ou extends sr{_parse(e){return this._getType(e)===Kt.null?Aa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ou.create=(t,e)=>new ou({innerType:t,typeName:Tn.ZodNullable,...Gn(e)});class bh extends sr{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Kt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}bh.create=(t,e)=>new bh({innerType:t,typeName:Tn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Gn(e)});class wh extends sr{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return uh(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new lo(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new lo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}wh.create=(t,e)=>new wh({innerType:t,typeName:Tn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Gn(e)});class mm extends sr{_parse(e){if(this._getType(e)!==Kt.nan){const r=this._getOrReturnCtx(e);return Bt(r,{code:Pt.invalid_type,expected:Kt.nan,received:r.parsedType}),Rn}return{status:"valid",value:e.data}}}mm.create=t=>new mm({typeName:Tn.ZodNaN,...Gn(t)});const WP=Symbol("zod_brand");class a1 extends sr{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Dh extends sr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Rn:o.status==="dirty"?(n.dirty(),Id(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Rn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,n){return new Dh({in:e,out:n,typeName:Tn.ZodPipeline})}}class Nh extends sr{_parse(e){const n=this._def.innerType._parse(e),r=a=>($u(a)&&(a.value=Object.freeze(a.value)),a);return uh(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Nh.create=(t,e)=>new Nh({innerType:t,typeName:Tn.ZodReadonly,...Gn(e)});function P2(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function _w(t,e={},n){return t?Jd.create().superRefine((r,a)=>{var o,u;const c=t(r);if(c instanceof Promise)return c.then(f=>{var p,m;if(!f){const b=P2(e,r),j=(m=(p=b.fatal)!==null&&p!==void 0?p:n)!==null&&m!==void 0?m:!0;a.addIssue({code:"custom",...b,fatal:j})}});if(!c){const f=P2(e,r),p=(u=(o=f.fatal)!==null&&o!==void 0?o:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...f,fatal:p})}}):Jd.create()}const GP={object:Es.lazycreate};var Tn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Tn||(Tn={}));const KP=(t,e={message:`Input not instance of ${t.name}`})=>_w(n=>n instanceof t,e),Aw=Ko.create,Pw=su.create,QP=mm.create,ZP=iu.create,kw=dh.create,YP=Vu.create,XP=fm.create,JP=fh.create,e6=hh.create,t6=Jd.create,n6=Ou.create,r6=gc.create,s6=hm.create,i6=Qo.create,a6=Es.create,o6=Es.strictCreate,l6=ph.create,c6=Hm.create,u6=mh.create,d6=Dl.create,f6=gh.create,h6=pm.create,p6=Hu.create,m6=Ud.create,g6=vh.create,v6=xh.create,x6=au.create,y6=yh.create,b6=ef.create,k2=el.create,w6=kl.create,N6=ou.create,S6=el.createWithPreprocess,j6=Dh.create,C6=()=>Aw().optional(),_6=()=>Pw().optional(),A6=()=>kw().optional(),P6={string:(t=>Ko.create({...t,coerce:!0})),number:(t=>su.create({...t,coerce:!0})),boolean:(t=>dh.create({...t,coerce:!0})),bigint:(t=>iu.create({...t,coerce:!0})),date:(t=>Vu.create({...t,coerce:!0}))},k6=Rn;var U=Object.freeze({__proto__:null,defaultErrorMap:Xd,setErrorMap:SP,getErrorMap:cm,makeIssue:um,EMPTY_PATH:jP,addIssueToContext:Bt,ParseStatus:pa,INVALID:Rn,DIRTY:Id,OK:Aa,isAborted:uv,isDirty:dv,isValid:$u,isAsync:uh,get util(){return yr},get objectUtil(){return cv},ZodParsedType:Kt,getParsedType:fc,ZodType:sr,datetimeRegex:jw,ZodString:Ko,ZodNumber:su,ZodBigInt:iu,ZodBoolean:dh,ZodDate:Vu,ZodSymbol:fm,ZodUndefined:fh,ZodNull:hh,ZodAny:Jd,ZodUnknown:Ou,ZodNever:gc,ZodVoid:hm,ZodArray:Qo,ZodObject:Es,ZodUnion:ph,ZodDiscriminatedUnion:Hm,ZodIntersection:mh,ZodTuple:Dl,ZodRecord:gh,ZodMap:pm,ZodSet:Hu,ZodFunction:Ud,ZodLazy:vh,ZodLiteral:xh,ZodEnum:au,ZodNativeEnum:yh,ZodPromise:ef,ZodEffects:el,ZodTransformer:el,ZodOptional:kl,ZodNullable:ou,ZodDefault:bh,ZodCatch:wh,ZodNaN:mm,BRAND:WP,ZodBranded:a1,ZodPipeline:Dh,ZodReadonly:Nh,custom:_w,Schema:sr,ZodSchema:sr,late:GP,get ZodFirstPartyTypeKind(){return Tn},coerce:P6,any:t6,array:i6,bigint:ZP,boolean:kw,date:YP,discriminatedUnion:c6,effect:k2,enum:x6,function:m6,instanceof:KP,intersection:u6,lazy:g6,literal:v6,map:h6,nan:QP,nativeEnum:y6,never:r6,null:e6,nullable:N6,number:Pw,object:a6,oboolean:A6,onumber:_6,optional:w6,ostring:C6,pipeline:j6,preprocess:S6,promise:b6,record:f6,set:p6,strictObject:o6,string:Aw,symbol:XP,transformer:k2,tuple:d6,undefined:JP,union:l6,unknown:n6,void:s6,NEVER:k6,ZodIssueCode:Pt,quotelessJson:NP,ZodError:lo});const wt=Symbol.for("drizzle:entityKind");function Yi(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,wt))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(wt in n&&n[wt]===e[wt])return!0;n=Object.getPrototypeOf(n)}return!1}class Sh{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[wt]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class T6{static[wt]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const zd=Symbol.for("drizzle:Name");class E6{static[wt]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{const{name:r,columns:a,foreignColumns:o}=e();return{name:r,columns:a,foreignTable:o[0].table,foreignColumns:o}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new L6(e,this)}}class L6{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[wt]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),a=n.map(c=>c.name),o=r.map(c=>c.name),u=[this.table[zd],...a,r[0].table[zd],...o];return e??`${u.join("_")}_fk`}}function R6(t,...e){return t(...e)}function D6(t,e){return`${t[zd]}_${e.join("_")}_unique`}function T2(t,e,n){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function Tw(t,e=0){const n=[];let r=e,a=!1;for(;r<t.length;){const o=t[r];if(o===","){(a||r===e)&&n.push(""),a=!0,r++;continue}if(a=!1,o==="\\"){r+=2;continue}if(o==='"'){const[f,p]=T2(t,r+1,!0);n.push(f),r=p;continue}if(o==="}")return[n,r+1];if(o==="{"){const[f,p]=Tw(t,r+1);n.push(f),r=p;continue}const[u,c]=T2(t,r,!1);n.push(u),r=c}return[n,r]}function I6(t){const[e]=Tw(t,1);return e}function Ew(t){return`{${t.map(e=>Array.isArray(e)?Ew(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class jr extends T6{foreignKeyConfigs=[];static[wt]="PgColumnBuilder";array(e){return new O6(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:a})=>R6((o,u)=>{const c=new E6(()=>{const f=o();return{columns:[e],foreignColumns:[f]}});return u.onUpdate&&c.onUpdate(u.onUpdate),u.onDelete&&c.onDelete(u.onDelete),c.build(n)},r,a))}buildExtraConfigColumn(e){return new F6(e,this.config)}}class Jn extends Sh{constructor(e,n){n.uniqueName||(n.uniqueName=D6(e,[n.name])),super(e,n),this.table=e}static[wt]="PgColumn"}class F6 extends Jn{static[wt]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class O6 extends jr{static[wt]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new o1(e,this.config,n)}}class o1 extends Jn{constructor(e,n,r,a){super(e,n),this.baseColumn=r,this.range=a,this.size=n.size}size;static[wt]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=I6(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){const r=e.map(a=>a===null?null:Yi(this.baseColumn,o1)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return n?r:Ew(r)}}const E2=Symbol.for("drizzle:isPgEnum");function M6(t){return!!t&&typeof t=="function"&&E2 in t&&t[E2]===!0}class Lw{static[wt]="Subquery";constructor(e,n,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:a}}}const B6={startActiveSpan(t,e){return e()}},$d=Symbol.for("drizzle:ViewBaseConfig"),c0=Symbol.for("drizzle:Schema"),L2=Symbol.for("drizzle:Columns"),R2=Symbol.for("drizzle:ExtraConfigColumns"),u0=Symbol.for("drizzle:OriginalName"),d0=Symbol.for("drizzle:BaseName"),gm=Symbol.for("drizzle:IsAlias"),D2=Symbol.for("drizzle:ExtraConfigBuilder"),Rw=Symbol.for("drizzle:IsDrizzleTable");class io{static[wt]="Table";static Symbol={Name:zd,Schema:c0,OriginalName:u0,Columns:L2,ExtraConfigColumns:R2,BaseName:d0,IsAlias:gm,ExtraConfigBuilder:D2};[zd];[u0];[c0];[L2];[R2];[d0];[gm]=!1;[Rw]=!0;[D2]=void 0;constructor(e,n,r){this[zd]=this[u0]=e,this[c0]=n,this[d0]=r}}function Dw(t){return typeof t=="object"&&t!==null&&Rw in t}function q6(t){return t!=null&&typeof t.getSQL=="function"}function U6(t){const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}class Vo{static[wt]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Hs([this])}}class Hs{constructor(e){this.queryChunks=e}static[wt]="SQL";decoder=Iw;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return B6.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:u,prepareTyping:c,inlineParams:f,paramStartIndex:p}=r;return U6(e.map(m=>{if(Yi(m,Vo))return{sql:m.value.join(""),params:[]};if(Yi(m,hv))return{sql:o(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const b=[new Vo("(")];for(const[j,y]of m.entries())b.push(y),j<m.length-1&&b.push(new Vo(", "));return b.push(new Vo(")")),this.buildQueryFromSourceParams(b,r)}if(Yi(m,Hs))return this.buildQueryFromSourceParams(m.queryChunks,{...r,inlineParams:f||m.shouldInlineParams});if(Yi(m,io)){const b=m[io.Symbol.Schema],j=m[io.Symbol.Name];return{sql:b===void 0||m[gm]?o(j):o(b)+"."+o(j),params:[]}}if(Yi(m,Sh)){const b=a.getColumnCasing(m);if(n.invokeSource==="indexes")return{sql:o(b),params:[]};const j=m.table[io.Symbol.Schema];return{sql:m.table[gm]||j===void 0?o(m.table[io.Symbol.Name])+"."+o(b):o(j)+"."+o(m.table[io.Symbol.Name])+"."+o(b),params:[]}}if(Yi(m,z6)){const b=m[$d].schema,j=m[$d].name;return{sql:b===void 0||m[$d].isAlias?o(j):o(b)+"."+o(j),params:[]}}if(Yi(m,Ow)){if(Yi(m.value,pv))return{sql:u(p.value++,m),params:[m],typings:["none"]};const b=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(Yi(b,Hs))return this.buildQueryFromSourceParams([b],r);if(f)return{sql:this.mapInlineParam(b,r),params:[]};let j=["none"];return c&&(j=[c(m.encoder)]),{sql:u(p.value++,b),params:[b],typings:j}}return Yi(m,pv)?{sql:u(p.value++,m),params:[m],typings:["none"]}:Yi(m,Hs.Aliased)&&m.fieldAlias!==void 0?{sql:o(m.fieldAlias),params:[]}:Yi(m,Lw)?m._.isWith?{sql:o(m._.alias),params:[]}:this.buildQueryFromSourceParams([new Vo("("),m._.sql,new Vo(") "),new hv(m._.alias)],r):M6(m)?m.schema?{sql:o(m.schema)+"."+o(m.enumName),params:[]}:{sql:o(m.enumName),params:[]}:q6(m)?m.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([m.getSQL()],r):this.buildQueryFromSourceParams([new Vo("("),m.getSQL(),new Vo(")")],r):f?{sql:this.mapInlineParam(m,r),params:[]}:{sql:u(p.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Hs.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class hv{constructor(e){this.value=e}static[wt]="Name";brand;getSQL(){return new Hs([this])}}const Iw={mapFromDriverValue:t=>t},Fw={mapToDriverValue:t=>t};({...Iw,...Fw});class Ow{constructor(e,n=Fw){this.value=e,this.encoder=n}static[wt]="Param";brand;getSQL(){return new Hs([this])}}function vm(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new Vo(t[0]));for(const[r,a]of e.entries())n.push(a,new Vo(t[r+1]));return new Hs(n)}(t=>{function e(){return new Hs([])}t.empty=e;function n(f){return new Hs(f)}t.fromList=n;function r(f){return new Hs([new Vo(f)])}t.raw=r;function a(f,p){const m=[];for(const[b,j]of f.entries())b>0&&p!==void 0&&m.push(p),m.push(j);return new Hs(m)}t.join=a;function o(f){return new hv(f)}t.identifier=o;function u(f){return new pv(f)}t.placeholder=u;function c(f,p){return new Ow(f,p)}t.param=c})(vm||(vm={}));(t=>{class e{constructor(r,a){this.sql=r,this.fieldAlias=a}static[wt]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(Hs||(Hs={}));class pv{constructor(e){this.name=e}static[wt]="Placeholder";getSQL(){return new Hs([this])}}const Mw=Symbol.for("drizzle:IsDrizzleView");class z6{static[wt]="View";[$d];[Mw]=!0;constructor({name:e,schema:n,selectedFields:r,query:a}){this[$d]={name:e,originalName:e,schema:n,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new Hs([this])}}function $6(t){return typeof t=="object"&&t!==null&&Mw in t}Sh.prototype.getSQL=function(){return new Hs([this])};io.prototype.getSQL=function(){return new Hs([this])};Lw.prototype.getSQL=function(){return new Hs([this])};function V6(t){return t[io.Symbol.Columns]}function H6(t){return t[$d].selectedFields}function Oi(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class Wm extends jr{static[wt]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class W6 extends Wm{static[wt]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new G6(e,this.config)}}class G6 extends Jn{static[wt]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class K6 extends Wm{static[wt]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Q6(e,this.config)}}class Q6 extends Jn{static[wt]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Z6(t,e){const{name:n,config:r}=Oi(t,e);return r.mode==="number"?new W6(n):new K6(n)}class Y6 extends jr{static[wt]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new X6(e,this.config)}}class X6 extends Jn{static[wt]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class J6 extends jr{static[wt]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new ek(e,this.config)}}class ek extends Jn{static[wt]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function tk(t,e){const{name:n,config:r}=Oi(t,e);return r.mode==="number"?new Y6(n):new J6(n)}class nk extends jr{static[wt]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new rk(e,this.config)}}class rk extends Jn{static[wt]="PgBoolean";getSQLType(){return"boolean"}}function sk(t){return new nk(t??"")}class ik extends jr{static[wt]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new ak(e,this.config)}}class ak extends Jn{static[wt]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function ok(t,e={}){const{name:n,config:r}=Oi(t,e);return new ik(n,r)}class lk extends jr{static[wt]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new ck(e,this.config)}}class ck extends Jn{static[wt]="PgCidr";getSQLType(){return"cidr"}}function uk(t){return new lk(t??"")}class dk extends jr{static[wt]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new fk(e,this.config)}}class fk extends Jn{static[wt]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function hk(t){return(e,n)=>{const{name:r,config:a}=Oi(e,n);return new dk(r,a,t)}}class Ih extends jr{static[wt]="PgDateColumnBaseBuilder";defaultNow(){return this.default(vm`now()`)}}class pk extends Ih{static[wt]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new mk(e,this.config)}}class mk extends Jn{static[wt]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class gk extends Ih{static[wt]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new vk(e,this.config)}}class vk extends Jn{static[wt]="PgDateString";getSQLType(){return"date"}}function xk(t,e){const{name:n,config:r}=Oi(t,e);return r?.mode==="date"?new pk(n):new gk(n)}class yk extends jr{static[wt]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new bk(e,this.config)}}class bk extends Jn{static[wt]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function wk(t){return new yk(t??"")}class Nk extends jr{static[wt]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Sk(e,this.config)}}class Sk extends Jn{static[wt]="PgInet";getSQLType(){return"inet"}}function jk(t){return new Nk(t??"")}class Ck extends Wm{static[wt]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new _k(e,this.config)}}class _k extends Jn{static[wt]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function as(t){return new Ck(t??"")}class Ak extends jr{static[wt]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Pk(e,this.config)}}class Pk extends Jn{static[wt]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}}function kk(t,e={}){const{name:n,config:r}=Oi(t,e);return new Ak(n,r)}class Tk extends jr{static[wt]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Ek(e,this.config)}}class Ek extends Jn{static[wt]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Lk(t){return new Tk(t??"")}class Rk extends jr{static[wt]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Dk(e,this.config)}}class Dk extends Jn{static[wt]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Ik(t){return new Rk(t??"")}class Fk extends jr{static[wt]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Ok(e,this.config)}}class Ok extends Jn{static[wt]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class Mk extends jr{static[wt]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Bk(e,this.config)}}class Bk extends Jn{static[wt]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function qk(t,e){const{name:n,config:r}=Oi(t,e);return!r?.mode||r.mode==="tuple"?new Fk(n):new Mk(n)}class Uk extends jr{static[wt]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new zk(e,this.config)}}class zk extends Jn{static[wt]="PgMacaddr";getSQLType(){return"macaddr"}}function $k(t){return new Uk(t??"")}class Vk extends jr{static[wt]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Hk(e,this.config)}}class Hk extends Jn{static[wt]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Wk(t){return new Vk(t??"")}class Gk extends jr{static[wt]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new Kk(e,this.config)}}class Kk extends Jn{static[wt]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function Bw(t,e){const{name:n,config:r}=Oi(t,e);return new Gk(n,r?.precision,r?.scale)}const gr=Bw;class Qk extends jr{static[wt]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Zk(e,this.config)}}class Zk extends Jn{static[wt]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class Yk extends jr{static[wt]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Xk(e,this.config)}}class Xk extends Jn{static[wt]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Jk(t,e){const{name:n,config:r}=Oi(t,e);return!r?.mode||r.mode==="tuple"?new Qk(n):new Yk(n)}function eT(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function I2(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function qw(t){const e=eT(t);let n=0;const r=e[n];n+=1;const a=new DataView(e.buffer),o=a.getUint32(n,r===1);if(n+=4,o&536870912&&(a.getUint32(n,r===1),n+=4),(o&65535)===1){const u=I2(e,n);n+=8;const c=I2(e,n);return n+=8,[u,c]}throw new Error("Unsupported geometry type")}class tT extends jr{static[wt]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new nT(e,this.config)}}class nT extends Jn{static[wt]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return qw(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class rT extends jr{static[wt]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new sT(e,this.config)}}class sT extends Jn{static[wt]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=qw(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function iT(t,e){const{name:n,config:r}=Oi(t,e);return!r?.mode||r.mode==="tuple"?new tT(n):new rT(n)}class aT extends jr{static[wt]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new oT(e,this.config)}}class oT extends Jn{static[wt]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function lT(t){return new aT(t??"")}class cT extends jr{static[wt]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new uT(e,this.config)}}class uT extends Jn{static[wt]="PgSerial";getSQLType(){return"serial"}}function ma(t){return new cT(t??"")}class dT extends Wm{static[wt]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new fT(e,this.config)}}class fT extends Jn{static[wt]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function hT(t){return new dT(t??"")}class pT extends jr{static[wt]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new mT(e,this.config)}}class mT extends Jn{static[wt]="PgSmallSerial";getSQLType(){return"smallserial"}}function gT(t){return new pT(t??"")}class vT extends jr{static[wt]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new xT(e,this.config)}}class xT extends Jn{static[wt]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function gt(t,e={}){const{name:n,config:r}=Oi(t,e);return new vT(n,r)}class yT extends Ih{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[wt]="PgTimeBuilder";build(e){return new bT(e,this.config)}}class bT extends Jn{static[wt]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function wT(t,e={}){const{name:n,config:r}=Oi(t,e);return new yT(n,r.withTimezone??!1,r.precision)}class NT extends Ih{static[wt]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new ST(e,this.config)}}class ST extends Jn{static[wt]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class jT extends Ih{static[wt]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new CT(e,this.config)}}class CT extends Jn{static[wt]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Ol(t,e={}){const{name:n,config:r}=Oi(t,e);return r?.mode==="string"?new jT(n,r.withTimezone??!1,r.precision):new NT(n,r?.withTimezone??!1,r?.precision)}class _T extends jr{static[wt]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(vm`gen_random_uuid()`)}build(e){return new AT(e,this.config)}}class AT extends Jn{static[wt]="PgUUID";getSQLType(){return"uuid"}}function PT(t){return new _T(t??"")}class kT extends jr{static[wt]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new TT(e,this.config)}}class TT extends Jn{static[wt]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function ET(t,e={}){const{name:n,config:r}=Oi(t,e);return new kT(n,r)}class LT extends jr{static[wt]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new RT(e,this.config)}}class RT extends Jn{static[wt]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function DT(t,e){const{name:n,config:r}=Oi(t,e);return new LT(n,r)}class IT extends jr{static[wt]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new FT(e,this.config)}}class FT extends Jn{static[wt]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function OT(t,e){const{name:n,config:r}=Oi(t,e);return new IT(n,r)}class MT extends jr{static[wt]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new BT(e,this.config)}}class BT extends Jn{static[wt]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function qT(t,e){const{name:n,config:r}=Oi(t,e);return new MT(n,r)}class UT extends jr{static[wt]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new zT(e,this.config)}}class zT extends Jn{static[wt]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function $T(t,e){const{name:n,config:r}=Oi(t,e);return new UT(n,r)}function VT(){return{bigint:Z6,bigserial:tk,boolean:sk,char:ok,cidr:uk,customType:hk,date:xk,doublePrecision:wk,inet:jk,integer:as,interval:kk,json:Lk,jsonb:Ik,line:qk,macaddr:$k,macaddr8:Wk,numeric:Bw,point:Jk,geometry:iT,real:lT,serial:ma,smallint:hT,smallserial:gT,text:gt,time:wT,timestamp:Ol,uuid:PT,varchar:ET,bit:DT,halfvec:OT,sparsevec:qT,vector:$T}}const mv=Symbol.for("drizzle:PgInlineForeignKeys"),F2=Symbol.for("drizzle:EnableRLS");class O2 extends io{static[wt]="PgTable";static Symbol=Object.assign({},io.Symbol,{InlineForeignKeys:mv,EnableRLS:F2});[mv]=[];[F2]=!1;[io.Symbol.ExtraConfigBuilder]=void 0}function HT(t,e,n,r,a=t){const o=new O2(t,r,a),u=typeof e=="function"?e(VT()):e,c=Object.fromEntries(Object.entries(u).map(([m,b])=>{const j=b;j.setName(m);const y=j.build(o);return o[mv].push(...j.buildForeignKeys(y,o)),[m,y]})),f=Object.fromEntries(Object.entries(u).map(([m,b])=>{const j=b;j.setName(m);const y=j.buildExtraConfigColumn(o);return[m,y]})),p=Object.assign(o,c);return p[io.Symbol.Columns]=c,p[io.Symbol.ExtraConfigColumns]=f,Object.assign(p,{enableRLS:()=>(p[O2.Symbol.EnableRLS]=!0,p)})}const Pa=(t,e,n)=>HT(t,e,n,void 0),Ts={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Ys(t,e){return e.includes(t.columnType)}function WT(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const GT=U.union([U.string(),U.number(),U.boolean(),U.null()]),KT=U.union([GT,U.record(U.any()),U.array(U.any())]),QT=U.custom(t=>t instanceof Buffer);function Uw(t,e){const n=e?.zodInstance??U,r=e?.coerce??{};let a;return WT(t)&&(a=t.enumValues.length?n.enum(t.enumValues):n.string()),a||(Ys(t,["PgGeometry","PgPointTuple"])?a=n.tuple([n.number(),n.number()]):Ys(t,["PgGeometryObject","PgPointObject"])?a=n.object({x:n.number(),y:n.number()}):Ys(t,["PgHalfVector","PgVector"])?(a=n.array(n.number()),a=t.dimensions?a.length(t.dimensions):a):Ys(t,["PgLine"])?a=n.tuple([n.number(),n.number(),n.number()]):Ys(t,["PgLineABC"])?a=n.object({a:n.number(),b:n.number(),c:n.number()}):Ys(t,["PgArray"])?(a=n.array(Uw(t.baseColumn,n)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=n.array(n.any()):t.dataType==="number"?a=ZT(t,n,r):t.dataType==="bigint"?a=YT(t,n,r):t.dataType==="boolean"?a=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?a=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?a=XT(t,n,r):t.dataType==="json"?a=KT:t.dataType==="custom"?a=n.any():t.dataType==="buffer"&&(a=QT)),a||(a=n.any()),a}function ZT(t,e,n){let r=t.getSQLType().includes("unsigned"),a,o,u=!1;Ys(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:Ts.INT8_MIN,o=r?Ts.INT8_UNSIGNED_MAX:Ts.INT8_MAX,u=!0):Ys(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:Ts.INT16_MIN,o=r?Ts.INT16_UNSIGNED_MAX:Ts.INT16_MAX,u=!0):Ys(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:Ts.INT24_MIN,o=r?Ts.INT24_UNSIGNED_MAX:Ts.INT24_MAX,u=Ys(t,["MySqlMediumInt","SingleStoreMediumInt"])):Ys(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:Ts.INT32_MIN,o=r?Ts.INT32_UNSIGNED_MAX:Ts.INT32_MAX,u=!0):Ys(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:Ts.INT48_MIN,o=r?Ts.INT48_UNSIGNED_MAX:Ts.INT48_MAX):Ys(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||Ys(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,u=!0):Ys(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,u=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let c=n===!0||n?.number?e.coerce.number():e.number();return c=c.min(a).max(o),u?c.int():c}function YT(t,e,n){const r=t.getSQLType().includes("unsigned"),a=r?0n:Ts.INT64_MIN,o=r?Ts.INT64_UNSIGNED_MAX:Ts.INT64_MAX;return(n===!0||n?.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function XT(t,e,n){if(Ys(t,["PgUUID"]))return e.string().uuid();let r,a,o=!1;Ys(t,["PgVarchar","SQLiteText"])?r=t.length:Ys(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??Ts.INT16_UNSIGNED_MAX:Ys(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=Ts.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=Ts.INT24_UNSIGNED_MAX:t.textType==="text"?r=Ts.INT16_UNSIGNED_MAX:r=Ts.INT8_UNSIGNED_MAX),Ys(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,o=!0),Ys(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let u=n===!0||n?.string?e.coerce.string():e.string();return u=a?u.regex(a):u,r&&o?u.length(r):r?u.max(r):u}function zw(t){return Dw(t)?V6(t):H6(t)}function $w(t,e,n,r){const a={};for(const[o,u]of Object.entries(t)){if(!Yi(u,Sh)&&!Yi(u,Hs)&&!Yi(u,Hs.Aliased)&&typeof u=="object"){const b=Dw(u)||$6(u)?zw(u):u;a[o]=$w(b,e[o]??{},n,r);continue}const c=e[o];if(c!==void 0&&typeof c!="function"){a[o]=c;continue}const f=Yi(u,Sh)?u:void 0,p=f?Uw(f,r):U.any(),m=typeof c=="function"?c(p):p;n.never(f)||(a[o]=m,f&&(n.nullable(f)&&(a[o]=a[o].nullable()),n.optional(f)&&(a[o]=a[o].optional())))}return U.object(a)}const JT={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},ka=(t,e)=>{const n=zw(t);return $w(n,{},JT)},jh=["Standard","Administrator"],Vw=Pa("users",{id:ma("id").primaryKey(),username:gt("username").notNull().unique(),password:gt("password").notNull(),name:gt("name").notNull().default("Admin"),email:gt("email"),mobile:gt("mobile"),role:gt("role").notNull().default("Standard"),createdAt:Ol("created_at").notNull().defaultNow()}),eE=Pa("user_client_assignments",{id:ma("id").primaryKey(),userId:as("user_id").notNull().references(()=>Vw.id),clientId:as("client_id").notNull().references(()=>l1.id)}),l1=Pa("clients",{id:ma("id").primaryKey(),name:gt("name").notNull(),location:gt("location").notNull(),gstNo:gt("gst_no").notNull(),contactPerson:gt("contact_person").notNull(),mobileNumber:gt("mobile_number").notNull(),emailAddress:gt("email_address").notNull()}),xm=["Supply and Fabrication","Structural Fabrication","Job Work"],Yu=Pa("projects",{id:ma("id").primaryKey(),projectName:gt("project_name").notNull(),clientId:as("client_id").notNull().references(()=>l1.id),location:gt("location").notNull(),quotationType:gt("quotation_type").notNull(),createdAt:Ol("created_at").notNull().defaultNow()}),Hw=Pa("quotations",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),quotationNumber:gt("quotation_number").notNull(),revision:gt("revision").notNull().default("R-000"),version:as("version").notNull().default(1),parentQuotationId:as("parent_quotation_id"),enquiryNumber:gt("enquiry_number").notNull(),subject:gt("subject").notNull(),contactName:gt("contact_name").notNull(),contactMobile:gt("contact_mobile").notNull(),contactEmail:gt("contact_email").notNull(),buildingDescription:gt("building_description"),buildingArea:gt("building_area"),frameType:gt("frame_type"),length:gt("length"),width:gt("width"),clearHeight:gt("clear_height"),roofSlope:gt("roof_slope"),paymentTerms:gt("payment_terms"),notes:gt("notes"),contentSections:gt("content_sections"),createdAt:Ol("created_at").notNull().defaultNow()}),tE=Pa("quotation_items",{id:ma("id").primaryKey(),quotationId:as("quotation_id").notNull().references(()=>Hw.id),serialNo:as("serial_no").notNull(),description:gt("description").notNull(),unit:gt("unit").notNull(),quantity:gr("quantity",{precision:10,scale:2}).notNull(),rate:gr("rate",{precision:12,scale:2}).notNull(),amount:gr("amount",{precision:14,scale:2}).notNull(),remarks:gt("remarks")}),Ww=Pa("invoices",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),invoiceNumber:gt("invoice_number").notNull(),revision:gt("revision").notNull().default("R-001"),version:as("version").notNull().default(1),parentInvoiceId:as("parent_invoice_id"),organisationName:gt("organisation_name").notNull(),registeredAddress:gt("registered_address").notNull(),consigneeAddress:gt("consignee_address").notNull(),clientGstin:gt("client_gstin"),workOrderNo:gt("work_order_no"),dispatchDetails:gt("dispatch_details"),cgstRate:gr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:gt("applied_tax_type").default("igst"),totalAmount:gr("total_amount",{precision:14,scale:2}).default("0"),totalTax:gr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gr("grand_total",{precision:14,scale:2}).default("0"),contentSections:gt("content_sections"),createdAt:Ol("created_at").notNull().defaultNow()}),nE=Pa("invoice_items",{id:ma("id").primaryKey(),invoiceId:as("invoice_id").notNull().references(()=>Ww.id),serialNo:as("serial_no").notNull(),description:gt("description").notNull(),hsnCode:gt("hsn_code"),quantity:gr("quantity",{precision:10,scale:3}).notNull(),unit:gt("unit").default("LS"),ratePerUnit:gr("rate_per_unit",{precision:12,scale:2}),percentage:gr("percentage",{precision:5,scale:2}),amount:gr("amount",{precision:14,scale:2}).notNull(),remarks:gt("remarks")}),Gw=Pa("gate_passes",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),gatePassNumber:gt("gate_pass_number").notNull(),revision:gt("revision").notNull().default("R-001"),version:as("version").notNull().default(1),parentGatePassId:as("parent_gate_pass_id"),organisationName:gt("organisation_name").notNull(),registeredAddress:gt("registered_address").notNull(),consigneeAddress:gt("consignee_address").notNull(),clientGstin:gt("client_gstin"),workOrderNo:gt("work_order_no"),dispatchDetails:gt("dispatch_details"),cgstRate:gr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:gt("applied_tax_type").default("igst"),totalAmount:gr("total_amount",{precision:14,scale:2}).default("0"),totalTax:gr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gr("grand_total",{precision:14,scale:2}).default("0"),contentSections:gt("content_sections"),createdAt:Ol("created_at").notNull().defaultNow()}),rE=Pa("gate_pass_items",{id:ma("id").primaryKey(),gatePassId:as("gate_pass_id").notNull().references(()=>Gw.id),serialNo:as("serial_no").notNull(),description:gt("description").notNull(),hsnCode:gt("hsn_code"),quantity:gr("quantity",{precision:10,scale:3}).notNull(),unit:gt("unit").default("LS"),ratePerUnit:gr("rate_per_unit",{precision:12,scale:2}),percentage:gr("percentage",{precision:5,scale:2}),amount:gr("amount",{precision:14,scale:2}).notNull(),remarks:gt("remarks")}),Kw=Pa("delivery_challans",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),deliveryChallanNumber:gt("delivery_challan_number").notNull(),revision:gt("revision").notNull().default("R-001"),version:as("version").notNull().default(1),parentDeliveryChallanId:as("parent_delivery_challan_id"),organisationName:gt("organisation_name").notNull(),registeredAddress:gt("registered_address").notNull(),consigneeAddress:gt("consignee_address").notNull(),clientGstin:gt("client_gstin"),workOrderNo:gt("work_order_no"),dispatchDetails:gt("dispatch_details"),cgstRate:gr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:gr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:gr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:gt("applied_tax_type").default("igst"),totalAmount:gr("total_amount",{precision:14,scale:2}).default("0"),totalTax:gr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:gr("grand_total",{precision:14,scale:2}).default("0"),contentSections:gt("content_sections"),createdAt:Ol("created_at").notNull().defaultNow()}),sE=Pa("delivery_challan_items",{id:ma("id").primaryKey(),deliveryChallanId:as("delivery_challan_id").notNull().references(()=>Kw.id),serialNo:as("serial_no").notNull(),description:gt("description").notNull(),hsnCode:gt("hsn_code"),quantity:gr("quantity",{precision:10,scale:3}).notNull(),unit:gt("unit").default("LS"),ratePerUnit:gr("rate_per_unit",{precision:12,scale:2}),percentage:gr("percentage",{precision:5,scale:2}),amount:gr("amount",{precision:14,scale:2}).notNull(),remarks:gt("remarks")}),iE=Pa("project_ledger_budgets",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),projectValue:gr("project_value",{precision:14,scale:2}).notNull().default("0"),updatedAt:Ol("updated_at").notNull().defaultNow()}),aE=Pa("project_ledger_entries",{id:ma("id").primaryKey(),projectId:as("project_id").notNull().references(()=>Yu.id),entryDate:gt("entry_date").notNull(),entryType:gt("entry_type").notNull(),category:gt("category").notNull(),description:gt("description").notNull(),amount:gr("amount",{precision:14,scale:2}).notNull(),paymentMode:gt("payment_mode").notNull(),remarks:gt("remarks"),reference:gt("reference"),receivedAgainst:gt("received_against"),chequeNumber:gt("cheque_number"),bankName:gt("bank_name"),chequeDate:gt("cheque_date"),utrNumber:gt("utr_number"),attachmentUrl:gt("attachment_url"),createdAt:Ol("created_at").notNull().defaultNow()}),oE=Pa("branding",{id:ma("id").primaryKey(),logoUrl:gt("logo_url").notNull().default("https://reviranexgen.com/assets/logo-with-name.png"),headerUrl:gt("header_url").notNull().default("https://reviranexgen.com/assets/header.jpg"),footerUrl:gt("footer_url").notNull().default("https://reviranexgen.com/assets/footer.jpg"),stampUrl:gt("stamp_url").notNull().default("https://reviranexgen.com/assets/stamp.png"),storeKeeperSignUrl:gt("store_keeper_sign_url").notNull().default(""),qcEnggSignUrl:gt("qc_engg_sign_url").notNull().default(""),storeInchargeSignUrl:gt("store_incharge_sign_url").notNull().default(""),plantHeadSignUrl:gt("plant_head_sign_url").notNull().default(""),primaryColor:gt("primary_color").notNull().default("#da2032"),secondaryColor:gt("secondary_color").notNull().default("#2f3591"),entityName:gt("entity_name").notNull().default("Revira NexGen Structure Pvt. Ltd."),cin:gt("cin").notNull().default("U16222DL2025PTC459465"),companyGstin:gt("company_gstin").notNull().default("07AAPCR3026H1ZA"),website:gt("website").notNull().default("www.reviranexgen.com"),email:gt("email").notNull().default("info@reviranexgen.com"),headOfficeAddress:gt("head_office_address").notNull().default("28, E2 Block, Shivram Park Nangloi Delhi - 110041"),workshopAddress:gt("workshop_address").notNull().default("Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"),updatedAt:Ol("updated_at").notNull().defaultNow()});ka(Vw).omit({id:!0,createdAt:!0});ka(l1);ka(Yu).omit({id:!0,createdAt:!0});ka(Hw).omit({id:!0,createdAt:!0});ka(tE).omit({id:!0});ka(Ww).omit({id:!0,createdAt:!0});ka(nE).omit({id:!0});ka(Gw).omit({id:!0,createdAt:!0});ka(rE).omit({id:!0});ka(Kw).omit({id:!0,createdAt:!0});ka(sE).omit({id:!0});ka(iE).omit({id:!0,updatedAt:!0});ka(aE).omit({id:!0,createdAt:!0});const lE=ka(oE).omit({id:!0,updatedAt:!0});ka(eE).omit({id:!0});U.object({message:U.string()}),U.object({message:U.string()}),U.object({message:U.string()}),U.object({message:U.string()});const So={auth:{login:{method:"POST",path:"/revira/api/login",input:U.object({username:U.string().email("Please enter a valid email address"),password:U.string().min(1,"Password is required")}),responses:{200:U.custom()}},logout:{method:"POST",path:"/revira/api/logout",responses:{200:U.void()}},me:{path:"/revira/api/user",responses:{200:U.custom()}}},clients:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({name:U.string().min(1,"Client name is required"),location:U.string().min(1,"Location is required"),gstNo:U.string().optional(),contactPerson:U.string().optional(),mobileNumber:U.string().optional(),emailAddress:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({name:U.string().min(1).optional(),location:U.string().min(1).optional(),gstNo:U.string().optional(),contactPerson:U.string().optional(),mobileNumber:U.string().optional(),emailAddress:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},projects:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({projectName:U.string().min(1,"Project name is required"),clientId:U.number().min(1,"Client selection is required"),location:U.string().min(1,"Location is required"),quotationType:U.enum(xm,{errorMap:()=>({message:"Quotation type is required"})})}),responses:{201:U.custom()}},update:{input:U.object({projectName:U.string().min(1).optional(),clientId:U.number().min(1).optional(),location:U.string().min(1).optional(),quotationType:U.enum(xm).optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},quotations:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),quotationNumber:U.string().min(1),revision:U.string().default("R-000"),enquiryNumber:U.string().min(1),subject:U.string().min(1),contactName:U.string().min(1),contactMobile:U.string().min(1),contactEmail:U.string().email(),buildingDescription:U.string().optional(),buildingArea:U.string().optional(),frameType:U.string().optional(),length:U.string().optional(),width:U.string().optional(),clearHeight:U.string().optional(),roofSlope:U.string().optional(),paymentTerms:U.string().optional(),notes:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({quotationNumber:U.string().min(1).optional(),revision:U.string().optional(),enquiryNumber:U.string().min(1).optional(),subject:U.string().min(1).optional(),contactName:U.string().min(1).optional(),contactMobile:U.string().min(1).optional(),contactEmail:U.string().email().optional(),buildingDescription:U.string().optional(),buildingArea:U.string().optional(),frameType:U.string().optional(),length:U.string().optional(),width:U.string().optional(),clearHeight:U.string().optional(),roofSlope:U.string().optional(),paymentTerms:U.string().optional(),notes:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},quotationItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),unit:U.string().min(1),quantity:U.string(),rate:U.string(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),unit:U.string().min(1).optional(),quantity:U.string().optional(),rate:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},branding:{get:{responses:{200:U.custom()}},update:{input:U.object({logoUrl:U.string().optional(),headerUrl:U.string().optional(),footerUrl:U.string().optional(),stampUrl:U.string().optional(),storeKeeperSignUrl:U.string().optional(),qcEnggSignUrl:U.string().optional(),storeInchargeSignUrl:U.string().optional(),plantHeadSignUrl:U.string().optional(),primaryColor:U.string().optional(),secondaryColor:U.string().optional(),entityName:U.string().optional(),cin:U.string().optional(),companyGstin:U.string().optional(),website:U.string().optional(),email:U.string().optional(),headOfficeAddress:U.string().optional(),workshopAddress:U.string().optional()}),responses:{200:U.custom()}}},invoices:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),invoiceNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({invoiceNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},invoiceItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},gatePasses:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),gatePassNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({gatePassNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},gatePassItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},deliveryChallans:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},getByProject:{responses:{200:U.custom()}},create:{input:U.object({projectId:U.number().min(1),deliveryChallanNumber:U.string().min(1),revision:U.string().default("R-001"),organisationName:U.string().min(1),registeredAddress:U.string().min(1),consigneeAddress:U.string().min(1),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({deliveryChallanNumber:U.string().min(1).optional(),revision:U.string().optional(),organisationName:U.string().min(1).optional(),registeredAddress:U.string().min(1).optional(),consigneeAddress:U.string().min(1).optional(),clientGstin:U.string().optional(),workOrderNo:U.string().optional(),dispatchDetails:U.string().optional(),cgstRate:U.string().optional(),sgstRate:U.string().optional(),igstRate:U.string().optional(),appliedTaxType:U.string().optional(),totalAmount:U.string().optional(),totalTax:U.string().optional(),grandTotal:U.string().optional(),contentSections:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},deliveryChallanItems:{list:{responses:{200:U.array(U.custom())}},create:{input:U.object({serialNo:U.number().min(1),description:U.string().min(1),hsnCode:U.string().optional(),quantity:U.string(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string(),remarks:U.string().optional()}),responses:{201:U.custom()}},update:{input:U.object({serialNo:U.number().min(1).optional(),description:U.string().min(1).optional(),hsnCode:U.string().optional(),quantity:U.string().optional(),unit:U.string().optional(),ratePerUnit:U.string().optional(),percentage:U.string().optional(),amount:U.string().optional(),remarks:U.string().optional()}),responses:{200:U.custom()}},delete:{responses:{204:U.void()}}},ledger:{getBudget:{responses:{200:U.custom().nullable()}},upsertBudget:{input:U.object({projectValue:U.string()}),responses:{200:U.custom()}},listEntries:{responses:{200:U.array(U.custom())}},createEntry:{input:U.object({entryDate:U.string().min(1),entryType:U.enum(["expense","receipt"]),category:U.string().min(1),description:U.string().min(1),amount:U.string(),paymentMode:U.string().min(1),remarks:U.string().optional(),reference:U.string().optional(),receivedAgainst:U.string().optional(),chequeNumber:U.string().optional(),bankName:U.string().optional(),chequeDate:U.string().optional(),utrNumber:U.string().optional(),attachmentUrl:U.string().optional()}),responses:{201:U.custom()}},updateEntry:{input:U.object({entryDate:U.string().optional(),entryType:U.enum(["expense","receipt"]).optional(),category:U.string().optional(),description:U.string().optional(),amount:U.string().optional(),paymentMode:U.string().optional(),remarks:U.string().optional(),reference:U.string().optional(),receivedAgainst:U.string().optional(),chequeNumber:U.string().optional(),bankName:U.string().optional(),chequeDate:U.string().optional(),utrNumber:U.string().optional(),attachmentUrl:U.string().optional()}),responses:{200:U.custom()}},deleteEntry:{responses:{204:U.void()}}},users:{list:{responses:{200:U.array(U.custom())}},get:{responses:{200:U.custom()}},create:{input:U.object({username:U.string().email("Please enter a valid email address"),password:U.string().min(6,"Password must be at least 6 characters"),name:U.string().min(1,"Name is required"),email:U.string().email("Please enter a valid email address").optional(),mobile:U.string().min(10,"Valid mobile number is required").optional(),role:U.enum(jh,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:U.array(U.number()).optional()}),responses:{201:U.custom(),403:U.object({message:U.string()})}},update:{input:U.object({username:U.string().email().optional(),password:U.string().min(6).optional(),name:U.string().min(1).optional(),email:U.string().email().optional(),mobile:U.string().min(10).optional(),role:U.enum(jh).optional(),assignedClientIds:U.array(U.number()).optional()}),responses:{200:U.custom(),403:U.object({message:U.string()})}},delete:{responses:{204:U.void(),403:U.object({message:U.string()})}},getClientAssignments:{responses:{200:U.array(U.number())}}}};function Ta(){return Ln({queryKey:[So.auth.me.path],queryFn:async()=>{const t=await fetch(So.auth.me.path,{credentials:"include"});if(t.status===401)return null;if(!t.ok)throw new Error("Failed to fetch user");return So.auth.me.responses[200].parse(await t.json())},retry:(t,e)=>e?.message?.includes("401")?!1:t<3})}function cE(){const t=Lm(),[,e]=za(),{toast:n}=$a();return Tr({mutationFn:async r=>{const a=So.auth.login.input.parse(r),o=await fetch(So.auth.login.path,{method:So.auth.login.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!o.ok)throw o.status===401?new Error("Invalid email or password"):new Error("Login failed");return So.auth.login.responses[200].parse(await o.json())},onSuccess:r=>{t.setQueryData([So.auth.me.path],r),n({title:"Welcome back!",description:`Successfully logged in as ${r.name}`}),e("/revira/dashboard")},onError:r=>{n({variant:"destructive",title:"Login Failed",description:r.message})}})}function uE(){const t=Lm(),[,e]=za(),{toast:n}=$a();return Tr({mutationFn:async()=>{if(!(await fetch(So.auth.logout.path,{method:So.auth.logout.method,credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{t.setQueryData([So.auth.me.path],null),e("/revira"),n({title:"Logged out",description:"You have been successfully logged out."})}})}const Qw=k.createContext({branding:null,isLoading:!0});function dE(){return k.useContext(Qw)}function M2(t){t=t.replace("#","");const e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255,a=Math.max(e,n,r),o=Math.min(e,n,r);let u=0,c=0;const f=(a+o)/2;if(a!==o){const p=a-o;switch(c=f>.5?p/(2-a-o):p/(a+o),a){case e:u=((n-r)/p+(n<r?6:0))/6;break;case n:u=((r-e)/p+2)/6;break;case r:u=((e-n)/p+4)/6;break}}return`${Math.round(u*360)} ${Math.round(c*100)}% ${Math.round(f*100)}%`}function fE({children:t}){const{data:e}=Ta(),{data:n,isLoading:r}=Ln({queryKey:["/revira/api/branding"],staleTime:300*1e3,enabled:!!e,refetchOnMount:!0,refetchOnWindowFocus:!1});return k.useEffect(()=>{if(n){const a=document.documentElement;if(n.primaryColor){const o=M2(n.primaryColor);a.style.setProperty("--primary",o),a.style.setProperty("--ring",o)}if(n.secondaryColor){const o=M2(n.secondaryColor);a.style.setProperty("--secondary",o)}}},[n]),i.jsx(Qw.Provider,{value:{branding:n||null,isLoading:r},children:t})}var Fh=t=>t.type==="checkbox",Fu=t=>t instanceof Date,Ca=t=>t==null;const Zw=t=>typeof t=="object";var ni=t=>!Ca(t)&&!Array.isArray(t)&&Zw(t)&&!Fu(t),Yw=t=>ni(t)&&t.target?Fh(t.target)?t.target.checked:t.target.value:t,hE=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Xw=(t,e)=>t.has(hE(e)),pE=t=>{const e=t.constructor&&t.constructor.prototype;return ni(e)&&e.hasOwnProperty("isPrototypeOf")},c1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Zi(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(c1&&(t instanceof Blob||r))&&(n||ni(t)))if(e=n?[]:{},!n&&!pE(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Zi(t[a]));else return t;return e}var Gm=t=>Array.isArray(t)?t.filter(Boolean):[],Xs=t=>t===void 0,Ot=(t,e,n)=>{if(!e||!ni(t))return n;const r=Gm(e.split(/[,[\].]+?/)).reduce((a,o)=>Ca(a)?a:a[o],t);return Xs(r)||r===t?Xs(t[e])?n:t[e]:r},ro=t=>typeof t=="boolean",u1=t=>/^\w*$/.test(t),Jw=t=>Gm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ur=(t,e,n)=>{let r=-1;const a=u1(e)?[e]:Jw(e),o=a.length,u=o-1;for(;++r<o;){const c=a[r];let f=n;if(r!==u){const p=t[c];f=ni(p)||Array.isArray(p)?p:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=f,t=t[c]}};const ym={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Wo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},lc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eN=xn.createContext(null),Km=()=>xn.useContext(eN),mE=t=>{const{children:e,...n}=t;return xn.createElement(eN.Provider,{value:n},e)};var tN=(t,e,n,r=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==Wo.all&&(e._proxyFormState[u]=!r||Wo.all),n&&(n[u]=!0),t[u]}});return a};function gE(t){const e=Km(),{control:n=e.control,disabled:r,name:a,exact:o}=t||{},[u,c]=xn.useState(n._formState),f=xn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=xn.useRef(a);return p.current=a,xn.useEffect(()=>n._subscribe({name:p.current,formState:f.current,exact:o,callback:m=>{!r&&c({...n._formState,...m})}}),[n,r,o]),xn.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),xn.useMemo(()=>tN(u,n,f.current,!1),[u,n])}var _l=t=>typeof t=="string",nN=(t,e,n,r,a)=>_l(t)?(r&&e.watch.add(t),Ot(n,t,a)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),Ot(n,o))):(r&&(e.watchAll=!0),n);function vE(t){const e=Km(),{control:n=e.control,name:r,defaultValue:a,disabled:o,exact:u}=t||{},c=xn.useRef(r),f=xn.useRef(a);c.current=r,xn.useEffect(()=>n._subscribe({name:c.current,formState:{values:!0},exact:u,callback:b=>!o&&m(nN(c.current,n._names,b.values||n._formValues,!1,f.current))}),[n,o,u]);const[p,m]=xn.useState(n._getWatch(r,a));return xn.useEffect(()=>n._removeUnmounted()),p}function xE(t){const e=Km(),{name:n,disabled:r,control:a=e.control,shouldUnregister:o}=t,u=Xw(a._names.array,n),c=vE({control:a,name:n,defaultValue:Ot(a._formValues,n,Ot(a._defaultValues,n,t.defaultValue)),exact:!0}),f=gE({control:a,name:n,exact:!0}),p=xn.useRef(t),m=xn.useRef(a.register(n,{...t.rules,value:c,...ro(t.disabled)?{disabled:t.disabled}:{}})),b=xn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ot(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ot(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ot(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ot(f.validatingFields,n)},error:{enumerable:!0,get:()=>Ot(f.errors,n)}}),[f,n]),j=xn.useCallback(P=>m.current.onChange({target:{value:Yw(P),name:n},type:ym.CHANGE}),[n]),y=xn.useCallback(()=>m.current.onBlur({target:{value:Ot(a._formValues,n),name:n},type:ym.BLUR}),[n,a._formValues]),D=xn.useCallback(P=>{const _=Ot(a._fields,n);_&&P&&(_._f.ref={focus:()=>P.focus(),select:()=>P.select(),setCustomValidity:I=>P.setCustomValidity(I),reportValidity:()=>P.reportValidity()})},[a._fields,n]),S=xn.useMemo(()=>({name:n,value:c,...ro(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:j,onBlur:y,ref:D}),[n,r,f.disabled,j,y,D,c]);return xn.useEffect(()=>{const P=a._options.shouldUnregister||o;a.register(n,{...p.current.rules,...ro(p.current.disabled)?{disabled:p.current.disabled}:{}});const _=(I,v)=>{const B=Ot(a._fields,I);B&&B._f&&(B._f.mount=v)};if(_(n,!0),P){const I=Zi(Ot(a._options.defaultValues,n));Ur(a._defaultValues,n,I),Xs(Ot(a._formValues,n))&&Ur(a._formValues,n,I)}return!u&&a.register(n),()=>{(u?P&&!a._state.action:P)?a.unregister(n):_(n,!1)}},[n,a,u,o]),xn.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),xn.useMemo(()=>({field:S,formState:f,fieldState:b}),[S,f,b])}const yE=t=>t.render(xE(t));var rN=(t,e,n,r,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:a||!0}}:{},eh=t=>Array.isArray(t)?t:[t],B2=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},gv=t=>Ca(t)||!Zw(t);function Qc(t,e){if(gv(t)||gv(e))return t===e;if(Fu(t)&&Fu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const a of n){const o=t[a];if(!r.includes(a))return!1;if(a!=="ref"){const u=e[a];if(Fu(o)&&Fu(u)||ni(o)&&ni(u)||Array.isArray(o)&&Array.isArray(u)?!Qc(o,u):o!==u)return!1}}return!0}var ja=t=>ni(t)&&!Object.keys(t).length,d1=t=>t.type==="file",Go=t=>typeof t=="function",bm=t=>{if(!c1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},sN=t=>t.type==="select-multiple",f1=t=>t.type==="radio",bE=t=>f1(t)||Fh(t),f0=t=>bm(t)&&t.isConnected;function wE(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Xs(t)?r++:t[e[r++]];return t}function NE(t){for(const e in t)if(t.hasOwnProperty(e)&&!Xs(t[e]))return!1;return!0}function ji(t,e){const n=Array.isArray(e)?e:u1(e)?[e]:Jw(e),r=n.length===1?t:wE(t,n),a=n.length-1,o=n[a];return r&&delete r[o],a!==0&&(ni(r)&&ja(r)||Array.isArray(r)&&NE(r))&&ji(t,n.slice(0,-1)),t}var iN=t=>{for(const e in t)if(Go(t[e]))return!0;return!1};function wm(t,e={}){const n=Array.isArray(t);if(ni(t)||n)for(const r in t)Array.isArray(t[r])||ni(t[r])&&!iN(t[r])?(e[r]=Array.isArray(t[r])?[]:{},wm(t[r],e[r])):Ca(t[r])||(e[r]=!0);return e}function aN(t,e,n){const r=Array.isArray(t);if(ni(t)||r)for(const a in t)Array.isArray(t[a])||ni(t[a])&&!iN(t[a])?Xs(e)||gv(n[a])?n[a]=Array.isArray(t[a])?wm(t[a],[]):{...wm(t[a])}:aN(t[a],Ca(e)?{}:e[a],n[a]):n[a]=!Qc(t[a],e[a]);return n}var Vf=(t,e)=>aN(t,e,wm(e));const q2={value:!1,isValid:!1},U2={value:!0,isValid:!0};var oN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Xs(t[0].attributes.value)?Xs(t[0].value)||t[0].value===""?U2:{value:t[0].value,isValid:!0}:U2:q2}return q2},lN=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Xs(t)?t:e?t===""?NaN:t&&+t:n&&_l(t)?new Date(t):r?r(t):t;const z2={isValid:!1,value:null};var cN=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,z2):z2;function $2(t){const e=t.ref;return d1(e)?e.files:f1(e)?cN(t.refs).value:sN(e)?[...e.selectedOptions].map(({value:n})=>n):Fh(e)?oN(t.refs).value:lN(Xs(e.value)?t.ref.value:e.value,t)}var SE=(t,e,n,r)=>{const a={};for(const o of t){const u=Ot(e,o);u&&Ur(a,o,u._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:r}},Nm=t=>t instanceof RegExp,Hf=t=>Xs(t)?t:Nm(t)?t.source:ni(t)?Nm(t.value)?t.value.source:t.value:t,V2=t=>({isOnSubmit:!t||t===Wo.onSubmit,isOnBlur:t===Wo.onBlur,isOnChange:t===Wo.onChange,isOnAll:t===Wo.all,isOnTouch:t===Wo.onTouched});const H2="AsyncFunction";var jE=t=>!!t&&!!t.validate&&!!(Go(t.validate)&&t.validate.constructor.name===H2||ni(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===H2)),CE=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),W2=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const th=(t,e,n,r)=>{for(const a of n||Object.keys(t)){const o=Ot(t,a);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(th(c,e))break}else if(ni(c)&&th(c,e))break}}};function G2(t,e,n){const r=Ot(t,n);if(r||u1(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),u=Ot(e,o),c=Ot(t,o);if(u&&!Array.isArray(u)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};a.pop()}return{name:n}}var _E=(t,e,n,r)=>{n(t);const{name:a,...o}=t;return ja(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||Wo.all))},AE=(t,e,n)=>!t||!e||t===e||eh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),PE=(t,e,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?r.isOnBlur:a.isOnBlur)?!t:(n?r.isOnChange:a.isOnChange)?t:!0,kE=(t,e)=>!Gm(Ot(t,e)).length&&ji(t,e),TE=(t,e,n)=>{const r=eh(Ot(t,n));return Ur(r,"root",e[n]),Ur(t,n,r),t},$p=t=>_l(t);function K2(t,e,n="validate"){if($p(t)||Array.isArray(t)&&t.every($p)||ro(t)&&!t)return{type:n,message:$p(t)?t:"",ref:e}}var Nd=t=>ni(t)&&!Nm(t)?t:{value:t,message:""},Q2=async(t,e,n,r,a,o)=>{const{ref:u,refs:c,required:f,maxLength:p,minLength:m,min:b,max:j,pattern:y,validate:D,name:S,valueAsNumber:P,mount:_}=t._f,I=Ot(n,S);if(!_||e.has(S))return{};const v=c?c[0]:u,B=L=>{a&&v.reportValidity&&(v.setCustomValidity(ro(L)?"":L||""),v.reportValidity())},ee={},ae=f1(u),W=Fh(u),te=ae||W,Q=(P||d1(u))&&Xs(u.value)&&Xs(I)||bm(u)&&u.value===""||I===""||Array.isArray(I)&&!I.length,de=rN.bind(null,S,r,ee),F=(L,z,Y,Ce=lc.maxLength,_e=lc.minLength)=>{const Ae=L?z:Y;ee[S]={type:L?Ce:_e,message:Ae,ref:u,...de(L?Ce:_e,Ae)}};if(o?!Array.isArray(I)||!I.length:f&&(!te&&(Q||Ca(I))||ro(I)&&!I||W&&!oN(c).isValid||ae&&!cN(c).isValid)){const{value:L,message:z}=$p(f)?{value:!!f,message:f}:Nd(f);if(L&&(ee[S]={type:lc.required,message:z,ref:v,...de(lc.required,z)},!r))return B(z),ee}if(!Q&&(!Ca(b)||!Ca(j))){let L,z;const Y=Nd(j),Ce=Nd(b);if(!Ca(I)&&!isNaN(I)){const _e=u.valueAsNumber||I&&+I;Ca(Y.value)||(L=_e>Y.value),Ca(Ce.value)||(z=_e<Ce.value)}else{const _e=u.valueAsDate||new Date(I),Ae=De=>new Date(new Date().toDateString()+" "+De),ce=u.type=="time",ge=u.type=="week";_l(Y.value)&&I&&(L=ce?Ae(I)>Ae(Y.value):ge?I>Y.value:_e>new Date(Y.value)),_l(Ce.value)&&I&&(z=ce?Ae(I)<Ae(Ce.value):ge?I<Ce.value:_e<new Date(Ce.value))}if((L||z)&&(F(!!L,Y.message,Ce.message,lc.max,lc.min),!r))return B(ee[S].message),ee}if((p||m)&&!Q&&(_l(I)||o&&Array.isArray(I))){const L=Nd(p),z=Nd(m),Y=!Ca(L.value)&&I.length>+L.value,Ce=!Ca(z.value)&&I.length<+z.value;if((Y||Ce)&&(F(Y,L.message,z.message),!r))return B(ee[S].message),ee}if(y&&!Q&&_l(I)){const{value:L,message:z}=Nd(y);if(Nm(L)&&!I.match(L)&&(ee[S]={type:lc.pattern,message:z,ref:u,...de(lc.pattern,z)},!r))return B(z),ee}if(D){if(Go(D)){const L=await D(I,n),z=K2(L,v);if(z&&(ee[S]={...z,...de(lc.validate,z.message)},!r))return B(z.message),ee}else if(ni(D)){let L={};for(const z in D){if(!ja(L)&&!r)break;const Y=K2(await D[z](I,n),v,z);Y&&(L={...Y,...de(z,Y.message)},B(Y.message),r&&(ee[S]=L))}if(!ja(L)&&(ee[S]={ref:v,...L},!r))return ee}}return B(!0),ee};const EE={mode:Wo.onSubmit,reValidateMode:Wo.onChange,shouldFocusError:!0};function LE(t={}){let e={...EE,...t},n={submitCount:0,isDirty:!1,isLoading:Go(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let a=ni(e.defaultValues)||ni(e.values)?Zi(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:Zi(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...m};const j={array:B2(),state:B2()},y=V2(e.mode),D=V2(e.reValidateMode),S=e.criteriaMode===Wo.all,P=R=>H=>{clearTimeout(p),p=setTimeout(R,H)},_=async R=>{if(!e.disabled&&(m.isValid||b.isValid||R)){const H=e.resolver?ja((await Q()).errors):await F(r,!0);H!==n.isValid&&j.state.next({isValid:H})}},I=(R,H)=>{!e.disabled&&(m.isValidating||m.validatingFields||b.isValidating||b.validatingFields)&&((R||Array.from(c.mount)).forEach(je=>{je&&(H?Ur(n.validatingFields,je,H):ji(n.validatingFields,je))}),j.state.next({validatingFields:n.validatingFields,isValidating:!ja(n.validatingFields)}))},v=(R,H=[],je,we,ke=!0,Ve=!0)=>{if(we&&je&&!e.disabled){if(u.action=!0,Ve&&Array.isArray(Ot(r,R))){const at=je(Ot(r,R),we.argA,we.argB);ke&&Ur(r,R,at)}if(Ve&&Array.isArray(Ot(n.errors,R))){const at=je(Ot(n.errors,R),we.argA,we.argB);ke&&Ur(n.errors,R,at),kE(n.errors,R)}if((m.touchedFields||b.touchedFields)&&Ve&&Array.isArray(Ot(n.touchedFields,R))){const at=je(Ot(n.touchedFields,R),we.argA,we.argB);ke&&Ur(n.touchedFields,R,at)}(m.dirtyFields||b.dirtyFields)&&(n.dirtyFields=Vf(a,o)),j.state.next({name:R,isDirty:z(R,H),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ur(o,R,H)},B=(R,H)=>{Ur(n.errors,R,H),j.state.next({errors:n.errors})},ee=R=>{n.errors=R,j.state.next({errors:n.errors,isValid:!1})},ae=(R,H,je,we)=>{const ke=Ot(r,R);if(ke){const Ve=Ot(o,R,Xs(je)?Ot(a,R):je);Xs(Ve)||we&&we.defaultChecked||H?Ur(o,R,H?Ve:$2(ke._f)):_e(R,Ve),u.mount&&_()}},W=(R,H,je,we,ke)=>{let Ve=!1,at=!1;const ct={name:R};if(!e.disabled){if(!je||we){(m.isDirty||b.isDirty)&&(at=n.isDirty,n.isDirty=ct.isDirty=z(),Ve=at!==ct.isDirty);const _t=Qc(Ot(a,R),H);at=!!Ot(n.dirtyFields,R),_t?ji(n.dirtyFields,R):Ur(n.dirtyFields,R,!0),ct.dirtyFields=n.dirtyFields,Ve=Ve||(m.dirtyFields||b.dirtyFields)&&at!==!_t}if(je){const _t=Ot(n.touchedFields,R);_t||(Ur(n.touchedFields,R,je),ct.touchedFields=n.touchedFields,Ve=Ve||(m.touchedFields||b.touchedFields)&&_t!==je)}Ve&&ke&&j.state.next(ct)}return Ve?ct:{}},te=(R,H,je,we)=>{const ke=Ot(n.errors,R),Ve=(m.isValid||b.isValid)&&ro(H)&&n.isValid!==H;if(e.delayError&&je?(f=P(()=>B(R,je)),f(e.delayError)):(clearTimeout(p),f=null,je?Ur(n.errors,R,je):ji(n.errors,R)),(je?!Qc(ke,je):ke)||!ja(we)||Ve){const at={...we,...Ve&&ro(H)?{isValid:H}:{},errors:n.errors,name:R};n={...n,...at},j.state.next(at)}},Q=async R=>{I(R,!0);const H=await e.resolver(o,e.context,SE(R||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return I(R),H},de=async R=>{const{errors:H}=await Q(R);if(R)for(const je of R){const we=Ot(H,je);we?Ur(n.errors,je,we):ji(n.errors,je)}else n.errors=H;return H},F=async(R,H,je={valid:!0})=>{for(const we in R){const ke=R[we];if(ke){const{_f:Ve,...at}=ke;if(Ve){const ct=c.array.has(Ve.name),_t=ke._f&&jE(ke._f);_t&&m.validatingFields&&I([we],!0);const kt=await Q2(ke,c.disabled,o,S,e.shouldUseNativeValidation&&!H,ct);if(_t&&m.validatingFields&&I([we]),kt[Ve.name]&&(je.valid=!1,H))break;!H&&(Ot(kt,Ve.name)?ct?TE(n.errors,kt,Ve.name):Ur(n.errors,Ve.name,kt[Ve.name]):ji(n.errors,Ve.name))}!ja(at)&&await F(at,H,je)}}return je.valid},L=()=>{for(const R of c.unMount){const H=Ot(r,R);H&&(H._f.refs?H._f.refs.every(je=>!f0(je)):!f0(H._f.ref))&&Ie(R)}c.unMount=new Set},z=(R,H)=>!e.disabled&&(R&&H&&Ur(o,R,H),!Qc(O(),a)),Y=(R,H,je)=>nN(R,c,{...u.mount?o:Xs(H)?a:_l(R)?{[R]:H}:H},je,H),Ce=R=>Gm(Ot(u.mount?o:a,R,e.shouldUnregister?Ot(a,R,[]):[])),_e=(R,H,je={})=>{const we=Ot(r,R);let ke=H;if(we){const Ve=we._f;Ve&&(!Ve.disabled&&Ur(o,R,lN(H,Ve)),ke=bm(Ve.ref)&&Ca(H)?"":H,sN(Ve.ref)?[...Ve.ref.options].forEach(at=>at.selected=ke.includes(at.value)):Ve.refs?Fh(Ve.ref)?Ve.refs.length>1?Ve.refs.forEach(at=>(!at.defaultChecked||!at.disabled)&&(at.checked=Array.isArray(ke)?!!ke.find(ct=>ct===at.value):ke===at.value)):Ve.refs[0]&&(Ve.refs[0].checked=!!ke):Ve.refs.forEach(at=>at.checked=at.value===ke):d1(Ve.ref)?Ve.ref.value="":(Ve.ref.value=ke,Ve.ref.type||j.state.next({name:R,values:Zi(o)})))}(je.shouldDirty||je.shouldTouch)&&W(R,ke,je.shouldTouch,je.shouldDirty,!0),je.shouldValidate&&se(R)},Ae=(R,H,je)=>{for(const we in H){const ke=H[we],Ve=`${R}.${we}`,at=Ot(r,Ve);(c.array.has(R)||ni(ke)||at&&!at._f)&&!Fu(ke)?Ae(Ve,ke,je):_e(Ve,ke,je)}},ce=(R,H,je={})=>{const we=Ot(r,R),ke=c.array.has(R),Ve=Zi(H);Ur(o,R,Ve),ke?(j.array.next({name:R,values:Zi(o)}),(m.isDirty||m.dirtyFields||b.isDirty||b.dirtyFields)&&je.shouldDirty&&j.state.next({name:R,dirtyFields:Vf(a,o),isDirty:z(R,Ve)})):we&&!we._f&&!Ca(Ve)?Ae(R,Ve,je):_e(R,Ve,je),W2(R,c)&&j.state.next({...n}),j.state.next({name:u.mount?R:void 0,values:Zi(o)})},ge=async R=>{u.mount=!0;const H=R.target;let je=H.name,we=!0;const ke=Ot(r,je),Ve=at=>{we=Number.isNaN(at)||Fu(at)&&isNaN(at.getTime())||Qc(at,Ot(o,je,at))};if(ke){let at,ct;const _t=H.type?$2(ke._f):Yw(R),kt=R.type===ym.BLUR||R.type===ym.FOCUS_OUT,cr=!CE(ke._f)&&!e.resolver&&!Ot(n.errors,je)&&!ke._f.deps||PE(kt,Ot(n.touchedFields,je),n.isSubmitted,D,y),yn=W2(je,c,kt);Ur(o,je,_t),kt?(ke._f.onBlur&&ke._f.onBlur(R),f&&f(0)):ke._f.onChange&&ke._f.onChange(R);const Vt=W(je,_t,kt),Mt=!ja(Vt)||yn;if(!kt&&j.state.next({name:je,type:R.type,values:Zi(o)}),cr)return(m.isValid||b.isValid)&&(e.mode==="onBlur"?kt&&_():kt||_()),Mt&&j.state.next({name:je,...yn?{}:Vt});if(!kt&&yn&&j.state.next({...n}),e.resolver){const{errors:tn}=await Q([je]);if(Ve(_t),we){const Ke=G2(n.errors,r,je),ot=G2(tn,r,Ke.name||je);at=ot.error,je=ot.name,ct=ja(tn)}}else I([je],!0),at=(await Q2(ke,c.disabled,o,S,e.shouldUseNativeValidation))[je],I([je]),Ve(_t),we&&(at?ct=!1:(m.isValid||b.isValid)&&(ct=await F(r,!0)));we&&(ke._f.deps&&se(ke._f.deps),te(je,ct,at,Vt))}},De=(R,H)=>{if(Ot(n.errors,H)&&R.focus)return R.focus(),1},se=async(R,H={})=>{let je,we;const ke=eh(R);if(e.resolver){const Ve=await de(Xs(R)?R:ke);je=ja(Ve),we=R?!ke.some(at=>Ot(Ve,at)):je}else R?(we=(await Promise.all(ke.map(async Ve=>{const at=Ot(r,Ve);return await F(at&&at._f?{[Ve]:at}:at)}))).every(Boolean),!(!we&&!n.isValid)&&_()):we=je=await F(r);return j.state.next({...!_l(R)||(m.isValid||b.isValid)&&je!==n.isValid?{}:{name:R},...e.resolver||!R?{isValid:je}:{},errors:n.errors}),H.shouldFocus&&!we&&th(r,De,R?ke:c.mount),we},O=R=>{const H={...u.mount?o:a};return Xs(R)?H:_l(R)?Ot(H,R):R.map(je=>Ot(H,je))},E=(R,H)=>({invalid:!!Ot((H||n).errors,R),isDirty:!!Ot((H||n).dirtyFields,R),error:Ot((H||n).errors,R),isValidating:!!Ot(n.validatingFields,R),isTouched:!!Ot((H||n).touchedFields,R)}),ne=R=>{R&&eh(R).forEach(H=>ji(n.errors,H)),j.state.next({errors:R?n.errors:{}})},me=(R,H,je)=>{const we=(Ot(r,R,{_f:{}})._f||{}).ref,ke=Ot(n.errors,R)||{},{ref:Ve,message:at,type:ct,..._t}=ke;Ur(n.errors,R,{..._t,...H,ref:we}),j.state.next({name:R,errors:n.errors,isValid:!1}),je&&je.shouldFocus&&we&&we.focus&&we.focus()},ye=(R,H)=>Go(R)?j.state.subscribe({next:je=>R(Y(void 0,H),je)}):Y(R,H,!0),be=R=>j.state.subscribe({next:H=>{AE(R.name,H.name,R.exact)&&_E(H,R.formState||m,M,R.reRenderRoot)&&R.callback({values:{...o},...n,...H})}}).unsubscribe,Re=R=>(u.mount=!0,b={...b,...R.formState},be({...R,formState:b})),Ie=(R,H={})=>{for(const je of R?eh(R):c.mount)c.mount.delete(je),c.array.delete(je),H.keepValue||(ji(r,je),ji(o,je)),!H.keepError&&ji(n.errors,je),!H.keepDirty&&ji(n.dirtyFields,je),!H.keepTouched&&ji(n.touchedFields,je),!H.keepIsValidating&&ji(n.validatingFields,je),!e.shouldUnregister&&!H.keepDefaultValue&&ji(a,je);j.state.next({values:Zi(o)}),j.state.next({...n,...H.keepDirty?{isDirty:z()}:{}}),!H.keepIsValid&&_()},Me=({disabled:R,name:H})=>{(ro(R)&&u.mount||R||c.disabled.has(H))&&(R?c.disabled.add(H):c.disabled.delete(H))},Qe=(R,H={})=>{let je=Ot(r,R);const we=ro(H.disabled)||ro(e.disabled);return Ur(r,R,{...je||{},_f:{...je&&je._f?je._f:{ref:{name:R}},name:R,mount:!0,...H}}),c.mount.add(R),je?Me({disabled:ro(H.disabled)?H.disabled:e.disabled,name:R}):ae(R,!0,H.value),{...we?{disabled:H.disabled||e.disabled}:{},...e.progressive?{required:!!H.required,min:Hf(H.min),max:Hf(H.max),minLength:Hf(H.minLength),maxLength:Hf(H.maxLength),pattern:Hf(H.pattern)}:{},name:R,onChange:ge,onBlur:ge,ref:ke=>{if(ke){Qe(R,H),je=Ot(r,R);const Ve=Xs(ke.value)&&ke.querySelectorAll&&ke.querySelectorAll("input,select,textarea")[0]||ke,at=bE(Ve),ct=je._f.refs||[];if(at?ct.find(_t=>_t===Ve):Ve===je._f.ref)return;Ur(r,R,{_f:{...je._f,...at?{refs:[...ct.filter(f0),Ve,...Array.isArray(Ot(a,R))?[{}]:[]],ref:{type:Ve.type,name:R}}:{ref:Ve}}}),ae(R,!1,void 0,Ve)}else je=Ot(r,R,{}),je._f&&(je._f.mount=!1),(e.shouldUnregister||H.shouldUnregister)&&!(Xw(c.array,R)&&u.action)&&c.unMount.add(R)}}},ht=()=>e.shouldFocusError&&th(r,De,c.mount),vt=R=>{ro(R)&&(j.state.next({disabled:R}),th(r,(H,je)=>{const we=Ot(r,je);we&&(H.disabled=we._f.disabled||R,Array.isArray(we._f.refs)&&we._f.refs.forEach(ke=>{ke.disabled=we._f.disabled||R}))},0,!1))},Dt=(R,H)=>async je=>{let we;je&&(je.preventDefault&&je.preventDefault(),je.persist&&je.persist());let ke=Zi(o);if(j.state.next({isSubmitting:!0}),e.resolver){const{errors:Ve,values:at}=await Q();n.errors=Ve,ke=at}else await F(r);if(c.disabled.size)for(const Ve of c.disabled)Ur(ke,Ve,void 0);if(ji(n.errors,"root"),ja(n.errors)){j.state.next({errors:{}});try{await R(ke,je)}catch(Ve){we=Ve}}else H&&await H({...n.errors},je),ht(),setTimeout(ht);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ja(n.errors)&&!we,submitCount:n.submitCount+1,errors:n.errors}),we)throw we},le=(R,H={})=>{Ot(r,R)&&(Xs(H.defaultValue)?ce(R,Zi(Ot(a,R))):(ce(R,H.defaultValue),Ur(a,R,Zi(H.defaultValue))),H.keepTouched||ji(n.touchedFields,R),H.keepDirty||(ji(n.dirtyFields,R),n.isDirty=H.defaultValue?z(R,Zi(Ot(a,R))):z()),H.keepError||(ji(n.errors,R),m.isValid&&_()),j.state.next({...n}))},xt=(R,H={})=>{const je=R?Zi(R):a,we=Zi(je),ke=ja(R),Ve=ke?a:we;if(H.keepDefaultValues||(a=je),!H.keepValues){if(H.keepDirtyValues){const at=new Set([...c.mount,...Object.keys(Vf(a,o))]);for(const ct of Array.from(at))Ot(n.dirtyFields,ct)?Ur(Ve,ct,Ot(o,ct)):ce(ct,Ot(Ve,ct))}else{if(c1&&Xs(R))for(const at of c.mount){const ct=Ot(r,at);if(ct&&ct._f){const _t=Array.isArray(ct._f.refs)?ct._f.refs[0]:ct._f.ref;if(bm(_t)){const kt=_t.closest("form");if(kt){kt.reset();break}}}}for(const at of c.mount)ce(at,Ot(Ve,at))}o=Zi(Ve),j.array.next({values:{...Ve}}),j.state.next({values:{...Ve}})}c={mount:H.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!H.keepIsValid||!!H.keepDirtyValues,u.watch=!!e.shouldUnregister,j.state.next({submitCount:H.keepSubmitCount?n.submitCount:0,isDirty:ke?!1:H.keepDirty?n.isDirty:!!(H.keepDefaultValues&&!Qc(R,a)),isSubmitted:H.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ke?{}:H.keepDirtyValues?H.keepDefaultValues&&o?Vf(a,o):n.dirtyFields:H.keepDefaultValues&&R?Vf(a,R):H.keepDirty?n.dirtyFields:{},touchedFields:H.keepTouched?n.touchedFields:{},errors:H.keepErrors?n.errors:{},isSubmitSuccessful:H.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(R,H)=>xt(Go(R)?R(o):R,H),X=(R,H={})=>{const je=Ot(r,R),we=je&&je._f;if(we){const ke=we.refs?we.refs[0]:we.ref;ke.focus&&(ke.focus(),H.shouldSelect&&Go(ke.select)&&ke.select())}},M=R=>{n={...n,...R}},re={control:{register:Qe,unregister:Ie,getFieldState:E,handleSubmit:Dt,setError:me,_subscribe:be,_runSchema:Q,_getWatch:Y,_getDirty:z,_setValid:_,_setFieldArray:v,_setDisabledField:Me,_setErrors:ee,_getFieldArray:Ce,_reset:xt,_resetDefaultValues:()=>Go(e.defaultValues)&&e.defaultValues().then(R=>{xe(R,e.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:vt,_subjects:j,_proxyFormState:m,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(R){u=R},get _defaultValues(){return a},get _names(){return c},set _names(R){c=R},get _formState(){return n},get _options(){return e},set _options(R){e={...e,...R}}},subscribe:Re,trigger:se,register:Qe,handleSubmit:Dt,watch:ye,setValue:ce,getValues:O,reset:xe,resetField:le,clearErrors:ne,unregister:Ie,setError:me,setFocus:X,getFieldState:E};return{...re,formControl:re}}function ff(t={}){const e=xn.useRef(void 0),n=xn.useRef(void 0),[r,a]=xn.useState({isDirty:!1,isValidating:!1,isLoading:Go(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Go(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:LE(t),formState:r},t.formControl&&t.defaultValues&&!Go(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const o=e.current.control;return o._options=t,xn.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0}),[o]),xn.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),xn.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),xn.useEffect(()=>{t.values&&!Qc(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[t.values,o]),xn.useEffect(()=>{t.errors&&!ja(t.errors)&&o._setErrors(t.errors)},[t.errors,o]),xn.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),xn.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=tN(r,o),e.current}const Z2=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ot(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},uN=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Z2(r.ref,n,t):r.refs&&r.refs.forEach(a=>Z2(a,n,t))}},RE=(t,e)=>{e.shouldUseNativeValidation&&uN(t,e);const n={};for(const r in t){const a=Ot(e.fields,r),o=Object.assign(t[r]||{},{ref:a&&a.ref});if(DE(e.names||Object.keys(t),r)){const u=Object.assign({},Ot(n,r));Ur(u,"root",o),Ur(n,r,u)}else Ur(n,r,o)}return n},DE=(t,e)=>t.some(n=>n.startsWith(e+"."));var IE=function(t,e){for(var n={};t.length;){var r=t[0],a=r.code,o=r.message,u=r.path.join(".");if(!n[u])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[u]={message:c.message,type:c.code}}else n[u]={message:o,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(b){return t.push(b)})}),e){var f=n[u].types,p=f&&f[r.code];n[u]=rN(u,e,n,a,p?[].concat(p,r.message):r.message)}t.shift()}return n},hf=function(t,e,n){return n===void 0&&(n={}),function(r,a,o){try{return Promise.resolve((function(u,c){try{var f=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(p){return o.shouldUseNativeValidation&&uN({},o),{errors:{},values:n.raw?r:p}})}catch(p){return c(p)}return f&&f.then?f.then(void 0,c):f})(0,function(u){if((function(c){return Array.isArray(c?.errors)})(u))return{values:{},errors:RE(IE(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}};const FE=Fm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ue=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...a},o)=>{const u=r?nb:"button";return i.jsx(u,{className:Mn(FE({variant:e,size:n,className:t})),ref:o,...a})});Ue.displayName="Button";const nt=k.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:Mn("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));nt.displayName="Input";var OE="Label",dN=k.forwardRef((t,e)=>i.jsx(Wn.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));dN.displayName=OE;var fN=dN;const ME=Fm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),hN=k.forwardRef(({className:t,...e},n)=>i.jsx(fN,{ref:n,className:Mn(ME(),t),...e}));hN.displayName=fN.displayName;const pf=mE,pN=k.createContext({}),rr=({...t})=>i.jsx(pN.Provider,{value:{name:t.name},children:i.jsx(yE,{...t})}),Qm=()=>{const t=k.useContext(pN),e=k.useContext(mN),{getFieldState:n,formState:r}=Km(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},mN=k.createContext({}),Qn=k.forwardRef(({className:t,...e},n)=>{const r=k.useId();return i.jsx(mN.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:Mn("space-y-2",t),...e})})});Qn.displayName="FormItem";const Zn=k.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:a}=Qm();return i.jsx(hN,{ref:n,className:Mn(r&&"text-destructive",t),htmlFor:a,...e})});Zn.displayName="FormLabel";const Yn=k.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:o}=Qm();return i.jsx(nb,{ref:e,id:r,"aria-describedby":n?`${a} ${o}`:`${a}`,"aria-invalid":!!n,...t})});Yn.displayName="FormControl";const BE=k.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Qm();return i.jsx("p",{ref:n,id:r,className:Mn("text-sm text-muted-foreground",t),...e})});BE.displayName="FormDescription";const Xn=k.forwardRef(({className:t,children:e,...n},r)=>{const{error:a,formMessageId:o}=Qm(),u=a?String(a?.message??""):e;return u?i.jsx("p",{ref:r,id:o,className:Mn("text-sm font-medium text-destructive",t),...n,children:u}):null});Xn.displayName="FormMessage";const qE=So.auth.login.input;function UE(){const[,t]=za(),{data:e,isLoading:n}=Ta(),{mutate:r,isPending:a}=cE(),{data:o}=Ln({queryKey:["/revira/api/branding/public"],staleTime:300*1e3}),u=ff({resolver:hf(qE),defaultValues:{username:"",password:""}});k.useEffect(()=>{e&&t("/revira/dashboard")},[e,t]);function c(f){r(f)}return n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx(tv,{className:"w-8 h-8 animate-spin text-primary"})}):e?null:i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:[i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:o?.logoUrl?i.jsx("img",{src:o.logoUrl,alt:"Company Logo",className:"h-16 max-w-[280px] object-contain","data-testid":"img-login-logo"}):i.jsx("h1",{className:"font-display font-bold text-3xl text-slate-900",children:"REVIRAAPP"})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"font-display font-bold text-2xl text-slate-900",children:"Welcome Back"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Please enter your details to sign in."})]}),i.jsx(pf,{...u,children:i.jsxs("form",{onSubmit:u.handleSubmit(c),className:"space-y-6",children:[i.jsx(rr,{control:u.control,name:"username",render:({field:f})=>i.jsxs(Qn,{children:[i.jsx(Zn,{className:"text-slate-700 font-medium",children:"Email Address"}),i.jsx(Yn,{children:i.jsx(nt,{placeholder:"admin@reviranexgen.com",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-username",...f})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:u.control,name:"password",render:({field:f})=>i.jsxs(Qn,{children:[i.jsx(Zn,{className:"text-slate-700 font-medium",children:"Password"}),i.jsx(Yn,{children:i.jsx(nt,{type:"password",placeholder:"",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-password",...f})}),i.jsx(Xn,{})]})}),i.jsx(Ue,{type:"submit",disabled:a,className:"w-full h-12 rounded-xl text-base font-semibold bg-[#da2032] hover:bg-[#c41b2b] text-white transition-all duration-300","data-testid":"button-login",children:a?i.jsxs(i.Fragment,{children:[i.jsx(tv,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx("span",{className:"font-medium text-slate-900",children:"Contact Support"})]})})]}),i.jsxs("div",{className:"fixed bottom-4 right-4 bg-slate-900/90 text-slate-300 p-4 rounded-lg backdrop-blur text-xs hidden lg:block shadow-xl",children:[i.jsx("p",{className:"font-bold text-white mb-1",children:"Demo Credentials:"}),i.jsx("p",{children:"User: admin@reviranexgen.com"}),i.jsx("p",{children:"Pass: Admin@121"})]})]})}var h1="Avatar",[zE]=Il(h1),[$E,gN]=zE(h1),vN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[a,o]=k.useState("idle");return i.jsx($E,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:i.jsx(Wn.span,{...r,ref:e})})});vN.displayName=h1;var xN="AvatarImage",yN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...o}=t,u=gN(xN,n),c=VE(r,o),f=Ua(p=>{a(p),u.onImageLoadingStatusChange(p)});return gi(()=>{c!=="idle"&&f(c)},[c,f]),c==="loaded"?i.jsx(Wn.img,{...o,ref:e,src:r}):null});yN.displayName=xN;var bN="AvatarFallback",wN=k.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,o=gN(bN,n),[u,c]=k.useState(r===void 0);return k.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(f)}},[r]),u&&o.imageLoadingStatus!=="loaded"?i.jsx(Wn.span,{...a,ref:e}):null});wN.displayName=bN;function Y2(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function VE(t,{referrerPolicy:e,crossOrigin:n}){const r=WE(),a=k.useRef(null),o=r?(a.current||(a.current=new window.Image),a.current):null,[u,c]=k.useState(()=>Y2(o,t));return gi(()=>{c(Y2(o,t))},[o,t]),gi(()=>{const f=b=>()=>{c(b)};if(!o)return;const p=f("loaded"),m=f("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,n,e]),u}function HE(){return()=>{}}function WE(){return k.useSyncExternalStore(HE,()=>!0,()=>!1)}var NN=vN,SN=yN,jN=wN;const CN=k.forwardRef(({className:t,...e},n)=>i.jsx(NN,{ref:n,className:Mn(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));CN.displayName=NN.displayName;const _N=k.forwardRef(({className:t,...e},n)=>i.jsx(SN,{ref:n,className:Mn("aspect-square h-full w-full",t),...e}));_N.displayName=SN.displayName;const AN=k.forwardRef(({className:t,...e},n)=>i.jsx(jN,{ref:n,className:Mn("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));AN.displayName=jN.displayName;var h0="focusScope.autoFocusOnMount",p0="focusScope.autoFocusOnUnmount",X2={bubbles:!1,cancelable:!0},GE="FocusScope",p1=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...u}=t,[c,f]=k.useState(null),p=Ua(a),m=Ua(o),b=k.useRef(null),j=Kr(e,S=>f(S)),y=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let S=function(v){if(y.paused||!c)return;const B=v.target;c.contains(B)?b.current=B:Gc(b.current,{select:!0})},P=function(v){if(y.paused||!c)return;const B=v.relatedTarget;B!==null&&(c.contains(B)||Gc(b.current,{select:!0}))},_=function(v){if(document.activeElement===document.body)for(const ee of v)ee.removedNodes.length>0&&Gc(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",P);const I=new MutationObserver(_);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",P),I.disconnect()}}},[r,c,y.paused]),k.useEffect(()=>{if(c){ey.add(y);const S=document.activeElement;if(!c.contains(S)){const _=new CustomEvent(h0,X2);c.addEventListener(h0,p),c.dispatchEvent(_),_.defaultPrevented||(KE(JE(PN(c)),{select:!0}),document.activeElement===S&&Gc(c))}return()=>{c.removeEventListener(h0,p),setTimeout(()=>{const _=new CustomEvent(p0,X2);c.addEventListener(p0,m),c.dispatchEvent(_),_.defaultPrevented||Gc(S??document.body,{select:!0}),c.removeEventListener(p0,m),ey.remove(y)},0)}}},[c,p,m,y]);const D=k.useCallback(S=>{if(!n&&!r||y.paused)return;const P=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,_=document.activeElement;if(P&&_){const I=S.currentTarget,[v,B]=QE(I);v&&B?!S.shiftKey&&_===B?(S.preventDefault(),n&&Gc(v,{select:!0})):S.shiftKey&&_===v&&(S.preventDefault(),n&&Gc(B,{select:!0})):_===I&&S.preventDefault()}},[n,r,y.paused]);return i.jsx(Wn.div,{tabIndex:-1,...u,ref:j,onKeyDown:D})});p1.displayName=GE;function KE(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Gc(r,{select:e}),document.activeElement!==n)return}function QE(t){const e=PN(t),n=J2(e,t),r=J2(e.reverse(),t);return[n,r]}function PN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function J2(t,e){for(const n of t)if(!ZE(n,{upTo:e}))return n}function ZE(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function YE(t){return t instanceof HTMLInputElement&&"select"in t}function Gc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&YE(t)&&e&&t.select()}}var ey=XE();function XE(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=ty(t,e),t.unshift(e)},remove(e){t=ty(t,e),t[0]?.resume()}}}function ty(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function JE(t){return t.filter(e=>e.tagName!=="A")}var m0=0;function kN(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ny()),document.body.insertAdjacentElement("beforeend",t[1]??ny()),m0++,()=>{m0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),m0--}},[])}function ny(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cl=function(){return Cl=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Cl.apply(this,arguments)};function TN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function e8(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Vp="right-scroll-bar-position",Hp="width-before-scroll-bar",t8="with-scroll-bars-hidden",n8="--removed-body-scroll-bar-size";function g0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function r8(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=e,n.facade}var s8=typeof window<"u"?k.useLayoutEffect:k.useEffect,ry=new WeakMap;function i8(t,e){var n=r8(null,function(r){return t.forEach(function(a){return g0(a,r)})});return s8(function(){var r=ry.get(n);if(r){var a=new Set(r),o=new Set(t),u=n.current;a.forEach(function(c){o.has(c)||g0(c,null)}),o.forEach(function(c){a.has(c)||g0(c,u)})}ry.set(n,t)},[t]),n}function a8(t){return t}function o8(t,e){e===void 0&&(e=a8);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var u=e(o,r);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(o){for(r=!0;n.length;){var u=n;n=[],u.forEach(o)}n={push:function(c){return o(c)},filter:function(){return n}}},assignMedium:function(o){r=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(o),u=n}var f=function(){var m=u;u=[],m.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),n={push:function(m){u.push(m),p()},filter:function(m){return u=u.filter(m),n}}}};return a}function l8(t){t===void 0&&(t={});var e=o8(null);return e.options=Cl({async:!0,ssr:!1},t),e}var EN=function(t){var e=t.sideCar,n=TN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Cl({},n))};EN.isSideCarExport=!0;function c8(t,e){return t.useMedium(e),EN}var LN=l8(),v0=function(){},Zm=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:v0,onWheelCapture:v0,onTouchMoveCapture:v0}),a=r[0],o=r[1],u=t.forwardProps,c=t.children,f=t.className,p=t.removeScrollBar,m=t.enabled,b=t.shards,j=t.sideCar,y=t.noIsolation,D=t.inert,S=t.allowPinchZoom,P=t.as,_=P===void 0?"div":P,I=t.gapMode,v=TN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=j,ee=i8([n,e]),ae=Cl(Cl({},v),a);return k.createElement(k.Fragment,null,m&&k.createElement(B,{sideCar:LN,removeScrollBar:p,shards:b,noIsolation:y,inert:D,setCallbacks:o,allowPinchZoom:!!S,lockRef:n,gapMode:I}),u?k.cloneElement(k.Children.only(c),Cl(Cl({},ae),{ref:ee})):k.createElement(_,Cl({},ae,{className:f,ref:ee}),c))});Zm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zm.classNames={fullWidth:Hp,zeroRight:Vp};var u8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function d8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=u8();return e&&t.setAttribute("nonce",e),t}function f8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function h8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var p8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=d8())&&(f8(e,n),h8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m8=function(){var t=p8();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},RN=function(){var t=m8(),e=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return e},g8={left:0,top:0,right:0,gap:0},x0=function(t){return parseInt(t||"",10)||0},v8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[x0(n),x0(r),x0(a)]},x8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return g8;var e=v8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},y8=RN(),Vd="data-scroll-locked",b8=function(t,e,n,r){var a=t.left,o=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(t8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Vd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vp,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Hp,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Vp," .").concat(Vp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hp," .").concat(Hp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vd,`] {
    `).concat(n8,": ").concat(c,`px;
  }
`)},sy=function(){var t=parseInt(document.body.getAttribute(Vd)||"0",10);return isFinite(t)?t:0},w8=function(){k.useEffect(function(){return document.body.setAttribute(Vd,(sy()+1).toString()),function(){var t=sy()-1;t<=0?document.body.removeAttribute(Vd):document.body.setAttribute(Vd,t.toString())}},[])},N8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;w8();var o=k.useMemo(function(){return x8(a)},[a]);return k.createElement(y8,{styles:b8(o,!e,a,n?"":"!important")})},vv=!1;if(typeof window<"u")try{var jp=Object.defineProperty({},"passive",{get:function(){return vv=!0,!0}});window.addEventListener("test",jp,jp),window.removeEventListener("test",jp,jp)}catch{vv=!1}var Sd=vv?{passive:!1}:!1,S8=function(t){return t.tagName==="TEXTAREA"},DN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!S8(t)&&n[e]==="visible")},j8=function(t){return DN(t,"overflowY")},C8=function(t){return DN(t,"overflowX")},iy=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=IN(t,r);if(a){var o=FN(t,r),u=o[1],c=o[2];if(u>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},_8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},A8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},IN=function(t,e){return t==="v"?j8(e):C8(e)},FN=function(t,e){return t==="v"?_8(e):A8(e)},P8=function(t,e){return t==="h"&&e==="rtl"?-1:1},k8=function(t,e,n,r,a){var o=P8(t,window.getComputedStyle(e).direction),u=o*r,c=n.target,f=e.contains(c),p=!1,m=u>0,b=0,j=0;do{var y=FN(t,c),D=y[0],S=y[1],P=y[2],_=S-P-o*D;(D||_)&&IN(t,c)&&(b+=_,j+=D),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(e.contains(c)||e===c));return(m&&Math.abs(b)<1||!m&&Math.abs(j)<1)&&(p=!0),p},Cp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ay=function(t){return[t.deltaX,t.deltaY]},oy=function(t){return t&&"current"in t?t.current:t},T8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},E8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},L8=0,jd=[];function R8(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),a=k.useState(L8++)[0],o=k.useState(RN)[0],u=k.useRef(t);k.useEffect(function(){u.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var S=e8([t.lockRef.current],(t.shards||[]).map(oy),!0).filter(Boolean);return S.forEach(function(P){return P.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=k.useCallback(function(S,P){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var _=Cp(S),I=n.current,v="deltaX"in S?S.deltaX:I[0]-_[0],B="deltaY"in S?S.deltaY:I[1]-_[1],ee,ae=S.target,W=Math.abs(v)>Math.abs(B)?"h":"v";if("touches"in S&&W==="h"&&ae.type==="range")return!1;var te=iy(W,ae);if(!te)return!0;if(te?ee=W:(ee=W==="v"?"h":"v",te=iy(W,ae)),!te)return!1;if(!r.current&&"changedTouches"in S&&(v||B)&&(r.current=ee),!ee)return!0;var Q=r.current||ee;return k8(Q,P,S,Q==="h"?v:B)},[]),f=k.useCallback(function(S){var P=S;if(!(!jd.length||jd[jd.length-1]!==o)){var _="deltaY"in P?ay(P):Cp(P),I=e.current.filter(function(ee){return ee.name===P.type&&(ee.target===P.target||P.target===ee.shadowParent)&&T8(ee.delta,_)})[0];if(I&&I.should){P.cancelable&&P.preventDefault();return}if(!I){var v=(u.current.shards||[]).map(oy).filter(Boolean).filter(function(ee){return ee.contains(P.target)}),B=v.length>0?c(P,v[0]):!u.current.noIsolation;B&&P.cancelable&&P.preventDefault()}}},[]),p=k.useCallback(function(S,P,_,I){var v={name:S,delta:P,target:_,should:I,shadowParent:D8(_)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(B){return B!==v})},1)},[]),m=k.useCallback(function(S){n.current=Cp(S),r.current=void 0},[]),b=k.useCallback(function(S){p(S.type,ay(S),S.target,c(S,t.lockRef.current))},[]),j=k.useCallback(function(S){p(S.type,Cp(S),S.target,c(S,t.lockRef.current))},[]);k.useEffect(function(){return jd.push(o),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:j}),document.addEventListener("wheel",f,Sd),document.addEventListener("touchmove",f,Sd),document.addEventListener("touchstart",m,Sd),function(){jd=jd.filter(function(S){return S!==o}),document.removeEventListener("wheel",f,Sd),document.removeEventListener("touchmove",f,Sd),document.removeEventListener("touchstart",m,Sd)}},[]);var y=t.removeScrollBar,D=t.inert;return k.createElement(k.Fragment,null,D?k.createElement(o,{styles:E8(a)}):null,y?k.createElement(N8,{gapMode:t.gapMode}):null)}function D8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const I8=c8(LN,R8);var m1=k.forwardRef(function(t,e){return k.createElement(Zm,Cl({},t,{ref:e,sideCar:I8}))});m1.classNames=Zm.classNames;var F8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cd=new WeakMap,_p=new WeakMap,Ap={},y0=0,ON=function(t){return t&&(t.host||ON(t.parentNode))},O8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ON(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},M8=function(t,e,n,r){var a=O8(e,Array.isArray(t)?t:[t]);Ap[n]||(Ap[n]=new WeakMap);var o=Ap[n],u=[],c=new Set,f=new Set(a),p=function(b){!b||c.has(b)||(c.add(b),p(b.parentNode))};a.forEach(p);var m=function(b){!b||f.has(b)||Array.prototype.forEach.call(b.children,function(j){if(c.has(j))m(j);else try{var y=j.getAttribute(r),D=y!==null&&y!=="false",S=(Cd.get(j)||0)+1,P=(o.get(j)||0)+1;Cd.set(j,S),o.set(j,P),u.push(j),S===1&&D&&_p.set(j,!0),P===1&&j.setAttribute(n,"true"),D||j.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",j,_)}})};return m(e),c.clear(),y0++,function(){u.forEach(function(b){var j=Cd.get(b)-1,y=o.get(b)-1;Cd.set(b,j),o.set(b,y),j||(_p.has(b)||b.removeAttribute(r),_p.delete(b)),y||b.removeAttribute(n)}),y0--,y0||(Cd=new WeakMap,Cd=new WeakMap,_p=new WeakMap,Ap={})}},MN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=F8(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),M8(r,a,n,"aria-hidden")):function(){return null}},g1="Dialog",[BN]=Il(g1),[B8,nl]=BN(g1),qN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:u=!0}=t,c=k.useRef(null),f=k.useRef(null),[p=!1,m]=Jc({prop:r,defaultProp:a,onChange:o});return i.jsx(B8,{scope:e,triggerRef:c,contentRef:f,contentId:Yc(),titleId:Yc(),descriptionId:Yc(),open:p,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(b=>!b),[m]),modal:u,children:n})};qN.displayName=g1;var UN="DialogTrigger",zN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=nl(UN,n),o=Kr(e,a.triggerRef);return i.jsx(Wn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":y1(a.open),...r,ref:o,onClick:zn(t.onClick,a.onOpenToggle)})});zN.displayName=UN;var v1="DialogPortal",[q8,$N]=BN(v1,{forceMount:void 0}),VN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:a}=t,o=nl(v1,e);return i.jsx(q8,{scope:e,forceMount:n,children:k.Children.map(r,u=>i.jsx(cu,{present:n||o.open,children:i.jsx(Rm,{asChild:!0,container:a,children:u})}))})};VN.displayName=v1;var Sm="DialogOverlay",HN=k.forwardRef((t,e)=>{const n=$N(Sm,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=nl(Sm,t.__scopeDialog);return o.modal?i.jsx(cu,{present:r||o.open,children:i.jsx(z8,{...a,ref:e})}):null});HN.displayName=Sm;var U8=Qd("DialogOverlay.RemoveScroll"),z8=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=nl(Sm,n);return i.jsx(m1,{as:U8,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Wn.div,{"data-state":y1(a.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Wu="DialogContent",WN=k.forwardRef((t,e)=>{const n=$N(Wu,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=nl(Wu,t.__scopeDialog);return i.jsx(cu,{present:r||o.open,children:o.modal?i.jsx($8,{...a,ref:e}):i.jsx(V8,{...a,ref:e})})});WN.displayName=Wu;var $8=k.forwardRef((t,e)=>{const n=nl(Wu,t.__scopeDialog),r=k.useRef(null),a=Kr(e,n.contentRef,r);return k.useEffect(()=>{const o=r.current;if(o)return MN(o)},[]),i.jsx(GN,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zn(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:zn(t.onPointerDownOutside,o=>{const u=o.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0;(u.button===2||c)&&o.preventDefault()}),onFocusOutside:zn(t.onFocusOutside,o=>o.preventDefault())})}),V8=k.forwardRef((t,e)=>{const n=nl(Wu,t.__scopeDialog),r=k.useRef(!1),a=k.useRef(!1);return i.jsx(GN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=o.target;n.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),GN=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...u}=t,c=nl(Wu,n),f=k.useRef(null),p=Kr(e,f);return kN(),i.jsxs(i.Fragment,{children:[i.jsx(p1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:i.jsx(Th,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":y1(c.open),...u,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(H8,{titleId:c.titleId}),i.jsx(G8,{contentRef:f,descriptionId:c.descriptionId})]})]})}),x1="DialogTitle",KN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=nl(x1,n);return i.jsx(Wn.h2,{id:a.titleId,...r,ref:e})});KN.displayName=x1;var QN="DialogDescription",ZN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=nl(QN,n);return i.jsx(Wn.p,{id:a.descriptionId,...r,ref:e})});ZN.displayName=QN;var YN="DialogClose",XN=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=nl(YN,n);return i.jsx(Wn.button,{type:"button",...r,ref:e,onClick:zn(t.onClick,()=>a.onOpenChange(!1))})});XN.displayName=YN;function y1(t){return t?"open":"closed"}var JN="DialogTitleWarning",[p7,eS]=iC(JN,{contentName:Wu,titleName:x1,docsSlug:"dialog"}),H8=({titleId:t})=>{const e=eS(JN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},W8="DialogDescriptionWarning",G8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eS(W8).contentName}}.`;return k.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},tS=qN,nS=zN,rS=VN,Ym=HN,Xm=WN,Jm=KN,eg=ZN,sS=XN;const K8=tS,Q8=nS,Z8=rS,iS=k.forwardRef(({className:t,...e},n)=>i.jsx(Ym,{className:Mn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));iS.displayName=Ym.displayName;const Y8=Fm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),aS=k.forwardRef(({side:t="right",className:e,children:n,...r},a)=>i.jsxs(Z8,{children:[i.jsx(iS,{}),i.jsxs(Xm,{ref:a,className:Mn(Y8({side:t}),e),...r,children:[n,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(lf,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));aS.displayName=Xm.displayName;const X8=k.forwardRef(({className:t,...e},n)=>i.jsx(Jm,{ref:n,className:Mn("text-lg font-semibold text-foreground",t),...e}));X8.displayName=Jm.displayName;const J8=k.forwardRef(({className:t,...e},n)=>i.jsx(eg,{ref:n,className:Mn("text-sm text-muted-foreground",t),...e}));J8.displayName=eg.displayName;function Ls({children:t,user:e}){const[n]=za(),{mutate:r}=uE(),[a,o]=k.useState(!1),{branding:u}=dE(),c=[{name:"Dashboard",href:"/revira/dashboard",icon:n_},{name:"Clients",href:"/revira/clients",icon:oh},{name:"Projects",href:"/revira/projects",icon:rm},{name:"User Management",href:"/revira/users",icon:d_},{name:"Branding",href:"/revira/branding",icon:nv},{name:"Settings",href:"/revira/settings",icon:a_}],f=()=>i.jsxs("div",{className:"flex flex-col h-full bg-white",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsx("div",{className:"flex justify-center",children:u?.logoUrl?i.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-12 max-w-[200px] object-contain","data-testid":"img-sidebar-logo"}):i.jsx("h1",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})})}),i.jsx("div",{className:"flex-1 px-4 py-6 space-y-1",children:c.map(p=>{const m=n===p.href;return i.jsxs(q5,{href:p.href,className:`
              flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 group
              ${m?"bg-[#da2032] text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}
            `,children:[i.jsx(p.icon,{className:`w-5 h-5 ${m?"text-white":"text-slate-500 group-hover:text-slate-900"}`}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsxs("div",{className:"p-4 border-t border-slate-200",children:[i.jsx("div",{className:"p-4 rounded-lg bg-slate-50 border border-slate-200 mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(CN,{className:"h-10 w-10 border-2 border-slate-200",children:[i.jsx(_N,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${e?.name}`}),i.jsx(AN,{className:"bg-slate-200 text-slate-700",children:e?.name?.[0]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:e?.name}),i.jsx("p",{className:"text-xs text-slate-500 truncate",children:e?.username})]})]})}),i.jsxs(Ue,{variant:"outline",className:"w-full justify-start gap-3 text-slate-700 hover:text-slate-900 border-slate-300",onClick:()=>r(),children:[i.jsx(r_,{className:"w-4 h-4"}),"Sign Out"]})]})]});return i.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[i.jsx("aside",{className:"hidden lg:block w-72 h-screen sticky top-0 border-r border-slate-200",children:i.jsx(f,{})}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[i.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 sticky top-0 z-30 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-4 lg:hidden",children:[i.jsxs(K8,{open:a,onOpenChange:o,children:[i.jsx(Q8,{asChild:!0,children:i.jsx(Ue,{variant:"ghost",size:"icon",className:"-ml-2",children:i.jsx(s_,{className:"w-6 h-6 text-slate-600"})})}),i.jsx(aS,{side:"left",className:"p-0 w-72 border-r-0",children:i.jsx(f,{})})]}),u?.logoUrl?i.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-8 max-w-[140px] object-contain"}):i.jsx("span",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})]}),i.jsx("div",{className:"flex-1 max-w-xl mx-auto hidden lg:block px-8",children:i.jsxs("div",{className:"relative",children:[i.jsx(Kv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-slate-100 border-transparent focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 text-sm"})]})}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(Ue,{variant:"ghost",size:"icon",className:"relative text-slate-500 hover:text-slate-700",children:[i.jsx(XC,{className:"w-5 h-5"}),i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]})})]}),i.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:i.jsx("div",{className:"max-w-7xl mx-auto animate-fade-in",children:t})})]})]})}const Cn=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Cn.displayName="Card";const ts=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("flex flex-col space-y-1.5 p-6",t),...e}));ts.displayName="CardHeader";const ns=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("text-2xl font-semibold leading-none tracking-tight",t),...e}));ns.displayName="CardTitle";const Kc=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("text-sm text-muted-foreground",t),...e}));Kc.displayName="CardDescription";const _n=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("p-6 pt-0",t),...e}));_n.displayName="CardContent";const eL=k.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Mn("flex items-center p-6 pt-0",t),...e}));eL.displayName="CardFooter";async function _d(t){try{const e=await fetch(t,{credentials:"include"});return e.ok?e.json():[]}catch{return[]}}function tL(){const{data:t,isLoading:e}=Ta(),[,n]=za(),{data:r=[]}=Ln({queryKey:["/revira/dashboard/clients"],queryFn:()=>_d("/revira/api/clients"),enabled:!!t}),{data:a=[]}=Ln({queryKey:["/revira/dashboard/projects"],queryFn:()=>_d("/revira/api/projects"),enabled:!!t}),{data:o=[]}=Ln({queryKey:["/revira/dashboard/quotations"],queryFn:()=>_d("/revira/api/quotations"),enabled:!!t}),{data:u=[]}=Ln({queryKey:["/revira/dashboard/invoices"],queryFn:()=>_d("/revira/api/invoices"),enabled:!!t}),{data:c=[]}=Ln({queryKey:["/revira/dashboard/gate-passes"],queryFn:()=>_d("/revira/api/gate-passes"),enabled:!!t}),{data:f=[]}=Ln({queryKey:["/revira/dashboard/delivery-challans"],queryFn:()=>_d("/revira/api/delivery-challans"),enabled:!!t}),p=k.useMemo(()=>{const S=new Map;return a.forEach(P=>S.set(P.id,P.projectName)),S},[a]),m=S=>{const P=String(S??"0").replace(/,/g,""),_=Number(P);return Number.isFinite(_)?_:0},b=k.useMemo(()=>u.reduce((S,P)=>S+m(P.grandTotal),0),[u]),j=k.useMemo(()=>{const S=new Set(o.map(ee=>ee.projectId)),P=new Set(u.map(ee=>ee.projectId)),_=new Set(c.map(ee=>ee.projectId)),I=new Set(f.map(ee=>ee.projectId)),v=a.length||1,B=a.filter(ee=>S.has(ee.id)&&P.has(ee.id)&&_.has(ee.id)&&I.has(ee.id)).length;return{quotationCoverage:Math.round(S.size/v*100),invoiceCoverage:Math.round(P.size/v*100),gatePassCoverage:Math.round(_.size/v*100),deliveryCoverage:Math.round(I.size/v*100),fullDocProjects:B}},[a,o,u,c,f]),y=k.useMemo(()=>{const S=_=>new Date(_?String(_):0).getTime();return[...o.map(_=>({id:`q-${_.id}`,type:"Quotation",number:_.quotationNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...u.map(_=>({id:`i-${_.id}`,type:"Invoice",number:_.invoiceNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...c.map(_=>({id:`g-${_.id}`,type:"Gate Pass",number:_.gatePassNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt})),...f.map(_=>({id:`d-${_.id}`,type:"Delivery Challan",number:_.deliveryChallanNumber,projectId:_.projectId,revision:_.revision,createdAt:_.createdAt}))].sort((_,I)=>S(I.createdAt)-S(_.createdAt)).slice(0,8)},[o,u,c,f]);if(e)return null;const D=[{title:"Clients",value:r.length,icon:oh,color:"text-blue-600",bg:"bg-blue-50"},{title:"Projects",value:a.length,icon:rm,color:"text-indigo-600",bg:"bg-indigo-50"},{title:"Documents",value:o.length+u.length+c.length+f.length,icon:_a,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Invoice Value",value:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(b),icon:t_,color:"text-amber-600",bg:"bg-amber-50"}];return i.jsx(Ls,{user:t,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),i.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome, ",t?.name,". Live snapshot of projects and document flow."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{variant:"outline",onClick:()=>n("/revira/clients"),children:"Clients"}),i.jsx(Ue,{variant:"outline",onClick:()=>n("/revira/projects"),children:"Projects"})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4",children:D.map(S=>i.jsx(Cn,{className:"border-slate-200",children:i.jsx(_n,{className:"p-5",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:S.title}),i.jsx("p",{className:"mt-2 text-2xl font-bold text-slate-900",children:S.value})]}),i.jsx("div",{className:`rounded-lg p-2.5 ${S.bg}`,children:i.jsx(S.icon,{className:`h-5 w-5 ${S.color}`})})]})})},S.title))}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-3",children:[i.jsxs(Cn,{className:"xl:col-span-2 border-slate-200",children:[i.jsx(ts,{className:"pb-2",children:i.jsx(ns,{className:"text-base",children:"Recent Document Activity"})}),i.jsx(_n,{children:y.length===0?i.jsx("p",{className:"text-sm text-slate-500",children:"No activity yet. Create a project and start with quotation."}):i.jsx("div",{className:"space-y-2",children:y.map(S=>i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 px-3 py-2.5",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[S.type," ",i.jsxs("span",{className:"font-normal text-slate-500",children:["(",S.revision,")"]})]}),i.jsxs("p",{className:"text-xs text-slate-500",children:[S.number," | ",p.get(S.projectId)||"Unknown Project"]})]}),i.jsx("p",{className:"text-xs text-slate-500",children:S.createdAt?new Date(S.createdAt).toLocaleDateString("en-IN"):"-"})]},S.id))})})]}),i.jsxs(Cn,{className:"border-slate-200",children:[i.jsx(ts,{className:"pb-2",children:i.jsx(ns,{className:"text-base",children:"Documentation Health"})}),i.jsxs(_n,{className:"space-y-3",children:[i.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Projects with all docs"}),i.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[j.fullDocProjects,"/",a.length]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(_a,{className:"h-4 w-4 text-red-500"})," Quotations"]}),i.jsxs("span",{className:"font-semibold",children:[j.quotationCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(rv,{className:"h-4 w-4 text-green-600"})," Invoices"]}),i.jsxs("span",{className:"font-semibold",children:[j.invoiceCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(ev,{className:"h-4 w-4 text-blue-600"})," Gate Pass"]}),i.jsxs("span",{className:"font-semibold",children:[j.gatePassCoverage,"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(J0,{className:"h-4 w-4 text-indigo-600"})," Delivery Challan"]}),i.jsxs("span",{className:"font-semibold",children:[j.deliveryCoverage,"%"]})]})]}),i.jsxs(Ue,{className:"w-full mt-2",variant:"outline",onClick:()=>n("/revira/projects"),children:["Review Projects ",i.jsx(ZC,{className:"ml-2 h-4 w-4"})]}),i.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-2.5 text-xs text-emerald-700 flex items-center gap-2",children:[i.jsx(YC,{className:"h-4 w-4"}),"Keep all four documents updated for better project traceability."]})]})]})]})]})})}const mi=tS,Ch=nS,nL=rS,oS=k.forwardRef(({className:t,...e},n)=>i.jsx(Ym,{ref:n,className:Mn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));oS.displayName=Ym.displayName;const ri=k.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(nL,{children:[i.jsx(oS,{}),i.jsxs(Xm,{ref:r,className:Mn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(lf,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ri.displayName=Xm.displayName;const si=({className:t,...e})=>i.jsx("div",{className:Mn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});si.displayName="DialogHeader";const ii=k.forwardRef(({className:t,...e},n)=>i.jsx(Jm,{ref:n,className:Mn("text-lg font-semibold leading-none tracking-tight",t),...e}));ii.displayName=Jm.displayName;const tf=k.forwardRef(({className:t,...e},n)=>i.jsx(eg,{ref:n,className:Mn("text-sm text-muted-foreground",t),...e}));tf.displayName=eg.displayName;const rL=U.object({name:U.string().min(1,"Client name is required"),location:U.string(),gstNo:U.string(),contactPerson:U.string(),mobileNumber:U.string().min(10,"Valid mobile number is required"),emailAddress:U.string()}),sL=t=>({...t,gstNo:t.gstNo?.trim()||"NA",contactPerson:t.contactPerson?.trim()||"NA",mobileNumber:t.mobileNumber?.trim()||"0000000000",emailAddress:t.emailAddress?.trim()||"na@example.com"});function iL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState(""),[,u]=za(),{toast:c}=$a(),{data:f}=Ta(),{data:p,isLoading:m}=Ln({queryKey:["/revira/api/clients"]}),b=ff({resolver:hf(rL),defaultValues:{name:"",location:"",gstNo:"",contactPerson:"",mobileNumber:"",emailAddress:""}}),j=Tr({mutationFn:async v=>(await wn("POST","/revira/api/clients",sL(v))).json(),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/clients"]}),b.reset(),e(!1),c({title:"Success",description:"Client created successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),y=Tr({mutationFn:async({id:v,data:B})=>(await wn("PUT",`/revira/api/clients/${v}`,B)).json(),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/clients"]}),b.reset(),r(null),e(!1),c({title:"Success",description:"Client updated successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),D=Tr({mutationFn:async v=>{await wn("DELETE",`/revira/api/clients/${v}`)},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/clients"]}),c({title:"Success",description:"Client deleted successfully"})},onError:v=>{c({title:"Error",description:v.message,variant:"destructive"})}}),S=v=>{n?y.mutate({id:n.id,data:v}):j.mutate(v)},P=v=>{r(v),b.reset({name:v.name,location:v.location,gstNo:v.gstNo,contactPerson:v.contactPerson,mobileNumber:v.mobileNumber,emailAddress:v.emailAddress}),e(!0)},_=v=>{e(v),v||(r(null),b.reset())},I=k.useMemo(()=>{const v=a.trim().toLowerCase(),B=[...p??[]].sort((ee,ae)=>ae.id-ee.id);return v?B.filter(ee=>[ee.name,ee.location,ee.gstNo,ee.contactPerson,ee.mobileNumber,ee.emailAddress].join(" ").toLowerCase().includes(v)):B},[p,a]);return i.jsxs(Ls,{user:f,children:[i.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:i.jsx(oh,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Clients"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your client partners"})]})]}),i.jsxs(mi,{open:t,onOpenChange:_,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Ue,{"data-testid":"button-add-client",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[i.jsx(Fi,{className:"h-4 w-4 mr-2"}),"Add Client"]})}),i.jsxs(ri,{className:"sm:max-w-[500px]",children:[i.jsxs(si,{children:[i.jsx(ii,{children:n?"Edit Client":"Create New Client"}),i.jsx(tf,{children:n?"Update client details below.":"Add a new client partner to your system."})]}),i.jsx(pf,{...b,children:i.jsxs("form",{onSubmit:b.handleSubmit(S),className:"space-y-4",children:[i.jsx(rr,{control:b.control,name:"name",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Client Name"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-client-name",placeholder:"Enter client name",...v})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:b.control,name:"location",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Location"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-location",placeholder:"Enter location",...v})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:b.control,name:"gstNo",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"GST No."}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-gst-no",placeholder:"Enter GST number",...v})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:b.control,name:"contactPerson",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Contact Person"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-contact-person",placeholder:"Enter contact person name",...v})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:b.control,name:"mobileNumber",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Mobile Number"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-mobile-number",placeholder:"Enter mobile number",...v})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:b.control,name:"emailAddress",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Email Address"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-email-address",type:"email",placeholder:"Enter email address",...v})}),i.jsx(Xn,{})]})}),i.jsx(Ue,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:j.isPending||y.isPending,"data-testid":"button-submit-client",children:j.isPending||y.isPending?n?"Updating...":"Creating...":n?"Update Client":"Create Client"})]})})]})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Kv,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx(nt,{value:a,onChange:v=>o(v.target.value),placeholder:"Search by name, GST, location, contact...",className:"pl-9","data-testid":"input-search-clients"})]})]}),i.jsx(Cn,{className:"border-0 shadow-lg overflow-hidden",children:i.jsxs(_n,{className:"p-0",children:[i.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Name"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Location"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"GST No."})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Person"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Info"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(v=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},v))}):I.length>0?i.jsxs("div",{className:"divide-y divide-slate-100",children:[I.map(v=>i.jsxs("div",{"data-testid":`row-client-${v.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:i.jsx(Gv,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-semibold text-slate-800 uppercase text-sm","data-testid":`text-client-name-${v.id}`,children:v.name.length>15?v.name.substring(0,15)+"...":v.name})]}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(eu,{className:"w-3.5 h-3.5 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${v.id}`,children:v.location})]}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-700 text-sm font-mono","data-testid":`text-gst-${v.id}`,children:v.gstNo})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-contact-${v.id}`,children:v.contactPerson})}),i.jsxs("div",{className:"col-span-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Eb,{className:"w-3 h-3 text-green-500"}),i.jsx("span",{className:"text-slate-600 text-xs","data-testid":`text-mobile-${v.id}`,children:v.mobileNumber})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(uu,{className:"w-3 h-3 text-blue-500"}),i.jsx("span",{className:"text-slate-600 text-xs truncate max-w-[140px]","data-testid":`text-email-${v.id}`,title:v.emailAddress,children:v.emailAddress})]})]}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${v.id}/ledger`),"data-testid":`button-ledger-client-${v.id}`,title:"Client Ledger",children:i.jsx(sm,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>P(v),"data-testid":`button-edit-client-${v.id}`,title:"Edit Client",children:i.jsx(Uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>D.mutate(v.id),disabled:D.isPending,"data-testid":`button-delete-client-${v.id}`,title:"Delete Client",children:i.jsx(pr,{className:"w-4 h-4"})})]})]},v.id)),I.map(v=>i.jsxs("div",{className:"md:hidden px-4 py-4 space-y-2 hover:bg-slate-50/50","data-testid":`card-client-${v.id}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900 uppercase text-sm",children:v.name}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v.location})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>u(`/clients/${v.id}/ledger`),"data-testid":`button-ledger-client-mobile-${v.id}`,title:"Client Ledger",children:i.jsx(sm,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>P(v),"data-testid":`button-edit-client-mobile-${v.id}`,children:i.jsx(Uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>D.mutate(v.id),disabled:D.isPending,"data-testid":`button-delete-client-mobile-${v.id}`,children:i.jsx(pr,{className:"w-4 h-4"})})]})]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"GST:"})," ",v.gstNo]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"Contact:"})," ",v.contactPerson]}),i.jsxs("p",{className:"text-xs text-slate-600",children:[i.jsx("span",{className:"font-semibold",children:"Mobile:"})," ",v.mobileNumber]}),i.jsxs("p",{className:"text-xs text-slate-600 break-all",children:[i.jsx("span",{className:"font-semibold",children:"Email:"})," ",v.emailAddress]})]},`mobile-${v.id}`))]}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-blue-500/10 flex items-center justify-center mb-4",children:i.jsx(oh,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No clients yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first client partner."}),i.jsxs(Ue,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[i.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Add First Client"]})]})]})})]})}function ly(t,[e,n]){return Math.min(n,Math.max(e,t))}var aL=k.createContext(void 0);function lS(t){const e=k.useContext(aL);return t||e||"ltr"}function cS(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var oL=[" ","Enter","ArrowUp","ArrowDown"],lL=[" ","Enter"],Oh="Select",[tg,ng,cL]=$v(Oh),[mf]=Il(Oh,[cL,zm]),rg=zm(),[uL,du]=mf(Oh),[dL,fL]=mf(Oh),uS=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:a,onOpenChange:o,value:u,defaultValue:c,onValueChange:f,dir:p,name:m,autoComplete:b,disabled:j,required:y,form:D}=t,S=rg(e),[P,_]=k.useState(null),[I,v]=k.useState(null),[B,ee]=k.useState(!1),ae=lS(p),[W=!1,te]=Jc({prop:r,defaultProp:a,onChange:o}),[Q,de]=Jc({prop:u,defaultProp:c,onChange:f}),F=k.useRef(null),L=P?D||!!P.closest("form"):!0,[z,Y]=k.useState(new Set),Ce=Array.from(z).map(_e=>_e.props.value).join(";");return i.jsx(nP,{...S,children:i.jsxs(uL,{required:y,scope:e,trigger:P,onTriggerChange:_,valueNode:I,onValueNodeChange:v,valueNodeHasChildren:B,onValueNodeHasChildrenChange:ee,contentId:Yc(),value:Q,onValueChange:de,open:W,onOpenChange:te,dir:ae,triggerPointerDownPosRef:F,disabled:j,children:[i.jsx(tg.Provider,{scope:e,children:i.jsx(dL,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(_e=>{Y(Ae=>new Set(Ae).add(_e))},[]),onNativeOptionRemove:k.useCallback(_e=>{Y(Ae=>{const ce=new Set(Ae);return ce.delete(_e),ce})},[]),children:n})}),L?i.jsxs(IS,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:b,value:Q,onChange:_e=>de(_e.target.value),disabled:j,form:D,children:[Q===void 0?i.jsx("option",{value:""}):null,Array.from(z)]},Ce):null]})})};uS.displayName=Oh;var dS="SelectTrigger",fS=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,o=rg(n),u=du(dS,n),c=u.disabled||r,f=Kr(e,u.onTriggerChange),p=ng(n),m=k.useRef("touch"),[b,j,y]=FS(S=>{const P=p().filter(v=>!v.disabled),_=P.find(v=>v.value===u.value),I=OS(P,S,_);I!==void 0&&u.onValueChange(I.value)}),D=S=>{c||(u.onOpenChange(!0),y()),S&&(u.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return i.jsx(cw,{asChild:!0,...o,children:i.jsx(Wn.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":DS(u.value)?"":void 0,...a,ref:f,onClick:zn(a.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&D(S)}),onPointerDown:zn(a.onPointerDown,S=>{m.current=S.pointerType;const P=S.target;P.hasPointerCapture(S.pointerId)&&P.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(D(S),S.preventDefault())}),onKeyDown:zn(a.onKeyDown,S=>{const P=b.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&j(S.key),!(P&&S.key===" ")&&oL.includes(S.key)&&(D(),S.preventDefault())})})})});fS.displayName=dS;var hS="SelectValue",pS=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:u="",...c}=t,f=du(hS,n),{onValueNodeHasChildrenChange:p}=f,m=o!==void 0,b=Kr(e,f.onValueNodeChange);return gi(()=>{p(m)},[p,m]),i.jsx(Wn.span,{...c,ref:b,style:{pointerEvents:"none"},children:DS(f.value)?i.jsx(i.Fragment,{children:u}):o})});pS.displayName=hS;var hL="SelectIcon",mS=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...a}=t;return i.jsx(Wn.span,{"aria-hidden":!0,...a,ref:e,children:r||""})});mS.displayName=hL;var pL="SelectPortal",gS=t=>i.jsx(Rm,{asChild:!0,...t});gS.displayName=pL;var Gu="SelectContent",vS=k.forwardRef((t,e)=>{const n=du(Gu,t.__scopeSelect),[r,a]=k.useState();if(gi(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?sf.createPortal(i.jsx(xS,{scope:t.__scopeSelect,children:i.jsx(tg.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(yS,{...t,ref:e})});vS.displayName=Gu;var $o=10,[xS,fu]=mf(Gu),mL="SelectContentImpl",gL=Qd("SelectContent.RemoveScroll"),yS=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:u,side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:j,collisionPadding:y,sticky:D,hideWhenDetached:S,avoidCollisions:P,..._}=t,I=du(Gu,n),[v,B]=k.useState(null),[ee,ae]=k.useState(null),W=Kr(e,be=>B(be)),[te,Q]=k.useState(null),[de,F]=k.useState(null),L=ng(n),[z,Y]=k.useState(!1),Ce=k.useRef(!1);k.useEffect(()=>{if(v)return MN(v)},[v]),kN();const _e=k.useCallback(be=>{const[Re,...Ie]=L().map(ht=>ht.ref.current),[Me]=Ie.slice(-1),Qe=document.activeElement;for(const ht of be)if(ht===Qe||(ht?.scrollIntoView({block:"nearest"}),ht===Re&&ee&&(ee.scrollTop=0),ht===Me&&ee&&(ee.scrollTop=ee.scrollHeight),ht?.focus(),document.activeElement!==Qe))return},[L,ee]),Ae=k.useCallback(()=>_e([te,v]),[_e,te,v]);k.useEffect(()=>{z&&Ae()},[z,Ae]);const{onOpenChange:ce,triggerPointerDownPosRef:ge}=I;k.useEffect(()=>{if(v){let be={x:0,y:0};const Re=Me=>{be={x:Math.abs(Math.round(Me.pageX)-(ge.current?.x??0)),y:Math.abs(Math.round(Me.pageY)-(ge.current?.y??0))}},Ie=Me=>{be.x<=10&&be.y<=10?Me.preventDefault():v.contains(Me.target)||ce(!1),document.removeEventListener("pointermove",Re),ge.current=null};return ge.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[v,ce,ge]),k.useEffect(()=>{const be=()=>ce(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[ce]);const[De,se]=FS(be=>{const Re=L().filter(Qe=>!Qe.disabled),Ie=Re.find(Qe=>Qe.ref.current===document.activeElement),Me=OS(Re,be,Ie);Me&&setTimeout(()=>Me.ref.current.focus())}),O=k.useCallback((be,Re,Ie)=>{const Me=!Ce.current&&!Ie;(I.value!==void 0&&I.value===Re||Me)&&(Q(be),Me&&(Ce.current=!0))},[I.value]),E=k.useCallback(()=>v?.focus(),[v]),ne=k.useCallback((be,Re,Ie)=>{const Me=!Ce.current&&!Ie;(I.value!==void 0&&I.value===Re||Me)&&F(be)},[I.value]),me=r==="popper"?xv:bS,ye=me===xv?{side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:b,collisionBoundary:j,collisionPadding:y,sticky:D,hideWhenDetached:S,avoidCollisions:P}:{};return i.jsx(xS,{scope:n,content:v,viewport:ee,onViewportChange:ae,itemRefCallback:O,selectedItem:te,onItemLeave:E,itemTextRefCallback:ne,focusSelectedItem:Ae,selectedItemText:de,position:r,isPositioned:z,searchRef:De,children:i.jsx(m1,{as:gL,allowPinchZoom:!0,children:i.jsx(p1,{asChild:!0,trapped:I.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:zn(a,be=>{I.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:i.jsx(Th,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:i.jsx(me,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:be=>be.preventDefault(),..._,...ye,onPlaced:()=>Y(!0),ref:W,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:zn(_.onKeyDown,be=>{const Re=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Re&&be.key.length===1&&se(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let Me=L().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(be.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Qe=be.target,ht=Me.indexOf(Qe);Me=Me.slice(ht+1)}setTimeout(()=>_e(Me)),be.preventDefault()}})})})})})})});yS.displayName=mL;var vL="SelectItemAlignedPosition",bS=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,o=du(Gu,n),u=fu(Gu,n),[c,f]=k.useState(null),[p,m]=k.useState(null),b=Kr(e,W=>m(W)),j=ng(n),y=k.useRef(!1),D=k.useRef(!0),{viewport:S,selectedItem:P,selectedItemText:_,focusSelectedItem:I}=u,v=k.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&p&&S&&P&&_){const W=o.trigger.getBoundingClientRect(),te=p.getBoundingClientRect(),Q=o.valueNode.getBoundingClientRect(),de=_.getBoundingClientRect();if(o.dir!=="rtl"){const Qe=de.left-te.left,ht=Q.left-Qe,vt=W.left-ht,Dt=W.width+vt,le=Math.max(Dt,te.width),xt=window.innerWidth-$o,xe=ly(ht,[$o,Math.max($o,xt-le)]);c.style.minWidth=Dt+"px",c.style.left=xe+"px"}else{const Qe=te.right-de.right,ht=window.innerWidth-Q.right-Qe,vt=window.innerWidth-W.right-ht,Dt=W.width+vt,le=Math.max(Dt,te.width),xt=window.innerWidth-$o,xe=ly(ht,[$o,Math.max($o,xt-le)]);c.style.minWidth=Dt+"px",c.style.right=xe+"px"}const F=j(),L=window.innerHeight-$o*2,z=S.scrollHeight,Y=window.getComputedStyle(p),Ce=parseInt(Y.borderTopWidth,10),_e=parseInt(Y.paddingTop,10),Ae=parseInt(Y.borderBottomWidth,10),ce=parseInt(Y.paddingBottom,10),ge=Ce+_e+z+ce+Ae,De=Math.min(P.offsetHeight*5,ge),se=window.getComputedStyle(S),O=parseInt(se.paddingTop,10),E=parseInt(se.paddingBottom,10),ne=W.top+W.height/2-$o,me=L-ne,ye=P.offsetHeight/2,be=P.offsetTop+ye,Re=Ce+_e+be,Ie=ge-Re;if(Re<=ne){const Qe=F.length>0&&P===F[F.length-1].ref.current;c.style.bottom="0px";const ht=p.clientHeight-S.offsetTop-S.offsetHeight,vt=Math.max(me,ye+(Qe?E:0)+ht+Ae),Dt=Re+vt;c.style.height=Dt+"px"}else{const Qe=F.length>0&&P===F[0].ref.current;c.style.top="0px";const vt=Math.max(ne,Ce+S.offsetTop+(Qe?O:0)+ye)+Ie;c.style.height=vt+"px",S.scrollTop=Re-ne+S.offsetTop}c.style.margin=`${$o}px 0`,c.style.minHeight=De+"px",c.style.maxHeight=L+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[j,o.trigger,o.valueNode,c,p,S,P,_,o.dir,r]);gi(()=>v(),[v]);const[B,ee]=k.useState();gi(()=>{p&&ee(window.getComputedStyle(p).zIndex)},[p]);const ae=k.useCallback(W=>{W&&D.current===!0&&(v(),I?.(),D.current=!1)},[v,I]);return i.jsx(yL,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:ae,children:i.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:i.jsx(Wn.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});bS.displayName=vL;var xL="SelectPopperPosition",xv=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=$o,...o}=t,u=rg(n);return i.jsx(uw,{...u,...o,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xv.displayName=xL;var[yL,b1]=mf(Gu,{}),yv="SelectViewport",wS=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...a}=t,o=fu(yv,n),u=b1(yv,n),c=Kr(e,o.onViewportChange),f=k.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(tg.Slot,{scope:n,children:i.jsx(Wn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:zn(a.onScroll,p=>{const m=p.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:j}=u;if(j?.current&&b){const y=Math.abs(f.current-m.scrollTop);if(y>0){const D=window.innerHeight-$o*2,S=parseFloat(b.style.minHeight),P=parseFloat(b.style.height),_=Math.max(S,P);if(_<D){const I=_+y,v=Math.min(D,I),B=I-v;b.style.height=v+"px",b.style.bottom==="0px"&&(m.scrollTop=B>0?B:0,b.style.justifyContent="flex-end")}}}f.current=m.scrollTop})})})]})});wS.displayName=yv;var NS="SelectGroup",[bL,wL]=mf(NS),NL=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=Yc();return i.jsx(bL,{scope:n,id:a,children:i.jsx(Wn.div,{role:"group","aria-labelledby":a,...r,ref:e})})});NL.displayName=NS;var SS="SelectLabel",jS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=wL(SS,n);return i.jsx(Wn.div,{id:a.id,...r,ref:e})});jS.displayName=SS;var jm="SelectItem",[SL,CS]=mf(jm),_S=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...u}=t,c=du(jm,n),f=fu(jm,n),p=c.value===r,[m,b]=k.useState(o??""),[j,y]=k.useState(!1),D=Kr(e,I=>f.itemRefCallback?.(I,r,a)),S=Yc(),P=k.useRef("touch"),_=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(SL,{scope:n,value:r,disabled:a,textId:S,isSelected:p,onItemTextChange:k.useCallback(I=>{b(v=>v||(I?.textContent??"").trim())},[]),children:i.jsx(tg.ItemSlot,{scope:n,value:r,disabled:a,textValue:m,children:i.jsx(Wn.div,{role:"option","aria-labelledby":S,"data-highlighted":j?"":void 0,"aria-selected":p&&j,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...u,ref:D,onFocus:zn(u.onFocus,()=>y(!0)),onBlur:zn(u.onBlur,()=>y(!1)),onClick:zn(u.onClick,()=>{P.current!=="mouse"&&_()}),onPointerUp:zn(u.onPointerUp,()=>{P.current==="mouse"&&_()}),onPointerDown:zn(u.onPointerDown,I=>{P.current=I.pointerType}),onPointerMove:zn(u.onPointerMove,I=>{P.current=I.pointerType,a?f.onItemLeave?.():P.current==="mouse"&&I.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zn(u.onPointerLeave,I=>{I.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:zn(u.onKeyDown,I=>{f.searchRef?.current!==""&&I.key===" "||(lL.includes(I.key)&&_(),I.key===" "&&I.preventDefault())})})})})});_S.displayName=jm;var Yf="SelectItemText",AS=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,...o}=t,u=du(Yf,n),c=fu(Yf,n),f=CS(Yf,n),p=fL(Yf,n),[m,b]=k.useState(null),j=Kr(e,_=>b(_),f.onItemTextChange,_=>c.itemTextRefCallback?.(_,f.value,f.disabled)),y=m?.textContent,D=k.useMemo(()=>i.jsx("option",{value:f.value,disabled:f.disabled,children:y},f.value),[f.disabled,f.value,y]),{onNativeOptionAdd:S,onNativeOptionRemove:P}=p;return gi(()=>(S(D),()=>P(D)),[S,P,D]),i.jsxs(i.Fragment,{children:[i.jsx(Wn.span,{id:f.textId,...o,ref:j}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?sf.createPortal(o.children,u.valueNode):null]})});AS.displayName=Yf;var PS="SelectItemIndicator",kS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return CS(PS,n).isSelected?i.jsx(Wn.span,{"aria-hidden":!0,...r,ref:e}):null});kS.displayName=PS;var bv="SelectScrollUpButton",TS=k.forwardRef((t,e)=>{const n=fu(bv,t.__scopeSelect),r=b1(bv,t.__scopeSelect),[a,o]=k.useState(!1),u=Kr(e,r.onScrollButtonChange);return gi(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollTop>0;o(p)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?i.jsx(LS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop-f.offsetHeight)}}):null});TS.displayName=bv;var wv="SelectScrollDownButton",ES=k.forwardRef((t,e)=>{const n=fu(wv,t.__scopeSelect),r=b1(wv,t.__scopeSelect),[a,o]=k.useState(!1),u=Kr(e,r.onScrollButtonChange);return gi(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollHeight-f.clientHeight,m=Math.ceil(f.scrollTop)<p;o(m)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?i.jsx(LS,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop+f.offsetHeight)}}):null});ES.displayName=wv;var LS=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,o=fu("SelectScrollButton",n),u=k.useRef(null),c=ng(n),f=k.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return k.useEffect(()=>()=>f(),[f]),gi(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),i.jsx(Wn.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:zn(a.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:zn(a.onPointerMove,()=>{o.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:zn(a.onPointerLeave,()=>{f()})})}),jL="SelectSeparator",RS=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Wn.div,{"aria-hidden":!0,...r,ref:e})});RS.displayName=jL;var Nv="SelectArrow",CL=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=rg(n),o=du(Nv,n),u=fu(Nv,n);return o.open&&u.position==="popper"?i.jsx(dw,{...a,...r,ref:e}):null});CL.displayName=Nv;function DS(t){return t===""||t===void 0}var IS=k.forwardRef((t,e)=>{const{value:n,...r}=t,a=k.useRef(null),o=Kr(e,a),u=cS(n);return k.useEffect(()=>{const c=a.current,f=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==n&&m){const b=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(b)}},[u,n]),i.jsx(Eh,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});IS.displayName="BubbleSelect";function FS(t){const e=Ua(t),n=k.useRef(""),r=k.useRef(0),a=k.useCallback(u=>{const c=n.current+u;e(c),(function f(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(c)},[e]),o=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function OS(t,e,n){const a=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let u=_L(t,Math.max(o,0));a.length===1&&(u=u.filter(p=>p!==n));const f=u.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function _L(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var AL=uS,MS=fS,PL=pS,kL=mS,TL=gS,BS=vS,EL=wS,qS=jS,US=_S,LL=AS,RL=kS,zS=TS,$S=ES,VS=RS;const Tl=AL,El=PL,Zo=k.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(MS,{ref:r,className:Mn("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(kL,{asChild:!0,children:i.jsx(Md,{className:"h-4 w-4 opacity-50"})})]}));Zo.displayName=MS.displayName;const HS=k.forwardRef(({className:t,...e},n)=>i.jsx(zS,{ref:n,className:Mn("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Up,{className:"h-4 w-4"})}));HS.displayName=zS.displayName;const WS=k.forwardRef(({className:t,...e},n)=>i.jsx($S,{ref:n,className:Mn("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Md,{className:"h-4 w-4"})}));WS.displayName=$S.displayName;const Yo=k.forwardRef(({className:t,children:e,position:n="popper",...r},a)=>i.jsx(TL,{children:i.jsxs(BS,{ref:a,className:Mn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(HS,{}),i.jsx(EL,{className:Mn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(WS,{})]})}));Yo.displayName=BS.displayName;const DL=k.forwardRef(({className:t,...e},n)=>i.jsx(qS,{ref:n,className:Mn("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));DL.displayName=qS.displayName;const ha=k.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(US,{ref:r,className:Mn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(RL,{children:i.jsx(Dd,{className:"h-4 w-4"})})}),i.jsx(LL,{children:e})]}));ha.displayName=US.displayName;const IL=k.forwardRef(({className:t,...e},n)=>i.jsx(VS,{ref:n,className:Mn("-mx-1 my-1 h-px bg-muted",t),...e}));IL.displayName=VS.displayName;const FL=U.object({projectName:U.string().min(1,"Project name is required"),clientId:U.string().min(1,"Client selection is required"),location:U.string().min(1,"Location is required"),quotationType:U.enum(xm,{errorMap:()=>({message:"Quotation type is required"})})});function OL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState(null),[u,c]=k.useState(""),[,f]=za(),{toast:p}=$a(),{data:m}=Ta(),{data:b,isLoading:j}=Ln({queryKey:["/revira/api/projects"]}),{data:y,isLoading:D}=Ln({queryKey:["/revira/api/clients"]}),S=ff({resolver:hf(FL),defaultValues:{projectName:"",clientId:"",location:"",quotationType:void 0}}),P=Tr({mutationFn:async L=>wn("POST","/revira/api/projects",{...L,clientId:Number(L.clientId)}),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project created",description:"The project has been created successfully."}),S.reset(),e(!1)},onError:L=>{p({title:"Error",description:L.message||"Failed to create project",variant:"destructive"})}}),_=Tr({mutationFn:async({id:L,data:z})=>wn("PUT",`/revira/api/projects/${L}`,{...z,clientId:Number(z.clientId)}),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project updated",description:"The project has been updated successfully."}),S.reset(),r(null),e(!1)},onError:L=>{p({title:"Error",description:L.message||"Failed to update project",variant:"destructive"})}}),I=Tr({mutationFn:async L=>wn("DELETE",`/revira/api/projects/${L}`),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects"]}),p({title:"Project deleted",description:"The project has been deleted successfully."}),o(null)},onError:L=>{p({title:"Error",description:L.message||"Failed to delete project",variant:"destructive"})}}),v=L=>{n?_.mutate({id:n.id,data:L}):P.mutate(L)},B=L=>{r(L),S.reset({projectName:L.projectName,clientId:String(L.clientId),location:L.location,quotationType:L.quotationType}),e(!0)},ee=L=>{e(L),L||(r(null),S.reset())},ae=L=>y?.find(Y=>Y.id===L)?.name||"Unknown Client",W=L=>new Date(L).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase(),te=L=>{switch(L){case"Supply and Fabrication":return"text-blue-600";case"Structural Fabrication":return"text-purple-600";case"Job Work":return"text-amber-600";default:return"text-slate-600"}},Q=L=>{switch(L){case"Supply and Fabrication":return"SUPPLY & FAB";case"Structural Fabrication":return"STRUCTURAL";case"Job Work":return"JOB WORK";default:return L.toUpperCase()}},de=()=>{a&&I.mutate(a.id)},F=k.useMemo(()=>{const L=u.trim().toLowerCase(),z=[...b??[]].sort((Y,Ce)=>{const _e=Y.createdAt?new Date(Y.createdAt).getTime():0,Ae=Ce.createdAt?new Date(Ce.createdAt).getTime():0;return _e!==Ae?Ae-_e:Ce.id-Y.id});return L?z.filter(Y=>[Y.projectName,ae(Y.clientId),Y.location,Y.quotationType].join(" ").toLowerCase().includes(L)):z},[b,u,y]);return i.jsxs(Ls,{user:m,children:[i.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:i.jsx(rm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Projects"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your projects and quotations"})]})]}),i.jsxs(mi,{open:t,onOpenChange:ee,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Ue,{"data-testid":"button-add-project",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[i.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Add Project"]})}),i.jsxs(ri,{className:"sm:max-w-[500px]",children:[i.jsxs(si,{children:[i.jsx(ii,{children:n?"Edit Project":"Create New Project"}),i.jsx(tf,{children:n?"Update project details below.":"Add a new project with client and quotation details."})]}),i.jsx(pf,{...S,children:i.jsxs("form",{onSubmit:S.handleSubmit(v),className:"space-y-4",children:[i.jsx(rr,{control:S.control,name:"projectName",render:({field:L})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Project Name"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-project-name",placeholder:"Enter project name",...L})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:S.control,name:"clientId",render:({field:L})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Client Name"}),i.jsxs(Tl,{onValueChange:L.onChange,value:L.value,children:[i.jsx(Yn,{children:i.jsx(Zo,{"data-testid":"select-client",children:i.jsx(El,{placeholder:"Select a client"})})}),i.jsx(Yo,{children:D?i.jsx(ha,{value:"loading",disabled:!0,children:"Loading clients..."}):y&&y.length>0?y.map(z=>i.jsx(ha,{value:String(z.id),"data-testid":`select-client-option-${z.id}`,children:z.name},z.id)):i.jsx(ha,{value:"none",disabled:!0,children:"No clients available. Please add a client first."})})]}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:S.control,name:"location",render:({field:L})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Location"}),i.jsx(Yn,{children:i.jsx(nt,{"data-testid":"input-location",placeholder:"Enter location",...L})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:S.control,name:"quotationType",render:({field:L})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Quotation Type"}),i.jsxs(Tl,{onValueChange:L.onChange,value:L.value,children:[i.jsx(Yn,{children:i.jsx(Zo,{"data-testid":"select-quotation-type",children:i.jsx(El,{placeholder:"Select quotation type"})})}),i.jsx(Yo,{children:xm.map(z=>i.jsx(ha,{value:z,"data-testid":`select-quotation-option-${z.replace(/\s+/g,"-").toLowerCase()}`,children:z},z))})]}),i.jsx(Xn,{})]})}),i.jsx(Ue,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:P.isPending||_.isPending,"data-testid":"button-submit-project",children:P.isPending||_.isPending?n?"Updating...":"Creating...":n?"Update Project":"Create Project"})]})})]})]})]}),i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Kv,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx(nt,{value:u,onChange:L=>c(L.target.value),placeholder:"Search by project, client, location, type...",className:"pl-9","data-testid":"input-search-projects"})]})]}),i.jsx(Cn,{className:"border-0 shadow-lg overflow-hidden",children:i.jsxs(_n,{className:"p-0",children:[i.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Project Identifier"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Partner"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Geographic Site"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Creation Date"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),j?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(L=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 ml-auto"})})]},L))}):F.length>0?i.jsxs("div",{className:"divide-y divide-slate-100",children:[F.map(L=>i.jsxs("div",{"data-testid":`row-project-${L.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:"P"}),i.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-project-name-${L.id}`,children:L.projectName.length>15?L.projectName.substring(0,15)+"...":L.projectName})]}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"font-semibold text-slate-700 uppercase text-sm","data-testid":`text-client-name-${L.id}`,children:ae(L.clientId)})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${L.id}`,children:L.location})}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(JC,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-created-date-${L.id}`,children:L.createdAt?W(L.createdAt):"N/A"})]}),i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:`font-bold text-xs uppercase tracking-wide ${te(L.quotationType)}`,"data-testid":`text-status-${L.id}`,children:Q(L.quotationType)})}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/revira/projects/${L.id}/quotation`),"data-testid":`button-quotation-${L.id}`,title:"Create Quotation",children:i.jsx(_a,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/revira/projects/${L.id}/invoice`),"data-testid":`button-invoice-${L.id}`,title:"Create Invoice",children:i.jsx(rv,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/revira/projects/${L.id}/gate-pass`),"data-testid":`button-gate-pass-${L.id}`,title:"Create Gate Pass",children:i.jsx(ev,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/revira/projects/${L.id}/delivery-challan`),"data-testid":`button-delivery-challan-${L.id}`,title:"Create Delivery Challan",children:i.jsx(J0,{className:"w-4 h-4"})}),i.jsx(Ue,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/revira/projects/${L.id}/ledger`),"data-testid":`button-ledger-${L.id}`,title:"Open Ledger",children:i.jsx(p2,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>B(L),"data-testid":`button-edit-project-${L.id}`,title:"Edit Project",children:i.jsx(Uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(L),disabled:I.isPending,"data-testid":`button-delete-project-${L.id}`,title:"Delete Project",children:i.jsx(pr,{className:"w-4 h-4"})})]})]},L.id)),F.map(L=>i.jsxs("div",{className:"md:hidden px-4 py-4 space-y-3 hover:bg-slate-50/50","data-testid":`card-project-${L.id}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900",children:L.projectName}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:ae(L.clientId)}),i.jsx("p",{className:"text-xs text-slate-500",children:L.location})]}),i.jsx("span",{className:`font-bold text-[10px] uppercase tracking-wide ${te(L.quotationType)}`,children:Q(L.quotationType)})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>f(`/revira/projects/${L.id}/quotation`),"data-testid":`button-quotation-mobile-${L.id}`,children:i.jsx(_a,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>f(`/revira/projects/${L.id}/invoice`),"data-testid":`button-invoice-mobile-${L.id}`,children:i.jsx(rv,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>f(`/revira/projects/${L.id}/gate-pass`),"data-testid":`button-gate-pass-mobile-${L.id}`,children:i.jsx(ev,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>f(`/revira/projects/${L.id}/delivery-challan`),"data-testid":`button-delivery-challan-mobile-${L.id}`,children:i.jsx(J0,{className:"w-4 h-4"})}),i.jsx(Ue,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>f(`/revira/projects/${L.id}/ledger`),"data-testid":`button-ledger-mobile-${L.id}`,title:"Open Ledger",children:i.jsx(p2,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>B(L),"data-testid":`button-edit-project-mobile-${L.id}`,children:i.jsx(Uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>o(L),disabled:I.isPending,"data-testid":`button-delete-project-mobile-${L.id}`,children:i.jsx(pr,{className:"w-4 h-4"})})]})]},`mobile-${L.id}`))]}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-teal-500/10 flex items-center justify-center mb-4",children:i.jsx(rm,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No projects yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by creating your first project. Add clients first if you haven't already."}),i.jsxs(Ue,{onClick:()=>e(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[i.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Create First Project"]})]})]})}),i.jsx(mi,{open:!!a,onOpenChange:L=>!L&&o(null),children:i.jsxs(ri,{className:"sm:max-w-md",children:[i.jsxs(si,{children:[i.jsx(ii,{children:"Delete Project?"}),i.jsx(tf,{children:a?`Are you sure you want to delete "${a.projectName}"? This action cannot be undone.`:"Are you sure you want to delete this project? This action cannot be undone."})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>o(null),disabled:I.isPending,"data-testid":"button-cancel-delete-project",children:"Cancel"}),i.jsx(Ue,{type:"button",variant:"destructive",onClick:de,disabled:I.isPending,"data-testid":"button-confirm-delete-project",children:I.isPending?"Deleting...":"Delete"})]})]})})]})}var w1="Checkbox",[ML]=Il(w1),[BL,qL]=ML(w1),GS=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:u,disabled:c,value:f="on",onCheckedChange:p,form:m,...b}=t,[j,y]=k.useState(null),D=Kr(e,B=>y(B)),S=k.useRef(!1),P=j?m||!!j.closest("form"):!0,[_=!1,I]=Jc({prop:a,defaultProp:o,onChange:p}),v=k.useRef(_);return k.useEffect(()=>{const B=j?.form;if(B){const ee=()=>I(v.current);return B.addEventListener("reset",ee),()=>B.removeEventListener("reset",ee)}},[j,I]),i.jsxs(BL,{scope:n,state:_,disabled:c,children:[i.jsx(Wn.button,{type:"button",role:"checkbox","aria-checked":Xc(_)?"mixed":_,"aria-required":u,"data-state":ZS(_),"data-disabled":c?"":void 0,disabled:c,value:f,...b,ref:D,onKeyDown:zn(t.onKeyDown,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:zn(t.onClick,B=>{I(ee=>Xc(ee)?!0:!ee),P&&(S.current=B.isPropagationStopped(),S.current||B.stopPropagation())})}),P&&i.jsx(UL,{control:j,bubbles:!S.current,name:r,value:f,checked:_,required:u,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:Xc(o)?!1:o})]})});GS.displayName=w1;var KS="CheckboxIndicator",QS=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,o=qL(KS,n);return i.jsx(cu,{present:r||Xc(o.state)||o.state===!0,children:i.jsx(Wn.span,{"data-state":ZS(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});QS.displayName=KS;var UL=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:a,...o}=t,u=k.useRef(null),c=cS(n),f=Jb(e);k.useEffect(()=>{const m=u.current,b=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(b,"checked").set;if(c!==n&&y){const D=new Event("click",{bubbles:r});m.indeterminate=Xc(n),y.call(m,Xc(n)?!1:n),m.dispatchEvent(D)}},[c,n,r]);const p=k.useRef(Xc(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,...o,tabIndex:-1,ref:u,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Xc(t){return t==="indeterminate"}function ZS(t){return Xc(t)?"indeterminate":t?"checked":"unchecked"}var YS=GS,zL=QS;const nh=k.forwardRef(({className:t,...e},n)=>i.jsx(YS,{ref:n,className:Mn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(zL,{className:Mn("flex items-center justify-center text-current"),children:i.jsx(Dd,{className:"h-4 w-4"})})}));nh.displayName=YS.displayName;const XS=U.object({name:U.string().min(1,"Name is required"),username:U.string().email("Please enter a valid email address"),mobile:U.string().min(10,"Valid mobile number is required"),password:U.string().min(6,"Password must be at least 6 characters"),role:U.enum(jh,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:U.array(U.number()).optional()}),$L=XS.partial().extend({name:U.string().min(1,"Name is required"),username:U.string().email("Please enter a valid email address"),mobile:U.string().min(10,"Valid mobile number is required"),role:U.enum(jh,{errorMap:()=>({message:"Role is required"})}),password:U.string().optional()});function VL(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[a,o]=k.useState([]),{toast:u}=$a(),{data:c}=Ta(),f=c?.role==="Administrator",{data:p,isLoading:m}=Ln({queryKey:["/revira/api/users"]}),{data:b}=Ln({queryKey:["/revira/api/clients"]}),j=ff({resolver:hf(n?$L:XS),defaultValues:{name:"",username:"",mobile:"",password:"",role:"Standard",assignedClientIds:[]}}),y=j.watch("role"),D=Tr({mutationFn:async ae=>wn("POST","/revira/api/users",{...ae,email:ae.username,assignedClientIds:a}),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User created",description:"The user has been created successfully."}),j.reset(),o([]),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to create user",variant:"destructive"})}}),S=Tr({mutationFn:async({id:ae,data:W})=>{const te={name:W.name,username:W.username,email:W.username,mobile:W.mobile,role:W.role,assignedClientIds:a};return W.password&&W.password.length>=6&&(te.password=W.password),wn("PUT",`/revira/api/users/${ae}`,te)},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User updated",description:"The user has been updated successfully."}),j.reset(),o([]),r(null),e(!1)},onError:ae=>{u({title:"Error",description:ae.message||"Failed to update user",variant:"destructive"})}}),P=Tr({mutationFn:async ae=>wn("DELETE",`/revira/api/users/${ae}`),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/users"]}),u({title:"User deleted",description:"The user has been deleted successfully."})},onError:ae=>{u({title:"Error",description:ae.message||"Failed to delete user",variant:"destructive"})}}),_=async ae=>{r(ae),j.reset({name:ae.name,username:ae.username,mobile:ae.mobile||"",password:"",role:ae.role});try{const te=await(await fetch(`/revira/api/users/${ae.id}/clients`)).json();o(te)}catch{o([])}e(!0)},I=ae=>{ae||(j.reset(),r(null),o([])),e(ae)},v=ae=>{n?S.mutate({id:n.id,data:ae}):D.mutate(ae)},B=ae=>{o(W=>W.includes(ae)?W.filter(te=>te!==ae):[...W,ae])},ee=ae=>ae==="Administrator"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700";return i.jsxs(Ls,{user:c,children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-1","data-testid":"text-page-title",children:"User Management"}),i.jsx("p",{className:"text-slate-500","data-testid":"text-page-description",children:"Manage system users and their access permissions"})]}),f&&i.jsxs(mi,{open:t,onOpenChange:I,children:[i.jsxs(Ue,{onClick:()=>{r(null),j.reset(),o([]),e(!0)},className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] hover:from-[#b51c2c] hover:to-[#a01827] shadow-lg shadow-red-200/50","data-testid":"button-add-user",children:[i.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Add User"]}),i.jsxs(ri,{className:"sm:max-w-[500px]",children:[i.jsxs(si,{children:[i.jsx(ii,{children:n?"Edit User":"Add New User"}),i.jsx(tf,{children:n?"Update the user details below.":"Fill in the details to create a new user account."})]}),i.jsx(pf,{...j,children:i.jsxs("form",{onSubmit:j.handleSubmit(v),className:"space-y-4",children:[i.jsx(rr,{control:j.control,name:"name",render:({field:ae})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"User Name"}),i.jsx(Yn,{children:i.jsx(nt,{placeholder:"Enter full name",...ae,"data-testid":"input-user-name"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:j.control,name:"username",render:({field:ae})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Email ID"}),i.jsx(Yn,{children:i.jsx(nt,{type:"email",placeholder:"Enter email address",...ae,"data-testid":"input-user-email"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:j.control,name:"mobile",render:({field:ae})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Mobile No."}),i.jsx(Yn,{children:i.jsx(nt,{placeholder:"Enter mobile number",...ae,"data-testid":"input-user-mobile"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:j.control,name:"password",render:({field:ae})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:n?"New Password (leave blank to keep current)":"Password"}),i.jsx(Yn,{children:i.jsx(nt,{type:"password",placeholder:n?"Enter new password (optional)":"Enter password",...ae,"data-testid":"input-user-password"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:j.control,name:"role",render:({field:ae})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Role"}),i.jsxs(Tl,{onValueChange:ae.onChange,value:ae.value,children:[i.jsx(Yn,{children:i.jsx(Zo,{"data-testid":"select-user-role",children:i.jsx(El,{placeholder:"Select role"})})}),i.jsx(Yo,{children:jh.map(W=>i.jsx(ha,{value:W,"data-testid":`option-role-${W.toLowerCase()}`,children:W},W))})]}),i.jsx(Xn,{})]})}),y==="Standard"&&b&&b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Assign Clients"}),i.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Standard users can only access projects of assigned clients"}),i.jsx("div",{className:"border rounded-md p-3 max-h-40 overflow-y-auto space-y-2",children:b.map(ae=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nh,{id:`client-${ae.id}`,checked:a.includes(ae.id),onCheckedChange:()=>B(ae.id),"data-testid":`checkbox-client-${ae.id}`}),i.jsx("label",{htmlFor:`client-${ae.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:ae.name})]},ae.id))})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>I(!1),"data-testid":"button-cancel",children:"Cancel"}),i.jsx(Ue,{type:"submit",disabled:D.isPending||S.isPending,className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c]","data-testid":"button-submit-user",children:D.isPending||S.isPending?"Saving...":n?"Update User":"Create User"})]})]})})]})]})]}),i.jsx(Cn,{className:"shadow-lg border-slate-200/50 overflow-hidden",children:i.jsxs(_n,{className:"p-0",children:[i.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mobile"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),m?i.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(ae=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},ae))}):p&&p.length>0?i.jsx("div",{className:"divide-y divide-slate-100",children:p.map(ae=>i.jsxs("div",{"data-testid":`row-user-${ae.id}`,className:"grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[i.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:ae.name?.charAt(0).toUpperCase()||"U"}),i.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-user-name-${ae.id}`,children:ae.name})]}),i.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[i.jsx(uu,{className:"w-4 h-4 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-email-${ae.id}`,children:ae.username})]}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx(Eb,{className:"w-4 h-4 text-slate-400"}),i.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-mobile-${ae.id}`,children:ae.mobile||"-"})]}),i.jsx("div",{className:"col-span-2",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${ee(ae.role||"Standard")}`,"data-testid":`text-user-role-${ae.id}`,children:[i.jsx(o_,{className:"w-3 h-3"}),ae.role||"Standard"]})}),i.jsx("div",{className:"col-span-2 flex items-center justify-end gap-1",children:f&&i.jsxs(i.Fragment,{children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>_(ae),"data-testid":`button-edit-user-${ae.id}`,title:"Edit User",children:i.jsx(Uu,{className:"w-4 h-4"})}),ae.id!==c?.id&&i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>{confirm(`Are you sure you want to delete ${ae.name}?`)&&P.mutate(ae.id)},disabled:P.isPending,"data-testid":`button-delete-user-${ae.id}`,title:"Delete User",children:i.jsx(pr,{className:"w-4 h-4"})})]})})]},ae.id))}):i.jsxs("div",{className:"py-16 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-slate-500/10 flex items-center justify-center mb-4",children:i.jsx(oh,{className:"w-8 h-8 text-primary/60"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No users yet"}),i.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first user account."}),f&&i.jsxs(Ue,{onClick:()=>e(!0),className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] shadow-lg shadow-red-200/50",children:[i.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})]})})]})}const kr=k.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:Mn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));kr.displayName="Textarea";var N1="Collapsible",[HL,JS]=Il(N1),[WL,S1]=HL(N1),e4=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:u,...c}=t,[f=!1,p]=Jc({prop:r,defaultProp:a,onChange:u});return i.jsx(WL,{scope:n,disabled:o,contentId:Yc(),open:f,onOpenToggle:k.useCallback(()=>p(m=>!m),[p]),children:i.jsx(Wn.div,{"data-state":C1(f),"data-disabled":o?"":void 0,...c,ref:e})})});e4.displayName=N1;var t4="CollapsibleTrigger",n4=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,a=S1(t4,n);return i.jsx(Wn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":C1(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:e,onClick:zn(t.onClick,a.onOpenToggle)})});n4.displayName=t4;var j1="CollapsibleContent",r4=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=S1(j1,t.__scopeCollapsible);return i.jsx(cu,{present:n||a.open,children:({present:o})=>i.jsx(GL,{...r,ref:e,present:o})})});r4.displayName=j1;var GL=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=t,u=S1(j1,n),[c,f]=k.useState(r),p=k.useRef(null),m=Kr(e,p),b=k.useRef(0),j=b.current,y=k.useRef(0),D=y.current,S=u.open||c,P=k.useRef(S),_=k.useRef(void 0);return k.useEffect(()=>{const I=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(I)},[]),gi(()=>{const I=p.current;if(I){_.current=_.current||{transitionDuration:I.style.transitionDuration,animationName:I.style.animationName},I.style.transitionDuration="0s",I.style.animationName="none";const v=I.getBoundingClientRect();b.current=v.height,y.current=v.width,P.current||(I.style.transitionDuration=_.current.transitionDuration,I.style.animationName=_.current.animationName),f(r)}},[u.open,r]),i.jsx(Wn.div,{"data-state":C1(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":D?`${D}px`:void 0,...t.style},children:S&&a})});function C1(t){return t?"open":"closed"}var KL=e4,QL=n4,ZL=r4,vc="Accordion",YL=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[_1,XL,JL]=$v(vc),[sg]=Il(vc,[JL,JS]),A1=JS(),s4=xn.forwardRef((t,e)=>{const{type:n,...r}=t,a=r,o=r;return i.jsx(_1.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(rR,{...o,ref:e}):i.jsx(nR,{...a,ref:e})})});s4.displayName=vc;var[i4,eR]=sg(vc),[a4,tR]=sg(vc,{collapsible:!1}),nR=xn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...u}=t,[c,f]=Jc({prop:n,defaultProp:r,onChange:a});return i.jsx(i4,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:f,onItemClose:xn.useCallback(()=>o&&f(""),[o,f]),children:i.jsx(a4,{scope:t.__scopeAccordion,collapsible:o,children:i.jsx(o4,{...u,ref:e})})})}),rR=xn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=t,[u=[],c]=Jc({prop:n,defaultProp:r,onChange:a}),f=xn.useCallback(m=>c((b=[])=>[...b,m]),[c]),p=xn.useCallback(m=>c((b=[])=>b.filter(j=>j!==m)),[c]);return i.jsx(i4,{scope:t.__scopeAccordion,value:u,onItemOpen:f,onItemClose:p,children:i.jsx(a4,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(o4,{...o,ref:e})})})}),[sR,ig]=sg(vc),o4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...u}=t,c=xn.useRef(null),f=Kr(c,e),p=XL(n),b=lS(a)==="ltr",j=zn(t.onKeyDown,y=>{if(!YL.includes(y.key))return;const D=y.target,S=p().filter(te=>!te.ref.current?.disabled),P=S.findIndex(te=>te.ref.current===D),_=S.length;if(P===-1)return;y.preventDefault();let I=P;const v=0,B=_-1,ee=()=>{I=P+1,I>B&&(I=v)},ae=()=>{I=P-1,I<v&&(I=B)};switch(y.key){case"Home":I=v;break;case"End":I=B;break;case"ArrowRight":o==="horizontal"&&(b?ee():ae());break;case"ArrowDown":o==="vertical"&&ee();break;case"ArrowLeft":o==="horizontal"&&(b?ae():ee());break;case"ArrowUp":o==="vertical"&&ae();break}const W=I%_;S[W].ref.current?.focus()});return i.jsx(sR,{scope:n,disabled:r,direction:a,orientation:o,children:i.jsx(_1.Slot,{scope:n,children:i.jsx(Wn.div,{...u,"data-orientation":o,ref:f,onKeyDown:r?void 0:j})})})}),Cm="AccordionItem",[iR,P1]=sg(Cm),l4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...a}=t,o=ig(Cm,n),u=eR(Cm,n),c=A1(n),f=Yc(),p=r&&u.value.includes(r)||!1,m=o.disabled||t.disabled;return i.jsx(iR,{scope:n,open:p,disabled:m,triggerId:f,children:i.jsx(KL,{"data-orientation":o.orientation,"data-state":p4(p),...c,...a,ref:e,disabled:m,open:p,onOpenChange:b=>{b?u.onItemOpen(r):u.onItemClose(r)}})})});l4.displayName=Cm;var c4="AccordionHeader",u4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=ig(vc,n),o=P1(c4,n);return i.jsx(Wn.h3,{"data-orientation":a.orientation,"data-state":p4(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});u4.displayName=c4;var Sv="AccordionTrigger",d4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=ig(vc,n),o=P1(Sv,n),u=tR(Sv,n),c=A1(n);return i.jsx(_1.ItemSlot,{scope:n,children:i.jsx(QL,{"aria-disabled":o.open&&!u.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...r,ref:e})})});d4.displayName=Sv;var f4="AccordionContent",h4=xn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=ig(vc,n),o=P1(f4,n),u=A1(n);return i.jsx(ZL,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...u,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});h4.displayName=f4;function p4(t){return t?"open":"closed"}var aR=s4,oR=l4,lR=u4,m4=d4,g4=h4;const b0=aR,Wp=k.forwardRef(({className:t,...e},n)=>i.jsx(oR,{ref:n,className:Mn("border-b",t),...e}));Wp.displayName="AccordionItem";const Gp=k.forwardRef(({className:t,children:e,...n},r)=>i.jsx(lR,{className:"flex",children:i.jsxs(m4,{ref:r,className:Mn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(Md,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Gp.displayName=m4.displayName;const Kp=k.forwardRef(({className:t,children:e,...n},r)=>i.jsx(g4,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:Mn("pb-4 pt-0",t),children:e})}));Kp.displayName=g4.displayName;const cR="modulepreload",uR=function(t){return"/revira/"+t},cy={},w0=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let f=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(n.map(p=>{if(p=uR(p),p in cy)return;cy[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const j=document.createElement("link");if(j.rel=m?"stylesheet":cR,m||(j.as="script"),j.crossOrigin="",j.href=p,c&&j.setAttribute("nonce",c),document.head.appendChild(j),m)return new Promise((y,D)=>{j.addEventListener("load",y),j.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function Wr(t){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(t)}var tl=Uint8Array,ao=Uint16Array,k1=Int32Array,T1=new tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E1=new tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uy=new tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v4=function(t,e){for(var n=new ao(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new k1(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return{b:n,r:a}},x4=v4(T1,2),dR=x4.b,jv=x4.r;dR[28]=258,jv[258]=28;var fR=v4(E1,0),dy=fR.r,Cv=new ao(32768);for(var ps=0;ps<32768;++ps){var Hc=(ps&43690)>>1|(ps&21845)<<1;Hc=(Hc&52428)>>2|(Hc&13107)<<2,Hc=(Hc&61680)>>4|(Hc&3855)<<4,Cv[ps]=((Hc&65280)>>8|(Hc&255)<<8)>>1}var rh=(function(t,e,n){for(var r=t.length,a=0,o=new ao(e);a<r;++a)t[a]&&++o[t[a]-1];var u=new ao(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(n){c=new ao(1<<e);var f=15-e;for(a=0;a<r;++a)if(t[a])for(var p=a<<4|t[a],m=e-t[a],b=u[t[a]-1]++<<m,j=b|(1<<m)-1;b<=j;++b)c[Cv[b]>>f]=p}else for(c=new ao(r),a=0;a<r;++a)t[a]&&(c[a]=Cv[u[t[a]-1]++]>>15-t[a]);return c}),Ku=new tl(288);for(var ps=0;ps<144;++ps)Ku[ps]=8;for(var ps=144;ps<256;++ps)Ku[ps]=9;for(var ps=256;ps<280;++ps)Ku[ps]=7;for(var ps=280;ps<288;++ps)Ku[ps]=8;var _m=new tl(32);for(var ps=0;ps<32;++ps)_m[ps]=5;var hR=rh(Ku,9,0),pR=rh(_m,5,0),y4=function(t){return(t+7)/8|0},mR=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new tl(t.subarray(e,n))},cc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Wf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},N0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,o=n.slice();if(!a)return{t:w4,l:0};if(a==1){var u=new tl(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(ee,ae){return ee.f-ae.f}),n.push({s:-1,f:25001});var c=n[0],f=n[1],p=0,m=1,b=2;for(n[0]={s:-1,f:c.f+f.f,l:c,r:f};m!=a-1;)c=n[n[p].f<n[b].f?p++:b++],f=n[p!=m&&n[p].f<n[b].f?p++:b++],n[m++]={s:-1,f:c.f+f.f,l:c,r:f};for(var j=o[0].s,r=1;r<a;++r)o[r].s>j&&(j=o[r].s);var y=new ao(j+1),D=_v(n[m-1],y,0);if(D>e){var r=0,S=0,P=D-e,_=1<<P;for(o.sort(function(ae,W){return y[W.s]-y[ae.s]||ae.f-W.f});r<a;++r){var I=o[r].s;if(y[I]>e)S+=_-(1<<D-y[I]),y[I]=e;else break}for(S>>=P;S>0;){var v=o[r].s;y[v]<e?S-=1<<e-y[v]++-1:++r}for(;r>=0&&S;--r){var B=o[r].s;y[B]==e&&(--y[B],++S)}D=e}return{t:new tl(y),l:D}},_v=function(t,e,n){return t.s==-1?Math.max(_v(t.l,e,n+1),_v(t.r,e,n+1)):e[t.s]=n},fy=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ao(++e),r=0,a=t[0],o=1,u=function(f){n[r++]=f},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=t[c]}return{c:n.subarray(0,r),n:e}},Gf=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},b4=function(t,e,n){var r=n.length,a=y4(e+2);t[a]=r&255,t[a+1]=r>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<r;++o)t[a+o+4]=n[o];return(a+4+r)*8},hy=function(t,e,n,r,a,o,u,c,f,p,m){cc(e,m++,n),++a[256];for(var b=N0(a,15),j=b.t,y=b.l,D=N0(o,15),S=D.t,P=D.l,_=fy(j),I=_.c,v=_.n,B=fy(S),ee=B.c,ae=B.n,W=new ao(19),te=0;te<I.length;++te)++W[I[te]&31];for(var te=0;te<ee.length;++te)++W[ee[te]&31];for(var Q=N0(W,7),de=Q.t,F=Q.l,L=19;L>4&&!de[uy[L-1]];--L);var z=p+5<<3,Y=Gf(a,Ku)+Gf(o,_m)+u,Ce=Gf(a,j)+Gf(o,S)+u+14+3*L+Gf(W,de)+2*W[16]+3*W[17]+7*W[18];if(f>=0&&z<=Y&&z<=Ce)return b4(e,m,t.subarray(f,f+p));var _e,Ae,ce,ge;if(cc(e,m,1+(Ce<Y)),m+=2,Ce<Y){_e=rh(j,y,0),Ae=j,ce=rh(S,P,0),ge=S;var De=rh(de,F,0);cc(e,m,v-257),cc(e,m+5,ae-1),cc(e,m+10,L-4),m+=14;for(var te=0;te<L;++te)cc(e,m+3*te,de[uy[te]]);m+=3*L;for(var se=[I,ee],O=0;O<2;++O)for(var E=se[O],te=0;te<E.length;++te){var ne=E[te]&31;cc(e,m,De[ne]),m+=de[ne],ne>15&&(cc(e,m,E[te]>>5&127),m+=E[te]>>12)}}else _e=hR,Ae=Ku,ce=pR,ge=_m;for(var te=0;te<c;++te){var me=r[te];if(me>255){var ne=me>>18&31;Wf(e,m,_e[ne+257]),m+=Ae[ne+257],ne>7&&(cc(e,m,me>>23&31),m+=T1[ne]);var ye=me&31;Wf(e,m,ce[ye]),m+=ge[ye],ye>3&&(Wf(e,m,me>>5&8191),m+=E1[ye])}else Wf(e,m,_e[me]),m+=Ae[me]}return Wf(e,m,_e[256]),m+Ae[256]},gR=new k1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),w4=new tl(0),vR=function(t,e,n,r,a,o){var u=o.z||t.length,c=new tl(r+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(r,c.length-a),p=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var b=gR[e-1],j=b>>13,y=b&8191,D=(1<<n)-1,S=o.p||new ao(32768),P=o.h||new ao(D+1),_=Math.ceil(n/3),I=2*_,v=function(Dt){return(t[Dt]^t[Dt+1]<<_^t[Dt+2]<<I)&D},B=new k1(25e3),ee=new ao(288),ae=new ao(32),W=0,te=0,Q=o.i||0,de=0,F=o.w||0,L=0;Q+2<u;++Q){var z=v(Q),Y=Q&32767,Ce=P[z];if(S[Y]=Ce,P[z]=Y,F<=Q){var _e=u-Q;if((W>7e3||de>24576)&&(_e>423||!p)){m=hy(t,f,0,B,ee,ae,te,de,L,Q-L,m),de=W=te=0,L=Q;for(var Ae=0;Ae<286;++Ae)ee[Ae]=0;for(var Ae=0;Ae<30;++Ae)ae[Ae]=0}var ce=2,ge=0,De=y,se=Y-Ce&32767;if(_e>2&&z==v(Q-se))for(var O=Math.min(j,_e)-1,E=Math.min(32767,Q),ne=Math.min(258,_e);se<=E&&--De&&Y!=Ce;){if(t[Q+ce]==t[Q+ce-se]){for(var me=0;me<ne&&t[Q+me]==t[Q+me-se];++me);if(me>ce){if(ce=me,ge=se,me>O)break;for(var ye=Math.min(se,me-2),be=0,Ae=0;Ae<ye;++Ae){var Re=Q-se+Ae&32767,Ie=S[Re],Me=Re-Ie&32767;Me>be&&(be=Me,Ce=Re)}}}Y=Ce,Ce=S[Y],se+=Y-Ce&32767}if(ge){B[de++]=268435456|jv[ce]<<18|dy[ge];var Qe=jv[ce]&31,ht=dy[ge]&31;te+=T1[Qe]+E1[ht],++ee[257+Qe],++ae[ht],F=Q+ce,++W}else B[de++]=t[Q],++ee[t[Q]]}}for(Q=Math.max(Q,F);Q<u;++Q)B[de++]=t[Q],++ee[t[Q]];m=hy(t,f,p,B,ee,ae,te,de,L,Q-L,m),p||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=P,o.p=S,o.i=Q,o.w=F)}else{for(var Q=o.w||0;Q<u+p;Q+=65535){var vt=Q+65535;vt>=u&&(f[m/8|0]=p,vt=u),m=b4(f,m+1,t.subarray(Q,vt))}o.i=u}return mR(c,0,r+y4(m)+a)},N4=function(){var t=1,e=0;return{p:function(n){for(var r=t,a=e,o=n.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=r+=n[u];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}t=r,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},xR=function(t,e,n,r,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new tl(o.length+t.length);u.set(o),u.set(t,o.length),t=u,a.w=o.length}return vR(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,a)},S4=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yR=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=N4();a.p(e.dictionary),S4(t,2,a.d())}};function Av(t,e){e||(e={});var n=N4();n.p(t);var r=xR(t,e,e.dictionary?6:2,4);return yR(r,e),S4(r,r.length-4,n.d()),r}var bR=typeof TextDecoder<"u"&&new TextDecoder,wR=0;try{bR.decode(w4,{stream:!0}),wR=1}catch{}function NR(t){if(Array.isArray(t))return t}function SR(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,o,u,c=[],f=!0,p=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(f=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){p=!0,a=m}finally{try{if(!f&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(p)throw a}}return c}}function py(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function jR(t,e){if(t){if(typeof t=="string")return py(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?py(t,e):void 0}}function CR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function my(t,e){return NR(t)||SR(t,e)||jR(t,e)||CR()}function gy(t,e="utf8"){return new TextDecoder(e).decode(t)}const _R=new TextEncoder;function AR(t){return _R.encode(t)}const PR=1024*8,kR=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),S0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class L1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=PR,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=n.offset?n.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof L1)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=S0[n].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+r);if(this.littleEndian===kR&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+r));c.reverse();const f=new S0[n](c.buffer);return this.offset+=r,f.reverse(),f}const u=new S0[n](o);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return gy(this.readBytes(e))}decodeText(e=1,n="utf8"){return gy(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(AR(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function gf(t){let e=t.length;for(;--e>=0;)t[e]=0}const TR=3,ER=258,j4=29,LR=256,RR=LR+1+j4,C4=30,DR=512,IR=new Array((RR+2)*2);gf(IR);const FR=new Array(C4*2);gf(FR);const OR=new Array(DR);gf(OR);const MR=new Array(ER-TR+1);gf(MR);const BR=new Array(j4);gf(BR);const qR=new Array(C4);gf(qR);const UR=(t,e,n,r)=>{let a=t&65535|0,o=t>>>16&65535|0,u=0;for(;n!==0;){u=n>2e3?2e3:n,n-=u;do a=a+e[r++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Pv=UR;const zR=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},$R=new Uint32Array(zR()),VR=(t,e,n,r)=>{const a=$R,o=r+n;t^=-1;for(let u=r;u<o;u++)t=t>>>8^a[(t^e[u])&255];return t^-1};var Nl=VR,kv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const HR=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var WR=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)HR(n,r)&&(t[r]=n[r])}}return t},GR=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,o=t.length;r<o;r++){let u=t[r];n.set(u,a),a+=u.length}return n},A4={assign:WR,flattenChunks:GR};let P4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{P4=!1}const _h=new Uint8Array(256);for(let t=0;t<256;t++)_h[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_h[254]=_h[254]=1;var KR=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,o,u=t.length,c=0;for(a=0;a<u;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|n&63):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|n&63):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|n&63);return e};const QR=(t,e)=>{if(e<65534&&t.subarray&&P4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var ZR=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const o=new Array(n*2);for(a=0,r=0;r<n;){let u=t[r++];if(u<128){o[a++]=u;continue}let c=_h[u];if(c>4){o[a++]=65533,r+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&r<n;)u=u<<6|t[r++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return QR(o,a)},YR=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+_h[t[n]]>e?n:e},Tv={string2buf:KR,buf2string:ZR,utf8border:YR};function XR(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var JR=XR;const Pp=16209,eD=16191;var tD=function(e,n){let r,a,o,u,c,f,p,m,b,j,y,D,S,P,_,I,v,B,ee,ae,W,te,Q,de;const F=e.state;r=e.next_in,Q=e.input,a=r+(e.avail_in-5),o=e.next_out,de=e.output,u=o-(n-e.avail_out),c=o+(e.avail_out-257),f=F.dmax,p=F.wsize,m=F.whave,b=F.wnext,j=F.window,y=F.hold,D=F.bits,S=F.lencode,P=F.distcode,_=(1<<F.lenbits)-1,I=(1<<F.distbits)-1;e:do{D<15&&(y+=Q[r++]<<D,D+=8,y+=Q[r++]<<D,D+=8),v=S[y&_];t:for(;;){if(B=v>>>24,y>>>=B,D-=B,B=v>>>16&255,B===0)de[o++]=v&65535;else if(B&16){ee=v&65535,B&=15,B&&(D<B&&(y+=Q[r++]<<D,D+=8),ee+=y&(1<<B)-1,y>>>=B,D-=B),D<15&&(y+=Q[r++]<<D,D+=8,y+=Q[r++]<<D,D+=8),v=P[y&I];n:for(;;){if(B=v>>>24,y>>>=B,D-=B,B=v>>>16&255,B&16){if(ae=v&65535,B&=15,D<B&&(y+=Q[r++]<<D,D+=8,D<B&&(y+=Q[r++]<<D,D+=8)),ae+=y&(1<<B)-1,ae>f){e.msg="invalid distance too far back",F.mode=Pp;break e}if(y>>>=B,D-=B,B=o-u,ae>B){if(B=ae-B,B>m&&F.sane){e.msg="invalid distance too far back",F.mode=Pp;break e}if(W=0,te=j,b===0){if(W+=p-B,B<ee){ee-=B;do de[o++]=j[W++];while(--B);W=o-ae,te=de}}else if(b<B){if(W+=p+b-B,B-=b,B<ee){ee-=B;do de[o++]=j[W++];while(--B);if(W=0,b<ee){B=b,ee-=B;do de[o++]=j[W++];while(--B);W=o-ae,te=de}}}else if(W+=b-B,B<ee){ee-=B;do de[o++]=j[W++];while(--B);W=o-ae,te=de}for(;ee>2;)de[o++]=te[W++],de[o++]=te[W++],de[o++]=te[W++],ee-=3;ee&&(de[o++]=te[W++],ee>1&&(de[o++]=te[W++]))}else{W=o-ae;do de[o++]=de[W++],de[o++]=de[W++],de[o++]=de[W++],ee-=3;while(ee>2);ee&&(de[o++]=de[W++],ee>1&&(de[o++]=de[W++]))}}else if((B&64)===0){v=P[(v&65535)+(y&(1<<B)-1)];continue n}else{e.msg="invalid distance code",F.mode=Pp;break e}break}}else if((B&64)===0){v=S[(v&65535)+(y&(1<<B)-1)];continue t}else if(B&32){F.mode=eD;break e}else{e.msg="invalid literal/length code",F.mode=Pp;break e}break}}while(r<a&&o<c);ee=D>>3,r-=ee,D-=ee<<3,y&=(1<<D)-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=o<c?257+(c-o):257-(o-c),F.hold=y,F.bits=D};const Ad=15,vy=852,xy=592,yy=0,j0=1,by=2,nD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rD=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),sD=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iD=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),aD=(t,e,n,r,a,o,u,c)=>{const f=c.bits;let p=0,m=0,b=0,j=0,y=0,D=0,S=0,P=0,_=0,I=0,v,B,ee,ae,W,te=null,Q;const de=new Uint16Array(Ad+1),F=new Uint16Array(Ad+1);let L=null,z,Y,Ce;for(p=0;p<=Ad;p++)de[p]=0;for(m=0;m<r;m++)de[e[n+m]]++;for(y=f,j=Ad;j>=1&&de[j]===0;j--);if(y>j&&(y=j),j===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(b=1;b<j&&de[b]===0;b++);for(y<b&&(y=b),P=1,p=1;p<=Ad;p++)if(P<<=1,P-=de[p],P<0)return-1;if(P>0&&(t===yy||j!==1))return-1;for(F[1]=0,p=1;p<Ad;p++)F[p+1]=F[p]+de[p];for(m=0;m<r;m++)e[n+m]!==0&&(u[F[e[n+m]]++]=m);if(t===yy?(te=L=u,Q=20):t===j0?(te=nD,L=rD,Q=257):(te=sD,L=iD,Q=0),I=0,m=0,p=b,W=o,D=y,S=0,ee=-1,_=1<<y,ae=_-1,t===j0&&_>vy||t===by&&_>xy)return 1;for(;;){z=p-S,u[m]+1<Q?(Y=0,Ce=u[m]):u[m]>=Q?(Y=L[u[m]-Q],Ce=te[u[m]-Q]):(Y=96,Ce=0),v=1<<p-S,B=1<<D,b=B;do B-=v,a[W+(I>>S)+B]=z<<24|Y<<16|Ce|0;while(B!==0);for(v=1<<p-1;I&v;)v>>=1;if(v!==0?(I&=v-1,I+=v):I=0,m++,--de[p]===0){if(p===j)break;p=e[n+u[m]]}if(p>y&&(I&ae)!==ee){for(S===0&&(S=y),W+=b,D=p-S,P=1<<D;D+S<j&&(P-=de[D+S],!(P<=0));)D++,P<<=1;if(_+=1<<D,t===j0&&_>vy||t===by&&_>xy)return 1;ee=I&ae,a[ee]=y<<24|D<<16|W-o|0}}return I!==0&&(a[W+I]=p-S<<24|64<<16|0),c.bits=y,0};var sh=aD;const oD=0,k4=1,T4=2,{Z_FINISH:wy,Z_BLOCK:lD,Z_TREES:kp,Z_OK:Qu,Z_STREAM_END:cD,Z_NEED_DICT:uD,Z_STREAM_ERROR:jo,Z_DATA_ERROR:E4,Z_MEM_ERROR:L4,Z_BUF_ERROR:dD,Z_DEFLATED:Ny}=_4,ag=16180,Sy=16181,jy=16182,Cy=16183,_y=16184,Ay=16185,Py=16186,ky=16187,Ty=16188,Ey=16189,Am=16190,uc=16191,C0=16192,Ly=16193,_0=16194,Ry=16195,Dy=16196,Iy=16197,Fy=16198,Tp=16199,Ep=16200,Oy=16201,My=16202,By=16203,qy=16204,Uy=16205,A0=16206,zy=16207,$y=16208,Ns=16209,R4=16210,D4=16211,fD=852,hD=592,pD=15,mD=pD,Vy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function gD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Xu=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<ag||e.mode>D4?1:0},I4=t=>{if(Xu(t))return jo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=ag,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(fD),e.distcode=e.distdyn=new Int32Array(hD),e.sane=1,e.back=-1,Qu},F4=t=>{if(Xu(t))return jo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,I4(t)},O4=(t,e)=>{let n;if(Xu(t))return jo;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?jo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,F4(t))},M4=(t,e)=>{if(!t)return jo;const n=new gD;t.state=n,n.strm=t,n.window=null,n.mode=ag;const r=O4(t,e);return r!==Qu&&(t.state=null),r},vD=t=>M4(t,mD);let Hy=!0,P0,k0;const xD=t=>{if(Hy){P0=new Int32Array(512),k0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(sh(k4,t.lens,0,288,P0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;sh(T4,t.lens,0,32,k0,0,t.work,{bits:5}),Hy=!1}t.lencode=P0,t.lenbits=9,t.distcode=k0,t.distbits=5},B4=(t,e,n,r)=>{let a;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>r&&(a=r),o.window.set(e.subarray(n-r,n-r+a),o.wnext),r-=a,r?(o.window.set(e.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},yD=(t,e)=>{let n,r,a,o,u,c,f,p,m,b,j,y,D,S,P=0,_,I,v,B,ee,ae,W,te;const Q=new Uint8Array(4);let de,F;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xu(t)||!t.output||!t.input&&t.avail_in!==0)return jo;n=t.state,n.mode===uc&&(n.mode=C0),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,b=c,j=f,te=Qu;e:for(;;)switch(n.mode){case ag:if(n.wrap===0){n.mode=C0;break}for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&2&&p===35615){n.wbits===0&&(n.wbits=15),n.check=0,Q[0]=p&255,Q[1]=p>>>8&255,n.check=Nl(n.check,Q,2,0),p=0,m=0,n.mode=Sy;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=Ns;break}if((p&15)!==Ny){t.msg="unknown compression method",n.mode=Ns;break}if(p>>>=4,m-=4,W=(p&15)+8,n.wbits===0&&(n.wbits=W),W>15||W>n.wbits){t.msg="invalid window size",n.mode=Ns;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=p&512?Ey:uc,p=0,m=0;break;case Sy:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.flags=p,(n.flags&255)!==Ny){t.msg="unknown compression method",n.mode=Ns;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ns;break}n.head&&(n.head.text=p>>8&1),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Nl(n.check,Q,2,0)),p=0,m=0,n.mode=jy;case jy:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.time=p),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,Q[2]=p>>>16&255,Q[3]=p>>>24&255,n.check=Nl(n.check,Q,4,0)),p=0,m=0,n.mode=Cy;case Cy:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.xflags=p&255,n.head.os=p>>8),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Nl(n.check,Q,2,0)),p=0,m=0,n.mode=_y;case _y:if(n.flags&1024){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length=p,n.head&&(n.head.extra_len=p),n.flags&512&&n.wrap&4&&(Q[0]=p&255,Q[1]=p>>>8&255,n.check=Nl(n.check,Q,2,0)),p=0,m=0}else n.head&&(n.head.extra=null);n.mode=Ay;case Ay:if(n.flags&1024&&(y=n.length,y>c&&(y=c),y&&(n.head&&(W=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+y),W)),n.flags&512&&n.wrap&4&&(n.check=Nl(n.check,r,y,o)),c-=y,o+=y,n.length-=y),n.length))break e;n.length=0,n.mode=Py;case Py:if(n.flags&2048){if(c===0)break e;y=0;do W=r[o+y++],n.head&&W&&n.length<65536&&(n.head.name+=String.fromCharCode(W));while(W&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Nl(n.check,r,y,o)),c-=y,o+=y,W)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=ky;case ky:if(n.flags&4096){if(c===0)break e;y=0;do W=r[o+y++],n.head&&W&&n.length<65536&&(n.head.comment+=String.fromCharCode(W));while(W&&y<c);if(n.flags&512&&n.wrap&4&&(n.check=Nl(n.check,r,y,o)),c-=y,o+=y,W)break e}else n.head&&(n.head.comment=null);n.mode=Ty;case Ty:if(n.flags&512){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ns;break}p=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=uc;break;case Ey:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}t.adler=n.check=Vy(p),p=0,m=0,n.mode=Am;case Am:if(n.havedict===0)return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,uD;t.adler=n.check=1,n.mode=uc;case uc:if(e===lD||e===kp)break e;case C0:if(n.last){p>>>=m&7,m-=m&7,n.mode=A0;break}for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}switch(n.last=p&1,p>>>=1,m-=1,p&3){case 0:n.mode=Ly;break;case 1:if(xD(n),n.mode=Tp,e===kp){p>>>=2,m-=2;break e}break;case 2:n.mode=Dy;break;case 3:t.msg="invalid block type",n.mode=Ns}p>>>=2,m-=2;break;case Ly:for(p>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ns;break}if(n.length=p&65535,p=0,m=0,n.mode=_0,e===kp)break e;case _0:n.mode=Ry;case Ry:if(y=n.length,y){if(y>c&&(y=c),y>f&&(y=f),y===0)break e;a.set(r.subarray(o,o+y),u),c-=y,o+=y,f-=y,u+=y,n.length-=y;break}n.mode=uc;break;case Dy:for(;m<14;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.nlen=(p&31)+257,p>>>=5,m-=5,n.ndist=(p&31)+1,p>>>=5,m-=5,n.ncode=(p&15)+4,p>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ns;break}n.have=0,n.mode=Iy;case Iy:for(;n.have<n.ncode;){for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.lens[L[n.have++]]=p&7,p>>>=3,m-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,de={bits:n.lenbits},te=sh(oD,n.lens,0,19,n.lencode,0,n.work,de),n.lenbits=de.bits,te){t.msg="invalid code lengths set",n.mode=Ns;break}n.have=0,n.mode=Fy;case Fy:for(;n.have<n.nlen+n.ndist;){for(;P=n.lencode[p&(1<<n.lenbits)-1],_=P>>>24,I=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(v<16)p>>>=_,m-=_,n.lens[n.have++]=v;else{if(v===16){for(F=_+2;m<F;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(p>>>=_,m-=_,n.have===0){t.msg="invalid bit length repeat",n.mode=Ns;break}W=n.lens[n.have-1],y=3+(p&3),p>>>=2,m-=2}else if(v===17){for(F=_+3;m<F;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=3+(p&7),p>>>=3,m-=3}else{for(F=_+7;m<F;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=_,m-=_,W=0,y=11+(p&127),p>>>=7,m-=7}if(n.have+y>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ns;break}for(;y--;)n.lens[n.have++]=W}}if(n.mode===Ns)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ns;break}if(n.lenbits=9,de={bits:n.lenbits},te=sh(k4,n.lens,0,n.nlen,n.lencode,0,n.work,de),n.lenbits=de.bits,te){t.msg="invalid literal/lengths set",n.mode=Ns;break}if(n.distbits=6,n.distcode=n.distdyn,de={bits:n.distbits},te=sh(T4,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,de),n.distbits=de.bits,te){t.msg="invalid distances set",n.mode=Ns;break}if(n.mode=Tp,e===kp)break e;case Tp:n.mode=Ep;case Ep:if(c>=6&&f>=258){t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,tD(t,j),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,n.mode===uc&&(n.back=-1);break}for(n.back=0;P=n.lencode[p&(1<<n.lenbits)-1],_=P>>>24,I=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(I&&(I&240)===0){for(B=_,ee=I,ae=v;P=n.lencode[ae+((p&(1<<B+ee)-1)>>B)],_=P>>>24,I=P>>>16&255,v=P&65535,!(B+_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=B,m-=B,n.back+=B}if(p>>>=_,m-=_,n.back+=_,n.length=v,I===0){n.mode=Uy;break}if(I&32){n.back=-1,n.mode=uc;break}if(I&64){t.msg="invalid literal/length code",n.mode=Ns;break}n.extra=I&15,n.mode=Oy;case Oy:if(n.extra){for(F=n.extra;m<F;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=My;case My:for(;P=n.distcode[p&(1<<n.distbits)-1],_=P>>>24,I=P>>>16&255,v=P&65535,!(_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((I&240)===0){for(B=_,ee=I,ae=v;P=n.distcode[ae+((p&(1<<B+ee)-1)>>B)],_=P>>>24,I=P>>>16&255,v=P&65535,!(B+_<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=B,m-=B,n.back+=B}if(p>>>=_,m-=_,n.back+=_,I&64){t.msg="invalid distance code",n.mode=Ns;break}n.offset=v,n.extra=I&15,n.mode=By;case By:if(n.extra){for(F=n.extra;m<F;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ns;break}n.mode=qy;case qy:if(f===0)break e;if(y=j-f,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ns;break}y>n.wnext?(y-=n.wnext,D=n.wsize-y):D=n.wnext-y,y>n.length&&(y=n.length),S=n.window}else S=a,D=u-n.offset,y=n.length;y>f&&(y=f),f-=y,n.length-=y;do a[u++]=S[D++];while(--y);n.length===0&&(n.mode=Ep);break;case Uy:if(f===0)break e;a[u++]=n.length,f--,n.mode=Ep;break;case A0:if(n.wrap){for(;m<32;){if(c===0)break e;c--,p|=r[o++]<<m,m+=8}if(j-=f,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?Nl(n.check,a,j,u-j):Pv(n.check,a,j,u-j)),j=f,n.wrap&4&&(n.flags?p:Vy(p))!==n.check){t.msg="incorrect data check",n.mode=Ns;break}p=0,m=0}n.mode=zy;case zy:if(n.wrap&&n.flags){for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ns;break}p=0,m=0}n.mode=$y;case $y:te=cD;break e;case Ns:te=E4;break e;case R4:return L4;case D4:default:return jo}return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,(n.wsize||j!==t.avail_out&&n.mode<Ns&&(n.mode<A0||e!==wy))&&B4(t,t.output,t.next_out,j-t.avail_out),b-=t.avail_in,j-=t.avail_out,t.total_in+=b,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?Nl(n.check,a,j,t.next_out-j):Pv(n.check,a,j,t.next_out-j)),t.data_type=n.bits+(n.last?64:0)+(n.mode===uc?128:0)+(n.mode===Tp||n.mode===_0?256:0),(b===0&&j===0||e===wy)&&te===Qu&&(te=dD),te},bD=t=>{if(Xu(t))return jo;let e=t.state;return e.window&&(e.window=null),t.state=null,Qu},wD=(t,e)=>{if(Xu(t))return jo;const n=t.state;return(n.wrap&2)===0?jo:(n.head=e,e.done=!1,Qu)},ND=(t,e)=>{const n=e.length;let r,a,o;return Xu(t)||(r=t.state,r.wrap!==0&&r.mode!==Am)?jo:r.mode===Am&&(a=1,a=Pv(a,e,n,0),a!==r.check)?E4:(o=B4(t,e,n,n),o?(r.mode=R4,L4):(r.havedict=1,Qu))};var SD=F4,jD=O4,CD=I4,_D=vD,AD=M4,PD=yD,kD=bD,TD=wD,ED=ND,LD="pako inflate (from Nodeca project)",hc={inflateReset:SD,inflateReset2:jD,inflateResetKeep:CD,inflateInit:_D,inflateInit2:AD,inflate:PD,inflateEnd:kD,inflateGetHeader:TD,inflateSetDictionary:ED,inflateInfo:LD};function RD(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var DD=RD;const q4=Object.prototype.toString,{Z_NO_FLUSH:ID,Z_FINISH:FD,Z_OK:Ah,Z_STREAM_END:T0,Z_NEED_DICT:E0,Z_STREAM_ERROR:OD,Z_DATA_ERROR:Wy,Z_MEM_ERROR:MD}=_4;function Mh(t){this.options=A4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JR,this.strm.avail_out=0;let n=hc.inflateInit2(this.strm,e.windowBits);if(n!==Ah)throw new Error(kv[n]);if(this.header=new DD,hc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Tv.string2buf(e.dictionary):q4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=hc.inflateSetDictionary(this.strm,e.dictionary),n!==Ah)))throw new Error(kv[n])}Mh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?FD:ID,q4.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=hc.inflate(n,u),o===E0&&a&&(o=hc.inflateSetDictionary(n,a),o===Ah?o=hc.inflate(n,u):o===Wy&&(o=E0));n.avail_in>0&&o===T0&&n.state.wrap>0&&t[n.next_in]!==0;)hc.inflateReset(n),o=hc.inflate(n,u);switch(o){case OD:case Wy:case E0:case MD:return this.onEnd(o),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||o===T0))if(this.options.to==="string"){let f=Tv.utf8border(n.output,n.next_out),p=n.next_out-f,m=Tv.buf2string(n.output,f);n.next_out=p,n.avail_out=r-p,p&&n.output.set(n.output.subarray(f,f+p),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===Ah&&c===0)){if(o===T0)return o=hc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Mh.prototype.onData=function(t){this.chunks.push(t)};Mh.prototype.onEnd=function(t){t===Ah&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=A4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function BD(t,e){const n=new Mh(e);if(n.push(t),n.err)throw n.msg||kv[n.err];return n.result}var qD=Mh,UD=BD,zD={Inflate:qD,inflate:UD};const{Inflate:$D,inflate:VD}=zD;var Gy=$D,HD=VD;const U4=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;U4[t]=e}const Ky=4294967295;function WD(t,e,n){let r=t;for(let a=0;a<n;a++)r=U4[(r^e[a])&255]^r>>>8;return r}function GD(t,e){return(WD(Ky,t,e)^Ky)>>>0}function Qy(t,e,n){const r=t.readUint32(),a=GD(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${a}`)}function z4(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function $4(t,e,n,r){let a=0;for(;a<r;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-r]&255}function V4(t,e,n,r){let a=0;if(n.length===0)for(;a<r;a++)e[a]=t[a];else for(;a<r;a++)e[a]=t[a]+n[a]&255}function H4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=t[o]+(n[o]>>1)&255;for(;o<r;o++)e[o]=t[o]+(e[o-a]+n[o]>>1)&255}}function W4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=t[o]+n[o]&255;for(;o<r;o++)e[o]=t[o]+KD(e[o-a],n[o],n[o-a])&255}}function KD(t,e,n){const r=t+e-n,a=Math.abs(r-t),o=Math.abs(r-e),u=Math.abs(r-n);return a<=o&&a<=u?t:o<=u?e:n}function QD(t,e,n,r,a,o){switch(t){case 0:z4(e,n,a);break;case 1:$4(e,n,a,o);break;case 2:V4(e,n,r,a);break;case 3:H4(e,n,r,a,o);break;case 4:W4(e,n,r,a,o);break;default:throw new Error(`Unsupported filter: ${t}`)}}const ZD=new Uint16Array([255]),YD=new Uint8Array(ZD.buffer),XD=YD[0]===255;function JD(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(r*n*c);let p=0;for(let m=0;m<7;m++){const b=u[m],j=Math.ceil((n-b.x)/b.xStep),y=Math.ceil((r-b.y)/b.yStep);if(j<=0||y<=0)continue;const D=j*c,S=new Uint8Array(D);for(let P=0;P<y;P++){const _=e[p++],I=e.subarray(p,p+D);p+=D;const v=new Uint8Array(D);QD(_,I,v,S,D,c),S.set(v);for(let B=0;B<j;B++){const ee=b.x+B*b.xStep,ae=b.y+P*b.yStep;if(!(ee>=n||ae>=r))for(let W=0;W<c;W++)f[(ae*n+ee)*c+W]=v[B*c+W]}}}if(o===16){const m=new Uint16Array(f.buffer);if(XD)for(let b=0;b<m.length;b++)m[b]=eI(m[b]);return m}else return f}function eI(t){return(t&255)<<8|t>>8&255}const tI=new Uint16Array([255]),nI=new Uint8Array(tI.buffer),rI=nI[0]===255,sI=new Uint8Array(0);function Zy(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*n),f=new Uint8Array(r*c);let p=sI,m=0,b,j;for(let y=0;y<r;y++){switch(b=e.subarray(m+1,m+1+c),j=f.subarray(y*c,(y+1)*c),e[m]){case 0:z4(b,j,c);break;case 1:$4(b,j,c,u);break;case 2:V4(b,j,p,c);break;case 3:H4(b,j,p,c,u);break;case 4:W4(b,j,p,c,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=j,m+=c+1}if(o===16){const y=new Uint16Array(f.buffer);if(rI)for(let D=0;D<y.length;D++)y[D]=iI(y[D]);return y}else return f}function iI(t){return(t&255)<<8|t>>8&255}const Qp=Uint8Array.of(137,80,78,71,13,10,26,10);function Yy(t){if(!aI(t.readBytes(Qp.length)))throw new Error("wrong PNG signature")}function aI(t){if(t.length<Qp.length)return!1;for(let e=0;e<Qp.length;e++)if(t[e]!==Qp[e])return!1;return!0}const oI="tEXt",lI=0,G4=new TextDecoder("latin1");function cI(t){if(dI(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const uI=/^[\u0000-\u00FF]*$/;function dI(t){if(!uI.test(t))throw new Error("invalid latin1 text")}function fI(t,e,n){const r=K4(e);t[r]=hI(e,n-r.length-1)}function K4(t){for(t.mark();t.readByte()!==lI;);const e=t.offset;t.reset();const n=G4.decode(t.readBytes(e-t.offset-1));return t.skip(1),cI(n),n}function hI(t,e){return G4.decode(t.readBytes(e))}const no={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},L0={UNKNOWN:-1,DEFLATE:0},Xy={UNKNOWN:-1,ADAPTIVE:0},R0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Lp={NONE:0,BACKGROUND:1,PREVIOUS:2},D0={SOURCE:0,OVER:1};class pI extends L1{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new Gy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=L0.UNKNOWN,this._filterMethod=Xy.UNKNOWN,this._interlaceMethod=R0.UNKNOWN,this._colorType=no.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Yy(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(Yy(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case oI:fI(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Qy(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Qy(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=mI(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case no.GREYSCALE:r=1;break;case no.TRUECOLOUR:r=3;break;case no.INDEXED_COLOUR:r=1;break;case no.GREYSCALE_ALPHA:r=2;break;case no.TRUECOLOUR_ALPHA:r=4;break;case no.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==L0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<n;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case no.GREYSCALE:case no.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case no.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case no.UNKNOWN:case no.GREYSCALE_ALPHA:case no.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=K4(this),r=this.readUint8();if(r!==L0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:HD(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=Zy({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case Lp.NONE:break;case Lp.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)r.data[u+c]=0}break;case Lp.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,a=(o,u)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,f=(o*n.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(n.blendOp){case D0.SOURCE:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++)e.data[c+p]=n.data[f+p]}break;case D0.OVER:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++){const m=n.data[f+this._png.channels-1]/r,b=p%(this._png.channels-1)===0?1:n.data[f+p],j=Math.floor(m*b+(1-m)*e.data[c+p]);e.data[c+p]+=j}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Xy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===R0.NO_INTERLACE)this._png.data=Zy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===R0.ADAM7)this._png.data=JD({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Lp.NONE,blendOp:D0.SOURCE,data:e}),this._inflator=new Gy,this._writingDataChunks=!1}}function mI(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Jy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Jy||(Jy={}));function gI(t,e){return new pI(t,e).decode()}var Fn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function I0(){Fn.console&&typeof Fn.console.log=="function"&&Fn.console.log.apply(Fn.console,arguments)}var es={log:I0,warn:function(t){Fn.console&&(typeof Fn.console.warn=="function"?Fn.console.warn.apply(Fn.console,arguments):I0.call(null,arguments))},error:function(t){Fn.console&&(typeof Fn.console.error=="function"?Fn.console.error.apply(Fn.console,arguments):I0(t))}};function F0(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Du(r.response,e,n)},r.onerror=function(){es.error("could not download file")},r.send()}function e5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Du=Fn.saveAs||((typeof window>"u"?"undefined":Wr(window))!=="object"||window!==Fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Fn.URL||Fn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?e5(a.href)?F0(t,e,n):Rp(a,a.target="_blank"):Rp(a)):(a.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Rp(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(e5(t))F0(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Rp(r)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Wr(o)!=="object"&&(es.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return F0(t,e,n);var a=t.type==="application/octet-stream",o=/constructor/i.test(Fn.HTMLElement)||Fn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Wr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},c.readAsDataURL(t)}else{var f=Fn.URL||Fn.webkitURL,p=f.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function Q4(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,o=n[r].process,u=a.exec(t);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+c+f+p}}var Zp=Fn.atob.bind(Fn),t5=Fn.btoa.bind(Fn);function O0(t,e){var n=t[0],r=t[1],a=t[2],o=t[3];n=la(n,r,a,o,e[0],7,-680876936),o=la(o,n,r,a,e[1],12,-389564586),a=la(a,o,n,r,e[2],17,606105819),r=la(r,a,o,n,e[3],22,-1044525330),n=la(n,r,a,o,e[4],7,-176418897),o=la(o,n,r,a,e[5],12,1200080426),a=la(a,o,n,r,e[6],17,-1473231341),r=la(r,a,o,n,e[7],22,-45705983),n=la(n,r,a,o,e[8],7,1770035416),o=la(o,n,r,a,e[9],12,-1958414417),a=la(a,o,n,r,e[10],17,-42063),r=la(r,a,o,n,e[11],22,-1990404162),n=la(n,r,a,o,e[12],7,1804603682),o=la(o,n,r,a,e[13],12,-40341101),a=la(a,o,n,r,e[14],17,-1502002290),n=ca(n,r=la(r,a,o,n,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ca(o,n,r,a,e[6],9,-1069501632),a=ca(a,o,n,r,e[11],14,643717713),r=ca(r,a,o,n,e[0],20,-373897302),n=ca(n,r,a,o,e[5],5,-701558691),o=ca(o,n,r,a,e[10],9,38016083),a=ca(a,o,n,r,e[15],14,-660478335),r=ca(r,a,o,n,e[4],20,-405537848),n=ca(n,r,a,o,e[9],5,568446438),o=ca(o,n,r,a,e[14],9,-1019803690),a=ca(a,o,n,r,e[3],14,-187363961),r=ca(r,a,o,n,e[8],20,1163531501),n=ca(n,r,a,o,e[13],5,-1444681467),o=ca(o,n,r,a,e[2],9,-51403784),a=ca(a,o,n,r,e[7],14,1735328473),n=ua(n,r=ca(r,a,o,n,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ua(o,n,r,a,e[8],11,-2022574463),a=ua(a,o,n,r,e[11],16,1839030562),r=ua(r,a,o,n,e[14],23,-35309556),n=ua(n,r,a,o,e[1],4,-1530992060),o=ua(o,n,r,a,e[4],11,1272893353),a=ua(a,o,n,r,e[7],16,-155497632),r=ua(r,a,o,n,e[10],23,-1094730640),n=ua(n,r,a,o,e[13],4,681279174),o=ua(o,n,r,a,e[0],11,-358537222),a=ua(a,o,n,r,e[3],16,-722521979),r=ua(r,a,o,n,e[6],23,76029189),n=ua(n,r,a,o,e[9],4,-640364487),o=ua(o,n,r,a,e[12],11,-421815835),a=ua(a,o,n,r,e[15],16,530742520),n=da(n,r=ua(r,a,o,n,e[2],23,-995338651),a,o,e[0],6,-198630844),o=da(o,n,r,a,e[7],10,1126891415),a=da(a,o,n,r,e[14],15,-1416354905),r=da(r,a,o,n,e[5],21,-57434055),n=da(n,r,a,o,e[12],6,1700485571),o=da(o,n,r,a,e[3],10,-1894986606),a=da(a,o,n,r,e[10],15,-1051523),r=da(r,a,o,n,e[1],21,-2054922799),n=da(n,r,a,o,e[8],6,1873313359),o=da(o,n,r,a,e[15],10,-30611744),a=da(a,o,n,r,e[6],15,-1560198380),r=da(r,a,o,n,e[13],21,1309151649),n=da(n,r,a,o,e[4],6,-145523070),o=da(o,n,r,a,e[11],10,-1120210379),a=da(a,o,n,r,e[2],15,718787259),r=da(r,a,o,n,e[9],21,-343485551),t[0]=Zc(n,t[0]),t[1]=Zc(r,t[1]),t[2]=Zc(a,t[2]),t[3]=Zc(o,t[3])}function og(t,e,n,r,a,o){return e=Zc(Zc(e,t),Zc(r,o)),Zc(e<<a|e>>>32-a,n)}function la(t,e,n,r,a,o,u){return og(e&n|~e&r,t,e,a,o,u)}function ca(t,e,n,r,a,o,u){return og(e&r|n&~r,t,e,a,o,u)}function ua(t,e,n,r,a,o,u){return og(e^n^r,t,e,a,o,u)}function da(t,e,n,r,a,o,u){return og(n^(e|~r),t,e,a,o,u)}function Z4(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)O0(r,vI(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(O0(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,O0(r,a),r}function vI(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var n5="0123456789abcdef".split("");function xI(t){for(var e="",n=0;n<4;n++)e+=n5[t>>8*n+4&15]+n5[t>>8*n&15];return e}function yI(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ev(t){return Z4(t).map(yI).join("")}var bI=(function(t){for(var e=0;e<t.length;e++)t[e]=xI(t[e]);return t.join("")})(Z4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zc(t,e){if(bI){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function Lv(t,e){var n,r,a,o;if(t!==n){for(var u=(a=t,o=1+(256/t.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var p=0;for(f=0;f<256;f++){var m=c[f];p=(p+m+u.charCodeAt(f))%256,c[f]=c[p],c[p]=m}n=t,r=c}else c=r;var b=e.length,j=0,y=0,D="";for(f=0;f<b;f++)y=(y+(m=c[j=(j+1)%256]))%256,c[j]=c[y],c[y]=m,u=c[(c[j]+c[y])%256],D+=String.fromCharCode(e.charCodeAt(f)^u);return D}var r5={print:4,modify:8,copy:16,"annot-forms":32};function Ld(t,e,n,r){this.v=1,this.r=2;var a=192;t.forEach(function(c){if(r5.perm!==void 0)throw new Error("Invalid permission: "+c);a+=r5[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Ev(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Lv(this.encryptionKey,this.padding)}function Rd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var a=t.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[r]}return e}function s5(t){if(Wr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!a],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[n]){var u=e[n][o];try{u[0].apply(t,r)}catch(c){Fn.console&&es.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Pm(t){if(!(this instanceof Pm))return new Pm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Y4(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Iu(t,e,n,r,a){if(!(this instanceof Iu))return new Iu(t,e,n,r,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Y4.call(this,r,a)}function Fd(t,e,n,r,a){if(!(this instanceof Fd))return new Fd(t,e,n,r,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Y4.call(this,r,a)}function un(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,p="S",m=null;Wr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,a=t.format||a,o=t.compress||t.compressPdf||o,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),p=t.defaultPathOperation||"S"),u=t.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,j={},y={internal:{},__private__:{}};y.__private__.PubSub=s5;var D="1.3",S=y.__private__.getPdfVersion=function(){return D};y.__private__.setPdfVersion=function(w){D=w};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return P};var _=y.__private__.getPageFormat=function(w){return P[w]};a=a||"a4";var I="compat",v="advanced",B=I;function ee(){this.saveGraphicsState(),le(new on(_t,0,0,-_t,0,Ji()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),p="n",B=v}function ae(){this.restoreGraphicsState(),p="S",B=I}var W=y.__private__.combineFontStyleAndFontWeight=function(w,$){if(w=="bold"&&$=="normal"||w=="bold"&&$==400||w=="normal"&&$=="italic"||w=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(w=$==400||$==="normal"?w==="italic"?"italic":"normal":$!=700&&$!=="bold"||w!=="normal"?($==700?"bold":$)+""+w:"bold"),w};y.advancedAPI=function(w){var $=B===I;return $&&ee.call(this),typeof w!="function"||(w(this),$&&ae.call(this)),this},y.compatAPI=function(w){var $=B===v;return $&&ae.call(this),typeof w!="function"||(w(this),$&&ee.call(this)),this},y.isAdvancedAPI=function(){return B===v};var te,Q=function(w){if(B!==v)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},de=y.roundToPrecision=y.__private__.roundToPrecision=function(w,$){var pe=e||$;if(isNaN(w)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(pe).replace(/0+$/,"")};te=y.hpf=y.__private__.hpf=typeof f=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,f)}:f==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return de(w,16)};var F=y.f2=y.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return de(w,2)},L=y.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return de(w,3)},z=y.scale=y.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return B===I?w*_t:B===v?w:void 0},Y=function(w){return z((function($){return B===I?Ji()-$:B===v?$:void 0})(w))};y.__private__.setPrecision=y.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var Ce,_e="00000000000000000000000000000000",Ae=y.__private__.getFileId=function(){return _e},ce=y.__private__.setFileId=function(w){return _e=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():_e.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Ft=new Ld(m.userPermissions,m.userPassword,m.ownerPassword,_e)),_e};y.setFileId=function(w){return ce(w),this},y.getFileId=function(){return Ae()};var ge=y.__private__.convertDateToPDFDate=function(w){var $=w.getTimezoneOffset(),pe=$<0?"+":"-",Pe=Math.floor(Math.abs($/60)),Be=Math.abs($%60),qe=[pe,ne(Pe),"'",ne(Be),"'"].join("");return["D:",w.getFullYear(),ne(w.getMonth()+1),ne(w.getDate()),ne(w.getHours()),ne(w.getMinutes()),ne(w.getSeconds()),qe].join("")},De=y.__private__.convertPDFDateToDate=function(w){var $=parseInt(w.substr(2,4),10),pe=parseInt(w.substr(6,2),10)-1,Pe=parseInt(w.substr(8,2),10),Be=parseInt(w.substr(10,2),10),qe=parseInt(w.substr(12,2),10),Je=parseInt(w.substr(14,2),10);return new Date($,pe,Pe,Be,qe,Je,0)},se=y.__private__.setCreationDate=function(w){var $;if(w===void 0&&(w=new Date),w instanceof Date)$=ge(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=w}return Ce=$},O=y.__private__.getCreationDate=function(w){var $=Ce;return w==="jsDate"&&($=De(Ce)),$};y.setCreationDate=function(w){return se(w),this},y.getCreationDate=function(w){return O(w)};var E,ne=y.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},me=y.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ye=0,be=[],Re=[],Ie=0,Me=[],Qe=[],ht=!1,vt=Re;y.__private__.setCustomOutputDestination=function(w){ht=!0,vt=w};var Dt=function(w){ht||(vt=w)};y.__private__.resetCustomOutputDestination=function(){ht=!1,vt=Re};var le=y.__private__.out=function(w){return w=w.toString(),Ie+=w.length+1,vt.push(w),vt},xt=y.__private__.write=function(w){return le(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},xe=y.__private__.getArrayBuffer=function(w){for(var $=w.length,pe=new ArrayBuffer($),Pe=new Uint8Array(pe);$--;)Pe[$]=w.charCodeAt($);return pe},X=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return X};var M=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(w){return M=B===v?w/_t:w,this};var ve,re=y.__private__.getFontSize=y.getFontSize=function(){return B===I?M:M*_t},R=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(w){return R=w,this},y.__private__.getR2L=y.getR2L=function(){return R};var H,je=y.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))ve=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');ve=w}else ve=parseInt(w,10)};y.__private__.getZoomMode=function(){return ve};var we,ke=y.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');H=w};y.__private__.getPageMode=function(){return H};var Ve=y.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');we=w};y.__private__.getLayoutMode=function(){return we},y.__private__.setDisplayMode=y.setDisplayMode=function(w,$,pe){return je(w),Ve($),ke(pe),this};var at={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(w){if(Object.keys(at).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return at[w]},y.__private__.getDocumentProperties=function(){return at},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(w){for(var $ in at)at.hasOwnProperty($)&&w[$]&&(at[$]=w[$]);return this},y.__private__.setDocumentProperty=function(w,$){if(Object.keys(at).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return at[w]=$};var ct,_t,kt,cr,yn,Vt={},Mt={},tn=[],Ke={},ot={},Xe={},an={},er=null,vn=0,Yt=[],Dn=new s5(y),ms=t.hotfixes||[],tr={},vr={},ur=[],on=function w($,pe,Pe,Be,qe,Je){if(!(this instanceof w))return new w($,pe,Pe,Be,qe,Je);isNaN($)&&($=1),isNaN(pe)&&(pe=0),isNaN(Pe)&&(Pe=0),isNaN(Be)&&(Be=1),isNaN(qe)&&(qe=0),isNaN(Je)&&(Je=0),this._matrix=[$,pe,Pe,Be,qe,Je]};Object.defineProperty(on.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(on.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(on.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(on.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(on.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(on.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(on.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(on.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(on.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(on.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(on.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(on.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(on.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(on.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(on.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(on.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),on.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(w)},on.prototype.multiply=function(w){var $=w.sx*this.sx+w.shy*this.shx,pe=w.sx*this.shy+w.shy*this.sy,Pe=w.shx*this.sx+w.sy*this.shx,Be=w.shx*this.shy+w.sy*this.sy,qe=w.tx*this.sx+w.ty*this.shx+this.tx,Je=w.tx*this.shy+w.ty*this.sy+this.ty;return new on($,pe,Pe,Be,qe,Je)},on.prototype.decompose=function(){var w=this.sx,$=this.shy,pe=this.shx,Pe=this.sy,Be=this.tx,qe=this.ty,Je=Math.sqrt(w*w+$*$),yt=(w/=Je)*pe+($/=Je)*Pe;pe-=w*yt,Pe-=$*yt;var jt=Math.sqrt(pe*pe+Pe*Pe);return yt/=jt,w*(Pe/=jt)<$*(pe/=jt)&&(w=-w,$=-$,yt=-yt,Je=-Je),{scale:new on(Je,0,0,jt,0,0),translate:new on(1,0,0,1,Be,qe),rotate:new on(w,$,-$,w,0,0),skew:new on(1,0,yt,1,0,0)}},on.prototype.toString=function(w){return this.join(" ")},on.prototype.inversed=function(){var w=this.sx,$=this.shy,pe=this.shx,Pe=this.sy,Be=this.tx,qe=this.ty,Je=1/(w*Pe-$*pe),yt=Pe*Je,jt=-$*Je,qt=-pe*Je,ln=w*Je;return new on(yt,jt,qt,ln,-yt*Be-qt*qe,-jt*Be-ln*qe)},on.prototype.applyToPoint=function(w){var $=w.x*this.sx+w.y*this.shx+this.tx,pe=w.x*this.shy+w.y*this.sy+this.ty;return new zi($,pe)},on.prototype.applyToRectangle=function(w){var $=this.applyToPoint(w),pe=this.applyToPoint(new zi(w.x+w.w,w.y+w.h));return new oi($.x,$.y,pe.x-$.x,pe.y-$.y)},on.prototype.clone=function(){var w=this.sx,$=this.shy,pe=this.shx,Pe=this.sy,Be=this.tx,qe=this.ty;return new on(w,$,pe,Pe,Be,qe)},y.Matrix=on;var Rs=y.matrixMult=function(w,$){return $.multiply(w)},Ss=new on(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Ss;var os=function(w,$){if(!ot[w]){var pe=($ instanceof Iu?"Sh":"P")+(Object.keys(Ke).length+1).toString(10);$.id=pe,ot[w]=pe,Ke[pe]=$,Dn.publish("addPattern",$)}};y.ShadingPattern=Iu,y.TilingPattern=Fd,y.addShadingPattern=function(w,$){return Q("addShadingPattern()"),os(w,$),this},y.beginTilingPattern=function(w){Q("beginTilingPattern()"),$i(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},y.endTilingPattern=function(w,$){Q("endTilingPattern()"),$.stream=Qe[E].join(`
`),os(w,$),Dn.publish("endTilingPattern",$),ur.pop().restore()};var Ds,nr=y.__private__.newObject=function(){var w=Rr();return xr(w,!0),w},Rr=y.__private__.newObjectDeferred=function(){return ye++,be[ye]=function(){return Ie},ye},xr=function(w,$){return $=typeof $=="boolean"&&$,be[w]=Ie,$&&le(w+" 0 obj"),w},gs=y.__private__.newAdditionalObject=function(){var w={objId:Rr(),content:""};return Me.push(w),w},Qr=Rr(),Er=Rr(),Ws=y.__private__.decodeColorString=function(w){var $=w.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var pe=parseFloat($[0]);$=[pe,pe,pe,"r"]}for(var Pe="#",Be=0;Be<3;Be++)Pe+=("0"+Math.floor(255*parseFloat($[Be])).toString(16)).slice(-2);return Pe},Zr=y.__private__.encodeColorString=function(w){var $;typeof w=="string"&&(w={ch1:w});var pe=w.ch1,Pe=w.ch2,Be=w.ch3,qe=w.ch4,Je=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var yt=new Q4(pe);if(yt.ok)pe=yt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var jt=parseInt(pe.substr(1),16);pe=jt>>16&255,Pe=jt>>8&255,Be=255&jt}if(Pe===void 0||qe===void 0&&pe===Pe&&Pe===Be)$=typeof pe=="string"?pe+" "+Je[0]:w.precision===2?F(pe/255)+" "+Je[0]:L(pe/255)+" "+Je[0];else if(qe===void 0||Wr(qe)==="object"){if(qe&&!isNaN(qe.a)&&qe.a===0)return["1.","1.","1.",Je[1]].join(" ");$=typeof pe=="string"?[pe,Pe,Be,Je[1]].join(" "):w.precision===2?[F(pe/255),F(Pe/255),F(Be/255),Je[1]].join(" "):[L(pe/255),L(Pe/255),L(Be/255),Je[1]].join(" ")}else $=typeof pe=="string"?[pe,Pe,Be,qe,Je[2]].join(" "):w.precision===2?[F(pe),F(Pe),F(Be),F(qe),Je[2]].join(" "):[L(pe),L(Pe),L(Be),L(qe),Je[2]].join(" ");return $},Is=y.__private__.getFilters=function(){return u},Yr=y.__private__.putStream=function(w){var $=(w=w||{}).data||"",pe=w.filters||Is(),Pe=w.alreadyAppliedFilters||[],Be=w.addLength1||!1,qe=$.length,Je=w.objectId,yt=function(Ar){return Ar};if(m!==null&&Je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(yt=Ft.encryptor(Je,0));var jt={};pe===!0&&(pe=["FlateEncode"]);var qt=w.additionalKeyValues||[],ln=(jt=un.API.processDataByFilters!==void 0?un.API.processDataByFilters($,pe):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(Pe)?Pe.join(" "):Pe.toString());if(jt.data.length!==0&&(qt.push({key:"Length",value:jt.data.length}),Be===!0&&qt.push({key:"Length1",value:qe})),ln.length!=0)if(ln.split("/").length-1==1)qt.push({key:"Filter",value:ln});else{qt.push({key:"Filter",value:"["+ln+"]"});for(var En=0;En<qt.length;En+=1)if(qt[En].key==="DecodeParms"){for(var ir=[],mr=0;mr<jt.reverseChain.split("/").length-1;mr+=1)ir.push("null");ir.push(qt[En].value),qt[En].value="["+ir.join(" ")+"]"}}le("<<");for(var Hn=0;Hn<qt.length;Hn++)le("/"+qt[Hn].key+" "+qt[Hn].value);le(">>"),jt.data.length!==0&&(le("stream"),le(yt(jt.data)),le("endstream"))},Fs=y.__private__.putPage=function(w){var $=w.number,pe=w.data,Pe=w.objId,Be=w.contentsObjId;xr(Pe,!0),le("<</Type /Page"),le("/Parent "+w.rootDictionaryObjId+" 0 R"),le("/Resources "+w.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(te(w.mediaBox.bottomLeftX))+" "+parseFloat(te(w.mediaBox.bottomLeftY))+" "+te(w.mediaBox.topRightX)+" "+te(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&le("/CropBox ["+te(w.cropBox.bottomLeftX)+" "+te(w.cropBox.bottomLeftY)+" "+te(w.cropBox.topRightX)+" "+te(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&le("/BleedBox ["+te(w.bleedBox.bottomLeftX)+" "+te(w.bleedBox.bottomLeftY)+" "+te(w.bleedBox.topRightX)+" "+te(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&le("/TrimBox ["+te(w.trimBox.bottomLeftX)+" "+te(w.trimBox.bottomLeftY)+" "+te(w.trimBox.topRightX)+" "+te(w.trimBox.topRightY)+"]"),w.artBox!==null&&le("/ArtBox ["+te(w.artBox.bottomLeftX)+" "+te(w.artBox.bottomLeftY)+" "+te(w.artBox.topRightX)+" "+te(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&le("/UserUnit "+w.userUnit),Dn.publish("putPage",{objId:Pe,pageContext:Yt[$],pageNumber:$,page:pe}),le("/Contents "+Be+" 0 R"),le(">>"),le("endobj");var qe=pe.join(`
`);return B===v&&(qe+=`
Q`),xr(Be,!0),Yr({data:qe,filters:Is(),objectId:Be}),le("endobj"),Pe},dr=y.__private__.putPages=function(){var w,$,pe=[];for(w=1;w<=vn;w++)Yt[w].objId=Rr(),Yt[w].contentsObjId=Rr();for(w=1;w<=vn;w++)pe.push(Fs({number:w,data:Qe[w],objId:Yt[w].objId,contentsObjId:Yt[w].contentsObjId,mediaBox:Yt[w].mediaBox,cropBox:Yt[w].cropBox,bleedBox:Yt[w].bleedBox,trimBox:Yt[w].trimBox,artBox:Yt[w].artBox,userUnit:Yt[w].userUnit,rootDictionaryObjId:Qr,resourceDictionaryObjId:Er}));xr(Qr,!0),le("<</Type /Pages");var Pe="/Kids [";for($=0;$<vn;$++)Pe+=pe[$]+" 0 R ";le(Pe+"]"),le("/Count "+vn),le(">>"),le("endobj"),Dn.publish("postPutPages")},ls=function(w){Dn.publish("putFont",{font:w,out:le,newObject:nr,putStream:Yr}),w.isAlreadyPutted!==!0&&(w.objectNumber=nr(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Rd(w.postScriptName)),le("/Subtype /Type1"),typeof w.encoding=="string"&&le("/Encoding /"+w.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},ai=function(w){w.objectNumber=nr();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[te(w.x),te(w.y),te(w.x+w.width),te(w.y+w.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var pe=w.pages[1].join(`
`);Yr({data:pe,additionalKeyValues:$,objectId:w.objectNumber}),le("endobj")},Mi=function(w,$){$||($=21);var pe=nr(),Pe=(function(Je,yt){var jt,qt=[],ln=1/(yt-1);for(jt=0;jt<1;jt+=ln)qt.push(jt);if(qt.push(1),Je[0].offset!=0){var En={offset:0,color:Je[0].color};Je.unshift(En)}if(Je[Je.length-1].offset!=1){var ir={offset:1,color:Je[Je.length-1].color};Je.push(ir)}for(var mr="",Hn=0,Ar=0;Ar<qt.length;Ar++){for(jt=qt[Ar];jt>Je[Hn+1].offset;)Hn++;var Fr=Je[Hn].offset,Or=(jt-Fr)/(Je[Hn+1].offset-Fr),zt=Je[Hn].color,Gs=Je[Hn+1].color;mr+=me(Math.round((1-Or)*zt[0]+Or*Gs[0]).toString(16))+me(Math.round((1-Or)*zt[1]+Or*Gs[1]).toString(16))+me(Math.round((1-Or)*zt[2]+Or*Gs[2]).toString(16))}return mr.trim()})(w.colors,$),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+$+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yr({data:Pe,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),le("endobj"),w.objectNumber=nr(),le("<< /ShadingType "+w.type),le("/ColorSpace /DeviceRGB");var qe="/Coords ["+te(parseFloat(w.coords[0]))+" "+te(parseFloat(w.coords[1]))+" ";w.type===2?qe+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3])):qe+=te(parseFloat(w.coords[2]))+" "+te(parseFloat(w.coords[3]))+" "+te(parseFloat(w.coords[4]))+" "+te(parseFloat(w.coords[5])),le(qe+="]"),w.matrix&&le("/Matrix ["+w.matrix.toString()+"]"),le("/Function "+pe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},Bi=function(w,$){var pe=Rr(),Pe=nr();$.push({resourcesOid:pe,objectOid:Pe}),w.objectNumber=Pe;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+w.boundingBox.map(te).join(" ")+"]"}),Be.push({key:"XStep",value:te(w.xStep)}),Be.push({key:"YStep",value:te(w.yStep)}),Be.push({key:"Resources",value:pe+" 0 R"}),w.matrix&&Be.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Yr({data:w.stream,additionalKeyValues:Be,objectId:w.objectNumber}),le("endobj")},qi=function(w){for(var $ in w.objectNumber=nr(),le("<<"),w)switch($){case"opacity":le("/ca "+F(w[$]));break;case"stroke-opacity":le("/CA "+F(w[$]))}le(">>"),le("endobj")},Bn=function(w){xr(w.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var $ in le("/Font <<"),Vt)Vt.hasOwnProperty($)&&(b===!1||b===!0&&j.hasOwnProperty($))&&le("/"+$+" "+Vt[$].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(Ke).length>0){for(var $ in le("/Shading <<"),Ke)Ke.hasOwnProperty($)&&Ke[$]instanceof Iu&&Ke[$].objectNumber>=0&&le("/"+$+" "+Ke[$].objectNumber+" 0 R");Dn.publish("putShadingPatternDict"),le(">>")}})(),(function($){if(Object.keys(Ke).length>0){for(var pe in le("/Pattern <<"),Ke)Ke.hasOwnProperty(pe)&&Ke[pe]instanceof y.TilingPattern&&Ke[pe].objectNumber>=0&&Ke[pe].objectNumber<$&&le("/"+pe+" "+Ke[pe].objectNumber+" 0 R");Dn.publish("putTilingPatternDict"),le(">>")}})(w.objectOid),(function(){if(Object.keys(Xe).length>0){var $;for($ in le("/ExtGState <<"),Xe)Xe.hasOwnProperty($)&&Xe[$].objectNumber>=0&&le("/"+$+" "+Xe[$].objectNumber+" 0 R");Dn.publish("putGStateDict"),le(">>")}})(),(function(){for(var $ in le("/XObject <<"),tr)tr.hasOwnProperty($)&&tr[$].objectNumber>=0&&le("/"+$+" "+tr[$].objectNumber+" 0 R");Dn.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},vi=function(w){Mt[w.fontName]=Mt[w.fontName]||{},Mt[w.fontName][w.fontStyle]=w.id},hn=function(w,$,pe,Pe,Be){var qe={id:"F"+(Object.keys(Vt).length+1).toString(10),postScriptName:w,fontName:$,fontStyle:pe,encoding:Pe,isStandardFont:Be||!1,metadata:{}};return Dn.publish("addFont",{font:qe,instance:this}),Vt[qe.id]=qe,vi(qe),qe.id},Nn=y.__private__.pdfEscape=y.pdfEscape=function(w,$){return(function(pe,Pe){var Be,qe,Je,yt,jt,qt,ln,En,ir;if(Je=(Pe=Pe||{}).sourceEncoding||"Unicode",jt=Pe.outputEncoding,(Pe.autoencode||jt)&&Vt[ct].metadata&&Vt[ct].metadata[Je]&&Vt[ct].metadata[Je].encoding&&(yt=Vt[ct].metadata[Je].encoding,!jt&&Vt[ct].encoding&&(jt=Vt[ct].encoding),!jt&&yt.codePages&&(jt=yt.codePages[0]),typeof jt=="string"&&(jt=yt[jt]),jt)){for(ln=!1,qt=[],Be=0,qe=pe.length;Be<qe;Be++)(En=jt[pe.charCodeAt(Be)])?qt.push(String.fromCharCode(En)):qt.push(pe[Be]),qt[Be].charCodeAt(0)>>8&&(ln=!0);pe=qt.join("")}for(Be=pe.length;ln===void 0&&Be!==0;)pe.charCodeAt(Be-1)>>8&&(ln=!0),Be--;if(!ln)return pe;for(qt=Pe.noBOM?[]:[254,255],Be=0,qe=pe.length;Be<qe;Be++){if((ir=(En=pe.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+pe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(ir),qt.push(En-(ir<<8))}return String.fromCharCode.apply(void 0,qt)})(w,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gn=y.__private__.beginPage=function(w){Qe[++vn]=[],Yt[vn]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},pt(vn),Dt(Qe[E])},Ht=function(w,$){var pe,Pe,Be;switch(n=$||n,typeof w=="string"&&(pe=_(w.toLowerCase()),Array.isArray(pe)&&(Pe=pe[0],Be=pe[1])),Array.isArray(w)&&(Pe=w[0]*_t,Be=w[1]*_t),isNaN(Pe)&&(Pe=a[0],Be=a[1]),(Pe>14400||Be>14400)&&(es.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pe=Math.min(14400,Pe),Be=Math.min(14400,Be)),a=[Pe,Be],n.substr(0,1)){case"l":Be>Pe&&(a=[Be,Pe]);break;case"p":Pe>Be&&(a=[Be,Pe])}gn(a),et(us),le(ds),ql!==0&&le(ql+" J"),Ul!==0&&le(Ul+" j"),Dn.publish("addPage",{pageNumber:vn})},Xt=function(w){w>0&&w<=vn&&(Qe.splice(w,1),Yt.splice(w,1),vn--,E>vn&&(E=vn),this.setPage(E))},pt=function(w){w>0&&w<=vn&&(E=w)},it=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Qe.length-1},ft=function(w,$,pe){var Pe,Be=void 0;return pe=pe||{},w=w!==void 0?w:Vt[ct].fontName,$=$!==void 0?$:Vt[ct].fontStyle,Pe=w.toLowerCase(),Mt[Pe]!==void 0&&Mt[Pe][$]!==void 0?Be=Mt[Pe][$]:Mt[w]!==void 0&&Mt[w][$]!==void 0?Be=Mt[w][$]:pe.disableWarning===!1&&es.warn("Unable to look up font label for font '"+w+"', '"+$+"'. Refer to getFontList() for available fonts."),Be||pe.noFallback||(Be=Mt.times[$])==null&&(Be=Mt.times.normal),Be},Ze=y.__private__.putInfo=function(){var w=nr(),$=function(Pe){return Pe};for(var pe in m!==null&&($=Ft.encryptor(w,0)),le("<<"),le("/Producer ("+Nn($("jsPDF "+un.version))+")"),at)at.hasOwnProperty(pe)&&at[pe]&&le("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+Nn($(at[pe]))+")");le("/CreationDate ("+Nn($(Ce))+")"),le(">>"),le("endobj")},dt=y.__private__.putCatalog=function(w){var $=(w=w||{}).rootDictionaryObjId||Qr;switch(nr(),le("<<"),le("/Type /Catalog"),le("/Pages "+$+" 0 R"),ve||(ve="fullwidth"),ve){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+ve;pe.substr(pe.length-1)==="%"&&(ve=parseInt(ve)/100),typeof ve=="number"&&le("/OpenAction [3 0 R /XYZ null null "+F(ve)+"]")}switch(we||(we="continuous"),we){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}H&&le("/PageMode /"+H),Dn.publish("putCatalog"),le(">>"),le("endobj")},Lt=y.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(ye+1)),le("/Root "+ye+" 0 R"),le("/Info "+(ye-1)+" 0 R"),m!==null&&le("/Encrypt "+Ft.oid+" 0 R"),le("/ID [ <"+_e+"> <"+_e+"> ]"),le(">>")},mt=y.__private__.putHeader=function(){le("%PDF-"+D),le("%")},Tt=y.__private__.putXRef=function(){var w="0000000000";le("xref"),le("0 "+(ye+1)),le("0000000000 65535 f ");for(var $=1;$<=ye;$++)typeof be[$]=="function"?le((w+be[$]()).slice(-10)+" 00000 n "):be[$]!==void 0?le((w+be[$]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},St=y.__private__.buildDocument=function(){var w;ye=0,Ie=0,Re=[],be=[],Me=[],Qr=Rr(),Er=Rr(),Dt(Re),Dn.publish("buildDocument"),mt(),dr(),(function(){Dn.publish("putAdditionalObjects");for(var pe=0;pe<Me.length;pe++){var Pe=Me[pe];xr(Pe.objId,!0),le(Pe.content),le("endobj")}Dn.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var pe in Vt)Vt.hasOwnProperty(pe)&&(b===!1||b===!0&&j.hasOwnProperty(pe))&&ls(Vt[pe])})(),(function(){var pe;for(pe in Xe)Xe.hasOwnProperty(pe)&&qi(Xe[pe])})(),(function(){for(var pe in tr)tr.hasOwnProperty(pe)&&ai(tr[pe])})(),(function(pe){var Pe;for(Pe in Ke)Ke.hasOwnProperty(Pe)&&(Ke[Pe]instanceof Iu?Mi(Ke[Pe]):Ke[Pe]instanceof Fd&&Bi(Ke[Pe],pe))})(w),Dn.publish("putResources"),w.forEach(Bn),Bn({resourcesOid:Er,objectOid:Number.MAX_SAFE_INTEGER}),Dn.publish("postPutResources"),m!==null&&(Ft.oid=nr(),le("<<"),le("/Filter /Standard"),le("/V "+Ft.v),le("/R "+Ft.r),le("/U <"+Ft.toHexString(Ft.U)+">"),le("/O <"+Ft.toHexString(Ft.O)+">"),le("/P "+Ft.P),le(">>"),le("endobj")),Ze(),dt();var $=Ie;return Tt(),Lt(),le("startxref"),le(""+$),le("%%EOF"),Dt(Qe[E]),Re.join(`
`)},It=y.__private__.getBlob=function(w){return new Blob([xe(w)],{type:"application/pdf"})},Jt=y.output=y.__private__.output=(Ds=function(w,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",w){case void 0:return St();case"save":y.save($.filename);break;case"arraybuffer":return xe(St());case"blob":return It(St());case"bloburi":case"bloburl":if(Fn.URL!==void 0&&typeof Fn.URL.createObjectURL=="function")return Fn.URL&&Fn.URL.createObjectURL(It(St()))||void 0;es.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",Pe=St();try{pe=t5(Pe)}catch{pe=t5(unescape(encodeURIComponent(Pe)))}return"data:application/pdf;filename="+$.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Be=$.pdfObjectUrl,qe="");var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",yt=Fn.open();return yt!==null&&yt.document.write(Je),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',qt=Fn.open();if(qt!==null){qt.document.write(jt);var ln=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=$.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ln.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',ir=Fn.open();if(ir!==null&&(ir.document.write(En),ir.document.title=$.filename),ir||typeof safari>"u")return ir;break;case"datauri":case"dataurl":return Fn.document.location.href=this.output("datauristring",$);default:return null}},Ds.foo=function(){try{return Ds.apply(this,arguments)}catch(pe){var w=pe.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var $="Error in function "+w.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Fn.console)throw new Error($);Fn.console.error($,pe),Fn.alert&&alert($)}},Ds.foo.bar=Ds,Ds.foo),Ut=function(w){return Array.isArray(ms)===!0&&ms.indexOf(w)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=Ut("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var Ft=null;se(),ce();var Wt=y.__private__.getPageInfo=y.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yt[w].objId,pageNumber:w,pageContext:Yt[w]}},bn=y.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Yt)if(Yt[$].objId===w)break;return Wt($)},Cr=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Yt[E].objId,pageNumber:E,pageContext:Yt[E]}};y.addPage=function(){return Ht.apply(this,arguments),this},y.setPage=function(){return pt.apply(this,arguments),Dt.call(this,Qe[E]),this},y.insertPage=function(w){return this.addPage(),this.movePage(E,w),this},y.movePage=function(w,$){var pe,Pe;if(w>$){pe=Qe[w],Pe=Yt[w];for(var Be=w;Be>$;Be--)Qe[Be]=Qe[Be-1],Yt[Be]=Yt[Be-1];Qe[$]=pe,Yt[$]=Pe,this.setPage($)}else if(w<$){pe=Qe[w],Pe=Yt[w];for(var qe=w;qe<$;qe++)Qe[qe]=Qe[qe+1],Yt[qe]=Yt[qe+1];Qe[$]=pe,Yt[$]=Pe,this.setPage($)}return this},y.deletePage=function(){return Xt.apply(this,arguments),this},y.__private__.text=y.text=function(w,$,pe,Pe,Be){var qe,Je,yt,jt,qt,ln,En,ir,mr,Hn=(Pe=Pe||{}).scope||this;if(typeof w=="number"&&typeof $=="number"&&(typeof pe=="string"||Array.isArray(pe))){var Ar=pe;pe=$,$=w,w=Ar}if(arguments[3]instanceof on==0?(yt=arguments[4],jt=arguments[5],Wr(En=arguments[3])==="object"&&En!==null||(typeof yt=="string"&&(jt=yt,yt=null),typeof En=="string"&&(jt=En,En=null),typeof En=="number"&&(yt=En,En=null),Pe={flags:En,angle:yt,align:jt})):(Q("The transform parameter of text() with a Matrix value"),mr=Be),isNaN($)||isNaN(pe)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Hn;var Fr,Or="",zt=typeof Pe.lineHeightFactor=="number"?Pe.lineHeightFactor:Dr,Gs=Hn.internal.scaleFactor;function Vi(br){return br=br.split("	").join(Array(Pe.TabLen||9).join(" ")),Nn(br,En)}function Ao(br){for(var Mr,xs=br.concat(),Bs=[],Ka=xs.length;Ka--;)typeof(Mr=xs.shift())=="string"?Bs.push(Mr):Array.isArray(br)&&(Mr.length===1||Mr[1]===void 0&&Mr[2]===void 0)?Bs.push(Mr[0]):Bs.push([Mr[0],Mr[1],Mr[2]]);return Bs}function ol(br,Mr){var xs;if(typeof br=="string")xs=Mr(br)[0];else if(Array.isArray(br)){for(var Bs,Ka,mu=br.concat(),Nc=[],Lo=mu.length;Lo--;)typeof(Bs=mu.shift())=="string"?Nc.push(Mr(Bs)[0]):Array.isArray(Bs)&&typeof Bs[0]=="string"&&(Ka=Mr(Bs[0],Bs[1],Bs[2]),Nc.push([Ka[0],Ka[1],Ka[2]]));xs=Nc}return xs}var ll=!1,zl=!0;if(typeof w=="string")ll=!0;else if(Array.isArray(w)){var cl=w.concat();Je=[];for(var ul,bi=cl.length;bi--;)(typeof(ul=cl.shift())!="string"||Array.isArray(ul)&&typeof ul[0]!="string")&&(zl=!1);ll=zl}if(ll===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var $l=M/Hn.internal.scaleFactor,Vl=$l*(zt-1);switch(Pe.baseline){case"bottom":pe-=Vl;break;case"top":pe+=$l-Vl;break;case"hanging":pe+=$l-2*Vl;break;case"middle":pe+=$l/2-Vl}if((ln=Pe.maxWidth||0)>0&&(typeof w=="string"?w=Hn.splitTextToSize(w,ln):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(br,Mr){return br.concat(Hn.splitTextToSize(Mr,ln))},[]))),qe={text:w,x:$,y:pe,options:Pe,mutex:{pdfEscape:Nn,activeFontKey:ct,fonts:Vt,activeFontSize:M}},Dn.publish("preProcessText",qe),w=qe.text,yt=(Pe=qe.options).angle,mr instanceof on==0&&yt&&typeof yt=="number"){yt*=Math.PI/180,Pe.rotationDirection===0&&(yt=-yt),B===v&&(yt=-yt);var hu=Math.cos(yt),pu=Math.sin(yt);mr=new on(hu,pu,-pu,hu,0,0)}else yt&&yt instanceof on&&(mr=yt);B!==v||mr||(mr=Ss),(qt=Pe.charSpace||_i)!==void 0&&(Or+=te(z(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ir=Pe.horizontalScale)!==void 0&&(Or+=te(100*ir)+` Tz
`),Pe.lang;var Hi=-1,Wa=Pe.renderingMode!==void 0?Pe.renderingMode:Pe.stroke,uo=Hn.internal.getCurrentPageInfo().pageContext;switch(Wa){case 0:case!1:case"fill":Hi=0;break;case 1:case!0:case"stroke":Hi=1;break;case 2:case"fillThenStroke":Hi=2;break;case 3:case"invisible":Hi=3;break;case 4:case"fillAndAddForClipping":Hi=4;break;case 5:case"strokeAndAddPathForClipping":Hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hi=6;break;case 7:case"addToPathForClipping":Hi=7}var ed=uo.usedRenderingMode!==void 0?uo.usedRenderingMode:-1;Hi!==-1?Or+=Hi+` Tr
`:ed!==-1&&(Or+=`0 Tr
`),Hi!==-1&&(uo.usedRenderingMode=Hi),jt=Pe.align||"left";var va,dl=M*zt,xc=Hn.internal.pageSize.getWidth(),yc=Vt[ct];qt=Pe.charSpace||_i,ln=Pe.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},Pe.flags);var Po=[],Ra=function(br){return Hn.getStringUnitWidth(br,{font:yc,charSpace:qt,fontSize:M,doKerning:!1})*M/Gs};if(Object.prototype.toString.call(w)==="[object Array]"){var xa;Je=Ao(w),jt!=="left"&&(va=Je.map(Ra));var ya,fl=0;if(jt==="right"){$-=va[0],w=[],bi=Je.length;for(var fo=0;fo<bi;fo++)fo===0?(ya=xi($),xa=ga(pe)):(ya=z(fl-va[fo]),xa=-dl),w.push([Je[fo],ya,xa]),fl=va[fo]}else if(jt==="center"){$-=va[0]/2,w=[],bi=Je.length;for(var ko=0;ko<bi;ko++)ko===0?(ya=xi($),xa=ga(pe)):(ya=z((fl-va[ko])/2),xa=-dl),w.push([Je[ko],ya,xa]),fl=va[ko]}else if(jt==="left"){w=[],bi=Je.length;for(var To=0;To<bi;To++)w.push(Je[To])}else if(jt==="justify"&&yc.encoding==="Identity-H"){w=[],bi=Je.length,ln=ln!==0?ln:xc;for(var ho=0,js=0;js<bi;js++)if(xa=js===0?ga(pe):-dl,ya=js===0?xi($):ho,js<bi-1){var Hl=z((ln-va[js])/(Je[js].split(" ").length-1)),po=Je[js].split(" ");w.push([po[0]+" ",ya,xa]),ho=0;for(var Ga=1;Ga<po.length;Ga++){var Wl=(Ra(po[Ga-1]+" "+po[Ga])-Ra(po[Ga]))*Gs+Hl;Ga==po.length-1?w.push([po[Ga],Wl,0]):w.push([po[Ga]+" ",Wl,0]),ho-=Wl}}else w.push([Je[js],ya,xa]);w.push(["",ho,0])}else{if(jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],bi=Je.length,ln=ln!==0?ln:xc,js=0;js<bi;js++){xa=js===0?ga(pe):-dl,ya=js===0?xi($):0;var Gl=Je[js].split(" ").length-1,bc=Gl>0?(ln-va[js])/Gl:0;js<bi-1?Po.push(te(z(bc))):Po.push(0),w.push([Je[js],ya,xa])}}}(typeof Pe.R2L=="boolean"?Pe.R2L:R)===!0&&(w=ol(w,function(br,Mr,xs){return[br.split("").reverse().join(""),Mr,xs]})),qe={text:w,x:$,y:pe,options:Pe,mutex:{pdfEscape:Nn,activeFontKey:ct,fonts:Vt,activeFontSize:M}},Dn.publish("postProcessText",qe),w=qe.text,Fr=qe.mutex.isHex||!1;var wc=Vt[ct].encoding;wc!=="WinAnsiEncoding"&&wc!=="StandardEncoding"||(w=ol(w,function(br,Mr,xs){return[Vi(br),Mr,xs]})),Je=Ao(w),w=[];for(var Eo,hl,pl,Kl=Array.isArray(Je[0])?1:0,ml="",Ql=function(br,Mr,xs){var Bs="";return xs instanceof on?(xs=typeof Pe.angle=="number"?Rs(xs,new on(1,0,0,1,br,Mr)):Rs(new on(1,0,0,1,br,Mr),xs),B===v&&(xs=Rs(new on(1,0,0,-1,0,0),xs)),Bs=xs.join(" ")+` Tm
`):Bs=te(br)+" "+te(Mr)+` Td
`,Bs},vs=0;vs<Je.length;vs++){switch(ml="",Kl){case 1:pl=(Fr?"<":"(")+Je[vs][0]+(Fr?">":")"),Eo=parseFloat(Je[vs][1]),hl=parseFloat(Je[vs][2]);break;case 0:pl=(Fr?"<":"(")+Je[vs]+(Fr?">":")"),Eo=xi($),hl=ga(pe)}Po!==void 0&&Po[vs]!==void 0&&(ml=Po[vs]+` Tw
`),vs===0?w.push(ml+Ql(Eo,hl,mr)+pl):Kl===0?w.push(ml+pl):Kl===1&&w.push(ml+Ql(Eo,hl,mr)+pl)}w=Kl===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var ea=`BT
/`;return ea+=ct+" "+M+` Tf
`,ea+=te(M*zt)+` TL
`,ea+=Os+`
`,ea+=Or,ea+=w,le(ea+="ET"),j[ct]=!0,Hn};var dn=y.__private__.clip=y.clip=function(w){return le(w==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return dn("evenodd")},y.__private__.discardPath=y.discardPath=function(){return le("n"),this};var q=y.__private__.isValidStyle=function(w){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&($=!0),$};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(w){return q(w)&&(p=w),this};var ue=y.__private__.getStyle=y.getStyle=function(w){var $=p;switch(w){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=w}return $},oe=y.close=function(){return le("h"),this};y.stroke=function(){return le("S"),this},y.fill=function(w){return Te("f",w),this},y.fillEvenOdd=function(w){return Te("f*",w),this},y.fillStroke=function(w){return Te("B",w),this},y.fillStrokeEvenOdd=function(w){return Te("B*",w),this};var Te=function(w,$){Wr($)==="object"?An($,w):le(w)},Ne=function(w){w===null||B===v&&w===void 0||(w=ue(w),le(w))};function At(w,$,pe,Pe,Be){var qe=new Fd($||this.boundingBox,pe||this.xStep,Pe||this.yStep,this.gState,Be||this.matrix);qe.stream=this.stream;var Je=w+"$$"+this.cloneIndex+++"$$";return os(Je,qe),qe}var An=function(w,$){var pe=ot[w.key],Pe=Ke[pe];if(Pe instanceof Iu)le("q"),le(Gt($)),Pe.gState&&y.setGState(Pe.gState),le(w.matrix.toString()+" cm"),le("/"+pe+" sh"),le("Q");else if(Pe instanceof Fd){var Be=new on(1,0,0,-1,0,Ji());w.matrix&&(Be=Be.multiply(w.matrix||Ss),pe=At.call(Pe,w.key,w.boundingBox,w.xStep,w.yStep,Be).id),le("q"),le("/Pattern cs"),le("/"+pe+" scn"),Pe.gState&&y.setGState(Pe.gState),le($),le("Q")}},Gt=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},hr=y.moveTo=function(w,$){return le(te(z(w))+" "+te(Y($))+" m"),this},Xr=y.lineTo=function(w,$){return le(te(z(w))+" "+te(Y($))+" l"),this},_r=y.curveTo=function(w,$,pe,Pe,Be,qe){return le([te(z(w)),te(Y($)),te(z(pe)),te(Y(Pe)),te(z(Be)),te(Y(qe)),"c"].join(" ")),this};y.__private__.line=y.line=function(w,$,pe,Pe,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(Pe)||!q(Be))throw new Error("Invalid arguments passed to jsPDF.line");return B===I?this.lines([[pe-w,Pe-$]],w,$,[1,1],Be||"S"):this.lines([[pe-w,Pe-$]],w,$,[1,1]).stroke()},y.__private__.lines=y.lines=function(w,$,pe,Pe,Be,qe){var Je,yt,jt,qt,ln,En,ir,mr,Hn,Ar,Fr,Or;if(typeof w=="number"&&(Or=pe,pe=$,$=w,w=Or),Pe=Pe||[1,1],qe=qe||!1,isNaN($)||isNaN(pe)||!Array.isArray(w)||!Array.isArray(Pe)||!q(Be)||typeof qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(hr($,pe),Je=Pe[0],yt=Pe[1],qt=w.length,Ar=$,Fr=pe,jt=0;jt<qt;jt++)(ln=w[jt]).length===2?(Ar=ln[0]*Je+Ar,Fr=ln[1]*yt+Fr,Xr(Ar,Fr)):(En=ln[0]*Je+Ar,ir=ln[1]*yt+Fr,mr=ln[2]*Je+Ar,Hn=ln[3]*yt+Fr,Ar=ln[4]*Je+Ar,Fr=ln[5]*yt+Fr,_r(En,ir,mr,Hn,Ar,Fr));return qe&&oe(),Ne(Be),this},y.path=function(w){for(var $=0;$<w.length;$++){var pe=w[$],Pe=pe.c;switch(pe.op){case"m":hr(Pe[0],Pe[1]);break;case"l":Xr(Pe[0],Pe[1]);break;case"c":_r.apply(this,Pe);break;case"h":oe()}}return this},y.__private__.rect=y.rect=function(w,$,pe,Pe,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(Pe)||!q(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return B===I&&(Pe=-Pe),le([te(z(w)),te(Y($)),te(z(pe)),te(z(Pe)),"re"].join(" ")),Ne(Be),this},y.__private__.triangle=y.triangle=function(w,$,pe,Pe,Be,qe,Je){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(Pe)||isNaN(Be)||isNaN(qe)||!q(Je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-w,Pe-$],[Be-pe,qe-Pe],[w-Be,$-qe]],w,$,[1,1],Je,!0),this},y.__private__.roundedRect=y.roundedRect=function(w,$,pe,Pe,Be,qe,Je){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(Pe)||isNaN(Be)||isNaN(qe)||!q(Je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*pe),qe=Math.min(qe,.5*Pe),this.lines([[pe-2*Be,0],[Be*yt,0,Be,qe-qe*yt,Be,qe],[0,Pe-2*qe],[0,qe*yt,-Be*yt,qe,-Be,qe],[2*Be-pe,0],[-Be*yt,0,-Be,-qe*yt,-Be,-qe],[0,2*qe-Pe],[0,-qe*yt,Be*yt,-qe,Be,-qe]],w+Be,$,[1,1],Je,!0),this},y.__private__.ellipse=y.ellipse=function(w,$,pe,Pe,Be){if(isNaN(w)||isNaN($)||isNaN(pe)||isNaN(Pe)||!q(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qe=4/3*(Math.SQRT2-1)*pe,Je=4/3*(Math.SQRT2-1)*Pe;return hr(w+pe,$),_r(w+pe,$-Je,w+qe,$-Pe,w,$-Pe),_r(w-qe,$-Pe,w-pe,$-Je,w-pe,$),_r(w-pe,$+Je,w-qe,$+Pe,w,$+Pe),_r(w+qe,$+Pe,w+pe,$+Je,w+pe,$),Ne(Be),this},y.__private__.circle=y.circle=function(w,$,pe,Pe){if(isNaN(w)||isNaN($)||isNaN(pe)||!q(Pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,$,pe,pe,Pe)},y.setFont=function(w,$,pe){return pe&&($=W($,pe)),ct=ft(w,$,{disableWarning:!1}),this};var cs=y.__private__.getFont=y.getFont=function(){return Vt[ft.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var w,$,pe={};for(w in Mt)if(Mt.hasOwnProperty(w))for($ in pe[w]=[],Mt[w])Mt[w].hasOwnProperty($)&&pe[w].push($);return pe},y.addFont=function(w,$,pe,Pe,Be){var qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qe.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&qe.indexOf(arguments[3])==-1&&(pe=W(pe,Pe)),hn.call(this,w,$,pe,Be=Be||"Identity-H")};var Dr,us=t.lineWidth||.200025,Xi=y.__private__.getLineWidth=y.getLineWidth=function(){return us},et=y.__private__.setLineWidth=y.setLineWidth=function(w){return us=w,le(te(z(w))+" w"),this};y.__private__.setLineDash=un.API.setLineDash=un.API.setLineDashPattern=function(w,$){if(w=w||[],$=$||0,isNaN($)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(pe){return te(z(pe))}).join(" "),$=te(z($)),le("["+w+"] "+$+" d"),this};var qn=y.__private__.getLineHeight=y.getLineHeight=function(){return M*Dr};y.__private__.getLineHeight=y.getLineHeight=function(){return M*Dr};var Bl=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Dr=w),this},il=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Dr};Bl(t.lineHeight);var xi=y.__private__.getHorizontalCoordinate=function(w){return z(w)},ga=y.__private__.getVerticalCoordinate=function(w){return B===v?w:Yt[E].mediaBox.topRightY-Yt[E].mediaBox.bottomLeftY-z(w)},Ha=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(w){return te(xi(w))},Ir=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(w){return te(ga(w))},ds=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Ws(ds)},y.__private__.setStrokeColor=y.setDrawColor=function(w,$,pe,Pe){return ds=Zr({ch1:w,ch2:$,ch3:pe,ch4:Pe,pdfColorType:"draw",precision:2}),le(ds),this};var Ui=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Ws(Ui)},y.__private__.setFillColor=y.setFillColor=function(w,$,pe,Pe){return Ui=Zr({ch1:w,ch2:$,ch3:pe,ch4:Pe,pdfColorType:"fill",precision:2}),le(Ui),this};var Os=t.textColor||"0 g",Co=y.__private__.getTextColor=y.getTextColor=function(){return Ws(Os)};y.__private__.setTextColor=y.setTextColor=function(w,$,pe,Pe){return Os=Zr({ch1:w,ch2:$,ch3:pe,ch4:Pe,pdfColorType:"text",precision:3}),this};var _i=t.charSpace,_o=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(_i||0)};y.__private__.setCharSpace=y.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _i=w,this};var ql=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ql=$,le($+" J"),this};var Ul=0;y.__private__.setLineJoin=y.setLineJoin=function(w){var $=y.CapJoinStyles[w];if($===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ul=$,le($+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(te(z(w))+" M"),this},y.GState=Pm,y.setGState=function(w){(w=typeof w=="string"?Xe[an[w]]:co(null,w)).equals(er)||(le("/"+w.id+" gs"),er=w)};var co=function(w,$){if(!w||!an[w]){var pe=!1;for(var Pe in Xe)if(Xe.hasOwnProperty(Pe)&&Xe[Pe].equals($)){pe=!0;break}if(pe)$=Xe[Pe];else{var Be="GS"+(Object.keys(Xe).length+1).toString(10);Xe[Be]=$,$.id=Be}return w&&(an[w]=$.id),Dn.publish("addGState",$),$}};y.addGState=function(w,$){return co(w,$),this},y.saveGraphicsState=function(){return le("q"),tn.push({key:ct,size:M,color:Os}),this},y.restoreGraphicsState=function(){le("Q");var w=tn.pop();return ct=w.key,M=w.size,Os=w.color,er=null,this},y.setCurrentTransformationMatrix=function(w){return le(w.toString()+" cm"),this},y.comment=function(w){return le("#"+w),this};var zi=function(w,$){var pe=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(qe){isNaN(qe)||(pe=parseFloat(qe))}});var Pe=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pe},set:function(qe){isNaN(qe)||(Pe=parseFloat(qe))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(qe){Be=qe.toString()}}),this},oi=function(w,$,pe,Pe){zi.call(this,w,$),this.type="rect";var Be=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(Je){isNaN(Je)||(Be=parseFloat(Je))}});var qe=Pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qe},set:function(Je){isNaN(Je)||(qe=parseFloat(Je))}}),this},li=function(){this.page=vn,this.currentPage=E,this.pages=Qe.slice(0),this.pagesContext=Yt.slice(0),this.x=kt,this.y=cr,this.matrix=yn,this.width=Ms(E),this.height=ci(E),this.outputDestination=vt,this.id="",this.objectNumber=-1};li.prototype.restore=function(){vn=this.page,E=this.currentPage,Yt=this.pagesContext,Qe=this.pages,kt=this.x,cr=this.y,yn=this.matrix,yi(E,this.width),Ai(E,this.height),vt=this.outputDestination};var $i=function(w,$,pe,Pe,Be){ur.push(new li),vn=E=0,Qe=[],kt=w,cr=$,yn=Be,gn([pe,Pe])};for(var Ea in y.beginFormObject=function(w,$,pe,Pe,Be){return $i(w,$,pe,Pe,Be),this},y.endFormObject=function(w){return(function($){if(vr[$])ur.pop().restore();else{var pe=new li,Pe="Xo"+(Object.keys(tr).length+1).toString(10);pe.id=Pe,vr[$]=Pe,tr[Pe]=pe,Dn.publish("addFormObject",pe),ur.pop().restore()}})(w),this},y.doFormObject=function(w,$){var pe=tr[vr[w]];return le("q"),le($.toString()+" cm"),le("/"+pe.id+" Do"),le("Q"),this},y.getFormObject=function(w){var $=tr[vr[w]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},y.save=function(w,$){return w=w||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Du(It(St()),w),typeof Du.unload=="function"&&Fn.setTimeout&&setTimeout(Du.unload,911),this):new Promise(function(pe,Pe){try{var Be=Du(It(St()),w);typeof Du.unload=="function"&&Fn.setTimeout&&setTimeout(Du.unload,911),pe(Be)}catch(qe){Pe(qe.message)}})},un.API)un.API.hasOwnProperty(Ea)&&(Ea==="events"&&un.API.events.length?(function(w,$){var pe,Pe,Be;for(Be=$.length-1;Be!==-1;Be--)pe=$[Be][0],Pe=$[Be][1],w.subscribe.apply(w,[pe].concat(typeof Pe=="function"?[Pe]:Pe))})(Dn,un.API.events):y[Ea]=un.API[Ea]);function Ms(w){return Yt[w].mediaBox.topRightX-Yt[w].mediaBox.bottomLeftX}function yi(w,$){Yt[w].mediaBox.topRightX=$+Yt[w].mediaBox.bottomLeftX}function ci(w){return Yt[w].mediaBox.topRightY-Yt[w].mediaBox.bottomLeftY}function Ai(w,$){Yt[w].mediaBox.topRightY=$+Yt[w].mediaBox.bottomLeftY}var La=y.getPageWidth=function(w){return Ms(w=w||E)/_t},ui=y.setPageWidth=function(w,$){yi(w,$*_t)},Ji=y.getPageHeight=function(w){return ci(w=w||E)/_t},al=y.setPageHeight=function(w,$){Ai(w,$*_t)};return y.internal={pdfEscape:Nn,getStyle:ue,getFont:cs,getFontSize:re,getCharSpace:_o,getTextColor:Co,getLineHeight:qn,getLineHeightFactor:il,getLineWidth:Xi,write:xt,getHorizontalCoordinate:xi,getVerticalCoordinate:ga,getCoordinateString:Ha,getVerticalCoordinateString:Ir,collections:{},newObject:nr,newAdditionalObject:gs,newObjectDeferred:Rr,newObjectDeferredBegin:xr,getFilters:Is,putStream:Yr,events:Dn,scaleFactor:_t,pageSize:{getWidth:function(){return La(E)},setWidth:function(w){ui(E,w)},getHeight:function(){return Ji(E)},setHeight:function(w){al(E,w)}},encryptionOptions:m,encryption:Ft,getEncryptor:function(w){return m!==null?Ft.encryptor(w,0):function($){return $}},output:Jt,getNumberOfPages:it,get pages(){return Qe},out:le,f2:F,f3:L,getPageInfo:Wt,getPageInfoByObjId:bn,getCurrentPageInfo:Cr,getPDFVersion:S,Point:zi,Rectangle:oi,Matrix:on,hasHotfix:Ut},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return La(E)},set:function(w){ui(E,w)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ji(E)},set:function(w){al(E,w)},enumerable:!0,configurable:!0}),(function(w){for(var $=0,pe=X.length;$<pe;$++){var Pe=hn.call(this,w[$][0],w[$][1],w[$][2],X[$][3],!0);b===!1&&(j[Pe]=!0);var Be=w[$][0].split("-");vi({id:Pe,fontName:Be[0],fontStyle:Be[1]||""})}Dn.publish("addFonts",{fonts:Vt,dictionary:Mt})}).call(y,X),ct="F1",Ht(a,n),Dn.publish("initialized"),y}Ld.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ld.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ld.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ld.prototype.processOwnerPassword=function(t,e){return Lv(Ev(e).substr(0,5),t)},Ld.prototype.encryptor=function(t,e){var n=Ev(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Lv(n,r)}},Pm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Wr(t)!==Wr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},un.API={events:[]},un.version="4.0.0";var Vs=un.API,R1=1,Ju=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vn=function(t){return t.toFixed(2)},Wc=function(t){return t.toFixed(5)};Vs.__acroform__={};var Va=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},i5=function(t){return t*R1},jl=function(t){var e=new J4,n=sn.internal.getHeight(t)||0,r=sn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Vn(r)),Number(Vn(n))],e},wI=Vs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},NI=Vs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},SI=Vs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Js=Vs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SI(t,e-1)},ei=Vs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wI(t,e-1)},ti=Vs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NI(t,e-1)},jI=Vs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=t[0],o=t[1],u=t[2],c=t[3],f={};return f.lowerLeft_X=n(a)||0,f.lowerLeft_Y=r(o+c)||0,f.upperRight_X=n(a+u)||0,f.upperRight_Y=r(o)||0,[Number(Vn(f.lowerLeft_X)),Number(Vn(f.lowerLeft_Y)),Number(Vn(f.upperRight_X)),Number(Vn(f.upperRight_Y))]},CI=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Rv(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Vn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=jl(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Rv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(F){return F.split(`
`)}):a.map(function(F){return[F]});var o=n,u=sn.internal.getHeight(t)||0;u=u<0?-u:u;var c=sn.internal.getWidth(t)||0;c=c<0?-c:c;var f=function(F,L,z){if(F+1<a.length){var Y=L+" "+a[F+1][0];return Dp(Y,t,z).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,b=Dp("3",t,o).height,j=t.multiline?u-o:(u-b)/2,y=j+=2,D=0,S=0,P=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dp(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var _="",I=0,v=0;v<a.length;v++)if(a.hasOwnProperty(v)){var B=!1;if(a[v].length!==1&&P!==a[v].length-1){if((b+2)*(I+2)+2>u)continue e;_+=a[v][P],B=!0,S=v,v--}else{_=(_+=a[v][P]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var ee=parseInt(v),ae=f(ee,_,o),W=v>=a.length-1;if(ae&&!W){_+=" ",P=0;continue}if(ae||W){if(W)S=ee;else if(t.multiline&&(b+2)*(I+2)+2>u)continue e}else{if(!t.multiline||(b+2)*(I+2)+2>u)continue e;S=ee}}for(var te="",Q=D;Q<=S;Q++){var de=a[Q];if(t.multiline){if(Q===S){te+=de[P]+" ",P=(P+1)%de.length;continue}if(Q===D){te+=de[de.length-1]+" ";continue}}te+=de[0]+" "}switch(te=te.substr(te.length-1)==" "?te.substr(0,te.length-1):te,m=Dp(te,t,o).width,t.textAlign){case"right":p=c-m-2;break;case"center":p=(c-m)/2;break;default:p=2}e+=Vn(p)+" "+Vn(y)+` Td
`,e+="("+Ju(te)+`) Tj
`,e+=-Vn(p)+` 0 Td
`,y=-(o+2),m=0,D=B?S:S+1,I++,_=""}break}return r.text=e,r.fontSize=o,r},Dp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},_I={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},AI=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},PI=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(_I)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");R1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ej,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.objId=void 0,o.hasAnnotation&&AI(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,a){var o=!r;for(var u in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var c=r[u],f=[],p=c.Rect;if(c.Rect&&(c.Rect=jI(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=sn.createDefaultAppearanceStream(c),Wr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=p,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=CI(c);f.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var b="";for(var j in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(j)){var y=c.appearanceStreamContent[j];if(b+="/"+j+" ",b+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var D=y[u];typeof D=="function"&&(D=D.call(a,c)),b+="/"+u+" "+D+" ",a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D)}}else typeof(D=y)=="function"&&(D=D.call(a,c)),b+="/"+u+" "+D,a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(S,P){for(var _ in S)if(S.hasOwnProperty(_)){var I=_,v=S[_];P.internal.newObjectDeferredBegin(v.objId,!0),Wr(v)==="object"&&typeof v.putStream=="function"&&v.putStream(),delete S[I]}})(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},X4=Vs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),Wr(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),a+="("+Ju(r(t[o].toString()))+")"):a+=t[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},M0=function(t,e,n){var r=function(a){return a};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Ju(r(t))+")"},Al=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Al.prototype.toString=function(){return this.objId+" 0 R"},Al.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Al.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],a=this[r];a&&(Array.isArray(a)?t.push({key:r,value:X4(a,this.objId,this.scope)}):a instanceof Al?(a.scope=this.scope,t.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:r,value:a}))}return t};var J4=function(){Al.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Va(J4,Al);var ej=function(){Al.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ju(n(t))+")"}},set:function(n){t=n}})};Va(ej,Al);var rl=function t(){Al.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Js(e,3)},set:function(_){_?this.F=ei(e,3):this.F=ti(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof km)return;o="FieldObject"+t.FieldNum++}var _=function(I){return I};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Ju(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/R1:p},set:function(_){p=_}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof km||this instanceof Mu))return M0(b,this.objId,this.scope)},set:function(_){_=_.toString(),b=_}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Ii==0?M0(j,this.objId,this.scope):j},set:function(_){_=_.toString(),j=this instanceof Ii==0?_.substr(0,1)==="("?Pd(_.substr(1,_.length-2)):Pd(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ii==1?Pd(j.substr(1,j.length-1)):j},set:function(_){_=_.toString(),j=this instanceof Ii==1?"/"+_:_}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ii==0?M0(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Ii==0?_.substr(0,1)==="("?Pd(_.substr(1,_.length-2)):Pd(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ii==1?Pd(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Ii==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(_){_=!!_,S=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(_){D=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,1)},set:function(_){_?this.Ff=ei(this.Ff,1):this.Ff=ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,2)},set:function(_){_?this.Ff=ei(this.Ff,2):this.Ff=ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,3)},set:function(_){_?this.Ff=ei(this.Ff,3):this.Ff=ti(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');P=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(P){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};Va(rl,Al);var Hd=function(){rl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X4(e,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,p=[];f=u.exec(o);)p.push(f[c]);return p})(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,18)},set:function(n){n?this.Ff=ei(this.Ff,18):this.Ff=ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ei(this.Ff,19):this.Ff=ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,20)},set:function(n){n?(this.Ff=ei(this.Ff,20),e.sort()):this.Ff=ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,22)},set:function(n){n?this.Ff=ei(this.Ff,22):this.Ff=ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,23)},set:function(n){n?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,27)},set:function(n){n?this.Ff=ei(this.Ff,27):this.Ff=ti(this.Ff,27)}}),this.hasAppearanceStream=!1};Va(Hd,rl);var Wd=function(){Hd.call(this),this.fontName="helvetica",this.combo=!1};Va(Wd,Hd);var Gd=function(){Wd.call(this),this.combo=!0};Va(Gd,Wd);var Yp=function(){Gd.call(this),this.edit=!0};Va(Yp,Gd);var Ii=function(){rl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,15)},set:function(n){n?this.Ff=ei(this.Ff,15):this.Ff=ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,16)},set:function(n){n?this.Ff=ei(this.Ff,16):this.Ff=ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,17)},set:function(n){n?this.Ff=ei(this.Ff,17):this.Ff=ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,26)},set:function(n){n?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+Ju(n(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Wr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Va(Ii,rl);var Xp=function(){Ii.call(this),this.pushButton=!0};Va(Xp,Ii);var Kd=function(){Ii.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Va(Kd,Ii);var km=function(){var t,e;rl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+Ju(a(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Wr(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Va(km,rl),Kd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Kd.prototype.createOption=function(t){var e=new km;return e.Parent=this,e.optionName=t,this.Kids.push(e),kI.call(this.scope,e),e};var Jp=function(){Ii.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};Va(Jp,Ii);var Mu=function(){rl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,13)},set:function(e){e?this.Ff=ei(this.Ff,13):this.Ff=ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,21)},set:function(e){e?this.Ff=ei(this.Ff,21):this.Ff=ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,23)},set:function(e){e?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,24)},set:function(e){e?this.Ff=ei(this.Ff,24):this.Ff=ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,25)},set:function(e){e?this.Ff=ei(this.Ff,25):this.Ff=ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,26)},set:function(e){e?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Va(Mu,rl);var em=function(){Mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Js(this.Ff,14)},set:function(t){t?this.Ff=ei(this.Ff,14):this.Ff=ti(this.Ff,14)}}),this.password=!0};Va(em,Mu);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=Rv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Vn(sn.internal.getWidth(t))+" "+Vn(sn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Vn(o.fontSize)+" Tf "+a),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=[],o=sn.internal.getHeight(t),u=sn.internal.getWidth(t),c=Rv(t,t.caption);return a.push("1 g"),a.push("0 0 "+Vn(u)+" "+Vn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Vn(u-1)+" "+Vn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Vn(c.fontSize)+" Tf "+r),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vn(sn.internal.getWidth(t))+" "+Vn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Circle.YesNormal,e.D[t]=sn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jl(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=sn.internal.Bezier_C,o=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wc(sn.internal.getWidth(t)/2)+" "+Wc(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*sn.internal.Bezier_C).toFixed(5)),u=Number((r*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wc(sn.internal.getWidth(t)/2)+" "+Wc(sn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wc(sn.internal.getWidth(t)/2)+" "+Wc(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wc(sn.internal.getWidth(t)/2)+" "+Wc(sn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Cross.YesNormal,e.D[t]=sn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jl(t);e.scope=t.scope;var n=[],r=sn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Vn(sn.internal.getWidth(t)-2)+" "+Vn(sn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Vn(r.x1.x)+" "+Vn(r.x1.y)+" m"),n.push(Vn(r.x2.x)+" "+Vn(r.x2.y)+" l"),n.push(Vn(r.x4.x)+" "+Vn(r.x4.y)+" m"),n.push(Vn(r.x3.x)+" "+Vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=sn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(sn.internal.getWidth(t))+" "+Vn(sn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Vn(sn.internal.getWidth(t)-2)+" "+Vn(sn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Vn(n.x1.x)+" "+Vn(n.x1.y)+" m"),r.push(Vn(n.x2.x)+" "+Vn(n.x2.y)+" l"),r.push(Vn(n.x4.x)+" "+Vn(n.x4.y)+" m"),r.push(Vn(n.x3.x)+" "+Vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vn(sn.internal.getWidth(t))+" "+Vn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};sn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=sn.internal.getWidth(t),n=sn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},sn.internal.getWidth=function(t){var e=0;return Wr(t)==="object"&&(e=i5(t.Rect[2])),e},sn.internal.getHeight=function(t){var e=0;return Wr(t)==="object"&&(e=i5(t.Rect[3])),e};var kI=Vs.addField=function(t){if(PI(this,t),!(t instanceof rl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=Hd,Vs.AcroFormListBox=Wd,Vs.AcroFormComboBox=Gd,Vs.AcroFormEditBox=Yp,Vs.AcroFormButton=Ii,Vs.AcroFormPushButton=Xp,Vs.AcroFormRadioButton=Kd,Vs.AcroFormCheckBox=Jp,Vs.AcroFormTextField=Mu,Vs.AcroFormPasswordField=em,Vs.AcroFormAppearance=sn,Vs.AcroForm={ChoiceField:Hd,ListBox:Wd,ComboBox:Gd,EditBox:Yp,Button:Ii,PushButton:Xp,RadioButton:Kd,CheckBox:Jp,TextField:Mu,PasswordField:em,Appearance:sn},un.AcroForm={ChoiceField:Hd,ListBox:Wd,ComboBox:Gd,EditBox:Yp,Button:Ii,PushButton:Xp,RadioButton:Kd,CheckBox:Jp,TextField:Mu,PasswordField:em,Appearance:sn};un.AcroForm;function tj(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(F,L){var z,Y,Ce,_e,Ae,ce=n;if((L=L||n)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(ae(F))for(Ae in r)for(Ce=r[Ae],z=0;z<Ce.length;z+=1){for(_e=!0,Y=0;Y<Ce[z].length;Y+=1)if(Ce[z][Y]!==void 0&&Ce[z][Y]!==F[Y]){_e=!1;break}if(_e===!0){ce=Ae;break}}else for(Ae in r)for(Ce=r[Ae],z=0;z<Ce.length;z+=1){for(_e=!0,Y=0;Y<Ce[z].length;Y+=1)if(Ce[z][Y]!==void 0&&Ce[z][Y]!==F.charCodeAt(Y)){_e=!1;break}if(_e===!0){ce=Ae;break}}return ce===n&&L!==n&&(ce=L),ce},o=function F(L){for(var z=this.internal.write,Y=this.internal.putStream,Ce=(0,this.internal.getFilters)();Ce.indexOf("FlateEncode")!==-1;)Ce.splice(Ce.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var _e=[];if(_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Image"}),_e.push({key:"Width",value:L.width}),_e.push({key:"Height",value:L.height}),L.colorSpace===_.INDEXED?_e.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(_e.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===_.DEVICE_CMYK&&_e.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_e.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&_e.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var Ae="",ce=0,ge=L.transparency.length;ce<ge;ce++)Ae+=L.transparency[ce]+" "+L.transparency[ce]+" ";_e.push({key:"Mask",value:"["+Ae+"]"})}L.sMask!==void 0&&_e.push({key:"SMask",value:L.objectId+1+" 0 R"});var De=L.filter!==void 0?["/"+L.filter]:void 0;if(Y({data:L.data,additionalKeyValues:_e,alreadyAppliedFilters:De,objectId:L.objectId}),z("endobj"),"sMask"in L&&L.sMask!==void 0){var se,O=(se=L.sMaskBitsPerComponent)!==null&&se!==void 0?se:L.bitsPerComponent,E={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:L.sMask};"filter"in L&&(E.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(L.width),E.filter=L.filter),F.call(this,E)}if(L.colorSpace===_.INDEXED){var ne=this.internal.newObject();Y({data:te(new Uint8Array(L.palette)),objectId:ne}),z("endobj")}},u=function(){var F=this.internal.collections[e+"images"];for(var L in F)o.call(this,F[L])},c=function(){var F,L=this.internal.collections[e+"images"],z=this.internal.write;for(var Y in L)z("/I"+(F=L[Y]).index,F.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},p=function(){var F=this.internal.collections[e+"images"];return f.call(this),F},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(F){return typeof t["process"+F.toUpperCase()]=="function"},j=function(F){return Wr(F)==="object"&&F.nodeType===1},y=function(F,L){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var z=""+F.getAttribute("src");if(z.indexOf("data:image/")===0)return Zp(unescape(z).split("base64,").pop());var Y=t.loadFile(z,!0);if(Y!==void 0)return Y}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Ce;switch(L){case"PNG":Ce="image/png";break;case"WEBP":Ce="image/webp";break;default:Ce="image/jpeg"}return Zp(F.toDataURL(Ce,1).split("base64,").pop())}},D=function(F){var L=this.internal.collections[e+"images"];if(L){for(var z in L)if(F===L[z].alias)return L[z]}},S=function(F,L,z){return F||L||(F=-96,L=-96),F<0&&(F=-1*z.width*72/F/this.internal.scaleFactor),L<0&&(L=-1*z.height*72/L/this.internal.scaleFactor),F===0&&(F=L*z.width/z.height),L===0&&(L=F*z.height/z.width),[F,L]},P=function(F,L,z,Y,Ce,_e){var Ae=S.call(this,z,Y,Ce),ce=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,De=p.call(this);if(z=Ae[0],Y=Ae[1],De[Ce.index]=Ce,_e){_e*=Math.PI/180;var se=Math.cos(_e),O=Math.sin(_e),E=function(me){return me.toFixed(4)},ne=[E(se),E(O),E(-1*O),E(se),0,0,"cm"]}this.internal.write("q"),_e?(this.internal.write([1,"0","0",1,ce(F),ge(L+Y),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([ce(z),"0","0",ce(Y),"0","0","cm"].join(" "))):this.internal.write([ce(z),"0","0",ce(Y),ce(F),ge(L+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ce.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(F){var L,z,Y=0;if(typeof F=="string")for(z=F.length,L=0;L<z;L++)Y=(Y<<5)-Y+F.charCodeAt(L),Y|=0;else if(ae(F))for(z=F.byteLength/2,L=0;L<z;L++)Y=(Y<<5)-Y+F[L],Y|=0;return Y},B=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var L=!0;return F.length===0&&(L=!1),F.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(L=!1),L},ee=t.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var L=F.indexOf(",");return L<0?null:F.substring(0,L).trim().endsWith("base64")?F.substring(L+1):null};t.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var ae=t.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},W=t.__addimage__.binaryStringToUint8Array=function(F){for(var L=F.length,z=new Uint8Array(L),Y=0;Y<L;Y++)z[Y]=F.charCodeAt(Y);return z},te=t.__addimage__.arrayBufferToBinaryString=function(F){for(var L="",z=ae(F)?F:new Uint8Array(F),Y=0;Y<z.length;Y+=8192)L+=String.fromCharCode.apply(null,z.subarray(Y,Y+8192));return L};t.addImage=function(){var F,L,z,Y,Ce,_e,Ae,ce,ge;if(typeof arguments[1]=="number"?(L=n,z=arguments[1],Y=arguments[2],Ce=arguments[3],_e=arguments[4],Ae=arguments[5],ce=arguments[6],ge=arguments[7]):(L=arguments[1],z=arguments[2],Y=arguments[3],Ce=arguments[4],_e=arguments[5],Ae=arguments[6],ce=arguments[7],ge=arguments[8]),Wr(F=arguments[0])==="object"&&!j(F)&&"imageData"in F){var De=F;F=De.imageData,L=De.format||L||n,z=De.x||z||0,Y=De.y||Y||0,Ce=De.w||De.width||Ce,_e=De.h||De.height||_e,Ae=De.alias||Ae,ce=De.compression||ce,ge=De.rotation||De.angle||ge}var se=this.internal.getFilters();if(ce===void 0&&se.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(z)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var O=Q.call(this,F,L,Ae,ce);return P.call(this,z,Y,Ce,_e,O,ge),this};var Q=function(F,L,z,Y){var Ce,_e,Ae;if(typeof F=="string"&&a(F)===n){F=unescape(F);var ce=de(F,!1);(ce!==""||(ce=t.loadFile(F,!0))!==void 0)&&(F=ce)}if(j(F)&&(F=y(F,L)),L=a(F,L),!b(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((Ae=z)==null||Ae.length===0)&&(z=(function(ge){return typeof ge=="string"||ae(ge)?v(ge):ae(ge.data)?v(ge.data):null})(F)),(Ce=D.call(this,z))||(F instanceof Uint8Array||L==="RGBA"||(_e=F,F=W(F)),Ce=this["process"+L.toUpperCase()](F,m.call(this),z,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in t.image_compression?ge:I.NONE})(Y),_e)),!Ce)throw new Error("An unknown error occurred whilst processing the image.");return Ce},de=t.__addimage__.convertBase64ToBinaryString=function(F,L){L=typeof L!="boolean"||L;var z,Y="";if(typeof F=="string"){var Ce;z=(Ce=ee(F))!==null&&Ce!==void 0?Ce:F;try{Y=Zp(z)}catch(_e){if(L)throw B(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(F){var L,z,Y="";if(j(F)&&(F=y(F)),typeof F=="string"&&a(F)===n&&((Y=de(F,!1))===""&&(Y=t.loadFile(F)||""),F=Y),z=a(F),!b(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(F instanceof Uint8Array||(F=W(F)),!(L=this["process"+z.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=z,L}})(un.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};un.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),p=n.pageContext.annotations,m=!1,b=0;b<p.length&&!m;b++)switch((r=p[b]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var j=0;j<p.length;j++){r=p[j];var y=this.internal.pdfEscape,D=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(S.objId),I=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+y(_(r.contents))+")",o+=" /Popup "+P.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(_(I))+") >>",S.content=o;var v=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+v,r.open&&(o+=" /Open true"),o+=" >>",P.content=o,this.internal.write(S.objId,"0 R",P.objId,"0 R");break;case"freetext":a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var B=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(D(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ee=this.annotations._nameMap[r.options.name];r.options.pageNumber=ee.page,r.options.top=ee.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(D(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var ae=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+ae+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(n),y:p(r),w:f(n+a),h:p(r+o)},options:u,type:"link"})},t.textWithLink=function(n,r,a,o){var u,c,f=this.getTextWidth(n),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(n,c).length;u=Math.ceil(p*m)}else c=f,u=p;return this.text(n,r,a,o),a+=.2*p,o.align==="center"&&(r-=f/2),o.align==="right"&&(r-=f),this.link(r,a-p,c,u,o),f},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(un.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(S){return u(S)&&a.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(S){var P=0,_=n,I="",v=0;for(P=0;P<S.length;P+=1)_[S.charCodeAt(P)]!==void 0?(v++,typeof(_=_[S.charCodeAt(P)])=="number"&&(I+=String.fromCharCode(_),_=n,v=0),P===S.length-1&&(_=n,I+=S.charAt(P-(v-1)),P-=v-1,v=0)):(_=n,I+=S.charAt(P-v),P-=v,v=0);return I};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var j=t.__arabicParser__.getCorrectForm=function(S,P,_){return u(S)?o(S)===!1?-1:!p(S)||!u(P)&&!u(_)||!u(_)&&c(P)||c(S)&&!u(P)||c(S)&&f(P)||c(S)&&c(P)?0:m(S)&&u(P)&&!c(P)&&u(_)&&p(_)?3:c(S)||!u(_)?1:2:-1},y=function(S){var P=0,_=0,I=0,v="",B="",ee="",ae=(S=S||"").split("\\s+"),W=[];for(P=0;P<ae.length;P+=1){for(W.push(""),_=0;_<ae[P].length;_+=1)v=ae[P][_],B=ae[P][_-1],ee=ae[P][_+1],u(v)?(I=j(v,B,ee),W[P]+=I!==-1?String.fromCharCode(e[v.charCodeAt(0)][I]):v):W[P]+=v;W[P]=b(W[P])}return W.join(" ")},D=t.__arabicParser__.processArabic=t.processArabic=function(){var S,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(P)){var I=0;for(_=[],I=0;I<P.length;I+=1)Array.isArray(P[I])?_.push([y(P[I][0]),P[I][1],P[I][2]]):_.push([y(P[I])]);S=_}else S=y(P);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",D])})(un.API),un.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(un.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(S){b=S}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(S){j=S}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(S){D=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),j=p.scaleFactor||this.internal.scaleFactor,y=0,D=0,S=0,P=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var _=p.maxWidth;_>0?typeof f=="string"?f=this.splitTextToSize(f,_):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(v,B){return v.concat(P.splitTextToSize(B,_))},[])):f=Array.isArray(f)?f:[f];for(var I=0;I<f.length;I++)y<(S=this.getStringUnitWidth(f[I],{font:b})*m)&&(y=S);return y!==0&&(D=f.length),{w:y/=j,h:Math.max((D*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/j,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,j=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,y&&j&&(this.printHeaderRow(f.lineNumber,!0),f.y+=j[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};t.table=function(f,p,m,b,j){if(r.call(this),!m)throw new Error("No data for PDF table.");var y,D,S,P,_=[],I=[],v=[],B={},ee={},ae=[],W=[],te=(j=j||{}).autoSize||!1,Q=j.printHeaders!==!1,de=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,F=j.margins||Object.assign({width:this.getPageWidth()},e),L=typeof j.padding=="number"?j.padding:3,z=j.headerBackgroundColor||"#c8c8c8",Y=j.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=de,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=Y,this.setFontSize(de),b==null)I=_=Object.keys(m[0]),v=_.map(function(){return"left"});else if(Array.isArray(b)&&Wr(b[0])==="object")for(_=b.map(function(De){return De.name}),I=b.map(function(De){return De.prompt||De.name||""}),v=b.map(function(De){return De.align||"left"}),y=0;y<b.length;y+=1)ee[b[y].name]=.7499990551181103*b[y].width;else Array.isArray(b)&&typeof b[0]=="string"&&(I=_=b,v=_.map(function(){return"left"}));if(te||Array.isArray(b)&&typeof b[0]=="string")for(y=0;y<_.length;y+=1){for(B[P=_[y]]=m.map(function(De){return De[P]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(I[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=B[P],this.setFont(void 0,"normal"),S=0;S<D.length;S+=1)ae.push(this.getTextDimensions(D[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[P]=Math.max.apply(null,ae)+L+L,ae=[]}if(Q){var Ce={};for(y=0;y<_.length;y+=1)Ce[_[y]]={},Ce[_[y]].text=I[y],Ce[_[y]].align=v[y];var _e=c.call(this,Ce,ee);W=_.map(function(De){return new o(f,p,ee[De],_e,Ce[De].text,void 0,Ce[De].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Ae=b.reduce(function(De,se){return De[se.name]=se.align,De},{});for(y=0;y<m.length;y+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:y,data:m[y]},this);var ce=c.call(this,m[y],ee);for(S=0;S<_.length;S+=1){var ge=m[y][_[S]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:y,col:S,data:ge},this),u.call(this,new o(f,p,ee[_[S]],ce,ge,y+2,Ae[_[S]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var c=function(f,p){var m=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(f).map(function(y){var D=f[y];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,p[y]-m-m)},this).map(function(y){return this.getLineHeightFactor()*y.length*b/j+m+m},this).reduce(function(y,D){return Math.max(y,D)},0)};t.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){m=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,j.push(m)),m.lineNumber=f;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(D)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}})(un.API);var nj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Dv=tj(rj),sj=[100,200,300,400,500,600,700,800,900],TI=tj(sj);function B0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return nj[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(t.weight),a=(function(o){return typeof Dv[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,r].join(" ")}}}function a5(t,e,n,r){var a;for(a=n;a>=0&&a<e.length;a+=r)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=r)if(t[e[a]])return t[e[a]]}var EI={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},o5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function l5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function c5(t){return t.trimLeft()}function LI(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function RI(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ip,u5,d5,kd,Fp,f5,h5,p5,q0=["times"];function m5(t,e,n,r,a){var o=4,u=v5;switch(a){case un.API.image_compression.FAST:o=1,u=g5;break;case un.API.image_compression.MEDIUM:o=6,u=x5;break;case un.API.image_compression.SLOW:o=9,u=y5}t=(function(f,p,m,b){for(var j,y=f.length/p,D=new Uint8Array(f.length+y),S=[DI,g5,v5,x5,y5],P=0;P<y;P+=1){var _=P*p,I=f.subarray(_,_+p);if(b)D.set(b(I,m,j),_+P);else{for(var v=S.length,B=[],ee=0;ee<v;ee+=1)B[ee]=S[ee](I,m,j);var ae=FI(B.concat());D.set(B[ae],_+P)}j=I}return D})(t,e,Math.ceil(n*r/8),u);var c=Av(t,{level:o});return un.API.__addimage__.arrayBufferToBinaryString(c)}function DI(t){var e=Array.apply([],t);return e.unshift(0),e}function g5(t,e){var n=t.length,r=[];r[0]=1;for(var a=0;a<n;a+=1){var o=t[a-e]||0;r[a+1]=t[a]-o+256&255}return r}function v5(t,e,n){var r=t.length,a=[];a[0]=2;for(var o=0;o<r;o+=1){var u=n&&n[o]||0;a[o+1]=t[o]-u+256&255}return a}function x5(t,e,n){var r=t.length,a=[];a[0]=3;for(var o=0;o<r;o+=1){var u=t[o-e]||0,c=n&&n[o]||0;a[o+1]=t[o]+256-(u+c>>>1)&255}return a}function y5(t,e,n){var r=t.length,a=[];a[0]=4;for(var o=0;o<r;o+=1){var u=II(t[o-e]||0,n&&n[o]||0,n&&n[o-e]||0);a[o+1]=t[o]-u+256&255}return a}function II(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),a=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=a&&r<=o?t:a<=o?e:n}function FI(t){var e=t.map(function(n){return n.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function U0(t,e,n){var r=e*n,a=Math.floor(r/8),o=16-(r-8*a+n),u=(1<<n)-1;return ij(t,a)>>o&u}function b5(t,e,n,r){var a=n*r,o=Math.floor(a/8),u=16-(a-8*o+r),c=(1<<r)-1,f=(e&c)<<u;(function(p,m,b){if(m+1<p.byteLength)p.setUint16(m,b,!1);else{var j=b>>8&255;p.setUint8(m,j)}})(t,o,ij(t,o)&~(c<<u)&65535|f)}function ij(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function OI(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,u=1<<1+(7&a);t[e++],t[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var p=!0,m=[],b=0,j=null,y=0,D=null;for(this.width=n,this.height=r;p&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,D=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];b=t[e++]|t[e++]<<8,j=t[e++],1&S||(j=null),y=S>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var P=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,B=t[e++],ee=B>>6&1,ae=1<<1+(7&B),W=c,te=f,Q=!1;B>>7&&(Q=!0,W=e,te=ae,e+=3*ae);var de=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}m.push({x:P,y:_,width:I,height:v,has_local_palette:Q,palette_offset:W,palette_size:te,data_offset:de,data_length:e-de,transparent_index:j,interlaced:!!ee,delay:b,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return D},this.frameInfo=function(L){if(L<0||L>=m.length)throw new Error("Frame index out of range.");return m[L]},this.decodeAndBlitFrameBGRA=function(L,z){var Y=this.frameInfo(L),Ce=Y.width*Y.height,_e=new Uint8Array(Ce);w5(t,Y.data_offset,_e,Ce);var Ae=Y.palette_offset,ce=Y.transparent_index;ce===null&&(ce=256);var ge=Y.width,De=n-ge,se=ge,O=4*(Y.y*n+Y.x),E=4*((Y.y+Y.height)*n+Y.x),ne=O,me=4*De;Y.interlaced===!0&&(me+=4*n*7);for(var ye=8,be=0,Re=_e.length;be<Re;++be){var Ie=_e[be];if(se===0&&(se=ge,(ne+=me)>=E&&(me=4*De+4*n*(ye-1),ne=O+(ge+De)*(ye<<1),ye>>=1)),Ie===ce)ne+=4;else{var Me=t[Ae+3*Ie],Qe=t[Ae+3*Ie+1],ht=t[Ae+3*Ie+2];z[ne++]=ht,z[ne++]=Qe,z[ne++]=Me,z[ne++]=255}--se}},this.decodeAndBlitFrameRGBA=function(L,z){var Y=this.frameInfo(L),Ce=Y.width*Y.height,_e=new Uint8Array(Ce);w5(t,Y.data_offset,_e,Ce);var Ae=Y.palette_offset,ce=Y.transparent_index;ce===null&&(ce=256);var ge=Y.width,De=n-ge,se=ge,O=4*(Y.y*n+Y.x),E=4*((Y.y+Y.height)*n+Y.x),ne=O,me=4*De;Y.interlaced===!0&&(me+=4*n*7);for(var ye=8,be=0,Re=_e.length;be<Re;++be){var Ie=_e[be];if(se===0&&(se=ge,(ne+=me)>=E&&(me=4*De+4*n*(ye-1),ne=O+(ge+De)*(ye<<1),ye>>=1)),Ie===ce)ne+=4;else{var Me=t[Ae+3*Ie],Qe=t[Ae+3*Ie+1],ht=t[Ae+3*Ie+2];z[ne++]=Me,z[ne++]=Qe,z[ne++]=ht,z[ne++]=255}--se}}}function w5(t,e,n,r){for(var a=t[e++],o=1<<a,u=o+1,c=u+1,f=a+1,p=(1<<f)-1,m=0,b=0,j=0,y=t[e++],D=new Int32Array(4096),S=null;;){for(;m<16&&y!==0;)b|=t[e++]<<m,m+=8,y===1?y=t[e++]:--y;if(m<f)break;var P=b&p;if(b>>=f,m-=f,P!==o){if(P===u)break;for(var _=P<c?P:S,I=0,v=_;v>o;)v=D[v]>>8,++I;var B=v;if(j+I+(_!==P?1:0)>r)return void es.log("Warning, gif stream longer than expected.");n[j++]=B;var ee=j+=I;for(_!==P&&(n[j++]=B),v=_;I--;)v=D[v],n[--ee]=255&v,v>>=8;S!==null&&c<4096&&(D[c++]=S<<8|B,c>=p+1&&f<12&&(++f,p=p<<1|1)),S=P}else c=u+1,p=(1<<(f=a+1))-1,S=null}return j!==r&&es.log("Warning, gif stream shorter than expected."),n}function z0(t){var e,n,r,a,o,u=Math.floor,c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),j=new Array(65535),y=new Array(64),D=new Array(64),S=[],P=0,_=7,I=new Array(64),v=new Array(64),B=new Array(64),ee=new Array(256),ae=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],te=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],de=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _e(O,E){for(var ne=0,me=0,ye=new Array,be=1;be<=16;be++){for(var Re=1;Re<=O[be];Re++)ye[E[me]]=[],ye[E[me]][0]=ne,ye[E[me]][1]=be,me++,ne++;ne*=2}return ye}function Ae(O){for(var E=O[0],ne=O[1]-1;ne>=0;)E&1<<ne&&(P|=1<<_),ne--,--_<0&&(P==255?(ce(255),ce(0)):ce(P),_=7,P=0)}function ce(O){S.push(O)}function ge(O){ce(O>>8&255),ce(255&O)}function De(O,E,ne,me,ye){for(var be,Re=ye[0],Ie=ye[240],Me=(function(M,ve){var re,R,H,je,we,ke,Ve,at,ct,_t,kt=0;for(ct=0;ct<8;++ct){re=M[kt],R=M[kt+1],H=M[kt+2],je=M[kt+3],we=M[kt+4],ke=M[kt+5],Ve=M[kt+6];var cr=re+(at=M[kt+7]),yn=re-at,Vt=R+Ve,Mt=R-Ve,tn=H+ke,Ke=H-ke,ot=je+we,Xe=je-we,an=cr+ot,er=cr-ot,vn=Vt+tn,Yt=Vt-tn;M[kt]=an+vn,M[kt+4]=an-vn;var Dn=.707106781*(Yt+er);M[kt+2]=er+Dn,M[kt+6]=er-Dn;var ms=.382683433*((an=Xe+Ke)-(Yt=Mt+yn)),tr=.5411961*an+ms,vr=1.306562965*Yt+ms,ur=.707106781*(vn=Ke+Mt),on=yn+ur,Rs=yn-ur;M[kt+5]=Rs+tr,M[kt+3]=Rs-tr,M[kt+1]=on+vr,M[kt+7]=on-vr,kt+=8}for(kt=0,ct=0;ct<8;++ct){re=M[kt],R=M[kt+8],H=M[kt+16],je=M[kt+24],we=M[kt+32],ke=M[kt+40],Ve=M[kt+48];var Ss=re+(at=M[kt+56]),os=re-at,Ds=R+Ve,nr=R-Ve,Rr=H+ke,xr=H-ke,gs=je+we,Qr=je-we,Er=Ss+gs,Ws=Ss-gs,Zr=Ds+Rr,Is=Ds-Rr;M[kt]=Er+Zr,M[kt+32]=Er-Zr;var Yr=.707106781*(Is+Ws);M[kt+16]=Ws+Yr,M[kt+48]=Ws-Yr;var Fs=.382683433*((Er=Qr+xr)-(Is=nr+os)),dr=.5411961*Er+Fs,ls=1.306562965*Is+Fs,ai=.707106781*(Zr=xr+nr),Mi=os+ai,Bi=os-ai;M[kt+40]=Bi+dr,M[kt+24]=Bi-dr,M[kt+8]=Mi+ls,M[kt+56]=Mi-ls,kt++}for(ct=0;ct<64;++ct)_t=M[ct]*ve[ct],y[ct]=_t>0?_t+.5|0:_t-.5|0;return y})(O,E),Qe=0;Qe<64;++Qe)D[W[Qe]]=Me[Qe];var ht=D[0]-ne;ne=D[0],ht==0?Ae(me[0]):(Ae(me[j[be=32767+ht]]),Ae(b[be]));for(var vt=63;vt>0&&D[vt]==0;)vt--;if(vt==0)return Ae(Re),ne;for(var Dt,le=1;le<=vt;){for(var xt=le;D[le]==0&&le<=vt;)++le;var xe=le-xt;if(xe>=16){Dt=xe>>4;for(var X=1;X<=Dt;++X)Ae(Ie);xe&=15}be=32767+D[le],Ae(ye[(xe<<4)+j[be]]),Ae(b[be]),le++}return vt!=63&&Ae(Re),ne}function se(O){O=Math.min(Math.max(O,1),100),o!=O&&((function(E){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var ye=u((ne[me]*E+50)/100);ye=Math.min(Math.max(ye,1),255),c[W[me]]=ye}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Re=0;Re<64;Re++){var Ie=u((be[Re]*E+50)/100);Ie=Math.min(Math.max(Ie,1),255),f[W[Re]]=Ie}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qe=0,ht=0;ht<8;ht++)for(var vt=0;vt<8;vt++)p[Qe]=1/(c[W[Qe]]*Me[ht]*Me[vt]*8),m[Qe]=1/(f[W[Qe]]*Me[ht]*Me[vt]*8),Qe++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,E){E&&se(E),S=new Array,P=0,_=7,ge(65496),ge(65504),ge(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),ge(1),ge(1),ce(0),ce(0),(function(){ge(65499),ge(132),ce(0);for(var R=0;R<64;R++)ce(c[R]);ce(1);for(var H=0;H<64;H++)ce(f[H])})(),(function(R,H){ge(65472),ge(17),ce(8),ge(H),ge(R),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)})(O.width,O.height),(function(){ge(65476),ge(418),ce(0);for(var R=0;R<16;R++)ce(te[R+1]);for(var H=0;H<=11;H++)ce(Q[H]);ce(16);for(var je=0;je<16;je++)ce(de[je+1]);for(var we=0;we<=161;we++)ce(F[we]);ce(1);for(var ke=0;ke<16;ke++)ce(L[ke+1]);for(var Ve=0;Ve<=11;Ve++)ce(z[Ve]);ce(17);for(var at=0;at<16;at++)ce(Y[at+1]);for(var ct=0;ct<=161;ct++)ce(Ce[ct])})(),ge(65498),ge(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var ne=0,me=0,ye=0;P=0,_=7,this.encode.displayName="_encode_";for(var be,Re,Ie,Me,Qe,ht,vt,Dt,le,xt=O.data,xe=O.width,X=O.height,M=4*xe,ve=0;ve<X;){for(be=0;be<M;){for(Qe=M*ve+be,vt=-1,Dt=0,le=0;le<64;le++)ht=Qe+(Dt=le>>3)*M+(vt=4*(7&le)),ve+Dt>=X&&(ht-=M*(ve+1+Dt-X)),be+vt>=M&&(ht-=be+vt-M+4),Re=xt[ht++],Ie=xt[ht++],Me=xt[ht++],I[le]=(ae[Re]+ae[Ie+256|0]+ae[Me+512|0]>>16)-128,v[le]=(ae[Re+768|0]+ae[Ie+1024|0]+ae[Me+1280|0]>>16)-128,B[le]=(ae[Re+1280|0]+ae[Ie+1536|0]+ae[Me+1792|0]>>16)-128;ne=De(I,p,ne,e,r),me=De(v,m,me,n,a),ye=De(B,m,ye,n,a),be+=32}ve+=8}if(_>=0){var re=[];re[1]=_+1,re[0]=(1<<_+1)-1,Ae(re)}return ge(65497),new Uint8Array(S)},t=t||50,(function(){for(var O=String.fromCharCode,E=0;E<256;E++)ee[E]=O(E)})(),e=_e(te,Q),n=_e(L,z),r=_e(de,F),a=_e(Y,Ce),(function(){for(var O=1,E=2,ne=1;ne<=15;ne++){for(var me=O;me<E;me++)j[32767+me]=ne,b[32767+me]=[],b[32767+me][1]=ne,b[32767+me][0]=me;for(var ye=-(E-1);ye<=-O;ye++)j[32767+ye]=ne,b[32767+ye]=[],b[32767+ye][1]=ne,b[32767+ye][0]=E-1+ye;O<<=1,E<<=1}})(),(function(){for(var O=0;O<256;O++)ae[O]=19595*O,ae[O+256|0]=38470*O,ae[O+512|0]=7471*O+32768,ae[O+768|0]=-11059*O,ae[O+1024|0]=-21709*O,ae[O+1280|0]=32768*O+8421375,ae[O+1536|0]=-27439*O,ae[O+1792|0]=-5329*O})(),se(t)}function zo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N5(t){function e(Q){if(!Q)throw Error("assert :P")}function n(Q,de,F){for(var L=0;4>L;L++)if(Q[de+L]!=F.charCodeAt(L))return!0;return!1}function r(Q,de,F,L,z){for(var Y=0;Y<z;Y++)Q[de+Y]=F[L+Y]}function a(Q,de,F,L){for(var z=0;z<L;z++)Q[de+z]=F}function o(Q){return new Int32Array(Q)}function u(Q,de){for(var F=[],L=0;L<Q;L++)F.push(new de);return F}function c(Q,de){var F=[];return(function L(z,Y,Ce){for(var _e=Ce[Y],Ae=0;Ae<_e&&(z.push(Ce.length>Y+1?[]:new de),!(Ce.length<Y+1));Ae++)L(z[Ae],Y+1,Ce)})(F,0,Q),F}var f=function(){var Q=this;function de(h,x){for(var C=1<<x-1>>>0;h&C;)C>>>=1;return C?(h&C-1)+C:h}function F(h,x,C,T,V){e(!(T%C));do h[x+(T-=C)]=V;while(0<T)}function L(h,x,C,T,V){if(e(2328>=V),512>=V)var K=o(512);else if((K=o(V))==null)return 0;return(function(Z,J,ie,fe,Ee,$e){var he,Fe,ze=J,st=1<<ie,We=o(16),tt=o(16);for(e(Ee!=0),e(fe!=null),e(Z!=null),e(0<ie),Fe=0;Fe<Ee;++Fe){if(15<fe[Fe])return 0;++We[fe[Fe]]}if(We[0]==Ee)return 0;for(tt[1]=0,he=1;15>he;++he){if(We[he]>1<<he)return 0;tt[he+1]=tt[he]+We[he]}for(Fe=0;Fe<Ee;++Fe)he=fe[Fe],0<fe[Fe]&&($e[tt[he]++]=Fe);if(tt[15]==1)return(fe=new z).g=0,fe.value=$e[0],F(Z,ze,1,st,fe),st;var rt,lt=-1,ut=st-1,fn=0,Qt=1,Un=1,nn=1<<ie;for(Fe=0,he=1,Ee=2;he<=ie;++he,Ee<<=1){if(Qt+=Un<<=1,0>(Un-=We[he]))return 0;for(;0<We[he];--We[he])(fe=new z).g=he,fe.value=$e[Fe++],F(Z,ze+fn,Ee,nn,fe),fn=de(fn,he)}for(he=ie+1,Ee=2;15>=he;++he,Ee<<=1){if(Qt+=Un<<=1,0>(Un-=We[he]))return 0;for(;0<We[he];--We[he]){if(fe=new z,(fn&ut)!=lt){for(ze+=nn,rt=1<<(lt=he)-ie;15>lt&&!(0>=(rt-=We[lt]));)++lt,rt<<=1;st+=nn=1<<(rt=lt-ie),Z[J+(lt=fn&ut)].g=rt+ie,Z[J+lt].value=ze-J-lt}fe.g=he-ie,fe.value=$e[Fe++],F(Z,ze+(fn>>ie),Ee,nn,fe),fn=de(fn,he)}}return Qt!=2*tt[15]-1?0:st})(h,x,C,T,V,K)}function z(){this.value=this.g=0}function Y(){this.value=this.g=0}function Ce(){this.G=u(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ra,Y)}function _e(h,x,C,T){e(h!=null),e(x!=null),e(2147483648>T),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=x,h.pa=C,h.Jd=x,h.Yc=C+T,h.Zc=4<=T?C+T-4+1:C,Re(h)}function Ae(h,x){for(var C=0;0<x--;)C|=Me(h,128)<<x;return C}function ce(h,x){var C=Ae(h,x);return Ie(h)?-C:C}function ge(h,x,C,T){var V,K=0;for(e(h!=null),e(x!=null),e(4294967288>T),h.Sb=T,h.Ra=0,h.u=0,h.h=0,4<T&&(T=4),V=0;V<T;++V)K+=x[C+V]<<8*V;h.Ra=K,h.bb=T,h.oa=x,h.pa=C}function De(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<fl-8>>>0,++h.bb,h.u-=8;me(h)&&(h.h=1,h.u=0)}function se(h,x){if(e(0<=x),!h.h&&x<=ya){var C=ne(h)&xa[x];return h.u+=x,De(h),C}return h.h=1,h.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(h){return h.Ra>>>(h.u&fl-1)>>>0}function me(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>fl}function ye(h,x){h.u=x,h.h=me(h)}function be(h){h.u>=fo&&(e(h.u>=fo),De(h))}function Re(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ie(h){return Ae(h,1)}function Me(h,x){var C=h.Ca;0>h.b&&Re(h);var T=h.b,V=C*x>>>8,K=(h.I>>>T>V)+0;for(K?(C-=V,h.I-=V+1<<T>>>0):C=V+1,T=C,V=0;256<=T;)V+=8,T>>=8;return T=7^V+ko[T],h.b-=T,h.Ca=(C<<T)-1,K}function Qe(h,x,C){h[x+0]=C>>24&255,h[x+1]=C>>16&255,h[x+2]=C>>8&255,h[x+3]=255&C}function ht(h,x){return h[x+0]|h[x+1]<<8}function vt(h,x){return ht(h,x)|h[x+2]<<16}function Dt(h,x){return ht(h,x)|ht(h,x+2)<<16}function le(h,x){var C=1<<x;return e(h!=null),e(0<x),h.X=o(C),h.X==null?0:(h.Mb=32-x,h.Xa=x,1)}function xt(h,x){e(h!=null),e(x!=null),e(h.Xa==x.Xa),r(x.X,0,h.X,0,1<<x.Xa)}function xe(){this.X=[],this.Xa=this.Mb=0}function X(h,x,C,T){e(C!=null),e(T!=null);var V=C[0],K=T[0];return V==0&&(V=(h*K+x/2)/x),K==0&&(K=(x*V+h/2)/h),0>=V||0>=K?0:(C[0]=V,T[0]=K,1)}function M(h,x){return h+(1<<x)-1>>>x}function ve(h,x){return((4278255360&h)+(4278255360&x)>>>0&4278255360)+((16711935&h)+(16711935&x)>>>0&16711935)>>>0}function re(h,x){Q[x]=function(C,T,V,K,Z,J,ie){var fe;for(fe=0;fe<Z;++fe){var Ee=Q[h](J[ie+fe-1],V,K+fe);J[ie+fe]=ve(C[T+fe],Ee)}}}function R(){this.ud=this.hd=this.jd=0}function H(h,x){return((4278124286&(h^x))>>>1)+(h&x)>>>0}function je(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function we(h,x){return je(h+(h-x+.5>>1))}function ke(h,x,C){return Math.abs(x-C)-Math.abs(h-C)}function Ve(h,x,C,T,V,K,Z){for(T=K[Z-1],C=0;C<V;++C)K[Z+C]=T=ve(h[x+C],T)}function at(h,x,C,T,V){var K;for(K=0;K<C;++K){var Z=h[x+K],J=Z>>8&255,ie=16711935&(ie=(ie=16711935&Z)+((J<<16)+J));T[V+K]=(4278255360&Z)+ie>>>0}}function ct(h,x){x.jd=255&h,x.hd=h>>8&255,x.ud=h>>16&255}function _t(h,x,C,T,V,K){var Z;for(Z=0;Z<T;++Z){var J=x[C+Z],ie=J>>>8,fe=J,Ee=255&(Ee=(Ee=J>>>16)+((h.jd<<24>>24)*(ie<<24>>24)>>>5));fe=255&(fe=(fe+=(h.hd<<24>>24)*(ie<<24>>24)>>>5)+((h.ud<<24>>24)*(Ee<<24>>24)>>>5)),V[K+Z]=(4278255360&J)+(Ee<<16)+fe}}function kt(h,x,C,T,V){Q[x]=function(K,Z,J,ie,fe,Ee,$e,he,Fe){for(ie=$e;ie<he;++ie)for($e=0;$e<Fe;++$e)fe[Ee++]=V(J[T(K[Z++])])},Q[h]=function(K,Z,J,ie,fe,Ee,$e){var he=8>>K.b,Fe=K.Ea,ze=K.K[0],st=K.w;if(8>he)for(K=(1<<K.b)-1,st=(1<<he)-1;Z<J;++Z){var We,tt=0;for(We=0;We<Fe;++We)We&K||(tt=T(ie[fe++])),Ee[$e++]=V(ze[tt&st]),tt>>=he}else Q["VP8LMapColor"+C](ie,fe,ze,st,Ee,$e,Z,J,Fe)}}function cr(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=K>>16&255,T[V++]=K>>8&255,T[V++]=255&K}}function yn(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=K>>16&255,T[V++]=K>>8&255,T[V++]=255&K,T[V++]=K>>24&255}}function Vt(h,x,C,T,V){for(C=x+C;x<C;){var K=(Z=h[x++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;T[V++]=K,T[V++]=Z}}function Mt(h,x,C,T,V){for(C=x+C;x<C;){var K=(Z=h[x++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;T[V++]=K,T[V++]=Z}}function tn(h,x,C,T,V){for(C=x+C;x<C;){var K=h[x++];T[V++]=255&K,T[V++]=K>>8&255,T[V++]=K>>16&255}}function Ke(h,x,C,T,V,K){if(K==0)for(C=x+C;x<C;)Qe(T,((K=h[x++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else r(T,V,h,x,C)}function ot(h,x){Q[x][0]=Q[h+"0"],Q[x][1]=Q[h+"1"],Q[x][2]=Q[h+"2"],Q[x][3]=Q[h+"3"],Q[x][4]=Q[h+"4"],Q[x][5]=Q[h+"5"],Q[x][6]=Q[h+"6"],Q[x][7]=Q[h+"7"],Q[x][8]=Q[h+"8"],Q[x][9]=Q[h+"9"],Q[x][10]=Q[h+"10"],Q[x][11]=Q[h+"11"],Q[x][12]=Q[h+"12"],Q[x][13]=Q[h+"13"],Q[x][14]=Q[h+"0"],Q[x][15]=Q[h+"0"]}function Xe(h){return h==Cc||h==Xl||h==bu||h==wu}function an(){this.eb=[],this.size=this.A=this.fb=0}function er(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new an,this.f.kb=new er,this.sd=null}function Yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ms(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function tr(h,x){var C=h.T,T=x.ba.f.RGBA,V=T.eb,K=T.fb+h.ka*T.A,Z=na[x.ba.S],J=h.y,ie=h.O,fe=h.f,Ee=h.N,$e=h.ea,he=h.W,Fe=x.cc,ze=x.dc,st=x.Mc,We=x.Nc,tt=h.ka,rt=h.ka+h.T,lt=h.U,ut=lt+1>>1;for(tt==0?Z(J,ie,null,null,fe,Ee,$e,he,fe,Ee,$e,he,V,K,null,null,lt):(Z(x.ec,x.fc,J,ie,Fe,ze,st,We,fe,Ee,$e,he,V,K-T.A,V,K,lt),++C);tt+2<rt;tt+=2)Fe=fe,ze=Ee,st=$e,We=he,Ee+=h.Rc,he+=h.Rc,K+=2*T.A,Z(J,(ie+=2*h.fa)-h.fa,J,ie,Fe,ze,st,We,fe,Ee,$e,he,V,K-T.A,V,K,lt);return ie+=h.fa,h.j+rt<h.o?(r(x.ec,x.fc,J,ie,lt),r(x.cc,x.dc,fe,Ee,ut),r(x.Mc,x.Nc,$e,he,ut),C--):1&rt||Z(J,ie,null,null,fe,Ee,$e,he,fe,Ee,$e,he,V,K+T.A,null,null,lt),C}function vr(h,x,C){var T=h.F,V=[h.J];if(T!=null){var K=h.U,Z=x.ba.S,J=Z==yu||Z==bu;x=x.ba.f.RGBA;var ie=[0],fe=h.ka;ie[0]=h.T,h.Kb&&(fe==0?--ie[0]:(--fe,V[0]-=h.width),h.j+h.ka+h.T==h.o&&(ie[0]=h.o-h.j-fe));var Ee=x.eb;fe=x.fb+fe*x.A,h=vu(T,V[0],h.width,K,ie,Ee,fe+(J?0:3),x.A),e(C==ie),h&&Xe(Z)&&Yl(Ee,fe,J,K,ie,x.A)}return 0}function ur(h){var x=h.ma,C=x.ba.S,T=11>C,V=C==gl||C==xu||C==yu||C==zr||C==12||Xe(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!xc(x.Oa,h,V?11:12))return 0;if(V&&Xe(C)&&Ao(),h.da)alert("todo:use_scaling");else{if(T){if(x.Ib=ms,h.Kb){if(C=h.U+1>>1,x.memory=o(h.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+h.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=tr,Ao()}}else alert("todo:EmitYUV");V&&(x.Jb=vr,T&&Gs())}if(T&&!wi){for(h=0;256>h;++h)ra[h]=89858*(h-128)+Qa>>Ro,sa[h]=-22014*(h-128)+Qa,kc[h]=-45773*(h-128),nc[h]=113618*(h-128)+Qa>>Ro;for(h=Lr;h<Br;++h)x=76283*(h-16)+Qa>>Ro,od[h-Lr]=Ze(x,255),Vh[h-Lr]=Ze(x+8>>4,15);wi=1}return 1}function on(h){var x=h.ma,C=h.U,T=h.T;return e(!(1&h.ka)),0>=C||0>=T?0:(C=x.Ib(h,x),x.Jb!=null&&x.Jb(h,x,C),x.Dc+=C,1)}function Rs(h){h.ma.memory=null}function Ss(h,x,C,T){return se(h,8)!=47?0:(x[0]=se(h,14)+1,C[0]=se(h,14)+1,T[0]=se(h,1),se(h,3)!=0?0:!h.h)}function os(h,x){if(4>h)return h+1;var C=h-2>>1;return(2+(1&h)<<C)+se(x,C)+1}function Ds(h,x){return 120<x?x-120:1<=(C=((C=cg[x-1])>>4)*h+(8-(15&C)))?C:1;var C}function nr(h,x,C){var T=ne(C),V=h[x+=255&T].g-8;return 0<V&&(ye(C,C.u+8),T=ne(C),x+=h[x].value,x+=T&(1<<V)-1),ye(C,C.u+h[x].g),h[x].value}function Rr(h,x,C){return C.g+=h.g,C.value+=h.value<<x>>>0,e(8>=C.g),h.g}function xr(h,x,C){var T=h.xc;return e((x=T==0?0:h.vc[h.md*(C>>T)+(x>>T)])<h.Wb),h.Ya[x]}function gs(h,x,C,T){var V=h.ab,K=h.c*x,Z=h.C;x=Z+x;var J=C,ie=T;for(T=h.Ta,C=h.Ua;0<V--;){var fe=h.gc[V],Ee=Z,$e=x,he=J,Fe=ie,ze=(ie=T,J=C,fe.Ea);switch(e(Ee<$e),e($e<=fe.nc),fe.hc){case 2:js(he,Fe,($e-Ee)*ze,ie,J);break;case 0:var st=Ee,We=$e,tt=ie,rt=J,lt=(nn=fe).Ea;st==0&&(To(he,Fe,null,null,1,tt,rt),Ve(he,Fe+1,0,0,lt-1,tt,rt+1),Fe+=lt,rt+=lt,++st);for(var ut=1<<nn.b,fn=ut-1,Qt=M(lt,nn.b),Un=nn.K,nn=nn.w+(st>>nn.b)*Qt;st<We;){var or=Un,ys=nn,$n=1;for(ho(he,Fe,tt,rt-lt,1,tt,rt);$n<lt;){var Zt=($n&~fn)+ut;Zt>lt&&(Zt=lt),(0,Gl[or[ys++]>>8&15])(he,Fe+ +$n,tt,rt+$n-lt,Zt-$n,tt,rt+$n),$n=Zt}Fe+=lt,rt+=lt,++st&fn||(nn+=Qt)}$e!=fe.nc&&r(ie,J-ze,ie,J+($e-Ee-1)*ze,ze);break;case 1:for(ze=he,We=Fe,lt=(he=fe.Ea)-(rt=he&~(tt=(Fe=1<<fe.b)-1)),st=M(he,fe.b),ut=fe.K,fe=fe.w+(Ee>>fe.b)*st;Ee<$e;){for(fn=ut,Qt=fe,Un=new R,nn=We+rt,or=We+he;We<nn;)ct(fn[Qt++],Un),bc(Un,ze,We,Fe,ie,J),We+=Fe,J+=Fe;We<or&&(ct(fn[Qt++],Un),bc(Un,ze,We,lt,ie,J),We+=lt,J+=lt),++Ee&tt||(fe+=st)}break;case 3:if(he==ie&&Fe==J&&0<fe.b){for(We=ie,he=ze=J+($e-Ee)*ze-(rt=($e-Ee)*M(fe.Ea,fe.b)),Fe=ie,tt=J,st=[],rt=(lt=rt)-1;0<=rt;--rt)st[rt]=Fe[tt+rt];for(rt=lt-1;0<=rt;--rt)We[he+rt]=st[rt];Hl(fe,Ee,$e,ie,ze,ie,J)}else Hl(fe,Ee,$e,he,Fe,ie,J)}J=T,ie=C}ie!=C&&r(T,C,J,ie,K)}function Qr(h,x){var C=h.V,T=h.Ba+h.c*h.C,V=x-h.C;if(e(x<=h.l.o),e(16>=V),0<V){var K=h.l,Z=h.Ta,J=h.Ua,ie=K.width;if(gs(h,V,C,T),V=J=[J],e((C=h.C)<(T=x)),e(K.v<K.va),T>K.o&&(T=K.o),C<K.j){var fe=K.j-C;C=K.j,V[0]+=fe*ie}if(C>=T?C=0:(V[0]+=4*K.v,K.ka=C-K.j,K.U=K.va-K.v,K.T=T-C,C=1),C){if(J=J[0],11>(C=h.ca).S){var Ee=C.f.RGBA,$e=(T=C.S,V=K.U,K=K.T,fe=Ee.eb,Ee.A),he=K;for(Ee=Ee.fb+h.Ma*Ee.A;0<he--;){var Fe=Z,ze=J,st=V,We=fe,tt=Ee;switch(T){case rd:wc(Fe,ze,st,We,tt);break;case gl:Eo(Fe,ze,st,We,tt);break;case Cc:Eo(Fe,ze,st,We,tt),Yl(We,tt,0,st,1,0);break;case Bh:Kl(Fe,ze,st,We,tt);break;case xu:Ke(Fe,ze,st,We,tt,1);break;case Xl:Ke(Fe,ze,st,We,tt,1),Yl(We,tt,0,st,1,0);break;case yu:Ke(Fe,ze,st,We,tt,0);break;case bu:Ke(Fe,ze,st,We,tt,0),Yl(We,tt,1,st,1,0);break;case zr:hl(Fe,ze,st,We,tt);break;case wu:hl(Fe,ze,st,We,tt),xf(We,tt,st,1,0);break;case sd:pl(Fe,ze,st,We,tt);break;default:e(0)}J+=ie,Ee+=$e}h.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=C.height)}}h.C=x,e(h.C<=h.i)}function Er(h){var x;if(0<h.ua)return 0;for(x=0;x<h.Wb;++x){var C=h.Ya[x].G,T=h.Ya[x].H;if(0<C[1][T[1]+0].g||0<C[2][T[2]+0].g||0<C[3][T[3]+0].g)return 0}return 1}function Ws(h,x,C,T,V,K){if(h.Z!=0){var Z=h.qd,J=h.rd;for(e(Pi[h.Z]!=null);x<C;++x)Pi[h.Z](Z,J,T,V,T,V,K),Z=T,J=V,V+=K;h.qd=Z,h.rd=J}}function Zr(h,x){var C=h.l.ma,T=C.Z==0||C.Z==1?h.l.j:h.C;if(T=h.C<T?T:h.C,e(x<=h.l.o),x>T){var V=h.l.width,K=C.ca,Z=C.tb+V*T,J=h.V,ie=h.Ba+h.c*T,fe=h.gc;e(h.ab==1),e(fe[0].hc==3),Ga(fe[0],T,x,J,ie,K,Z),Ws(C,T,x,K,Z,V)}h.C=h.Ma=x}function Is(h,x,C,T,V,K,Z){var J=h.$/T,ie=h.$%T,fe=h.m,Ee=h.s,$e=C+h.$,he=$e;V=C+T*V;var Fe=C+T*K,ze=280+Ee.ua,st=h.Pb?J:16777216,We=0<Ee.ua?Ee.Wa:null,tt=Ee.wc,rt=$e<Fe?xr(Ee,ie,J):null;e(h.C<K),e(Fe<=V);var lt=!1;e:for(;;){for(;lt||$e<Fe;){var ut=0;if(J>=st){var fn=$e-C;e((st=h).Pb),st.wd=st.m,st.xd=fn,0<st.s.ua&&xt(st.s.Wa,st.s.vb),st=J+ad}if(ie&tt||(rt=xr(Ee,ie,J)),e(rt!=null),rt.Qb&&(x[$e]=rt.qb,lt=!0),!lt)if(be(fe),rt.jc){ut=fe,fn=x;var Qt=$e,Un=rt.pd[ne(ut)&Ra-1];e(rt.jc),256>Un.g?(ye(ut,ut.u+Un.g),fn[Qt]=Un.value,ut=0):(ye(ut,ut.u+Un.g-256),e(256<=Un.value),ut=Un.value),ut==0&&(lt=!0)}else ut=nr(rt.G[0],rt.H[0],fe);if(fe.h)break;if(lt||256>ut){if(!lt)if(rt.nd)x[$e]=(rt.qb|ut<<8)>>>0;else{if(be(fe),lt=nr(rt.G[1],rt.H[1],fe),be(fe),fn=nr(rt.G[2],rt.H[2],fe),Qt=nr(rt.G[3],rt.H[3],fe),fe.h)break;x[$e]=(Qt<<24|lt<<16|ut<<8|fn)>>>0}if(lt=!1,++$e,++ie>=T&&(ie=0,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J),We!=null))for(;he<$e;)ut=x[he++],We.X[(506832829*ut&4294967295)>>>We.Mb]=ut}else if(280>ut){if(ut=os(ut-256,fe),fn=nr(rt.G[4],rt.H[4],fe),be(fe),fn=Ds(T,fn=os(fn,fe)),fe.h)break;if($e-C<fn||V-$e<ut)break e;for(Qt=0;Qt<ut;++Qt)x[$e+Qt]=x[$e+Qt-fn];for($e+=ut,ie+=ut;ie>=T;)ie-=T,++J,Z!=null&&J<=K&&!(J%16)&&Z(h,J);if(e($e<=V),ie&tt&&(rt=xr(Ee,ie,J)),We!=null)for(;he<$e;)ut=x[he++],We.X[(506832829*ut&4294967295)>>>We.Mb]=ut}else{if(!(ut<ze))break e;for(lt=ut-280,e(We!=null);he<$e;)ut=x[he++],We.X[(506832829*ut&4294967295)>>>We.Mb]=ut;ut=$e,e(!(lt>>>(fn=We).Xa)),x[ut]=fn.X[lt],lt=!0}lt||e(fe.h==me(fe))}if(h.Pb&&fe.h&&$e<V)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&xt(h.s.vb,h.s.Wa);else{if(fe.h)break e;Z?.(h,J>K?K:J),h.a=0,h.$=$e-C}return 1}return h.a=3,0}function Yr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var x=h.Wa;x!=null&&(x.X=null),h.vb=null,e(h!=null)}function Fs(){var h=new qt;return h==null?null:(h.a=0,h.xb=Ac,ot("Predictor","VP8LPredictors"),ot("Predictor","VP8LPredictors_C"),ot("PredictorAdd","VP8LPredictorsAdd"),ot("PredictorAdd","VP8LPredictorsAdd_C"),js=at,bc=_t,wc=cr,Eo=yn,hl=Vt,pl=Mt,Kl=tn,Q.VP8LMapColor32b=po,Q.VP8LMapColor8b=Wl,h)}function dr(h,x,C,T,V){var K=1,Z=[h],J=[x],ie=T.m,fe=T.s,Ee=null,$e=0;e:for(;;){if(C)for(;K&&se(ie,1);){var he=Z,Fe=J,ze=T,st=1,We=ze.m,tt=ze.gc[ze.ab],rt=se(We,2);if(ze.Oc&1<<rt)K=0;else{switch(ze.Oc|=1<<rt,tt.hc=rt,tt.Ea=he[0],tt.nc=Fe[0],tt.K=[null],++ze.ab,e(4>=ze.ab),rt){case 0:case 1:tt.b=se(We,3)+2,st=dr(M(tt.Ea,tt.b),M(tt.nc,tt.b),0,ze,tt.K),tt.K=tt.K[0];break;case 3:var lt,ut=se(We,8)+1,fn=16<ut?0:4<ut?1:2<ut?2:3;if(he[0]=M(tt.Ea,fn),tt.b=fn,lt=st=dr(ut,1,0,ze,tt.K)){var Qt,Un=ut,nn=tt,or=1<<(8>>nn.b),ys=o(or);if(ys==null)lt=0;else{var $n=nn.K[0],Zt=nn.w;for(ys[0]=nn.K[0][0],Qt=1;Qt<1*Un;++Qt)ys[Qt]=ve($n[Zt+Qt],ys[Qt-1]);for(;Qt<4*or;++Qt)ys[Qt]=0;nn.K[0]=null,nn.K[0]=ys,lt=1}}st=lt;break;case 2:break;default:e(0)}K=st}}if(Z=Z[0],J=J[0],K&&se(ie,1)&&!(K=1<=($e=se(ie,4))&&11>=$e)){T.a=3;break e}var Rt;if(Rt=K)t:{var Cs,kn,ar,Gr=T,di=Z,qs=J,fs=$e,Ks=C,fi=Gr.m,rs=Gr.s,fr=[null],wr=1,ss=0,Nr=Uh[fs];n:for(;;){if(Ks&&se(fi,1)){var bs=se(fi,3)+2,ws=M(di,bs),$r=M(qs,bs),ki=ws*$r;if(!dr(ws,$r,0,Gr,fr))break n;for(fr=fr[0],rs.xc=bs,Cs=0;Cs<ki;++Cs){var qr=fr[Cs]>>8&65535;fr[Cs]=qr,qr>=wr&&(wr=qr+1)}}if(fi.h)break n;for(kn=0;5>kn;++kn){var Vr=Jl[kn];!kn&&0<fs&&(Vr+=1<<fs),ss<Vr&&(ss=Vr)}var Us=u(wr*Nr,z),Ni=wr,ia=u(Ni,Ce);if(ia==null)var _s=null;else e(65536>=Ni),_s=ia;var As=o(ss);if(_s==null||As==null||Us==null){Gr.a=1;break n}var Ti=Us;for(Cs=ar=0;Cs<wr;++Cs){var Hr=_s[Cs],Ei=Hr.G,Fa=Hr.H,Za=0,hi=1,Ps=0;for(kn=0;5>kn;++kn){Vr=Jl[kn],Ei[kn]=Ti,Fa[kn]=ar,!kn&&0<fs&&(Vr+=1<<fs);s:{var yl,Io=Vr,Tc=Gr,vo=As,Wh=Ti,Tf=ar,Jr=0,Ya=Tc.m,Ef=se(Ya,1);if(a(vo,0,0,Io),Ef){var Lf=se(Ya,1)+1,ld=se(Ya,1),cd=se(Ya,ld==0?1:8);vo[cd]=1,Lf==2&&(vo[cd=se(Ya,8)]=1);var xo=1}else{var is=o(19),zs=se(Ya,4)+4;if(19<zs){Tc.a=3;var ks=0;break s}for(yl=0;yl<zs;++yl)is[lg[yl]]=se(Ya,3);var Ec=void 0,Fo=void 0,Lc=Tc,pg=is,Qs=Io,ud=vo,_u=0,yo=Lc.m,Xa=8,ba=u(128,z);r:for(;L(ba,0,7,pg,19);){if(se(yo,1)){var Au=2+2*se(yo,3);if((Ec=2+se(yo,Au))>Qs)break r}else Ec=Qs;for(Fo=0;Fo<Qs&&Ec--;){be(yo);var dd=ba[0+(127&ne(yo))];ye(yo,yo.u+dd.g);var bl=dd.value;if(16>bl)ud[Fo++]=bl,bl!=0&&(Xa=bl);else{var Gh=bl==16,Rf=bl-16,Kh=id[Rf],Df=se(yo,Nu[Rf])+Kh;if(Fo+Df>Qs)break r;for(var Qh=Gh?Xa:0;0<Df--;)ud[Fo++]=Qh}}_u=1;break r}_u||(Lc.a=3),xo=_u}(xo=xo&&!Ya.h)&&(Jr=L(Wh,Tf,8,vo,Io)),xo&&Jr!=0?ks=Jr:(Tc.a=3,ks=0)}if(ks==0)break n;if(hi&&qh[kn]==1&&(hi=Ti[ar].g==0),Za+=Ti[ar].g,ar+=ks,3>=kn){var Rc,fd=As[0];for(Rc=1;Rc<Vr;++Rc)As[Rc]>fd&&(fd=As[Rc]);Ps+=fd}}if(Hr.nd=hi,Hr.Qb=0,hi&&(Hr.qb=(Ei[3][Fa[3]+0].value<<24|Ei[1][Fa[1]+0].value<<16|Ei[2][Fa[2]+0].value)>>>0,Za==0&&256>Ei[0][Fa[0]+0].value&&(Hr.Qb=1,Hr.qb+=Ei[0][Fa[0]+0].value<<8)),Hr.jc=!Hr.Qb&&6>Ps,Hr.jc){var Pu,wa=Hr;for(Pu=0;Pu<Ra;++Pu){var Oo=Pu,Ja=wa.pd[Oo],sc=wa.G[0][wa.H[0]+Oo];256<=sc.value?(Ja.g=sc.g+256,Ja.value=sc.value):(Ja.g=0,Ja.value=0,Oo>>=Rr(sc,8,Ja),Oo>>=Rr(wa.G[1][wa.H[1]+Oo],16,Ja),Oo>>=Rr(wa.G[2][wa.H[2]+Oo],0,Ja),Rr(wa.G[3][wa.H[3]+Oo],24,Ja))}}}rs.vc=fr,rs.Wb=wr,rs.Ya=_s,rs.yc=Us,Rt=1;break t}Rt=0}if(!(K=Rt)){T.a=3;break e}if(0<$e){if(fe.ua=1<<$e,!le(fe.Wa,$e)){T.a=1,K=0;break e}}else fe.ua=0;var hd=T,pd=Z,Zh=J,md=hd.s,gd=md.xc;if(hd.c=pd,hd.i=Zh,md.md=M(pd,gd),md.wc=gd==0?-1:(1<<gd)-1,C){T.xb=go;break e}if((Ee=o(Z*J))==null){T.a=1,K=0;break e}K=(K=Is(T,Ee,0,Z,J,J,null))&&!ie.h;break e}return K?(V!=null?V[0]=Ee:(e(Ee==null),e(C)),T.$=0,C||Yr(fe)):Yr(fe),K}function ls(h,x){var C=h.c*h.i,T=C+x+16*x;return e(h.c<=x),h.V=o(T),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+C+x,1)}function ai(h,x){var C=h.C,T=x-C,V=h.V,K=h.Ba+h.c*C;for(e(x<=h.l.o);0<T;){var Z=16<T?16:T,J=h.l.ma,ie=h.l.width,fe=ie*Z,Ee=J.ca,$e=J.tb+ie*C,he=h.Ta,Fe=h.Ua;gs(h,Z,V,K),yf(he,Fe,Ee,$e,fe),Ws(J,C,C+Z,Ee,$e,ie),T-=Z,V+=Z*h.c,C+=Z}e(C==x),h.C=h.Ma=x}function Mi(){this.ub=this.yd=this.td=this.Rb=0}function Bi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qi(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Bn(){this.Yb=(function(){var h=[];return(function x(C,T,V){for(var K=V[T],Z=0;Z<K&&(C.push(V.length>T+1?[]:0),!(V.length<T+1));Z++)x(C[Z],T+1,V)})(h,0,[3,11]),h})()}function vi(){this.jb=o(3),this.Wc=c([4,8],Bn),this.Xc=c([4,17],Bn)}function hn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Nn(){this.ld=this.La=this.dd=this.tc=0}function gn(){this.Na=this.la=0}function Ht(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nn),this.Y=0,this.ya=Array(new Xt),this.aa=0,this.l=new dt}function it(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ft(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Mi,this.Kc=new Bi,this.ed=new hn,this.Qa=new qi,this.Ic=this.$c=this.Aa=0,this.D=new pt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,O),this.ia=0,this.pb=u(4,Ht),this.Pa=new vi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new it),this.Hd=0,this.rb=Array(new gn),this.sb=0,this.wa=Array(new Nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xt),this.L=this.aa=0,this.gd=c([4,2],Nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ze(h,x){return 0>h?0:h>x?x:h}function dt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lt(){var h=new ft;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ec||(ec=It)),h}function mt(h,x,C){return h.a==0&&(h.a=x,h.sc=C,h.cb=0),0}function Tt(h,x,C){return 3<=C&&h[x+0]==157&&h[x+1]==1&&h[x+2]==42}function St(h,x){if(h==null)return 0;if(h.a=0,h.sc="OK",x==null)return mt(h,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,T=x.w,V=x.ha;if(4>V)return mt(h,7,"Truncated header.");var K=C[T+0]|C[T+1]<<8|C[T+2]<<16,Z=h.Od;if(Z.Rb=!(1&K),Z.td=K>>1&7,Z.yd=K>>4&1,Z.ub=K>>5,3<Z.td)return mt(h,3,"Incorrect keyframe parameters.");if(!Z.yd)return mt(h,4,"Frame not displayable.");T+=3,V-=3;var J=h.Kc;if(Z.Rb){if(7>V)return mt(h,7,"cannot parse picture header");if(!Tt(C,T,V))return mt(h,3,"Bad code word");J.c=16383&(C[T+4]<<8|C[T+3]),J.Td=C[T+4]>>6,J.i=16383&(C[T+6]<<8|C[T+5]),J.Ud=C[T+6]>>6,T+=7,V-=7,h.za=J.c+15>>4,h.Ub=J.i+15>>4,x.width=J.c,x.height=J.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((K=h.Pa).jb,0,255,K.jb.length),e((K=h.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,a(K.Zb,0,0,K.Zb.length),a(K.Lb,0,0,K.Lb)}if(Z.ub>V)return mt(h,7,"bad partition length");_e(K=h.m,C,T,Z.ub),T+=Z.ub,V-=Z.ub,Z.Rb&&(J.Ld=Ie(K),J.Kd=Ie(K)),J=h.Qa;var ie,fe=h.Pa;if(e(K!=null),e(J!=null),J.Cb=Ie(K),J.Cb){if(J.Bb=Ie(K),Ie(K)){for(J.Fb=Ie(K),ie=0;4>ie;++ie)J.Zb[ie]=Ie(K)?ce(K,7):0;for(ie=0;4>ie;++ie)J.Lb[ie]=Ie(K)?ce(K,6):0}if(J.Bb)for(ie=0;3>ie;++ie)fe.jb[ie]=Ie(K)?Ae(K,8):255}else J.Bb=0;if(K.Ka)return mt(h,3,"cannot parse segment header");if((J=h.ed).zd=Ie(K),J.Tb=Ae(K,6),J.wb=Ae(K,3),J.Pc=Ie(K),J.Pc&&Ie(K)){for(fe=0;4>fe;++fe)Ie(K)&&(J.vd[fe]=ce(K,6));for(fe=0;4>fe;++fe)Ie(K)&&(J.od[fe]=ce(K,6))}if(h.L=J.Tb==0?0:J.zd?1:2,K.Ka)return mt(h,3,"cannot parse filter header");var Ee=V;if(V=ie=T,T=ie+Ee,J=Ee,h.Xb=(1<<Ae(h.m,2))-1,Ee<3*(fe=h.Xb))C=7;else{for(ie+=3*fe,J-=3*fe,Ee=0;Ee<fe;++Ee){var $e=C[V+0]|C[V+1]<<8|C[V+2]<<16;$e>J&&($e=J),_e(h.Jc[+Ee],C,ie,$e),ie+=$e,J-=$e,V+=3}_e(h.Jc[+fe],C,ie,J),C=ie<T?0:5}if(C!=0)return mt(h,C,"cannot parse partitions");for(C=Ae(ie=h.m,7),V=Ie(ie)?ce(ie,4):0,T=Ie(ie)?ce(ie,4):0,J=Ie(ie)?ce(ie,4):0,fe=Ie(ie)?ce(ie,4):0,ie=Ie(ie)?ce(ie,4):0,Ee=h.Qa,$e=0;4>$e;++$e){if(Ee.Cb){var he=Ee.Zb[$e];Ee.Fb||(he+=C)}else{if(0<$e){h.pb[$e]=h.pb[0];continue}he=C}var Fe=h.pb[$e];Fe.Sc[0]=_c[Ze(he+V,127)],Fe.Sc[1]=Su[Ze(he+0,127)],Fe.Eb[0]=2*_c[Ze(he+T,127)],Fe.Eb[1]=101581*Su[Ze(he+J,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=_c[Ze(he+fe,117)],Fe.Qc[1]=Su[Ze(he+ie,127)],Fe.lc=he+ie}if(!Z.Rb)return mt(h,4,"Not a key frame.");for(Ie(K),Z=h.Pa,C=0;4>C;++C){for(V=0;8>V;++V)for(T=0;3>T;++T)for(J=0;11>J;++J)fe=Me(K,dg[C][V][T][J])?Ae(K,8):$h[C][V][T][J],Z.Wc[C][V].Yb[T][J]=fe;for(V=0;17>V;++V)Z.Xc[C][V]=Z.Wc[C][Af[V]]}return h.kc=Ie(K),h.kc&&(h.Bd=Ae(K,8)),h.cb=1}function It(h,x,C,T,V,K,Z){var J=x[V].Yb[C];for(C=0;16>V;++V){if(!Me(h,J[C+0]))return V;for(;!Me(h,J[C+1]);)if(J=x[++V].Yb[0],C=0,V==16)return 16;var ie=x[V+1].Yb;if(Me(h,J[C+2])){var fe=h,Ee=0;if(Me(fe,(he=J)[($e=C)+3]))if(Me(fe,he[$e+6])){for(J=0,$e=2*(Ee=Me(fe,he[$e+8]))+(he=Me(fe,he[$e+9+Ee])),Ee=0,he=Cf[$e];he[J];++J)Ee+=Ee+Me(fe,he[J]);Ee+=3+(8<<$e)}else Me(fe,he[$e+7])?(Ee=7+2*Me(fe,165),Ee+=Me(fe,145)):Ee=5+Me(fe,159);else Ee=Me(fe,he[$e+4])?3+Me(fe,he[$e+5]):2;J=ie[2]}else Ee=1,J=ie[1];ie=Z+_f[V],0>(fe=h).b&&Re(fe);var $e,he=fe.b,Fe=($e=fe.Ca>>1)-(fe.I>>he)>>31;--fe.b,fe.Ca+=Fe,fe.Ca|=1,fe.I-=($e+1&Fe)<<he,K[ie]=((Ee^Fe)-Fe)*T[(0<V)+0]}return 16}function Jt(h){var x=h.rb[h.sb-1];x.la=0,x.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function Ut(h,x,C,T,V){V=h[x+C+32*T]+(V>>3),h[x+C+32*T]=-256&V?0>V?0:255:V}function Ft(h,x,C,T,V,K){Ut(h,x,0,C,T+V),Ut(h,x,1,C,T+K),Ut(h,x,2,C,T-K),Ut(h,x,3,C,T-V)}function Wt(h){return(20091*h>>16)+h}function bn(h,x,C,T){var V,K=0,Z=o(16);for(V=0;4>V;++V){var J=h[x+0]+h[x+8],ie=h[x+0]-h[x+8],fe=(35468*h[x+4]>>16)-Wt(h[x+12]),Ee=Wt(h[x+4])+(35468*h[x+12]>>16);Z[K+0]=J+Ee,Z[K+1]=ie+fe,Z[K+2]=ie-fe,Z[K+3]=J-Ee,K+=4,x++}for(V=K=0;4>V;++V)J=(h=Z[K+0]+4)+Z[K+8],ie=h-Z[K+8],fe=(35468*Z[K+4]>>16)-Wt(Z[K+12]),Ut(C,T,0,0,J+(Ee=Wt(Z[K+4])+(35468*Z[K+12]>>16))),Ut(C,T,1,0,ie+fe),Ut(C,T,2,0,ie-fe),Ut(C,T,3,0,J-Ee),K++,T+=32}function Cr(h,x,C,T){var V=h[x+0]+4,K=35468*h[x+4]>>16,Z=Wt(h[x+4]),J=35468*h[x+1]>>16;Ft(C,T,0,V+Z,h=Wt(h[x+1]),J),Ft(C,T,1,V+K,h,J),Ft(C,T,2,V-K,h,J),Ft(C,T,3,V-Z,h,J)}function dn(h,x,C,T,V){bn(h,x,C,T),V&&bn(h,x+16,C,T+4)}function q(h,x,C,T){Ql(h,x+0,C,T,1),Ql(h,x+32,C,T+128,1)}function ue(h,x,C,T){var V;for(h=h[x+0]+4,V=0;4>V;++V)for(x=0;4>x;++x)Ut(C,T,x,V,h)}function oe(h,x,C,T){h[x+0]&&br(h,x+0,C,T),h[x+16]&&br(h,x+16,C,T+4),h[x+32]&&br(h,x+32,C,T+128),h[x+48]&&br(h,x+48,C,T+128+4)}function Te(h,x,C,T){var V,K=o(16);for(V=0;4>V;++V){var Z=h[x+0+V]+h[x+12+V],J=h[x+4+V]+h[x+8+V],ie=h[x+4+V]-h[x+8+V],fe=h[x+0+V]-h[x+12+V];K[0+V]=Z+J,K[8+V]=Z-J,K[4+V]=fe+ie,K[12+V]=fe-ie}for(V=0;4>V;++V)Z=(h=K[0+4*V]+3)+K[3+4*V],J=K[1+4*V]+K[2+4*V],ie=K[1+4*V]-K[2+4*V],fe=h-K[3+4*V],C[T+0]=Z+J>>3,C[T+16]=fe+ie>>3,C[T+32]=Z-J>>3,C[T+48]=fe-ie>>3,T+=64}function Ne(h,x,C){var T,V=x-32,K=Wi,Z=255-h[V-1];for(T=0;T<C;++T){var J,ie=K,fe=Z+h[x-1];for(J=0;J<C;++J)h[x+J]=ie[fe+h[V+J]];x+=32}}function At(h,x){Ne(h,x,4)}function An(h,x){Ne(h,x,8)}function Gt(h,x){Ne(h,x,16)}function hr(h,x){var C;for(C=0;16>C;++C)r(h,x+32*C,h,x-32,16)}function Xr(h,x){var C;for(C=16;0<C;--C)a(h,x,h[x-1],16),x+=32}function _r(h,x,C){var T;for(T=0;16>T;++T)a(x,C+32*T,h,16)}function cs(h,x){var C,T=16;for(C=0;16>C;++C)T+=h[x-1+32*C]+h[x+C-32];_r(T>>5,h,x)}function Dr(h,x){var C,T=8;for(C=0;16>C;++C)T+=h[x-1+32*C];_r(T>>4,h,x)}function us(h,x){var C,T=8;for(C=0;16>C;++C)T+=h[x+C-32];_r(T>>4,h,x)}function Xi(h,x){_r(128,h,x)}function et(h,x,C){return h+2*x+C+2>>2}function qn(h,x){var C,T=x-32;for(T=new Uint8Array([et(h[T-1],h[T+0],h[T+1]),et(h[T+0],h[T+1],h[T+2]),et(h[T+1],h[T+2],h[T+3]),et(h[T+2],h[T+3],h[T+4])]),C=0;4>C;++C)r(h,x+32*C,T,0,T.length)}function Bl(h,x){var C=h[x-1],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96];Qe(h,x+0,16843009*et(h[x-1-32],C,T)),Qe(h,x+32,16843009*et(C,T,V)),Qe(h,x+64,16843009*et(T,V,K)),Qe(h,x+96,16843009*et(V,K,K))}function il(h,x){var C,T=4;for(C=0;4>C;++C)T+=h[x+C-32]+h[x-1+32*C];for(T>>=3,C=0;4>C;++C)a(h,x+32*C,T,4)}function xi(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1-32],Z=h[x+0-32],J=h[x+1-32],ie=h[x+2-32],fe=h[x+3-32];h[x+0+96]=et(T,V,h[x-1+96]),h[x+1+96]=h[x+0+64]=et(C,T,V),h[x+2+96]=h[x+1+64]=h[x+0+32]=et(K,C,T),h[x+3+96]=h[x+2+64]=h[x+1+32]=h[x+0+0]=et(Z,K,C),h[x+3+64]=h[x+2+32]=h[x+1+0]=et(J,Z,K),h[x+3+32]=h[x+2+0]=et(ie,J,Z),h[x+3+0]=et(fe,ie,J)}function ga(h,x){var C=h[x+1-32],T=h[x+2-32],V=h[x+3-32],K=h[x+4-32],Z=h[x+5-32],J=h[x+6-32],ie=h[x+7-32];h[x+0+0]=et(h[x+0-32],C,T),h[x+1+0]=h[x+0+32]=et(C,T,V),h[x+2+0]=h[x+1+32]=h[x+0+64]=et(T,V,K),h[x+3+0]=h[x+2+32]=h[x+1+64]=h[x+0+96]=et(V,K,Z),h[x+3+32]=h[x+2+64]=h[x+1+96]=et(K,Z,J),h[x+3+64]=h[x+2+96]=et(Z,J,ie),h[x+3+96]=et(J,ie,ie)}function Ha(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1-32],Z=h[x+0-32],J=h[x+1-32],ie=h[x+2-32],fe=h[x+3-32];h[x+0+0]=h[x+1+64]=K+Z+1>>1,h[x+1+0]=h[x+2+64]=Z+J+1>>1,h[x+2+0]=h[x+3+64]=J+ie+1>>1,h[x+3+0]=ie+fe+1>>1,h[x+0+96]=et(V,T,C),h[x+0+64]=et(T,C,K),h[x+0+32]=h[x+1+96]=et(C,K,Z),h[x+1+32]=h[x+2+96]=et(K,Z,J),h[x+2+32]=h[x+3+96]=et(Z,J,ie),h[x+3+32]=et(J,ie,fe)}function Ir(h,x){var C=h[x+0-32],T=h[x+1-32],V=h[x+2-32],K=h[x+3-32],Z=h[x+4-32],J=h[x+5-32],ie=h[x+6-32],fe=h[x+7-32];h[x+0+0]=C+T+1>>1,h[x+1+0]=h[x+0+64]=T+V+1>>1,h[x+2+0]=h[x+1+64]=V+K+1>>1,h[x+3+0]=h[x+2+64]=K+Z+1>>1,h[x+0+32]=et(C,T,V),h[x+1+32]=h[x+0+96]=et(T,V,K),h[x+2+32]=h[x+1+96]=et(V,K,Z),h[x+3+32]=h[x+2+96]=et(K,Z,J),h[x+3+64]=et(Z,J,ie),h[x+3+96]=et(J,ie,fe)}function ds(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96];h[x+0+0]=C+T+1>>1,h[x+2+0]=h[x+0+32]=T+V+1>>1,h[x+2+32]=h[x+0+64]=V+K+1>>1,h[x+1+0]=et(C,T,V),h[x+3+0]=h[x+1+32]=et(T,V,K),h[x+3+32]=h[x+1+64]=et(V,K,K),h[x+3+64]=h[x+2+64]=h[x+0+96]=h[x+1+96]=h[x+2+96]=h[x+3+96]=K}function Ui(h,x){var C=h[x-1+0],T=h[x-1+32],V=h[x-1+64],K=h[x-1+96],Z=h[x-1-32],J=h[x+0-32],ie=h[x+1-32],fe=h[x+2-32];h[x+0+0]=h[x+2+32]=C+Z+1>>1,h[x+0+32]=h[x+2+64]=T+C+1>>1,h[x+0+64]=h[x+2+96]=V+T+1>>1,h[x+0+96]=K+V+1>>1,h[x+3+0]=et(J,ie,fe),h[x+2+0]=et(Z,J,ie),h[x+1+0]=h[x+3+32]=et(C,Z,J),h[x+1+32]=h[x+3+64]=et(T,C,Z),h[x+1+64]=h[x+3+96]=et(V,T,C),h[x+1+96]=et(K,V,T)}function Os(h,x){var C;for(C=0;8>C;++C)r(h,x+32*C,h,x-32,8)}function Co(h,x){var C;for(C=0;8>C;++C)a(h,x,h[x-1],8),x+=32}function _i(h,x,C){var T;for(T=0;8>T;++T)a(x,C+32*T,h,8)}function _o(h,x){var C,T=8;for(C=0;8>C;++C)T+=h[x+C-32]+h[x-1+32*C];_i(T>>4,h,x)}function ql(h,x){var C,T=4;for(C=0;8>C;++C)T+=h[x+C-32];_i(T>>3,h,x)}function Ul(h,x){var C,T=4;for(C=0;8>C;++C)T+=h[x-1+32*C];_i(T>>3,h,x)}function co(h,x){_i(128,h,x)}function zi(h,x,C){var T=h[x-C],V=h[x+0],K=3*(V-T)+mo[1020+h[x-2*C]-h[x+C]],Z=jc[112+(K+4>>3)];h[x-C]=Wi[255+T+jc[112+(K+3>>3)]],h[x+0]=Wi[255+V-Z]}function oi(h,x,C,T){var V=h[x+0],K=h[x+C];return Da[255+h[x-2*C]-h[x-C]]>T||Da[255+K-V]>T}function li(h,x,C,T){return 4*Da[255+h[x-C]-h[x+0]]+Da[255+h[x-2*C]-h[x+C]]<=T}function $i(h,x,C,T,V){var K=h[x-3*C],Z=h[x-2*C],J=h[x-C],ie=h[x+0],fe=h[x+C],Ee=h[x+2*C],$e=h[x+3*C];return 4*Da[255+J-ie]+Da[255+Z-fe]>T?0:Da[255+h[x-4*C]-K]<=V&&Da[255+K-Z]<=V&&Da[255+Z-J]<=V&&Da[255+$e-Ee]<=V&&Da[255+Ee-fe]<=V&&Da[255+fe-ie]<=V}function Ea(h,x,C,T){var V=2*T+1;for(T=0;16>T;++T)li(h,x+T,C,V)&&zi(h,x+T,C)}function Ms(h,x,C,T){var V=2*T+1;for(T=0;16>T;++T)li(h,x+T*C,1,V)&&zi(h,x+T*C,1)}function yi(h,x,C,T){var V;for(V=3;0<V;--V)Ea(h,x+=4*C,C,T)}function ci(h,x,C,T){var V;for(V=3;0<V;--V)Ms(h,x+=4,C,T)}function Ai(h,x,C,T,V,K,Z,J){for(K=2*K+1;0<V--;){if($i(h,x,C,K,Z))if(oi(h,x,C,J))zi(h,x,C);else{var ie=h,fe=x,Ee=C,$e=ie[fe-2*Ee],he=ie[fe-Ee],Fe=ie[fe+0],ze=ie[fe+Ee],st=ie[fe+2*Ee],We=27*(rt=mo[1020+3*(Fe-he)+mo[1020+$e-ze]])+63>>7,tt=18*rt+63>>7,rt=9*rt+63>>7;ie[fe-3*Ee]=Wi[255+ie[fe-3*Ee]+rt],ie[fe-2*Ee]=Wi[255+$e+tt],ie[fe-Ee]=Wi[255+he+We],ie[fe+0]=Wi[255+Fe-We],ie[fe+Ee]=Wi[255+ze-tt],ie[fe+2*Ee]=Wi[255+st-rt]}x+=T}}function La(h,x,C,T,V,K,Z,J){for(K=2*K+1;0<V--;){if($i(h,x,C,K,Z))if(oi(h,x,C,J))zi(h,x,C);else{var ie=h,fe=x,Ee=C,$e=ie[fe-Ee],he=ie[fe+0],Fe=ie[fe+Ee],ze=jc[112+(4+(st=3*(he-$e))>>3)],st=jc[112+(st+3>>3)],We=ze+1>>1;ie[fe-2*Ee]=Wi[255+ie[fe-2*Ee]+We],ie[fe-Ee]=Wi[255+$e+st],ie[fe+0]=Wi[255+he-ze],ie[fe+Ee]=Wi[255+Fe-We]}x+=T}}function ui(h,x,C,T,V,K){Ai(h,x,C,1,16,T,V,K)}function Ji(h,x,C,T,V,K){Ai(h,x,1,C,16,T,V,K)}function al(h,x,C,T,V,K){var Z;for(Z=3;0<Z;--Z)La(h,x+=4*C,C,1,16,T,V,K)}function w(h,x,C,T,V,K){var Z;for(Z=3;0<Z;--Z)La(h,x+=4,1,C,16,T,V,K)}function $(h,x,C,T,V,K,Z,J){Ai(h,x,V,1,8,K,Z,J),Ai(C,T,V,1,8,K,Z,J)}function pe(h,x,C,T,V,K,Z,J){Ai(h,x,1,V,8,K,Z,J),Ai(C,T,1,V,8,K,Z,J)}function Pe(h,x,C,T,V,K,Z,J){La(h,x+4*V,V,1,8,K,Z,J),La(C,T+4*V,V,1,8,K,Z,J)}function Be(h,x,C,T,V,K,Z,J){La(h,x+4,1,V,8,K,Z,J),La(C,T+4,1,V,8,K,Z,J)}function qe(){this.ba=new vn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jt(){this.ua=0,this.Wa=new xe,this.vb=new xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ce,this.yc=new z}function qt(){this.xb=this.a=0,this.l=new dt,this.ca=new vn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jt,this.ab=0,this.gc=u(4,yt),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function En(h,x,C,T,V,K,Z){for(h=h==null?0:h[x+0],x=0;x<Z;++x)V[K+x]=h+C[T+x]&255,h=V[K+x]}function ir(h,x,C,T,V,K,Z){var J;if(h==null)En(null,null,C,T,V,K,Z);else for(J=0;J<Z;++J)V[K+J]=h[x+J]+C[T+J]&255}function mr(h,x,C,T,V,K,Z){if(h==null)En(null,null,C,T,V,K,Z);else{var J,ie=h[x+0],fe=ie,Ee=ie;for(J=0;J<Z;++J)fe=Ee+(ie=h[x+J])-fe,Ee=C[T+J]+(-256&fe?0>fe?0:255:fe)&255,fe=ie,V[K+J]=Ee}}function Hn(h,x,C,T){var V=x.width,K=x.o;if(e(h!=null&&x!=null),0>C||0>=T||C+T>K)return null;if(!h.Cc){if(h.ga==null){var Z;if(h.ga=new ln,(Z=h.ga==null)||(Z=x.width*x.o,e(h.Gb.length==0),h.Gb=o(Z),h.Uc=0,h.Gb==null?Z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,Z=1),Z=!Z),!Z){Z=h.ga;var J=h.Fa,ie=h.P,fe=h.qc,Ee=h.mb,$e=h.nb,he=ie+1,Fe=fe-1,ze=Z.l;if(e(J!=null&&Ee!=null&&x!=null),Pi[0]=null,Pi[1]=En,Pi[2]=ir,Pi[3]=mr,Z.ca=Ee,Z.tb=$e,Z.c=x.width,Z.i=x.height,e(0<Z.c&&0<Z.i),1>=fe)x=0;else if(Z.$a=3&J[ie+0],Z.Z=J[ie+0]>>2&3,Z.Lc=J[ie+0]>>4&3,ie=J[ie+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||ie)x=0;else if(ze.put=on,ze.ac=ur,ze.bc=Rs,ze.ma=Z,ze.width=x.width,ze.height=x.height,ze.Da=x.Da,ze.v=x.v,ze.va=x.va,ze.j=x.j,ze.o=x.o,Z.$a)e:{e(Z.$a==1),x=Fs();t:for(;;){if(x==null){x=0;break e}if(e(Z!=null),Z.mc=x,x.c=Z.c,x.i=Z.i,x.l=Z.l,x.l.ma=Z,x.l.width=Z.c,x.l.height=Z.i,x.a=0,ge(x.m,J,he,Fe),!dr(Z.c,Z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Er(x.s)?(Z.ic=1,J=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(J),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Z.ic=0,x=ls(x,Z.c)),!x))break t;x=1;break e}Z.mc=null,x=0}else x=Fe>=Z.c*Z.i;Z=!x}if(Z)return null;h.ga.Lc!=1?h.Ga=0:T=K-C}e(h.ga!=null),e(C+T<=K);e:{if(x=(J=h.ga).c,K=J.l.o,J.$a==0){if(he=h.rc,Fe=h.Vc,ze=h.Fa,ie=h.P+1+C*x,fe=h.mb,Ee=h.nb+C*x,e(ie<=h.P+h.qc),J.Z!=0)for(e(Pi[J.Z]!=null),Z=0;Z<T;++Z)Pi[J.Z](he,Fe,ze,ie,fe,Ee,x),he=fe,Fe=Ee,Ee+=x,ie+=x;else for(Z=0;Z<T;++Z)r(fe,Ee,ze,ie,x),he=fe,Fe=Ee,Ee+=x,ie+=x;h.rc=he,h.Vc=Fe}else{if(e(J.mc!=null),x=C+T,e((Z=J.mc)!=null),e(x<=Z.i),Z.C>=x)x=1;else if(J.ic||Gs(),J.ic){J=Z.V,he=Z.Ba,Fe=Z.c;var st=Z.i,We=(ze=1,ie=Z.$/Fe,fe=Z.$%Fe,Ee=Z.m,$e=Z.s,Z.$),tt=Fe*st,rt=Fe*x,lt=$e.wc,ut=We<rt?xr($e,fe,ie):null;e(We<=tt),e(x<=st),e(Er($e));t:for(;;){for(;!Ee.h&&We<rt;){if(fe&lt||(ut=xr($e,fe,ie)),e(ut!=null),be(Ee),256>(st=nr(ut.G[0],ut.H[0],Ee)))J[he+We]=st,++We,++fe>=Fe&&(fe=0,++ie<=x&&!(ie%16)&&Zr(Z,ie));else{if(!(280>st)){ze=0;break t}st=os(st-256,Ee);var fn,Qt=nr(ut.G[4],ut.H[4],Ee);if(be(Ee),!(We>=(Qt=Ds(Fe,Qt=os(Qt,Ee)))&&tt-We>=st)){ze=0;break t}for(fn=0;fn<st;++fn)J[he+We+fn]=J[he+We+fn-Qt];for(We+=st,fe+=st;fe>=Fe;)fe-=Fe,++ie<=x&&!(ie%16)&&Zr(Z,ie);We<rt&&fe&lt&&(ut=xr($e,fe,ie))}e(Ee.h==me(Ee))}Zr(Z,ie>x?x:ie);break t}!ze||Ee.h&&We<tt?(ze=0,Z.a=Ee.h?5:3):Z.$=We,x=ze}else x=Is(Z,Z.V,Z.Ba,Z.c,Z.i,x,ai);if(!x){T=0;break e}}C+T>=K&&(h.Cc=1),T=1}if(!T)return null;if(h.Cc&&((T=h.ga)!=null&&(T.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+C*V}function Ar(h,x,C,T,V,K){for(;0<V--;){var Z,J=h,ie=x+(C?1:0),fe=h,Ee=x+(C?0:3);for(Z=0;Z<T;++Z){var $e=fe[Ee+4*Z];$e!=255&&($e*=32897,J[ie+4*Z+0]=J[ie+4*Z+0]*$e>>23,J[ie+4*Z+1]=J[ie+4*Z+1]*$e>>23,J[ie+4*Z+2]=J[ie+4*Z+2]*$e>>23)}x+=K}}function Fr(h,x,C,T,V){for(;0<T--;){var K;for(K=0;K<C;++K){var Z=h[x+2*K+0],J=15&(fe=h[x+2*K+1]),ie=4369*J,fe=(240&fe|fe>>4)*ie>>16;h[x+2*K+0]=(240&Z|Z>>4)*ie>>16&240|(15&Z|Z<<4)*ie>>16>>4&15,h[x+2*K+1]=240&fe|J}x+=V}}function Or(h,x,C,T,V,K,Z,J){var ie,fe,Ee=255;for(fe=0;fe<V;++fe){for(ie=0;ie<T;++ie){var $e=h[x+ie];K[Z+4*ie]=$e,Ee&=$e}x+=C,Z+=J}return Ee!=255}function zt(h,x,C,T,V){var K;for(K=0;K<V;++K)C[T+K]=h[x+K]>>8}function Gs(){Yl=Ar,xf=Fr,vu=Or,yf=zt}function Vi(h,x,C){Q[h]=function(T,V,K,Z,J,ie,fe,Ee,$e,he,Fe,ze,st,We,tt,rt,lt){var ut,fn=lt-1>>1,Qt=J[ie+0]|fe[Ee+0]<<16,Un=$e[he+0]|Fe[ze+0]<<16;e(T!=null);var nn=3*Qt+Un+131074>>2;for(x(T[V+0],255&nn,nn>>16,st,We),K!=null&&(nn=3*Un+Qt+131074>>2,x(K[Z+0],255&nn,nn>>16,tt,rt)),ut=1;ut<=fn;++ut){var or=J[ie+ut]|fe[Ee+ut]<<16,ys=$e[he+ut]|Fe[ze+ut]<<16,$n=Qt+or+Un+ys+524296,Zt=$n+2*(or+Un)>>3;nn=Zt+Qt>>1,Qt=($n=$n+2*(Qt+ys)>>3)+or>>1,x(T[V+2*ut-1],255&nn,nn>>16,st,We+(2*ut-1)*C),x(T[V+2*ut-0],255&Qt,Qt>>16,st,We+(2*ut-0)*C),K!=null&&(nn=$n+Un>>1,Qt=Zt+ys>>1,x(K[Z+2*ut-1],255&nn,nn>>16,tt,rt+(2*ut-1)*C),x(K[Z+2*ut+0],255&Qt,Qt>>16,tt,rt+(2*ut+0)*C)),Qt=or,Un=ys}1&lt||(nn=3*Qt+Un+131074>>2,x(T[V+lt-1],255&nn,nn>>16,st,We+(lt-1)*C),K!=null&&(nn=3*Un+Qt+131074>>2,x(K[Z+lt-1],255&nn,nn>>16,tt,rt+(lt-1)*C)))}}function Ao(){na[rd]=fg,na[gl]=vl,na[Bh]=hg,na[xu]=Pc,na[yu]=tc,na[zr]=ju,na[sd]=Pf,na[Cc]=vl,na[Xl]=Pc,na[bu]=tc,na[wu]=ju}function ol(h){return h&-16384?0>h?0:255:h>>xl}function ll(h,x){return ol((19077*h>>8)+(26149*x>>8)-14234)}function zl(h,x,C){return ol((19077*h>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function cl(h,x){return ol((19077*h>>8)+(33050*x>>8)-17685)}function ul(h,x,C,T,V){T[V+0]=ll(h,C),T[V+1]=zl(h,x,C),T[V+2]=cl(h,x)}function bi(h,x,C,T,V){T[V+0]=cl(h,x),T[V+1]=zl(h,x,C),T[V+2]=ll(h,C)}function $l(h,x,C,T,V){var K=zl(h,x,C);x=K<<3&224|cl(h,x)>>3,T[V+0]=248&ll(h,C)|K>>5,T[V+1]=x}function Vl(h,x,C,T,V){var K=240&cl(h,x)|15;T[V+0]=240&ll(h,C)|zl(h,x,C)>>4,T[V+1]=K}function hu(h,x,C,T,V){T[V+0]=255,ul(h,x,C,T,V+1)}function pu(h,x,C,T,V){bi(h,x,C,T,V),T[V+3]=255}function Hi(h,x,C,T,V){ul(h,x,C,T,V),T[V+3]=255}function Wa(h,x,C){Q[h]=function(T,V,K,Z,J,ie,fe,Ee,$e){for(var he=Ee+(-2&$e)*C;Ee!=he;)x(T[V+0],K[Z+0],J[ie+0],fe,Ee),x(T[V+1],K[Z+0],J[ie+0],fe,Ee+C),V+=2,++Z,++ie,Ee+=2*C;1&$e&&x(T[V+0],K[Z+0],J[ie+0],fe,Ee)}}function uo(h,x,C){return C==0?h==0?x==0?6:5:x==0?4:0:C}function ed(h,x,C,T,V){switch(h>>>30){case 3:Ql(x,C,T,V,0);break;case 2:vs(x,C,T,V);break;case 1:br(x,C,T,V)}}function va(h,x){var C,T,V=x.M,K=x.Nb,Z=h.oc,J=h.pc+40,ie=h.oc,fe=h.pc+584,Ee=h.oc,$e=h.pc+600;for(C=0;16>C;++C)Z[J+32*C-1]=129;for(C=0;8>C;++C)ie[fe+32*C-1]=129,Ee[$e+32*C-1]=129;for(0<V?Z[J-1-32]=ie[fe-1-32]=Ee[$e-1-32]=129:(a(Z,J-32-1,127,21),a(ie,fe-32-1,127,9),a(Ee,$e-32-1,127,9)),T=0;T<h.za;++T){var he=x.ya[x.aa+T];if(0<T){for(C=-1;16>C;++C)r(Z,J+32*C-4,Z,J+32*C+12,4);for(C=-1;8>C;++C)r(ie,fe+32*C-4,ie,fe+32*C+4,4),r(Ee,$e+32*C-4,Ee,$e+32*C+4,4)}var Fe=h.Gd,ze=h.Hd+T,st=he.ad,We=he.Hc;if(0<V&&(r(Z,J-32,Fe[ze].y,0,16),r(ie,fe-32,Fe[ze].f,0,8),r(Ee,$e-32,Fe[ze].ea,0,8)),he.Za){var tt=Z,rt=J-32+16;for(0<V&&(T>=h.za-1?a(tt,rt,Fe[ze].y[15],4):r(tt,rt,Fe[ze+1].y,0,4)),C=0;4>C;C++)tt[rt+128+C]=tt[rt+256+C]=tt[rt+384+C]=tt[rt+0+C];for(C=0;16>C;++C,We<<=2)tt=Z,rt=J+kf[C],Ia[he.Ob[C]](tt,rt),ed(We,st,16*+C,tt,rt)}else if(tt=uo(T,V,he.Ob[0]),Gi[tt](Z,J),We!=0)for(C=0;16>C;++C,We<<=2)ed(We,st,16*+C,Z,J+kf[C]);for(C=he.Gc,tt=uo(T,V,he.Dd),ta[tt](ie,fe),ta[tt](Ee,$e),We=st,tt=ie,rt=fe,255&(he=0|C)&&(170&he?ea(We,256,tt,rt):Mr(We,256,tt,rt)),he=Ee,We=$e,255&(C>>=8)&&(170&C?ea(st,320,he,We):Mr(st,320,he,We)),V<h.Ub-1&&(r(Fe[ze].y,0,Z,J+480,16),r(Fe[ze].f,0,ie,fe+224,8),r(Fe[ze].ea,0,Ee,$e+224,8)),C=8*K*h.B,Fe=h.sa,ze=h.ta+16*T+16*K*h.R,st=h.qa,he=h.ra+8*T+C,We=h.Ha,tt=h.Ia+8*T+C,C=0;16>C;++C)r(Fe,ze+C*h.R,Z,J+32*C,16);for(C=0;8>C;++C)r(st,he+C*h.B,ie,fe+32*C,8),r(We,tt+C*h.B,Ee,$e+32*C,8)}}function dl(h,x,C,T,V,K,Z,J,ie){var fe=[0],Ee=[0],$e=0,he=ie!=null?ie.kd:0,Fe=ie??new Je;if(h==null||12>C)return 7;Fe.data=h,Fe.w=x,Fe.ha=C,x=[x],C=[C],Fe.gb=[Fe.gb];e:{var ze=x,st=C,We=Fe.gb;if(e(h!=null),e(st!=null),e(We!=null),We[0]=0,12<=st[0]&&!n(h,ze[0],"RIFF")){if(n(h,ze[0]+8,"WEBP")){We=3;break e}var tt=Dt(h,ze[0]+4);if(12>tt||4294967286<tt){We=3;break e}if(he&&tt>st[0]-8){We=7;break e}We[0]=tt,ze[0]+=12,st[0]-=12}We=0}if(We!=0)return We;for(tt=0<Fe.gb[0],C=C[0];;){e:{var rt=h;st=x,We=C;var lt=fe,ut=Ee,fn=ze=[0];if((nn=$e=[$e])[0]=0,8>We[0])We=7;else{if(!n(rt,st[0],"VP8X")){if(Dt(rt,st[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Qt=Dt(rt,st[0]+8),Un=1+vt(rt,st[0]+12);if(2147483648<=Un*(rt=1+vt(rt,st[0]+15))){We=3;break e}fn!=null&&(fn[0]=Qt),lt!=null&&(lt[0]=Un),ut!=null&&(ut[0]=rt),st[0]+=18,We[0]-=18,nn[0]=1}We=0}}if($e=$e[0],ze=ze[0],We!=0)return We;if(st=!!(2&ze),!tt&&$e)return 3;if(K!=null&&(K[0]=!!(16&ze)),Z!=null&&(Z[0]=st),J!=null&&(J[0]=0),Z=fe[0],ze=Ee[0],$e&&st&&ie==null){We=0;break}if(4>C){We=7;break}if(tt&&$e||!tt&&!$e&&!n(h,x[0],"ALPH")){C=[C],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{Qt=h,We=x,tt=C;var nn=Fe.gb;lt=Fe.na,ut=Fe.P,fn=Fe.Sa,Un=22,e(Qt!=null),e(tt!=null),rt=We[0];var or=tt[0];for(e(lt!=null),e(fn!=null),lt[0]=null,ut[0]=null,fn[0]=0;;){if(We[0]=rt,tt[0]=or,8>or){We=7;break e}var ys=Dt(Qt,rt+4);if(4294967286<ys){We=3;break e}var $n=8+ys+1&-2;if(Un+=$n,0<nn&&Un>nn){We=3;break e}if(!n(Qt,rt,"VP8 ")||!n(Qt,rt,"VP8L")){We=0;break e}if(or[0]<$n){We=7;break e}n(Qt,rt,"ALPH")||(lt[0]=Qt,ut[0]=rt+8,fn[0]=ys),rt+=$n,or-=$n}}if(C=C[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],We!=0)break}C=[C],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(nn=h,We=x,tt=C,lt=Fe.gb[0],ut=Fe.Ja,fn=Fe.xa,Qt=We[0],rt=!n(nn,Qt,"VP8 "),Un=!n(nn,Qt,"VP8L"),e(nn!=null),e(tt!=null),e(ut!=null),e(fn!=null),8>tt[0])We=7;else{if(rt||Un){if(nn=Dt(nn,Qt+4),12<=lt&&nn>lt-12){We=3;break e}if(he&&nn>tt[0]-8){We=7;break e}ut[0]=nn,We[0]+=8,tt[0]-=8,fn[0]=Un}else fn[0]=5<=tt[0]&&nn[Qt+0]==47&&!(nn[Qt+4]>>5),ut[0]=tt[0];We=0}if(C=C[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],x=x[0],We!=0)break;if(4294967286<Fe.Ja)return 3;if(J==null||st||(J[0]=Fe.xa?2:1),Z=[Z],ze=[ze],Fe.xa){if(5>C){We=7;break}J=Z,he=ze,st=K,h==null||5>C?h=0:5<=C&&h[x+0]==47&&!(h[x+4]>>5)?(tt=[0],nn=[0],lt=[0],ge(ut=new E,h,x,C),Ss(ut,tt,nn,lt)?(J!=null&&(J[0]=tt[0]),he!=null&&(he[0]=nn[0]),st!=null&&(st[0]=lt[0]),h=1):h=0):h=0}else{if(10>C){We=7;break}J=ze,h==null||10>C||!Tt(h,x+3,C-3)?h=0:(he=h[x+0]|h[x+1]<<8|h[x+2]<<16,st=16383&(h[x+7]<<8|h[x+6]),h=16383&(h[x+9]<<8|h[x+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=Fe.Ja||!st||!h?h=0:(Z&&(Z[0]=st),J&&(J[0]=h),h=1))}if(!h||(Z=Z[0],ze=ze[0],$e&&(fe[0]!=Z||Ee[0]!=ze)))return 3;ie!=null&&(ie[0]=Fe,ie.offset=x-ie.w,e(4294967286>x-ie.w),e(ie.offset==ie.ha-C));break}return We==0||We==7&&$e&&ie==null?(K!=null&&(K[0]|=Fe.na!=null&&0<Fe.na.length),T!=null&&(T[0]=Z),V!=null&&(V[0]=ze),0):We}function xc(h,x,C){var T=x.width,V=x.height,K=0,Z=0,J=T,ie=V;if(x.Da=h!=null&&0<h.Da,x.Da&&(J=h.cd,ie=h.bd,K=h.v,Z=h.j,11>C||(K&=-2,Z&=-2),0>K||0>Z||0>=J||0>=ie||K+J>T||Z+ie>V))return 0;if(x.v=K,x.j=Z,x.va=K+J,x.o=Z+ie,x.U=J,x.T=ie,x.da=h!=null&&0<h.da,x.da){if(!X(J,ie,C=[h.ib],K=[h.hb]))return 0;x.ib=C[0],x.hb=K[0]}return x.ob=h!=null&&h.ob,x.Kb=h==null||!h.Sd,x.da&&(x.ob=x.ib<3*T/4&&x.hb<3*V/4,x.Kb=0),1}function yc(h){if(h==null)return 2;if(11>h.S){var x=h.f.RGBA;x.fb+=(h.height-1)*x.A,x.A=-x.A}else x=h.f.kb,h=h.height,x.O+=(h-1)*x.fa,x.fa=-x.fa,x.N+=(h-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(h-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(h-1)*x.lb,x.lb=-x.lb);return 0}function Po(h,x,C,T){if(T==null||0>=h||0>=x)return 2;if(C!=null){if(C.Da){var V=C.cd,K=C.bd,Z=-2&C.v,J=-2&C.j;if(0>Z||0>J||0>=V||0>=K||Z+V>h||J+K>x)return 2;h=V,x=K}if(C.da){if(!X(h,x,V=[C.ib],K=[C.hb]))return 2;h=V[0],x=K[0]}}T.width=h,T.height=x;e:{var ie=T.width,fe=T.height;if(h=T.S,0>=ie||0>=fe||!(h>=rd&&13>h))h=2;else{if(0>=T.Rd&&T.sd==null){Z=K=V=x=0;var Ee=(J=ie*Cu[h])*fe;if(11>h||(K=(fe+1)/2*(x=(ie+1)/2),h==12&&(Z=(V=ie)*fe)),(fe=o(Ee+2*K+Z))==null){h=1;break e}T.sd=fe,11>h?((ie=T.f.RGBA).eb=fe,ie.fb=0,ie.A=J,ie.size=Ee):((ie=T.f.kb).y=fe,ie.O=0,ie.fa=J,ie.Fd=Ee,ie.f=fe,ie.N=0+Ee,ie.Ab=x,ie.Cd=K,ie.ea=fe,ie.W=0+Ee+K,ie.Db=x,ie.Ed=K,h==12&&(ie.F=fe,ie.J=0+Ee+2*K),ie.Tc=Z,ie.lb=V)}if(x=1,V=T.S,K=T.width,Z=T.height,V>=rd&&13>V)if(11>V)h=T.f.RGBA,x&=(J=Math.abs(h.A))*(Z-1)+K<=h.size,x&=J>=K*Cu[V],x&=h.eb!=null;else{h=T.f.kb,J=(K+1)/2,Ee=(Z+1)/2,ie=Math.abs(h.fa),fe=Math.abs(h.Ab);var $e=Math.abs(h.Db),he=Math.abs(h.lb),Fe=he*(Z-1)+K;x&=ie*(Z-1)+K<=h.Fd,x&=fe*(Ee-1)+J<=h.Cd,x=(x&=$e*(Ee-1)+J<=h.Ed)&ie>=K&fe>=J&$e>=J,x&=h.y!=null,x&=h.f!=null,x&=h.ea!=null,V==12&&(x&=he>=K,x&=Fe<=h.Tc,x&=h.F!=null)}else x=0;h=x?0:2}}return h!=0||C!=null&&C.fd&&(h=yc(T)),h}var Ra=64,xa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ya=24,fl=32,fo=8,ko=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];re("Predictor0","PredictorAdd0"),Q.Predictor0=function(){return 4278190080},Q.Predictor1=function(h){return h},Q.Predictor2=function(h,x,C){return x[C+0]},Q.Predictor3=function(h,x,C){return x[C+1]},Q.Predictor4=function(h,x,C){return x[C-1]},Q.Predictor5=function(h,x,C){return H(H(h,x[C+1]),x[C+0])},Q.Predictor6=function(h,x,C){return H(h,x[C-1])},Q.Predictor7=function(h,x,C){return H(h,x[C+0])},Q.Predictor8=function(h,x,C){return H(x[C-1],x[C+0])},Q.Predictor9=function(h,x,C){return H(x[C+0],x[C+1])},Q.Predictor10=function(h,x,C){return H(H(h,x[C-1]),H(x[C+0],x[C+1]))},Q.Predictor11=function(h,x,C){var T=x[C+0];return 0>=ke(T>>24&255,h>>24&255,(x=x[C-1])>>24&255)+ke(T>>16&255,h>>16&255,x>>16&255)+ke(T>>8&255,h>>8&255,x>>8&255)+ke(255&T,255&h,255&x)?T:h},Q.Predictor12=function(h,x,C){var T=x[C+0];return(je((h>>24&255)+(T>>24&255)-((x=x[C-1])>>24&255))<<24|je((h>>16&255)+(T>>16&255)-(x>>16&255))<<16|je((h>>8&255)+(T>>8&255)-(x>>8&255))<<8|je((255&h)+(255&T)-(255&x)))>>>0},Q.Predictor13=function(h,x,C){var T=x[C-1];return(we((h=H(h,x[C+0]))>>24&255,T>>24&255)<<24|we(h>>16&255,T>>16&255)<<16|we(h>>8&255,T>>8&255)<<8|we(255&h,255&T))>>>0};var To=Q.PredictorAdd0;Q.PredictorAdd1=Ve,re("Predictor2","PredictorAdd2"),re("Predictor3","PredictorAdd3"),re("Predictor4","PredictorAdd4"),re("Predictor5","PredictorAdd5"),re("Predictor6","PredictorAdd6"),re("Predictor7","PredictorAdd7"),re("Predictor8","PredictorAdd8"),re("Predictor9","PredictorAdd9"),re("Predictor10","PredictorAdd10"),re("Predictor11","PredictorAdd11"),re("Predictor12","PredictorAdd12"),re("Predictor13","PredictorAdd13");var ho=Q.PredictorAdd2;kt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var js,Hl=Q.ColorIndexInverseTransform,po=Q.MapARGB,Ga=Q.VP8LColorIndexInverseTransformAlpha,Wl=Q.MapAlpha,Gl=Q.VP8LPredictorsAdd=[];Gl.length=16,(Q.VP8LPredictors=[]).length=16,(Q.VP8LPredictorsAdd_C=[]).length=16,(Q.VP8LPredictors_C=[]).length=16;var bc,wc,Eo,hl,pl,Kl,ml,Ql,vs,ea,br,Mr,xs,Bs,Ka,mu,Nc,Lo,td,Sc,nd,vf,gu,Zl,Yl,xf,vu,yf,bf=o(511),wf=o(2041),Nf=o(225),Sf=o(767),jf=0,mo=wf,jc=Nf,Wi=Sf,Da=bf,rd=0,gl=1,Bh=2,xu=3,yu=4,zr=5,sd=6,Cc=7,Xl=8,bu=9,wu=10,Nu=[2,3,7],id=[3,3,11],Jl=[280,256,256,256,40],qh=[0,1,1,1,0],lg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Uh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ad=8,_c=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Su=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ec=null,Cf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_f=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$h=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ug=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Af=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Gi=[],Ia=[],ta=[],go=1,Ac=2,Pi=[],na=[];Vi("UpsampleRgbLinePair",ul,3),Vi("UpsampleBgrLinePair",bi,3),Vi("UpsampleRgbaLinePair",Hi,4),Vi("UpsampleBgraLinePair",pu,4),Vi("UpsampleArgbLinePair",hu,4),Vi("UpsampleRgba4444LinePair",Vl,2),Vi("UpsampleRgb565LinePair",$l,2);var fg=Q.UpsampleRgbLinePair,hg=Q.UpsampleBgrLinePair,vl=Q.UpsampleRgbaLinePair,Pc=Q.UpsampleBgraLinePair,tc=Q.UpsampleArgbLinePair,ju=Q.UpsampleRgba4444LinePair,Pf=Q.UpsampleRgb565LinePair,Ro=16,Qa=1<<Ro-1,Lr=-227,Br=482,xl=6,wi=0,ra=o(256),nc=o(256),kc=o(256),sa=o(256),od=o(Br-Lr),Vh=o(Br-Lr);Wa("YuvToRgbRow",ul,3),Wa("YuvToBgrRow",bi,3),Wa("YuvToRgbaRow",Hi,4),Wa("YuvToBgraRow",pu,4),Wa("YuvToArgbRow",hu,4),Wa("YuvToRgba4444Row",Vl,2),Wa("YuvToRgb565Row",$l,2);var kf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rc=[0,2,8],Hh=[8,7,6,4,4,2,2,2,1,1,1,1],Do=1;this.WebPDecodeRGBA=function(h,x,C,T,V){var K=gl,Z=new qe,J=new vn;Z.ba=J,J.S=K,J.width=[J.width],J.height=[J.height];var ie=J.width,fe=J.height,Ee=new Yt;if(Ee==null||h==null)var $e=2;else e(Ee!=null),$e=dl(h,x,C,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if($e!=0?ie=0:(ie!=null&&(ie[0]=Ee.width[0]),fe!=null&&(fe[0]=Ee.height[0]),ie=1),ie){J.width=J.width[0],J.height=J.height[0],T!=null&&(T[0]=J.width),V!=null&&(V[0]=J.height);e:{if(T=new dt,(V=new Je).data=h,V.w=x,V.ha=C,V.kd=1,x=[0],e(V!=null),((h=dl(V.data,V.w,V.ha,null,null,null,x,null,V))==0||h==7)&&x[0]&&(h=4),(x=h)==0){if(e(Z!=null),T.data=V.data,T.w=V.w+V.offset,T.ha=V.ha-V.offset,T.put=on,T.ac=ur,T.bc=Rs,T.ma=Z,V.xa){if((h=Fs())==null){Z=1;break e}if((function(he,Fe){var ze=[0],st=[0],We=[0];t:for(;;){if(he==null)return 0;if(Fe==null)return he.a=2,0;if(he.l=Fe,he.a=0,ge(he.m,Fe.data,Fe.w,Fe.ha),!Ss(he.m,ze,st,We)){he.a=3;break t}if(he.xb=Ac,Fe.width=ze[0],Fe.height=st[0],!dr(ze[0],st[0],1,he,null))break t;return 1}return e(he.a!=0),0})(h,T)){if(T=(x=Po(T.width,T.height,Z.Oa,Z.ba))==0){t:{T=h;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((C=T.l)!=null),e((V=C.ma)!=null),T.xb!=0){if(T.ca=V.ba,T.tb=V.tb,e(T.ca!=null),!xc(V.Oa,C,xu)){T.a=2;break n}if(!ls(T,C.width)||C.da)break n;if((C.da||Xe(T.ca.S))&&Gs(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&Gs()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!le(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Is(T,T.V,T.Ba,T.c,T.i,C.o,Qr))break n;V.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(x=h.a)}else x=h.a}else{if((h=new Lt)==null){Z=1;break e}if(h.Fa=V.na,h.P=V.P,h.qc=V.Sa,St(h,T)){if((x=Po(T.width,T.height,Z.Oa,Z.ba))==0){if(h.Aa=0,C=Z.Oa,e((V=h)!=null),C!=null){if(0<(ie=0>(ie=C.Md)?0:100<ie?255:255*ie/100)){for(fe=Ee=0;4>fe;++fe)12>($e=V.pb[fe]).lc&&($e.ia=ie*Hh[0>$e.lc?0:$e.lc]>>3),Ee|=$e.ia;Ee&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=C.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(he,Fe){if(he==null)return 0;if(Fe==null)return mt(he,2,"NULL VP8Io parameter in VP8Decode().");if(!he.cb&&!St(he,Fe))return 0;if(e(he.cb),Fe.ac==null||Fe.ac(Fe)){Fe.ob&&(he.L=0);var ze=rc[he.L];if(he.L==2?(he.yb=0,he.zb=0):(he.yb=Fe.v-ze>>4,he.zb=Fe.j-ze>>4,0>he.yb&&(he.yb=0),0>he.zb&&(he.zb=0)),he.Va=Fe.o+15+ze>>4,he.Hb=Fe.va+15+ze>>4,he.Hb>he.za&&(he.Hb=he.za),he.Va>he.Ub&&(he.Va=he.Ub),0<he.L){var st=he.ed;for(ze=0;4>ze;++ze){var We;if(he.Qa.Cb){var tt=he.Qa.Lb[ze];he.Qa.Fb||(tt+=st.Tb)}else tt=st.Tb;for(We=0;1>=We;++We){var rt=he.gd[ze][We],lt=tt;if(st.Pc&&(lt+=st.vd[0],We&&(lt+=st.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var ut=lt;0<st.wb&&(ut=4<st.wb?ut>>2:ut>>1)>9-st.wb&&(ut=9-st.wb),1>ut&&(ut=1),rt.dd=ut,rt.tc=2*lt+ut,rt.ld=40<=lt?2:15<=lt?1:0}else rt.tc=0;rt.La=We}}}ze=0}else mt(he,6,"Frame setup failed"),ze=he.a;if(ze=ze==0){if(ze){he.$c=0,0<he.Aa||(he.Ic=Do);t:{ze=he.Ic,st=4*(ut=he.za);var fn=32*ut,Qt=ut+1,Un=0<he.L?ut*(0<he.Aa?2:1):0,nn=(he.Aa==2?2:1)*ut;if((rt=st+832+(We=3*(16*ze+rc[he.L])/2*fn)+(tt=he.Fa!=null&&0<he.Fa.length?he.Kc.c*he.Kc.i:0))!=rt)ze=0;else{if(rt>he.Vb){if(he.Vb=0,he.Ec=o(rt),he.Fc=0,he.Ec==null){ze=mt(he,1,"no memory during frame initialization.");break t}he.Vb=rt}rt=he.Ec,lt=he.Fc,he.Ac=rt,he.Bc=lt,lt+=st,he.Gd=u(fn,it),he.Hd=0,he.rb=u(Qt+1,gn),he.sb=1,he.wa=Un?u(Un,Nn):null,he.Y=0,he.D.Nb=0,he.D.wa=he.wa,he.D.Y=he.Y,0<he.Aa&&(he.D.Y+=ut),e(!0),he.oc=rt,he.pc=lt,lt+=832,he.ya=u(nn,Xt),he.aa=0,he.D.ya=he.ya,he.D.aa=he.aa,he.Aa==2&&(he.D.aa+=ut),he.R=16*ut,he.B=8*ut,ut=(fn=rc[he.L])*he.R,fn=fn/2*he.B,he.sa=rt,he.ta=lt+ut,he.qa=he.sa,he.ra=he.ta+16*ze*he.R+fn,he.Ha=he.qa,he.Ia=he.ra+8*ze*he.B+fn,he.$c=0,lt+=We,he.mb=tt?rt:null,he.nb=tt?lt:null,e(lt+tt<=he.Fc+he.Vb),Jt(he),a(he.Ac,he.Bc,0,st),ze=1}}if(ze){if(Fe.ka=0,Fe.y=he.sa,Fe.O=he.ta,Fe.f=he.qa,Fe.N=he.ra,Fe.ea=he.Ha,Fe.Vd=he.Ia,Fe.fa=he.R,Fe.Rc=he.B,Fe.F=null,Fe.J=0,!jf){for(ze=-255;255>=ze;++ze)bf[255+ze]=0>ze?-ze:ze;for(ze=-1020;1020>=ze;++ze)wf[1020+ze]=-128>ze?-128:127<ze?127:ze;for(ze=-112;112>=ze;++ze)Nf[112+ze]=-16>ze?-16:15<ze?15:ze;for(ze=-255;510>=ze;++ze)Sf[255+ze]=0>ze?0:255<ze?255:ze;jf=1}ml=Te,Ql=dn,ea=q,br=ue,Mr=oe,vs=Cr,xs=ui,Bs=Ji,Ka=$,mu=pe,Nc=al,Lo=w,td=Pe,Sc=Be,nd=Ea,vf=Ms,gu=yi,Zl=ci,Ia[0]=il,Ia[1]=At,Ia[2]=qn,Ia[3]=Bl,Ia[4]=xi,Ia[5]=Ha,Ia[6]=ga,Ia[7]=Ir,Ia[8]=Ui,Ia[9]=ds,Gi[0]=cs,Gi[1]=Gt,Gi[2]=hr,Gi[3]=Xr,Gi[4]=Dr,Gi[5]=us,Gi[6]=Xi,ta[0]=_o,ta[1]=An,ta[2]=Os,ta[3]=Co,ta[4]=Ul,ta[5]=ql,ta[6]=co,ze=1}else ze=0}ze&&(ze=(function(or,ys){for(or.M=0;or.M<or.Va;++or.M){var $n,Zt=or.Jc[or.M&or.Xb],Rt=or.m,Cs=or;for($n=0;$n<Cs.za;++$n){var kn=Rt,ar=Cs,Gr=ar.Ac,di=ar.Bc+4*$n,qs=ar.zc,fs=ar.ya[ar.aa+$n];if(ar.Qa.Bb?fs.$b=Me(kn,ar.Pa.jb[0])?2+Me(kn,ar.Pa.jb[2]):Me(kn,ar.Pa.jb[1]):fs.$b=0,ar.kc&&(fs.Ad=Me(kn,ar.Bd)),fs.Za=!Me(kn,145)+0,fs.Za){var Ks=fs.Ob,fi=0;for(ar=0;4>ar;++ar){var rs,fr=qs[0+ar];for(rs=0;4>rs;++rs){fr=ug[Gr[di+rs]][fr];for(var wr=zh[Me(kn,fr[0])];0<wr;)wr=zh[2*wr+Me(kn,fr[wr])];fr=-wr,Gr[di+rs]=fr}r(Ks,fi,Gr,di,4),fi+=4,qs[0+ar]=fr}}else fr=Me(kn,156)?Me(kn,128)?1:3:Me(kn,163)?2:0,fs.Ob[0]=fr,a(Gr,di,fr,4),a(qs,0,fr,4);fs.Dd=Me(kn,142)?Me(kn,114)?Me(kn,183)?1:3:2:0}if(Cs.m.Ka)return mt(or,7,"Premature end-of-partition0 encountered.");for(;or.ja<or.za;++or.ja){if(Cs=Zt,kn=(Rt=or).rb[Rt.sb-1],Gr=Rt.rb[Rt.sb+Rt.ja],$n=Rt.ya[Rt.aa+Rt.ja],di=Rt.kc?$n.Ad:0)kn.la=Gr.la=0,$n.Za||(kn.Na=Gr.Na=0),$n.Hc=0,$n.Gc=0,$n.ia=0;else{var ss,Nr;if(kn=Gr,Gr=Cs,di=Rt.Pa.Xc,qs=Rt.ya[Rt.aa+Rt.ja],fs=Rt.pb[qs.$b],ar=qs.ad,Ks=0,fi=Rt.rb[Rt.sb-1],fr=rs=0,a(ar,Ks,0,384),qs.Za)var bs=0,ws=di[3];else{wr=o(16);var $r=kn.Na+fi.Na;if($r=ec(Gr,di[1],$r,fs.Eb,0,wr,0),kn.Na=fi.Na=(0<$r)+0,1<$r)ml(wr,0,ar,Ks);else{var ki=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)ar[Ks+wr]=ki}bs=1,ws=di[0]}var qr=15&kn.la,Vr=15&fi.la;for(wr=0;4>wr;++wr){var Us=1&Vr;for(ki=Nr=0;4>ki;++ki)qr=qr>>1|(Us=($r=ec(Gr,ws,$r=Us+(1&qr),fs.Sc,bs,ar,Ks))>bs)<<7,Nr=Nr<<2|(3<$r?3:1<$r?2:ar[Ks+0]!=0),Ks+=16;qr>>=4,Vr=Vr>>1|Us<<7,rs=(rs<<8|Nr)>>>0}for(ws=qr,bs=Vr>>4,ss=0;4>ss;ss+=2){for(Nr=0,qr=kn.la>>4+ss,Vr=fi.la>>4+ss,wr=0;2>wr;++wr){for(Us=1&Vr,ki=0;2>ki;++ki)$r=Us+(1&qr),qr=qr>>1|(Us=0<($r=ec(Gr,di[2],$r,fs.Qc,0,ar,Ks)))<<3,Nr=Nr<<2|(3<$r?3:1<$r?2:ar[Ks+0]!=0),Ks+=16;qr>>=2,Vr=Vr>>1|Us<<5}fr|=Nr<<4*ss,ws|=qr<<4<<ss,bs|=(240&Vr)<<ss}kn.la=ws,fi.la=bs,qs.Hc=rs,qs.Gc=fr,qs.ia=43690&fr?0:fs.ia,di=!(rs|fr)}if(0<Rt.L&&(Rt.wa[Rt.Y+Rt.ja]=Rt.gd[$n.$b][$n.Za],Rt.wa[Rt.Y+Rt.ja].La|=!di),Cs.Ka)return mt(or,7,"Premature end-of-file encountered.")}if(Jt(or),Rt=ys,Cs=1,$n=(Zt=or).D,kn=0<Zt.L&&Zt.M>=Zt.zb&&Zt.M<=Zt.Va,Zt.Aa==0)t:{if($n.M=Zt.M,$n.uc=kn,va(Zt,$n),Cs=1,$n=(Nr=Zt.D).Nb,kn=(fr=rc[Zt.L])*Zt.R,Gr=fr/2*Zt.B,wr=16*$n*Zt.R,ki=8*$n*Zt.B,di=Zt.sa,qs=Zt.ta-kn+wr,fs=Zt.qa,ar=Zt.ra-Gr+ki,Ks=Zt.Ha,fi=Zt.Ia-Gr+ki,Vr=(qr=Nr.M)==0,rs=qr>=Zt.Va-1,Zt.Aa==2&&va(Zt,Nr),Nr.uc)for(Us=($r=Zt).D.M,e($r.D.uc),Nr=$r.yb;Nr<$r.Hb;++Nr){bs=Nr,ws=Us;var Ni=(ia=(Ps=$r).D).Nb;ss=Ps.R;var ia=ia.wa[ia.Y+bs],_s=Ps.sa,As=Ps.ta+16*Ni*ss+16*bs,Ti=ia.dd,Hr=ia.tc;if(Hr!=0)if(e(3<=Hr),Ps.L==1)0<bs&&vf(_s,As,ss,Hr+4),ia.La&&Zl(_s,As,ss,Hr),0<ws&&nd(_s,As,ss,Hr+4),ia.La&&gu(_s,As,ss,Hr);else{var Ei=Ps.B,Fa=Ps.qa,Za=Ps.ra+8*Ni*Ei+8*bs,hi=Ps.Ha,Ps=Ps.Ia+8*Ni*Ei+8*bs;Ni=ia.ld,0<bs&&(Bs(_s,As,ss,Hr+4,Ti,Ni),mu(Fa,Za,hi,Ps,Ei,Hr+4,Ti,Ni)),ia.La&&(Lo(_s,As,ss,Hr,Ti,Ni),Sc(Fa,Za,hi,Ps,Ei,Hr,Ti,Ni)),0<ws&&(xs(_s,As,ss,Hr+4,Ti,Ni),Ka(Fa,Za,hi,Ps,Ei,Hr+4,Ti,Ni)),ia.La&&(Nc(_s,As,ss,Hr,Ti,Ni),td(Fa,Za,hi,Ps,Ei,Hr,Ti,Ni))}}if(Zt.ia&&alert("todo:DitherRow"),Rt.put!=null){if(Nr=16*qr,qr=16*(qr+1),Vr?(Rt.y=Zt.sa,Rt.O=Zt.ta+wr,Rt.f=Zt.qa,Rt.N=Zt.ra+ki,Rt.ea=Zt.Ha,Rt.W=Zt.Ia+ki):(Nr-=fr,Rt.y=di,Rt.O=qs,Rt.f=fs,Rt.N=ar,Rt.ea=Ks,Rt.W=fi),rs||(qr-=fr),qr>Rt.o&&(qr=Rt.o),Rt.F=null,Rt.J=null,Zt.Fa!=null&&0<Zt.Fa.length&&Nr<qr&&(Rt.J=Hn(Zt,Rt,Nr,qr-Nr),Rt.F=Zt.mb,Rt.F==null&&Rt.F.length==0)){Cs=mt(Zt,3,"Could not decode alpha data.");break t}Nr<Rt.j&&(fr=Rt.j-Nr,Nr=Rt.j,e(!(1&fr)),Rt.O+=Zt.R*fr,Rt.N+=Zt.B*(fr>>1),Rt.W+=Zt.B*(fr>>1),Rt.F!=null&&(Rt.J+=Rt.width*fr)),Nr<qr&&(Rt.O+=Rt.v,Rt.N+=Rt.v>>1,Rt.W+=Rt.v>>1,Rt.F!=null&&(Rt.J+=Rt.v),Rt.ka=Nr-Rt.j,Rt.U=Rt.va-Rt.v,Rt.T=qr-Nr,Cs=Rt.put(Rt))}$n+1!=Zt.Ic||rs||(r(Zt.sa,Zt.ta-kn,di,qs+16*Zt.R,kn),r(Zt.qa,Zt.ra-Gr,fs,ar+8*Zt.B,Gr),r(Zt.Ha,Zt.Ia-Gr,Ks,fi+8*Zt.B,Gr))}if(!Cs)return mt(or,6,"Output aborted.")}return 1})(he,Fe)),Fe.bc!=null&&Fe.bc(Fe),ze&=1}return ze?(he.cb=0,ze):0})(h,T)||(x=h.a)}}else x=h.a}x==0&&Z.Oa!=null&&Z.Oa.fd&&(x=yc(Z.ba))}Z=x}K=Z!=0?null:11>K?J.f.RGBA.eb:J.f.kb.y}else K=null;return K};var Cu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(Q,de){for(var F="",L=0;L<4;L++)F+=String.fromCharCode(Q[de++]);return F}function m(Q,de){return Q[de+0]|Q[de+1]<<8}function b(Q,de){return(Q[de+0]|Q[de+1]<<8|Q[de+2]<<16)>>>0}function j(Q,de){return(Q[de+0]|Q[de+1]<<8|Q[de+2]<<16|Q[de+3]<<24)>>>0}new f;var y=[0],D=[0],S=[],P=new f,_=t,I=(function(Q,de){var F={},L=0,z=!1,Y=0,Ce=0;if(F.frames=[],!(function(O,E){for(var ne=0;ne<4;ne++)if(O[E+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(Q,de)){for(j(Q,de+=4),de+=8;de<Q.length;){var _e=p(Q,de),Ae=j(Q,de+=4);de+=4;var ce=Ae+(1&Ae);switch(_e){case"VP8 ":case"VP8L":F.frames[L]===void 0&&(F.frames[L]={}),(se=F.frames[L]).src_off=z?Ce:de-8,se.src_size=Y+Ae+8,L++,z&&(z=!1,Y=0,Ce=0);break;case"VP8X":(se=F.header={}).feature_flags=Q[de];var ge=de+4;se.canvas_width=1+b(Q,ge),ge+=3,se.canvas_height=1+b(Q,ge),ge+=3;break;case"ALPH":z=!0,Y=ce+8,Ce=de-8;break;case"ANIM":(se=F.header).bgcolor=j(Q,de),ge=de+4,se.loop_count=m(Q,ge),ge+=2;break;case"ANMF":var De,se;(se=F.frames[L]={}).offset_x=2*b(Q,de),de+=3,se.offset_y=2*b(Q,de),de+=3,se.width=1+b(Q,de),de+=3,se.height=1+b(Q,de),de+=3,se.duration=b(Q,de),de+=3,De=Q[de++],se.dispose=1&De,se.blend=De>>1&1}_e!="ANMF"&&(de+=ce)}return F}})(_,0);I.response=_,I.rgbaoutput=!0,I.dataurl=!1;var v=I.header?I.header:null,B=I.frames?I.frames:null;if(v){v.loop_counter=v.loop_count,y=[v.canvas_height],D=[v.canvas_width];for(var ee=0;ee<B.length&&B[ee].blend!=0;ee++);}var ae=B[0],W=P.WebPDecodeRGBA(_,ae.src_off,ae.src_size,D,y);ae.rgba=W,ae.imgwidth=D[0],ae.imgheight=y[0];for(var te=0;te<D[0]*y[0]*4;te++)S[te]=W[te];return this.width=D,this.height=y,this.data=S,this}(function(t){var e,n,r,a,o,u,c,f,p,m=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new f,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new u,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new u,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,p=new m}]);var b=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=O;Object.defineProperty(this,"pdf",{get:function(){return E}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(le){ne=!!le}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(le){me=!!le}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(le){isNaN(le)||(ye=le)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(le){isNaN(le)||(be=le)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(le){var xt;typeof le=="number"?xt=[le,le,le,le]:((xt=new Array(4))[0]=le[0],xt[1]=le.length>=2?le[1]:xt[0],xt[2]=le.length>=3?le[2]:xt[0],xt[3]=le.length>=4?le[3]:xt[1]),p.margin=xt}});var Re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Re},set:function(le){Re=le}});var Ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ie},set:function(le){Ie=le}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(le){Me=le}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(le){le instanceof m&&(p=le)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(le){p.path=le}});var Qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qe},set:function(le){Qe=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var xt;xt=j(le),this.ctx.fillStyle=xt.style,this.ctx.isFillTransparent=xt.a===0,this.ctx.fillOpacity=xt.a,this.pdf.setFillColor(xt.r,xt.g,xt.b,{a:xt.a}),this.pdf.setTextColor(xt.r,xt.g,xt.b,{a:xt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var xt=j(le);this.ctx.strokeStyle=xt.style,this.ctx.isStrokeTransparent=xt.a===0,this.ctx.strokeOpacity=xt.a,xt.a===0?this.pdf.setDrawColor(255,255,255):(xt.a,this.pdf.setDrawColor(xt.r,xt.g,xt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var ht=null,vt=null,Dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Dt},set:function(le){ht=null,vt=null,Dt=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var xt;if(this.ctx.font=le,(xt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(le))!==null){var xe=xt[1];xt[2];var X=xt[3],M=xt[4];xt[5];var ve=xt[6],re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(M)[2];M=Math.floor(re==="px"?parseFloat(M)*this.pdf.internal.scaleFactor:re==="em"?parseFloat(M)*this.pdf.getFontSize():parseFloat(M)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(M);var R=(function(kt){var cr,yn,Vt=[],Mt=kt.trim();if(Mt==="")return q0;if(Mt in o5)return[o5[Mt]];for(;Mt!=="";){switch(yn=null,cr=(Mt=c5(Mt)).charAt(0)){case'"':case"'":yn=LI(Mt.substring(1),cr);break;default:yn=RI(Mt)}if(yn===null||(Vt.push(yn[0]),(Mt=c5(yn[1]))!==""&&Mt.charAt(0)!==","))return q0;Mt=Mt.replace(/^,/,"")}return Vt})(ve);if(this.fontFaces){var H=(function(kt,cr){var yn=kt.getFontList(),Vt=JSON.stringify(yn);if(ht===null||vt!==Vt){var Mt=(function(tn){var Ke=[];return Object.keys(tn).forEach(function(ot){tn[ot].forEach(function(Xe){var an=null;switch(Xe){case"bold":an={family:ot,weight:"bold"};break;case"italic":an={family:ot,style:"italic"};break;case"bolditalic":an={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":an={family:ot}}an!==null&&(an.ref={name:ot,style:Xe},Ke.push(an))})}),Ke})(yn);ht=(function(tn){for(var Ke={},ot=0;ot<tn.length;++ot){var Xe=B0(tn[ot]),an=Xe.family,er=Xe.stretch,vn=Xe.style,Yt=Xe.weight;Ke[an]=Ke[an]||{},Ke[an][er]=Ke[an][er]||{},Ke[an][er][vn]=Ke[an][er][vn]||{},Ke[an][er][vn][Yt]=Xe}return Ke})(Mt.concat(cr)),vt=Vt}return ht})(this.pdf,this.fontFaces),je=R.map(function(kt){return{family:kt,stretch:"normal",weight:X,style:xe}}),we=(function(kt,cr,yn){for(var Vt=(yn=yn||{}).defaultFontFamily||"times",Mt=Object.assign({},EI,yn.genericFontFamilies||{}),tn=null,Ke=null,ot=0;ot<cr.length;++ot)if(Mt[(tn=B0(cr[ot])).family]&&(tn.family=Mt[tn.family]),kt.hasOwnProperty(tn.family)){Ke=kt[tn.family];break}if(!(Ke=Ke||kt[Vt]))throw new Error("Could not find a font-family for the rule '"+l5(tn)+"' and default family '"+Vt+"'.");if(Ke=(function(Xe,an){if(an[Xe])return an[Xe];var er=Dv[Xe],vn=er<=Dv.normal?-1:1,Yt=a5(an,rj,er,vn);if(!Yt)throw new Error("Could not find a matching font-stretch value for "+Xe);return Yt})(tn.stretch,Ke),Ke=(function(Xe,an){if(an[Xe])return an[Xe];for(var er=nj[Xe],vn=0;vn<er.length;++vn)if(an[er[vn]])return an[er[vn]];throw new Error("Could not find a matching font-style for "+Xe)})(tn.style,Ke),!(Ke=(function(Xe,an){if(an[Xe])return an[Xe];if(Xe===400&&an[500])return an[500];if(Xe===500&&an[400])return an[400];var er=TI[Xe],vn=a5(an,sj,er,Xe<400?-1:1);if(!vn)throw new Error("Could not find a matching font-weight for value "+Xe);return vn})(tn.weight,Ke)))throw new Error("Failed to resolve a font for the rule '"+l5(tn)+"'.");return Ke})(H,je);this.pdf.setFont(we.ref.name,we.ref.style)}else{var ke="";(X==="bold"||parseInt(X,10)>=700||xe==="bold")&&(ke="bold"),xe==="italic"&&(ke+="italic"),ke.length===0&&(ke="normal");for(var Ve="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<R.length;ct++){if(this.pdf.internal.getFont(R[ct],ke,{noFallback:!0,disableWarning:!0})!==void 0){Ve=R[ct];break}if(ke==="bolditalic"&&this.pdf.internal.getFont(R[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ve=R[ct],ke="bold";else if(this.pdf.internal.getFont(R[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ve=R[ct],ke="normal";break}}if(Ve===""){for(var _t=0;_t<R.length;_t++)if(at[R[_t]]){Ve=at[R[_t]];break}}Ve=Ve===""?"Times":Ve,this.pdf.setFont(Ve,ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};b.prototype.setLineDash=function(O){this.lineDash=O},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){B.call(this,"fill",!1)},b.prototype.stroke=function(){B.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(O,E){if(isNaN(O)||isNaN(E))throw es.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new u(O,E));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(O,E)},b.prototype.closePath=function(){var O=new u(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&Wr(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){O=new u(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(O.x,O.y)},b.prototype.lineTo=function(O,E){if(isNaN(O)||isNaN(E))throw es.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new u(O,E));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(ne.x,ne.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},b.prototype.quadraticCurveTo=function(O,E,ne,me){if(isNaN(ne)||isNaN(me)||isNaN(O)||isNaN(E))throw es.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new u(ne,me)),be=this.ctx.transform.applyToPoint(new u(O,E));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new u(ye.x,ye.y)},b.prototype.bezierCurveTo=function(O,E,ne,me,ye,be){if(isNaN(ye)||isNaN(be)||isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me))throw es.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Re=this.ctx.transform.applyToPoint(new u(ye,be)),Ie=this.ctx.transform.applyToPoint(new u(O,E)),Me=this.ctx.transform.applyToPoint(new u(ne,me));this.path.push({type:"bct",x1:Ie.x,y1:Ie.y,x2:Me.x,y2:Me.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new u(Re.x,Re.y)},b.prototype.arc=function(O,E,ne,me,ye,be){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me)||isNaN(ye))throw es.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Re=this.ctx.transform.applyToPoint(new u(O,E));O=Re.x,E=Re.y;var Ie=this.ctx.transform.applyToPoint(new u(0,ne)),Me=this.ctx.transform.applyToPoint(new u(0,0));ne=Math.sqrt(Math.pow(Ie.x-Me.x,2)+Math.pow(Ie.y-Me.y,2))}Math.abs(ye-me)>=2*Math.PI&&(me=0,ye=2*Math.PI),this.path.push({type:"arc",x:O,y:E,radius:ne,startAngle:me,endAngle:ye,counterclockwise:be})},b.prototype.arcTo=function(O,E,ne,me,ye){throw new Error("arcTo not implemented.")},b.prototype.rect=function(O,E,ne,me){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me))throw es.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,E),this.lineTo(O+ne,E),this.lineTo(O+ne,E+me),this.lineTo(O,E+me),this.lineTo(O,E),this.lineTo(O+ne,E),this.lineTo(O,E)},b.prototype.fillRect=function(O,E,ne,me){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me))throw es.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,E,ne,me),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},b.prototype.strokeRect=function(O,E,ne,me){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me))throw es.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(O,E,ne,me),this.stroke())},b.prototype.clearRect=function(O,E,ne,me){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me))throw es.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,E,ne,me))},b.prototype.save=function(O){O=typeof O!="boolean"||O;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},b.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(E),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(O){var E,ne,me,ye;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))E=0,ne=0,me=0,ye=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(be!==null)E=parseInt(be[1]),ne=parseInt(be[2]),me=parseInt(be[3]),ye=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)E=parseInt(be[1]),ne=parseInt(be[2]),me=parseInt(be[3]),ye=parseFloat(be[4]);else{if(ye=1,typeof O=="string"&&O.charAt(0)!=="#"){var Re=new Q4(O);O=Re.ok?Re.toHex():"#000000"}O.length===4?(E=O.substring(1,2),E+=E,ne=O.substring(2,3),ne+=ne,me=O.substring(3,4),me+=me):(E=O.substring(1,3),ne=O.substring(3,5),me=O.substring(5,7)),E=parseInt(E,16),ne=parseInt(ne,16),me=parseInt(me,16)}}return{r:E,g:ne,b:me,a:ye,style:O}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(O,E,ne,me){if(isNaN(E)||isNaN(ne)||typeof O!="string")throw es.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!y.call(this)){var ye=ce(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;L.call(this,{text:O,x:E,y:ne,scale:be,angle:ye,align:this.textAlign,maxWidth:me})}},b.prototype.strokeText=function(O,E,ne,me){if(isNaN(E)||isNaN(ne)||typeof O!="string")throw es.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){me=isNaN(me)?void 0:me;var ye=ce(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;L.call(this,{text:O,x:E,y:ne,scale:be,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:me})}},b.prototype.measureText=function(O){if(typeof O!="string")throw es.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,ne=this.pdf.internal.scaleFactor,me=E.internal.getFontSize(),ye=E.getStringUnitWidth(O)*me/E.internal.scaleFactor;return new function(be){var Re=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Re}}),this}({width:ye*=Math.round(96*ne/72*1e4)/1e4})},b.prototype.scale=function(O,E){if(isNaN(O)||isNaN(E))throw es.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new f(O,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.rotate=function(O){if(isNaN(O))throw es.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new f(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},b.prototype.translate=function(O,E){if(isNaN(O)||isNaN(E))throw es.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new f(1,0,0,1,O,E);this.ctx.transform=this.ctx.transform.multiply(ne)},b.prototype.transform=function(O,E,ne,me,ye,be){if(isNaN(O)||isNaN(E)||isNaN(ne)||isNaN(me)||isNaN(ye)||isNaN(be))throw es.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Re=new f(O,E,ne,me,ye,be);this.ctx.transform=this.ctx.transform.multiply(Re)},b.prototype.setTransform=function(O,E,ne,me,ye,be){O=isNaN(O)?1:O,E=isNaN(E)?0:E,ne=isNaN(ne)?0:ne,me=isNaN(me)?1:me,ye=isNaN(ye)?0:ye,be=isNaN(be)?0:be,this.ctx.transform=new f(O,E,ne,me,ye,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(O,E,ne,me,ye,be,Re,Ie,Me){var Qe=this.pdf.getImageProperties(O),ht=1,vt=1,Dt=1,le=1;me!==void 0&&Ie!==void 0&&(Dt=Ie/me,le=Me/ye,ht=Qe.width/me*Ie/me,vt=Qe.height/ye*Me/ye),be===void 0&&(be=E,Re=ne,E=0,ne=0),me!==void 0&&Ie===void 0&&(Ie=me,Me=ye),me===void 0&&Ie===void 0&&(Ie=Qe.width,Me=Qe.height);var xt=this.ctx.transform.decompose(),xe=ce(xt.rotate.shx),X=new f,M=(X=(X=(X=X.multiply(xt.translate)).multiply(xt.skew)).multiply(xt.scale)).applyToRectangle(new c(be-E*Dt,Re-ne*le,me*ht,ye*vt));if(this.autoPaging){for(var ve,re=P.call(this,M),R=[],H=0;H<re.length;H+=1)R.indexOf(re[H])===-1&&R.push(re[H]);v(R);for(var je=R[0],we=R[R.length-1],ke=je;ke<we+1;ke++){this.pdf.setPage(ke);var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=ke===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kt=ke===1?0:ct+(ke-2)*_t;if(this.ctx.clip_path.length!==0){var cr=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ve,this.posX+this.margin[3],-kt+at+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=cr}var yn=JSON.parse(JSON.stringify(M));yn=I([yn],this.posX+this.margin[3],-kt+at+this.ctx.prevPageLastElemOffset)[0];var Vt=(ke>je||ke<we)&&S.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,_t,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",yn.x,yn.y,yn.w,yn.h,null,null,xe),Vt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",M.x,M.y,M.w,M.h,null,null,xe)};var P=function(O,E,ne){var me=[];E=E||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":me.push(Math.floor((O.y+ye)/ne)+1);break;case"arc":me.push(Math.floor((O.y+ye-O.radius)/ne)+1),me.push(Math.floor((O.y+ye+O.radius)/ne)+1);break;case"qct":var be=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);me.push(Math.floor((be.y+ye)/ne)+1),me.push(Math.floor((be.y+be.h+ye)/ne)+1);break;case"bct":var Re=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);me.push(Math.floor((Re.y+ye)/ne)+1),me.push(Math.floor((Re.y+Re.h+ye)/ne)+1);break;case"rect":me.push(Math.floor((O.y+ye)/ne)+1),me.push(Math.floor((O.y+O.h+ye)/ne)+1)}for(var Ie=0;Ie<me.length;Ie+=1)for(;this.pdf.internal.getNumberOfPages()<me[Ie];)_.call(this);return me},_=function(){var O=this.fillStyle,E=this.strokeStyle,ne=this.font,me=this.lineCap,ye=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=E,this.font=ne,this.lineCap=me,this.lineWidth=ye,this.lineJoin=be},I=function(O,E,ne){for(var me=0;me<O.length;me++)switch(O[me].type){case"bct":O[me].x2+=E,O[me].y2+=ne;case"qct":O[me].x1+=E,O[me].y1+=ne;default:O[me].x+=E,O[me].y+=ne}return O},v=function(O){return O.sort(function(E,ne){return E-ne})},B=function(O,E){var ne=this.fillStyle,me=this.strokeStyle,ye=this.lineCap,be=this.lineWidth,Re=Math.abs(be*this.ctx.transform.scaleX),Ie=this.lineJoin;if(this.autoPaging){for(var Me,Qe,ht=JSON.parse(JSON.stringify(this.path)),vt=JSON.parse(JSON.stringify(this.path)),Dt=[],le=0;le<vt.length;le++)if(vt[le].x!==void 0)for(var xt=P.call(this,vt[le]),xe=0;xe<xt.length;xe+=1)Dt.indexOf(xt[xe])===-1&&Dt.push(xt[xe]);for(var X=0;X<Dt.length;X++)for(;this.pdf.internal.getNumberOfPages()<Dt[X];)_.call(this);v(Dt);for(var M=Dt[0],ve=Dt[Dt.length-1],re=M;re<ve+1;re++){this.pdf.setPage(re),this.fillStyle=ne,this.strokeStyle=me,this.lineCap=ye,this.lineWidth=Re,this.lineJoin=Ie;var R=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],H=re===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ke=re===1?0:je+(re-2)*we;if(this.ctx.clip_path.length!==0){var Ve=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Me,this.posX+this.margin[3],-ke+H+this.ctx.prevPageLastElemOffset),ee.call(this,O,!0),this.path=Ve}if(Qe=JSON.parse(JSON.stringify(ht)),this.path=I(Qe,this.posX+this.margin[3],-ke+H+this.ctx.prevPageLastElemOffset),E===!1||re===0){var at=(re>M||re<ve)&&S.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,we,null).clip().discardPath()),ee.call(this,O,E),at&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=ht}else this.lineWidth=Re,ee.call(this,O,E),this.lineWidth=be},ee=function(O,E){if((O!=="stroke"||E||!D.call(this))&&(O==="stroke"||E||!y.call(this))){for(var ne,me,ye=[],be=this.path,Re=0;Re<be.length;Re++){var Ie=be[Re];switch(Ie.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:Ie,deltas:[],abs:[]});break;case"lt":var Me=ye.length;if(be[Re-1]&&!isNaN(be[Re-1].x)&&(ne=[Ie.x-be[Re-1].x,Ie.y-be[Re-1].y],Me>0)){for(;Me>=0;Me--)if(ye[Me-1].close!==!0&&ye[Me-1].begin!==!0){ye[Me-1].deltas.push(ne),ye[Me-1].abs.push(Ie);break}}break;case"bct":ne=[Ie.x1-be[Re-1].x,Ie.y1-be[Re-1].y,Ie.x2-be[Re-1].x,Ie.y2-be[Re-1].y,Ie.x-be[Re-1].x,Ie.y-be[Re-1].y],ye[ye.length-1].deltas.push(ne);break;case"qct":var Qe=be[Re-1].x+2/3*(Ie.x1-be[Re-1].x),ht=be[Re-1].y+2/3*(Ie.y1-be[Re-1].y),vt=Ie.x+2/3*(Ie.x1-Ie.x),Dt=Ie.y+2/3*(Ie.y1-Ie.y),le=Ie.x,xt=Ie.y;ne=[Qe-be[Re-1].x,ht-be[Re-1].y,vt-be[Re-1].x,Dt-be[Re-1].y,le-be[Re-1].x,xt-be[Re-1].y],ye[ye.length-1].deltas.push(ne);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(Ie)}}me=E?null:O==="stroke"?"stroke":"fill";for(var xe=!1,X=0;X<ye.length;X++)if(ye[X].arc)for(var M=ye[X].abs,ve=0;ve<M.length;ve++){var re=M[ve];re.type==="arc"?te.call(this,re.x,re.y,re.radius,re.startAngle,re.endAngle,re.counterclockwise,void 0,E,!xe):z.call(this,re.x,re.y),xe=!0}else if(ye[X].close===!0)this.pdf.internal.out("h"),xe=!1;else if(ye[X].begin!==!0){var R=ye[X].start.x,H=ye[X].start.y;Y.call(this,ye[X].deltas,R,H),xe=!0}me&&Q.call(this,me),E&&de.call(this)}},ae=function(O){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-ne;case"top":return O+E-ne;case"hanging":return O+E-2*ne;case"middle":return O+E/2-ne;default:return O}},W=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(E,ne){this.colorStops.push([E,ne])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var te=function(O,E,ne,me,ye,be,Re,Ie,Me){for(var Qe=_e.call(this,ne,me,ye,be),ht=0;ht<Qe.length;ht++){var vt=Qe[ht];ht===0&&(Me?F.call(this,vt.x1+O,vt.y1+E):z.call(this,vt.x1+O,vt.y1+E)),Ce.call(this,O,E,vt.x2,vt.y2,vt.x3,vt.y3,vt.x4,vt.y4)}Ie?de.call(this):Q.call(this,Re)},Q=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},de=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(O,E){this.pdf.internal.out(n(O)+" "+r(E)+" m")},L=function(O){var E;switch(O.align){case"right":case"end":E="right";break;case"center":E="center";break;default:E="left"}var ne,me,ye,be=this.pdf.getTextDimensions(O.text),Re=ae.call(this,O.y),Ie=W.call(this,Re)-be.h,Me=this.ctx.transform.applyToPoint(new u(O.x,Re));if(this.autoPaging){var Qe=this.ctx.transform.decompose(),ht=new f;ht=(ht=(ht=ht.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale);for(var vt=this.ctx.transform.applyToRectangle(new c(O.x,Re,be.w,be.h)),Dt=ht.applyToRectangle(new c(O.x,Ie,be.w,be.h)),le=P.call(this,Dt),xt=[],xe=0;xe<le.length;xe+=1)xt.indexOf(le[xe])===-1&&xt.push(le[xe]);v(xt);for(var X=xt[0],M=xt[xt.length-1],ve=X;ve<M+1;ve++){this.pdf.setPage(ve);var re=ve===1?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],H=this.pdf.internal.pageSize.height-this.margin[2],je=H-this.margin[0],we=this.pdf.internal.pageSize.width-this.margin[1],ke=we-this.margin[3],Ve=ve===1?0:R+(ve-2)*je;if(this.ctx.clip_path.length!==0){var at=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ne,this.posX+this.margin[3],-1*Ve+re),ee.call(this,"fill",!0),this.path=at}var ct=I([JSON.parse(JSON.stringify(Dt))],this.posX+this.margin[3],-Ve+re+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*O.scale),ye=this.lineWidth,this.lineWidth=ye*O.scale);var _t=this.autoPaging!=="text";if(_t||ct.y+ct.h<=H){if(_t||ct.y>=re&&ct.x<=we){var kt=_t?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||we-ct.x)[0],cr=I([JSON.parse(JSON.stringify(vt))],this.posX+this.margin[3],-Ve+re+this.ctx.prevPageLastElemOffset)[0],yn=_t&&(ve>X||ve<M)&&S.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,je,null).clip().discardPath()),this.pdf.text(kt,cr.x,cr.y,{angle:O.angle,align:E,renderingMode:O.renderingMode}),yn&&this.pdf.restoreGraphicsState()}}else ct.y<H&&(this.ctx.prevPageLastElemOffset+=H-ct.y);O.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ye)}}else O.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*O.scale),ye=this.lineWidth,this.lineWidth=ye*O.scale),this.pdf.text(O.text,Me.x+this.posX,Me.y+this.posY,{angle:O.angle,align:E,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ye)},z=function(O,E,ne,me){ne=ne||0,me=me||0,this.pdf.internal.out(n(O+ne)+" "+r(E+me)+" l")},Y=function(O,E,ne){return this.pdf.lines(O,E,ne,null,null)},Ce=function(O,E,ne,me,ye,be,Re,Ie){this.pdf.internal.out([e(a(ne+O)),e(o(me+E)),e(a(ye+O)),e(o(be+E)),e(a(Re+O)),e(o(Ie+E)),"c"].join(" "))},_e=function(O,E,ne,me){for(var ye=2*Math.PI,be=Math.PI/2;E>ne;)E-=ye;var Re=Math.abs(ne-E);Re<ye&&me&&(Re=ye-Re);for(var Ie=[],Me=me?-1:1,Qe=E;Re>1e-5;){var ht=Qe+Me*Math.min(Re,be);Ie.push(Ae.call(this,O,Qe,ht)),Re-=Math.abs(ht-Qe),Qe=ht}return Ie},Ae=function(O,E,ne){var me=(ne-E)/2,ye=O*Math.cos(me),be=O*Math.sin(me),Re=ye,Ie=-be,Me=Re*Re+Ie*Ie,Qe=Me+Re*ye+Ie*be,ht=4/3*(Math.sqrt(2*Me*Qe)-Qe)/(Re*be-Ie*ye),vt=Re-ht*Ie,Dt=Ie+ht*Re,le=vt,xt=-Dt,xe=me+E,X=Math.cos(xe),M=Math.sin(xe);return{x1:O*Math.cos(E),y1:O*Math.sin(E),x2:vt*X-Dt*M,y2:vt*M+Dt*X,x3:le*X-xt*M,y3:le*M+xt*X,x4:O*Math.cos(ne),y4:O*Math.sin(ne)}},ce=function(O){return 180*O/Math.PI},ge=function(O,E,ne,me,ye,be){var Re=O+.5*(ne-O),Ie=E+.5*(me-E),Me=ye+.5*(ne-ye),Qe=be+.5*(me-be),ht=Math.min(O,ye,Re,Me),vt=Math.max(O,ye,Re,Me),Dt=Math.min(E,be,Ie,Qe),le=Math.max(E,be,Ie,Qe);return new c(ht,Dt,vt-ht,le-Dt)},De=function(O,E,ne,me,ye,be,Re,Ie){var Me,Qe,ht,vt,Dt,le,xt,xe,X,M,ve,re,R,H,je=ne-O,we=me-E,ke=ye-ne,Ve=be-me,at=Re-ye,ct=Ie-be;for(Qe=0;Qe<41;Qe++)X=(xt=(ht=O+(Me=Qe/40)*je)+Me*((Dt=ne+Me*ke)-ht))+Me*(Dt+Me*(ye+Me*at-Dt)-xt),M=(xe=(vt=E+Me*we)+Me*((le=me+Me*Ve)-vt))+Me*(le+Me*(be+Me*ct-le)-xe),Qe==0?(ve=X,re=M,R=X,H=M):(ve=Math.min(ve,X),re=Math.min(re,M),R=Math.max(R,X),H=Math.max(H,M));return new c(Math.round(ve),Math.round(re),Math.round(R-ve),Math.round(H-re))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,E,ne=(O=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:E}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(un.API),(function(t){var e=function(u){var c,f,p,m,b,j,y,D,S,P;for(f=[],p=0,m=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(b=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(j=(b=((b=((b=((b=(b-(P=b%85))/85)-(S=b%85))/85)-(D=b%85))/85)-(y=b%85))/85)%85,f.push(j+33,y+33,D+33,S+33,P+33)):f.push(122);return(function(_,I){for(var v=I;v>0;v--)_.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},n=function(u){var c,f,p,m,b,j=String,y="length",D=255,S="charCodeAt",P="slice",_="replace";for(u[P](-2),u=u[P](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),p=[],m=0,b=(u+=c="uuuuu"[P](u[y]%5||5))[y];b>m;m+=5)f=52200625*(u[S](m)-33)+614125*(u[S](m+1)-33)+7225*(u[S](m+2)-33)+85*(u[S](m+3)-33)+(u[S](m+4)-33),p.push(D&f>>24,D&f>>16,D&f>>8,D&f);return(function(I,v){for(var B=v;B>0;B--)I.pop()})(p,c[y]),j.fromCharCode.apply(j,p)},r=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=Av(c)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(u,c){var f=0,p=u||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=a(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(un.API),(function(t){t.loadFile=function(e,n,r){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,p,m){var b=new XMLHttpRequest,j=0,y=function(D){var S=D.length,P=[],_=String.fromCharCode;for(j=0;j<S;j+=1)P.push(_(255&D.charCodeAt(j)));return P.join("")};if(b.open("GET",f,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?m(y(this.responseText)):m(void 0)}),b.send(null),p&&b.status===200)return y(b.responseText)})(a,o,u)}catch{}return c})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(un.API),(function(t){function e(){return(Fn.html2canvas?Promise.resolve(Fn.html2canvas):w0(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Fn.DOMPurify?Promise.resolve(Fn.DOMPurify):w0(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var f=Wr(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var p=document.createElement(c);for(var m in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[m]=f.style[m];return p},o=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(c(b,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function c(f){var p=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),p);return(m=m.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(n).then(function(p){return this.set({src:a("div",{innerHTML:c,dompurify:p})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=this.opt.jsPDF,m=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,j=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete j.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var y=0;y<m.length;++y){var D=m[y],S=D.src.find(function(P){return P.format==="truetype"});S&&p.addFont(S.url,D.ref.name,D.ref.style)}return j.windowHeight=j.windowHeight||0,j.windowHeight=j.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):j.windowHeight,p.context2d.save(!0),f(this.prop.container,j)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(r(c)!=="object")return this;var f=Object.keys(c||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=c[p]};switch(p){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[p]=c[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var p=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(p):p})},u.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(c=c||un.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,p,m){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,p,m){return this.setProgress(c?this.progress.val+c:null,f||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(c,f){var p=this;return this.thenCore(c,f,function(m,b){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(j){return p.updateProgress(null,m),j}).then(m,b).then(function(j){return p.updateProgress(1),j})})},u.prototype.thenCore=function(c,f,p){p=p||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),f&&(f=f.bind(m));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),j=p.call(b,c,f);return u.convert(j,m.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,un.getPageSize=function(c,f,p){if(Wr(c)==="object"){var m=c;c=m.orientation,f=m.unit||f,p=m.format||p}f=f||"mm",p=p||"a4",c=(""+(c||"P")).toLowerCase();var b,j=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var D,S=0,P=0;if(y.hasOwnProperty(j))S=y[j][1]/b,P=y[j][0]/b;else try{S=p[1],P=p[0]}catch{throw new Error("Invalid format: "+p)}if(c==="p"||c==="portrait")c="p",P>S&&(D=P,P=S,S=D);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",S>P&&(D=P,P=S,S=D)}return{width:P,height:S,unit:f,k:b,orientation:c}},t.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(B0):null;var p=new u(f);return f.worker?p:p.from(c).doCallback()}})(un.API),un.API.addJS=function(t){return d5=t,this.internal.events.subscribe("postPutResources",function(){Ip=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ip+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+d5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ip!==void 0&&u5!==void 0&&this.internal.out("/Names <</JavaScript "+Ip+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=r.exec(u);if(c!=null){var f=c[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var b=n.internal.newObject();m.push(b);var j=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<m.length;o++)n.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,o){var u={title:a,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var o=0;o<a.children.length;o++)r.count++,this.count_r(r,a.children[o]);return r.count}}])})(un.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,a,o,u,c){var f,p=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,f=(function(b){for(var j,y=256*b.charCodeAt(4)+b.charCodeAt(5),D=b.length,S={width:0,height:0,numcomponents:1},P=4;P<D;P+=2){if(P+=y,e.indexOf(b.charCodeAt(P+1))!==-1){j=256*b.charCodeAt(P+5)+b.charCodeAt(P+6),S={width:256*b.charCodeAt(P+7)+b.charCodeAt(P+8),height:j,numcomponents:b.charCodeAt(P+9)};break}y=256*b.charCodeAt(P+2)+b.charCodeAt(P+3)}return S})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:n,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:p,index:r,alias:a}}return m}})(un.API),un.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,o=gI(t,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,p=o.palette,m=o.depth;a=p&&f===1?(function(te){for(var Q=te.width,de=te.height,F=te.data,L=te.palette,z=te.depth,Y=!1,Ce=[],_e=[],Ae=void 0,ce=!1,ge=0,De=0;De<L.length;De++){var se=my(L[De],4),O=se[0],E=se[1],ne=se[2],me=se[3];Ce.push(O,E,ne),me!=null&&(me===0?(ge++,_e.length<1&&_e.push(De)):me<255&&(ce=!0))}if(ce||ge>1){Y=!0,_e=void 0;var ye=Q*de;Ae=new Uint8Array(ye);for(var be=new DataView(F.buffer),Re=0;Re<ye;Re++){var Ie=U0(be,Re,z),Me=my(L[Ie],4)[3];Ae[Re]=Me}}else ge===0&&(_e=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:F,alphaBytes:Ae,needSMask:Y,palette:Ce,mask:_e}})(o):f===2||f===4?(function(te){for(var Q=te.data,de=te.width,F=te.height,L=te.channels,z=te.depth,Y=L===2?"DeviceGray":"DeviceRGB",Ce=L-1,_e=de*F,Ae=Ce,ce=_e*Ae,ge=1*_e,De=Math.ceil(ce*z/8),se=Math.ceil(ge*z/8),O=new Uint8Array(De),E=new Uint8Array(se),ne=new DataView(Q.buffer),me=new DataView(O.buffer),ye=new DataView(E.buffer),be=!1,Re=0;Re<_e;Re++){for(var Ie=Re*L,Me=0;Me<Ae;Me++)b5(me,U0(ne,Ie+Me,z),Re*Ae+Me,z);var Qe=U0(ne,Ie+Ae,z);Qe<(1<<z)-1&&(be=!0),b5(ye,Qe,1*Re,z)}return{colorSpace:Y,colorsPerPixel:Ce,sMaskBitsPerComponent:be?z:void 0,colorBytes:O,alphaBytes:E,needSMask:be}})(o):(function(te){var Q=te.data,de=te.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:de,colorsPerPixel:de==="DeviceGray"?1:3,colorBytes:Q instanceof Uint16Array?(function(F){for(var L=F.length,z=new Uint8Array(2*L),Y=new DataView(z.buffer,z.byteOffset,z.byteLength),Ce=0;Ce<L;Ce++)Y.setUint16(2*Ce,F[Ce],!1);return z})(Q):Q,needSMask:!1}})(o);var b,j,y,D=a,S=D.colorSpace,P=D.colorsPerPixel,_=D.sMaskBitsPerComponent,I=D.colorBytes,v=D.alphaBytes,B=D.needSMask,ee=D.palette,ae=D.mask,W=null;return r!==un.API.image_compression.NONE&&typeof Av=="function"?(W=(function(te){var Q;switch(te){case un.API.image_compression.FAST:Q=11;break;case un.API.image_compression.MEDIUM:Q=13;break;case un.API.image_compression.SLOW:Q=14;break;default:Q=12}return Q})(r),b=this.decode.FLATE_DECODE,j="/Predictor ".concat(W," /Colors ").concat(P," /BitsPerComponent ").concat(m," /Columns ").concat(u),t=m5(I,Math.ceil(u*P*m/8),P,m,r),B&&(y=m5(v,Math.ceil(u*_/8),1,_,r))):(b=void 0,j=void 0,t=I,B&&(y=v)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:n,data:t,index:e,filter:b,decodeParameters:j,transparency:ae,palette:ee,sMask:y,predictor:W,width:u,height:c,bitsPerComponent:m,sMaskBitsPerComponent:_,colorSpace:S}}},(function(t){t.processGIF89A=function(e,n,r,a){var o=new OI(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:c},m=new z0(100).encode(p,100);return t.processJPEG.call(this,m,n,r,a)},t.processGIF87A=t.processGIF89A})(un.API),zo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},zo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){es.log("bit decode error:"+n)}},zo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}n!==0&&(this.pos+=4-n)}},zo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*a*4,c=o>>4,f=15&o,p=this.palette[c];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*a+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},zo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},zo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,m=r*this.width*4+4*a;this.data[m]=f,this.data[m+1]=c,this.data[m+2]=u,this.data[m+3]=p}this.pos+=t}},zo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&n)/n*255|0,p=(u>>11)/e*255|0,m=a*this.width*4+4*o;this.data[m]=p,this.data[m+1]=f,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},zo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},zo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=u}},zo.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,a){var o=new zo(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new z0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),N5.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,a){var o=new N5(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new z0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),un.API.processRGBA=function(t,e,n){for(var r=t.data,a=r.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,p=0;p<a;p+=4){var m=r[p],b=r[p+1],j=r[p+2],y=r[p+3];o[c++]=m,o[c++]=b,o[c++]=j,u[f++]=y}var D=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:D,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},un.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kd=un.API,Fp=kd.getCharWidthsArray=function(t,e){var n,r,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,p=e.kerning?e.kerning:a.metadata.Unicode.kerning,m=p.fof?p.fof:1,b=e.doKerning!==!1,j=0,y=t.length,D=0,S=c[0]||f,P=[];for(n=0;n<y;n++)r=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?P.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(j=b&&Wr(p[r])==="object"&&!isNaN(parseInt(p[r][D],10))?p[r][D]/m:0,P.push((c[r]||S)/f+j)),D=r;return P},f5=kd.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return kd.processArabic&&(t=kd.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,a)/n:Fp.apply(this,arguments).reduce(function(o,u){return o+u},0)},h5=function(t,e,n,r){for(var a=[],o=0,u=t.length,c=0;o!==u&&c+e[o]<n;)c+=e[o],o++;a.push(t.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>r&&(a.push(t.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(t.slice(f,o)),a},p5=function(t,e,n){n||(n={});var r,a,o,u,c,f,p,m=[],b=[m],j=n.textIndent||0,y=0,D=0,S=t.split(" "),P=Fp.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var _=Array(f).join(" "),I=[];S.map(function(B){(B=B.split(/\s*\n/)).length>1?I=I.concat(B.map(function(ee,ae){return(ae&&ee.length?`
`:"")+ee})):I.push(B[0])}),S=I,f=f5.apply(this,[_,n])}for(o=0,u=S.length;o<u;o++){var v=0;if(r=S[o],f&&r[0]==`
`&&(r=r.substr(1),v=1),j+y+(D=(a=Fp.apply(this,[r,n])).reduce(function(B,ee){return B+ee},0))>e||v){if(D>e){for(c=h5.apply(this,[r,a,e-(j+y),e]),m.push(c.shift()),m=[c.pop()];c.length;)b.push([c.shift()]);D=a.slice(r.length-(m[0]?m[0].length:0)).reduce(function(B,ee){return B+ee},0)}else m=[r];b.push(m),j=D+f,y=P}else m.push(r),j+=y+D,y=P}return p=f?function(B,ee){return(ee?_:"")+B.join(" ")}:function(B){return B.join(" ")},b.map(p)},kd.splitTextToSize=function(t,e,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var b=this.internal.getFont(m.fontName,m.fontStyle),j="Unicode";return b.metadata[j]?{widths:b.metadata[j].widths||{0:1},kerning:b.metadata[j].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=n.lineIndent;var c,f,p=[];for(c=0,f=r.length;c<f;c++)p=p.concat(p5.apply(this,[r[c],u,o]));return p},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},a={},o=0;o<16;o++)r[n[o]]=e[o],a[e[o]]=n[o];var u=function(j){return"0x"+parseInt(j,10).toString(16)},c=t.__fontmetrics__.compress=function(j){var y,D,S,P,_=["{"];for(var I in j){if(y=j[I],isNaN(parseInt(I,10))?D="'"+I+"'":(I=parseInt(I,10),D=(D=u(I).slice(2)).slice(0,-1)+a[D.slice(-1)]),typeof y=="number")y<0?(S=u(y).slice(3),P="-"):(S=u(y).slice(2),P=""),S=P+S.slice(0,-1)+a[S.slice(-1)];else{if(Wr(y)!=="object")throw new Error("Don't know what to do with value type "+Wr(y)+".");S=c(y)}_.push(D+S)}return _.push("}"),_.join("")},f=t.__fontmetrics__.uncompress=function(j){if(typeof j!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,D,S,P,_={},I=1,v=_,B=[],ee="",ae="",W=j.length-1,te=1;te<W;te+=1)(P=j[te])=="'"?y?(S=y.join(""),y=void 0):y=[]:y?y.push(P):P=="{"?(B.push([v,S]),v={},S=void 0):P=="}"?((D=B.pop())[0][D[1]]=v,S=void 0,v=D[0]):P=="-"?I=-1:S===void 0?r.hasOwnProperty(P)?(ee+=r[P],S=parseInt(ee,16)*I,I=1,ee=""):ee+=P:r.hasOwnProperty(P)?(ae+=r[P],v[S]=parseInt(ae,16)*I,I=1,S=void 0,ae=""):ae+=P;return _},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(j){var y=j.font,D=b.Unicode[y.postScriptName];D&&(y.metadata.Unicode={},y.metadata.Unicode.widths=D.widths,y.metadata.Unicode.kerning=D.kerning);var S=m.Unicode[y.postScriptName];S&&(y.metadata.Unicode.encoding=S,y.encoding=S.codePages[0])}])})(un.API),(function(t){var e=function(n){for(var r=n.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=n.charCodeAt(o);return a};t.API.events.push(["addFont",function(n){var r=void 0,a=n.font,o=n.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Zp(c)),u.metadata=t.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,r)}}])})(un),un.API.addSvgAsImage=function(t,e,n,r,a,o,u,c){if(isNaN(e)||isNaN(n))throw es.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw es.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=r,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Fn.canvg?Promise.resolve(Fn.canvg):w0(()=>import("./index.es-CyYh69DZ.js"),[])).catch(function(j){return Promise.reject(new Error("Could not load canvg: "+j))}).then(function(j){return j.default?j.default:j}).then(function(j){return j.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(m)}).then(function(){b.addImage(f.toDataURL("image/jpeg",1),e,n,r,a,u,c)})},un.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,n);return this},un.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],p=0,m=0,b=0;function j(D,S){var P,_=!1;for(P=0;P<D.length;P+=1)D[P]===S&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=c.length;for(b=0;b<y;b+=1)n[c[b]].value=n[c[b]].defaultValue,n[c[b]].explicitSet=!1}if(Wr(t)==="object"){for(a in t)if(o=t[a],j(c,a)&&o!==void 0){if(n[a].type==="boolean"&&typeof o=="boolean")n[a].value=o;else if(n[a].type==="name"&&j(n[a].valueSet,o))n[a].value=o;else if(n[a].type==="integer"&&Number.isInteger(o))n[a].value=o;else if(n[a].type==="array"){for(p=0;p<o.length;p+=1)if(r=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(r=!1);r===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}n[a].value="["+f.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,S=[];for(D in n)n[D].explicitSet===!0&&(n[D].type==="name"?S.push("/"+D+" /"+n[D].value):S.push("/"+D+" "+n[D].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(un.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],b=0,j=o.length;b<j;++b){if(c=u.metadata.characterToGlyph(o.charCodeAt(b)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(b),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(p[4-c.length],c)}return m.join("")},r=function(o){var u,c,f,p,m,b,j;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,j=(c=Object.keys(o).sort(function(y,D){return y-D})).length;b<j;b++)u=c[b],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,j=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),y="",D=0;D<j.length;D++)y+=String.fromCharCode(j[D]);var S=p();m({data:y,addLength1:!0,objectId:S}),f("endobj");var P=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:P}),f("endobj");var _=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Rd(c.fontName)),f("/FontFile2 "+S+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var I=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Rd(c.fontName)),f("/FontDescriptor "+_+" 0 R"),f("/W "+t.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+P+" 0 R"),f("/BaseFont /"+Rd(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+I+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,j="",y=0;y<b.length;y++)j+=String.fromCharCode(b[y]);var D=p();m({data:j,addLength1:!0,objectId:D}),f("endobj");var S=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var P=p();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+D+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+Rd(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=p();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Rd(c.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,p=o.y,m=o.options||{},b=o.mutex||{},j=b.pdfEscape,y=b.activeFontKey,D=b.fonts,S=y,P="",_=0,I="",v=D[S].encoding;if(D[S].encoding!=="Identity-H")return{text:c,x:f,y:p,options:m,mutex:b};for(I=c,S=y,Array.isArray(c)&&(I=c[0]),_=0;_<I.length;_+=1)D[S].metadata.hasOwnProperty("cmap")&&(u=D[S].metadata.cmap.unicode.codeMap[I[_].charCodeAt(0)]),u||I[_].charCodeAt(0)<256&&D[S].metadata.hasOwnProperty("Unicode")?P+=I[_]:P+="";var B="";return parseInt(S.slice(1))<14||v==="WinAnsiEncoding"?B=j(P,S).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(B=n(P,D[S])),b.isHex=!0,{text:B,x:f,y:p,options:m,mutex:b}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?c.push([a(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):c.push(a(Object.assign({},f,{text:u[p]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(un),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(un.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var a,o,u,c,f,p,m,b=e,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,v=0;this.__bidiEngine__={};var B=function(F){var L=F.charCodeAt(),z=L>>8,Y=S[z];return Y!==void 0?b[256*Y+(255&L)]:z===252||z===253?"AL":_.test(z)?"L":z===8?"R":"N"},ee=function(F){for(var L,z=0;z<F.length;z++){if((L=B(F.charAt(z)))==="L")return!1;if(L==="R")return!0}return!1},ae=function(F,L,z,Y){var Ce,_e,Ae,ce,ge=L[Y];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(ge="AN");break;case"AL":I=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":Y<1||Y+1>=L.length||(Ce=z[Y-1])!=="EN"&&Ce!=="AN"||(_e=L[Y+1])!=="EN"&&_e!=="AN"?ge="N":I&&(_e="AN"),ge=_e===Ce?_e:"N";break;case"ES":ge=(Ce=Y>0?z[Y-1]:"B")==="EN"&&Y+1<L.length&&L[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&z[Y-1]==="EN"){ge="EN";break}if(I){ge="N";break}for(Ae=Y+1,ce=L.length;Ae<ce&&L[Ae]==="ET";)Ae++;ge=Ae<ce&&L[Ae]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(ce=L.length,Ae=Y+1;Ae<ce&&L[Ae]==="NSM";)Ae++;if(Ae<ce){var De=F[Y],se=De>=1425&&De<=2303||De===64286;if(Ce=L[Ae],se&&(Ce==="R"||Ce==="AL")){ge="R";break}}}ge=Y<1||(Ce=L[Y-1])==="B"?"N":z[Y-1];break;case"B":I=!1,a=!0,ge=v;break;case"S":o=!0,ge="N"}return ge},W=function(F,L,z){var Y=F.split("");return z&&te(Y,z,{hiLevel:v}),Y.reverse(),L&&L.reverse(),Y.join("")},te=function(F,L,z){var Y,Ce,_e,Ae,ce,ge=-1,De=F.length,se=0,O=[],E=v?y:j,ne=[];for(I=!1,a=!1,o=!1,Ce=0;Ce<De;Ce++)ne[Ce]=B(F[Ce]);for(_e=0;_e<De;_e++){if(ce=se,O[_e]=ae(F,ne,O,_e),Y=240&(se=E[ce][D[O[_e]]]),se&=15,L[_e]=Ae=E[se][5],Y>0)if(Y===16){for(Ce=ge;Ce<_e;Ce++)L[Ce]=1;ge=-1}else ge=-1;if(E[se][6])ge===-1&&(ge=_e);else if(ge>-1){for(Ce=ge;Ce<_e;Ce++)L[Ce]=Ae;ge=-1}ne[_e]==="B"&&(L[_e]=0),z.hiLevel|=Ae}o&&(function(me,ye,be){for(var Re=0;Re<be;Re++)if(me[Re]==="S"){ye[Re]=v;for(var Ie=Re-1;Ie>=0&&me[Ie]==="WS";Ie--)ye[Ie]=v}})(ne,L,De)},Q=function(F,L,z,Y,Ce){if(!(Ce.hiLevel<F)){if(F===1&&v===1&&!a)return L.reverse(),void(z&&z.reverse());for(var _e,Ae,ce,ge,De=L.length,se=0;se<De;){if(Y[se]>=F){for(ce=se+1;ce<De&&Y[ce]>=F;)ce++;for(ge=se,Ae=ce-1;ge<Ae;ge++,Ae--)_e=L[ge],L[ge]=L[Ae],L[Ae]=_e,z&&(_e=z[ge],z[ge]=z[Ae],z[Ae]=_e);se=ce}se++}}},de=function(F,L,z){var Y=F.split(""),Ce={hiLevel:v};return z||(z=[]),te(Y,z,Ce),(function(_e,Ae,ce){if(ce.hiLevel!==0&&m)for(var ge,De=0;De<_e.length;De++)Ae[De]===1&&(ge=P.indexOf(_e[De]))>=0&&(_e[De]=P[ge+1])})(Y,z,Ce),Q(2,Y,L,z,Ce),Q(1,Y,L,z,Ce),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(F,L,z){if((function(Ce,_e){if(_e)for(var Ae=0;Ae<Ce.length;Ae++)_e[Ae]=Ae;c===void 0&&(c=ee(Ce)),p===void 0&&(p=ee(Ce))})(F,L),u||!f||p)if(u&&f&&c^p)v=c?1:0,F=W(F,L,z);else if(!u&&f&&p)v=c?1:0,F=de(F,L,z),F=W(F,L);else if(!u||c||f||p){if(u&&!f&&c^p)F=W(F,L),c?(v=0,F=de(F,L,z)):(v=1,F=de(F,L,z),F=W(F,L));else if(u&&c&&!f&&p)v=1,F=de(F,L,z),F=W(F,L);else if(!u&&!f&&c^p){var Y=m;c?(v=1,F=de(F,L,z),v=0,m=!1,F=de(F,L,z),m=Y):(v=0,F=de(F,L,z),F=W(F,L),v=1,m=!1,F=de(F,L,z),m=Y,F=W(F,L))}}else v=0,F=de(F,L,z);else v=c?1:0,F=de(F,L,z);return F},this.__bidiEngine__.setOptions=function(F){F&&(u=F.isInputVisual,f=F.isOutputVisual,c=F.isInputRtl,p=F.isOutputRtl,m=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([n.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([n.doBidiReorder(a[c])]);r.text=u}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(un),un.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new lu(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new XI(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new MI(this.contents),this.head=new qI(this),this.name=new HI(this),this.cmap=new aj(this),this.toUnicode={},this.hhea=new UI(this),this.maxp=new WI(this),this.hmtx=new GI(this),this.post=new $I(this),this.os2=new zI(this),this.loca=new YI(this),this.glyf=new KI(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,p;for(p=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var sl,lu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,a;for(a=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,a,o,u,c,f;return e=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*a+16777216*o+65536*u+256*c+f},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,a,o;for(o=[],r=0,a=e.length;r<a;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),MI=(function(){var t;function e(n){var r,a,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,a,o,u,c,f,p,m,b,j,y,D,S;for(S in y=Object.keys(n).length,f=Math.log(2),b=16*Math.floor(Math.log(y)/f),u=Math.floor(b/f),m=16*y-b,(a=new lu).writeInt(this.scalarType),a.writeShort(y),a.writeShort(b),a.writeShort(u),a.writeShort(m),o=16*y,p=a.pos+o,c=null,D=[],n)for(j=n[S],a.writeString(S),a.writeInt(t(j)),a.writeInt(p),a.writeInt(j.length),D=D.concat(j),S==="head"&&(c=p),p+=j.length;p%4;)D.push(0),p++;return a.write(D),r=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(r),a.data},t=function(n){var r,a,o,u;for(n=oj.call(n);n.length%4;)n.push(0);for(o=new lu(n),a=0,r=0,u=n.length;r<u;r=r+=4)a+=o.readUInt32();return 4294967295&a},e})(),BI={}.hasOwnProperty,Ml=function(t,e){for(var n in e)BI.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};sl=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var qI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new lu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),S5=(function(){function t(e,n){var r,a,o,u,c,f,p,m,b,j,y,D,S,P,_,I,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),j=y/2,e.pos+=6,o=(function(){var B,ee;for(ee=[],f=B=0;0<=j?B<j:B>j;f=0<=j?++B:--B)ee.push(e.readUInt16());return ee})(),e.pos+=2,S=(function(){var B,ee;for(ee=[],f=B=0;0<=j?B<j:B>j;f=0<=j?++B:--B)ee.push(e.readUInt16());return ee})(),p=(function(){var B,ee;for(ee=[],f=B=0;0<=j?B<j:B>j;f=0<=j?++B:--B)ee.push(e.readUInt16());return ee})(),m=(function(){var B,ee;for(ee=[],f=B=0;0<=j?B<j:B>j;f=0<=j?++B:--B)ee.push(e.readUInt16());return ee})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var B,ee;for(ee=[],f=B=0;0<=a?B<a:B>a;f=0<=a?++B:--B)ee.push(e.readUInt16());return ee})(),f=_=0,v=o.length;_<v;f=++_)for(P=o[f],r=I=D=S[f];D<=P?I<=P:I>=P;r=D<=P?++I:--I)m[f]===0?u=r+p[f]:(u=c[m[f]/2+(r-D)-(j-f)]||0)!==0&&(u+=p[f]),this.codeMap[r]=65535&u}e.pos=b}return t.encode=function(e,n){var r,a,o,u,c,f,p,m,b,j,y,D,S,P,_,I,v,B,ee,ae,W,te,Q,de,F,L,z,Y,Ce,_e,Ae,ce,ge,De,se,O,E,ne,me,ye,be,Re,Ie,Me,Qe,ht;switch(Y=new lu,u=Object.keys(e).sort(function(vt,Dt){return vt-Dt}),n){case"macroman":for(S=0,P=(function(){var vt=[];for(D=0;D<256;++D)vt.push(0);return vt})(),I={0:0},o={},Ce=0,ge=u.length;Ce<ge;Ce++)I[Ie=e[a=u[Ce]]]==null&&(I[Ie]=++S),o[a]={old:e[a],new:I[e[a]]},P[a]=I[e[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(P),{charMap:o,subtable:Y.data,maxGlyphID:S+1};case"unicode":for(L=[],b=[],v=0,I={},r={},_=p=null,_e=0,De=u.length;_e<De;_e++)I[ee=e[a=u[_e]]]==null&&(I[ee]=++v),r[a]={old:ee,new:I[ee]},c=I[ee]-a,_!=null&&c===p||(_&&b.push(_),L.push(a),p=c),_=a;for(_&&b.push(_),b.push(65535),L.push(65535),de=2*(Q=L.length),te=2*Math.pow(Math.log(Q)/Math.LN2,2),j=Math.log(te/2)/Math.LN2,W=2*Q-te,f=[],ae=[],y=[],D=Ae=0,se=L.length;Ae<se;D=++Ae){if(F=L[D],m=b[D],F===65535){f.push(0),ae.push(0);break}if(F-(z=r[F].new)>=32768)for(f.push(0),ae.push(2*(y.length+Q-D)),a=ce=F;F<=m?ce<=m:ce>=m;a=F<=m?++ce:--ce)y.push(r[a].new);else f.push(z-F),ae.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*Q+2*y.length),Y.writeUInt16(0),Y.writeUInt16(de),Y.writeUInt16(te),Y.writeUInt16(j),Y.writeUInt16(W),be=0,O=b.length;be<O;be++)a=b[be],Y.writeUInt16(a);for(Y.writeUInt16(0),Re=0,E=L.length;Re<E;Re++)a=L[Re],Y.writeUInt16(a);for(Me=0,ne=f.length;Me<ne;Me++)c=f[Me],Y.writeUInt16(c);for(Qe=0,me=ae.length;Qe<me;Qe++)B=ae[Qe],Y.writeUInt16(B);for(ht=0,ye=y.length;ht<ye;ht++)S=y[ht],Y.writeUInt16(S);return{charMap:r,subtable:Y.data,maxGlyphID:v+1}}},t})(),aj=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)n=new S5(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,a;return n==null&&(n="macroman"),r=S5.encode(e,n),(a=new lu).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},t})(),UI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),zI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),$I=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)n=e.readByte(),a.push(this.names.push(e.readString(n)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},t})(),VI=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},HI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,a,o,u,c,f,p,m,b,j;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=m=0,b=r.length;m<b;o=++m)a=r[o],e.pos=a.offset,p=e.readString(a.length),u=new VI(p,a),f[j=a.nameID]==null&&(f[j]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t})(),WI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),GI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],n=p=0;0<=a?p<a:p>a;n=0<=a?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,b,j;for(j=[],p=0,m=(b=this.metrics).length;p<m;p++)o=b[p],j.push(o.advance);return j}).call(this),r=this.widths[this.widths.length-1],f=[],n=u=0;0<=a?u<a:u>a;n=0<=a?++u:--u)f.push(this.widths.push(r));return f},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),oj=[].slice,KI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,a,o,u,c,f,p,m,b;return e in this.cache?this.cache[e]:(o=this.file.loca,n=this.file.contents,r=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,u=(c=new lu(n.read(a))).readShort(),p=c.readShort(),b=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[e]=u===-1?new ZI(c,p,b,f,m):new QI(c,u,p,b,f,m),this.cache[e]))},t.prototype.encode=function(e,n,r){var a,o,u,c,f;for(u=[],o=[],c=0,f=n.length;c<f;c++)a=e[n[c]],o.push(u.length),a&&(u=u.concat(a.encode(r)));return o.push(u.length),{table:u,offsets:o}},t})(),QI=(function(){function t(e,n,r,a,o,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),ZI=(function(){function t(e,n,r,a,o){var u,c;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new lu(oj.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),YI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ml(t,sl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<r.length;++u)if(r[u]=a,o<n.length&&n[o]==u){++o,r[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},t})(),XI=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,a,o;for(n in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=a[r];return e},t.prototype.glyphsFor=function(e){var n,r,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in n=[],a)(r=a[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in f=this.glyphsFor(n))r=f[o],a[o]=r;return a},t.prototype.encode=function(e,n){var r,a,o,u,c,f,p,m,b,j,y,D,S,P,_;for(a in r=aj.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},_=r.charMap)y[(f=_[a]).old]=f.new;for(D in j=r.maxGlyphID,u)D in y||(y[D]=j++);return m=(function(I){var v,B;for(v in B={},I)B[I[v]]=v;return B})(y),b=Object.keys(m).sort(function(I,v){return I-v}),S=(function(){var I,v,B;for(B=[],I=0,v=b.length;I<v;I++)c=b[I],B.push(m[c]);return B})(),o=this.font.glyf.encode(u,S,y),p=this.font.loca.encode(o.offsets,S),P={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t})();un.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,a,o,u;if(Array.isArray(n))return"["+(function(){var c,f,p;for(p=[],c=0,f=n.length;c<f;c++)r=n[c],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in o=["<<"],n)u=n[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+n},e})();const Td=k.memo(function({data:e,section:n,showAddButton:r=!0,onUpdateRow:a,onRemoveRow:o,onAddRow:u}){return i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Details"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsx("tbody",{children:e.map((c,f)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:c.slNo}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:c.description,onChange:p=>a(n,f,"description",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-desc-${f}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:c.details,onChange:p=>a(n,f,"details",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-details-${f}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>o(n,f),disabled:e.length===1,className:"h-8 w-8 text-red-500","data-testid":`button-remove-${n}-${f}`,children:i.jsx(pr,{className:"h-4 w-4"})})})]},`${n}-${f}`))})]}),r&&i.jsx("div",{className:"p-3 border-t bg-slate-50 text-center",children:i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:()=>u(n),className:"text-[#d92134]","data-testid":`button-add-${n}`,children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add Ledger Entry"]})})]})}),Ph=()=>({id:`drawing-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fileName:"",mimeType:"",dataUrl:""}),lj=t=>{if(!Array.isArray(t)||t.length===0)return[Ph()];const e=t.filter(n=>!!(n&&typeof n=="object")).map((n,r)=>({id:typeof n.id=="string"&&n.id.trim()?n.id:`drawing-${Date.now()}-${r}`,fileName:typeof n.fileName=="string"?n.fileName:"",mimeType:typeof n.mimeType=="string"?n.mimeType:"",dataUrl:typeof n.dataUrl=="string"?n.dataUrl:""}));return e.length>0?e:[Ph()]},Kf=t=>lj(t),nf=(t,e)=>({id:`payment-section-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,heading:t,terms:e}),cj=()=>[nf("Supply and Erection",["20% advance on confirmation of order/PO.","40% after finalisation & submission of GA drawing.","30% before dispatch of material.","5% after Structure Erection.","5% after Building Handing over."]),nf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])],Sl=(t,e)=>{const n=(r,a)=>{const o=r.trim();return o?o.toLowerCase()==="peb - supply and erection"?"Supply and Erection":o:`Heading ${a+1}`};if(Array.isArray(t)&&t.length>0){const r=t.filter(a=>!!(a&&typeof a=="object")).map((a,o)=>({id:typeof a.id=="string"&&a.id.trim()?a.id:`payment-section-${Date.now()}-${o}`,heading:n(typeof a.heading=="string"?a.heading:"",o),terms:Array.isArray(a.terms)?a.terms.filter(u=>typeof u=="string"):[]})).filter(a=>a.terms.length>0||a.heading.trim().length>0);if(r.length>0)return r}return Array.isArray(e)&&e.length>0?[nf("Supply and Erection",e),nf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])]:cj()},JI={proposalTitle:"Techno-Commercial Offer",introSections:[{id:"intro1",type:"paragraph",content:"We are pleased to submit our proposal for the supply & erection of steel Structure against your subject enquiry."},{id:"intro2",type:"paragraph",content:"Our area of expertise is in complete design, manufacture, installation & commissioning of Heavy Structural Fabrication & Pre-Engineered Building."},{id:"intro3",type:"paragraph",content:"This proposal is detailed for your ready reference and includes scope of supply, building description, design loads/criteria, material specifications, time delivery, etc complete."},{id:"intro4",type:"paragraph",content:"We trust you will find that our proposal is in line with your requirements and we look forward to your valued order."}],paymentTerms:["15% advance on confirmation of Work order before Labour mobilization.","85% after fabrication Completion"],notes:["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables.","Closed workshop area to be provided for work by M/s company with fully equipped light and ventilations.","All Machines, Hydra, EOT cranes, raw materials, consumables, bed material. Skids for fabrication.","Detailing to be provided by your company","All shop drawing, BOQ, LOT SUMMARY to be provided by M/s company."],closingParagraphs:[{id:"closing1",type:"paragraph",content:"We hope you'll find our offer in line with your requirement & place your valued WO on us giving us an opportunity to serve you. However, please feel free to contact us for any sort of additional information that you may feel is required pertaining to this offer. We assure you our best support at all times."}],closingThanks:"Thanking you",closingCompanyName:"Revira Nexgen Structures Pvt. Ltd",scopeBriefDetails:[{slNo:1,description:"Building Nos.",details:"01"},{slNo:2,description:"Building Description",details:"PEB Shed"},{slNo:3,description:"Building built-up Area",details:"15494 SQF"}],scopeBasicBuilding:[{slNo:1,description:"Frame Type",details:"RF/MF"},{slNo:2,description:"Length (M)",details:"36"},{slNo:3,description:"Width (M) or Span",details:"21"},{slNo:4,description:"Clear Height (M)",details:"9.0"},{slNo:5,description:"Brick Wall Height (M)",details:"3.0"},{slNo:6,description:"Side wall Column Spacing (M)",details:"As Per Drawing"},{slNo:7,description:"Roof Slope",details:"1:10"},{slNo:8,description:"End Wall Column Spacing (M)",details:"As Per GA"},{slNo:9,description:"Bay Spacing (M)",details:"As Per GA"},{slNo:10,description:"Type of end frames",details:"Non-Expandable Frames"},{slNo:11,description:"Wind bracing",details:"As per GA drawing"},{slNo:12,description:"Roof cladding",details:"As per GA drawing"},{slNo:13,description:"Wall cladding",details:"As per GA drawing"}],scopeBuildingAdditions:[{slNo:1,description:"Canopy - Location",details:"As per approved drawing"},{slNo:2,description:"Framed openings",details:"As per approved drawing"}],steelWorkFinish:[{slNo:1,description:"Welding",details:"Continuous FCAW welding along with Intermediate, AWS D1.1"},{slNo:2,description:"Frames, Built-up / HR sections/Bracings",details:"Mechanical Cleaning with swipe blast on heavy mill scale and one coat of primer and one coat of Finish Enamel paint"},{slNo:3,description:"Purlins / Girts",details:"ASTM A653"},{slNo:4,description:"Profile sheets",details:"Bare-0.47 mm thk and colour -0.5 mm thk blue RAL5012"}],designLoads:[{slNo:1,description:"Dead load",details:"0.15 KN/M2"},{slNo:2,description:"Live load",details:"0.57 KN/M2"},{slNo:3,description:"Crane Capacity",details:"-"},{slNo:4,description:"Wind load (Kmph or m/sec)",details:"44 M/sec"},{slNo:5,description:"Mezzanine Load -Kg/SQM",details:"-"},{slNo:6,description:"Slab Thickness (MM)",details:"-"},{slNo:7,description:"Seismic load (Zone no.)",details:"III"}],applicableCodes:["Frame members are designed in accordance with AISC-LRFD (American Institute of Steel Construction).","Cold Formed members are designed in accordance with the AISC For Use of Cold-Formed Light Gauge Steel Structural Member's In General Building Construction.","Deflection as per IS 800-2007.","All welding is done in accordance with the 2000 Edition of the American Welding Society (AWS D1.1).","Structural Welding Code-Steel. All Welders are qualified for the type of welds performed.",'Manufacturing dimensional tolerances are in accordance with the requirements of the 1996 Edition of the Metal Building Manufacturer Association (MBMA) of the USA.; "Low rise building systems Manual".'],materialSpecs:[{slNo:1,description:"Primary Members - Built up sections (Make  SAIL/JINDAL/TATA)",details:"Min. Y.S. 350 MPA"},{slNo:2,description:"Hot Rolled Sections - Channels (Make  TATA/Apollo/SAIL)",details:"IS: 2062 / A 572, Grade 36, Min. Y.S. 250 MPA"},{slNo:3,description:"Purlins/Girts (Make  JSW/TATA)",details:"ASTM A653"},{slNo:4,description:"Anchor bolts",details:"IS 2062 E250A"},{slNo:5,description:"Primary Connection bolts Electroplated/Pre galvanised",details:"High Strength Bolts, IS: 1367 / 8.8 Grade"},{slNo:6,description:"Secondary connection bolts Pre galvanised",details:"Bolt as per ASTM A 325, Grade 4.6"}],drawingsDelivery:["RNSPL will issue shop Approval Drawings within 1 week from date of signing contract/issue of Purchase Order and receipt of advance payment.","BUYER must return the accepted approval drawings preferably within 1 week thereafter; otherwise, may result in revision to delivery commitment.","Anchor bolts & Layout drawings for fixing anchor bolts will be provided within 10 days from the date of receipt of Advance payment.","Dispatch of materials will start as per agreed time frame from the date of receipt of signed Approval drawings with receipt of payment as per agreed terms."],erectionScopeClient:["After completion of Anchor bolt fixing, back filling of the murum up to the FFL level & rolling is under the scope of the client.","Anchor bolt shall be provided to site and fixing in presence of our engineer at site only.","Minimum 15 days curing time is to be given after Anchor Bolt Casting is done.","Free Power and water to be provided close to site.","If power not available, DG has to be provided.","We assumed that, crane can move inside the proposed building while erecting the main frames.","Security of the material is under the scope of the client.","Shelter/accommodation to be provided to the workers till completion of the work."],erectionScopeCompany:["Unloading and stacking of the material at site, Erection of material as per RNSPL specifications.","Anchor Bolt Supply & Periodic Supervision is in our Scope.","Alignment of columns and rafters.","Plumb and checking water level of columns & Portal frame.","Cleaning and touch up paint work for the structure on damaged surfaces during transportation and site movement.","Alignment of Purlins and Girts.","Fixing of roof sheeting, wall sheeting and accessories."],paymentTermSections:cj(),commercialTerms:[{slNo:1,description:"Payment Terms including taxes",conditions:"Supply and Erection amount: 1. 20% advance on confirmation of order/PO. 2. 40% after finalisation & submission of GA drawing. 3. 30% before dispatch of material. 4. 5% after Structure Erection. 5. 5% after Building Handing over."},{slNo:2,description:"Delivery period",conditions:"Delivery as per mutually agreed from the date of receipt of signed approved drawings and receipt of payment as per agreed terms."},{slNo:3,description:"Erection period",conditions:"Erection Period as per mutually agreed after delivery of complete material."},{slNo:4,description:"GST",conditions:"Extra @ 18% for supply and Erection both."},{slNo:5,description:"Scope of contract",conditions:"This Contract is the only Agreement between the SELLER & BUYER and the terms which have been Expressly stated will be binding."},{slNo:6,description:"Proposal validity",conditions:"This proposal is valid for (5) days from the date of this proposal."},{slNo:7,description:"Erection drawing",conditions:"The SELLER will furnish the BUYER with all standard erection drawings required for erection of buildings."},{slNo:8,description:"Specification changes",conditions:"SELLER reserves the right to modify design and substitute material equal or superior to originally specified."},{slNo:9,description:"Change in scope",conditions:"Any change to the stated scope of supply may lead to variation in price and delivery period."},{slNo:10,description:"Our liability",conditions:"SELLER liability is restricted to scope of this contract only."},{slNo:11,description:"Ownership Of Un-Approved Material",conditions:"All unapproved material supplied to site shall be the property of SELLER."},{slNo:12,description:"Warranty",conditions:"Products supplied are warranted against defective material & workmanship for One year."},{slNo:13,description:"Permits",conditions:"SELLER shall not be responsible for obtaining permits to erect or install any product."},{slNo:14,description:"Force Majeure",conditions:"SELLER shall not be liable for delays due to circumstances beyond control."},{slNo:15,description:"Weighment",conditions:"Weight mentioned in SELLER Bill of Supply will be final for billing purposes."},{slNo:16,description:"Safety at site",conditions:"BUYER shall provide secured area for unloading and storing all material."},{slNo:17,description:"Exclusions",conditions:"Anything not mentioned in the offer."}],bankDetails:[{particular:"Account holder",value:"REVIRA NEXGEN STRUCTURES PRIVATE LIMITED"},{particular:"Bank Name",value:"YES Bank"},{particular:"A/C No.",value:"073361900002657"},{particular:"IFSC Code",value:"YESB0000733"}],uploadDrawings:[Ph()]},uj=["scopeBrief","scopeBasic","scopeAdditions","steelWork","designLoads","applicableCodes","materialSpecs","drawingsDelivery","erectionScopeClient","erectionScopeCompany","commercialPrice","paymentTerms","commercialTerms"],dj=["commercialPrice","paymentTerms"],Xf={scopeBrief:"SCOPE OF SUPPLY - BRIEF DETAILS",scopeBasic:"SCOPE OF SUPPLY - BASIC BUILDING DESCRIPTION",scopeAdditions:"STANDARD BUILDING ADDITIONS (CANOPY / FASCIA / LINER / PARTITIONS)",steelWork:"STEEL WORK FINISH",designLoads:"DESIGN LOADS",applicableCodes:"APPLICABLE CODES for Design",materialSpecs:"MATERIAL SPECIFICATIONS",drawingsDelivery:"DRAWINGS & DELIVERY",erectionScopeClient:"ERECTION SCOPES - SCOPE OF CLIENT",erectionScopeCompany:"ERECTION SCOPES - SCOPE OF COMPANY",commercialPrice:"COMMERCIAL PRICE & PAYMENT",paymentTerms:"PAYMENT TERMS",commercialTerms:"COMMERCIAL TERMS & CONDITIONS"},Op=t=>(t?uj:dj).map((n,r)=>({id:`${n}-${r+1}`,type:n,heading:Xf[n]}));function j5(){const{projectId:t,quotationId:e}=Zu(),[,n]=za(),{toast:r}=$a(),{data:a}=Ta(),o=k.useRef(null),[u,c]=k.useState({quotationNumber:"",revision:"R-001",enquiryNumber:"",subject:"Supply & erection of Steel Structures for PEB Shed",contactName:"Hareram R Sharma",contactMobile:"8390491843",contactEmail:"Hareram.sharma@reviranexgen.com",buildingDescription:"PEB Shed",buildingArea:"",frameType:"RF/MF",length:"",width:"",clearHeight:"",roofSlope:"1:10",paymentTerms:"",notes:"",proposalTitle:"Techno-Commercial Offer",toLabel:"To",msLabel:"M/s"}),[f,p]=k.useState([{serialNo:1,description:"Fabrication of Structural steel hot rolled section on job work-labour basis i.e. Pipe rack str excluding detailing.",unit:"Rs/MT",quantity:600,rate:7440,amount:4464e3,remarks:""}]),[m,b]=k.useState(JI),[j,y]=k.useState(null),[D,S]=k.useState(null),[P,_]=k.useState(null),[I,v]=k.useState(null),[B,ee]=k.useState({}),[ae,W]=k.useState(null),[te,Q]=k.useState(null),[de,F]=k.useState(null),[L,z]=k.useState(null),[Y,Ce]=k.useState(null),[_e,Ae]=k.useState(null),[ce,ge]=k.useState(!1),[De,se]=k.useState(!1),[O,E]=k.useState(!1),[ne,me]=k.useState(!1),[ye,be]=k.useState(!1),[Re,Ie]=k.useState(!1),[Me,Qe]=k.useState({to:"",subject:"",message:""}),[ht,vt]=k.useState({mobile:"",message:""}),[Dt,le]=k.useState(null),[xt,xe]=k.useState([]),[X,M]=k.useState({}),{data:ve,isLoading:re}=Ln({queryKey:["/revira/api/projects",t],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${t}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch project");return q.json()},enabled:!!t}),{data:R,isLoading:H}=Ln({queryKey:["/revira/api/clients",ve?.clientId],queryFn:async()=>{const q=await fetch(`/revira/api/clients/${ve?.clientId}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch client");return q.json()},enabled:!!ve?.clientId}),{data:je}=Ln({queryKey:["/revira/api/branding"],enabled:!!a}),{data:we}=Ln({queryKey:["/revira/api/projects",t,"quotation",e||"latest"],queryFn:async()=>{if(e){const ue=await fetch(`/revira/api/quotations/${e}`,{credentials:"include"});if(!ue.ok)throw new Error("Failed to fetch quotation");return ue.json()}const q=await fetch(`/revira/api/projects/${t}/quotation`,{credentials:"include"});if(!q.ok){if(q.status===404)return null;throw new Error("Failed to fetch quotation")}return q.json()},enabled:!!t}),{data:ke}=Ln({queryKey:["/revira/api/quotations",we?.id,"items"],queryFn:async()=>{const q=await fetch(`/revira/api/quotations/${we?.id}/items`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch items");return q.json()},enabled:!!we?.id}),{data:Ve}=Ln({queryKey:["/revira/api/projects",t,"quotation-versions"],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${t}/quotation-versions`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch versions");return q.json()},enabled:!!t}),at=k.useCallback(()=>ve?.quotationType==="Supply and Fabrication"?uj:dj,[ve?.quotationType]),ct=k.useCallback(q=>{const ue=new Set(at());if(!Array.isArray(q))return Op(ve?.quotationType==="Supply and Fabrication");const oe=q.filter(Te=>!!(Te&&typeof Te=="object"&&"id"in Te&&"type"in Te&&typeof Te.id=="string"&&typeof Te.type=="string")).filter(Te=>ue.has(Te.type)).map(Te=>({id:Te.id,type:Te.type,heading:typeof Te.heading=="string"&&Te.heading.trim().length>0?Te.heading:Xf[Te.type]}));if(!oe.some(Te=>Te.type==="paymentTerms")&&ue.has("paymentTerms")){const Te={id:`paymentTerms-${Date.now()}`,type:"paymentTerms",heading:Xf.paymentTerms},Ne=oe.findIndex(At=>At.type==="commercialPrice");Ne>=0?oe.splice(Ne+1,0,Te):oe.push(Te)}return oe.map(Te=>{if(Te.type!=="commercialPrice")return Te;const Ne=Te.heading.trim().toUpperCase();return Ne==="COMMERCIAL PRICE"||Ne==="COMMERCIAL PRICE & PAYMENT TERMS"?{...Te,heading:"COMMERCIAL PRICE & PAYMENT"}:Te})},[at,ve?.quotationType]);k.useEffect(()=>{if(ve&&R&&!we){const q=ve.quotationType==="Supply and Fabrication"?"RNS-Peb":ve.quotationType==="Structural Fabrication"?"RNS-SF":"RNS-JW",oe=new Date().toLocaleString("en-US",{month:"short",year:"numeric"}).toUpperCase().replace(" ","-"),Te=ve.quotationType==="Supply and Fabrication"?"Supply & erection of Steel Structures for PEB Shed":ve.quotationType==="Structural Fabrication"?"Structural Fabrication - Steel Structures":"Job Work - Steel Structures";c(Ne=>({...Ne,quotationNumber:`RNS/${oe}/${R.name}/RNS-${String(ve.id).padStart(3,"0")}`,enquiryNumber:`${q}-RNS-${String(ve.id).padStart(3,"0")}`,subject:Te})),xe(Op(ve.quotationType==="Supply and Fabrication"))}},[ve,R,we]),k.useEffect(()=>{if(we){let q=null;if(we.contentSections)try{q=JSON.parse(we.contentSections);const ue=Array.isArray(q?.paymentTerms)?q.paymentTerms.filter(oe=>typeof oe=="string"):[];b(oe=>({...oe,...q,paymentTermSections:Sl(q?.paymentTermSections,ue),uploadDrawings:lj(q?.uploadDrawings)})),xe(ct(q?.accordionBlocks))}catch(ue){console.error("Failed to parse content sections:",ue),xe(Op(ve?.quotationType==="Supply and Fabrication"))}else xe(Op(ve?.quotationType==="Supply and Fabrication"));c({quotationNumber:we.quotationNumber,revision:we.revision,enquiryNumber:we.enquiryNumber,subject:we.subject,contactName:we.contactName,contactMobile:we.contactMobile,contactEmail:we.contactEmail,buildingDescription:we.buildingDescription||"",buildingArea:we.buildingArea||"",frameType:we.frameType||"",length:we.length||"",width:we.width||"",clearHeight:we.clearHeight||"",roofSlope:we.roofSlope||"",paymentTerms:we.paymentTerms||"",notes:we.notes||"",proposalTitle:q?.proposalTitle||"Techno-Commercial Offer",toLabel:q?.toLabel||"To",msLabel:q?.msLabel||"M/s"})}},[we,ct,ve?.quotationType]),k.useEffect(()=>{ke&&ke.length>0&&p(ke.map(q=>({id:q.id,serialNo:q.serialNo,description:q.description,unit:q.unit,quantity:Number(q.quantity)||0,rate:Number(q.rate)||0,amount:Number(q.amount)||0,remarks:q.remarks||""})))},[ke]),k.useEffect(()=>{M(q=>{const ue={};return xt.forEach(oe=>{ue[oe.id]=q[oe.id]??!0}),ue})},[xt]),k.useEffect(()=>{const q=Sl(m.paymentTermSections,m.paymentTerms);ee(ue=>{const oe={};return q.forEach(Te=>{oe[Te.id]=ue[Te.id]??!0}),oe})},[m.paymentTermSections,m.paymentTerms]);const _t=Tr({mutationFn:async()=>{const ue=await(await wn("POST","/revira/api/quotations",{projectId:Number(t),...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:xt})})).json();for(const oe of f)oe.description.trim()&&await wn("POST",`/revira/api/quotations/${ue.id}/items`,{serialNo:oe.serialNo,description:oe.description,unit:oe.unit,quantity:String(oe.quantity),rate:String(oe.rate),amount:String(oe.amount),remarks:oe.remarks});return ue},onSuccess:q=>{On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation","latest"]}),On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",q.id]}),On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),n(`/revira/projects/${t}/quotation/${q.id}`),r({title:"Quotation saved",description:"The quotation has been created successfully."})},onError:q=>{r({title:"Error",description:q.message||"Failed to create quotation",variant:"destructive"})}}),kt=Tr({mutationFn:async()=>{if(we){if(await wn("PUT",`/revira/api/quotations/${we.id}`,{...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:xt})}),ke)for(const q of ke)await wn("DELETE",`/revira/api/quotation-items/${q.id}`);for(const q of f)q.description.trim()&&await wn("POST",`/revira/api/quotations/${we.id}/items`,{serialNo:q.serialNo,description:q.description,unit:q.unit,quantity:String(q.quantity),rate:String(q.rate),amount:String(q.amount),remarks:q.remarks})}},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",e||"latest"]}),On.invalidateQueries({queryKey:["/revira/api/quotations",we?.id,"items"]}),On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),r({title:"Quotation updated",description:"The quotation has been updated successfully."})},onError:q=>{r({title:"Error",description:q.message||"Failed to update quotation",variant:"destructive"})}}),cr=Tr({mutationFn:async()=>{if(!we)throw new Error("No quotation to duplicate");return(await wn("POST",`/revira/api/quotations/${we.id}/duplicate`)).json()},onSuccess:q=>{On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),r({title:"Quotation duplicated",description:`Created new version: ${q.revision}`}),n(`/revira/projects/${t}/quotation/${q.id}`)},onError:q=>{r({title:"Error",description:q.message||"Failed to duplicate quotation",variant:"destructive"})}}),yn=()=>{we?kt.mutate():_t.mutate()},Vt=()=>{p([...f,{serialNo:f.length+1,description:"",unit:"Rs/MT",quantity:0,rate:0,amount:0,remarks:""}])},Mt=q=>{if(f.length>1){const ue=f.filter((oe,Te)=>Te!==q).map((oe,Te)=>({...oe,serialNo:Te+1}));p(ue)}},tn=(q,ue,oe)=>{const Te=[...f];if(ue==="quantity"||ue==="rate"||ue==="amount"?Te[q]={...Te[q],[ue]:Number(oe)||0}:Te[q]={...Te[q],[ue]:oe},ue==="quantity"||ue==="rate"){const Ne=Te[q].quantity,At=Te[q].rate;Te[q].amount=Ne*At}p(Te)},Ke=()=>f.reduce((q,ue)=>q+ue.amount,0),ot=q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(q).replace(""," "),Xe=()=>new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),an=(q,ue)=>{b(oe=>({...oe,introSections:oe.introSections.map(Te=>Te.id===q?{...Te,content:ue}:Te)}))},er=()=>{const q=`intro${Date.now()}`;b(ue=>({...ue,introSections:[...ue.introSections,{id:q,type:"paragraph",content:"New paragraph..."}]}))},vn=q=>{b(ue=>({...ue,introSections:ue.introSections.filter(oe=>oe.id!==q)}))},Yt=()=>{b(q=>({...q,notes:[...q.notes,"New note..."]})),S(m.notes.length)},Dn=(q,ue)=>{b(oe=>({...oe,notes:oe.notes.map((Te,Ne)=>Ne===q?ue:Te)}))},ms=q=>{b(ue=>({...ue,notes:ue.notes.filter((oe,Te)=>Te!==q)}))},tr=()=>{b(q=>({...q,paymentTermSections:[...Sl(q.paymentTermSections),nf("New Heading",["New payment term..."])]}))},vr=(q,ue)=>{b(oe=>({...oe,paymentTermSections:Sl(oe.paymentTermSections).map(Te=>Te.id===q?{...Te,heading:ue}:Te)}))},ur=q=>{b(ue=>({...ue,paymentTermSections:(()=>{const oe=Sl(ue.paymentTermSections).filter(Te=>Te.id!==q);return oe.length>0?oe:[nf("New Heading",["New payment term..."])]})()}))},on=q=>{b(ue=>({...ue,paymentTermSections:Sl(ue.paymentTermSections).map(oe=>oe.id===q?{...oe,terms:[...oe.terms,"New payment term..."]}:oe)}))},Rs=(q,ue,oe)=>{b(Te=>({...Te,paymentTermSections:Sl(Te.paymentTermSections).map(Ne=>Ne.id===q?{...Ne,terms:Ne.terms.map((At,An)=>An===ue?oe:At)}:Ne)}))},Ss=(q,ue)=>{b(oe=>({...oe,paymentTermSections:Sl(oe.paymentTermSections).map(Te=>Te.id===q?{...Te,terms:Te.terms.filter((Ne,At)=>At!==ue)}:Te)}))},os=()=>{b(q=>({...q,drawingsDelivery:[...q.drawingsDelivery,"New drawings/delivery item..."]})),W(m.drawingsDelivery.length)},Ds=(q,ue)=>{b(oe=>({...oe,drawingsDelivery:oe.drawingsDelivery.map((Te,Ne)=>Ne===q?ue:Te)}))},nr=q=>{b(ue=>({...ue,drawingsDelivery:ue.drawingsDelivery.filter((oe,Te)=>Te!==q)}))},Rr=()=>{b(q=>({...q,erectionScopeClient:[...q.erectionScopeClient,"New client scope item..."]})),Q(m.erectionScopeClient.length)},xr=(q,ue)=>{b(oe=>({...oe,erectionScopeClient:oe.erectionScopeClient.map((Te,Ne)=>Ne===q?ue:Te)}))},gs=q=>{b(ue=>({...ue,erectionScopeClient:ue.erectionScopeClient.filter((oe,Te)=>Te!==q)}))},Qr=()=>{b(q=>({...q,erectionScopeCompany:[...q.erectionScopeCompany,"New company scope item..."]})),F(m.erectionScopeCompany.length)},Er=(q,ue)=>{b(oe=>({...oe,erectionScopeCompany:oe.erectionScopeCompany.map((Te,Ne)=>Ne===q?ue:Te)}))},Ws=q=>{b(ue=>({...ue,erectionScopeCompany:ue.erectionScopeCompany.filter((oe,Te)=>Te!==q)}))},Zr=()=>{b(q=>({...q,applicableCodes:[...q.applicableCodes,"New applicable code..."]})),z(m.applicableCodes.length)},Is=(q,ue)=>{b(oe=>({...oe,applicableCodes:oe.applicableCodes.map((Te,Ne)=>Ne===q?ue:Te)}))},Yr=q=>{b(ue=>({...ue,applicableCodes:ue.applicableCodes.filter((oe,Te)=>Te!==q)}))},Fs=()=>{const q=m.commercialTerms.length+1;b(ue=>({...ue,commercialTerms:[...ue.commercialTerms,{slNo:q,description:"New Term",conditions:"Enter conditions..."}]})),Ce(m.commercialTerms.length)},dr=(q,ue,oe)=>{b(Te=>({...Te,commercialTerms:Te.commercialTerms.map((Ne,At)=>At===q?{...Ne,[ue]:oe}:Ne)}))},ls=q=>{b(ue=>({...ue,commercialTerms:ue.commercialTerms.filter((oe,Te)=>Te!==q).map((oe,Te)=>({...oe,slNo:Te+1}))}))},ai=()=>{b(q=>({...q,bankDetails:[...q.bankDetails,{particular:"New Field",value:"Enter value..."}]})),Ae(m.bankDetails.length)},Mi=(q,ue,oe)=>{b(Te=>({...Te,bankDetails:Te.bankDetails.map((Ne,At)=>At===q?{...Ne,[ue]:oe}:Ne)}))},Bi=q=>{b(ue=>({...ue,bankDetails:ue.bankDetails.filter((oe,Te)=>Te!==q)}))},qi=(q,ue)=>{b(oe=>({...oe,closingParagraphs:oe.closingParagraphs.map(Te=>Te.id===q?{...Te,content:ue}:Te)}))},Bn=(q,ue)=>{const oe=ue.target.files?.[0];if(!oe)return;const Te=oe.type.startsWith("image/"),Ne=oe.type==="application/pdf"||oe.name.toLowerCase().endsWith(".pdf");if(!Te&&!Ne){r({title:"Unsupported file type",description:"Please upload an image or a PDF file.",variant:"destructive"});return}if(oe.size>10*1024*1024){r({title:"File too large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}const At=new FileReader;At.onloadend=()=>{const An=typeof At.result=="string"?At.result:"";b(Gt=>({...Gt,uploadDrawings:Kf(Gt.uploadDrawings).map(hr=>hr.id===q?{...hr,fileName:oe.name,mimeType:Ne?"application/pdf":oe.type||"image/png",dataUrl:An}:hr)}))},At.readAsDataURL(oe)},vi=()=>{b(q=>({...q,uploadDrawings:[...Kf(q.uploadDrawings),Ph()]}))},hn=q=>{b(ue=>{const oe=Kf(ue.uploadDrawings).filter(Te=>Te.id!==q);return{...ue,uploadDrawings:oe.length>0?oe:[Ph()]}})},Nn=k.useCallback((q,ue,oe,Te)=>{b(Ne=>({...Ne,[q]:Ne[q].map((At,An)=>An===ue?{...At,[oe]:Te}:At)}))},[]),gn=k.useCallback(q=>{b(ue=>{const oe=ue[q];return{...ue,[q]:[...oe,{slNo:oe.length+1,description:"",details:""}]}})},[]),Ht=k.useCallback((q,ue)=>{b(oe=>{const Te=oe[q];return Te.length>1?{...oe,[q]:Te.filter((Ne,At)=>At!==ue).map((Ne,At)=>({...Ne,slNo:At+1}))}:oe})},[]),Xt=k.useCallback(q=>X[q]??!0,[X]),pt=k.useCallback(q=>{M(ue=>({...ue,[q]:!(ue[q]??!0)}))},[]),it=k.useCallback((q,ue)=>{M(oe=>({...oe,[q]:ue}))},[]),ft=k.useCallback((q,ue)=>{q===ue||q<0||ue<0||xe(oe=>{if(q>=oe.length||ue>=oe.length)return oe;const Te=[...oe],[Ne]=Te.splice(q,1);return Te.splice(ue,0,Ne),Te})},[]),Ze=k.useCallback(q=>{xe(ue=>ue.filter(oe=>oe.id!==q)),M(ue=>{const{[q]:oe,...Te}=ue;return Te})},[]),dt=k.useCallback(q=>{let ue=null;xe(oe=>{const Te=oe.findIndex(Gt=>Gt.id===q);if(Te===-1)return oe;const Ne=oe[Te],At={id:`${Ne.type}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,type:Ne.type,heading:Ne.heading};ue=At.id;const An=[...oe];return An.splice(Te+1,0,At),An}),ue&&M(oe=>({...oe,[ue]:!0}))},[]),Lt=k.useCallback((q,ue)=>{xe(oe=>oe.map(Te=>Te.id===q?{...Te,heading:ue}:Te))},[]),mt=k.useCallback(q=>xt.filter(ue=>ue.type===q),[xt]),Tt=k.useCallback(q=>xt.findIndex(ue=>ue.id===q),[xt]),St=k.useCallback(q=>{const ue=Tt(q.id);return{isEditingHeading:Dt===q.id,onStartEditHeading:()=>le(q.id),onHeadingChange:Te=>Lt(q.id,Te),onHeadingBlur:()=>{const Te=xt.find(Ne=>Ne.id===q.id);Te&&!Te.heading.trim()&&Lt(q.id,Xf[q.type]),le(null)},onMoveUp:ue>0?()=>ft(ue,ue-1):void 0,onMoveDown:ue>=0&&ue<xt.length-1?()=>ft(ue,ue+1):void 0,onDuplicate:()=>dt(q.id),onDelete:()=>Ze(q.id),canMoveUp:ue>0,canMoveDown:ue>=0&&ue<xt.length-1}},[xt,dt,Dt,Tt,ft,Ze,Lt]),It=async q=>{const ue=q?.save??!0,oe=q?.silent??!1,Te=q?.returnDataUri??!1;me(!0);try{const Ne=new un({orientation:"portrait",unit:"mm",format:"a4"}),At=210,An=297,Gt=15,hr=At-Gt*2,Xr=35,_r=30,cs=qe=>qe*.2646,Dr=cs(80),us=cs(50),Xi=cs(80);let et=Xr+10,qn=1;const Bl=qe=>new Promise((Je,yt)=>{const jt=new Image;jt.crossOrigin="anonymous",jt.onload=()=>{const qt=document.createElement("canvas");qt.width=jt.width,qt.height=jt.height,qt.getContext("2d")?.drawImage(jt,0,0),Je(qt.toDataURL("image/png"))},jt.onerror=yt,jt.src=qe});let il=null,xi=null,ga=null;try{je?.headerUrl&&(il=await Bl(je.headerUrl)),je?.footerUrl&&(xi=await Bl(je.footerUrl)),je?.stampUrl&&(ga=await Bl(je.stampUrl))}catch(qe){console.warn("Failed to load branding images:",qe)}const Ha=qe=>{il&&Ne.addImage(il,"PNG",0,0,At,Xr),xi&&Ne.addImage(xi,"PNG",0,An-_r,At,_r),ga&&Ne.addImage(ga,"PNG",At-us-Dr,An-Xi-Dr,Dr,Dr),Ne.setFontSize(8),Ne.setTextColor(128,128,128),Ne.text(`Page ${qe}`,At/2,An-8,{align:"center"})},Ir=qe=>et+qe>An-_r-10?(Ne.addPage(),qn++,Ha(qn),et=Xr+10,!0):!1,ds=(qe,Je=14,yt="#1e3a5f",jt=!0)=>{et+=10,Ir(15),jt&&Je>=12?(Ne.setFillColor("#d92134"),Ne.rect(Gt,et-4,4,5,"F"),Ne.setFontSize(Je),Ne.setTextColor(yt),Ne.setFont("helvetica","bold"),Ne.text(qe,Gt+7,et)):(Ne.setFontSize(Je),Ne.setTextColor(yt),Ne.setFont("helvetica","bold"),Ne.text(qe,Gt,et)),et+=5.5},Ui=(qe,Je=10,yt=0)=>{Ne.setFontSize(Je),Ne.setTextColor(0,0,0),Ne.setFont("helvetica","normal"),Ne.splitTextToSize(qe,hr).forEach(qt=>{Ir(6),Ne.text(qt,Gt+yt,et),et+=5})},Os=(qe,Je,yt)=>{et+=3;const jt=8,qt=2,ln="#fff5f5",En="#eeb7b7";Ir(jt+5),Ne.setFillColor(ln),Ne.rect(Gt,et-5,hr,jt,"F"),Ne.setDrawColor(En),Ne.setLineWidth(.2),Ne.rect(Gt,et-5,hr,jt,"S");let ir=Gt;Ne.setFontSize(9),Ne.setTextColor(0,0,0),Ne.setFont("helvetica","bold"),qe.forEach((mr,Hn)=>{Ne.line(ir,et-5,ir,et-5+jt),Ne.text(mr,ir+qt,et),ir+=yt[Hn]}),Ne.line(ir,et-5,ir,et-5+jt),et+=jt,Ne.setFont("helvetica","normal"),Je.forEach((mr,Hn)=>{const Ar=mr.map((Gs,Vi)=>Ne.splitTextToSize(Gs,yt[Vi]-qt*2)),Fr=Math.max(...Ar.map(Gs=>Gs.length)),Or=Math.max(jt,Fr*4+qt);Ir(Or),Hn%2===0&&(Ne.setFillColor(245,245,245),Ne.rect(Gt,et-5,hr,Or,"F")),Ne.setDrawColor(En),Ne.rect(Gt,et-5,hr,Or,"S");let zt=Gt;Ar.forEach((Gs,Vi)=>{Ne.line(zt,et-5,zt,et-5+Or),Gs.forEach((Ao,ol)=>{Ne.text(Ao,zt+qt,et-1+ol*4)}),zt+=yt[Vi]}),Ne.line(zt,et-5,zt,et-5+Or),et+=Or}),et+=1.5},Co=async()=>{const qe=window.pdfjsLib;if(qe)return qe;await new Promise((yt,jt)=>{const qt=document.querySelector('script[data-pdfjs="true"]');if(qt){qt.addEventListener("load",()=>yt(),{once:!0}),qt.addEventListener("error",()=>jt(new Error("Failed to load PDF renderer.")),{once:!0});return}const ln=document.createElement("script");ln.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",ln.async=!0,ln.dataset.pdfjs="true",ln.onload=()=>yt(),ln.onerror=()=>jt(new Error("Failed to load PDF renderer.")),document.head.appendChild(ln)});const Je=window.pdfjsLib;if(!Je)throw new Error("PDF renderer is unavailable.");return Je.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",Je},_i=async qe=>{const Je=await Co(),yt=await(await fetch(qe)).arrayBuffer(),jt=await Je.getDocument({data:yt}).promise,qt=[],ln=Math.min(jt.numPages,30);for(let En=1;En<=ln;En++){const ir=await jt.getPage(En),mr=ir.getViewport({scale:1.5}),Hn=document.createElement("canvas");Hn.width=mr.width,Hn.height=mr.height;const Ar=Hn.getContext("2d");Ar&&(await ir.render({canvasContext:Ar,viewport:mr}).promise,qt.push(Hn.toDataURL("image/jpeg",.9)))}return qt},_o=(qe,Je)=>{Ne.addPage(),qn++,Ha(qn),et=Xr+10,Ne.setFont("helvetica","bold"),Ne.setFontSize(10),Ne.setTextColor(30,58,95),Ne.splitTextToSize(Je,hr).forEach(zt=>{Ne.text(zt,Gt,et),et+=5}),et+=1;const jt=Ne.getImageProperties(qe),qt=hr,ln=An-_r-et-8,En=qt/jt.width,ir=ln/jt.height,mr=Math.min(En,ir),Hn=jt.width*mr,Ar=jt.height*mr,Fr=Gt+(qt-Hn)/2,Or=qe.startsWith("data:image/png")?"PNG":"JPEG";Ne.addImage(qe,Or,Fr,et,Hn,Ar)};Ha(1),Ne.setFontSize(10),Ne.setTextColor(0,0,0),Ne.text(`Ref.: ${u.quotationNumber}`,Gt,et),Ne.text(`Date: ${new Date().toLocaleDateString("en-IN")}, Revision: ${u.revision}`,At-Gt,et,{align:"right"}),et+=8,Ne.text(`Enquiry no.: ${u.enquiryNumber}`,Gt,et),et+=8,Ne.text(`Project Location: ${ve?.location||"-"}`,Gt,et),et+=15,Ne.setFontSize(18),Ne.setTextColor("#da2032"),Ne.setFont("helvetica","bold"),Ne.text(u.proposalTitle||"Techno-Commercial Offer",At/2,et,{align:"center"}),et+=15,Ne.setFontSize(12),Ne.setTextColor(0,0,0),Ne.setFont("helvetica","bold"),Ne.text(u.toLabel||"To",Gt,et),et+=6,Ne.setFont("helvetica","normal"),Ne.text(`${u.msLabel||"M/s"} ${R?.name||"-"}`,Gt,et),et+=6,Ne.setFontSize(10),Ne.setFont("helvetica","normal"),Ne.text(`${R?.location||""}`,Gt,et),et+=12,Ne.setFont("helvetica","bold"),Ne.text(`Subject: ${u.subject}`,Gt,et),et+=12,Ne.setFont("helvetica","normal"),m.introSections.forEach(qe=>{Ui(qe.content,10,0)}),et+=7,Ne.setFont("helvetica","normal"),Ne.setFontSize(10),Ne.text("Regards,",Gt,et),et+=6,Ne.setFont("helvetica","bold"),Ne.text(u.contactName,Gt,et),et+=5,Ne.setFont("helvetica","normal"),Ne.text(`Mo: ${u.contactMobile}`,Gt,et),et+=5,Ne.text(`Email: ${u.contactEmail}`,Gt,et),et+=5.5,Ne.addPage(),qn++,Ha(qn),et=Xr+10;const ql=qn;Ne.setFontSize(16),Ne.setTextColor("#1e3a5f"),Ne.setFont("helvetica","bold"),Ne.text("INDEX",At/2,et,{align:"center"}),et+=15;const Ul=et,co=[];et+=80,Ne.addPage(),qn++,Ha(qn),et=Xr+10,xt.forEach((qe,Je)=>{const yt=qe.heading&&qe.heading.trim().length>0?qe.heading:Xf[qe.type]||`Section ${Je+1}`,jt=yt,qt=xt.slice(0,Je).filter(En=>En.heading===qe.heading).length,ln=qt>0?`${jt} (${qt+1})`:jt;switch(co.push({title:ln,page:qn}),qe.type){case"scopeBrief":Ir(50),ds(yt,14,"#1e3a5f"),Os(["Sl. No.","Description","Details"],m.scopeBriefDetails.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[25,90,65]);break;case"scopeBasic":Ir(50),ds(yt,14,"#1e3a5f"),Os(["Sl. No.","Description","Details"],m.scopeBasicBuilding.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[25,90,65]);break;case"scopeAdditions":Ir(50),ds(yt,14,"#1e3a5f"),Os(["Sr. No.","Description","Details"],m.scopeBuildingAdditions.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[25,90,65]);break;case"steelWork":Ir(50),ds(yt,14,"#1e3a5f"),Os(["No.","Description","Details"],m.steelWorkFinish.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[20,80,80]);break;case"designLoads":Ir(50),ds(yt,14,"#1e3a5f"),Os(["Sr. No.","Description","Details"],m.designLoads.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[25,90,65]);break;case"applicableCodes":Ir(45),ds(yt,14,"#1e3a5f"),m.applicableCodes.forEach(zt=>{Ui(` ${zt}`,9,5)});break;case"materialSpecs":Ir(50),ds(yt,14,"#1e3a5f"),Os(["SI. No.","Structural Components","Details"],m.materialSpecs.map(zt=>[zt.slNo.toString(),zt.description,zt.details]),[25,90,65]);break;case"drawingsDelivery":Ir(45),ds(yt,14,"#1e3a5f"),m.drawingsDelivery.forEach(zt=>{Ui(` ${zt}`,9,5)});break;case"erectionScopeClient":Ir(45),ds(yt,14,"#1e3a5f"),m.erectionScopeClient.forEach(zt=>{Ui(` ${zt}`,9,5)});break;case"erectionScopeCompany":Ir(45),ds(yt,14,"#1e3a5f"),m.erectionScopeCompany.forEach(zt=>{Ui(` ${zt}`,9,5)});break;case"commercialPrice":Ir(60),ds(yt,14,"#1e3a5f");const En=["S.N.","Description","UOM","QTY","Rate","Amount","Remarks"],ir=f.map(zt=>[zt.serialNo.toString(),zt.description,zt.unit,zt.quantity.toString(),`Rs.${zt.rate.toLocaleString("en-IN")}`,`Rs.${zt.amount.toLocaleString("en-IN")}`,zt.remarks||""]);Os(En,ir,[15,55,20,20,25,30,15]);const mr=Ke();Ir(18);const Hn=75,Ar=9,Fr=At-Gt-Hn;Ne.setFillColor("#fff5f5"),Ne.setDrawColor("#eeb7b7"),Ne.setLineWidth(.2),Ne.rect(Fr,et-3,Hn,Ar,"FD"),Ne.setFont("helvetica","bold"),Ne.setFontSize(10),Ne.setTextColor(0,0,0);const Or=mr.toLocaleString("en-IN");Ne.text(`Total Amount: ${Or}.`,Fr+3,et+2),et+=Ar+2;break;case"paymentTerms":Ir(50),ds(yt,14,"#1e3a5f"),Sl(m.paymentTermSections,m.paymentTerms).forEach(zt=>{Ir(8),Ne.setFont("helvetica","bold"),Ne.setFontSize(10),Ne.setTextColor(0,0,0),Ne.text(zt.heading,Gt,et),et+=5,zt.terms.forEach((Gs,Vi)=>{Ui(`${Vi+1}. ${Gs}`,9,5)}),et+=2}),ds("BANK DETAILS",11,"#1e3a5f"),m.bankDetails.forEach(zt=>{Ui(`${zt.particular}: ${zt.value}`,9,0)});break;case"commercialTerms":Ir(80),ds(yt,14,"#1e3a5f"),Os(["SI. No.","Description","Conditions"],m.commercialTerms.map(zt=>[zt.slNo.toString(),zt.description,zt.conditions]),[20,45,115]);break;default:break}}),Ir(30),ds("Notes:",11,"#333333"),m.notes.forEach((qe,Je)=>{Ui(`${Je+1}. ${qe}`,9,5)}),et+=7,Ir(20),m.closingParagraphs.forEach(qe=>{Ui(qe.content,10,0)}),et+=3.5,et+=7,et+=10,Ne.setFont("helvetica","bold"),Ne.setFontSize(11),Ne.setTextColor(0,0,0),Ne.text(m.closingThanks||"Thanking you",Gt,et),et+=6,Ne.setTextColor("#da2032"),Ne.text(m.closingCompanyName||"Revira Nexgen Structures Pvt. Ltd",Gt,et);const zi=Kf(m.uploadDrawings).filter(qe=>qe.dataUrl);if(zi.length>0){co.push({title:"Upload a Drawing",page:qn+1});for(const qe of zi)if(qe.mimeType==="application/pdf")try{const Je=await _i(qe.dataUrl);if(Je.length===0)throw new Error("No pages rendered");for(let yt=0;yt<Je.length;yt++)_o(Je[yt],`${qe.fileName||"Uploaded PDF"} - Page ${yt+1}`)}catch(Je){Ne.addPage(),qn++,Ha(qn),et=Xr+10,Ne.setFont("helvetica","bold"),Ne.setFontSize(11),Ne.setTextColor(218,32,50),Ne.text("Uploaded PDF could not be rendered",Gt,et),et+=7,Ne.setFont("helvetica","normal"),Ne.setFontSize(10),Ne.setTextColor(0,0,0),Ne.text(`File: ${qe.fileName||"Attachment"}`,Gt,et),et+=6,Ne.splitTextToSize("PDF pages were skipped because the renderer could not be loaded in this browser/session.",hr).forEach(jt=>{Ne.text(jt,Gt,et),et+=5}),console.warn("Failed to render PDF attachment:",Je)}else qe.dataUrl.startsWith("data:image/")&&_o(qe.dataUrl,qe.fileName||"Uploaded image")}Ne.setPage(ql);const oi=Ul,li=8,$i="#eeb7b7",Ea=[25,120,hr-145];let Ms=Gt;Ne.setFillColor("#fff5f5"),Ne.rect(Gt,oi-5,hr,li,"F"),Ne.setDrawColor($i),Ne.setLineWidth(.3),Ne.rect(Gt,oi-5,hr,li,"S");let yi=Gt;Ea.forEach(qe=>{Ne.line(yi,oi-5,yi,oi-5+li),yi+=qe}),Ne.line(yi,oi-5,yi,oi-5+li),Ne.setFontSize(9),Ne.setTextColor(0,0,0),Ne.setFont("helvetica","bold"),Ne.text("Sl. No.",Ms+2,oi),Ms+=25,Ne.text("Subject",Ms+2,oi),Ms+=120,Ne.text("Page No.",Ms+2,oi);let ci=oi+li;Ne.setTextColor(0,0,0),Ne.setFont("helvetica","normal"),co.forEach((qe,Je)=>{Ms=Gt,Je%2===0&&(Ne.setFillColor(245,245,245),Ne.rect(Gt,ci-5,hr,li,"F")),Ne.setDrawColor($i),Ne.rect(Gt,ci-5,hr,li,"S"),yi=Gt,Ea.forEach(yt=>{Ne.line(yi,ci-5,yi,ci-5+li),yi+=yt}),Ne.line(yi,ci-5,yi,ci-5+li),Ne.text((Je+1).toString(),Ms+2,ci),Ms+=25,Ne.text(qe.title,Ms+2,ci),Ms+=120,Ne.text(qe.page?.toString()||"-",Ms+2,ci),ci+=li});const Ai=new Date,La=String(Ai.getDate()).padStart(2,"0"),ui=String(Ai.getMonth()+1).padStart(2,"0"),Ji=Ai.getFullYear(),al=`${La}${ui}${Ji}`,w=R?.name?R.name.split(/\s+/).map(qe=>qe.charAt(0).toUpperCase()).join(""):"COMPANY",$=ve?.quotationType==="Supply and Fabrication"?"Peb":ve?.quotationType==="Structural Fabrication"?"SF":"JW",pe=String(ve?.id||1).padStart(3,"0"),Pe=`RNS_${al}_${w}_${$}-${pe}_${u.revision}.pdf`,Be=Te?Ne.output("datauristring",{filename:Pe}):void 0;return ue&&Ne.save(Pe),oe||r({title:ue?"PDF exported":"PDF generated",description:ue?"The quotation has been exported as PDF.":"The quotation PDF is ready."}),{filename:Pe,dataUri:Be}}catch(Ne){return console.error("PDF export error:",Ne),oe||r({title:"Export failed",description:"Failed to export PDF. Please try again.",variant:"destructive"}),null}finally{me(!1)}},Jt=()=>{const q=u.quotationNumber||"-",ue=u.revision||"-",oe=R?.name||"Client";return`Quotation ${q} (${ue}) for ${oe} is ready. Please find the exported PDF attached.`},Ut="9968422442",Ft=()=>{if(!we?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}Qe({to:R?.emailAddress||"",subject:`Quotation ${u.quotationNumber||""} ${u.revision||""}`.trim(),message:`Please find the attached file for details

-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`}),se(!0)},Wt=async()=>{if(!we?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}const q=Me.to.split(/[,\s;]+/).map(Te=>Te.trim()).filter(Boolean);if(q.length===0){r({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!Me.subject.trim()){r({title:"Subject required",description:"Please enter email subject.",variant:"destructive"});return}if(!Me.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}be(!0);const ue=await It({save:!1,silent:!0,returnDataUri:!0});if(!ue?.dataUri){be(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for email.",variant:"destructive"});return}const oe=ue.dataUri.split(",")[1]||"";try{const Ne=await(await wn("POST",`/revira/api/quotations/${we.id}/send-email`,{to:q,subject:Me.subject.trim(),message:Me.message.trim(),fileName:ue.filename,pdfBase64:oe})).json(),At=Array.isArray(Ne?.accepted)?Ne.accepted:[],An=At.length>0?At.join(", "):q.join(", "),Gt=Ne?.messageId?` Message ID: ${Ne.messageId}.`:"";r({title:"Email queued",description:`SMTP accepted: ${An}.${Gt} Check inbox/spam on recipient side.`}),se(!1)}catch(Te){r({title:"Send failed",description:Te?.message||"Failed to send email.",variant:"destructive"})}finally{be(!1)}},bn=()=>{if(!we?.id){r({title:"Save required",description:"Please save quotation first, then send on WhatsApp.",variant:"destructive"});return}const q=(R?.mobileNumber||"").replace(/\D/g,""),ue=q.length===10?`91${q}`:q;vt({mobile:ue,message:`${Jt()}
Project: ${ve?.projectName||"-"}
Client: ${R?.name||"-"}
From: ${Ut}`}),E(!0)},Cr=async()=>{const q=ht.mobile.split(/[,\s;]+/).map(Te=>Te.replace(/\D/g,"")).filter(Boolean);if(q.length===0){r({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!ht.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}Ie(!0);const ue=await It({save:!1,silent:!0,returnDataUri:!0});if(!ue?.dataUri){Ie(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for WhatsApp send.",variant:"destructive"});return}const oe=ue.dataUri.split(",")[1]||"";try{await wn("POST",`/revira/api/quotations/${we?.id}/send-whatsapp`,{to:q,message:ht.message.trim(),fileName:ue.filename,pdfBase64:oe}),r({title:"WhatsApp sent",description:`Quotation sent to ${q.join(", ")}.`}),E(!1)}catch(Te){r({title:"Send failed",description:Te?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{Ie(!1)}},dn=({title:q,number:ue,expanded:oe,onToggle:Te,onAdd:Ne,testId:At,isEditingHeading:An,onStartEditHeading:Gt,onHeadingChange:hr,onHeadingBlur:Xr,onMoveUp:_r,onMoveDown:cs,onDuplicate:Dr,onDelete:us,canMoveUp:Xi=!0,canMoveDown:et=!0})=>i.jsxs("div",{className:"flex items-center gap-3 bg-[#d92134] text-white px-4 py-3 rounded-lg cursor-pointer",onClick:Te,"data-testid":At||`section-header-${ue}`,children:[i.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white text-[#d92134] rounded font-bold text-sm",children:ue}),An?i.jsx(nt,{value:q,onChange:qn=>hr?.(qn.target.value),onBlur:Xr,onKeyDown:qn=>{(qn.key==="Enter"||qn.key==="Escape")&&Xr?.()},autoFocus:!0,className:"h-8 flex-1 text-slate-900 bg-white",onClick:qn=>qn.stopPropagation()}):i.jsx("span",{className:"font-semibold flex-1",children:q}),Gt&&!An&&i.jsx(Ue,{variant:"ghost",size:"icon",onClick:qn=>{qn.stopPropagation(),Gt()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Edit heading",children:i.jsx(to,{className:"h-4 w-4"})}),Ne&&i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:qn=>{qn.stopPropagation(),Ne()},className:"text-white hover:bg-white/20 h-7",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add"]}),_r&&i.jsx(Ue,{variant:"ghost",size:"icon",onClick:qn=>{qn.stopPropagation(),_r()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!Xi,title:"Move up",children:i.jsx(Up,{className:"h-4 w-4"})}),cs&&i.jsx(Ue,{variant:"ghost",size:"icon",onClick:qn=>{qn.stopPropagation(),cs()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!et,title:"Move down",children:i.jsx(Md,{className:"h-4 w-4"})}),Dr&&i.jsx(Ue,{variant:"ghost",size:"icon",onClick:qn=>{qn.stopPropagation(),Dr()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Duplicate block",children:i.jsx(ah,{className:"h-4 w-4"})}),us&&i.jsx(Ue,{variant:"ghost",size:"icon",onClick:qn=>{qn.stopPropagation(),us()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Delete block",children:i.jsx(pr,{className:"h-4 w-4"})}),oe?i.jsx(Up,{className:"h-5 w-5"}):i.jsx(Md,{className:"h-5 w-5"})]});return re||H?i.jsx(Ls,{user:a,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):!ve||!R?i.jsx(Ls,{user:a,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),i.jsx(Ue,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})}):i.jsxs(Ls,{user:a,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),"data-testid":"button-back",children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:ve.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),ve.location]})]})]}),i.jsxs(Ue,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-quotation",children:[i.jsx(_a,{className:"w-4 h-4 mr-2"}),"New Quotation"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>ge(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:we?.revision||u.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>ge(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),we&&i.jsx(Ue,{variant:"outline",size:"icon",onClick:()=>cr.mutate(),disabled:cr.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Ue,{onClick:()=>{It()},disabled:ne,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),ne?"Exporting...":"Export PDF"]}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:Ft,disabled:ne,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email",title:"Send quotation by email",children:i.jsx(uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:bn,disabled:ne,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp",title:"Send quotation on WhatsApp",children:i.jsx(Mm,{className:"w-4 h-4"})}),i.jsxs(Ue,{variant:"outline",onClick:yn,disabled:_t.isPending||kt.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-quotation",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),_t.isPending||kt.isPending?"Saving...":"Save Changes"]}),we&&Ve&&Ve.length>1&&i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{if(confirm(`Are you sure you want to delete this quotation (${we.revision})?`))try{await wn("DELETE",`/revira/api/quotations/${we.id}`),On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]});const q=Ve.filter(ue=>ue.id!==we.id);q.length>0?n(`/revira/projects/${t}/quotation/${q[0].id}`):n(`/revira/projects/${t}/quotation`),r({title:"Quotation deleted",description:`${we.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete quotation.",variant:"destructive"})}},"data-testid":"button-delete-quotation",children:i.jsx(pr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{ref:o,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#da2032] rounded",children:i.jsx(_a,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Technical Proposal Metadata"})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Ref ID"}),i.jsx(nt,{value:u.quotationNumber,onChange:q=>c({...u,quotationNumber:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-quotation-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Creation Date"}),i.jsx(nt,{value:Xe(),readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Enquiry Ref"}),i.jsx(nt,{value:u.enquiryNumber,onChange:q=>c({...u,enquiryNumber:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-enquiry-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Project Site (Legacy)"}),i.jsx(nt,{value:ve.location,readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Proposal Header Title"}),i.jsx(nt,{value:u.proposalTitle,onChange:q=>c({...u,proposalTitle:q.target.value}),className:"mt-2 text-lg font-bold bg-white border-slate-200","data-testid":"input-proposal-title"})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Client Subject Specification"}),i.jsx(nt,{value:u.subject,onChange:q=>c({...u,subject:q.target.value}),className:"mt-2 bg-white border-slate-200","data-testid":"input-subject"})]})]})]}),i.jsxs(Cn,{className:"shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:i.jsx(_a,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Main Covering Letter"})]}),i.jsxs(_n,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500",children:"To Label"}),i.jsx(nt,{value:u.toLabel,onChange:q=>c({...u,toLabel:q.target.value}),className:"mt-1","data-testid":"input-to-label"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500",children:"M/s Label"}),i.jsx(nt,{value:u.msLabel,onChange:q=>c({...u,msLabel:q.target.value}),className:"mt-1","data-testid":"input-ms-label"})]})]}),i.jsxs("p",{className:"font-semibold text-slate-700",children:[u.toLabel||"To",","]}),i.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:(u.msLabel||"M/s")+" "+R.name}),i.jsx("p",{className:"text-slate-600 text-slate-700 mt-1",children:R.location})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-slate-700",children:"Subject: "}),i.jsx("span",{className:"text-slate-600",children:u.subject})]}),i.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[i.jsx("p",{children:"Dear Sir,"}),m.introSections.map((q,ue)=>i.jsx("div",{className:"group relative",children:j===q.id?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(kr,{value:q.content,onChange:oe=>an(q.id,oe.target.value),className:"flex-1 min-h-[60px]",autoFocus:!0}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx(Ue,{size:"icon",variant:"ghost",onClick:()=>y(null),children:i.jsx(Dd,{className:"h-4 w-4 text-green-600"})}),i.jsx(Ue,{size:"icon",variant:"ghost",onClick:()=>vn(q.id),children:i.jsx(pr,{className:"h-4 w-4 text-red-600"})})]})]}):i.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(q.id),children:[q.content,i.jsx(to,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},q.id)),i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:er,className:"text-[#da2032]","data-testid":"button-add-intro",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add Paragraph"]})]})]})]}),i.jsxs(Cn,{className:"shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[i.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:i.jsx(_a,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Master Signatory Authority"})]}),i.jsx(_n,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Full Legal Name"}),i.jsx(nt,{value:u.contactName,onChange:q=>c({...u,contactName:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Contact Handset"}),i.jsx(nt,{value:u.contactMobile,onChange:q=>c({...u,contactMobile:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-mobile"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Official Email Address"}),i.jsx(nt,{value:u.contactEmail,onChange:q=>c({...u,contactEmail:q.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-email"})]})]})})]}),i.jsxs("div",{className:"flex flex-col gap-4",children:[ve?.quotationType==="Supply and Fabrication"&&i.jsxs(i.Fragment,{children:[mt("scopeBrief").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"01",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.scopeBriefDetails,section:"scopeBriefDetails",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("scopeBasic").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"02",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.scopeBasicBuilding,section:"scopeBasicBuilding",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("scopeAdditions").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"03",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.scopeBuildingAdditions,section:"scopeBuildingAdditions",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("steelWork").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"04",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.steelWorkFinish,section:"steelWorkFinish",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("designLoads").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"05",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.designLoads,section:"designLoads",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("applicableCodes").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:Zr,...St(q)}),Xt(q.id)&&i.jsx(Cn,{className:"shadow-sm",children:i.jsx(_n,{className:"p-6",children:i.jsx("ul",{className:"space-y-3 text-sm",children:m.applicableCodes.map((ue,oe)=>i.jsx("li",{className:"flex items-start gap-3 group",children:L===oe?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:ue,onChange:Te=>Is(oe,Te.target.value),onBlur:()=>z(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Yr(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),i.jsx("span",{className:"text-slate-700 flex-1",children:ue}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>z(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Yr(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})},oe))})})})]},q.id)),mt("materialSpecs").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"06",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)}),Xt(q.id)&&i.jsx(Td,{data:m.materialSpecs,section:"materialSpecs",onUpdateRow:Nn,onRemoveRow:Ht,onAddRow:gn})]},q.id)),mt("drawingsDelivery").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"09",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:os,...St(q)}),Xt(q.id)&&i.jsx(Cn,{className:"shadow-sm",children:i.jsx(_n,{className:"p-6",children:i.jsx("ul",{className:"space-y-3 text-sm",children:m.drawingsDelivery.map((ue,oe)=>i.jsx("li",{className:"flex items-start gap-3 group",children:ae===oe?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:ue,onChange:Te=>Ds(oe,Te.target.value),onBlur:()=>W(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>nr(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),i.jsx("span",{className:"text-slate-700 flex-1",children:ue}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>W(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>nr(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})},oe))})})})]},q.id)),mt("erectionScopeClient").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"10",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:Rr,...St(q)}),Xt(q.id)&&i.jsx(Cn,{className:"shadow-sm",children:i.jsx(_n,{className:"p-6",children:i.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeClient.map((ue,oe)=>i.jsx("li",{className:"flex items-start gap-3 group",children:te===oe?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:ue,onChange:Te=>xr(oe,Te.target.value),onBlur:()=>Q(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>gs(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),i.jsx("span",{className:"text-slate-700 flex-1",children:ue}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Q(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>gs(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})},oe))})})})]},q.id)),mt("erectionScopeCompany").map(q=>i.jsxs("div",{className:"space-y-4",style:{order:Tt(q.id)},children:[i.jsx(dn,{title:q.heading,number:"11",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:Qr,...St(q)}),Xt(q.id)&&i.jsx(Cn,{className:"shadow-sm",children:i.jsx(_n,{className:"p-6",children:i.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeCompany.map((ue,oe)=>i.jsx("li",{className:"flex items-start gap-3 group",children:de===oe?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:ue,onChange:Te=>Er(oe,Te.target.value),onBlur:()=>F(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ws(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),i.jsx("span",{className:"text-slate-700 flex-1",children:ue}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>F(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ws(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})},oe))})})})]},q.id))]}),mt("commercialPrice").map(q=>i.jsx(b0,{type:"single",collapsible:!0,value:Xt(q.id)?`commercial-price-${q.id}`:"",onValueChange:ue=>it(q.id,ue===`commercial-price-${q.id}`),style:{order:Tt(q.id)},children:i.jsxs(Wp,{value:`commercial-price-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(dn,{title:q.heading,number:ve?.quotationType==="Supply and Fabrication"?"12":"01",expanded:Xt(q.id),onToggle:()=>pt(q.id),...St(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"S.N."}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 w-24 text-slate-600 font-medium",children:"Unit"}),i.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Quantity"}),i.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Rate"}),i.jsx("th",{className:"text-right p-3 w-32 text-slate-600 font-medium",children:"Amount"}),i.jsx("th",{className:"text-left p-3 w-32 text-slate-600 font-medium",children:"Remarks"}),i.jsx("th",{className:"w-12 p-3"})]})}),i.jsxs("tbody",{children:[f.map((ue,oe)=>i.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[i.jsx("td",{className:"p-3 text-center text-slate-600",children:ue.serialNo}),i.jsx("td",{className:"p-3",children:i.jsx(kr,{value:ue.description,onChange:Te=>tn(oe,"description",Te.target.value),className:"min-h-[60px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-desc-${oe}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:ue.unit,onChange:Te=>tn(oe,"unit",Te.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-unit-${oe}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:ue.quantity,onChange:Te=>tn(oe,"quantity",Te.target.value),className:"h-8 text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-qty-${oe}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:ue.rate,onChange:Te=>tn(oe,"rate",Te.target.value),className:"h-8 min-w-[90px] text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-rate-${oe}`})}),i.jsx("td",{className:"p-3 text-right font-medium",children:ot(ue.amount)}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:ue.remarks,onChange:Te=>tn(oe,"remarks",Te.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-remarks-${oe}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>Mt(oe),disabled:f.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${oe}`,children:i.jsx(pr,{className:"h-4 w-4"})})})]},oe)),i.jsxs("tr",{className:"bg-slate-50 font-semibold",children:[i.jsx("td",{colSpan:5,className:"p-3 text-right",children:"Total:"}),i.jsx("td",{className:"p-3 text-right",children:ot(Ke())}),i.jsx("td",{colSpan:2})]})]})]}),i.jsx("div",{className:"p-3 border-t bg-slate-50 text-center",children:i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:Vt,className:"text-[#d92134]","data-testid":"button-add-row",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add Row"]})})]})})})]})},q.id)),mt("paymentTerms").map(q=>i.jsx(b0,{type:"single",collapsible:!0,value:Xt(q.id)?`payment-terms-${q.id}`:"",onValueChange:ue=>it(q.id,ue===`payment-terms-${q.id}`),style:{order:Tt(q.id)},children:i.jsxs(Wp,{value:`payment-terms-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(dn,{title:q.heading,number:"PT",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:tr,...St(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx(Cn,{className:"shadow-sm",children:i.jsxs(_n,{className:"p-6 space-y-4",children:[Sl(m.paymentTermSections,m.paymentTerms).map((ue,oe)=>{const Te=B[ue.id]??!0;return i.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[i.jsxs("div",{className:"group flex items-center gap-2",children:[i.jsx(Ue,{type:"button",size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>ee(Ne=>({...Ne,[ue.id]:!(Ne[ue.id]??!0)})),"data-testid":`button-toggle-payment-heading-${oe}`,children:Te?i.jsx(Up,{className:"h-4 w-4 text-slate-500"}):i.jsx(Md,{className:"h-4 w-4 text-slate-500"})}),P===ue.id?i.jsxs(i.Fragment,{children:[i.jsx(nt,{value:ue.heading,onChange:Ne=>vr(ue.id,Ne.target.value),className:"h-8 font-semibold flex-1",placeholder:"Heading",autoFocus:!0,onBlur:()=>_(null),onKeyDown:Ne=>Ne.key==="Enter"&&_(null),"data-testid":`input-payment-heading-${oe}`}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>ur(ue.id),"data-testid":`button-remove-payment-heading-${oe}`,children:i.jsx(pr,{className:"h-4 w-4"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded font-semibold text-slate-700",onClick:()=>_(ue.id),children:ue.heading}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>_(ue.id),children:i.jsx(to,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>ur(ue.id),"data-testid":`button-remove-payment-heading-${oe}`,children:i.jsx(pr,{className:"h-4 w-4"})})]})]}),Te&&i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"space-y-3 text-sm",children:ue.terms.map((Ne,At)=>i.jsx("li",{className:"flex items-start gap-2 group",children:I?.sectionId===ue.id&&I?.termIndex===At?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:Ne,onChange:An=>Rs(ue.id,At,An.target.value),onBlur:()=>v(null),autoFocus:!0,className:"flex-1 min-h-[60px]","data-testid":`input-payment-term-${oe}-${At}`}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ss(ue.id,At),"data-testid":`button-remove-payment-term-${oe}-${At}`,children:i.jsx(pr,{className:"h-4 w-4 text-red-600"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"w-6 text-slate-400",children:[At+1,"."]}),i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded text-slate-700",onClick:()=>v({sectionId:ue.id,termIndex:At}),children:Ne}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>v({sectionId:ue.id,termIndex:At}),children:i.jsx(to,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ss(ue.id,At),"data-testid":`button-remove-payment-term-${oe}-${At}`,children:i.jsx(pr,{className:"h-4 w-4 text-red-600"})})]})},`${ue.id}-${At}`))}),i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:()=>on(ue.id),className:"text-[#da2032]","data-testid":`button-add-payment-term-${oe}`,children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add Term"]})]})]},ue.id)}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold text-slate-700",children:"Bank Details:"}),i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:ai,className:"text-[#da2032]","data-testid":"button-add-bank-detail",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-1/3",children:"Particulars"}),i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium",children:"Value"}),i.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-20",children:"Actions"})]})}),i.jsx("tbody",{children:m.bankDetails.map((ue,oe)=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-2",children:_e===oe?i.jsx(nt,{value:ue.particular,onChange:Te=>Mi(oe,"particular",Te.target.value),className:"text-slate-600","data-testid":`input-bank-particular-${oe}`}):i.jsxs("span",{className:"text-slate-600 cursor-pointer hover:text-[#d92134]",onClick:()=>Ae(oe),children:[ue.particular,":"]})}),i.jsx("td",{className:"p-2",children:_e===oe?i.jsx(nt,{value:ue.value,onChange:Te=>Mi(oe,"value",Te.target.value),"data-testid":`input-bank-value-${oe}`}):i.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Ae(oe),children:ue.value})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-1",children:[_e===oe?i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ae(null),children:i.jsx(Dd,{className:"h-4 w-4 text-green-600"})}):i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ae(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Bi(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})})]},oe))})]})]})]})})})]})},q.id)),ve?.quotationType==="Supply and Fabrication"&&mt("commercialTerms").map(q=>i.jsx(b0,{type:"single",collapsible:!0,value:Xt(q.id)?`terms-conditions-${q.id}`:"",onValueChange:ue=>it(q.id,ue===`terms-conditions-${q.id}`),style:{order:Tt(q.id)},children:i.jsxs(Wp,{value:`terms-conditions-${q.id}`,className:"border-0",children:[i.jsx(Gp,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:i.jsx("div",{className:"w-full text-left",children:i.jsx(dn,{title:q.heading,number:"08",expanded:Xt(q.id),onToggle:()=>pt(q.id),onAdd:Fs,...St(q)})})}),i.jsx(Kp,{className:"p-0 pt-4",children:i.jsx(Cn,{className:"shadow-sm",children:i.jsx(_n,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b",children:[i.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"SI. No."}),i.jsx("th",{className:"text-left p-3 w-48 text-slate-600 font-medium",children:"Description"}),i.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Conditions"}),i.jsx("th",{className:"text-left p-3 w-20 text-slate-600 font-medium",children:"Actions"})]})}),i.jsx("tbody",{className:"text-slate-700",children:m.commercialTerms.map((ue,oe)=>i.jsxs("tr",{className:`border-b ${oe%2===1?"bg-slate-50/50":""}`,children:[i.jsx("td",{className:"p-3 align-top",children:ue.slNo}),i.jsx("td",{className:"p-3 align-top",children:Y===oe?i.jsx(nt,{value:ue.description,onChange:Te=>dr(oe,"description",Te.target.value),className:"font-medium","data-testid":`input-term-desc-${oe}`}):i.jsx("span",{className:"font-medium cursor-pointer hover:text-[#d92134]",onClick:()=>Ce(oe),children:ue.description})}),i.jsx("td",{className:"p-3 align-top",children:Y===oe?i.jsx(kr,{value:ue.conditions,onChange:Te=>dr(oe,"conditions",Te.target.value),className:"min-h-[80px]","data-testid":`input-term-cond-${oe}`}):i.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Ce(oe),children:ue.conditions})}),i.jsx("td",{className:"p-3 align-top",children:i.jsxs("div",{className:"flex gap-1",children:[Y===oe?i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ce(null),children:i.jsx(Dd,{className:"h-4 w-4 text-green-600"})}):i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ce(oe),children:i.jsx(to,{className:"h-4 w-4"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>ls(oe),children:i.jsx(pr,{className:"h-4 w-4 text-red-500"})})]})})]},oe))})]})})})})})]})},q.id))]}),i.jsxs(Cn,{className:"shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-slate-50",children:[i.jsx("h3",{className:"font-semibold text-slate-700",children:"Notes"}),i.jsxs(Ue,{variant:"ghost",size:"sm",onClick:Yt,className:"text-[#da2032]","data-testid":"button-add-note",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsx(_n,{className:"p-6",children:i.jsx("ul",{className:"space-y-2 text-sm",children:m.notes.map((q,ue)=>i.jsx("li",{className:"group flex items-start gap-2",children:D===ue?i.jsxs(i.Fragment,{children:[i.jsx(kr,{value:q,onChange:oe=>Dn(ue,oe.target.value),className:"flex-1 min-h-[40px]",autoFocus:!0,onBlur:()=>S(null)}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>ms(ue),children:i.jsx(pr,{className:"h-4 w-4 text-red-600"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"w-6 text-slate-400",children:[ue+1,"."]}),i.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded",onClick:()=>S(ue),children:q}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>S(ue),children:i.jsx(to,{className:"h-3 w-3 text-slate-400"})}),i.jsx(Ue,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>ms(ue),children:i.jsx(pr,{className:"h-4 w-4 text-red-600"})})]})},ue))})})]}),i.jsx(Cn,{className:"shadow-sm",children:i.jsxs(_n,{className:"p-6 space-y-4",children:[m.closingParagraphs.map(q=>i.jsx("div",{className:"group relative text-sm text-slate-700",children:j===q.id?i.jsxs("div",{className:"flex gap-2",children:[i.jsx(kr,{value:q.content,onChange:ue=>qi(q.id,ue.target.value),className:"flex-1 min-h-[80px]",autoFocus:!0}),i.jsx(Ue,{size:"icon",variant:"ghost",onClick:()=>y(null),children:i.jsx(Dd,{className:"h-4 w-4 text-green-600"})})]}):i.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>y(q.id),children:[q.content,i.jsx(to,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},q.id)),i.jsxs("div",{className:"pt-4 border-t space-y-2",children:[i.jsx("div",{className:"group",children:i.jsx(nt,{value:m.closingThanks,onChange:q=>b(ue=>({...ue,closingThanks:q.target.value})),className:"font-semibold text-slate-700 bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-auto","data-testid":"input-closing-thanks"})}),i.jsx("div",{className:"group",children:i.jsx(nt,{value:m.closingCompanyName,onChange:q=>b(ue=>({...ue,closingCompanyName:q.target.value})),className:"font-bold text-[#da2032] bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-auto","data-testid":"input-closing-company"})})]})]})}),i.jsx(Cn,{className:"shadow-sm",children:i.jsxs(_n,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Upload a Drawing"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",onClick:vi,"data-testid":"button-add-drawing-upload-field",children:[i.jsx(Fi,{className:"h-4 w-4 mr-1"})," Add uploader field"]})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"Upload images or PDF files. These will be appended in exported quotation PDF after End of Documents."}),i.jsx("div",{className:"space-y-3",children:Kf(m.uploadDrawings).map((q,ue)=>i.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsx(nt,{type:"file",accept:"image/*,.pdf",onChange:oe=>Bn(q.id,oe),"data-testid":`input-drawing-upload-${ue}`}),i.jsx(Ue,{type:"button",variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>hn(q.id),"data-testid":`button-remove-drawing-upload-${ue}`,children:i.jsx(pr,{className:"h-4 w-4"})})]}),q.fileName?i.jsxs("p",{className:"text-xs text-slate-600",children:["Selected: ",q.fileName]}):i.jsx("p",{className:"text-xs text-slate-400",children:"No file selected"})]},q.id))})]})}),i.jsx("div",{className:"text-center py-6 text-sm text-slate-500",children:i.jsx("p",{children:"!! End of Documents !!"})})]})]}),i.jsx(mi,{open:ce,onOpenChange:ge,children:i.jsxs(ri,{className:"max-w-lg",children:[i.jsx(si,{children:i.jsx(ii,{children:"Quotation Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ve?.map(q=>i.jsxs("div",{className:`p-3 border rounded-lg ${we?.id===q.id?"border-[#d92134] bg-red-50":"hover:bg-slate-50"}`,children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-[#d92134]",children:q.revision}),we?.id===q.id&&i.jsx("span",{className:"text-xs bg-[#d92134] text-white px-2 py-0.5 rounded",children:"Current"})]})}),i.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-0.5",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-slate-500",children:"Enquiry Ref:"})," ",q.enquiryNumber||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-slate-500",children:"Created:"})," ",new Date(q.createdAt).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsxs(Ue,{size:"sm",variant:we?.id===q.id?"secondary":"default",className:we?.id===q.id?"":"bg-[#d92134] hover:bg-[#b91c2c]",onClick:()=>{n(`/revira/projects/${t}/quotation/${q.id}`),ge(!1)},"data-testid":`button-edit-version-${q.id}`,children:[i.jsx(to,{className:"h-4 w-4 mr-1"}),we?.id===q.id?"Editing":"Edit"]}),Ve&&Ve.length>1&&i.jsxs(Ue,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:async ue=>{if(ue.stopPropagation(),confirm(`Are you sure you want to delete ${q.revision}?`))try{if(await wn("DELETE",`/revira/api/quotations/${q.id}`),On.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),we?.id===q.id){const oe=Ve.filter(Te=>Te.id!==q.id);oe.length>0?n(`/revira/projects/${t}/quotation/${oe[0].id}`):n(`/revira/projects/${t}/quotation`)}r({title:"Version deleted",description:`${q.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete version.",variant:"destructive"})}},"data-testid":`button-delete-version-${q.id}`,children:[i.jsx(pr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},q.id))})]})}),i.jsx(mi,{open:De,onOpenChange:se,children:i.jsxs(ri,{className:"sm:max-w-xl",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Quotation by Email"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),i.jsx(nt,{value:Me.to,onChange:q=>Qe(ue=>({...ue,to:q.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to"}),i.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"You can enter multiple email ids separated by comma. A copy is always sent to reviranexgen@gmail.com."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),i.jsx(nt,{value:Me.subject,onChange:q=>Qe(ue=>({...ue,subject:q.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),i.jsx(kr,{value:Me.message,onChange:q=>Qe(ue=>({...ue,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>se(!1),disabled:ye,"data-testid":"button-send-email-cancel",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:Wt,disabled:ye,"data-testid":"button-send-email-submit",children:ye?"Sending...":"Submit"})]})]})]})}),i.jsx(mi,{open:O,onOpenChange:E,children:i.jsxs(ri,{className:"sm:max-w-lg",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Quotation on WhatsApp"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),i.jsx(nt,{value:ht.mobile,onChange:q=>vt(ue=>({...ue,mobile:q.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),i.jsx(kr,{value:ht.message,onChange:q=>vt(ue=>({...ue,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>E(!1),disabled:Re,"data-testid":"button-send-whatsapp-cancel",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:Cr,disabled:Re,"data-testid":"button-send-whatsapp-submit",children:Re?"Sending...":"Submit"})]})]})]})})]})}function C5(){const t=Zu(),e=t.id,n=t.invoiceId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,D]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,I]=k.useState({mobile:"",message:""}),[v,B]=k.useState({invoiceNumber:"",revision:"R-001",invoiceType:"PROFORMA INVOICE",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),[ee,ae]=k.useState([{id:1,serialNo:1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}]),{data:W}=Ta(),{data:te}=Ln({queryKey:["/revira/api/projects",e],queryFn:async()=>{const xe=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch project");return xe.json()},enabled:!!e}),{data:Q}=Ln({queryKey:["/revira/api/clients",te?.clientId],queryFn:async()=>{const xe=await fetch(`/revira/api/clients/${te?.clientId}`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch client");return xe.json()},enabled:!!te?.clientId}),{data:de}=Ln({queryKey:["/revira/api/branding"],enabled:!!W}),{data:F}=Ln({queryKey:["/revira/api/invoices",n],queryFn:async()=>{if(n){const X=await fetch(`/revira/api/invoices/${n}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch invoice");return X.json()}const xe=await fetch(`/revira/api/projects/${e}/invoice`,{credentials:"include"});if(!xe.ok){if(xe.status===404)return null;throw new Error("Failed to fetch invoice")}return xe.json()},enabled:!!e}),{data:L}=Ln({queryKey:["/revira/api/invoices",F?.id,"items"],queryFn:async()=>{const xe=await fetch(`/revira/api/invoices/${F?.id}/items`,{credentials:"include"});if(!xe.ok)throw new Error("Failed to fetch items");return xe.json()},enabled:!!F?.id}),{data:z}=Ln({queryKey:["/revira/api/projects",e,"invoice-versions"],queryFn:async()=>{const xe=await fetch(`/revira/api/projects/${e}/invoice-versions`,{credentials:"include"});return xe.ok?xe.json():[]},enabled:!!e}),Y=xe=>{if(!xe)return{};try{const X=JSON.parse(xe);return X&&typeof X=="object"?X:{}}catch{return{}}},Ce=k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),_e=k.useCallback(()=>{const xe=[];return v.vehicleNo.trim()&&xe.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&xe.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&xe.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&xe.push(`Gate Pass: ${v.dispatchGatePass||"-"}`),xe.length?xe.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]),Ae=k.useCallback(()=>{const xe={invoiceType:v.invoiceType,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(xe)},[v]);k.useEffect(()=>{if(te&&Q&&!F){const xe=new Date,X=xe.getMonth()>=3?`${xe.getFullYear()}-${(xe.getFullYear()+1).toString().slice(-2)}`:`${xe.getFullYear()-1}-${xe.getFullYear().toString().slice(-2)}`;B(M=>({...M,invoiceNumber:`RNS/${X}/RNS-SL-${String(te.id).padStart(3,"0")}`,organisationName:`M/s ${Q.name}`,registeredAddress:Q.location,consigneeAddress:`M/s ${Q.name}, ${Q.location}`,clientGstin:Q.gstNo||""}))}},[te,Q,F]),k.useEffect(()=>{if(F){const xe=Y(F.contentSections),X=re=>(re||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),M=xe.orderReferenceType||(xe.showPurchaseOrderNo?"po":"wo"),ve=xe.vehicleNo!==void 0||xe.showDispatchLrNo!==void 0||xe.showDispatchPo!==void 0||xe.showDispatchGatePass!==void 0||xe.dispatchLrNo!==void 0||xe.dispatchPoNo!==void 0||xe.dispatchGatePass!==void 0;B({invoiceNumber:F.invoiceNumber,revision:F.revision,invoiceType:xe.invoiceType||"PROFORMA INVOICE",organisationName:F.organisationName,registeredAddress:F.registeredAddress,consigneeAddress:F.consigneeAddress,clientGstin:F.clientGstin||"",workOrderNo:X(F.workOrderNo)||"NIL",orderReferenceType:M,purchaseOrderNo:xe.purchaseOrderNo||(M==="po"?X(F.workOrderNo):""),dispatchDetails:F.dispatchDetails||"-",vehicleNo:xe.vehicleNo||(!ve&&F.dispatchDetails&&F.dispatchDetails!=="-"?F.dispatchDetails:""),showDispatchLrNo:xe.showDispatchLrNo??!1,showDispatchPo:xe.showDispatchPo??!1,showDispatchGatePass:xe.showDispatchGatePass??!1,dispatchLrNo:xe.dispatchLrNo||"",dispatchPoNo:xe.dispatchPoNo||"",dispatchGatePass:xe.dispatchGatePass||"",appliedTaxType:F.appliedTaxType||"igst",cgstRate:F.cgstRate||"9",sgstRate:F.sgstRate||"9",igstRate:F.igstRate||"18"})}},[F]),k.useEffect(()=>{L&&L.length>0&&ae(L.map(xe=>({id:xe.id,serialNo:xe.serialNo,description:xe.description,hsnCode:xe.hsnCode||"940610",quantity:Number(xe.quantity)||1,unit:xe.unit||"LS",ratePerUnit:Number(xe.ratePerUnit)||0,percentage:Number(xe.percentage)||0,amount:Number(xe.amount)||0,remarks:xe.remarks||""})))},[L]);const ge=k.useCallback(()=>{const xe=ee.reduce((H,je)=>H+(Number(je.amount)||0),0);let X=0,M=0,ve=0;v.appliedTaxType==="cgst_sgst"?(X=xe*(Number(v.cgstRate)/100),M=xe*(Number(v.sgstRate)/100)):ve=xe*(Number(v.igstRate)/100);const re=X+M+ve,R=xe+re;return{totalAmount:xe,cgstAmount:X,sgstAmount:M,igstAmount:ve,totalTax:re,grandTotal:R}},[ee,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=k.useCallback(()=>ee.filter(xe=>xe.description.trim()),[ee]),se=xe=>{const X=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],M=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(xe===0)return"Zero";const ve=we=>we===0?"":we<20?X[we]:we<100?M[Math.floor(we/10)]+(we%10!==0?" "+X[we%10]:""):X[Math.floor(we/100)]+" Hundred"+(we%100!==0?" "+ve(we%100):""),re=we=>{if(we===0)return"";const ke=Math.floor(we/1e7),Ve=Math.floor(we%1e7/1e5),at=Math.floor(we%1e5/1e3),ct=we%1e3;let _t="";return ke>0&&(_t+=ve(ke)+" Crore "),Ve>0&&(_t+=ve(Ve)+" Lakh "),at>0&&(_t+=ve(at)+" Thousand "),ct>0&&(_t+=ve(ct)),_t.trim()},R=Math.floor(xe),H=Math.round((xe-R)*100);let je=re(R)+" Rupees";return H>0&&(je+=" and "+ve(H)+" Paise"),je+=" Only",je},O=Tr({mutationFn:async()=>{const xe=De(),M=await(await wn("POST","/revira/api/invoices",{projectId:Number(e),invoiceNumber:v.invoiceNumber,revision:v.revision,organisationName:v.organisationName,registeredAddress:v.registeredAddress,consigneeAddress:v.consigneeAddress,clientGstin:v.clientGstin,workOrderNo:Ce(),dispatchDetails:_e(),appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(const ve of xe)await wn("POST",`/revira/api/invoices/${M.id}/items`,{serialNo:ve.serialNo,description:ve.description,hsnCode:ve.hsnCode,quantity:String(ve.quantity),unit:ve.unit,ratePerUnit:String(ve.ratePerUnit),percentage:String(ve.percentage),amount:String(ve.amount),remarks:ve.remarks});return M},onSuccess:xe=>{On.invalidateQueries({queryKey:["/revira/api/invoices"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),r(`/revira/projects/${e}/invoice/${xe.id}`),a({title:"Invoice saved",description:"The invoice has been created successfully."})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to create invoice",variant:"destructive"})}}),E=Tr({mutationFn:async()=>{const xe=De();await wn("PUT",`/revira/api/invoices/${F?.id}`,{invoiceNumber:v.invoiceNumber,revision:v.revision,organisationName:v.organisationName,registeredAddress:v.registeredAddress,consigneeAddress:v.consigneeAddress,clientGstin:v.clientGstin,workOrderNo:Ce(),dispatchDetails:_e(),appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let X=L||[];if(!X.length){const M=await fetch(`/revira/api/invoices/${F?.id}/items`,{credentials:"include"});M.ok&&(X=await M.json())}for(const M of X)await wn("DELETE",`/revira/api/invoice-items/${M.id}`);for(const M of xe)await wn("POST",`/revira/api/invoices/${F?.id}/items`,{serialNo:M.serialNo,description:M.description,hsnCode:M.hsnCode,quantity:String(M.quantity),unit:M.unit,ratePerUnit:String(M.ratePerUnit),percentage:String(M.percentage),amount:String(M.amount),remarks:M.remarks})},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/invoices"]}),On.invalidateQueries({queryKey:["/revira/api/invoices",F?.id,"items"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice updated",description:"The invoice has been updated successfully."})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to update invoice",variant:"destructive"})}}),ne=Tr({mutationFn:async()=>(await wn("POST",`/revira/api/invoices/${F?.id}/duplicate`,{})).json(),onSuccess:xe=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),r(`/revira/projects/${e}/invoice/${xe.id}`),a({title:"Invoice duplicated",description:`Created new version: ${xe.revision}`})},onError:xe=>{a({title:"Error",description:xe.message||"Failed to duplicate invoice",variant:"destructive"})}}),me=Tr({mutationFn:async xe=>{await wn("DELETE",`/revira/api/invoices/${xe}`,void 0)},onSuccess:()=>{if(On.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice deleted",description:"The invoice version has been deleted."}),u(!1),z&&z.length>1){const xe=z.filter(X=>X.id!==F?.id);xe.length>0?r(`/revira/projects/${e}/invoice/${xe[0].id}`):r(`/revira/projects/${e}/invoice`)}else r(`/revira/projects/${e}/invoice`)},onError:xe=>{a({title:"Error",description:xe.message||"Failed to delete invoice",variant:"destructive"})}}),ye=()=>{F?E.mutate():O.mutate()},be=()=>{const xe=Math.max(...ee.map(X=>X.id),0)+1;ae([...ee,{id:xe,serialNo:ee.length+1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}])},Re=xe=>{if(ee.length>1){const X=ee.filter(M=>M.id!==xe);ae(X.map((M,ve)=>({...M,serialNo:ve+1})))}},Ie=(xe,X,M)=>{ae(ve=>ve.map(re=>{if(re.id===xe){const R={...re,[X]:M};return(X==="quantity"||X==="ratePerUnit")&&(R.amount=Number(R.quantity)*Number(R.ratePerUnit)),R}return re}))},Me=xe=>`${xe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Qe=async xe=>{const X=xe?.save??!0,M=xe?.silent??!1,ve=xe?.returnDataUri??!1;try{const re=new un({orientation:"portrait",unit:"mm",format:"a4"}),R=210,H=297,je=15,we=R-je*2,ke=35,Ve=30,at=hn=>hn*.2646,ct=at(80),_t=at(50),kt=at(80),cr=at(10),yn=at(3),Vt=at(3),Mt="#eeb7b7",tn="#fff5f5";let Ke=ke+10,ot=1;const Xe=hn=>hn.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),an=hn=>Xe(hn),er=hn=>new Promise((Nn,gn)=>{const Ht=new Image;Ht.crossOrigin="anonymous",Ht.onload=()=>{const Xt=document.createElement("canvas");Xt.width=Ht.width,Xt.height=Ht.height,Xt.getContext("2d")?.drawImage(Ht,0,0),Nn(Xt.toDataURL("image/png"))},Ht.onerror=gn,Ht.src=hn});let vn=null,Yt=null,Dn=null;try{de?.headerUrl&&(vn=await er(de.headerUrl)),de?.footerUrl&&(Yt=await er(de.footerUrl)),de?.stampUrl&&(Dn=await er(de.stampUrl))}catch(hn){console.warn("Failed to load branding images:",hn)}const ms=hn=>{vn&&re.addImage(vn,"PNG",0,0,R,ke),Yt&&re.addImage(Yt,"PNG",0,H-Ve,R,Ve),Dn&&re.addImage(Dn,"PNG",R-_t-ct,H-kt-ct,ct,ct),re.setFontSize(8),re.setTextColor(128,128,128),re.text(`Page ${hn}`,R/2,H-8,{align:"center"})},tr=hn=>Ke+hn>H-Ve-10?(re.addPage(),ot++,ms(ot),Ke=ke+10,!0):!1,vr=(hn,Nn=12)=>{Ke+=4,tr(12),re.setFillColor("#d92134"),re.rect(je,Ke-3.5,4,5,"F"),re.setFont("helvetica","bold"),re.setFontSize(Nn),re.setTextColor("#1e3a5f"),re.text(hn,je+7,Ke),Ke+=5.5},ur=(hn,Nn,gn=[])=>{const Ht=[32,63,32,63],Xt=5.8,pt=Vt,it=at(3),ft=mt=>mt-3,Ze=(mt,Tt=0)=>ft(mt)+it+2.5+Tt*3.2;tr(Xt+4),re.setFont("helvetica","normal"),re.setFontSize(8.5);let dt=0;const Lt=mt=>mt.forEach(([Tt,St])=>{const It=re.splitTextToSize(Tt,Ht[0]-pt*2),Jt=re.splitTextToSize(St||"-",Ht[1]+Ht[2]+Ht[3]-pt*2),Ut=Math.max(It.length||1,Jt.length||1),Ft=Math.max(Xt,Ut*3.2+1.2);if(tr(Ft+2),dt%2===0&&(re.setFillColor(245,245,245),re.rect(je,ft(Ke),we,Ft,"F")),re.setDrawColor(Mt),re.rect(je,ft(Ke),we,Ft,"S"),re.line(je+Ht[0],ft(Ke),je+Ht[0],ft(Ke)+Ft),re.setFont("helvetica","bold"),It.forEach((Wt,bn)=>{re.text(Wt,je+pt,Ze(Ke,bn))}),Tt==="Dispatch Details"&&St){const Wt=St.split(",").map(ue=>ue.trim()).filter(Boolean),bn=je+Ht[0]+pt,Cr=je+Ht[0]+Ht[1]+Ht[2]+Ht[3]-pt;let dn=bn,q=Ze(Ke,0);Wt.forEach((ue,oe)=>{const Te=oe<Wt.length-1?", ":"",Ne=ue.indexOf(" - "),At=Ne>-1?ue.slice(0,Ne):ue,An=Ne>-1?ue.slice(Ne):"",Gt=re.getTextWidth(At),hr=re.getTextWidth(An+Te);dn+Gt+hr>Cr&&(dn=bn,q+=3.2),re.setFont("helvetica","bold"),re.text(At,dn,q),dn+=Gt,re.setFont("helvetica","normal"),re.text(An+Te,dn,q),dn+=hr})}else re.setFont("helvetica","normal"),Jt.forEach((Wt,bn)=>{re.text(Wt,je+Ht[0]+pt,Ze(Ke,bn))});Ke+=Ft,dt+=1});Lt(hn),Nn.forEach(mt=>{const[Tt,St]=mt,It=re.splitTextToSize(Tt?.[0]||"",Ht[0]-pt*2),Jt=re.splitTextToSize(Tt?.[1]||"-",Ht[1]-pt*2),Ut=re.splitTextToSize(St?.[0]||"",Ht[2]-pt*2),Ft=re.splitTextToSize(St?.[1]||"",Ht[3]-pt*2),Wt=Math.max(It.length||1,Jt.length||1,Ut.length||1,Ft.length||1),bn=Math.max(Xt,Wt*3.2+1.2);tr(bn+2),dt%2===0&&(re.setFillColor(245,245,245),re.rect(je,ft(Ke),we,bn,"F")),re.setDrawColor(Mt),re.rect(je,ft(Ke),we,bn,"S");let Cr=je;for(let dn=0;dn<3;dn++)Cr+=Ht[dn],re.line(Cr,ft(Ke),Cr,ft(Ke)+bn);re.setFont("helvetica","bold"),It.forEach((dn,q)=>re.text(dn,je+pt,Ze(Ke,q))),Ut.forEach((dn,q)=>re.text(dn,je+Ht[0]+Ht[1]+pt,Ze(Ke,q))),re.setFont("helvetica","normal"),Jt.forEach((dn,q)=>re.text(dn,je+Ht[0]+pt,Ze(Ke,q))),Ft.forEach((dn,q)=>re.text(dn,je+Ht[0]+Ht[1]+Ht[2]+pt,Ze(Ke,q))),Ke+=bn,dt+=1}),Lt(gn)},on=hn=>{const Nn=[32,75,32,51],gn=5.8,Ht=Vt,Xt=at(3),pt=ft=>ft-3,it=(ft,Ze=0)=>pt(ft)+Xt+2.5+Ze*3.2;tr(gn+4),re.setFont("helvetica","normal"),re.setFontSize(8.5),hn.forEach((ft,Ze)=>{const[dt,Lt]=ft,mt=re.splitTextToSize(dt?.[0]||"",Nn[0]-Ht*2),Tt=re.splitTextToSize(dt?.[1]||"-",Nn[1]-Ht*2),St=re.splitTextToSize(Lt?.[0]||"",Nn[2]-Ht*2),It=re.splitTextToSize(Lt?.[1]||"",Nn[3]-Ht*2),Jt=Math.max(mt.length||1,Tt.length||1,St.length||1,It.length||1),Ut=Math.max(gn,Jt*3.2+1.2);tr(Ut+2),Ze%2===0&&(re.setFillColor(245,245,245),re.rect(je,pt(Ke),we,Ut,"F")),re.setDrawColor(Mt),re.rect(je,pt(Ke),we,Ut,"S");let Ft=je;for(let Wt=0;Wt<3;Wt++)Ft+=Nn[Wt],re.line(Ft,pt(Ke),Ft,pt(Ke)+Ut);re.setFont("helvetica","bold"),mt.forEach((Wt,bn)=>re.text(Wt,je+Ht,it(Ke,bn))),St.forEach((Wt,bn)=>re.text(Wt,je+Nn[0]+Nn[1]+Ht,it(Ke,bn))),re.setFont("helvetica","normal"),Tt.forEach((Wt,bn)=>re.text(Wt,je+Nn[0]+Ht,it(Ke,bn))),It.forEach((Wt,bn)=>re.text(Wt,je+Nn[0]+Nn[1]+Nn[2]+Ht,it(Ke,bn))),Ke+=Ut})},Rs=(hn,Nn)=>{const gn=[95,55,we-150],Ht=5.8,Xt=Vt;tr(Ht+6),re.setFillColor(tn),re.setDrawColor(Mt),re.setLineWidth(.2),re.rect(je,Ke-3.2,we,Ht,"FD"),re.setFont("helvetica","bold"),re.setFontSize(8.5),re.text("Total Amount In Words",je+Vt,Ke+.8),re.text("Details",je+gn[0]+Vt,Ke+.8),re.text("Amount",je+gn[0]+gn[1]+Vt,Ke+.8),re.line(je+gn[0],Ke-3.2,je+gn[0],Ke-3.2+Ht),re.line(je+gn[0]+gn[1],Ke-3.2,je+gn[0]+gn[1],Ke-3.2+Ht),Ke+=Ht,re.setFont("helvetica","normal"),re.setFontSize(8.5);const pt=Nn.map(dt=>{const Lt=re.splitTextToSize(dt.detail,gn[1]-Xt*2),mt=re.splitTextToSize(dt.value,gn[2]-Xt*2),Tt=Math.max(Lt.length||1,mt.length||1),St=Math.max(Ht,Tt*3.2+1.2);return{detailLines:Lt,valueLines:mt,rowHeight:St}}),it=pt.reduce((dt,Lt)=>dt+Lt.rowHeight,0);tr(it+2),re.setDrawColor(Mt),re.rect(je,Ke-3.2,gn[0],it,"S");const ft=re.splitTextToSize(hn,gn[0]-Xt*3);re.setFont("helvetica","bold"),ft.forEach((dt,Lt)=>{re.text(dt,je+Xt,Ke+.1+yn+Lt*3.2)});let Ze=Ke;pt.forEach((dt,Lt)=>{Lt%2===0&&(re.setFillColor(245,245,245),re.rect(je+gn[0],Ze-3.2,gn[1]+gn[2],dt.rowHeight,"F")),re.setDrawColor(Mt),re.rect(je+gn[0],Ze-3.2,gn[1]+gn[2],dt.rowHeight,"S"),re.line(je+gn[0]+gn[1],Ze-3.2,je+gn[0]+gn[1],Ze-3.2+dt.rowHeight),(Nn[Lt]?.detail||"").trim().toLowerCase()==="grand total"?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),dt.detailLines.forEach((mt,Tt)=>{re.text(mt,je+gn[0]+Xt,Ze+.1+yn+Tt*3.2)}),(Nn[Lt]?.detail||"").trim().toLowerCase()==="grand total"?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),dt.valueLines.forEach((mt,Tt)=>{re.text(mt,je+gn[0]+gn[1]+Xt,Ze+.1+yn+Tt*3.2)}),Ze+=dt.rowHeight}),Ke=Ze},Ss=v.invoiceType||"PROFORMA INVOICE",os=Ss==="TAX INVOICE"?"T.I. No":"P.I No",Ds=Ss==="TAX INVOICE"?"TI":"PI",nr=new Date,Rr=nr.getMonth()>=3?`${nr.getFullYear()}-${String(nr.getFullYear()+1).slice(-2)}`:`${nr.getFullYear()-1}-${String(nr.getFullYear()).slice(-2)}`,xr=String(te?.id||0).padStart(3,"0"),gs=`RNS/${Rr}/RNS-${Ds}-${xr}`,Qr=[["GSTIN",v.clientGstin||""]],Er=[];v.orderReferenceType==="po"?Qr.push(["P.O. No.",v.purchaseOrderNo||"-"]):Qr.push(["W.O. No.",v.workOrderNo||"-"]),v.vehicleNo.trim()&&Er.push(`Vehicle No. - ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&Er.push(`L.R. No. - ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&Er.push(`D.C No. - ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&Er.push(`Gate Pass - ${v.dispatchGatePass||"-"}`);const Ws=Er.length?Er.join(",    "):"-",Zr=[];for(let hn=0;hn<Qr.length;hn+=2)Zr.push([Qr[hn],Qr[hn+1]]);ms(ot),re.setFontSize(16),re.setFont("helvetica","bold"),re.setTextColor("#da2032"),re.text(Ss,R/2,Ke,{align:"center"}),Ke+=10,re.setFont("helvetica","normal"),re.setTextColor(0,0,0),re.setFontSize(9),re.text(`CIN: ${de?.cin||""}`,je,Ke),re.text(`Company GSTIN: ${de?.companyGstin||"07AAPCR3026H1ZA"}`,R/2-20,Ke),re.text(`${os}: ${gs}`,R-je-50,Ke),Ke+=5,re.text(`Email: ${de?.email||"sales@reviranexgen.com"}`,R/2-20,Ke),re.text(`Date: ${new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,R-je-50,Ke),Ke+=8,vr("Client Details",11),ur([["Organisation Name",v.organisationName],["Registered Address",v.registeredAddress],["Consignee Address",v.consigneeAddress]],Zr,[["Dispatch Details",Ws]]),Ke+=cr;const Is=["Sr.No.","Description of Goods","HSN Code","Qty.","Unit","Rate","%age","Basic Amount (INR)"],Yr=[12,55,20,13,13,20,14,43],Fs=ee.filter(hn=>hn.description.trim()).map(hn=>[String(hn.serialNo),hn.description,hn.hsnCode,String(hn.quantity),hn.unit||"LS",Xe(Number(hn.ratePerUnit)||0),`${Number(hn.percentage)||0}%`,Xe(Number(hn.amount)||0)]);tr(15),re.setFillColor(tn),re.setDrawColor(Mt),re.setLineWidth(.2),re.rect(je,Ke-3,we,5.8,"FD"),re.setFont("helvetica","bold"),re.setFontSize(8);let dr=je;Is.forEach((hn,Nn)=>{re.line(dr,Ke-3,dr,Ke+2.8),re.text(hn,dr+Vt,Ke+.8),dr+=Yr[Nn]}),re.line(dr,Ke-3,dr,Ke+2.8),Ke+=5.8,re.setFont("helvetica","normal"),Fs.forEach((hn,Nn)=>{const gn=hn.map((it,ft)=>re.splitTextToSize(it,Yr[ft]-Vt*2)),Ht=Math.max(...gn.map(it=>it.length)),Xt=Math.max(5.8,Ht*3.2+1.2);tr(Xt+2),Nn%2===0&&(re.setFillColor(245,245,245),re.rect(je,Ke-3,we,Xt,"F")),re.setDrawColor(Mt),re.rect(je,Ke-3,we,Xt,"S");let pt=je;gn.forEach((it,ft)=>{re.line(pt,Ke-3,pt,Ke-3+Xt),ft===0?re.setFont("helvetica","bold"):re.setFont("helvetica","normal"),it.forEach((Ze,dt)=>{re.text(Ze,pt+Vt,Ke+.1+yn+dt*3.2)}),pt+=Yr[ft]}),re.line(pt,Ke-3,pt,Ke-3+Xt),Ke+=Xt}),Ke+=cr;const ls=[{detail:"Total Amount (INR)",value:an(ge.totalAmount)},{detail:"Total Amount before Tax",value:an(ge.totalAmount)},{detail:"(1) Add: CGST",value:an(ge.cgstAmount)},{detail:"(2) Add: SGST",value:an(ge.sgstAmount)},{detail:"(3) Add: IGST",value:an(ge.igstAmount)},{detail:"Total GST",value:an(ge.totalTax)},{detail:"Grand Total",value:an(ge.grandTotal)}];Rs(se(ge.grandTotal),ls),Ke+=cr,vr("Bank Details",11),on([[["Account Name",de?.entityName||"Revira NexGen Structures Pvt. Ltd"],["Account Number","73361900002657"]],[["Address",de?.headOfficeAddress||"28, E2 Block, Shivram Park Nangloi Delhi - 110041"],["IFSC Code","YESB0000733"]]]),Ke+=cr,tr(20),re.text(`For, ${de?.entityName||"Revira NexGen Structures Pvt. Ltd"}`,R-je-60,Ke),Ke+=18,re.text("Authorised Signatory",R-je-50,Ke);const ai=new Date,Mi=`${String(ai.getDate()).padStart(2,"0")}${String(ai.getMonth()+1).padStart(2,"0")}${ai.getFullYear()}`,Bi=(de?.entityName||"RNS").split(" ").map(hn=>hn[0]).join(""),Bn=`${Ss==="TAX INVOICE"?"TAX_INVOICE":"PROFORMA_INVOICE"}_${Mi}_${Bi}_${v.revision}.pdf`,vi=ve?re.output("datauristring",{filename:Bn}):void 0;return X&&re.save(Bn),M||a({title:X?"PDF exported":"PDF generated",description:X?`Invoice saved as ${Bn}`:"Invoice PDF is ready."}),{fileName:Bn,dataUri:vi}}catch(re){return console.error("PDF export error:",re),M||a({title:"Export failed",description:"Failed to export invoice PDF. Please try again.",variant:"destructive"}),null}},ht=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,vt=()=>{if(!F?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}P({to:Q?.emailAddress||"",subject:`Invoice ${v.invoiceNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${ht}`}),f(!0)},Dt=async()=>{if(!F?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}const xe=S.to.split(/[,\s;]+/).map(M=>M.trim()).filter(Boolean);if(xe.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const X=await Qe({save:!1,silent:!0,returnDataUri:!0});if(!X?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for email.",variant:"destructive"});return}try{const M=X.dataUri.split(",")[1]||"",re=await(await wn("POST",`/revira/api/invoices/${F.id}/send-email`,{to:xe,subject:S.subject.trim(),message:S.message.trim(),fileName:X.fileName,pdfBase64:M})).json(),R=Array.isArray(re?.accepted)?re.accepted:[],H=R.length>0?R.join(", "):xe.join(", ");a({title:"Email queued",description:`SMTP accepted: ${H}.`}),f(!1)}catch(M){a({title:"Send failed",description:M?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},le=()=>{if(!F?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const xe=(Q?.mobileNumber||"").replace(/\D/g,""),X=xe.length===10?`91${xe}`:xe;I({mobile:X,message:`Please find the attached file for details

${ht}`}),j(!0)},xt=async()=>{if(!F?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const xe=_.mobile.split(/[,\s;]+/).map(M=>M.replace(/\D/g,"")).filter(Boolean);if(xe.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const X=await Qe({save:!1,silent:!0,returnDataUri:!0});if(!X?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for WhatsApp send.",variant:"destructive"});return}try{const M=X.dataUri.split(",")[1]||"";await wn("POST",`/revira/api/invoices/${F.id}/send-whatsapp`,{to:xe,message:_.message.trim(),fileName:X.fileName,pdfBase64:M}),a({title:"WhatsApp sent",description:`Invoice sent to ${xe.join(", ")}.`}),j(!1)}catch(M){a({title:"Send failed",description:M?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!te||!Q||!W?i.jsx(Ls,{user:W,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Ls,{user:W,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:te.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),te.location]})]})]}),i.jsxs(Ue,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-invoice",children:[i.jsx(_a,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:F?.revision||v.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),F&&i.jsx(Ue,{variant:"outline",size:"icon",onClick:()=>ne.mutate(),disabled:ne.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Ue,{onClick:Qe,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:vt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-invoice",title:"Send invoice by email",children:i.jsx(uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-invoice",title:"Send invoice on WhatsApp",children:i.jsx(Mm,{className:"w-4 h-4"})}),i.jsxs(Ue,{variant:"outline",onClick:ye,disabled:O.isPending||E.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-invoice",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),O.isPending||E.isPending?"Saving...":"Save Changes"]}),F&&z&&z.length>1&&i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this invoice (${F.revision})?`)&&me.mutate(F.id)},"data-testid":"button-delete-invoice",children:i.jsx(pr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsxs(ns,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(_a,{className:"w-5 h-5"}),"INVOICE DETAILS"]})}),i.jsxs(_n,{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Invoice Type"}),i.jsxs(Tl,{value:v.invoiceType,onValueChange:xe=>B({...v,invoiceType:xe}),children:[i.jsx(Zo,{"data-testid":"select-invoice-type",children:i.jsx(El,{})}),i.jsxs(Yo,{children:[i.jsx(ha,{value:"PROFORMA INVOICE",children:"PROFORMA INVOICE"}),i.jsx(ha,{value:"TAX INVOICE",children:"TAX INVOICE"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Invoice No."}),i.jsx(nt,{value:v.invoiceNumber,onChange:xe=>B({...v,invoiceNumber:xe.target.value}),"data-testid":"input-invoice-number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(nt,{value:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),disabled:!0})]})]})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"CLIENT DETAILS"})}),i.jsxs(_n,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Organisation Name"}),i.jsx(nt,{value:v.organisationName,onChange:xe=>B({...v,organisationName:xe.target.value}),"data-testid":"input-organisation-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Client GSTIN"}),i.jsx(nt,{value:v.clientGstin,onChange:xe=>B({...v,clientGstin:xe.target.value}),"data-testid":"input-client-gstin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Registered Address"}),i.jsx(nt,{value:v.registeredAddress,onChange:xe=>B({...v,registeredAddress:xe.target.value}),"data-testid":"input-registered-address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Consignee Address"}),i.jsx(kr,{value:v.consigneeAddress,onChange:xe=>B({...v,consigneeAddress:xe.target.value}),rows:2,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Order Reference Selection"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Reference Type"}),i.jsxs(Tl,{value:v.orderReferenceType,onValueChange:xe=>B({...v,orderReferenceType:xe}),children:[i.jsx(Zo,{"data-testid":"select-order-reference-type",children:i.jsx(El,{})}),i.jsxs(Yo,{children:[i.jsx(ha,{value:"wo",children:"W.O. No."}),i.jsx(ha,{value:"po",children:"P.O. No."})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:v.orderReferenceType==="po"?"P.O. No.":"W.O. No."}),i.jsx(nt,{value:v.orderReferenceType==="po"?v.purchaseOrderNo:v.workOrderNo,onChange:xe=>B({...v,...v.orderReferenceType==="po"?{purchaseOrderNo:xe.target.value}:{workOrderNo:xe.target.value}}),"data-testid":v.orderReferenceType==="po"?"input-po-number":"input-work-order"})]})]})]}),i.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[i.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Dispatch Details"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(nt,{value:v.vehicleNo,onChange:xe=>B({...v,vehicleNo:xe.target.value}),"data-testid":"input-vehicle-no"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(nh,{checked:v.showDispatchLrNo,onCheckedChange:xe=>B({...v,showDispatchLrNo:xe===!0}),"data-testid":"checkbox-dispatch-lr"}),"L.R. No."]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(nh,{checked:v.showDispatchPo,onCheckedChange:xe=>B({...v,showDispatchPo:xe===!0}),"data-testid":"checkbox-dispatch-po"}),"D.C No."]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(nh,{checked:v.showDispatchGatePass,onCheckedChange:xe=>B({...v,showDispatchGatePass:xe===!0}),"data-testid":"checkbox-dispatch-gate-pass"}),"Gate Pass"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.showDispatchLrNo&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"L.R. No."}),i.jsx(nt,{value:v.dispatchLrNo,onChange:xe=>B({...v,dispatchLrNo:xe.target.value}),"data-testid":"input-dispatch-lr"})]}),v.showDispatchPo&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"D.C No."}),i.jsx(nt,{value:v.dispatchPoNo,onChange:xe=>B({...v,dispatchPoNo:xe.target.value}),"data-testid":"input-dispatch-po"})]}),v.showDispatchGatePass&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Gate Pass"}),i.jsx(nt,{value:v.dispatchGatePass,onChange:xe=>B({...v,dispatchGatePass:xe.target.value}),"data-testid":"input-dispatch-gate-pass"})]})]})]})]})]}),i.jsxs(Cn,{children:[i.jsxs(ts,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(ns,{className:"text-lg text-slate-700",children:"INVOICE ITEMS"}),i.jsxs(Ue,{size:"sm",onClick:be,"data-testid":"button-add-item",children:[i.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(_n,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"Sr."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600",children:"Description"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"HSN Code"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Qty"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Unit"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"Rate"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"Amount"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsx("tbody",{children:ee.map(xe=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:xe.serialNo,onChange:X=>Ie(xe.id,"serialNo",parseInt(X.target.value)||1),className:"w-14 text-center","data-testid":`input-serial-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(kr,{value:xe.description,onChange:X=>Ie(xe.id,"description",X.target.value),rows:2,placeholder:"Description","data-testid":`input-description-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:xe.hsnCode,onChange:X=>Ie(xe.id,"hsnCode",X.target.value),"data-testid":`input-hsn-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:xe.quantity,onChange:X=>Ie(xe.id,"quantity",parseFloat(X.target.value)||0),"data-testid":`input-qty-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:xe.unit,onChange:X=>Ie(xe.id,"unit",X.target.value),"data-testid":`input-unit-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:xe.ratePerUnit,onChange:X=>Ie(xe.id,"ratePerUnit",parseFloat(X.target.value)||0),"data-testid":`input-rate-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:xe.amount,onChange:X=>Ie(xe.id,"amount",parseFloat(X.target.value)||0),"data-testid":`input-amount-${xe.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>Re(xe.id),disabled:ee.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${xe.id}`,children:i.jsx(lf,{className:"w-4 h-4"})})})]},xe.id))})]})})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"TAX & TOTALS"})}),i.jsx(_n,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Tax Type"}),i.jsxs(Tl,{value:v.appliedTaxType,onValueChange:xe=>B({...v,appliedTaxType:xe}),children:[i.jsx(Zo,{"data-testid":"select-tax-type",children:i.jsx(El,{})}),i.jsxs(Yo,{children:[i.jsx(ha,{value:"igst",children:"IGST (Interstate)"}),i.jsx(ha,{value:"cgst_sgst",children:"CGST + SGST (Intrastate)"})]})]})]}),v.appliedTaxType==="cgst_sgst"?i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CGST Rate (%)"}),i.jsx(nt,{type:"number",value:v.cgstRate,onChange:xe=>B({...v,cgstRate:xe.target.value}),"data-testid":"input-cgst-rate"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"SGST Rate (%)"}),i.jsx(nt,{type:"number",value:v.sgstRate,onChange:xe=>B({...v,sgstRate:xe.target.value}),"data-testid":"input-sgst-rate"})]})]}):i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"IGST Rate (%)"}),i.jsx(nt,{type:"number",value:v.igstRate,onChange:xe=>B({...v,igstRate:xe.target.value}),"data-testid":"input-igst-rate"})]})]}),i.jsxs("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Total Amount"}),i.jsx("span",{className:"font-medium",children:Me(ge.totalAmount)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Amount before Tax"}),i.jsx("span",{className:"font-medium",children:Me(ge.totalAmount)})]}),v.appliedTaxType==="cgst_sgst"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"CGST"}),i.jsx("span",{children:Me(ge.cgstAmount)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"SGST"}),i.jsx("span",{children:Me(ge.sgstAmount)})]})]}):i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500",children:"IGST"}),i.jsx("span",{children:Me(ge.igstAmount)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-2",children:[i.jsx("span",{className:"text-slate-600",children:"Total Tax"}),i.jsx("span",{className:"font-medium",children:Me(ge.totalTax)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-2 text-lg",children:[i.jsx("span",{className:"font-bold text-slate-700",children:"Grand Total"}),i.jsx("span",{className:"font-bold text-blue-600",children:Me(ge.grandTotal)})]}),i.jsx("div",{className:"text-sm text-slate-500 mt-2",children:se(ge.grandTotal)})]})]})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"BANK DETAILS"})}),i.jsx(_n,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Account Name:"}),i.jsx("span",{className:"ml-2 font-medium",children:de?.entityName||"Revira NexGen Structures Pvt. Ltd"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Account Number:"}),i.jsx("span",{className:"ml-2 font-medium",children:"073361900002657"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"Bank Address:"}),i.jsx("span",{className:"ml-2 font-medium",children:de?.headOfficeAddress||"28 E2 Block, Shivram Park, Nangloi, Delhi 41"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:"IFSC Code:"}),i.jsx("span",{className:"ml-2 font-medium",children:"YESB0000733"})]})]})})]})]})]}),i.jsx(mi,{open:o,onOpenChange:u,children:i.jsxs(ri,{className:"max-w-md",children:[i.jsx(si,{children:i.jsx(ii,{children:"Invoice Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:z?.map(xe=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${xe.id===F?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/invoice/${xe.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:xe.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(xe.createdAt).toLocaleDateString()})]}),z&&z.length>1&&i.jsx(Ue,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:X=>{X.stopPropagation(),confirm(`Are you sure you want to delete version ${xe.revision}?`)&&me.mutate(xe.id)},"data-testid":`button-delete-version-${xe.id}`,children:i.jsx(pr,{className:"w-4 h-4"})})]})},xe.id))})]})}),i.jsx(mi,{open:c,onOpenChange:f,children:i.jsxs(ri,{className:"sm:max-w-xl",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Invoice by Email"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),i.jsx(nt,{value:S.to,onChange:xe=>P(X=>({...X,to:xe.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-invoice"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),i.jsx(nt,{value:S.subject,onChange:xe=>P(X=>({...X,subject:xe.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-invoice"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),i.jsx(kr,{value:S.message,onChange:xe=>P(X=>({...X,message:xe.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-invoice"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-invoice",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:Dt,disabled:p,"data-testid":"button-send-email-submit-invoice",children:p?"Sending...":"Submit"})]})]})]})}),i.jsx(mi,{open:b,onOpenChange:j,children:i.jsxs(ri,{className:"sm:max-w-lg",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Invoice on WhatsApp"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),i.jsx(nt,{value:_.mobile,onChange:xe=>I(X=>({...X,mobile:xe.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-invoice"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),i.jsx(kr,{value:_.message,onChange:xe=>I(X=>({...X,message:xe.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-invoice"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-invoice",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:xt,disabled:y,"data-testid":"button-send-whatsapp-submit-invoice",children:y?"Sending...":"Submit"})]})]})]})})]})}function _5(){const t=Zu(),e=t.id,n=t.gatePassId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,D]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,I]=k.useState({mobile:"",message:""}),[v,B]=k.useState({gatePassNumber:"",revision:"R-001",gatePassType:"GATE PASS",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),ee=X=>{const M=X.split(/\s+/).map(ve=>ve.trim()).filter(Boolean);return M.length?M.map(ve=>ve[0]).join("").toUpperCase():"PROJECT"},ae=X=>{const M=String(X.getDate()).padStart(2,"0"),ve=String(X.getMonth()+1).padStart(2,"0"),re=String(X.getFullYear()).slice(-2);return`${M}-${ve}-${re}`},[W,te]=k.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:Q}=Ta(),{data:de}=Ln({queryKey:["/revira/api/projects",e],queryFn:async()=>{const X=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch project");return X.json()},enabled:!!e}),{data:F}=Ln({queryKey:["/revira/api/clients",de?.clientId],queryFn:async()=>{const X=await fetch(`/revira/api/clients/${de?.clientId}`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch client");return X.json()},enabled:!!de?.clientId}),{data:L}=Ln({queryKey:["/revira/api/branding"],enabled:!!Q}),{data:z}=Ln({queryKey:["/revira/api/gate-passes",n],queryFn:async()=>{if(n){const M=await fetch(`/revira/api/gate-passes/${n}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch gate pass");return M.json()}const X=await fetch(`/revira/api/projects/${e}/gate-pass`,{credentials:"include"});if(!X.ok){if(X.status===404)return null;throw new Error("Failed to fetch gate pass")}return X.json()},enabled:!!e}),{data:Y}=Ln({queryKey:["/revira/api/gate-passes",z?.id,"items"],queryFn:async()=>{const X=await fetch(`/revira/api/gate-passes/${z?.id}/items`,{credentials:"include"});if(!X.ok)throw new Error("Failed to fetch items");return X.json()},enabled:!!z?.id}),{data:Ce}=Ln({queryKey:["/revira/api/projects",e,"gate-pass-versions"],queryFn:async()=>{const X=await fetch(`/revira/api/projects/${e}/gate-pass-versions`,{credentials:"include"});return X.ok?X.json():[]},enabled:!!e}),_e=X=>{if(!X)return{};try{const M=JSON.parse(X);return M&&typeof M=="object"?M:{}}catch{return{}}};k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),k.useCallback(()=>{const X=[];return v.vehicleNo.trim()&&X.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&X.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&X.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&X.push(`Gate Pass: ${v.dispatchGatePass||"-"}`),X.length?X.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]);const Ae=k.useCallback(()=>{const X={gatePassType:v.gatePassType,issueNo:v.issueNo,issueDate:v.issueDate,revNo:v.revNo,revDate:v.revDate,consigneeName:v.consigneeName,consigneeAddressText:v.consigneeAddressText,modeOfTransport:v.modeOfTransport,vehicleNumber:v.vehicleNumber,transportVehicle:v.transportVehicle,contactNo:v.contactNo,contactPerson:v.contactPerson,remarkText:v.remarkText,storeKeeperSignature:v.storeKeeperSignature,qcEnggSignature:v.qcEnggSignature,storeInchargeSignature:v.storeInchargeSignature,plantHeadSignature:v.plantHeadSignature,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(X)},[v]);k.useEffect(()=>{if(de&&F&&!z){const X=new Date,M=ee(de.projectName),ve=ae(X);B(re=>({...re,gatePassNumber:`RNS/${M}/${ve}/RNS-GT-002`,issueDate:X.toISOString().split("T")[0],revDate:X.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:F.name,registeredAddress:F.location,consigneeAddress:`${F.name}
${F.location}`,clientGstin:F.gstNo||""}))}},[de,F,z]),k.useEffect(()=>{if(z){const X=_e(z.contentSections),M=je=>(je||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),ve=X.orderReferenceType||(X.showPurchaseOrderNo?"po":"wo"),re=X.vehicleNo!==void 0||X.showDispatchLrNo!==void 0||X.showDispatchPo!==void 0||X.showDispatchGatePass!==void 0||X.dispatchLrNo!==void 0||X.dispatchPoNo!==void 0||X.dispatchGatePass!==void 0,R=X.transportVehicle||z.dispatchDetails||"",H=R.includes("-")?R.split("-").map(je=>je.trim()):[];B({gatePassNumber:z.gatePassNumber,revision:z.revision,gatePassType:X.gatePassType||"GATE PASS",issueNo:X.issueNo||"001",issueDate:X.issueDate||"",revNo:X.revNo||"00",revDate:X.revDate||"",consigneeName:X.consigneeName||z.organisationName||"",consigneeAddressText:X.consigneeAddressText||z.registeredAddress||"",modeOfTransport:X.modeOfTransport||H[0]||"By Road",vehicleNumber:X.vehicleNumber||H[1]||"",transportVehicle:X.transportVehicle||X.vehicleNo||z.dispatchDetails||"",contactNo:X.contactNo||"",contactPerson:X.contactPerson||"",remarkText:X.remarkText||"",storeKeeperSignature:X.storeKeeperSignature||"",qcEnggSignature:X.qcEnggSignature||"",storeInchargeSignature:X.storeInchargeSignature||"",plantHeadSignature:X.plantHeadSignature||"",organisationName:z.organisationName,registeredAddress:z.registeredAddress,consigneeAddress:z.consigneeAddress,clientGstin:z.clientGstin||"",workOrderNo:M(z.workOrderNo)||"NIL",orderReferenceType:ve,purchaseOrderNo:X.purchaseOrderNo||(ve==="po"?M(z.workOrderNo):""),dispatchDetails:z.dispatchDetails||"-",vehicleNo:X.vehicleNo||(!re&&z.dispatchDetails&&z.dispatchDetails!=="-"?z.dispatchDetails:""),showDispatchLrNo:X.showDispatchLrNo??!1,showDispatchPo:X.showDispatchPo??!1,showDispatchGatePass:X.showDispatchGatePass??!1,dispatchLrNo:X.dispatchLrNo||"",dispatchPoNo:X.dispatchPoNo||"",dispatchGatePass:X.dispatchGatePass||"",appliedTaxType:z.appliedTaxType||"igst",cgstRate:z.cgstRate||"9",sgstRate:z.sgstRate||"9",igstRate:z.igstRate||"18"})}},[z]),k.useEffect(()=>{Y&&Y.length>0&&te(Y.map((X,M)=>({id:X.id,serialNo:X.serialNo>0?X.serialNo:M+1,partMark:X.hsnCode||"",materialDescription:X.description||"",materialSize:X.ratePerUnit&&X.ratePerUnit!=="0"?X.ratePerUnit:"-",quantity:Number(X.quantity)||0,asslyPartSl:X.unit||"",approxValue:X.amount&&X.amount!=="0"?X.amount:"-",remarks:X.remarks||""})))},[Y]);const ge=k.useCallback(()=>{const X=W.reduce((je,we)=>{const ke=Number(String(we.approxValue).replace(/,/g,""));return je+(Number.isFinite(ke)?ke:0)},0);let M=0,ve=0,re=0;v.appliedTaxType==="cgst_sgst"?(M=X*(Number(v.cgstRate)/100),ve=X*(Number(v.sgstRate)/100)):re=X*(Number(v.igstRate)/100);const R=M+ve+re,H=X+R;return{totalAmount:X,cgstAmount:M,sgstAmount:ve,igstAmount:re,totalTax:R,grandTotal:H}},[W,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=(X,M="0")=>{const ve=Number(String(X??"").replace(/,/g,"").trim());return Number.isFinite(ve)?String(ve):M},se=(X,M)=>{const ve=L?.[M]||"";B(re=>re[X]?{...re,[X]:""}:ve?{...re,[X]:ve}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),re))},O=k.useCallback(()=>W.slice(0,5).filter(X=>X.partMark.trim()||X.materialDescription.trim()),[W]),E=Tr({mutationFn:async()=>{const X=O(),ve=await(await wn("POST","/revira/api/gate-passes",{projectId:Number(e),gatePassNumber:v.gatePassNumber,revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(let re=0;re<X.length;re++){const R=X[re];await wn("POST",`/revira/api/gate-passes/${ve.id}/items`,{serialNo:R.serialNo>0?R.serialNo:re+1,description:R.materialDescription,hsnCode:R.partMark,quantity:De(R.quantity),unit:R.asslyPartSl,ratePerUnit:De(R.materialSize,"0"),percentage:"0",amount:De(R.approxValue,"0"),remarks:R.remarks})}return ve},onSuccess:X=>{On.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),r(`/revira/projects/${e}/gate-pass/${X.id}`),a({title:"Gate Pass saved",description:"The gate pass has been created successfully."})},onError:X=>{a({title:"Error",description:X.message||"Failed to create gate pass",variant:"destructive"})}}),ne=Tr({mutationFn:async()=>{const X=O();await wn("PUT",`/revira/api/gate-passes/${z?.id}`,{gatePassNumber:v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002",revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let M=Y||[];if(!M.length){const ve=await fetch(`/revira/api/gate-passes/${z?.id}/items`,{credentials:"include"});ve.ok&&(M=await ve.json())}for(const ve of M)await wn("DELETE",`/revira/api/gate-pass-items/${ve.id}`);for(let ve=0;ve<X.length;ve++){const re=X[ve];await wn("POST",`/revira/api/gate-passes/${z?.id}/items`,{serialNo:re.serialNo>0?re.serialNo:ve+1,description:re.materialDescription,hsnCode:re.partMark,quantity:De(re.quantity),unit:re.asslyPartSl,ratePerUnit:De(re.materialSize,"0"),percentage:"0",amount:De(re.approxValue,"0"),remarks:re.remarks})}},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),On.invalidateQueries({queryKey:["/revira/api/gate-passes",z?.id,"items"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass updated",description:"The gate pass has been updated successfully."})},onError:X=>{a({title:"Error",description:X.message||"Failed to update gate pass",variant:"destructive"})}}),me=Tr({mutationFn:async()=>(await wn("POST",`/revira/api/gate-passes/${z?.id}/duplicate`,{})).json(),onSuccess:X=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),r(`/revira/projects/${e}/gate-pass/${X.id}`),a({title:"Gate Pass duplicated",description:`Created new version: ${X.revision}`})},onError:X=>{a({title:"Error",description:X.message||"Failed to duplicate gate pass",variant:"destructive"})}}),ye=Tr({mutationFn:async X=>{await wn("DELETE",`/revira/api/gate-passes/${X}`,void 0)},onSuccess:()=>{if(On.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass deleted",description:"The gate pass version has been deleted."}),u(!1),Ce&&Ce.length>1){const X=Ce.filter(M=>M.id!==z?.id);X.length>0?r(`/revira/projects/${e}/gate-pass/${X[0].id}`):r(`/revira/projects/${e}/gate-pass`)}else r(`/revira/projects/${e}/gate-pass`)},onError:X=>{a({title:"Error",description:X.message||"Failed to delete gate pass",variant:"destructive"})}}),be=()=>{z?ne.mutate():E.mutate()},Re=()=>{const X=Math.max(...W.map(M=>M.id),0)+1;te([...W,{id:X,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},Ie=X=>{if(W.length>1){const M=W.filter(ve=>ve.id!==X);te(M.map((ve,re)=>({...ve,serialNo:re+1})))}},Me=(X,M,ve)=>{te(re=>re.map(R=>R.id===X?{...R,[M]:ve}:R))},Qe=()=>W.reduce((X,M)=>{const ve=Number(String(M.approxValue||"").replace(/,/g,"").trim());return X+(Number.isFinite(ve)?ve:0)},0),ht=async X=>{const M=X?.save??!0,ve=X?.silent??!1,re=X?.returnDataUri??!1;try{const R=new un({orientation:"portrait",unit:"mm",format:"a4"}),H=210,je=297,we=15,ke=H-we*2,Ve=35,at=30,ct=pt=>pt*.2646,_t=ct(80),kt=ct(50),cr=ct(80),yn=ct(10),Vt=ct(3),Mt=ct(3),tn="#eeb7b7",Ke="#fff5f5";let ot=Ve+10,Xe=1;const an=pt=>pt.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),er=pt=>an(pt),vn=pt=>new Promise((it,ft)=>{const Ze=new Image;Ze.crossOrigin="anonymous",Ze.onload=()=>{const dt=document.createElement("canvas");dt.width=Ze.width,dt.height=Ze.height,dt.getContext("2d")?.drawImage(Ze,0,0),it(dt.toDataURL("image/png"))},Ze.onerror=ft,Ze.src=pt});let Yt=null,Dn=null,ms=null;try{L?.headerUrl&&(Yt=await vn(L.headerUrl)),L?.footerUrl&&(Dn=await vn(L.footerUrl)),L?.stampUrl&&(ms=await vn(L.stampUrl))}catch(pt){console.warn("Failed to load branding images:",pt)}const tr=pt=>{Yt&&R.addImage(Yt,"PNG",0,0,H,Ve),Dn&&R.addImage(Dn,"PNG",0,je-at,H,at),ms&&R.addImage(ms,"PNG",H-kt-_t,je-cr-_t,_t,_t),R.setFontSize(8),R.setTextColor(128,128,128),R.text(`Page ${pt}`,H/2,je-8,{align:"center"})},vr=pt=>ot+pt>je-at-10?(R.addPage(),Xe++,tr(Xe),ot=Ve+10,!0):!1,ur=(pt,it=12)=>{ot+=4,vr(12),R.setFillColor("#d92134"),R.rect(we,ot-3.5,4,5,"F"),R.setFont("helvetica","bold"),R.setFontSize(it),R.setTextColor("#1e3a5f"),R.text(pt,we+7,ot),ot+=5.5},on=(pt,it,ft=[])=>{const Ze=[38,57,38,57],dt=5.8,Lt=Mt,mt=ct(3),Tt=Ut=>Ut-3,St=(Ut,Ft=0)=>Tt(Ut)+mt+2.5+Ft*3.2;vr(dt+4),R.setFont("helvetica","normal"),R.setFontSize(8.5);let It=0;const Jt=Ut=>Ut.forEach(([Ft,Wt])=>{const bn=R.splitTextToSize(Ft,Ze[0]-Lt*2),Cr=R.splitTextToSize(Wt||"-",Ze[1]+Ze[2]+Ze[3]-Lt*2),dn=Math.max(bn.length||1,Cr.length||1),q=Math.max(dt,dn*3.2+1.2);if(vr(q+2),It%2===0&&(R.setFillColor(245,245,245),R.rect(we,Tt(ot),ke,q,"F")),R.setDrawColor(tn),R.rect(we,Tt(ot),ke,q,"S"),R.line(we+Ze[0],Tt(ot),we+Ze[0],Tt(ot)+q),R.setFont("helvetica","bold"),bn.forEach((ue,oe)=>{R.text(ue,we+Lt,St(ot,oe))}),Ft==="Dispatch Details"&&Wt){const ue=Wt.split(",").map(An=>An.trim()).filter(Boolean),oe=we+Ze[0]+Lt,Te=we+Ze[0]+Ze[1]+Ze[2]+Ze[3]-Lt;let Ne=oe,At=St(ot,0);ue.forEach((An,Gt)=>{const hr=Gt<ue.length-1?", ":"",Xr=An.indexOf(" - "),_r=Xr>-1?An.slice(0,Xr):An,cs=Xr>-1?An.slice(Xr):"",Dr=R.getTextWidth(_r),us=R.getTextWidth(cs+hr);Ne+Dr+us>Te&&(Ne=oe,At+=3.2),R.setFont("helvetica","bold"),R.text(_r,Ne,At),Ne+=Dr,R.setFont("helvetica","normal"),R.text(cs+hr,Ne,At),Ne+=us})}else R.setFont("helvetica","normal"),Cr.forEach((ue,oe)=>{R.text(ue,we+Ze[0]+Lt,St(ot,oe))});ot+=q,It+=1});Jt(pt),it.forEach(Ut=>{const[Ft,Wt]=Ut,bn=R.splitTextToSize(Ft?.[0]||"",Ze[0]-Lt*2),Cr=R.splitTextToSize(Ft?.[1]||"-",Ze[1]-Lt*2),dn=R.splitTextToSize(Wt?.[0]||"",Ze[2]-Lt*2),q=R.splitTextToSize(Wt?.[1]||"",Ze[3]-Lt*2),ue=Math.max(bn.length||1,Cr.length||1,dn.length||1,q.length||1),oe=Math.max(dt,ue*3.2+1.2);vr(oe+2),It%2===0&&(R.setFillColor(245,245,245),R.rect(we,Tt(ot),ke,oe,"F")),R.setDrawColor(tn),R.rect(we,Tt(ot),ke,oe,"S");let Te=we;for(let Ne=0;Ne<3;Ne++)Te+=Ze[Ne],R.line(Te,Tt(ot),Te,Tt(ot)+oe);R.setFont("helvetica","bold"),bn.forEach((Ne,At)=>R.text(Ne,we+Lt,St(ot,At))),dn.forEach((Ne,At)=>R.text(Ne,we+Ze[0]+Ze[1]+Lt,St(ot,At))),R.setFont("helvetica","normal"),Cr.forEach((Ne,At)=>R.text(Ne,we+Ze[0]+Lt,St(ot,At))),q.forEach((Ne,At)=>R.text(Ne,we+Ze[0]+Ze[1]+Ze[2]+Lt,St(ot,At))),ot+=oe,It+=1}),Jt(ft)},Rs=pt=>{const it=[32,75,32,51],ft=5.8,Ze=Mt,dt=ct(3),Lt=Tt=>Tt-3,mt=(Tt,St=0)=>Lt(Tt)+dt+2.5+St*3.2;vr(ft+4),R.setFont("helvetica","normal"),R.setFontSize(8.5),pt.forEach((Tt,St)=>{const[It,Jt]=Tt,Ut=R.splitTextToSize(It?.[0]||"",it[0]-Ze*2),Ft=R.splitTextToSize(It?.[1]||"-",it[1]-Ze*2),Wt=R.splitTextToSize(Jt?.[0]||"",it[2]-Ze*2),bn=R.splitTextToSize(Jt?.[1]||"",it[3]-Ze*2),Cr=Math.max(Ut.length||1,Ft.length||1,Wt.length||1,bn.length||1),dn=Math.max(ft,Cr*3.2+1.2);vr(dn+2),St%2===0&&(R.setFillColor(245,245,245),R.rect(we,Lt(ot),ke,dn,"F")),R.setDrawColor(tn),R.rect(we,Lt(ot),ke,dn,"S");let q=we;for(let ue=0;ue<3;ue++)q+=it[ue],R.line(q,Lt(ot),q,Lt(ot)+dn);R.setFont("helvetica","bold"),Ut.forEach((ue,oe)=>R.text(ue,we+Ze,mt(ot,oe))),Wt.forEach((ue,oe)=>R.text(ue,we+it[0]+it[1]+Ze,mt(ot,oe))),R.setFont("helvetica","normal"),Ft.forEach((ue,oe)=>R.text(ue,we+it[0]+Ze,mt(ot,oe))),bn.forEach((ue,oe)=>R.text(ue,we+it[0]+it[1]+it[2]+Ze,mt(ot,oe))),ot+=dn})},Ss=(pt,it)=>{const ft=[95,55,ke-150],Ze=5.8,dt=Mt;vr(Ze+6),R.setFillColor(Ke),R.setDrawColor(tn),R.setLineWidth(.2),R.rect(we,ot-3.2,ke,Ze,"FD"),R.setFont("helvetica","bold"),R.setFontSize(8.5),R.text("Total Amount In Words",we+Mt,ot+.8),R.text("Details",we+ft[0]+Mt,ot+.8),R.text("Amount",we+ft[0]+ft[1]+Mt,ot+.8),R.line(we+ft[0],ot-3.2,we+ft[0],ot-3.2+Ze),R.line(we+ft[0]+ft[1],ot-3.2,we+ft[0]+ft[1],ot-3.2+Ze),ot+=Ze,R.setFont("helvetica","normal"),R.setFontSize(8.5);const Lt=it.map(It=>{const Jt=R.splitTextToSize(It.detail,ft[1]-dt*2),Ut=R.splitTextToSize(It.value,ft[2]-dt*2),Ft=Math.max(Jt.length||1,Ut.length||1),Wt=Math.max(Ze,Ft*3.2+1.2);return{detailLines:Jt,valueLines:Ut,rowHeight:Wt}}),mt=Lt.reduce((It,Jt)=>It+Jt.rowHeight,0);vr(mt+2),R.setDrawColor(tn),R.rect(we,ot-3.2,ft[0],mt,"S");const Tt=R.splitTextToSize(pt,ft[0]-dt*3);R.setFont("helvetica","bold"),Tt.forEach((It,Jt)=>{R.text(It,we+dt,ot+.1+Vt+Jt*3.2)});let St=ot;Lt.forEach((It,Jt)=>{Jt%2===0&&(R.setFillColor(245,245,245),R.rect(we+ft[0],St-3.2,ft[1]+ft[2],It.rowHeight,"F")),R.setDrawColor(tn),R.rect(we+ft[0],St-3.2,ft[1]+ft[2],It.rowHeight,"S"),R.line(we+ft[0]+ft[1],St-3.2,we+ft[0]+ft[1],St-3.2+It.rowHeight),(it[Jt]?.detail||"").trim().toLowerCase()==="grand total"?R.setFont("helvetica","bold"):R.setFont("helvetica","normal"),It.detailLines.forEach((Ut,Ft)=>{R.text(Ut,we+ft[0]+dt,St+.1+Vt+Ft*3.2)}),(it[Jt]?.detail||"").trim().toLowerCase()==="grand total"?R.setFont("helvetica","bold"):R.setFont("helvetica","normal"),It.valueLines.forEach((Ut,Ft)=>{R.text(Ut,we+ft[0]+ft[1]+dt,St+.1+Vt+Ft*3.2)}),St+=It.rowHeight}),ot=St},os="NON-RETURNABLE GATE PASS",Ds=v.issueDate?new Date(v.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),nr=v.revDate?new Date(v.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");tr(Xe),R.setFontSize(16),R.setFont("helvetica","bold"),R.setTextColor("#da2032"),R.text(os,H/2,ot,{align:"center"}),ot+=8,ur("Gate Pass Details",11),on([["Doc. No",v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002"],["Date",Ds||"-"],["CONSIGNEE NAME",v.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",v.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",v.modeOfTransport||"By Road"],["Vehicle No.",v.vehicleNumber||"MH 40 CX 2839"],["Contact No.",v.contactNo||"7972800638"],["Contact person",v.contactPerson||"SAILESH"]],[]),ot+=yn;const Rr=["SR. NO.","PARTMARK","MATERIAL DISCRIPTION","MATERIAL SIZE","QUANTITY","ASSLY PART SL","APPROX. VALUE"],xr=[14,25,40,29,20,24,28],gs=W.filter(pt=>pt.partMark.trim()||pt.materialDescription.trim()).map(pt=>[pt.serialNo?String(pt.serialNo):"",pt.partMark,pt.materialDescription,pt.materialSize,String(pt.quantity),pt.asslyPartSl,pt.approxValue]);vr(15),R.setFillColor(Ke),R.setDrawColor(tn),R.setLineWidth(.2),R.rect(we,ot-3,ke,5.8,"FD"),R.setFont("helvetica","bold"),R.setFontSize(8);let Qr=we;Rr.forEach((pt,it)=>{R.line(Qr,ot-3,Qr,ot+2.8),R.text(pt,Qr+Mt,ot+.8),Qr+=xr[it]}),R.line(Qr,ot-3,Qr,ot+2.8),ot+=5.8,R.setFont("helvetica","normal"),gs.forEach((pt,it)=>{const ft=pt.map((mt,Tt)=>R.splitTextToSize(mt,xr[Tt]-Mt*2)),Ze=Math.max(...ft.map(mt=>mt.length)),dt=Math.max(5.8,Ze*3.2+1.2);vr(dt+2),it%2===0&&(R.setFillColor(245,245,245),R.rect(we,ot-3,ke,dt,"F")),R.setDrawColor(tn),R.rect(we,ot-3,ke,dt,"S");let Lt=we;ft.forEach((mt,Tt)=>{R.line(Lt,ot-3,Lt,ot-3+dt),Tt===0?R.setFont("helvetica","bold"):R.setFont("helvetica","normal"),mt.forEach((St,It)=>{R.text(St,Lt+Mt,ot+.1+Vt+It*3.2)}),Lt+=xr[Tt]}),R.line(Lt,ot-3,Lt,ot-3+dt),ot+=dt});const Er=W.reduce((pt,it)=>pt+(Number(it.quantity)||0),0),Ws=Qe(),Is=["","","TOTAL","",String(Er),"",Ws.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((pt,it)=>R.splitTextToSize(pt,xr[it]-Mt*2)),Yr=Math.max(...Is.map(pt=>pt.length)),Fs=Math.max(5.8,Yr*3.2+1.2);vr(Fs+2),R.setFillColor(245,245,245),R.rect(we,ot-3,ke,Fs,"F"),R.setDrawColor(tn),R.rect(we,ot-3,ke,Fs,"S");let dr=we;Is.forEach((pt,it)=>{R.line(dr,ot-3,dr,ot-3+Fs),R.setFont("helvetica",it===2||it===4||it===5||it===6?"bold":"normal"),pt.forEach((ft,Ze)=>{R.text(ft,dr+Mt,ot+.1+Vt+Ze*3.2)}),dr+=xr[it]}),R.line(dr,ot-3,dr,ot-3+Fs),ot+=Fs,ot+=yn,ur("Remark",11);const ls=18;vr(ls+5),R.setDrawColor(tn),R.rect(we,ot-3,ke,ls,"S"),R.setFont("helvetica","normal"),R.setFontSize(9),R.splitTextToSize(v.remarkText||"-",ke-2*Mt).forEach((pt,it)=>{R.text(pt,we+Mt,ot+.1+Vt+it*3.2)}),ot+=ls+yn,ur("Signature",11);const Mi=[{label:"Store Keeper",data:v.storeKeeperSignature},{label:"Qc Engg.",data:v.qcEnggSignature},{label:"Store Incharge",data:v.storeInchargeSignature},{label:"Plant Head",data:v.plantHeadSignature}],Bi=3,qi=22,Bn=(ke-Bi*3)/4;vr(qi+12),Mi.forEach((pt,it)=>{const ft=we+it*(Bn+Bi);if(R.rect(ft,ot-3,Bn,qi,"S"),pt.data)try{const Ze=R.getImageProperties(pt.data),dt=Ze.width||1,Lt=Ze.height||1,mt=Bn-2,Tt=qi-7,St=dt/Lt,It=mt/Tt;let Jt=mt,Ut=Tt;St>It?Ut=mt/St:Jt=Tt*St;const Ft=ft+1+(mt-Jt)/2,Wt=ot-2.2+(Tt-Ut)/2;R.addImage(pt.data,"PNG",Ft,Wt,Jt,Ut)}catch{}R.setFont("helvetica","bold"),R.setFontSize(8),R.text(pt.label,ft+Bn/2,ot+qi-1.2,{align:"center"})}),ot+=qi;const vi=new Date,hn=`${String(vi.getDate()).padStart(2,"0")}${String(vi.getMonth()+1).padStart(2,"0")}${vi.getFullYear()}`,Nn=(L?.entityName||"RNS").split(" ").map(pt=>pt[0]).join(""),Ht=`GATE_PASS_${hn}_${Nn}_${v.revision}.pdf`,Xt=re?R.output("datauristring",{filename:Ht}):void 0;return M&&R.save(Ht),ve||a({title:M?"PDF exported":"PDF generated",description:M?`Gate Pass saved as ${Ht}`:"Gate pass PDF is ready."}),{fileName:Ht,dataUri:Xt}}catch(R){return console.error("PDF export error:",R),ve||a({title:"Export failed",description:"Failed to export gate pass PDF. Please try again.",variant:"destructive"}),null}},vt=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,Dt=()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}P({to:F?.emailAddress||"",subject:`Gate Pass ${v.gatePassNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${vt}`}),f(!0)},le=async()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}const X=S.to.split(/[,\s;]+/).map(ve=>ve.trim()).filter(Boolean);if(X.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const M=await ht({save:!1,silent:!0,returnDataUri:!0});if(!M?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for email.",variant:"destructive"});return}try{const ve=M.dataUri.split(",")[1]||"",R=await(await wn("POST",`/revira/api/gate-passes/${z.id}/send-email`,{to:X,subject:S.subject.trim(),message:S.message.trim(),fileName:M.fileName,pdfBase64:ve})).json(),H=Array.isArray(R?.accepted)?R.accepted:[],je=H.length>0?H.join(", "):X.join(", ");a({title:"Email queued",description:`SMTP accepted: ${je}.`}),f(!1)}catch(ve){a({title:"Send failed",description:ve?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},xt=()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const X=(F?.mobileNumber||"").replace(/\D/g,""),M=X.length===10?`91${X}`:X;I({mobile:M,message:`Please find the attached file for details

${vt}`}),j(!0)},xe=async()=>{if(!z?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const X=_.mobile.split(/[,\s;]+/).map(ve=>ve.replace(/\D/g,"")).filter(Boolean);if(X.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const M=await ht({save:!1,silent:!0,returnDataUri:!0});if(!M?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for WhatsApp send.",variant:"destructive"});return}try{const ve=M.dataUri.split(",")[1]||"";await wn("POST",`/revira/api/gate-passes/${z.id}/send-whatsapp`,{to:X,message:_.message.trim(),fileName:M.fileName,pdfBase64:ve}),a({title:"WhatsApp sent",description:`Gate pass sent to ${X.join(", ")}.`}),j(!1)}catch(ve){a({title:"Send failed",description:ve?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!de||!F||!Q?i.jsx(Ls,{user:Q,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Ls,{user:Q,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:de.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),de.location]})]})]}),i.jsxs(Ue,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/revira/projects/${e}/gate-pass`),"data-testid":"button-new-gate-pass",children:[i.jsx(_a,{className:"w-4 h-4 mr-2"}),"New Gate Pass"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:z?.revision||v.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),z&&i.jsx(Ue,{variant:"outline",size:"icon",onClick:()=>me.mutate(),disabled:me.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-gate-pass",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Ue,{onClick:ht,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:Dt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-gate-pass",title:"Send gate pass by email",children:i.jsx(uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:xt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-gate-pass",title:"Send gate pass on WhatsApp",children:i.jsx(Mm,{className:"w-4 h-4"})}),i.jsxs(Ue,{variant:"outline",onClick:be,disabled:E.isPending||ne.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-gate-pass",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),E.isPending||ne.isPending?"Saving...":"Save Changes"]}),z&&Ce&&Ce.length>1&&i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this gate pass (${z.revision})?`)&&ye.mutate(z.id)},"data-testid":"button-delete-gate-pass",children:i.jsx(pr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsxs(ns,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(_a,{className:"w-5 h-5"}),"GATE PASS DETAILS"]})}),i.jsxs(_n,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),i.jsx(nt,{value:v.gatePassNumber,onChange:X=>B({...v,gatePassNumber:X.target.value}),"data-testid":"input-doc-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(nt,{type:"date",value:v.issueDate,onChange:X=>B({...v,issueDate:X.target.value}),"data-testid":"input-date"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),i.jsx(nt,{value:v.consigneeName,onChange:X=>B({...v,consigneeName:X.target.value}),"data-testid":"input-consignee-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),i.jsx(kr,{value:v.consigneeAddressText,onChange:X=>B({...v,consigneeAddressText:X.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),i.jsx(nt,{value:v.modeOfTransport,onChange:X=>B({...v,modeOfTransport:X.target.value}),"data-testid":"input-mode-of-transport"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(nt,{value:v.vehicleNumber,onChange:X=>B({...v,vehicleNumber:X.target.value}),"data-testid":"input-vehicle-number"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),i.jsx(nt,{value:v.contactNo,onChange:X=>B({...v,contactNo:X.target.value}),"data-testid":"input-contact-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),i.jsx(nt,{value:v.contactPerson,onChange:X=>B({...v,contactPerson:X.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),i.jsxs(Cn,{children:[i.jsxs(ts,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(ns,{className:"text-lg text-slate-700",children:"GATE PASS ITEMS"}),i.jsxs(Ue,{size:"sm",onClick:Re,"data-testid":"button-add-item",children:[i.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(_n,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"PARTMARK"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"ASSLY PART SL"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsxs("tbody",{children:[W.map(X=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.serialNo===0?"":X.serialNo,onChange:M=>Me(X.id,"serialNo",parseInt(M.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.partMark,onChange:M=>Me(X.id,"partMark",M.target.value),"data-testid":`input-partmark-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.materialDescription,onChange:M=>Me(X.id,"materialDescription",M.target.value),"data-testid":`input-material-description-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.materialSize,onChange:M=>Me(X.id,"materialSize",M.target.value),"data-testid":`input-material-size-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:X.quantity,onChange:M=>Me(X.id,"quantity",parseFloat(M.target.value)||0),"data-testid":`input-qty-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.asslyPartSl,onChange:M=>Me(X.id,"asslyPartSl",M.target.value),"data-testid":`input-assly-part-sl-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:X.approxValue,onChange:M=>Me(X.id,"approxValue",M.target.value),"data-testid":`input-approx-value-${X.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>Ie(X.id),disabled:W.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${X.id}`,children:i.jsx(lf,{className:"w-4 h-4"})})})]},X.id)),i.jsxs("tr",{className:"border-t bg-slate-50",children:[i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:W.reduce((X,M)=>X+(Number(M.quantity)||0),0)}),i.jsx("td",{className:"p-3 font-semibold"}),i.jsx("td",{className:"p-3 font-semibold",children:Qe().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3"})]})]})]})})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"REMARK"})}),i.jsx(_n,{className:"p-6",children:i.jsx(kr,{value:v.remarkText,onChange:X=>B({...v,remarkText:X.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),i.jsx(_n,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:v.storeKeeperSignature?i.jsx("img",{src:v.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.storeKeeperSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:v.qcEnggSignature?i.jsx("img",{src:v.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),i.jsx("span",{className:"text-xs text-slate-500",children:v.qcEnggSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:v.storeInchargeSignature?i.jsx("img",{src:v.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.storeInchargeSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>se("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:v.plantHeadSignature?i.jsx("img",{src:v.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),i.jsx(mi,{open:o,onOpenChange:u,children:i.jsxs(ri,{className:"max-w-md",children:[i.jsx(si,{children:i.jsx(ii,{children:"Gate Pass Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ce?.map(X=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${X.id===z?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/gate-pass/${X.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:X.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(X.createdAt).toLocaleDateString()})]}),Ce&&Ce.length>1&&i.jsx(Ue,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:M=>{M.stopPropagation(),confirm(`Are you sure you want to delete version ${X.revision}?`)&&ye.mutate(X.id)},"data-testid":`button-delete-version-${X.id}`,children:i.jsx(pr,{className:"w-4 h-4"})})]})},X.id))})]})}),i.jsx(mi,{open:c,onOpenChange:f,children:i.jsxs(ri,{className:"sm:max-w-xl",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Gate Pass by Email"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),i.jsx(nt,{value:S.to,onChange:X=>P(M=>({...M,to:X.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-gate-pass"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),i.jsx(nt,{value:S.subject,onChange:X=>P(M=>({...M,subject:X.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-gate-pass"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),i.jsx(kr,{value:S.message,onChange:X=>P(M=>({...M,message:X.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-gate-pass"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-gate-pass",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:le,disabled:p,"data-testid":"button-send-email-submit-gate-pass",children:p?"Sending...":"Submit"})]})]})]})}),i.jsx(mi,{open:b,onOpenChange:j,children:i.jsxs(ri,{className:"sm:max-w-lg",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Gate Pass on WhatsApp"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),i.jsx(nt,{value:_.mobile,onChange:X=>I(M=>({...M,mobile:X.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-gate-pass"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),i.jsx(kr,{value:_.message,onChange:X=>I(M=>({...M,message:X.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-gate-pass"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-gate-pass",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:xe,disabled:y,"data-testid":"button-send-whatsapp-submit-gate-pass",children:y?"Sending...":"Submit"})]})]})]})})]})}function A5(){const t=Zu(),e=t.id,n=t.deliveryChallanId,[,r]=za(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(!1),[y,D]=k.useState(!1),[S,P]=k.useState({to:"",subject:"",message:""}),[_,I]=k.useState({mobile:"",message:""}),[v,B]=k.useState({gatePassNumber:"",revision:"R-001",gatePassType:"Delivery Challan",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),ee=M=>{const ve=M.split(/\s+/).map(re=>re.trim()).filter(Boolean);return ve.length?ve.map(re=>re[0]).join("").toUpperCase():"PROJECT"},ae=M=>{const ve=String(M.getDate()).padStart(2,"0"),re=String(M.getMonth()+1).padStart(2,"0"),R=String(M.getFullYear()).slice(-2);return`${ve}-${re}-${R}`},[W,te]=k.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:Q}=Ta(),{data:de}=Ln({queryKey:["/revira/api/projects",e],queryFn:async()=>{const M=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch project");return M.json()},enabled:!!e}),{data:F}=Ln({queryKey:["/revira/api/clients",de?.clientId],queryFn:async()=>{const M=await fetch(`/revira/api/clients/${de?.clientId}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch client");return M.json()},enabled:!!de?.clientId}),{data:L}=Ln({queryKey:["/revira/api/branding"],enabled:!!Q}),{data:z}=Ln({queryKey:["/revira/api/delivery-challans",n],queryFn:async()=>{if(n){const ve=await fetch(`/revira/api/delivery-challans/${n}`,{credentials:"include"});if(!ve.ok)throw new Error("Failed to fetch Delivery Challan");return ve.json()}const M=await fetch(`/revira/api/projects/${e}/delivery-challan`,{credentials:"include"});if(!M.ok){if(M.status===404)return null;throw new Error("Failed to fetch Delivery Challan")}return M.json()},enabled:!!e}),{data:Y}=Ln({queryKey:["/revira/api/delivery-challans",z?.id,"items"],queryFn:async()=>{const M=await fetch(`/revira/api/delivery-challans/${z?.id}/items`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch items");return M.json()},enabled:!!z?.id}),{data:Ce}=Ln({queryKey:["/revira/api/projects",e,"delivery-challan-versions"],queryFn:async()=>{const M=await fetch(`/revira/api/projects/${e}/delivery-challan-versions`,{credentials:"include"});return M.ok?M.json():[]},enabled:!!e}),_e=M=>{if(!M)return{};try{const ve=JSON.parse(M);return ve&&typeof ve=="object"?ve:{}}catch{return{}}};k.useCallback(()=>v.orderReferenceType==="po"?v.purchaseOrderNo||"-":v.workOrderNo||"-",[v.orderReferenceType,v.workOrderNo,v.purchaseOrderNo]),k.useCallback(()=>{const M=[];return v.vehicleNo.trim()&&M.push(`Vehicle No.: ${v.vehicleNo.trim()}`),v.showDispatchLrNo&&M.push(`L.R. No.: ${v.dispatchLrNo||"-"}`),v.showDispatchPo&&M.push(`P.O.: ${v.dispatchPoNo||"-"}`),v.showDispatchGatePass&&M.push(`Delivery Challan: ${v.dispatchGatePass||"-"}`),M.length?M.join(" | "):"-"},[v.vehicleNo,v.showDispatchLrNo,v.dispatchLrNo,v.showDispatchPo,v.dispatchPoNo,v.showDispatchGatePass,v.dispatchGatePass]);const Ae=k.useCallback(()=>{const M={gatePassType:v.gatePassType,issueNo:v.issueNo,issueDate:v.issueDate,revNo:v.revNo,revDate:v.revDate,consigneeName:v.consigneeName,consigneeAddressText:v.consigneeAddressText,modeOfTransport:v.modeOfTransport,vehicleNumber:v.vehicleNumber,transportVehicle:v.transportVehicle,contactNo:v.contactNo,contactPerson:v.contactPerson,remarkText:v.remarkText,storeKeeperSignature:v.storeKeeperSignature,qcEnggSignature:v.qcEnggSignature,storeInchargeSignature:v.storeInchargeSignature,plantHeadSignature:v.plantHeadSignature,orderReferenceType:v.orderReferenceType,showWorkOrderNo:v.orderReferenceType==="wo",showPurchaseOrderNo:v.orderReferenceType==="po",purchaseOrderNo:v.purchaseOrderNo,vehicleNo:v.vehicleNo,showDispatchLrNo:v.showDispatchLrNo,showDispatchPo:v.showDispatchPo,showDispatchGatePass:v.showDispatchGatePass,dispatchLrNo:v.dispatchLrNo,dispatchPoNo:v.dispatchPoNo,dispatchGatePass:v.dispatchGatePass};return JSON.stringify(M)},[v]);k.useEffect(()=>{if(de&&F&&!z){const M=new Date,ve=ee(de.projectName),re=ae(M);B(R=>({...R,gatePassNumber:`RNS/${ve}/${re}/RNS-DC-002`,issueDate:M.toISOString().split("T")[0],revDate:M.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:F.name,registeredAddress:F.location,consigneeAddress:`${F.name}
${F.location}`,clientGstin:F.gstNo||""}))}},[de,F,z]),k.useEffect(()=>{if(z){const M=_e(z.contentSections),ve=we=>(we||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),re=M.orderReferenceType||(M.showPurchaseOrderNo?"po":"wo"),R=M.vehicleNo!==void 0||M.showDispatchLrNo!==void 0||M.showDispatchPo!==void 0||M.showDispatchGatePass!==void 0||M.dispatchLrNo!==void 0||M.dispatchPoNo!==void 0||M.dispatchGatePass!==void 0,H=M.transportVehicle||z.dispatchDetails||"",je=H.includes("-")?H.split("-").map(we=>we.trim()):[];B({gatePassNumber:z.deliveryChallanNumber,revision:z.revision,gatePassType:M.gatePassType||"Delivery Challan",issueNo:M.issueNo||"001",issueDate:M.issueDate||"",revNo:M.revNo||"00",revDate:M.revDate||"",consigneeName:M.consigneeName||z.organisationName||"",consigneeAddressText:M.consigneeAddressText||z.registeredAddress||"",modeOfTransport:M.modeOfTransport||je[0]||"By Road",vehicleNumber:M.vehicleNumber||je[1]||"",transportVehicle:M.transportVehicle||M.vehicleNo||z.dispatchDetails||"",contactNo:M.contactNo||"",contactPerson:M.contactPerson||"",remarkText:M.remarkText||"",storeKeeperSignature:M.storeKeeperSignature||"",qcEnggSignature:M.qcEnggSignature||"",storeInchargeSignature:M.storeInchargeSignature||"",plantHeadSignature:M.plantHeadSignature||"",organisationName:z.organisationName,registeredAddress:z.registeredAddress,consigneeAddress:z.consigneeAddress,clientGstin:z.clientGstin||"",workOrderNo:ve(z.workOrderNo)||"NIL",orderReferenceType:re,purchaseOrderNo:M.purchaseOrderNo||(re==="po"?ve(z.workOrderNo):""),dispatchDetails:z.dispatchDetails||"-",vehicleNo:M.vehicleNo||(!R&&z.dispatchDetails&&z.dispatchDetails!=="-"?z.dispatchDetails:""),showDispatchLrNo:M.showDispatchLrNo??!1,showDispatchPo:M.showDispatchPo??!1,showDispatchGatePass:M.showDispatchGatePass??!1,dispatchLrNo:M.dispatchLrNo||"",dispatchPoNo:M.dispatchPoNo||"",dispatchGatePass:M.dispatchGatePass||"",appliedTaxType:z.appliedTaxType||"igst",cgstRate:z.cgstRate||"9",sgstRate:z.sgstRate||"9",igstRate:z.igstRate||"18"})}},[z]),k.useEffect(()=>{Y&&Y.length>0&&te(Y.map((M,ve)=>({id:M.id,serialNo:M.serialNo>0?M.serialNo:ve+1,partMark:M.hsnCode||"",materialDescription:M.description||"",materialSize:M.ratePerUnit&&M.ratePerUnit!=="0"?M.ratePerUnit:"-",quantity:Number(M.quantity)||0,asslyPartSl:M.unit||"",approxValue:M.amount&&M.amount!=="0"?M.amount:"-",remarks:M.remarks||""})))},[Y]);const ge=k.useCallback(()=>{const M=W.reduce((we,ke)=>{const Ve=Number(String(ke.approxValue).replace(/,/g,""));return we+(Number.isFinite(Ve)?Ve:0)},0);let ve=0,re=0,R=0;v.appliedTaxType==="cgst_sgst"?(ve=M*(Number(v.cgstRate)/100),re=M*(Number(v.sgstRate)/100)):R=M*(Number(v.igstRate)/100);const H=ve+re+R,je=M+H;return{totalAmount:M,cgstAmount:ve,sgstAmount:re,igstAmount:R,totalTax:H,grandTotal:je}},[W,v.appliedTaxType,v.cgstRate,v.sgstRate,v.igstRate])(),De=(M,ve="0")=>{const re=Number(String(M??"").replace(/,/g,"").trim());return Number.isFinite(re)?String(re):ve},se=(M,ve)=>{const re=M.materialDescription.trim()||M.partMark.trim()||"ITEM",R=String(M.materialSize??"").replace(/,/g,"").trim(),H=/^-?\d+(\.\d+)?$/.test(R);return{serialNo:M.serialNo>0?M.serialNo:ve+1,description:re,hsnCode:M.partMark.trim()||void 0,quantity:De(M.quantity),unit:M.asslyPartSl.trim()||"NOS",ratePerUnit:H?De(R,"0"):"0",percentage:"0",amount:De(M.approxValue,"0"),remarks:M.remarks}},O=(M,ve)=>{const re=L?.[ve]||"";B(R=>R[M]?{...R,[M]:""}:re?{...R,[M]:re}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),R))},E=k.useCallback(()=>{const M=ve=>{const re=String(ve??"").trim();return re!==""&&re!=="-"};return W.slice(0,5).filter(ve=>M(ve.materialDescription)||M(ve.materialSize)||M(ve.partMark)||M(ve.asslyPartSl)||M(ve.approxValue)||Number(ve.quantity)>0)},[W]),ne=Tr({mutationFn:async()=>{const M=E(),re=await(await wn("POST","/revira/api/delivery-challans",{projectId:Number(e),deliveryChallanNumber:v.gatePassNumber,revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)})).json();for(let R=0;R<M.length;R++){const H=M[R];await wn("POST",`/revira/api/delivery-challans/${re.id}/items`,se(H,R))}return re},onSuccess:M=>{On.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),r(`/revira/projects/${e}/delivery-challan/${M.id}`),a({title:"Delivery Challan saved",description:"The delivery challan has been created successfully."})},onError:M=>{a({title:"Error",description:M.message||"Failed to create delivery challan",variant:"destructive"})}}),me=Tr({mutationFn:async()=>{const M=E();await wn("PUT",`/revira/api/delivery-challans/${z?.id}`,{deliveryChallanNumber:v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002",revision:v.revision,organisationName:v.consigneeName||"Company Name",registeredAddress:v.consigneeAddressText||"-",consigneeAddress:`${v.consigneeName||"Company Name"}
${v.consigneeAddressText||"-"}`.trim(),clientGstin:v.clientGstin,workOrderNo:v.issueNo||"-",dispatchDetails:`${v.modeOfTransport||"By Road"} - ${v.vehicleNumber||"-"}`,appliedTaxType:v.appliedTaxType,cgstRate:v.cgstRate,sgstRate:v.sgstRate,igstRate:v.igstRate,contentSections:Ae(),totalAmount:String(ge.totalAmount),totalTax:String(ge.totalTax),grandTotal:String(ge.grandTotal)});let ve=Y||[];if(!ve.length){const re=await fetch(`/revira/api/delivery-challans/${z?.id}/items`,{credentials:"include"});re.ok&&(ve=await re.json())}for(const re of ve)await wn("DELETE",`/revira/api/delivery-challan-items/${re.id}`);for(let re=0;re<M.length;re++){const R=M[re];await wn("POST",`/revira/api/delivery-challans/${z?.id}/items`,se(R,re))}},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),On.invalidateQueries({queryKey:["/revira/api/delivery-challans",z?.id,"items"]}),On.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan updated",description:"The delivery challan has been updated successfully."})},onError:M=>{a({title:"Error",description:M.message||"Failed to update delivery challan",variant:"destructive"})}}),ye=Tr({mutationFn:async()=>(await wn("POST",`/revira/api/delivery-challans/${z?.id}/duplicate`,{})).json(),onSuccess:M=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),r(`/revira/projects/${e}/delivery-challan/${M.id}`),a({title:"Delivery Challan duplicated",description:`Created new version: ${M.revision}`})},onError:M=>{a({title:"Error",description:M.message||"Failed to duplicate delivery challan",variant:"destructive"})}}),be=Tr({mutationFn:async M=>{await wn("DELETE",`/revira/api/delivery-challans/${M}`,void 0)},onSuccess:()=>{if(On.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan deleted",description:"The delivery challan version has been deleted."}),u(!1),Ce&&Ce.length>1){const M=Ce.filter(ve=>ve.id!==z?.id);M.length>0?r(`/revira/projects/${e}/delivery-challan/${M[0].id}`):r(`/revira/projects/${e}/delivery-challan`)}else r(`/revira/projects/${e}/delivery-challan`)},onError:M=>{a({title:"Error",description:M.message||"Failed to delete delivery challan",variant:"destructive"})}}),Re=()=>{z?me.mutate():ne.mutate()},Ie=()=>{const M=Math.max(...W.map(ve=>ve.id),0)+1;te([...W,{id:M,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},Me=M=>{if(W.length>1){const ve=W.filter(re=>re.id!==M);te(ve.map((re,R)=>({...re,serialNo:R+1})))}},Qe=(M,ve,re)=>{te(R=>R.map(H=>H.id===M?{...H,[ve]:re}:H))},ht=()=>W.reduce((M,ve)=>{const re=Number(String(ve.approxValue||"").replace(/,/g,"").trim());return M+(Number.isFinite(re)?re:0)},0),vt=async M=>{const ve=M?.save??!0,re=M?.silent??!1,R=M?.returnDataUri??!1;try{const H=new un({orientation:"portrait",unit:"mm",format:"a4"}),je=210,we=297,ke=15,Ve=je-ke*2,at=35,ct=30,_t=it=>it*.2646,kt=_t(80),cr=_t(50),yn=_t(80),Vt=_t(10),Mt=_t(3),tn=_t(3),Ke="#eeb7b7",ot="#fff5f5";let Xe=at+10,an=1;const er=it=>it.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),vn=it=>er(it),Yt=it=>new Promise((ft,Ze)=>{const dt=new Image;dt.crossOrigin="anonymous",dt.onload=()=>{const Lt=document.createElement("canvas");Lt.width=dt.width,Lt.height=dt.height,Lt.getContext("2d")?.drawImage(dt,0,0),ft(Lt.toDataURL("image/png"))},dt.onerror=Ze,dt.src=it});let Dn=null,ms=null,tr=null;try{L?.headerUrl&&(Dn=await Yt(L.headerUrl)),L?.footerUrl&&(ms=await Yt(L.footerUrl)),L?.stampUrl&&(tr=await Yt(L.stampUrl))}catch(it){console.warn("Failed to load branding images:",it)}const vr=it=>{Dn&&H.addImage(Dn,"PNG",0,0,je,at),ms&&H.addImage(ms,"PNG",0,we-ct,je,ct),tr&&H.addImage(tr,"PNG",je-cr-kt,we-yn-kt,kt,kt),H.setFontSize(8),H.setTextColor(128,128,128),H.text(`Page ${it}`,je/2,we-8,{align:"center"})},ur=it=>Xe+it>we-ct-10?(H.addPage(),an++,vr(an),Xe=at+10,!0):!1,on=(it,ft=12)=>{Xe+=4,ur(12),H.setFillColor("#d92134"),H.rect(ke,Xe-3.5,4,5,"F"),H.setFont("helvetica","bold"),H.setFontSize(ft),H.setTextColor("#1e3a5f"),H.text(it,ke+7,Xe),Xe+=5.5},Rs=(it,ft,Ze=[])=>{const dt=[38,57,38,57],Lt=5.8,mt=tn,Tt=_t(3),St=Ft=>Ft-3,It=(Ft,Wt=0)=>St(Ft)+Tt+2.5+Wt*3.2;ur(Lt+4),H.setFont("helvetica","normal"),H.setFontSize(8.5);let Jt=0;const Ut=Ft=>Ft.forEach(([Wt,bn])=>{const Cr=H.splitTextToSize(Wt,dt[0]-mt*2),dn=H.splitTextToSize(bn||"-",dt[1]+dt[2]+dt[3]-mt*2),q=Math.max(Cr.length||1,dn.length||1),ue=Math.max(Lt,q*3.2+1.2);if(ur(ue+2),Jt%2===0&&(H.setFillColor(245,245,245),H.rect(ke,St(Xe),Ve,ue,"F")),H.setDrawColor(Ke),H.rect(ke,St(Xe),Ve,ue,"S"),H.line(ke+dt[0],St(Xe),ke+dt[0],St(Xe)+ue),H.setFont("helvetica","bold"),Cr.forEach((oe,Te)=>{H.text(oe,ke+mt,It(Xe,Te))}),Wt==="Dispatch Details"&&bn){const oe=bn.split(",").map(Gt=>Gt.trim()).filter(Boolean),Te=ke+dt[0]+mt,Ne=ke+dt[0]+dt[1]+dt[2]+dt[3]-mt;let At=Te,An=It(Xe,0);oe.forEach((Gt,hr)=>{const Xr=hr<oe.length-1?", ":"",_r=Gt.indexOf(" - "),cs=_r>-1?Gt.slice(0,_r):Gt,Dr=_r>-1?Gt.slice(_r):"",us=H.getTextWidth(cs),Xi=H.getTextWidth(Dr+Xr);At+us+Xi>Ne&&(At=Te,An+=3.2),H.setFont("helvetica","bold"),H.text(cs,At,An),At+=us,H.setFont("helvetica","normal"),H.text(Dr+Xr,At,An),At+=Xi})}else H.setFont("helvetica","normal"),dn.forEach((oe,Te)=>{H.text(oe,ke+dt[0]+mt,It(Xe,Te))});Xe+=ue,Jt+=1});Ut(it),ft.forEach(Ft=>{const[Wt,bn]=Ft,Cr=H.splitTextToSize(Wt?.[0]||"",dt[0]-mt*2),dn=H.splitTextToSize(Wt?.[1]||"-",dt[1]-mt*2),q=H.splitTextToSize(bn?.[0]||"",dt[2]-mt*2),ue=H.splitTextToSize(bn?.[1]||"",dt[3]-mt*2),oe=Math.max(Cr.length||1,dn.length||1,q.length||1,ue.length||1),Te=Math.max(Lt,oe*3.2+1.2);ur(Te+2),Jt%2===0&&(H.setFillColor(245,245,245),H.rect(ke,St(Xe),Ve,Te,"F")),H.setDrawColor(Ke),H.rect(ke,St(Xe),Ve,Te,"S");let Ne=ke;for(let At=0;At<3;At++)Ne+=dt[At],H.line(Ne,St(Xe),Ne,St(Xe)+Te);H.setFont("helvetica","bold"),Cr.forEach((At,An)=>H.text(At,ke+mt,It(Xe,An))),q.forEach((At,An)=>H.text(At,ke+dt[0]+dt[1]+mt,It(Xe,An))),H.setFont("helvetica","normal"),dn.forEach((At,An)=>H.text(At,ke+dt[0]+mt,It(Xe,An))),ue.forEach((At,An)=>H.text(At,ke+dt[0]+dt[1]+dt[2]+mt,It(Xe,An))),Xe+=Te,Jt+=1}),Ut(Ze)},Ss=it=>{const ft=[32,75,32,51],Ze=5.8,dt=tn,Lt=_t(3),mt=St=>St-3,Tt=(St,It=0)=>mt(St)+Lt+2.5+It*3.2;ur(Ze+4),H.setFont("helvetica","normal"),H.setFontSize(8.5),it.forEach((St,It)=>{const[Jt,Ut]=St,Ft=H.splitTextToSize(Jt?.[0]||"",ft[0]-dt*2),Wt=H.splitTextToSize(Jt?.[1]||"-",ft[1]-dt*2),bn=H.splitTextToSize(Ut?.[0]||"",ft[2]-dt*2),Cr=H.splitTextToSize(Ut?.[1]||"",ft[3]-dt*2),dn=Math.max(Ft.length||1,Wt.length||1,bn.length||1,Cr.length||1),q=Math.max(Ze,dn*3.2+1.2);ur(q+2),It%2===0&&(H.setFillColor(245,245,245),H.rect(ke,mt(Xe),Ve,q,"F")),H.setDrawColor(Ke),H.rect(ke,mt(Xe),Ve,q,"S");let ue=ke;for(let oe=0;oe<3;oe++)ue+=ft[oe],H.line(ue,mt(Xe),ue,mt(Xe)+q);H.setFont("helvetica","bold"),Ft.forEach((oe,Te)=>H.text(oe,ke+dt,Tt(Xe,Te))),bn.forEach((oe,Te)=>H.text(oe,ke+ft[0]+ft[1]+dt,Tt(Xe,Te))),H.setFont("helvetica","normal"),Wt.forEach((oe,Te)=>H.text(oe,ke+ft[0]+dt,Tt(Xe,Te))),Cr.forEach((oe,Te)=>H.text(oe,ke+ft[0]+ft[1]+ft[2]+dt,Tt(Xe,Te))),Xe+=q})},os=(it,ft)=>{const Ze=[95,55,Ve-150],dt=5.8,Lt=tn;ur(dt+6),H.setFillColor(ot),H.setDrawColor(Ke),H.setLineWidth(.2),H.rect(ke,Xe-3.2,Ve,dt,"FD"),H.setFont("helvetica","bold"),H.setFontSize(8.5),H.text("Total Amount In Words",ke+tn,Xe+.8),H.text("Details",ke+Ze[0]+tn,Xe+.8),H.text("Amount",ke+Ze[0]+Ze[1]+tn,Xe+.8),H.line(ke+Ze[0],Xe-3.2,ke+Ze[0],Xe-3.2+dt),H.line(ke+Ze[0]+Ze[1],Xe-3.2,ke+Ze[0]+Ze[1],Xe-3.2+dt),Xe+=dt,H.setFont("helvetica","normal"),H.setFontSize(8.5);const mt=ft.map(Jt=>{const Ut=H.splitTextToSize(Jt.detail,Ze[1]-Lt*2),Ft=H.splitTextToSize(Jt.value,Ze[2]-Lt*2),Wt=Math.max(Ut.length||1,Ft.length||1),bn=Math.max(dt,Wt*3.2+1.2);return{detailLines:Ut,valueLines:Ft,rowHeight:bn}}),Tt=mt.reduce((Jt,Ut)=>Jt+Ut.rowHeight,0);ur(Tt+2),H.setDrawColor(Ke),H.rect(ke,Xe-3.2,Ze[0],Tt,"S");const St=H.splitTextToSize(it,Ze[0]-Lt*3);H.setFont("helvetica","bold"),St.forEach((Jt,Ut)=>{H.text(Jt,ke+Lt,Xe+.1+Mt+Ut*3.2)});let It=Xe;mt.forEach((Jt,Ut)=>{Ut%2===0&&(H.setFillColor(245,245,245),H.rect(ke+Ze[0],It-3.2,Ze[1]+Ze[2],Jt.rowHeight,"F")),H.setDrawColor(Ke),H.rect(ke+Ze[0],It-3.2,Ze[1]+Ze[2],Jt.rowHeight,"S"),H.line(ke+Ze[0]+Ze[1],It-3.2,ke+Ze[0]+Ze[1],It-3.2+Jt.rowHeight),(ft[Ut]?.detail||"").trim().toLowerCase()==="grand total"?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Jt.detailLines.forEach((Ft,Wt)=>{H.text(Ft,ke+Ze[0]+Lt,It+.1+Mt+Wt*3.2)}),(ft[Ut]?.detail||"").trim().toLowerCase()==="grand total"?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Jt.valueLines.forEach((Ft,Wt)=>{H.text(Ft,ke+Ze[0]+Ze[1]+Lt,It+.1+Mt+Wt*3.2)}),It+=Jt.rowHeight}),Xe=It},Ds="DELIVERY CHALLAN",nr=v.issueDate?new Date(v.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),Rr=v.revDate?new Date(v.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");vr(an),H.setFontSize(16),H.setFont("helvetica","bold"),H.setTextColor("#da2032"),H.text(Ds,je/2,Xe,{align:"center"}),Xe+=8,on("Delivery Challan Details",11),Rs([["Doc. No",v.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002"],["Date",nr||"-"],["CONSIGNEE NAME",v.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",v.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",v.modeOfTransport||"By Road"],["Vehicle No.",v.vehicleNumber||"MH 40 CX 2839"],["Contact No.",v.contactNo||"7972800638"],["Contact person",v.contactPerson||"SAILESH"]],[]),Xe+=Vt;const xr=["SR. NO.","MATERIAL DISCRIPTION","MATERIAL SIZE","ITEM CODE","UNIT","QUANTITY","APPROX. VALUE"],gs=[14,40,29,25,24,20,28],Qr=W.filter(it=>it.partMark.trim()||it.materialDescription.trim()).map(it=>[it.serialNo?String(it.serialNo):"",it.materialDescription,it.materialSize,it.partMark,it.asslyPartSl,String(it.quantity),it.approxValue]);ur(15),H.setFillColor(ot),H.setDrawColor(Ke),H.setLineWidth(.2),H.rect(ke,Xe-3,Ve,5.8,"FD"),H.setFont("helvetica","bold"),H.setFontSize(8);let Er=ke;xr.forEach((it,ft)=>{H.line(Er,Xe-3,Er,Xe+2.8),H.text(it,Er+tn,Xe+.8),Er+=gs[ft]}),H.line(Er,Xe-3,Er,Xe+2.8),Xe+=5.8,H.setFont("helvetica","normal"),Qr.forEach((it,ft)=>{const Ze=it.map((Tt,St)=>H.splitTextToSize(Tt,gs[St]-tn*2)),dt=Math.max(...Ze.map(Tt=>Tt.length)),Lt=Math.max(5.8,dt*3.2+1.2);ur(Lt+2),ft%2===0&&(H.setFillColor(245,245,245),H.rect(ke,Xe-3,Ve,Lt,"F")),H.setDrawColor(Ke),H.rect(ke,Xe-3,Ve,Lt,"S");let mt=ke;Ze.forEach((Tt,St)=>{H.line(mt,Xe-3,mt,Xe-3+Lt),St===0?H.setFont("helvetica","bold"):H.setFont("helvetica","normal"),Tt.forEach((It,Jt)=>{H.text(It,mt+tn,Xe+.1+Mt+Jt*3.2)}),mt+=gs[St]}),H.line(mt,Xe-3,mt,Xe-3+Lt),Xe+=Lt});const Ws=W.reduce((it,ft)=>it+(Number(ft.quantity)||0),0),Zr=ht(),Yr=["","","TOTAL","",String(Ws),"",Zr.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((it,ft)=>H.splitTextToSize(it,gs[ft]-tn*2)),Fs=Math.max(...Yr.map(it=>it.length)),dr=Math.max(5.8,Fs*3.2+1.2);ur(dr+2),H.setFillColor(245,245,245),H.rect(ke,Xe-3,Ve,dr,"F"),H.setDrawColor(Ke),H.rect(ke,Xe-3,Ve,dr,"S");let ls=ke;Yr.forEach((it,ft)=>{H.line(ls,Xe-3,ls,Xe-3+dr),H.setFont("helvetica",ft===2||ft===4||ft===5||ft===6?"bold":"normal"),it.forEach((Ze,dt)=>{H.text(Ze,ls+tn,Xe+.1+Mt+dt*3.2)}),ls+=gs[ft]}),H.line(ls,Xe-3,ls,Xe-3+dr),Xe+=dr,Xe+=Vt,on("Remark",11);const ai=18;ur(ai+5),H.setDrawColor(Ke),H.rect(ke,Xe-3,Ve,ai,"S"),H.setFont("helvetica","normal"),H.setFontSize(9),H.splitTextToSize(v.remarkText||"-",Ve-2*tn).forEach((it,ft)=>{H.text(it,ke+tn,Xe+.1+Mt+ft*3.2)}),Xe+=ai+Vt,on("Signature",11);const Bi=[{label:"Store Keeper",data:v.storeKeeperSignature},{label:"Qc Engg.",data:v.qcEnggSignature},{label:"Store Incharge",data:v.storeInchargeSignature},{label:"Plant Head",data:v.plantHeadSignature}],qi=3,Bn=22,vi=(Ve-qi*3)/4;ur(Bn+12),Bi.forEach((it,ft)=>{const Ze=ke+ft*(vi+qi);if(H.rect(Ze,Xe-3,vi,Bn,"S"),it.data)try{const dt=H.getImageProperties(it.data),Lt=dt.width||1,mt=dt.height||1,Tt=vi-2,St=Bn-7,It=Lt/mt,Jt=Tt/St;let Ut=Tt,Ft=St;It>Jt?Ft=Tt/It:Ut=St*It;const Wt=Ze+1+(Tt-Ut)/2,bn=Xe-2.2+(St-Ft)/2;H.addImage(it.data,"PNG",Wt,bn,Ut,Ft)}catch{}H.setFont("helvetica","bold"),H.setFontSize(8),H.text(it.label,Ze+vi/2,Xe+Bn-1.2,{align:"center"})}),Xe+=Bn;const hn=new Date,Nn=`${String(hn.getDate()).padStart(2,"0")}${String(hn.getMonth()+1).padStart(2,"0")}${hn.getFullYear()}`,gn=(L?.entityName||"RNS").split(" ").map(it=>it[0]).join(""),Xt=`GATE_PASS_${Nn}_${gn}_${v.revision}.pdf`,pt=R?H.output("datauristring",{filename:Xt}):void 0;return ve&&H.save(Xt),re||a({title:ve?"PDF exported":"PDF generated",description:ve?`Delivery Challan saved as ${Xt}`:"Delivery challan PDF is ready."}),{fileName:Xt,dataUri:pt}}catch(H){return console.error("PDF export error:",H),re||a({title:"Export failed",description:"Failed to export delivery challan PDF. Please try again.",variant:"destructive"}),null}},Dt=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,le=()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}P({to:F?.emailAddress||"",subject:`Delivery Challan ${v.gatePassNumber||""} ${v.revision||""}`.trim(),message:`Please find the attached file for details

${Dt}`}),f(!0)},xt=async()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}const M=S.to.split(/[,\s;]+/).map(re=>re.trim()).filter(Boolean);if(M.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const ve=await vt({save:!1,silent:!0,returnDataUri:!0});if(!ve?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for email.",variant:"destructive"});return}try{const re=ve.dataUri.split(",")[1]||"",H=await(await wn("POST",`/revira/api/delivery-challans/${z.id}/send-email`,{to:M,subject:S.subject.trim(),message:S.message.trim(),fileName:ve.fileName,pdfBase64:re})).json(),je=Array.isArray(H?.accepted)?H.accepted:[],we=je.length>0?je.join(", "):M.join(", ");a({title:"Email queued",description:`SMTP accepted: ${we}.`}),f(!1)}catch(re){a({title:"Send failed",description:re?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},xe=()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const M=(F?.mobileNumber||"").replace(/\D/g,""),ve=M.length===10?`91${M}`:M;I({mobile:ve,message:`Please find the attached file for details

${Dt}`}),j(!0)},X=async()=>{if(!z?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const M=_.mobile.split(/[,\s;]+/).map(re=>re.replace(/\D/g,"")).filter(Boolean);if(M.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!_.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const ve=await vt({save:!1,silent:!0,returnDataUri:!0});if(!ve?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for WhatsApp send.",variant:"destructive"});return}try{const re=ve.dataUri.split(",")[1]||"";await wn("POST",`/revira/api/delivery-challans/${z.id}/send-whatsapp`,{to:M,message:_.message.trim(),fileName:ve.fileName,pdfBase64:re}),a({title:"WhatsApp sent",description:`Delivery challan sent to ${M.join(", ")}.`}),j(!1)}catch(re){a({title:"Send failed",description:re?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!de||!F||!Q?i.jsx(Ls,{user:Q,children:i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):i.jsxs(Ls,{user:Q,children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:de.projectName}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[i.jsx(eu,{className:"h-4 w-4"}),de.location]})]})]}),i.jsxs(Ue,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/revira/projects/${e}/delivery-challan`),"data-testid":"button-new-delivery-challan",children:[i.jsx(_a,{className:"w-4 h-4 mr-2"}),"New Delivery Challan"]})]}),i.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[i.jsx("span",{className:"text-white font-medium",children:"Versions"}),i.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:z?.revision||v.revision||"R-001"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:i.jsx(Om,{className:"h-4 w-4"})}),z&&i.jsx(Ue,{variant:"outline",size:"icon",onClick:()=>ye.mutate(),disabled:ye.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-delivery-challan",children:i.jsx(ah,{className:"w-4 h-4"})}),i.jsxs(Ue,{onClick:vt,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[i.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-delivery-challan",title:"Send delivery challan by email",children:i.jsx(uu,{className:"w-4 h-4"})}),i.jsx(Ue,{variant:"outline",size:"icon",onClick:xe,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-delivery-challan",title:"Send delivery challan on WhatsApp",children:i.jsx(Mm,{className:"w-4 h-4"})}),i.jsxs(Ue,{variant:"outline",onClick:Re,disabled:ne.isPending||me.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-delivery-challan",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),ne.isPending||me.isPending?"Saving...":"Save Changes"]}),z&&Ce&&Ce.length>1&&i.jsx(Ue,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:async()=>{confirm(`Are you sure you want to delete this Delivery Challan (${z.revision})?`)&&be.mutate(z.id)},"data-testid":"button-delete-delivery-challan",children:i.jsx(pr,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsxs(ns,{className:"text-lg text-slate-700 flex items-center gap-2",children:[i.jsx(_a,{className:"w-5 h-5"}),"Delivery Challan DETAILS"]})}),i.jsxs(_n,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),i.jsx(nt,{value:v.gatePassNumber,onChange:M=>B({...v,gatePassNumber:M.target.value}),"data-testid":"input-doc-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),i.jsx(nt,{type:"date",value:v.issueDate,onChange:M=>B({...v,issueDate:M.target.value}),"data-testid":"input-date"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),i.jsx(nt,{value:v.consigneeName,onChange:M=>B({...v,consigneeName:M.target.value}),"data-testid":"input-consignee-name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),i.jsx(kr,{value:v.consigneeAddressText,onChange:M=>B({...v,consigneeAddressText:M.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),i.jsx(nt,{value:v.modeOfTransport,onChange:M=>B({...v,modeOfTransport:M.target.value}),"data-testid":"input-mode-of-transport"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),i.jsx(nt,{value:v.vehicleNumber,onChange:M=>B({...v,vehicleNumber:M.target.value}),"data-testid":"input-vehicle-number"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),i.jsx(nt,{value:v.contactNo,onChange:M=>B({...v,contactNo:M.target.value}),"data-testid":"input-contact-no"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),i.jsx(nt,{value:v.contactPerson,onChange:M=>B({...v,contactPerson:M.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),i.jsxs(Cn,{children:[i.jsxs(ts,{className:"bg-slate-100 flex flex-row items-center justify-between",children:[i.jsx(ns,{className:"text-lg text-slate-700",children:"Delivery Challan ITEMS"}),i.jsxs(Ue,{size:"sm",onClick:Ie,"data-testid":"button-add-item",children:[i.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Add Item"]})]}),i.jsx(_n,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"ITEM CODE"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"UNIT"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),i.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),i.jsx("th",{className:"p-3 w-12"})]})}),i.jsxs("tbody",{children:[W.map(M=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.serialNo===0?"":M.serialNo,onChange:ve=>Qe(M.id,"serialNo",parseInt(ve.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.materialDescription,onChange:ve=>Qe(M.id,"materialDescription",ve.target.value),"data-testid":`input-material-description-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.materialSize,onChange:ve=>Qe(M.id,"materialSize",ve.target.value),"data-testid":`input-material-size-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.partMark,onChange:ve=>Qe(M.id,"partMark",ve.target.value),"data-testid":`input-partmark-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.asslyPartSl,onChange:ve=>Qe(M.id,"asslyPartSl",ve.target.value),"data-testid":`input-assly-part-sl-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{type:"number",value:M.quantity,onChange:ve=>Qe(M.id,"quantity",parseFloat(ve.target.value)||0),"data-testid":`input-qty-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(nt,{value:M.approxValue,onChange:ve=>Qe(M.id,"approxValue",ve.target.value),"data-testid":`input-approx-value-${M.id}`})}),i.jsx("td",{className:"p-3",children:i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>Me(M.id),disabled:W.length===1,className:"text-red-500 hover:text-red-700","data-testid":`button-remove-item-${M.id}`,children:i.jsx(lf,{className:"w-4 h-4"})})})]},M.id)),i.jsxs("tr",{className:"border-t bg-slate-50",children:[i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3"}),i.jsx("td",{className:"p-3 font-semibold",children:W.reduce((M,ve)=>M+(Number(ve.quantity)||0),0)}),i.jsx("td",{className:"p-3 font-semibold",children:ht().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3"})]})]})]})})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"REMARK"})}),i.jsx(_n,{className:"p-6",children:i.jsx(kr,{value:v.remarkText,onChange:M=>B({...v,remarkText:M.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{className:"bg-slate-100",children:i.jsx(ns,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),i.jsx(_n,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>O("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:v.storeKeeperSignature?i.jsx("img",{src:v.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.storeKeeperSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>O("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:v.qcEnggSignature?i.jsx("img",{src:v.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),i.jsx("span",{className:"text-xs text-slate-500",children:v.qcEnggSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>O("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:v.storeInchargeSignature?i.jsx("img",{src:v.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.storeInchargeSignature?"Selected":"Not selected"})]})]}),i.jsxs("div",{className:"border rounded-md p-2",children:[i.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${v.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>O("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:v.plantHeadSignature?i.jsx("img",{src:v.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),i.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),i.jsx("span",{className:"text-xs text-slate-500",children:v.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),i.jsx(mi,{open:o,onOpenChange:u,children:i.jsxs(ri,{className:"max-w-md",children:[i.jsx(si,{children:i.jsx(ii,{children:"Delivery Challan Versions"})}),i.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Ce?.map(M=>i.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${M.id===z?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/delivery-challan/${M.id}`),u(!1)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:M.revision}),i.jsx("p",{className:"text-sm text-slate-600",children:new Date(M.createdAt).toLocaleDateString()})]}),Ce&&Ce.length>1&&i.jsx(Ue,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:ve=>{ve.stopPropagation(),confirm(`Are you sure you want to delete version ${M.revision}?`)&&be.mutate(M.id)},"data-testid":`button-delete-version-${M.id}`,children:i.jsx(pr,{className:"w-4 h-4"})})]})},M.id))})]})}),i.jsx(mi,{open:c,onOpenChange:f,children:i.jsxs(ri,{className:"sm:max-w-xl",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Delivery Challan by Email"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),i.jsx(nt,{value:S.to,onChange:M=>P(ve=>({...ve,to:M.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-delivery-challan"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),i.jsx(nt,{value:S.subject,onChange:M=>P(ve=>({...ve,subject:M.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-delivery-challan"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),i.jsx(kr,{value:S.message,onChange:M=>P(ve=>({...ve,message:M.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-delivery-challan"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-delivery-challan",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:xt,disabled:p,"data-testid":"button-send-email-submit-delivery-challan",children:p?"Sending...":"Submit"})]})]})]})}),i.jsx(mi,{open:b,onOpenChange:j,children:i.jsxs(ri,{className:"sm:max-w-lg",children:[i.jsx(si,{children:i.jsx(ii,{children:"Send Delivery Challan on WhatsApp"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),i.jsx(nt,{value:_.mobile,onChange:M=>I(ve=>({...ve,mobile:M.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-delivery-challan"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),i.jsx(kr,{value:_.message,onChange:M=>I(ve=>({...ve,message:M.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-delivery-challan"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:y,"data-testid":"button-send-whatsapp-cancel-delivery-challan",children:"Cancel"}),i.jsx(Ue,{type:"button",onClick:X,disabled:y,"data-testid":"button-send-whatsapp-submit-delivery-challan",children:y?"Sending...":"Submit"})]})]})]})})]})}const Iv=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],P5=t=>Iv.find(e=>e.value===t)?.label||t;function e7(){const{id:t}=Zu(),e=Number(t),[,n]=za(),{data:r}=Ta(),{toast:a}=$a(),[o,u]=k.useState(""),[c,f]=k.useState(!1),[p,m]=k.useState(!1),[b,j]=k.useState(null),[y,D]=k.useState(null),[S,P]=k.useState(null),[_,I]=k.useState({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""}),[v,B]=k.useState({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""}),ee=(E,ne)=>{if(E.size>5*1024*1024){a({title:"File too large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}const me=new FileReader;me.onloadend=()=>{ne(typeof me.result=="string"?me.result:"")},me.readAsDataURL(E)},ae=E=>{const ne=E.target.files?.[0];ne&&ee(ne,me=>I(ye=>({...ye,attachmentUrl:me})))},W=E=>{const ne=E.target.files?.[0];ne&&ee(ne,me=>B(ye=>({...ye,attachmentUrl:me})))},te=E=>E?E.startsWith("data:")?"Open Attachment":E:"-",Q=async(E,ne)=>{if(!(E.headers.get("content-type")||"").includes("application/json"))throw new Error(ne);return E.json()},{data:de,isLoading:F}=Ln({queryKey:["/revira/api/projects",e],queryFn:async()=>{const E=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch project");return E.json()},enabled:Number.isFinite(e)&&e>0}),{data:L}=Ln({queryKey:["/revira/api/clients",de?.clientId],queryFn:async()=>{const E=await fetch(`/revira/api/clients/${de?.clientId}`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch client");return E.json()},enabled:!!de?.clientId}),{data:z}=Ln({queryKey:["/revira/api/projects",e,"ledger","budget"],queryFn:async()=>{const E=await fetch(`/revira/api/projects/${e}/ledger/budget`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch budget");return Q(E,"Ledger budget API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),{data:Y=[],isLoading:Ce}=Ln({queryKey:["/revira/api/projects",e,"ledger","entries"],queryFn:async()=>{const E=await fetch(`/revira/api/projects/${e}/ledger/entries`,{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch ledger entries");return Q(E,"Ledger entries API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),_e=Tr({mutationFn:async()=>{const E=Number(String(o).replace(/,/g,"").trim()),ne=Number.isFinite(E)?E:0,me=await wn("PUT",`/revira/api/projects/${e}/ledger/budget`,{projectValue:String(ne)});return Q(me,"Ledger budget API is unavailable. Please restart backend.")},onSuccess:E=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","budget"]}),u(String(Number(E?.projectValue||0))),a({title:"Budget saved",description:"Project budget updated successfully."})},onError:E=>{a({title:"Error",description:E.message||"Failed to save budget",variant:"destructive"})}}),Ae=Tr({mutationFn:async({id:E,payload:ne})=>{if(E){const ye=await wn("PUT",`/revira/api/ledger-entries/${E}`,ne);await Q(ye,"Ledger update API is unavailable. Please restart backend.");return}const me=await wn("POST",`/revira/api/projects/${e}/ledger/entries`,ne);await Q(me,"Ledger create API is unavailable. Please restart backend.")},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),f(!1),m(!1),j(null),D(null),a({title:"Entry saved",description:"Ledger entry saved in database."})},onError:E=>{a({title:"Error",description:E.message||"Failed to add entry",variant:"destructive"})}}),ce=Tr({mutationFn:async E=>{await wn("DELETE",`/revira/api/ledger-entries/${E}`)},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),P(null),a({title:"Entry deleted",description:"Ledger entry deleted successfully."})},onError:E=>{a({title:"Error",description:E.message||"Failed to delete entry",variant:"destructive"})}});k.useEffect(()=>{z&&z.projectValue!==void 0&&z.projectValue!==null&&u(String(Number(z.projectValue)))},[z?.projectValue]);const ge=k.useMemo(()=>{const E=Y.filter(ye=>ye.entryType==="expense").reduce((ye,be)=>ye+(Number(be.amount)||0),0),ne=Y.filter(ye=>ye.entryType==="receipt").reduce((ye,be)=>ye+(Number(be.amount)||0),0),me=Number(z?.projectValue||0);return{totalBudget:me,totalExpenses:E,totalReceived:ne,balanceAmount:ne-E,remainingBudget:me-E}},[Y,z]),De=k.useMemo(()=>{const E=[...Y].sort((ye,be)=>{const Re=new Date(ye.entryDate).getTime(),Ie=new Date(be.entryDate).getTime();return Re!==Ie?Re-Ie:ye.id-be.id});let ne=0;const me={};return E.forEach(ye=>{const be=Number(ye.amount)||0;ne+=ye.entryType==="expense"?-be:be,me[ye.id]=ne}),[...Y].sort((ye,be)=>{const Re=new Date(ye.entryDate).getTime(),Ie=new Date(be.entryDate).getTime();return Re!==Ie?Ie-Re:be.id-ye.id}).map(ye=>({...ye,runningBalance:me[ye.id]||0}))},[Y]),se=()=>{if(!_.entryDate||!_.category||!_.description||!_.amount){a({title:"Missing fields",description:"Fill date, category, description and amount.",variant:"destructive"});return}Ae.mutate({id:b||void 0,payload:{entryDate:_.entryDate,entryType:"expense",category:_.category,description:_.description,amount:_.amount,paymentMode:_.paymentMode,remarks:"",reference:_.reference,attachmentUrl:_.attachmentUrl}}),I({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},O=()=>{if(!v.entryDate||!v.amount){a({title:"Missing fields",description:"Fill received date and amount.",variant:"destructive"});return}Ae.mutate({id:y||void 0,payload:{entryDate:v.entryDate,entryType:"receipt",category:"Client Receipt",description:"Payment received from client",amount:v.amount,paymentMode:v.paymentMode,remarks:v.remarks,reference:v.reference,receivedAgainst:v.receivedAgainst,chequeNumber:v.paymentMode==="cheque"?v.chequeNumber:"",bankName:v.paymentMode==="cheque"?v.bankName:"",chequeDate:v.paymentMode==="cheque"?v.chequeDate:"",utrNumber:"",attachmentUrl:v.attachmentUrl}}),B({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})};return F?i.jsx(Ls,{user:r,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):de?i.jsx(Ls,{user:r,children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6 px-1 sm:px-0",children:[i.jsx("div",{className:"flex items-start sm:items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Project Ledger"}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 break-words",children:[de.projectName," ",L?`- ${L.name}`:""]})]})]})}),i.jsxs(Cn,{className:"border-[#eeb7b7]",children:[i.jsx(ts,{className:"bg-slate-50",children:i.jsx(ns,{className:"text-[#d92134]",children:"Budget Initialization"})}),i.jsx(_n,{className:"pt-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Project Cost / Project Value"}),i.jsx(nt,{type:"number",value:o,onChange:E=>u(E.target.value),placeholder:z?.projectValue||"0.00","data-testid":"input-ledger-budget"})]}),i.jsx(Ue,{className:"w-full md:w-auto",onClick:()=>_e.mutate(),disabled:_e.isPending,"data-testid":"button-save-ledger-budget",children:_e.isPending?"Saving...":"Save Budget"}),i.jsxs("div",{className:"text-sm text-slate-600 md:text-right",children:["Current Budget: ",i.jsxs("span",{className:"font-semibold",children:["Rs. ",Number(z?.projectValue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 gap-3",children:[i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Budget"}),i.jsxs("p",{className:"text-lg font-bold",children:["Rs. ",ge.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Expenses"}),i.jsxs("p",{className:"text-lg font-bold text-red-600",children:["Rs. ",ge.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Received"}),i.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs. ",ge.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Balance (Received - Expenses)"}),i.jsxs("p",{className:`text-lg font-bold ${ge.balanceAmount>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",ge.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Remaining Budget"}),i.jsxs("p",{className:`text-lg font-bold ${ge.remainingBudget>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",ge.remainingBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{children:i.jsx(ns,{className:"text-base",children:"Add Ledger Entries"})}),i.jsxs(_n,{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs(mi,{open:c,onOpenChange:f,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Ue,{className:"w-full sm:w-auto","data-testid":"button-open-expense-dialog",onClick:()=>{j(null),I({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},children:[i.jsx(c_,{className:"w-4 h-4 mr-2"})," Add Expense"]})}),i.jsxs(ri,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(si,{children:i.jsx(ii,{children:"Add Expense"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{type:"date",value:_.entryDate,onChange:E=>I({..._,entryDate:E.target.value})}),i.jsx(nt,{placeholder:"Expense category/type",value:_.category,onChange:E=>I({..._,category:E.target.value})})]}),i.jsx(kr,{placeholder:"Description / remarks",value:_.description,onChange:E=>I({..._,description:E.target.value})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{type:"number",placeholder:"Amount",value:_.amount,onChange:E=>I({..._,amount:E.target.value})}),i.jsxs(Tl,{value:_.paymentMode,onValueChange:E=>I({..._,paymentMode:E}),children:[i.jsx(Zo,{children:i.jsx(El,{placeholder:"Mode of payment"})}),i.jsx(Yo,{children:Iv.map(E=>i.jsx(ha,{value:E.value,children:E.label},E.value))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{placeholder:"Reference / bill no.",value:_.reference,onChange:E=>I({..._,reference:E.target.value})}),i.jsx(nt,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:ae})]}),_.attachmentUrl?i.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,i.jsx(Ue,{onClick:se,disabled:Ae.isPending,className:"w-full","data-testid":"button-add-expense",children:Ae.isPending?"Saving...":b?"Update Expense":"Save Expense"})]})]})]}),i.jsxs(mi,{open:p,onOpenChange:m,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Ue,{variant:"outline",className:"w-full sm:w-auto","data-testid":"button-open-receipt-dialog",onClick:()=>{D(null),B({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})},children:[i.jsx(u_,{className:"w-4 h-4 mr-2"})," Add Client Receipt"]})}),i.jsxs(ri,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(si,{children:i.jsx(ii,{children:"Add Client Receipt"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{type:"date",value:v.entryDate,onChange:E=>B({...v,entryDate:E.target.value})}),i.jsx(nt,{type:"number",placeholder:"Amount received",value:v.amount,onChange:E=>B({...v,amount:E.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{placeholder:"Received against (milestone/invoice/term)",value:v.receivedAgainst,onChange:E=>B({...v,receivedAgainst:E.target.value})}),i.jsxs(Tl,{value:v.paymentMode,onValueChange:E=>B({...v,paymentMode:E}),children:[i.jsx(Zo,{children:i.jsx(El,{placeholder:"Mode of receipt"})}),i.jsx(Yo,{children:Iv.map(E=>i.jsx(ha,{value:E.value,children:E.label},E.value))})]})]}),v.paymentMode==="cheque"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx(nt,{placeholder:"Cheque number",value:v.chequeNumber,onChange:E=>B({...v,chequeNumber:E.target.value})}),i.jsx(nt,{placeholder:"Bank name",value:v.bankName,onChange:E=>B({...v,bankName:E.target.value})}),i.jsx(nt,{type:"date",value:v.chequeDate,onChange:E=>B({...v,chequeDate:E.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(nt,{placeholder:"Reference details",value:v.reference,onChange:E=>B({...v,reference:E.target.value})}),i.jsx(nt,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:W})]}),v.attachmentUrl?i.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,i.jsx(kr,{placeholder:"Remarks",value:v.remarks,onChange:E=>B({...v,remarks:E.target.value})}),i.jsx(Ue,{onClick:O,disabled:Ae.isPending,className:"w-full","data-testid":"button-add-receipt",children:Ae.isPending?"Saving...":y?"Update Receipt":"Save Receipt"})]})]})]})]})]}),i.jsxs(Cn,{children:[i.jsx(ts,{children:i.jsxs(ns,{className:"text-base flex items-center gap-2",children:[i.jsx(sm,{className:"w-4 h-4"})," Ledger View"]})}),i.jsxs(_n,{className:"p-0",children:[i.jsx("div",{className:"md:hidden p-3 space-y-3",children:Ce?i.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):De.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."}):De.map(E=>{const ne=Number(E.amount)||0;return i.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-xs text-slate-500",children:E.entryDate}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`text-xs font-semibold ${E.entryType==="expense"?"text-red-600":"text-green-600"}`,children:E.entryType==="expense"?"Expense":"Receipt"}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{E.entryType==="expense"?(j(E.id),I({entryDate:E.entryDate,category:E.category,description:E.description,amount:String(Number(E.amount)||0),paymentMode:E.paymentMode,reference:E.reference||"",attachmentUrl:E.attachmentUrl||""}),f(!0)):(D(E.id),B({entryDate:E.entryDate,amount:String(Number(E.amount)||0),receivedAgainst:E.receivedAgainst||"",paymentMode:E.paymentMode,remarks:E.remarks||"",reference:E.reference||"",chequeNumber:E.chequeNumber||"",bankName:E.bankName||"",chequeDate:E.chequeDate||"",attachmentUrl:E.attachmentUrl||""}),m(!0))},children:i.jsx(Uu,{className:"w-3 h-3"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600",onClick:()=>P(E),disabled:ce.isPending,children:i.jsx(pr,{className:"w-3 h-3"})})]})]}),i.jsx("div",{className:"text-sm font-medium text-slate-800",children:E.category}),i.jsx("div",{className:"text-xs text-slate-500",children:E.description}),i.jsxs("div",{className:"text-xs text-slate-600",children:["Mode: ",P5(E.paymentMode)]}),E.receivedAgainst?i.jsxs("div",{className:"text-xs text-slate-600",children:["Against: ",E.receivedAgainst]}):null,i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:"Amount"}),i.jsxs("span",{className:E.entryType==="expense"?"text-red-600 font-semibold":"text-green-600 font-semibold",children:["Rs. ",ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:"Running Balance"}),i.jsxs("span",{className:E.runningBalance>=0?"text-green-700 font-semibold":"text-red-700 font-semibold",children:["Rs. ",E.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(E.remarks||E.reference||E.utrNumber||E.chequeNumber||E.attachmentUrl)&&i.jsxs("div",{className:"pt-1 border-t text-xs text-slate-600 space-y-1",children:[E.remarks?i.jsxs("div",{children:["Remarks: ",E.remarks]}):null,E.reference?i.jsxs("div",{children:["Ref: ",E.reference]}):null,E.utrNumber?i.jsxs("div",{children:["UTR: ",E.utrNumber]}):null,E.chequeNumber?i.jsxs("div",{children:["Cheque: ",E.chequeNumber]}):null,E.attachmentUrl?i.jsxs("div",{children:["Attach:"," ",i.jsx("a",{className:"text-blue-600 underline",href:E.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(E.attachmentUrl)})]}):null]})]},E.id)})}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left",children:"Date"}),i.jsx("th",{className:"p-3 text-left",children:"Type"}),i.jsx("th",{className:"p-3 text-left",children:"Category / Particulars"}),i.jsx("th",{className:"p-3 text-left",children:"Payment Mode"}),i.jsx("th",{className:"p-3 text-right",children:"Debit"}),i.jsx("th",{className:"p-3 text-right",children:"Credit"}),i.jsx("th",{className:"p-3 text-left",children:"Remarks"}),i.jsx("th",{className:"p-3 text-left",children:"Reference / Attachment"}),i.jsx("th",{className:"p-3 text-right",children:"Running Balance"}),i.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{children:Ce?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"Loading..."})}):De.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"No ledger entries yet."})}):De.map(E=>{const ne=Number(E.amount)||0;return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:E.entryDate}),i.jsx("td",{className:`p-3 font-semibold ${E.entryType==="expense"?"text-red-600":"text-green-600"}`,children:E.entryType==="expense"?"Expense":"Receipt"}),i.jsxs("td",{className:"p-3",children:[i.jsx("div",{className:"font-medium",children:E.category}),i.jsx("div",{className:"text-xs text-slate-500",children:E.description}),E.receivedAgainst?i.jsxs("div",{className:"text-xs text-slate-500",children:["Against: ",E.receivedAgainst]}):null]}),i.jsx("td",{className:"p-3",children:P5(E.paymentMode)}),i.jsx("td",{className:"p-3 text-right text-red-600",children:E.entryType==="expense"?ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),i.jsx("td",{className:"p-3 text-right text-green-600",children:E.entryType==="receipt"?ne.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),i.jsx("td",{className:"p-3",children:E.remarks||"-"}),i.jsxs("td",{className:"p-3",children:[i.jsx("div",{children:E.reference||"-"}),E.utrNumber?i.jsxs("div",{className:"text-xs text-slate-500",children:["UTR: ",E.utrNumber]}):null,E.chequeNumber?i.jsxs("div",{className:"text-xs text-slate-500",children:["Cheque: ",E.chequeNumber]}):null,E.attachmentUrl?i.jsxs("div",{className:"text-xs text-slate-500",children:["Attach:"," ",i.jsx("a",{className:"text-blue-600 underline",href:E.attachmentUrl,target:"_blank",rel:"noreferrer",children:te(E.attachmentUrl)})]}):null]}),i.jsx("td",{className:`p-3 text-right font-semibold ${E.runningBalance>=0?"text-green-700":"text-red-700"}`,children:E.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{E.entryType==="expense"?(j(E.id),I({entryDate:E.entryDate,category:E.category,description:E.description,amount:String(Number(E.amount)||0),paymentMode:E.paymentMode,reference:E.reference||"",attachmentUrl:E.attachmentUrl||""}),f(!0)):(D(E.id),B({entryDate:E.entryDate,amount:String(Number(E.amount)||0),receivedAgainst:E.receivedAgainst||"",paymentMode:E.paymentMode,remarks:E.remarks||"",reference:E.reference||"",chequeNumber:E.chequeNumber||"",bankName:E.bankName||"",chequeDate:E.chequeDate||"",attachmentUrl:E.attachmentUrl||""}),m(!0))},children:i.jsx(Uu,{className:"w-3.5 h-3.5"})}),i.jsx(Ue,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-600",onClick:()=>P(E),disabled:ce.isPending,children:i.jsx(pr,{className:"w-3.5 h-3.5"})})]})})]},E.id)})})]})}),i.jsxs("div",{className:"border-t bg-slate-50 p-3 text-sm flex flex-wrap gap-4",children:[i.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[i.jsx(f_,{className:"w-4 h-4"})," Total Budget: Rs. ",ge.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"font-semibold text-red-600",children:["Total Expenses: Rs. ",ge.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:"font-semibold text-green-600",children:["Total Received: Rs. ",ge.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),i.jsxs("span",{className:`font-semibold ${ge.balanceAmount>=0?"text-green-700":"text-red-700"}`,children:[i.jsx(i_,{className:"w-4 h-4 inline mr-1"})," Balance: Rs. ",ge.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),i.jsx(mi,{open:!!S,onOpenChange:E=>!E&&P(null),children:i.jsxs(ri,{className:"sm:max-w-md",children:[i.jsxs(si,{children:[i.jsx(ii,{children:"Delete Ledger Entry?"}),i.jsx(tf,{children:S?`Are you sure you want to delete this ${S.entryType} entry dated ${S.entryDate}? This action cannot be undone.`:"This action cannot be undone."})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Ue,{type:"button",variant:"outline",autoFocus:!0,onClick:()=>P(null),disabled:ce.isPending,"data-testid":"button-cancel-delete-ledger-entry",children:"Cancel"}),i.jsx(Ue,{type:"button",variant:"destructive",onClick:()=>S&&ce.mutate(S.id),disabled:ce.isPending,"data-testid":"button-confirm-delete-ledger-entry",children:ce.isPending?"Deleting...":"Delete"})]})]})})]})}):i.jsx(Ls,{user:r,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),i.jsx(Ue,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})})}const t7=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],Mp=t=>Number(t||0)||0;function n7(){const{id:t}=Zu(),e=Number(t),[,n]=za(),{data:r}=Ta(),{toast:a}=$a(),[o,u]=k.useState(!1),[c,f]=k.useState({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),{data:p,isLoading:m}=Ln({queryKey:["/revira/api/clients",e],queryFn:async()=>{const W=await fetch(`/revira/api/clients/${e}`,{credentials:"include"});if(!W.ok)throw new Error("Failed to load client");return W.json()},enabled:Number.isFinite(e)&&e>0}),{data:b=[],isLoading:j}=Ln({queryKey:["/revira/api/client-ledger/projects",e],queryFn:async()=>{const W=await fetch("/revira/api/projects",{credentials:"include"});if(!W.ok)throw new Error("Failed to load projects");return(await W.json()).filter(Q=>Q.clientId===e)},enabled:Number.isFinite(e)&&e>0}),{data:y=[],isLoading:D}=Ln({queryKey:["/revira/api/client-ledger/invoices",e],queryFn:async()=>{const W=await fetch("/revira/api/invoices",{credentials:"include"});if(!W.ok)throw new Error("Failed to load invoices");const te=await W.json(),Q=new Set(b.map(de=>de.id));return te.filter(de=>Q.has(de.projectId))},enabled:b.length>0}),{data:S=[],isLoading:P}=Ln({queryKey:["/revira/api/client-ledger/receipts",e,b.map(W=>W.id).join(",")],queryFn:async()=>(await Promise.all(b.map(async te=>{const Q=await fetch(`/revira/api/projects/${te.id}/ledger/entries`,{credentials:"include"});return Q.ok?(await Q.json()).filter(F=>F.entryType==="receipt"):[]}))).flat(),enabled:b.length>0}),_=Tr({mutationFn:async()=>{if(!c.projectId)throw new Error("Select a project");if(!c.entryDate||!c.amount)throw new Error("Date and amount are required");const W={entryDate:c.entryDate,entryType:"receipt",category:"Client Receipt",description:"Amount received from client",amount:c.amount,paymentMode:c.paymentMode,remarks:c.remarks,reference:c.reference,receivedAgainst:c.receivedAgainst,chequeNumber:"",bankName:"",chequeDate:"",utrNumber:"",attachmentUrl:""};await wn("POST",`/revira/api/projects/${c.projectId}/ledger/entries`,W)},onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/client-ledger/receipts",e]}),u(!1),f({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),a({title:"Saved",description:"Received amount has been added."})},onError:W=>{a({title:"Error",description:W.message||"Failed to save",variant:"destructive"})}}),I=k.useMemo(()=>{const W=new Map;return b.forEach(te=>W.set(te.id,te)),W},[b]),v=k.useMemo(()=>b.map(W=>{const te=y.filter(de=>de.projectId===W.id).reduce((de,F)=>de+Mp(F.grandTotal),0),Q=S.filter(de=>de.projectId===W.id).reduce((de,F)=>de+Mp(F.amount),0);return{projectId:W.id,projectName:W.projectName,debit:te,credit:Q,balance:te-Q}}),[b,y,S]),B=k.useMemo(()=>{const W=v.reduce((Q,de)=>Q+de.debit,0),te=v.reduce((Q,de)=>Q+de.credit,0);return{debit:W,credit:te,balance:W-te}},[v]),ee=k.useMemo(()=>{const W=y.map(Q=>({date:new Date(Q.createdAt),dateText:new Date(Q.createdAt).toLocaleDateString("en-GB"),particulars:`Invoice ${Q.invoiceNumber} - ${I.get(Q.projectId)?.projectName||"Project"}`,vchType:"Sales",vchNo:Q.invoiceNumber||String(Q.id),debit:Mp(Q.grandTotal),credit:0})),te=S.map(Q=>({date:new Date(Q.entryDate),dateText:new Date(Q.entryDate).toLocaleDateString("en-GB"),particulars:`Receipt - ${I.get(Q.projectId)?.projectName||"Project"}`,vchType:"Receipt",vchNo:Q.reference||String(Q.id),debit:0,credit:Mp(Q.amount)}));return[...W,...te].sort((Q,de)=>Q.date.getTime()-de.date.getTime())},[y,S,I]),ae=()=>{const W=new un({orientation:"portrait",unit:"mm",format:"a4"}),te=12,de=210-te*2;let F=15;W.setFont("helvetica","bold"),W.setFontSize(14),W.text(`Client Ledger - ${p?.name||"Client"}`,te,F),F+=7,W.setFont("helvetica","normal"),W.setFontSize(10),W.text(`Date: ${new Date().toLocaleDateString("en-GB")}`,te,F),F+=7;const L=[{key:"date",label:"Date",width:24},{key:"part",label:"Particulars",width:68},{key:"type",label:"Vch Type",width:24},{key:"no",label:"Vch No.",width:26},{key:"debit",label:"Debit",width:24},{key:"credit",label:"Credit",width:24}],z=()=>{W.setFont("helvetica","bold"),W.setFontSize(9);let _e=te;L.forEach(Ae=>{W.text(Ae.label,_e+1,F),_e+=Ae.width}),F+=2,W.line(te,F,te+de,F),F+=4};z(),W.setFont("helvetica","normal"),W.setFontSize(9),ee.forEach(_e=>{F>276&&(W.addPage(),F=15,z(),W.setFont("helvetica","normal"));let Ae=te;[_e.dateText,_e.particulars,_e.vchType,_e.vchNo,_e.debit>0?_e.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"",_e.credit>0?_e.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):""].forEach((ge,De)=>{const se=L[De],O=se.key==="debit"||se.key==="credit";W.text(String(ge),O?Ae+se.width-1:Ae+1,F,{align:O?"right":"left"}),Ae+=se.width}),F+=5}),F+=2,W.line(te+de-48,F,te+de,F),F+=5,W.setFont("helvetica","bold"),W.text(`Total Debit: ${B.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+de-2,F,{align:"right"}),F+=5,W.text(`Total Credit: ${B.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+de-2,F,{align:"right"}),F+=5;const Y=B.balance>=0?"Closing Balance (Dr)":"Closing Balance (Cr)";W.text(`${Y}: ${Math.abs(B.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,te+de-2,F,{align:"right"});const Ce=`ClientLedger_${p?.name?.replace(/\s+/g,"_")||"Client"}_${new Date().toISOString().slice(0,10)}.pdf`;W.save(Ce)};return m||j?i.jsx(Ls,{user:r,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):p?i.jsx(Ls,{user:r,children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ue,{variant:"ghost",size:"icon",onClick:()=>n("/revira/clients"),children:i.jsx(af,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[i.jsx(sm,{className:"h-6 w-6 text-[#d92134]"}),"Client Ledger"]}),i.jsx("p",{className:"text-sm text-slate-500",children:p.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(mi,{open:o,onOpenChange:u,children:[i.jsx(Ch,{asChild:!0,children:i.jsxs(Ue,{className:"bg-[#d92134] hover:bg-[#b91c2c]","data-testid":"button-add-client-receipt",children:[i.jsx(Fi,{className:"h-4 w-4 mr-2"}),"Add Received Amount"]})}),i.jsxs(ri,{className:"sm:max-w-xl",children:[i.jsx(si,{children:i.jsx(ii,{children:"Add Received Amount"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(Tl,{value:c.projectId,onValueChange:W=>f(te=>({...te,projectId:W})),children:[i.jsx(Zo,{children:i.jsx(El,{placeholder:"Select project"})}),i.jsx(Yo,{children:b.map(W=>i.jsx(ha,{value:String(W.id),children:W.projectName},W.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(nt,{type:"date",value:c.entryDate,onChange:W=>f(te=>({...te,entryDate:W.target.value}))}),i.jsx(nt,{type:"number",placeholder:"Amount",value:c.amount,onChange:W=>f(te=>({...te,amount:W.target.value}))})]}),i.jsxs(Tl,{value:c.paymentMode,onValueChange:W=>f(te=>({...te,paymentMode:W})),children:[i.jsx(Zo,{children:i.jsx(El,{placeholder:"Payment mode"})}),i.jsx(Yo,{children:t7.map(W=>i.jsx(ha,{value:W.value,children:W.label},W.value))})]}),i.jsx(nt,{placeholder:"Received against",value:c.receivedAgainst,onChange:W=>f(te=>({...te,receivedAgainst:W.target.value}))}),i.jsx(nt,{placeholder:"Reference / voucher no.",value:c.reference,onChange:W=>f(te=>({...te,reference:W.target.value}))}),i.jsx(kr,{placeholder:"Remarks",value:c.remarks,onChange:W=>f(te=>({...te,remarks:W.target.value}))}),i.jsx(Ue,{onClick:()=>_.mutate(),className:"w-full",disabled:_.isPending,children:_.isPending?"Saving...":"Save Receipt"})]})]})]}),i.jsxs(Ue,{variant:"outline",onClick:ae,"data-testid":"button-export-client-ledger-pdf",children:[i.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Debit (Invoices)"}),i.jsxs("p",{className:"text-xl font-bold text-red-600",children:["Rs. ",B.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Total Credit (Received)"}),i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",B.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),i.jsx(Cn,{children:i.jsxs(_n,{className:"p-4",children:[i.jsx("p",{className:"text-xs text-slate-500",children:"Closing Balance"}),i.jsxs("p",{className:`text-xl font-bold ${B.balance>=0?"text-red-700":"text-green-700"}`,children:["Rs. ",Math.abs(B.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",B.balance>=0?"Dr":"Cr"]})]})})]}),i.jsxs(Cn,{children:[i.jsx(ts,{children:i.jsx(ns,{children:"Project-wise Ledger Summary"})}),i.jsx(_n,{className:"p-0 overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 text-left",children:"Project"}),i.jsx("th",{className:"p-3 text-right",children:"Debit (Invoice)"}),i.jsx("th",{className:"p-3 text-right",children:"Credit (Received)"}),i.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),i.jsx("tbody",{children:D||P?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"Loading..."})}):v.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"No projects found for this client."})}):v.map(W=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-3",children:W.projectName}),i.jsx("td",{className:"p-3 text-right text-red-600",children:W.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsx("td",{className:"p-3 text-right text-green-600",children:W.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.jsxs("td",{className:`p-3 text-right font-semibold ${W.balance>=0?"text-red-700":"text-green-700"}`,children:[Math.abs(W.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",W.balance>=0?"Dr":"Cr"]})]},W.projectId))})]})})]})]})}):i.jsx(Ls,{user:r,children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Client not found"}),i.jsx(Ue,{onClick:()=>n("/revira/clients"),className:"mt-4",children:"Back to Clients"})]})})}const r7=lE.extend({logoUrl:U.string().min(1,"Logo URL is required").max(5e5,"Logo data too large"),headerUrl:U.string().min(1,"Header URL is required").max(5e5,"Header data too large"),footerUrl:U.string().min(1,"Footer URL is required").max(5e5,"Footer data too large"),stampUrl:U.string().min(1,"Stamp URL is required").max(5e5,"Stamp data too large"),storeKeeperSignUrl:U.string().max(5e5,"Store Keeper signature data too large"),qcEnggSignUrl:U.string().max(5e5,"Qc Engg. signature data too large"),storeInchargeSignUrl:U.string().max(5e5,"Store Incharge signature data too large"),plantHeadSignUrl:U.string().max(5e5,"Plant Head signature data too large"),primaryColor:U.string().min(4,"Primary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),secondaryColor:U.string().min(4,"Secondary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),email:U.string().email("Valid email is required")});function s7(){const{toast:t}=$a(),{data:e}=Ta(),n=k.useRef(null),r=ff({resolver:hf(r7),defaultValues:{logoUrl:"https://reviranexgen.com/assets/logo-with-name.png",headerUrl:"https://reviranexgen.com/assets/header.jpg",footerUrl:"https://reviranexgen.com/assets/footer.jpg",stampUrl:"https://reviranexgen.com/assets/stamp.png",storeKeeperSignUrl:"",qcEnggSignUrl:"",storeInchargeSignUrl:"",plantHeadSignUrl:"",primaryColor:"#da2032",secondaryColor:"#2f3591",entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",companyGstin:"07AAPCR3026H1ZA",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:a,isLoading:o}=Ln({queryKey:["/revira/api/branding"]});k.useEffect(()=>{a&&r.reset({logoUrl:a.logoUrl,headerUrl:a.headerUrl,footerUrl:a.footerUrl,stampUrl:a.stampUrl,storeKeeperSignUrl:a.storeKeeperSignUrl||"",qcEnggSignUrl:a.qcEnggSignUrl||"",storeInchargeSignUrl:a.storeInchargeSignUrl||"",plantHeadSignUrl:a.plantHeadSignUrl||"",primaryColor:a.primaryColor,secondaryColor:a.secondaryColor,entityName:a.entityName,cin:a.cin,companyGstin:a.companyGstin,website:a.website,email:a.email,headOfficeAddress:a.headOfficeAddress,workshopAddress:a.workshopAddress})},[a,r]);const u=Tr({mutationFn:async v=>(await wn("PUT","/revira/api/branding",v)).json(),onSuccess:v=>{r.reset({logoUrl:v.logoUrl,headerUrl:v.headerUrl,footerUrl:v.footerUrl,stampUrl:v.stampUrl,storeKeeperSignUrl:v.storeKeeperSignUrl||"",qcEnggSignUrl:v.qcEnggSignUrl||"",storeInchargeSignUrl:v.storeInchargeSignUrl||"",plantHeadSignUrl:v.plantHeadSignUrl||"",primaryColor:v.primaryColor,secondaryColor:v.secondaryColor,entityName:v.entityName,cin:v.cin,companyGstin:v.companyGstin,website:v.website,email:v.email,headOfficeAddress:v.headOfficeAddress,workshopAddress:v.workshopAddress}),On.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Branding updated",description:"Your branding settings have been saved successfully."})},onError:v=>{t({title:"Error",description:v.message||"Failed to update branding",variant:"destructive"})}}),c=v=>{u.mutate(v)};if(o)return i.jsx(Ls,{user:e,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const f=r.watch("logoUrl"),p=r.watch("headerUrl"),m=r.watch("footerUrl"),b=r.watch("stampUrl"),j=r.watch("storeKeeperSignUrl"),y=r.watch("qcEnggSignUrl"),D=r.watch("storeInchargeSignUrl"),S=r.watch("plantHeadSignUrl"),P=r.watch("primaryColor"),_=r.watch("secondaryColor"),I=v=>B=>{const ee=B.target.files?.[0];if(ee){if(ee.size>500*1024){t({title:"File too large",description:"Please upload an image smaller than 500KB",variant:"destructive"});return}const ae=new FileReader;ae.onloadend=()=>{const W=ae.result;r.setValue(v,W,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},ae.readAsDataURL(ee)}};return i.jsx(Ls,{user:e,children:i.jsx(pf,{...r,children:i.jsxs("form",{onSubmit:r.handleSubmit(c),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg",children:i.jsx(nv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Branding"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage your company branding and identity"})]})]}),i.jsxs(Ue,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-primary to-primary/90","data-testid":"button-save-branding",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),u.isPending?"Saving...":"Save Changes"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Cn,{children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(m2,{className:"w-5 h-5"}),"Company Logo"]}),i.jsx(Kc,{children:"Upload or provide a URL for your company logo (max 500KB)"})]}),i.jsx(_n,{className:"space-y-4",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-full max-w-xs h-32 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:f?i.jsx("img",{src:f,alt:"Company Logo",className:"max-h-full max-w-full object-contain p-2","data-testid":"img-logo-preview"}):i.jsxs("div",{className:"text-slate-400 text-center",children:[i.jsx(m2,{className:"w-8 h-8 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})}),i.jsxs("div",{className:"w-full space-y-3",children:[i.jsx(rr,{control:r.control,name:"logoUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Logo URL"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"https://example.com/logo.png","data-testid":"input-logo-url"})}),i.jsx(Xn,{})]})}),i.jsx("div",{className:"text-center text-sm text-slate-500",children:"or"}),i.jsx("input",{type:"file",ref:n,onChange:I("logoUrl"),accept:"image/*",className:"hidden","data-testid":"input-logo-file"}),i.jsxs(Ue,{type:"button",variant:"outline",className:"w-full",onClick:()=>n.current?.click(),"data-testid":"button-upload-logo",children:[i.jsx(zc,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]})]})})]}),i.jsxs(Cn,{children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(nv,{className:"w-5 h-5"}),"Brand Colors"]}),i.jsx(Kc,{children:"Set your primary and secondary brand colors"})]}),i.jsx(_n,{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(rr,{control:r.control,name:"primaryColor",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Primary Color"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:v.value,onChange:v.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-primary-color"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"#da2032",className:"flex-1","data-testid":"input-primary-color-text"})})]}),i.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:P}}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"secondaryColor",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Secondary Color"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:v.value,onChange:v.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-secondary-color"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"#2f3591",className:"flex-1","data-testid":"input-secondary-color-text"})})]}),i.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:_}}),i.jsx(Xn,{})]})})]})})]}),i.jsxs(Cn,{className:"lg:col-span-2",children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5"}),"Document Assets"]}),i.jsx(Kc,{children:"Header, footer, and stamp images for documents (max 500KB each)"})]}),i.jsx(_n,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:p?i.jsx("img",{src:p,alt:"Header",className:"max-h-full max-w-full object-contain","data-testid":"img-header-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No header"]})}),i.jsx(rr,{control:r.control,name:"headerUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Header Image"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"https://example.com/header.jpg","data-testid":"input-header-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"header-file",onChange:I("headerUrl"),accept:"image/*",className:"hidden","data-testid":"input-header-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("header-file")?.click(),"data-testid":"button-upload-header",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Header"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:m?i.jsx("img",{src:m,alt:"Footer",className:"max-h-full max-w-full object-contain","data-testid":"img-footer-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No footer"]})}),i.jsx(rr,{control:r.control,name:"footerUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Footer Image"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"https://example.com/footer.jpg","data-testid":"input-footer-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"footer-file",onChange:I("footerUrl"),accept:"image/*",className:"hidden","data-testid":"input-footer-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("footer-file")?.click(),"data-testid":"button-upload-footer",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Footer"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:b?i.jsx("img",{src:b,alt:"Stamp & Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-stamp-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(l_,{className:"w-6 h-6 mx-auto mb-1"}),"No stamp"]})}),i.jsx(rr,{control:r.control,name:"stampUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Company Stamp & Signature"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"https://example.com/stamp.png","data-testid":"input-stamp-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"stamp-file",onChange:I("stampUrl"),accept:"image/*",className:"hidden","data-testid":"input-stamp-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("stamp-file")?.click(),"data-testid":"button-upload-stamp",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload Stamp"]})]})]})})]}),i.jsxs(Cn,{className:"lg:col-span-2",children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(Uc,{className:"w-5 h-5"}),"Signatures"]}),i.jsx(Kc,{children:"Upload signature images for Gate Pass roles (max 500KB each)"})]}),i.jsx(_n,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:j?i.jsx("img",{src:j,alt:"Store Keeper Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-keeper-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(rr,{control:r.control,name:"storeKeeperSignUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Store Keeper"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"Signature URL","data-testid":"input-store-keeper-sign-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"store-keeper-sign-file",onChange:I("storeKeeperSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-keeper-sign-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-keeper-sign-file")?.click(),"data-testid":"button-upload-store-keeper-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:y?i.jsx("img",{src:y,alt:"Qc Engg. Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-qc-engg-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(rr,{control:r.control,name:"qcEnggSignUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Qc Engg."}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"Signature URL","data-testid":"input-qc-engg-sign-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"qc-engg-sign-file",onChange:I("qcEnggSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-qc-engg-sign-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("qc-engg-sign-file")?.click(),"data-testid":"button-upload-qc-engg-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:D?i.jsx("img",{src:D,alt:"Store Incharge Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-incharge-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(rr,{control:r.control,name:"storeInchargeSignUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Store Incharge"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"Signature URL","data-testid":"input-store-incharge-sign-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"store-incharge-sign-file",onChange:I("storeInchargeSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-incharge-sign-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-incharge-sign-file")?.click(),"data-testid":"button-upload-store-incharge-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:S?i.jsx("img",{src:S,alt:"Plant Head Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-plant-head-sign-preview"}):i.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[i.jsx(Uc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),i.jsx(rr,{control:r.control,name:"plantHeadSignUrl",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Plant Head"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"Signature URL","data-testid":"input-plant-head-sign-url"})}),i.jsx(Xn,{})]})}),i.jsx("input",{type:"file",id:"plant-head-sign-file",onChange:I("plantHeadSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-plant-head-sign-file"}),i.jsxs(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("plant-head-sign-file")?.click(),"data-testid":"button-upload-plant-head-sign",children:[i.jsx(zc,{className:"w-3 h-3 mr-2"}),"Upload"]})]})]})})]}),i.jsxs(Cn,{className:"lg:col-span-2",children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(Gv,{className:"w-5 h-5"}),"Registry Data Core"]}),i.jsx(Kc,{children:"Company registration and legal information"})]}),i.jsx(_n,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rr,{control:r.control,name:"entityName",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Entity Registered Identity"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"cin",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Corporate Registration (CIN)"}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"website",render:({field:v})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(Tb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"companyGstin",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Company GST No."}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"07AAPCR3026H1ZA","data-testid":"input-company-gstin"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"email",render:({field:v})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(uu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),i.jsx(Yn,{children:i.jsx(nt,{...v,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),i.jsx(Xn,{})]})})]})})]}),i.jsxs(Cn,{className:"lg:col-span-2",children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-5 h-5"}),"Locations"]}),i.jsx(Kc,{children:"Head office and workshop addresses"})]}),i.jsx(_n,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rr,{control:r.control,name:"headOfficeAddress",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Head Office (H.O)"}),i.jsx(Yn,{children:i.jsx(kr,{...v,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-head-office-address"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:r.control,name:"workshopAddress",render:({field:v})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Workshop"}),i.jsx(Yn,{children:i.jsx(kr,{...v,placeholder:"Flat No. 302, 3rd Floor Rajat Residency...",rows:3,"data-testid":"input-workshop-address"})}),i.jsx(Xn,{})]})})]})})]})]})]})})})}const i7=U.object({entityName:U.string().min(1,"Entity name is required"),cin:U.string().min(1,"CIN is required"),website:U.string().min(1,"Website is required"),email:U.string().email("Valid email is required"),headOfficeAddress:U.string().min(1,"Head office address is required"),workshopAddress:U.string().min(1,"Workshop address is required")});function a7(){const{toast:t}=$a(),{data:e}=Ta(),n=ff({resolver:hf(i7),defaultValues:{entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:r,isLoading:a}=Ln({queryKey:["/revira/api/branding"]});k.useEffect(()=>{r&&n.reset({entityName:r.entityName,cin:r.cin,website:r.website,email:r.email,headOfficeAddress:r.headOfficeAddress,workshopAddress:r.workshopAddress})},[r,n]);const o=Tr({mutationFn:async c=>(await wn("PUT","/revira/api/branding",{...r,...c})).json(),onSuccess:()=>{On.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Settings updated",description:"Your company registry data has been saved successfully."})},onError:c=>{t({title:"Error",description:c.message||"Failed to update settings",variant:"destructive"})}}),u=c=>{o.mutate(c)};return a?i.jsx(Ls,{user:e,children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#da2032]"})})}):i.jsx(Ls,{user:e,children:i.jsx(pf,{...n,children:i.jsxs("form",{onSubmit:n.handleSubmit(u),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-[#da2032] text-white shadow-lg",children:i.jsx(Gv,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Manage company registry information"})]})]}),i.jsxs(Ue,{type:"submit",disabled:o.isPending,className:"bg-[#da2032] hover:bg-[#c41b2b]","data-testid":"button-save-settings",children:[i.jsx(of,{className:"w-4 h-4 mr-2"}),o.isPending?"Saving...":"Save Changes"]})]}),i.jsxs(Cn,{children:[i.jsxs(ts,{children:[i.jsxs(ns,{className:"flex items-center gap-2",children:[i.jsx(_a,{className:"w-5 h-5"}),"Company Registry Data Core"]}),i.jsx(Kc,{children:"Company registration and legal information"})]}),i.jsx(_n,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(rr,{control:n.control,name:"entityName",render:({field:c})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Entity Registered Identity"}),i.jsx(Yn,{children:i.jsx(nt,{...c,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:n.control,name:"website",render:({field:c})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(Tb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),i.jsx(Yn,{children:i.jsx(nt,{...c,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:n.control,name:"cin",render:({field:c})=>i.jsxs(Qn,{children:[i.jsx(Zn,{children:"Corporate Registration (CIN)"}),i.jsx(Yn,{children:i.jsx(nt,{...c,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:n.control,name:"email",render:({field:c})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(uu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),i.jsx(Yn,{children:i.jsx(nt,{...c,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:n.control,name:"workshopAddress",render:({field:c})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-4 h-4"}),"Nagpur Regional Hub"]}),i.jsx(Yn,{children:i.jsx(kr,{...c,placeholder:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023",rows:3,"data-testid":"input-nagpur-address"})}),i.jsx(Xn,{})]})}),i.jsx(rr,{control:n.control,name:"headOfficeAddress",render:({field:c})=>i.jsxs(Qn,{children:[i.jsxs(Zn,{className:"flex items-center gap-2",children:[i.jsx(eu,{className:"w-4 h-4"}),"Delhi Strategic H.O."]}),i.jsx(Yn,{children:i.jsx(kr,{...c,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-delhi-address"})}),i.jsx(Xn,{})]})})]})})]})]})})})}function o7(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 p-4",children:i.jsx(Cn,{className:"w-full max-w-md border-slate-200 shadow-xl",children:i.jsxs(_n,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(e_,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"The page you are looking for does not exist or has been moved."}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx(q5,{href:"/revira",children:i.jsx(Ue,{className:"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20",children:"Return Home"})})})]})})})}function fa({component:t}){const{data:e,isLoading:n}=Ta();return n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx(tv,{className:"w-8 h-8 animate-spin text-primary"})}):e?i.jsx(t,{}):i.jsx(b3,{to:"/revira"})}function l7(){return i.jsxs(y3,{children:[i.jsx(Di,{path:"/revira",component:UE}),i.jsx(Di,{path:"/revira/dashboard",children:i.jsx(fa,{component:tL})}),i.jsx(Di,{path:"/revira/clients",children:i.jsx(fa,{component:iL})}),i.jsx(Di,{path:"/revira/projects",children:i.jsx(fa,{component:OL})}),i.jsx(Di,{path:"/revira/users",children:i.jsx(fa,{component:VL})}),i.jsx(Di,{path:"/revira/projects/:projectId/quotation/:quotationId",children:i.jsx(fa,{component:j5})}),i.jsx(Di,{path:"/revira/projects/:projectId/quotation",children:i.jsx(fa,{component:j5})}),i.jsx(Di,{path:"/revira/projects/:id/invoice/:invoiceId",children:i.jsx(fa,{component:C5})}),i.jsx(Di,{path:"/revira/projects/:id/invoice",children:i.jsx(fa,{component:C5})}),i.jsx(Di,{path:"/revira/projects/:id/gate-pass/:gatePassId",children:i.jsx(fa,{component:_5})}),i.jsx(Di,{path:"/revira/projects/:id/gate-pass",children:i.jsx(fa,{component:_5})}),i.jsx(Di,{path:"/revira/projects/:id/delivery-challan/:deliveryChallanId",children:i.jsx(fa,{component:A5})}),i.jsx(Di,{path:"/revira/projects/:id/delivery-challan",children:i.jsx(fa,{component:A5})}),i.jsx(Di,{path:"/revira/projects/:id/ledger",children:i.jsx(fa,{component:e7})}),i.jsx(Di,{path:"/revira/clients/:id/ledger",children:i.jsx(fa,{component:n7})}),i.jsx(Di,{path:"/revira/branding",children:i.jsx(fa,{component:s7})}),i.jsx(Di,{path:"/revira/settings",children:i.jsx(fa,{component:a7})}),i.jsx(Di,{component:o7})]})}function c7(){return i.jsx(q3,{client:On,children:i.jsx(bP,{children:i.jsxs(fE,{children:[i.jsx(l7,{}),i.jsx(K_,{})]})})})}Xj.createRoot(document.getElementById("root")).render(i.jsx(c7,{}));export{Wr as _,u7 as c,k5 as g};
