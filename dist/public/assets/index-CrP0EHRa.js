function C3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var oF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e0={exports:{}},Hf={},t0={exports:{}},gr={};var Gx;function A3(){if(Gx)return gr;Gx=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function j(ne){return ne===null||typeof ne!="object"?null:(ne=y&&ne[y]||ne["@@iterator"],typeof ne=="function"?ne:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,S={};function k(ne,O,L){this.props=ne,this.context=O,this.refs=S,this.updater=L||x}k.prototype.isReactComponent={},k.prototype.setState=function(ne,O){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,O,"setState")},k.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function A(){}A.prototype=k.prototype;function I(ne,O,L){this.props=ne,this.context=O,this.refs=S,this.updater=L||x}var R=I.prototype=new A;R.constructor=I,D(R,k.prototype),R.isPureReactComponent=!0;var $=Array.isArray,N=Object.prototype.hasOwnProperty,xe={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function K(ne,O,L){var oe,ve={},ye=null,be=null;if(O!=null)for(oe in O.ref!==void 0&&(be=O.ref),O.key!==void 0&&(ye=""+O.key),O)N.call(O,oe)&&!re.hasOwnProperty(oe)&&(ve[oe]=O[oe]);var Le=arguments.length-2;if(Le===1)ve.children=L;else if(1<Le){for(var Oe=Array(Le),ze=0;ze<Le;ze++)Oe[ze]=arguments[ze+2];ve.children=Oe}if(ne&&ne.defaultProps)for(oe in Le=ne.defaultProps,Le)ve[oe]===void 0&&(ve[oe]=Le[oe]);return{$$typeof:t,type:ne,key:ye,ref:be,props:ve,_owner:xe.current}}function W(ne,O){return{$$typeof:t,type:ne.type,key:O,ref:ne.ref,props:ne.props,_owner:ne._owner}}function he(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function z(ne){var O={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(L){return O[L]})}var E=/\/+/g;function Q(ne,O){return typeof ne=="object"&&ne!==null&&ne.key!=null?z(""+ne.key):O.toString(36)}function X(ne,O,L,oe,ve){var ye=typeof ne;(ye==="undefined"||ye==="boolean")&&(ne=null);var be=!1;if(ne===null)be=!0;else switch(ye){case"string":case"number":be=!0;break;case"object":switch(ne.$$typeof){case t:case e:be=!0}}if(be)return be=ne,ve=ve(be),ne=oe===""?"."+Q(be,0):oe,$(ve)?(L="",ne!=null&&(L=ne.replace(E,"$&/")+"/"),X(ve,O,L,"",function(ze){return ze})):ve!=null&&(he(ve)&&(ve=W(ve,L+(!ve.key||be&&be.key===ve.key?"":(""+ve.key).replace(E,"$&/")+"/")+ne)),O.push(ve)),1;if(be=0,oe=oe===""?".":oe+":",$(ne))for(var Le=0;Le<ne.length;Le++){ye=ne[Le];var Oe=oe+Q(ye,Le);be+=X(ye,O,L,Oe,ve)}else if(Oe=j(ne),typeof Oe=="function")for(ne=Oe.call(ne),Le=0;!(ye=ne.next()).done;)ye=ye.value,Oe=oe+Q(ye,Le++),be+=X(ye,O,L,Oe,ve);else if(ye==="object")throw O=String(ne),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return be}function ie(ne,O,L){if(ne==null)return ne;var oe=[],ve=0;return X(ne,oe,"","",function(ye){return O.call(L,ye,ve++)}),oe}function Ce(ne){if(ne._status===-1){var O=ne._result;O=O(),O.then(function(L){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=L)},function(L){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=L)}),ne._status===-1&&(ne._status=0,ne._result=O)}if(ne._status===1)return ne._result.default;throw ne._result}var te={current:null},ae={transition:null},Ne={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:ae,ReactCurrentOwner:xe};function Re(){throw Error("act(...) is not supported in production builds of React.")}return gr.Children={map:ie,forEach:function(ne,O,L){ie(ne,function(){O.apply(this,arguments)},L)},count:function(ne){var O=0;return ie(ne,function(){O++}),O},toArray:function(ne){return ie(ne,function(O){return O})||[]},only:function(ne){if(!he(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},gr.Component=k,gr.Fragment=n,gr.Profiler=a,gr.PureComponent=I,gr.StrictMode=r,gr.Suspense=f,gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,gr.act=Re,gr.cloneElement=function(ne,O,L){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var oe=D({},ne.props),ve=ne.key,ye=ne.ref,be=ne._owner;if(O!=null){if(O.ref!==void 0&&(ye=O.ref,be=xe.current),O.key!==void 0&&(ve=""+O.key),ne.type&&ne.type.defaultProps)var Le=ne.type.defaultProps;for(Oe in O)N.call(O,Oe)&&!re.hasOwnProperty(Oe)&&(oe[Oe]=O[Oe]===void 0&&Le!==void 0?Le[Oe]:O[Oe])}var Oe=arguments.length-2;if(Oe===1)oe.children=L;else if(1<Oe){Le=Array(Oe);for(var ze=0;ze<Oe;ze++)Le[ze]=arguments[ze+2];oe.children=Le}return{$$typeof:t,type:ne.type,key:ve,ref:ye,props:oe,_owner:be}},gr.createContext=function(ne){return ne={$$typeof:u,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:o,_context:ne},ne.Consumer=ne},gr.createElement=K,gr.createFactory=function(ne){var O=K.bind(null,ne);return O.type=ne,O},gr.createRef=function(){return{current:null}},gr.forwardRef=function(ne){return{$$typeof:c,render:ne}},gr.isValidElement=he,gr.lazy=function(ne){return{$$typeof:m,_payload:{_status:-1,_result:ne},_init:Ce}},gr.memo=function(ne,O){return{$$typeof:p,type:ne,compare:O===void 0?null:O}},gr.startTransition=function(ne){var O=ae.transition;ae.transition={};try{ne()}finally{ae.transition=O}},gr.unstable_act=Re,gr.useCallback=function(ne,O){return te.current.useCallback(ne,O)},gr.useContext=function(ne){return te.current.useContext(ne)},gr.useDebugValue=function(){},gr.useDeferredValue=function(ne){return te.current.useDeferredValue(ne)},gr.useEffect=function(ne,O){return te.current.useEffect(ne,O)},gr.useId=function(){return te.current.useId()},gr.useImperativeHandle=function(ne,O,L){return te.current.useImperativeHandle(ne,O,L)},gr.useInsertionEffect=function(ne,O){return te.current.useInsertionEffect(ne,O)},gr.useLayoutEffect=function(ne,O){return te.current.useLayoutEffect(ne,O)},gr.useMemo=function(ne,O){return te.current.useMemo(ne,O)},gr.useReducer=function(ne,O,L){return te.current.useReducer(ne,O,L)},gr.useRef=function(ne){return te.current.useRef(ne)},gr.useState=function(ne){return te.current.useState(ne)},gr.useSyncExternalStore=function(ne,O,L){return te.current.useSyncExternalStore(ne,O,L)},gr.useTransition=function(){return te.current.useTransition()},gr.version="18.3.1",gr}var Kx;function Bm(){return Kx||(Kx=1,t0.exports=A3()),t0.exports}var Qx;function _3(){if(Qx)return Hf;Qx=1;var t=Bm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,y={},j=null,x=null;p!==void 0&&(j=""+p),f.key!==void 0&&(j=""+f.key),f.ref!==void 0&&(x=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(y[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)y[m]===void 0&&(y[m]=f[m]);return{$$typeof:e,type:c,key:j,ref:x,props:y,_owner:a.current}}return Hf.Fragment=n,Hf.jsx=u,Hf.jsxs=u,Hf}var Zx;function P3(){return Zx||(Zx=1,e0.exports=_3()),e0.exports}var s=P3(),_p={},n0={exports:{}},za={},r0={exports:{}},s0={};var Yx;function k3(){return Yx||(Yx=1,(function(t){function e(ae,Ne){var Re=ae.length;ae.push(Ne);e:for(;0<Re;){var ne=Re-1>>>1,O=ae[ne];if(0<a(O,Ne))ae[ne]=Ne,ae[Re]=O,Re=ne;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Ne=ae[0],Re=ae.pop();if(Re!==Ne){ae[0]=Re;e:for(var ne=0,O=ae.length,L=O>>>1;ne<L;){var oe=2*(ne+1)-1,ve=ae[oe],ye=oe+1,be=ae[ye];if(0>a(ve,Re))ye<O&&0>a(be,ve)?(ae[ne]=be,ae[ye]=Re,ne=ye):(ae[ne]=ve,ae[oe]=Re,ne=oe);else if(ye<O&&0>a(be,Re))ae[ne]=be,ae[ye]=Re,ne=ye;else break e}}return Ne}function a(ae,Ne){var Re=ae.sortIndex-Ne.sortIndex;return Re!==0?Re:ae.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,y=null,j=3,x=!1,D=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ae){for(var Ne=n(p);Ne!==null;){if(Ne.callback===null)r(p);else if(Ne.startTime<=ae)r(p),Ne.sortIndex=Ne.expirationTime,e(f,Ne);else break;Ne=n(p)}}function $(ae){if(S=!1,R(ae),!D)if(n(f)!==null)D=!0,Ce(N);else{var Ne=n(p);Ne!==null&&te($,Ne.startTime-ae)}}function N(ae,Ne){D=!1,S&&(S=!1,A(K),K=-1),x=!0;var Re=j;try{for(R(Ne),y=n(f);y!==null&&(!(y.expirationTime>Ne)||ae&&!z());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,j=y.priorityLevel;var O=ne(y.expirationTime<=Ne);Ne=t.unstable_now(),typeof O=="function"?y.callback=O:y===n(f)&&r(f),R(Ne)}else r(f);y=n(f)}if(y!==null)var L=!0;else{var oe=n(p);oe!==null&&te($,oe.startTime-Ne),L=!1}return L}finally{y=null,j=Re,x=!1}}var xe=!1,re=null,K=-1,W=5,he=-1;function z(){return!(t.unstable_now()-he<W)}function E(){if(re!==null){var ae=t.unstable_now();he=ae;var Ne=!0;try{Ne=re(!0,ae)}finally{Ne?Q():(xe=!1,re=null)}}else xe=!1}var Q;if(typeof I=="function")Q=function(){I(E)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ie=X.port2;X.port1.onmessage=E,Q=function(){ie.postMessage(null)}}else Q=function(){k(E,0)};function Ce(ae){re=ae,xe||(xe=!0,Q())}function te(ae,Ne){K=k(function(){ae(t.unstable_now())},Ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){D||x||(D=!0,Ce(N))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(ae){switch(j){case 1:case 2:case 3:var Ne=3;break;default:Ne=j}var Re=j;j=Ne;try{return ae()}finally{j=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,Ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Re=j;j=ae;try{return Ne()}finally{j=Re}},t.unstable_scheduleCallback=function(ae,Ne,Re){var ne=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?ne+Re:ne):Re=ne,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Re+O,ae={id:m++,callback:Ne,priorityLevel:ae,startTime:Re,expirationTime:O,sortIndex:-1},Re>ne?(ae.sortIndex=Re,e(p,ae),n(f)===null&&ae===n(p)&&(S?(A(K),K=-1):S=!0,te($,Re-ne))):(ae.sortIndex=O,e(f,ae),D||x||(D=!0,Ce(N))),ae},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(ae){var Ne=j;return function(){var Re=j;j=Ne;try{return ae.apply(this,arguments)}finally{j=Re}}}})(s0)),s0}var Xx;function T3(){return Xx||(Xx=1,r0.exports=k3()),r0.exports}var Jx;function E3(){if(Jx)return za;Jx=1;var t=Bm(),e=T3();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function o(i,l){u(i,l),u(i+"Capture",l)}function u(i,l){for(a[i]=l,i=0;i<l.length;i++)r.add(l[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function j(i){return f.call(y,i)?!0:f.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function x(i,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,l,d,g){if(l===null||typeof l>"u"||x(i,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(i,l,d,g,w,_,Z){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=_,this.removeEmptyString=Z}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];k[l]=new S(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(A,I);k[l]=new S(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(A,I);k[l]=new S(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(A,I);k[l]=new S(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function R(i,l,d,g){var w=k.hasOwnProperty(l)?k[l]:null;(w!==null?w.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,d,w,g)&&(d=null),g||w===null?j(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(l=w.attributeName,g=w.attributeNamespace,d===null?i.removeAttribute(l):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,g?i.setAttributeNS(g,l,d):i.setAttribute(l,d))))}var $=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),xe=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),z=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Ne(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var Re=Object.assign,ne;function O(i){if(ne===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);ne=l&&l[1]||""}return`
`+ne+i}var L=!1;function oe(i,l){if(!i||L)return"";L=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Qe){var g=Qe}Reflect.construct(i,[],l)}else{try{l.call()}catch(Qe){g=Qe}i.call(l.prototype)}else{try{throw Error()}catch(Qe){g=Qe}i()}}catch(Qe){if(Qe&&g&&typeof Qe.stack=="string"){for(var w=Qe.stack.split(`
`),_=g.stack.split(`
`),Z=w.length-1,je=_.length-1;1<=Z&&0<=je&&w[Z]!==_[je];)je--;for(;1<=Z&&0<=je;Z--,je--)if(w[Z]!==_[je]){if(Z!==1||je!==1)do if(Z--,je--,0>je||w[Z]!==_[je]){var Ee=`
`+w[Z].replace(" at new "," at ");return i.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",i.displayName)),Ee}while(1<=Z&&0<=je);break}}}finally{L=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?O(i):""}function ve(i){switch(i.tag){case 5:return O(i.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return i=oe(i.type,!1),i;case 11:return i=oe(i.type.render,!1),i;case 1:return i=oe(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case re:return"Fragment";case xe:return"Portal";case W:return"Profiler";case K:return"StrictMode";case Q:return"Suspense";case X:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case z:return(i.displayName||"Context")+".Consumer";case he:return(i._context.displayName||"Context")+".Provider";case E:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ie:return l=i.displayName||null,l!==null?l:ye(i.type)||"Memo";case Ce:l=i._payload,i=i._init;try{return ye(i(l))}catch{}}return null}function be(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(l);case 8:return l===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Le(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Oe(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ze(i){var l=Oe(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,_=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return w.call(this)},set:function(Z){g=""+Z,_.call(this,Z)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(Z){g=""+Z},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ze(i){i._valueTracker||(i._valueTracker=ze(i))}function lt(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return i&&(g=Oe(i)?i.checked?"true":"false":i.value),i=g,i!==d?(l.setValue(i),!0):!1}function ut(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function _t(i,l){var d=l.checked;return Re({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function ue(i,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Le(l.value!=null?l.value:d),i._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function xt(i,l){l=l.checked,l!=null&&R(i,"checked",l,!1)}function dn(i,l){xt(i,l);var d=Le(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?le(i,l.type,d):l.hasOwnProperty("defaultValue")&&le(i,l.type,Le(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function Jt(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function le(i,l,d){(l!=="number"||ut(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var J=Array.isArray;function q(i,l,d,g){if(i=i.options,l){l={};for(var w=0;w<d.length;w++)l["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=l.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&g&&(i[d].defaultSelected=!0)}else{for(d=""+Le(d),l=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,g&&(i[w].defaultSelected=!0);return}l!==null||i[w].disabled||(l=i[w])}l!==null&&(l.selected=!0)}}function U(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return Re({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function B(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(J(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Le(d)}}function G(i,l){var d=Le(l.value),g=Le(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),g!=null&&(i.defaultValue=""+g)}function fe(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Pe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _e(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Pe(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ie,qe=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,w){MSApp.execUnsafeLocalFunction(function(){return i(l,d,g,w)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ie.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function wt(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},En=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(i){En.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),ft[l]=ft[i]})});function Cn(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||ft.hasOwnProperty(i)&&ft[i]?(""+l).trim():l+"px"}function mn(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,w=Cn(d,l[d],g);d==="float"&&(d="cssFloat"),g?i.setProperty(d,w):i[d]=w}}var gn=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(i,l){if(l){if(gn[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ct(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rn=null;function Ke(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ye=null,it=null,on=null;function ln(i){if(i=Ec(i)){if(typeof Ye!="function")throw Error(n(280));var l=i.stateNode;l&&(l=_u(l),Ye(i.stateNode,i.type,l))}}function Zn(i){it?on?on.push(i):on=[i]:it=i}function bs(){if(it){var i=it,l=on;if(on=it=null,ln(i),l)for(i=0;i<l.length;i++)ln(l[i])}}function _r(i,l){return i(l)}function ds(){}var Nr=!1;function Mt(i,l,d){if(Nr)return i(l,d);Nr=!0;try{return _r(i,l,d)}finally{Nr=!1,(it!==null||on!==null)&&(ds(),bs())}}function vr(i,l){var d=i.stateNode;if(d===null)return null;var g=_u(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var fs=!1;if(c)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){fs=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{fs=!1}function Ls(i,l,d,g,w,_,Z,je,Ee){var Qe=Array.prototype.slice.call(arguments,3);try{l.apply(d,Qe)}catch(vt){this.onError(vt)}}var Sr=!1,Ir=null,Pr=!1,Di=null,Ds={onError:function(i){Sr=!0,Ir=i}};function ps(i,l,d,g,w,_,Z,je,Ee){Sr=!1,Ir=null,Ls.apply(Ds,arguments)}function Hr(i,l,d,g,w,_,Z,je,Ee){if(ps.apply(this,arguments),Sr){if(Sr){var Qe=Ir;Sr=!1,Ir=null}else throw Error(n(198));Pr||(Pr=!0,Di=Qe)}}function hr(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function Qs(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function Rs(i){if(hr(i)!==i)throw Error(n(188))}function Ri(i){var l=i.alternate;if(!l){if(l=hr(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,g=l;;){var w=d.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){d=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===d)return Rs(w),i;if(_===g)return Rs(w),l;_=_.sibling}throw Error(n(188))}if(d.return!==g.return)d=w,g=_;else{for(var Z=!1,je=w.child;je;){if(je===d){Z=!0,d=w,g=_;break}if(je===g){Z=!0,g=w,d=_;break}je=je.sibling}if(!Z){for(je=_.child;je;){if(je===d){Z=!0,d=_,g=w;break}if(je===g){Z=!0,g=_,d=w;break}je=je.sibling}if(!Z)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function ws(i){return i=Ri(i),i!==null?Is(i):null}function Is(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Is(i);if(l!==null)return l;i=i.sibling}return null}var kr=e.unstable_scheduleCallback,Ns=e.unstable_cancelCallback,Ci=e.unstable_shouldYield,Ga=e.unstable_requestPaint,wr=e.unstable_now,Ai=e.unstable_getCurrentPriorityLevel,is=e.unstable_ImmediatePriority,Xr=e.unstable_UserBlockingPriority,sn=e.unstable_NormalPriority,pr=e.unstable_LowPriority,Ln=e.unstable_IdlePriority,Zt=null,On=null;function yt(i){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Zt,i,void 0,(i.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:Ge,ot=Math.log,nt=Math.LN2;function Ge(i){return i>>>=0,i===0?32:31-(ot(i)/nt|0)|0}var gt=64,jt=4194304;function Tt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Rt(i,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,w=i.suspendedLanes,_=i.pingedLanes,Z=d&268435455;if(Z!==0){var je=Z&~w;je!==0?g=Tt(je):(_&=Z,_!==0&&(g=Tt(_)))}else Z=d&~w,Z!==0?g=Tt(Z):_!==0&&(g=Tt(_));if(g===0)return 0;if(l!==0&&l!==g&&(l&w)===0&&(w=g&-g,_=l&-l,w>=_||w===16&&(_&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)d=31-Xe(l),w=1<<d,g|=i[d],l&=~w;return g}function It(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(i,l){for(var d=i.suspendedLanes,g=i.pingedLanes,w=i.expirationTimes,_=i.pendingLanes;0<_;){var Z=31-Xe(_),je=1<<Z,Ee=w[Z];Ee===-1?((je&d)===0||(je&g)!==0)&&(w[Z]=It(je,l)):Ee<=l&&(i.expiredLanes|=je),_&=~je}}function Lt(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ft(){var i=gt;return gt<<=1,(gt&4194240)===0&&(gt=64),i}function qt(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function vn(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-Xe(l),i[l]=d}function xr(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-Xe(d),_=1<<w;l[w]=0,g[w]=-1,i[w]=-1,d&=~_}}function Un(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var g=31-Xe(d),w=1<<g;w&l|i[g]&l&&(i[g]|=l),d&=~w}}var zt=0;function An(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var xn,dr,Dn,F,de,we=!1,Ae=[],Se=null,At=null,Vn=null,$t=new Map,Ot=new Map,as=[],Ka="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(i,l){switch(i){case"focusin":case"focusout":Se=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":$t.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(l.pointerId)}}function Fs(i,l,d,g,w,_){return i===null||i.nativeEvent!==_?(i={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},l!==null&&(l=Ec(l),l!==null&&dr(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),i)}function ra(i,l,d,g,w){switch(l){case"focusin":return Se=Fs(Se,i,l,d,g,w),!0;case"dragenter":return At=Fs(At,i,l,d,g,w),!0;case"mouseover":return Vn=Fs(Vn,i,l,d,g,w),!0;case"pointerover":var _=w.pointerId;return $t.set(_,Fs($t.get(_)||null,i,l,d,g,w)),!0;case"gotpointercapture":return _=w.pointerId,Ot.set(_,Fs(Ot.get(_)||null,i,l,d,g,w)),!0}return!1}function vl(i){var l=jl(i.target);if(l!==null){var d=hr(l);if(d!==null){if(l=d.tag,l===13){if(l=Qs(d),l!==null){i.blockedOn=l,de(i.priority,function(){Dn(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function bt(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Do(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var g=new d.constructor(d.type,d);rn=g,d.target.dispatchEvent(g),rn=null}else return l=Ec(d),l!==null&&dr(l),i.blockedOn=d,!1;l.shift()}return!0}function er(i,l,d){bt(i)&&d.delete(l)}function Lo(){we=!1,Se!==null&&bt(Se)&&(Se=null),At!==null&&bt(At)&&(At=null),Vn!==null&&bt(Vn)&&(Vn=null),$t.forEach(er),Ot.forEach(er)}function Wi(i,l){i.blockedOn===l&&(i.blockedOn=null,we||(we=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lo)))}function Za(i){function l(w){return Wi(w,i)}if(0<Ae.length){Wi(Ae[0],i);for(var d=1;d<Ae.length;d++){var g=Ae[d];g.blockedOn===i&&(g.blockedOn=null)}}for(Se!==null&&Wi(Se,i),At!==null&&Wi(At,i),Vn!==null&&Wi(Vn,i),$t.forEach(l),Ot.forEach(l),d=0;d<as.length;d++)g=as[d],g.blockedOn===i&&(g.blockedOn=null);for(;0<as.length&&(d=as[0],d.blockedOn===null);)vl(d),d.blockedOn===null&&as.shift()}var vi=$.ReactCurrentBatchConfig,ba=!0;function Wr(i,l,d,g){var w=zt,_=vi.transition;vi.transition=null;try{zt=1,Ii(i,l,d,g)}finally{zt=w,vi.transition=_}}function Os(i,l,d,g){var w=zt,_=vi.transition;vi.transition=null;try{zt=4,Ii(i,l,d,g)}finally{zt=w,vi.transition=_}}function Ii(i,l,d,g){if(ba){var w=Do(i,l,d,g);if(w===null)ju(i,l,g,Ms,d),Qa(i,g);else if(ra(w,i,l,d,g))g.stopPropagation();else if(Qa(i,g),l&4&&-1<Ka.indexOf(i)){for(;w!==null;){var _=Ec(w);if(_!==null&&xn(_),_=Do(i,l,d,g),_===null&&ju(i,l,g,Ms,d),_===w)break;w=_}w!==null&&g.stopPropagation()}else ju(i,l,g,null,d)}}var Ms=null;function Do(i,l,d,g){if(Ms=null,i=Ke(g),i=jl(i),i!==null)if(l=hr(i),l===null)i=null;else if(d=l.tag,d===13){if(i=Qs(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Ms=i,null}function Ro(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ai()){case is:return 1;case Xr:return 4;case sn:case pr:return 16;case Ln:return 536870912;default:return 16}default:return 16}}var Gi=null,Ya=null,go=null;function Io(){if(go)return go;var i,l=Ya,d=l.length,g,w="value"in Gi?Gi.value:Gi.textContent,_=w.length;for(i=0;i<d&&l[i]===w[i];i++);var Z=d-i;for(g=1;g<=Z&&l[d-g]===w[_-g];g++);return go=w.slice(i,1<g?1-g:void 0)}function vo(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ms(){return!0}function Bs(){return!1}function ai(i){function l(d,g,w,_,Z){this._reactName=d,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=Z,this.currentTarget=null;for(var je in i)i.hasOwnProperty(je)&&(d=i[je],this[je]=d?d(_):_[je]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ms:Bs,this.isPropagationStopped=Bs,this}return Re(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),l}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=ai(Ki),b=Re({},Ki,{view:0,detail:0}),V=ai(b),ge,ke,Be,st=Re({},b,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Be&&(Be&&i.type==="mousemove"?(ge=i.screenX-Be.screenX,ke=i.screenY-Be.screenY):ke=ge=0,Be=i),ge)},movementY:function(i){return"movementY"in i?i.movementY:ke}}),dt=ai(st),Yt=Re({},st,{dataTransfer:0}),an=ai(Yt),Rn=Re({},b,{relatedTarget:0}),In=ai(Rn),yr=Re({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Et=ai(yr),wn=Re({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vt=ai(wn),yn=Re({},Ki,{data:0}),zn=ai(yn),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},es={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function js(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=es[i])?!!l[i]:!1}function Cs(){return js}var _i=Re({},b,{key:function(i){if(i.key){var l=jr[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=vo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ss[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(i){return i.type==="keypress"?vo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qi=ai(_i),yi=Re({},st,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wt=ai(yi),Fi=Re({},b,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),gs=ai(Fi),Fo=Re({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oo=ai(Fo),gu=Re({},st,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vu=ai(gu),Zi=[9,13,27,32],Xa=c&&"CompositionEvent"in window,xo=null;c&&"documentMode"in document&&(xo=document.documentMode);var sd=c&&"TextEvent"in window&&!xo,wa=c&&(!Xa||xo&&8<xo&&11>=xo),xl=" ",wc=!1;function Nc(i,l){switch(i){case"keyup":return Zi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ia=!1;function Na(i,l){switch(i){case"compositionend":return Mo(l);case"keypress":return l.which!==32?null:(wc=!0,xl);case"textInput":return i=l.data,i===xl&&wc?null:i;default:return null}}function Sa(i,l){if(Ia)return i==="compositionend"||!Xa&&Nc(i,l)?(i=Io(),go=Ya=Gi=null,Ia=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return wa&&l.locale!=="ko"?null:l.data;default:return null}}var yl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yo(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!yl[i.type]:l==="textarea"}function Bo(i,l,d,g){Zn(g),l=cd(l,"onChange"),0<l.length&&(d=new xi("onChange","change",null,d,g),i.push({event:d,listeners:l}))}var qo=null,bo=null;function qs(i){Nu(i,0)}function Wl(i){var l=nc(i);if(lt(l))return i}function wo(i,l){if(i==="change")return l}var Ja=!1;if(c){var Gl;if(c){var Kl="oninput"in document;if(!Kl){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),Kl=typeof Sc.oninput=="function"}Gl=Kl}else Gl=!1;Ja=Gl&&(!document.documentMode||9<document.documentMode)}function jc(){qo&&(qo.detachEvent("onpropertychange",Uo),bo=qo=null)}function Uo(i){if(i.propertyName==="value"&&Wl(bo)){var l=[];Bo(l,bo,i,Ke(i)),Mt(qs,l)}}function bl(i,l,d){i==="focusin"?(jc(),qo=l,bo=d,qo.attachEvent("onpropertychange",Uo)):i==="focusout"&&jc()}function wl(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wl(bo)}function Ql(i,l){if(i==="click")return Wl(l)}function Nl(i,l){if(i==="input"||i==="change")return Wl(l)}function Zl(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var As=typeof Object.is=="function"?Object.is:Zl;function sa(i,l){if(As(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var w=d[g];if(!f.call(l,w)||!As(i[w],l[w]))return!1}return!0}function Tr(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qr(i,l){var d=Tr(i);i=0;for(var g;d;){if(d.nodeType===3){if(g=i+d.textContent.length,i<=l&&g>=l)return{node:d,offset:l-i};i=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Tr(d)}}function _s(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?_s(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Zs(){for(var i=window,l=ut();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=ut(i.document)}return l}function eo(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function xu(i){var l=Zs(),d=i.focusedElem,g=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&_s(d.ownerDocument.documentElement,d)){if(g!==null&&eo(d)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,_=Math.min(g.start,w);g=g.end===void 0?_:Math.min(g.end,w),!i.extend&&_>g&&(w=g,g=_,_=w),w=qr(d,_);var Z=qr(d,g);w&&Z&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==Z.node||i.focusOffset!==Z.offset)&&(l=l.createRange(),l.setStart(w.node,w.offset),i.removeAllRanges(),_>g?(i.addRange(l),i.extend(Z.node,Z.offset)):(l.setEnd(Z.node,Z.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Cc=c&&"documentMode"in document&&11>=document.documentMode,zo=null,id=null,Ac=null,ad=!1;function wf(i,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ad||zo==null||zo!==ut(g)||(g=zo,"selectionStart"in g&&eo(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ac&&sa(Ac,g)||(Ac=g,g=cd(id,"onSelect"),0<g.length&&(l=new xi("onSelect","select",null,l,d),i.push({event:l,listeners:g}),l.target=zo)))}function yu(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var Yl={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},Xl={},Nf={};c&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function bu(i){if(Xl[i])return Xl[i];if(!Yl[i])return i;var l=Yl[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in Nf)return Xl[i]=l[d];return i}var Sf=bu("animationend"),jf=bu("animationiteration"),Cf=bu("animationstart"),Af=bu("transitionend"),_f=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(i,l){_f.set(i,l),o(l,[i])}for(var _c=0;_c<Pf.length;_c++){var Yi=Pf[_c],Fa=Yi.toLowerCase(),od=Yi[0].toUpperCase()+Yi.slice(1);No(Fa,"on"+od)}No(Sf,"onAnimationEnd"),No(jf,"onAnimationIteration"),No(Cf,"onAnimationStart"),No("dblclick","onDoubleClick"),No("focusin","onFocus"),No("focusout","onBlur"),No(Af,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function wu(i,l,d){var g=i.type||"unknown-event";i.currentTarget=d,Hr(g,l,void 0,i),i.currentTarget=null}function Nu(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var g=i[d],w=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var Z=g.length-1;0<=Z;Z--){var je=g[Z],Ee=je.instance,Qe=je.currentTarget;if(je=je.listener,Ee!==_&&w.isPropagationStopped())break e;wu(w,je,Qe),_=Ee}else for(Z=0;Z<g.length;Z++){if(je=g[Z],Ee=je.instance,Qe=je.currentTarget,je=je.listener,Ee!==_&&w.isPropagationStopped())break e;wu(w,je,Qe),_=Ee}}}if(Pr)throw i=Di,Pr=!1,Di=null,i}function Gr(i,l){var d=l[aa];d===void 0&&(d=l[aa]=new Set);var g=i+"__bubble";d.has(g)||(Su(l,i,2,!1),d.add(g))}function ld(i,l,d){var g=0;l&&(g|=4),Su(d,i,g,l)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Jl(i){if(!i[Pc]){i[Pc]=!0,r.forEach(function(d){d!=="selectionchange"&&(Gh.has(d)||ld(d,!1,i),ld(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Pc]||(l[Pc]=!0,ld("selectionchange",!1,l))}}function Su(i,l,d,g){switch(Ro(l)){case 1:var w=Wr;break;case 4:w=Os;break;default:w=Ii}d=w.bind(null,l,d,i),w=void 0,!fs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),g?w!==void 0?i.addEventListener(l,d,{capture:!0,passive:w}):i.addEventListener(l,d,!0):w!==void 0?i.addEventListener(l,d,{passive:w}):i.addEventListener(l,d,!1)}function ju(i,l,d,g,w){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var Z=g.tag;if(Z===3||Z===4){var je=g.stateNode.containerInfo;if(je===w||je.nodeType===8&&je.parentNode===w)break;if(Z===4)for(Z=g.return;Z!==null;){var Ee=Z.tag;if((Ee===3||Ee===4)&&(Ee=Z.stateNode.containerInfo,Ee===w||Ee.nodeType===8&&Ee.parentNode===w))return;Z=Z.return}for(;je!==null;){if(Z=jl(je),Z===null)return;if(Ee=Z.tag,Ee===5||Ee===6){g=_=Z;continue e}je=je.parentNode}}g=g.return}Mt(function(){var Qe=_,vt=Ke(d),Nt=[];e:{var pt=_f.get(i);if(pt!==void 0){var Ht=xi,tn=i;switch(i){case"keypress":if(vo(d)===0)break e;case"keydown":case"keyup":Ht=Qi;break;case"focusin":tn="focus",Ht=In;break;case"focusout":tn="blur",Ht=In;break;case"beforeblur":case"afterblur":Ht=In;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ht=dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ht=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ht=gs;break;case Sf:case jf:case Cf:Ht=Et;break;case Af:Ht=Oo;break;case"scroll":Ht=V;break;case"wheel":Ht=vu;break;case"copy":case"cut":case"paste":Ht=Vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ht=Wt}var cn=(l&4)!==0,ci=!cn&&i==="scroll",Ve=cn?pt!==null?pt+"Capture":null:pt;cn=[];for(var Fe=Qe,We;Fe!==null;){We=Fe;var Pt=We.stateNode;if(We.tag===5&&Pt!==null&&(We=Pt,Ve!==null&&(Pt=vr(Fe,Ve),Pt!=null&&cn.push(Cu(Fe,Pt,We)))),ci)break;Fe=Fe.return}0<cn.length&&(pt=new Ht(pt,tn,null,d,vt),Nt.push({event:pt,listeners:cn}))}}if((l&7)===0){e:{if(pt=i==="mouseover"||i==="pointerover",Ht=i==="mouseout"||i==="pointerout",pt&&d!==rn&&(tn=d.relatedTarget||d.fromElement)&&(jl(tn)||tn[Oi]))break e;if((Ht||pt)&&(pt=vt.window===vt?vt:(pt=vt.ownerDocument)?pt.defaultView||pt.parentWindow:window,Ht?(tn=d.relatedTarget||d.toElement,Ht=Qe,tn=tn?jl(tn):null,tn!==null&&(ci=hr(tn),tn!==ci||tn.tag!==5&&tn.tag!==6)&&(tn=null)):(Ht=null,tn=Qe),Ht!==tn)){if(cn=dt,Pt="onMouseLeave",Ve="onMouseEnter",Fe="mouse",(i==="pointerout"||i==="pointerover")&&(cn=Wt,Pt="onPointerLeave",Ve="onPointerEnter",Fe="pointer"),ci=Ht==null?pt:nc(Ht),We=tn==null?pt:nc(tn),pt=new cn(Pt,Fe+"leave",Ht,d,vt),pt.target=ci,pt.relatedTarget=We,Pt=null,jl(vt)===Qe&&(cn=new cn(Ve,Fe+"enter",tn,d,vt),cn.target=We,cn.relatedTarget=ci,Pt=cn),ci=Pt,Ht&&tn)t:{for(cn=Ht,Ve=tn,Fe=0,We=cn;We;We=ec(We))Fe++;for(We=0,Pt=Ve;Pt;Pt=ec(Pt))We++;for(;0<Fe-We;)cn=ec(cn),Fe--;for(;0<We-Fe;)Ve=ec(Ve),We--;for(;Fe--;){if(cn===Ve||Ve!==null&&cn===Ve.alternate)break t;cn=ec(cn),Ve=ec(Ve)}cn=null}else cn=null;Ht!==null&&Kh(Nt,pt,Ht,cn,!1),tn!==null&&ci!==null&&Kh(Nt,ci,tn,cn,!0)}}e:{if(pt=Qe?nc(Qe):window,Ht=pt.nodeName&&pt.nodeName.toLowerCase(),Ht==="select"||Ht==="input"&&pt.type==="file")var hn=wo;else if(yo(pt))if(Ja)hn=Nl;else{hn=wl;var _n=bl}else(Ht=pt.nodeName)&&Ht.toLowerCase()==="input"&&(pt.type==="checkbox"||pt.type==="radio")&&(hn=Ql);if(hn&&(hn=hn(i,Qe))){Bo(Nt,hn,d,vt);break e}_n&&_n(i,pt,Qe),i==="focusout"&&(_n=pt._wrapperState)&&_n.controlled&&pt.type==="number"&&le(pt,"number",pt.value)}switch(_n=Qe?nc(Qe):window,i){case"focusin":(yo(_n)||_n.contentEditable==="true")&&(zo=_n,id=Qe,Ac=null);break;case"focusout":Ac=id=zo=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,wf(Nt,d,vt);break;case"selectionchange":if(Cc)break;case"keydown":case"keyup":wf(Nt,d,vt)}var Pn;if(Xa)e:{switch(i){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else Ia?Nc(i,d)&&(Hn="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Hn="onCompositionStart");Hn&&(wa&&d.locale!=="ko"&&(Ia||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&Ia&&(Pn=Io()):(Gi=vt,Ya="value"in Gi?Gi.value:Gi.textContent,Ia=!0)),_n=cd(Qe,Hn),0<_n.length&&(Hn=new zn(Hn,i,null,d,vt),Nt.push({event:Hn,listeners:_n}),Pn?Hn.data=Pn:(Pn=Mo(d),Pn!==null&&(Hn.data=Pn)))),(Pn=sd?Na(i,d):Sa(i,d))&&(Qe=cd(Qe,"onBeforeInput"),0<Qe.length&&(vt=new zn("onBeforeInput","beforeinput",null,d,vt),Nt.push({event:vt,listeners:Qe}),vt.data=Pn))}Nu(Nt,l)})}function Cu(i,l,d){return{instance:i,listener:l,currentTarget:d}}function cd(i,l){for(var d=l+"Capture",g=[];i!==null;){var w=i,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=vr(i,d),_!=null&&g.unshift(Cu(i,_,w)),_=vr(i,l),_!=null&&g.push(Cu(i,_,w))),i=i.return}return g}function ec(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Kh(i,l,d,g,w){for(var _=l._reactName,Z=[];d!==null&&d!==g;){var je=d,Ee=je.alternate,Qe=je.stateNode;if(Ee!==null&&Ee===g)break;je.tag===5&&Qe!==null&&(je=Qe,w?(Ee=vr(d,_),Ee!=null&&Z.unshift(Cu(d,Ee,je))):w||(Ee=vr(d,_),Ee!=null&&Z.push(Cu(d,Ee,je)))),d=d.return}Z.length!==0&&i.push({event:l,listeners:Z})}var pg=/\r\n?/g,mg=/\u0000|\uFFFD/g;function Qh(i){return(typeof i=="string"?i:""+i).replace(pg,`
`).replace(mg,"")}function ud(i,l,d){if(l=Qh(l),Qh(i)!==l&&d)throw Error(n(425))}function kc(){}var Au=null,tc=null;function kf(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,Yh=typeof Promise=="function"?Promise:void 0,gg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yh<"u"?function(i){return Yh.resolve(null).then(i).catch(vg)}:Tf;function vg(i){setTimeout(function(){throw i})}function Ef(i,l){var d=l,g=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(g===0){i.removeChild(w),Za(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=w}while(d);Za(l)}function Xi(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Oa(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var ia=Math.random().toString(36).slice(2),So="__reactFiber$"+ia,Tc="__reactProps$"+ia,Oi="__reactContainer$"+ia,aa="__reactEvents$"+ia,xg="__reactListeners$"+ia,yg="__reactHandles$"+ia;function jl(i){var l=i[So];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Oi]||d[So]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=Oa(i);i!==null;){if(d=i[So])return d;i=Oa(i)}return l}i=d,d=i.parentNode}return null}function Ec(i){return i=i[So]||i[Oi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function nc(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function _u(i){return i[Tc]||null}var Lf=[],$o=-1;function to(i){return{current:i}}function Br(i){0>$o||(i.current=Lf[$o],Lf[$o]=null,$o--)}function Ur(i,l){$o++,Lf[$o]=i.current,i.current=l}var Cl={},Pi=to(Cl),oa=to(!1),rc=Cl;function Lc(i,l){var d=i.type.contextTypes;if(!d)return Cl;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in d)w[_]=l[_];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=w),w}function la(i){return i=i.childContextTypes,i!=null}function dd(){Br(oa),Br(Pi)}function Xh(i,l,d){if(Pi.current!==Cl)throw Error(n(168));Ur(Pi,l),Ur(oa,d)}function Df(i,l,d){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var w in g)if(!(w in l))throw Error(n(108,be(i)||"Unknown",w));return Re({},d,g)}function sc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Cl,rc=Pi.current,Ur(Pi,i),Ur(oa,oa.current),!0}function Jh(i,l,d){var g=i.stateNode;if(!g)throw Error(n(169));d?(i=Df(i,l,rc),g.__reactInternalMemoizedMergedChildContext=i,Br(oa),Br(Pi),Ur(Pi,i)):Br(oa),Ur(oa,d)}var Vo=null,Pu=!1,h=!1;function v(i){Vo===null?Vo=[i]:Vo.push(i)}function C(i){Pu=!0,v(i)}function T(){if(!h&&Vo!==null){h=!0;var i=0,l=zt;try{var d=Vo;for(zt=1;i<d.length;i++){var g=d[i];do g=g(!0);while(g!==null)}Vo=null,Pu=!1}catch(w){throw Vo!==null&&(Vo=Vo.slice(i+1)),kr(is,T),w}finally{zt=l,h=!1}}return null}var H=[],Y=0,ee=null,se=0,ce=[],pe=0,Te=null,$e=1,me="";function De(i,l){H[Y++]=se,H[Y++]=ee,ee=i,se=l}function Ue(i,l,d){ce[pe++]=$e,ce[pe++]=me,ce[pe++]=Te,Te=i;var g=$e;i=me;var w=32-Xe(g)-1;g&=~(1<<w),d+=1;var _=32-Xe(l)+w;if(30<_){var Z=w-w%5;_=(g&(1<<Z)-1).toString(32),g>>=Z,w-=Z,$e=1<<32-Xe(l)+w|d<<w|g,me=_+i}else $e=1<<_|d<<w|g,me=i}function rt(i){i.return!==null&&(De(i,1),Ue(i,1,0))}function He(i){for(;i===ee;)ee=H[--Y],H[Y]=null,se=H[--Y],H[Y]=null;for(;i===Te;)Te=ce[--pe],ce[pe]=null,me=ce[--pe],ce[pe]=null,$e=ce[--pe],ce[pe]=null}var et=null,tt=null,at=!1,ct=null;function fn(i,l){var d=Po(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function Kt(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,et=i,tt=Xi(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,et=i,tt=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Te!==null?{id:$e,overflow:me}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Po(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,et=i,tt=null,!0):!1;default:return!1}}function Qn(i){return(i.mode&1)!==0&&(i.flags&128)===0}function en(i){if(at){var l=tt;if(l){var d=l;if(!Kt(i,l)){if(Qn(i))throw Error(n(418));l=Xi(d.nextSibling);var g=et;l&&Kt(i,l)?fn(g,d):(i.flags=i.flags&-4097|2,at=!1,et=i)}}else{if(Qn(i))throw Error(n(418));i.flags=i.flags&-4097|2,at=!1,et=i}}}function mr(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;et=i}function Ps(i){if(i!==et)return!1;if(!at)return mr(i),at=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!kf(i.type,i.memoizedProps)),l&&(l=tt)){if(Qn(i))throw Yn(),Error(n(418));for(;l;)fn(i,l),l=Xi(l.nextSibling)}if(mr(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){tt=Xi(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}tt=null}}else tt=et?Xi(i.stateNode.nextSibling):null;return!0}function Yn(){for(var i=tt;i;)i=Xi(i.nextSibling)}function Qt(){tt=et=null,at=!1}function kt(i){ct===null?ct=[i]:ct.push(i)}var Us=$.ReactCurrentBatchConfig;function Mn(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,i));var w=g,_=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(Z){var je=w.refs;Z===null?delete je[_]:je[_]=Z},l._stringRef=_,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function fr(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function Jr(i){var l=i._init;return l(i._payload)}function bi(i){function l(Ve,Fe){if(i){var We=Ve.deletions;We===null?(Ve.deletions=[Fe],Ve.flags|=16):We.push(Fe)}}function d(Ve,Fe){if(!i)return null;for(;Fe!==null;)l(Ve,Fe),Fe=Fe.sibling;return null}function g(Ve,Fe){for(Ve=new Map;Fe!==null;)Fe.key!==null?Ve.set(Fe.key,Fe):Ve.set(Fe.index,Fe),Fe=Fe.sibling;return Ve}function w(Ve,Fe){return Ve=zc(Ve,Fe),Ve.index=0,Ve.sibling=null,Ve}function _(Ve,Fe,We){return Ve.index=We,i?(We=Ve.alternate,We!==null?(We=We.index,We<Fe?(Ve.flags|=2,Fe):We):(Ve.flags|=2,Fe)):(Ve.flags|=1048576,Fe)}function Z(Ve){return i&&Ve.alternate===null&&(Ve.flags|=2),Ve}function je(Ve,Fe,We,Pt){return Fe===null||Fe.tag!==6?(Fe=Kg(We,Ve.mode,Pt),Fe.return=Ve,Fe):(Fe=w(Fe,We),Fe.return=Ve,Fe)}function Ee(Ve,Fe,We,Pt){var hn=We.type;return hn===re?vt(Ve,Fe,We.props.children,Pt,We.key):Fe!==null&&(Fe.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===Ce&&Jr(hn)===Fe.type)?(Pt=w(Fe,We.props),Pt.ref=Mn(Ve,Fe,We),Pt.return=Ve,Pt):(Pt=yp(We.type,We.key,We.props,null,Ve.mode,Pt),Pt.ref=Mn(Ve,Fe,We),Pt.return=Ve,Pt)}function Qe(Ve,Fe,We,Pt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==We.containerInfo||Fe.stateNode.implementation!==We.implementation?(Fe=Qg(We,Ve.mode,Pt),Fe.return=Ve,Fe):(Fe=w(Fe,We.children||[]),Fe.return=Ve,Fe)}function vt(Ve,Fe,We,Pt,hn){return Fe===null||Fe.tag!==7?(Fe=Fu(We,Ve.mode,Pt,hn),Fe.return=Ve,Fe):(Fe=w(Fe,We),Fe.return=Ve,Fe)}function Nt(Ve,Fe,We){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Fe=Kg(""+Fe,Ve.mode,We),Fe.return=Ve,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case N:return We=yp(Fe.type,Fe.key,Fe.props,null,Ve.mode,We),We.ref=Mn(Ve,null,Fe),We.return=Ve,We;case xe:return Fe=Qg(Fe,Ve.mode,We),Fe.return=Ve,Fe;case Ce:var Pt=Fe._init;return Nt(Ve,Pt(Fe._payload),We)}if(J(Fe)||Ne(Fe))return Fe=Fu(Fe,Ve.mode,We,null),Fe.return=Ve,Fe;fr(Ve,Fe)}return null}function pt(Ve,Fe,We,Pt){var hn=Fe!==null?Fe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return hn!==null?null:je(Ve,Fe,""+We,Pt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case N:return We.key===hn?Ee(Ve,Fe,We,Pt):null;case xe:return We.key===hn?Qe(Ve,Fe,We,Pt):null;case Ce:return hn=We._init,pt(Ve,Fe,hn(We._payload),Pt)}if(J(We)||Ne(We))return hn!==null?null:vt(Ve,Fe,We,Pt,null);fr(Ve,We)}return null}function Ht(Ve,Fe,We,Pt,hn){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return Ve=Ve.get(We)||null,je(Fe,Ve,""+Pt,hn);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case N:return Ve=Ve.get(Pt.key===null?We:Pt.key)||null,Ee(Fe,Ve,Pt,hn);case xe:return Ve=Ve.get(Pt.key===null?We:Pt.key)||null,Qe(Fe,Ve,Pt,hn);case Ce:var _n=Pt._init;return Ht(Ve,Fe,We,_n(Pt._payload),hn)}if(J(Pt)||Ne(Pt))return Ve=Ve.get(We)||null,vt(Fe,Ve,Pt,hn,null);fr(Fe,Pt)}return null}function tn(Ve,Fe,We,Pt){for(var hn=null,_n=null,Pn=Fe,Hn=Fe=0,zi=null;Pn!==null&&Hn<We.length;Hn++){Pn.index>Hn?(zi=Pn,Pn=null):zi=Pn.sibling;var Fr=pt(Ve,Pn,We[Hn],Pt);if(Fr===null){Pn===null&&(Pn=zi);break}i&&Pn&&Fr.alternate===null&&l(Ve,Pn),Fe=_(Fr,Fe,Hn),_n===null?hn=Fr:_n.sibling=Fr,_n=Fr,Pn=zi}if(Hn===We.length)return d(Ve,Pn),at&&De(Ve,Hn),hn;if(Pn===null){for(;Hn<We.length;Hn++)Pn=Nt(Ve,We[Hn],Pt),Pn!==null&&(Fe=_(Pn,Fe,Hn),_n===null?hn=Pn:_n.sibling=Pn,_n=Pn);return at&&De(Ve,Hn),hn}for(Pn=g(Ve,Pn);Hn<We.length;Hn++)zi=Ht(Pn,Ve,Hn,We[Hn],Pt),zi!==null&&(i&&zi.alternate!==null&&Pn.delete(zi.key===null?Hn:zi.key),Fe=_(zi,Fe,Hn),_n===null?hn=zi:_n.sibling=zi,_n=zi);return i&&Pn.forEach(function($c){return l(Ve,$c)}),at&&De(Ve,Hn),hn}function cn(Ve,Fe,We,Pt){var hn=Ne(We);if(typeof hn!="function")throw Error(n(150));if(We=hn.call(We),We==null)throw Error(n(151));for(var _n=hn=null,Pn=Fe,Hn=Fe=0,zi=null,Fr=We.next();Pn!==null&&!Fr.done;Hn++,Fr=We.next()){Pn.index>Hn?(zi=Pn,Pn=null):zi=Pn.sibling;var $c=pt(Ve,Pn,Fr.value,Pt);if($c===null){Pn===null&&(Pn=zi);break}i&&Pn&&$c.alternate===null&&l(Ve,Pn),Fe=_($c,Fe,Hn),_n===null?hn=$c:_n.sibling=$c,_n=$c,Pn=zi}if(Fr.done)return d(Ve,Pn),at&&De(Ve,Hn),hn;if(Pn===null){for(;!Fr.done;Hn++,Fr=We.next())Fr=Nt(Ve,Fr.value,Pt),Fr!==null&&(Fe=_(Fr,Fe,Hn),_n===null?hn=Fr:_n.sibling=Fr,_n=Fr);return at&&De(Ve,Hn),hn}for(Pn=g(Ve,Pn);!Fr.done;Hn++,Fr=We.next())Fr=Ht(Pn,Ve,Hn,Fr.value,Pt),Fr!==null&&(i&&Fr.alternate!==null&&Pn.delete(Fr.key===null?Hn:Fr.key),Fe=_(Fr,Fe,Hn),_n===null?hn=Fr:_n.sibling=Fr,_n=Fr);return i&&Pn.forEach(function(j3){return l(Ve,j3)}),at&&De(Ve,Hn),hn}function ci(Ve,Fe,We,Pt){if(typeof We=="object"&&We!==null&&We.type===re&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case N:e:{for(var hn=We.key,_n=Fe;_n!==null;){if(_n.key===hn){if(hn=We.type,hn===re){if(_n.tag===7){d(Ve,_n.sibling),Fe=w(_n,We.props.children),Fe.return=Ve,Ve=Fe;break e}}else if(_n.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===Ce&&Jr(hn)===_n.type){d(Ve,_n.sibling),Fe=w(_n,We.props),Fe.ref=Mn(Ve,_n,We),Fe.return=Ve,Ve=Fe;break e}d(Ve,_n);break}else l(Ve,_n);_n=_n.sibling}We.type===re?(Fe=Fu(We.props.children,Ve.mode,Pt,We.key),Fe.return=Ve,Ve=Fe):(Pt=yp(We.type,We.key,We.props,null,Ve.mode,Pt),Pt.ref=Mn(Ve,Fe,We),Pt.return=Ve,Ve=Pt)}return Z(Ve);case xe:e:{for(_n=We.key;Fe!==null;){if(Fe.key===_n)if(Fe.tag===4&&Fe.stateNode.containerInfo===We.containerInfo&&Fe.stateNode.implementation===We.implementation){d(Ve,Fe.sibling),Fe=w(Fe,We.children||[]),Fe.return=Ve,Ve=Fe;break e}else{d(Ve,Fe);break}else l(Ve,Fe);Fe=Fe.sibling}Fe=Qg(We,Ve.mode,Pt),Fe.return=Ve,Ve=Fe}return Z(Ve);case Ce:return _n=We._init,ci(Ve,Fe,_n(We._payload),Pt)}if(J(We))return tn(Ve,Fe,We,Pt);if(Ne(We))return cn(Ve,Fe,We,Pt);fr(Ve,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Fe!==null&&Fe.tag===6?(d(Ve,Fe.sibling),Fe=w(Fe,We),Fe.return=Ve,Ve=Fe):(d(Ve,Fe),Fe=Kg(We,Ve.mode,Pt),Fe.return=Ve,Ve=Fe),Z(Ve)):d(Ve,Fe)}return ci}var Ys=bi(!0),vs=bi(!1),oi=to(null),wi=null,os=null,br=null;function Er(){br=os=wi=null}function ls(i){var l=oi.current;Br(oi),i._currentValue=l}function Lr(i,l,d){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===d)break;i=i.return}}function ks(i,l){wi=i,br=os=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Ba=!0),i.firstContext=null)}function Ts(i){var l=i._currentValue;if(br!==i)if(i={context:i,memoizedValue:l,next:null},os===null){if(wi===null)throw Error(n(308));os=i,wi.dependencies={lanes:0,firstContext:i}}else os=os.next=i;return l}var Kr=null;function Mi(i){Kr===null?Kr=[i]:Kr.push(i)}function zr(i,l,d,g){var w=l.interleaved;return w===null?(d.next=d,Mi(l)):(d.next=w.next,w.next=d),l.interleaved=d,Qr(i,g)}function Qr(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Xs=!1;function ki(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ca(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function zs(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function $s(i,l,d){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Dr&2)!==0){var w=g.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),g.pending=l,Qr(i,d)}return w=g.interleaved,w===null?(l.next=l,Mi(g)):(l.next=w.next,w.next=l),g.interleaved=l,Qr(i,d)}function Bi(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,Un(i,d)}}function Zr(i,l){var d=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var w=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var Z={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?w=_=Z:_=_.next=Z,d=d.next}while(d!==null);_===null?w=_=l:_=_.next=l}else w=_=l;d={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,effects:g.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function qi(i,l,d,g){var w=i.updateQueue;Xs=!1;var _=w.firstBaseUpdate,Z=w.lastBaseUpdate,je=w.shared.pending;if(je!==null){w.shared.pending=null;var Ee=je,Qe=Ee.next;Ee.next=null,Z===null?_=Qe:Z.next=Qe,Z=Ee;var vt=i.alternate;vt!==null&&(vt=vt.updateQueue,je=vt.lastBaseUpdate,je!==Z&&(je===null?vt.firstBaseUpdate=Qe:je.next=Qe,vt.lastBaseUpdate=Ee))}if(_!==null){var Nt=w.baseState;Z=0,vt=Qe=Ee=null,je=_;do{var pt=je.lane,Ht=je.eventTime;if((g&pt)===pt){vt!==null&&(vt=vt.next={eventTime:Ht,lane:0,tag:je.tag,payload:je.payload,callback:je.callback,next:null});e:{var tn=i,cn=je;switch(pt=l,Ht=d,cn.tag){case 1:if(tn=cn.payload,typeof tn=="function"){Nt=tn.call(Ht,Nt,pt);break e}Nt=tn;break e;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=cn.payload,pt=typeof tn=="function"?tn.call(Ht,Nt,pt):tn,pt==null)break e;Nt=Re({},Nt,pt);break e;case 2:Xs=!0}}je.callback!==null&&je.lane!==0&&(i.flags|=64,pt=w.effects,pt===null?w.effects=[je]:pt.push(je))}else Ht={eventTime:Ht,lane:pt,tag:je.tag,payload:je.payload,callback:je.callback,next:null},vt===null?(Qe=vt=Ht,Ee=Nt):vt=vt.next=Ht,Z|=pt;if(je=je.next,je===null){if(je=w.shared.pending,je===null)break;pt=je,je=pt.next,pt.next=null,w.lastBaseUpdate=pt,w.shared.pending=null}}while(!0);if(vt===null&&(Ee=Nt),w.baseState=Ee,w.firstBaseUpdate=Qe,w.lastBaseUpdate=vt,l=w.shared.interleaved,l!==null){w=l;do Z|=w.lane,w=w.next;while(w!==l)}else _===null&&(w.shared.lanes=0);Lu|=Z,i.lanes=Z,i.memoizedState=Nt}}function Ma(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],w=g.callback;if(w!==null){if(g.callback=null,g=d,typeof w!="function")throw Error(n(191,w));w.call(g)}}}var no={},Ni=to(no),Vs=to(no),Al=to(no);function Ho(i){if(i===no)throw Error(n(174));return i}function Dc(i,l){switch(Ur(Al,l),Ur(Vs,i),Ur(Ni,no),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:_e(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=_e(l,i)}Br(Ni),Ur(Ni,l)}function jo(){Br(Ni),Br(Vs),Br(Al)}function ep(i){Ho(Al.current);var l=Ho(Ni.current),d=_e(l,i.type);l!==d&&(Ur(Vs,i),Ur(Ni,d))}function Rf(i){Vs.current===i&&(Br(Ni),Br(Vs))}var ts=to(0);function ro(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var If=[];function Ff(){for(var i=0;i<If.length;i++)If[i]._workInProgressVersionPrimary=null;If.length=0}var fd=$.ReactCurrentDispatcher,hd=$.ReactCurrentBatchConfig,Co=0,cs=null,Js=null,Hs=null,Rc=!1,Wo=!1,Ic=0,bg=0;function li(){throw Error(n(321))}function pd(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!As(i[d],l[d]))return!1;return!0}function ku(i,l,d,g,w,_){if(Co=_,cs=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,fd.current=i===null||i.memoizedState===null?Z4:Y4,i=d(g,w),Wo){_=0;do{if(Wo=!1,Ic=0,25<=_)throw Error(n(301));_+=1,Hs=Js=null,l.updateQueue=null,fd.current=X4,i=d(g,w)}while(Wo)}if(fd.current=ip,l=Js!==null&&Js.next!==null,Co=0,Hs=Js=cs=null,Rc=!1,l)throw Error(n(300));return i}function Ao(){var i=Ic!==0;return Ic=0,i}function so(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?cs.memoizedState=Hs=i:Hs=Hs.next=i,Hs}function ja(){if(Js===null){var i=cs.alternate;i=i!==null?i.memoizedState:null}else i=Js.next;var l=Hs===null?cs.memoizedState:Hs.next;if(l!==null)Hs=l,Js=i;else{if(i===null)throw Error(n(310));Js=i,i={memoizedState:Js.memoizedState,baseState:Js.baseState,baseQueue:Js.baseQueue,queue:Js.queue,next:null},Hs===null?cs.memoizedState=Hs=i:Hs=Hs.next=i}return Hs}function Tu(i,l){return typeof l=="function"?l(i):l}function md(i){var l=ja(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=Js,w=g.baseQueue,_=d.pending;if(_!==null){if(w!==null){var Z=w.next;w.next=_.next,_.next=Z}g.baseQueue=w=_,d.pending=null}if(w!==null){_=w.next,g=g.baseState;var je=Z=null,Ee=null,Qe=_;do{var vt=Qe.lane;if((Co&vt)===vt)Ee!==null&&(Ee=Ee.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),g=Qe.hasEagerState?Qe.eagerState:i(g,Qe.action);else{var Nt={lane:vt,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};Ee===null?(je=Ee=Nt,Z=g):Ee=Ee.next=Nt,cs.lanes|=vt,Lu|=vt}Qe=Qe.next}while(Qe!==null&&Qe!==_);Ee===null?Z=g:Ee.next=je,As(g,l.memoizedState)||(Ba=!0),l.memoizedState=g,l.baseState=Z,l.baseQueue=Ee,d.lastRenderedState=g}if(i=d.interleaved,i!==null){w=i;do _=w.lane,cs.lanes|=_,Lu|=_,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function _l(i){var l=ja(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=d.dispatch,w=d.pending,_=l.memoizedState;if(w!==null){d.pending=null;var Z=w=w.next;do _=i(_,Z.action),Z=Z.next;while(Z!==w);As(_,l.memoizedState)||(Ba=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,g]}function tp(){}function Of(i,l){var d=cs,g=ja(),w=l(),_=!As(g.memoizedState,w);if(_&&(g.memoizedState=w,Ba=!0),g=g.queue,xd(rp.bind(null,d,g,i),[i]),g.getSnapshot!==l||_||Hs!==null&&Hs.memoizedState.tag&1){if(d.flags|=2048,Ca(9,Mf.bind(null,d,g,w,l),void 0,null),Ui===null)throw Error(n(349));(Co&30)!==0||np(d,l,w)}return w}function np(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=cs.updateQueue,l===null?(l={lastEffect:null,stores:null},cs.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function Mf(i,l,d,g){l.value=d,l.getSnapshot=g,Fc(l)&&gd(i)}function rp(i,l,d){return d(function(){Fc(l)&&gd(i)})}function Fc(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!As(i,d)}catch{return!0}}function gd(i){var l=Qr(i,1);l!==null&&Yo(l,i,1,-1)}function Eu(i){var l=so();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:i},l.queue=i,i=i.dispatch=Q4.bind(null,cs,i),[l.memoizedState,i]}function Ca(i,l,d,g){return i={tag:i,create:l,destroy:d,deps:g,next:null},l=cs.updateQueue,l===null?(l={lastEffect:null,stores:null},cs.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(g=d.next,d.next=i,i.next=g,l.lastEffect=i)),i}function Go(){return ja().memoizedState}function io(i,l,d,g){var w=so();cs.flags|=i,w.memoizedState=Ca(1|l,d,void 0,g===void 0?null:g)}function ic(i,l,d,g){var w=ja();g=g===void 0?null:g;var _=void 0;if(Js!==null){var Z=Js.memoizedState;if(_=Z.destroy,g!==null&&pd(g,Z.deps)){w.memoizedState=Ca(l,d,_,g);return}}cs.flags|=i,w.memoizedState=Ca(1|l,d,_,g)}function vd(i,l){return io(8390656,8,i,l)}function xd(i,l){return ic(2048,8,i,l)}function sp(i,l){return ic(4,2,i,l)}function yd(i,l){return ic(4,4,i,l)}function bd(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function H1(i,l,d){return d=d!=null?d.concat([i]):null,ic(4,4,bd.bind(null,l,i),d)}function wg(){}function W1(i,l){var d=ja();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&pd(l,g[1])?g[0]:(d.memoizedState=[i,l],i)}function G1(i,l){var d=ja();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&pd(l,g[1])?g[0]:(i=i(),d.memoizedState=[i,l],i)}function K1(i,l,d){return(Co&21)===0?(i.baseState&&(i.baseState=!1,Ba=!0),i.memoizedState=d):(As(d,l)||(d=Ft(),cs.lanes|=d,Lu|=d,i.baseState=!0),l)}function G4(i,l){var d=zt;zt=d!==0&&4>d?d:4,i(!0);var g=hd.transition;hd.transition={};try{i(!1),l()}finally{zt=d,hd.transition=g}}function Q1(){return ja().memoizedState}function K4(i,l,d){var g=qc(i);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},Z1(i))Y1(l,d);else if(d=zr(i,l,d,g),d!==null){var w=_a();Yo(d,i,g,w),X1(d,l,g)}}function Q4(i,l,d){var g=qc(i),w={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(Z1(i))Y1(l,w);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var Z=l.lastRenderedState,je=_(Z,d);if(w.hasEagerState=!0,w.eagerState=je,As(je,Z)){var Ee=l.interleaved;Ee===null?(w.next=w,Mi(l)):(w.next=Ee.next,Ee.next=w),l.interleaved=w;return}}catch{}d=zr(i,l,w,g),d!==null&&(w=_a(),Yo(d,i,g,w),X1(d,l,g))}}function Z1(i){var l=i.alternate;return i===cs||l!==null&&l===cs}function Y1(i,l){Wo=Rc=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function X1(i,l,d){if((d&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,Un(i,d)}}var ip={readContext:Ts,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},Z4={readContext:Ts,useCallback:function(i,l){return so().memoizedState=[i,l===void 0?null:l],i},useContext:Ts,useEffect:vd,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,io(4194308,4,bd.bind(null,l,i),d)},useLayoutEffect:function(i,l){return io(4194308,4,i,l)},useInsertionEffect:function(i,l){return io(4,2,i,l)},useMemo:function(i,l){var d=so();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var g=so();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=K4.bind(null,cs,i),[g.memoizedState,i]},useRef:function(i){var l=so();return i={current:i},l.memoizedState=i},useState:Eu,useDebugValue:wg,useDeferredValue:function(i){return so().memoizedState=i},useTransition:function(){var i=Eu(!1),l=i[0];return i=G4.bind(null,i[1]),so().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var g=cs,w=so();if(at){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Ui===null)throw Error(n(349));(Co&30)!==0||np(g,l,d)}w.memoizedState=d;var _={value:d,getSnapshot:l};return w.queue=_,vd(rp.bind(null,g,_,i),[i]),g.flags|=2048,Ca(9,Mf.bind(null,g,_,d,l),void 0,null),d},useId:function(){var i=so(),l=Ui.identifierPrefix;if(at){var d=me,g=$e;d=(g&~(1<<32-Xe(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Ic++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=bg++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},Y4={readContext:Ts,useCallback:W1,useContext:Ts,useEffect:xd,useImperativeHandle:H1,useInsertionEffect:sp,useLayoutEffect:yd,useMemo:G1,useReducer:md,useRef:Go,useState:function(){return md(Tu)},useDebugValue:wg,useDeferredValue:function(i){var l=ja();return K1(l,Js.memoizedState,i)},useTransition:function(){var i=md(Tu)[0],l=ja().memoizedState;return[i,l]},useMutableSource:tp,useSyncExternalStore:Of,useId:Q1,unstable_isNewReconciler:!1},X4={readContext:Ts,useCallback:W1,useContext:Ts,useEffect:xd,useImperativeHandle:H1,useInsertionEffect:sp,useLayoutEffect:yd,useMemo:G1,useReducer:_l,useRef:Go,useState:function(){return _l(Tu)},useDebugValue:wg,useDeferredValue:function(i){var l=ja();return Js===null?l.memoizedState=i:K1(l,Js.memoizedState,i)},useTransition:function(){var i=_l(Tu)[0],l=ja().memoizedState;return[i,l]},useMutableSource:tp,useSyncExternalStore:Of,useId:Q1,unstable_isNewReconciler:!1};function Ko(i,l){if(i&&i.defaultProps){l=Re({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function Ng(i,l,d,g){l=i.memoizedState,d=d(g,l),d=d==null?l:Re({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var ap={isMounted:function(i){return(i=i._reactInternals)?hr(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var g=_a(),w=qc(i),_=zs(g,w);_.payload=l,d!=null&&(_.callback=d),l=$s(i,_,w),l!==null&&(Yo(l,i,w,g),Bi(l,i,w))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var g=_a(),w=qc(i),_=zs(g,w);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=$s(i,_,w),l!==null&&(Yo(l,i,w,g),Bi(l,i,w))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=_a(),g=qc(i),w=zs(d,g);w.tag=2,l!=null&&(w.callback=l),l=$s(i,w,g),l!==null&&(Yo(l,i,g,d),Bi(l,i,g))}};function J1(i,l,d,g,w,_,Z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,_,Z):l.prototype&&l.prototype.isPureReactComponent?!sa(d,g)||!sa(w,_):!0}function ex(i,l,d){var g=!1,w=Cl,_=l.contextType;return typeof _=="object"&&_!==null?_=Ts(_):(w=la(l)?rc:Pi.current,g=l.contextTypes,_=(g=g!=null)?Lc(i,w):Cl),l=new l(d,_),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ap,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=_),l}function tx(i,l,d,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==i&&ap.enqueueReplaceState(l,l.state,null)}function Sg(i,l,d,g){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},ki(i);var _=l.contextType;typeof _=="object"&&_!==null?w.context=Ts(_):(_=la(l)?rc:Pi.current,w.context=Lc(i,_)),w.state=i.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Ng(i,l,_,d),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(l=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),l!==w.state&&ap.enqueueReplaceState(w,w.state,null),qi(i,d,w,g),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function wd(i,l){try{var d="",g=l;do d+=ve(g),g=g.return;while(g);var w=d}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:l,stack:w,digest:null}}function jg(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function Cg(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var J4=typeof WeakMap=="function"?WeakMap:Map;function nx(i,l,d){d=zs(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){hp||(hp=!0,qg=g),Cg(i,l)},d}function rx(i,l,d){d=zs(-1,d),d.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var w=l.value;d.payload=function(){return g(w)},d.callback=function(){Cg(i,l)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){Cg(i,l),typeof g!="function"&&(Mc===null?Mc=new Set([this]):Mc.add(this));var Z=l.stack;this.componentDidCatch(l.value,{componentStack:Z!==null?Z:""})}),d}function sx(i,l,d){var g=i.pingCache;if(g===null){g=i.pingCache=new J4;var w=new Set;g.set(l,w)}else w=g.get(l),w===void 0&&(w=new Set,g.set(l,w));w.has(d)||(w.add(d),i=h3.bind(null,i,l,d),l.then(i,i))}function ix(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function ax(i,l,d,g,w){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=zs(-1,1),l.tag=2,$s(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var e3=$.ReactCurrentOwner,Ba=!1;function Aa(i,l,d,g){l.child=i===null?vs(l,null,d,g):Ys(l,i.child,d,g)}function ox(i,l,d,g,w){d=d.render;var _=l.ref;return ks(l,w),g=ku(i,l,d,g,_,w),d=Ao(),i!==null&&!Ba?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~w,ac(i,l,w)):(at&&d&&rt(l),l.flags|=1,Aa(i,l,g,w),l.child)}function lx(i,l,d,g,w){if(i===null){var _=d.type;return typeof _=="function"&&!Gg(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=_,cx(i,l,_,g,w)):(i=yp(d.type,null,g,l,l.mode,w),i.ref=l.ref,i.return=l,l.child=i)}if(_=i.child,(i.lanes&w)===0){var Z=_.memoizedProps;if(d=d.compare,d=d!==null?d:sa,d(Z,g)&&i.ref===l.ref)return ac(i,l,w)}return l.flags|=1,i=zc(_,g),i.ref=l.ref,i.return=l,l.child=i}function cx(i,l,d,g,w){if(i!==null){var _=i.memoizedProps;if(sa(_,g)&&i.ref===l.ref)if(Ba=!1,l.pendingProps=g=_,(i.lanes&w)!==0)(i.flags&131072)!==0&&(Ba=!0);else return l.lanes=i.lanes,ac(i,l,w)}return Ag(i,l,d,g,w)}function ux(i,l,d){var g=l.pendingProps,w=g.children,_=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(Sd,ao),ao|=d;else{if((d&1073741824)===0)return i=_!==null?_.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Ur(Sd,ao),ao|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:d,Ur(Sd,ao),ao|=g}else _!==null?(g=_.baseLanes|d,l.memoizedState=null):g=d,Ur(Sd,ao),ao|=g;return Aa(i,l,w,d),l.child}function dx(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Ag(i,l,d,g,w){var _=la(d)?rc:Pi.current;return _=Lc(l,_),ks(l,w),d=ku(i,l,d,g,_,w),g=Ao(),i!==null&&!Ba?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~w,ac(i,l,w)):(at&&g&&rt(l),l.flags|=1,Aa(i,l,d,w),l.child)}function fx(i,l,d,g,w){if(la(d)){var _=!0;sc(l)}else _=!1;if(ks(l,w),l.stateNode===null)lp(i,l),ex(l,d,g),Sg(l,d,g,w),g=!0;else if(i===null){var Z=l.stateNode,je=l.memoizedProps;Z.props=je;var Ee=Z.context,Qe=d.contextType;typeof Qe=="object"&&Qe!==null?Qe=Ts(Qe):(Qe=la(d)?rc:Pi.current,Qe=Lc(l,Qe));var vt=d.getDerivedStateFromProps,Nt=typeof vt=="function"||typeof Z.getSnapshotBeforeUpdate=="function";Nt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(je!==g||Ee!==Qe)&&tx(l,Z,g,Qe),Xs=!1;var pt=l.memoizedState;Z.state=pt,qi(l,g,Z,w),Ee=l.memoizedState,je!==g||pt!==Ee||oa.current||Xs?(typeof vt=="function"&&(Ng(l,d,vt,g),Ee=l.memoizedState),(je=Xs||J1(l,d,je,g,pt,Ee,Qe))?(Nt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(l.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Ee),Z.props=g,Z.state=Ee,Z.context=Qe,g=je):(typeof Z.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{Z=l.stateNode,ca(i,l),je=l.memoizedProps,Qe=l.type===l.elementType?je:Ko(l.type,je),Z.props=Qe,Nt=l.pendingProps,pt=Z.context,Ee=d.contextType,typeof Ee=="object"&&Ee!==null?Ee=Ts(Ee):(Ee=la(d)?rc:Pi.current,Ee=Lc(l,Ee));var Ht=d.getDerivedStateFromProps;(vt=typeof Ht=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(je!==Nt||pt!==Ee)&&tx(l,Z,g,Ee),Xs=!1,pt=l.memoizedState,Z.state=pt,qi(l,g,Z,w);var tn=l.memoizedState;je!==Nt||pt!==tn||oa.current||Xs?(typeof Ht=="function"&&(Ng(l,d,Ht,g),tn=l.memoizedState),(Qe=Xs||J1(l,d,Qe,g,pt,tn,Ee)||!1)?(vt||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(g,tn,Ee),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(g,tn,Ee)),typeof Z.componentDidUpdate=="function"&&(l.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof Z.componentDidUpdate!="function"||je===i.memoizedProps&&pt===i.memoizedState||(l.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||je===i.memoizedProps&&pt===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=tn),Z.props=g,Z.state=tn,Z.context=Ee,g=Qe):(typeof Z.componentDidUpdate!="function"||je===i.memoizedProps&&pt===i.memoizedState||(l.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||je===i.memoizedProps&&pt===i.memoizedState||(l.flags|=1024),g=!1)}return _g(i,l,d,g,_,w)}function _g(i,l,d,g,w,_){dx(i,l);var Z=(l.flags&128)!==0;if(!g&&!Z)return w&&Jh(l,d,!1),ac(i,l,_);g=l.stateNode,e3.current=l;var je=Z&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&Z?(l.child=Ys(l,i.child,null,_),l.child=Ys(l,null,je,_)):Aa(i,l,je,_),l.memoizedState=g.state,w&&Jh(l,d,!0),l.child}function hx(i){var l=i.stateNode;l.pendingContext?Xh(i,l.pendingContext,l.pendingContext!==l.context):l.context&&Xh(i,l.context,!1),Dc(i,l.containerInfo)}function px(i,l,d,g,w){return Qt(),kt(w),l.flags|=256,Aa(i,l,d,g),l.child}var Pg={dehydrated:null,treeContext:null,retryLane:0};function kg(i){return{baseLanes:i,cachePool:null,transitions:null}}function mx(i,l,d){var g=l.pendingProps,w=ts.current,_=!1,Z=(l.flags&128)!==0,je;if((je=Z)||(je=i!==null&&i.memoizedState===null?!1:(w&2)!==0),je?(_=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Ur(ts,w&1),i===null)return en(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(Z=g.children,i=g.fallback,_?(g=l.mode,_=l.child,Z={mode:"hidden",children:Z},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=Z):_=bp(Z,g,0,null),i=Fu(i,g,d,null),_.return=l,i.return=l,_.sibling=i,l.child=_,l.child.memoizedState=kg(d),l.memoizedState=Pg,i):Tg(l,Z));if(w=i.memoizedState,w!==null&&(je=w.dehydrated,je!==null))return t3(i,l,Z,g,je,w,d);if(_){_=g.fallback,Z=l.mode,w=i.child,je=w.sibling;var Ee={mode:"hidden",children:g.children};return(Z&1)===0&&l.child!==w?(g=l.child,g.childLanes=0,g.pendingProps=Ee,l.deletions=null):(g=zc(w,Ee),g.subtreeFlags=w.subtreeFlags&14680064),je!==null?_=zc(je,_):(_=Fu(_,Z,d,null),_.flags|=2),_.return=l,g.return=l,g.sibling=_,l.child=g,g=_,_=l.child,Z=i.child.memoizedState,Z=Z===null?kg(d):{baseLanes:Z.baseLanes|d,cachePool:null,transitions:Z.transitions},_.memoizedState=Z,_.childLanes=i.childLanes&~d,l.memoizedState=Pg,g}return _=i.child,i=_.sibling,g=zc(_,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=g,l.memoizedState=null,g}function Tg(i,l){return l=bp({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function op(i,l,d,g){return g!==null&&kt(g),Ys(l,i.child,null,d),i=Tg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function t3(i,l,d,g,w,_,Z){if(d)return l.flags&256?(l.flags&=-257,g=jg(Error(n(422))),op(i,l,Z,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(_=g.fallback,w=l.mode,g=bp({mode:"visible",children:g.children},w,0,null),_=Fu(_,w,Z,null),_.flags|=2,g.return=l,_.return=l,g.sibling=_,l.child=g,(l.mode&1)!==0&&Ys(l,i.child,null,Z),l.child.memoizedState=kg(Z),l.memoizedState=Pg,_);if((l.mode&1)===0)return op(i,l,Z,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var je=g.dgst;return g=je,_=Error(n(419)),g=jg(_,g,void 0),op(i,l,Z,g)}if(je=(Z&i.childLanes)!==0,Ba||je){if(g=Ui,g!==null){switch(Z&-Z){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|Z))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,Qr(i,w),Yo(g,i,w,-1))}return Wg(),g=jg(Error(n(421))),op(i,l,Z,g)}return w.data==="$?"?(l.flags|=128,l.child=i.child,l=p3.bind(null,i),w._reactRetry=l,null):(i=_.treeContext,tt=Xi(w.nextSibling),et=l,at=!0,ct=null,i!==null&&(ce[pe++]=$e,ce[pe++]=me,ce[pe++]=Te,$e=i.id,me=i.overflow,Te=l),l=Tg(l,g.children),l.flags|=4096,l)}function gx(i,l,d){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),Lr(i.return,l,d)}function Eg(i,l,d,g,w){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:w}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=d,_.tailMode=w)}function vx(i,l,d){var g=l.pendingProps,w=g.revealOrder,_=g.tail;if(Aa(i,l,g.children,d),g=ts.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gx(i,d,l);else if(i.tag===19)gx(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Ur(ts,g),(l.mode&1)===0)l.memoizedState=null;else switch(w){case"forwards":for(d=l.child,w=null;d!==null;)i=d.alternate,i!==null&&ro(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=l.child,l.child=null):(w=d.sibling,d.sibling=null),Eg(l,!1,w,d,_);break;case"backwards":for(d=null,w=l.child,l.child=null;w!==null;){if(i=w.alternate,i!==null&&ro(i)===null){l.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}Eg(l,!0,d,null,_);break;case"together":Eg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function lp(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function ac(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Lu|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=zc(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=zc(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function n3(i,l,d){switch(l.tag){case 3:hx(l),Qt();break;case 5:ep(l);break;case 1:la(l.type)&&sc(l);break;case 4:Dc(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,w=l.memoizedProps.value;Ur(oi,g._currentValue),g._currentValue=w;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Ur(ts,ts.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?mx(i,l,d):(Ur(ts,ts.current&1),i=ac(i,l,d),i!==null?i.sibling:null);Ur(ts,ts.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(i.flags&128)!==0){if(g)return vx(i,l,d);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Ur(ts,ts.current),g)break;return null;case 22:case 23:return l.lanes=0,ux(i,l,d)}return ac(i,l,d)}var xx,Lg,yx,bx;xx=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Lg=function(){},yx=function(i,l,d,g){var w=i.memoizedProps;if(w!==g){i=l.stateNode,Ho(Ni.current);var _=null;switch(d){case"input":w=_t(i,w),g=_t(i,g),_=[];break;case"select":w=Re({},w,{value:void 0}),g=Re({},g,{value:void 0}),_=[];break;case"textarea":w=U(i,w),g=U(i,g),_=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=kc)}bn(d,g);var Z;d=null;for(Qe in w)if(!g.hasOwnProperty(Qe)&&w.hasOwnProperty(Qe)&&w[Qe]!=null)if(Qe==="style"){var je=w[Qe];for(Z in je)je.hasOwnProperty(Z)&&(d||(d={}),d[Z]="")}else Qe!=="dangerouslySetInnerHTML"&&Qe!=="children"&&Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&Qe!=="autoFocus"&&(a.hasOwnProperty(Qe)?_||(_=[]):(_=_||[]).push(Qe,null));for(Qe in g){var Ee=g[Qe];if(je=w?.[Qe],g.hasOwnProperty(Qe)&&Ee!==je&&(Ee!=null||je!=null))if(Qe==="style")if(je){for(Z in je)!je.hasOwnProperty(Z)||Ee&&Ee.hasOwnProperty(Z)||(d||(d={}),d[Z]="");for(Z in Ee)Ee.hasOwnProperty(Z)&&je[Z]!==Ee[Z]&&(d||(d={}),d[Z]=Ee[Z])}else d||(_||(_=[]),_.push(Qe,d)),d=Ee;else Qe==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,je=je?je.__html:void 0,Ee!=null&&je!==Ee&&(_=_||[]).push(Qe,Ee)):Qe==="children"?typeof Ee!="string"&&typeof Ee!="number"||(_=_||[]).push(Qe,""+Ee):Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&(a.hasOwnProperty(Qe)?(Ee!=null&&Qe==="onScroll"&&Gr("scroll",i),_||je===Ee||(_=[])):(_=_||[]).push(Qe,Ee))}d&&(_=_||[]).push("style",d);var Qe=_;(l.updateQueue=Qe)&&(l.flags|=4)}},bx=function(i,l,d,g){d!==g&&(l.flags|=4)};function Bf(i,l){if(!at)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function ua(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,g=0;if(l)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=g,i.childLanes=d,l}function r3(i,l,d){var g=l.pendingProps;switch(He(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ua(l),null;case 1:return la(l.type)&&dd(),ua(l),null;case 3:return g=l.stateNode,jo(),Br(oa),Br(Pi),Ff(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Ps(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ct!==null&&($g(ct),ct=null))),Lg(i,l),ua(l),null;case 5:Rf(l);var w=Ho(Al.current);if(d=l.type,i!==null&&l.stateNode!=null)yx(i,l,d,g,w),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return ua(l),null}if(i=Ho(Ni.current),Ps(l)){g=l.stateNode,d=l.type;var _=l.memoizedProps;switch(g[So]=l,g[Tc]=_,i=(l.mode&1)!==0,d){case"dialog":Gr("cancel",g),Gr("close",g);break;case"iframe":case"object":case"embed":Gr("load",g);break;case"video":case"audio":for(w=0;w<Sl.length;w++)Gr(Sl[w],g);break;case"source":Gr("error",g);break;case"img":case"image":case"link":Gr("error",g),Gr("load",g);break;case"details":Gr("toggle",g);break;case"input":ue(g,_),Gr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},Gr("invalid",g);break;case"textarea":B(g,_),Gr("invalid",g)}bn(d,_),w=null;for(var Z in _)if(_.hasOwnProperty(Z)){var je=_[Z];Z==="children"?typeof je=="string"?g.textContent!==je&&(_.suppressHydrationWarning!==!0&&ud(g.textContent,je,i),w=["children",je]):typeof je=="number"&&g.textContent!==""+je&&(_.suppressHydrationWarning!==!0&&ud(g.textContent,je,i),w=["children",""+je]):a.hasOwnProperty(Z)&&je!=null&&Z==="onScroll"&&Gr("scroll",g)}switch(d){case"input":Ze(g),Jt(g,_,!0);break;case"textarea":Ze(g),fe(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=kc)}g=w,l.updateQueue=g,g!==null&&(l.flags|=4)}else{Z=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Pe(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=Z.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=Z.createElement(d,{is:g.is}):(i=Z.createElement(d),d==="select"&&(Z=i,g.multiple?Z.multiple=!0:g.size&&(Z.size=g.size))):i=Z.createElementNS(i,d),i[So]=l,i[Tc]=g,xx(i,l,!1,!1),l.stateNode=i;e:{switch(Z=Ct(d,g),d){case"dialog":Gr("cancel",i),Gr("close",i),w=g;break;case"iframe":case"object":case"embed":Gr("load",i),w=g;break;case"video":case"audio":for(w=0;w<Sl.length;w++)Gr(Sl[w],i);w=g;break;case"source":Gr("error",i),w=g;break;case"img":case"image":case"link":Gr("error",i),Gr("load",i),w=g;break;case"details":Gr("toggle",i),w=g;break;case"input":ue(i,g),w=_t(i,g),Gr("invalid",i);break;case"option":w=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},w=Re({},g,{value:void 0}),Gr("invalid",i);break;case"textarea":B(i,g),w=U(i,g),Gr("invalid",i);break;default:w=g}bn(d,w),je=w;for(_ in je)if(je.hasOwnProperty(_)){var Ee=je[_];_==="style"?mn(i,Ee):_==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,Ee!=null&&qe(i,Ee)):_==="children"?typeof Ee=="string"?(d!=="textarea"||Ee!=="")&&wt(i,Ee):typeof Ee=="number"&&wt(i,""+Ee):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?Ee!=null&&_==="onScroll"&&Gr("scroll",i):Ee!=null&&R(i,_,Ee,Z))}switch(d){case"input":Ze(i),Jt(i,g,!1);break;case"textarea":Ze(i),fe(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Le(g.value));break;case"select":i.multiple=!!g.multiple,_=g.value,_!=null?q(i,!!g.multiple,_,!1):g.defaultValue!=null&&q(i,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=kc)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return ua(l),null;case 6:if(i&&l.stateNode!=null)bx(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Ho(Al.current),Ho(Ni.current),Ps(l)){if(g=l.stateNode,d=l.memoizedProps,g[So]=l,(_=g.nodeValue!==d)&&(i=et,i!==null))switch(i.tag){case 3:ud(g.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ud(g.nodeValue,d,(i.mode&1)!==0)}_&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[So]=l,l.stateNode=g}return ua(l),null;case 13:if(Br(ts),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(at&&tt!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Yn(),Qt(),l.flags|=98560,_=!1;else if(_=Ps(l),g!==null&&g.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[So]=l}else Qt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ua(l),_=!1}else ct!==null&&($g(ct),ct=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(ts.current&1)!==0?Ti===0&&(Ti=3):Wg())),l.updateQueue!==null&&(l.flags|=4),ua(l),null);case 4:return jo(),Lg(i,l),i===null&&Jl(l.stateNode.containerInfo),ua(l),null;case 10:return ls(l.type._context),ua(l),null;case 17:return la(l.type)&&dd(),ua(l),null;case 19:if(Br(ts),_=l.memoizedState,_===null)return ua(l),null;if(g=(l.flags&128)!==0,Z=_.rendering,Z===null)if(g)Bf(_,!1);else{if(Ti!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(Z=ro(i),Z!==null){for(l.flags|=128,Bf(_,!1),g=Z.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)_=d,i=g,_.flags&=14680066,Z=_.alternate,Z===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=Z.childLanes,_.lanes=Z.lanes,_.child=Z.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=Z.memoizedProps,_.memoizedState=Z.memoizedState,_.updateQueue=Z.updateQueue,_.type=Z.type,i=Z.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ur(ts,ts.current&1|2),l.child}i=i.sibling}_.tail!==null&&wr()>jd&&(l.flags|=128,g=!0,Bf(_,!1),l.lanes=4194304)}else{if(!g)if(i=ro(Z),i!==null){if(l.flags|=128,g=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Bf(_,!0),_.tail===null&&_.tailMode==="hidden"&&!Z.alternate&&!at)return ua(l),null}else 2*wr()-_.renderingStartTime>jd&&d!==1073741824&&(l.flags|=128,g=!0,Bf(_,!1),l.lanes=4194304);_.isBackwards?(Z.sibling=l.child,l.child=Z):(d=_.last,d!==null?d.sibling=Z:l.child=Z,_.last=Z)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=wr(),l.sibling=null,d=ts.current,Ur(ts,g?d&1|2:d&1),l):(ua(l),null);case 22:case 23:return Hg(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(ao&1073741824)!==0&&(ua(l),l.subtreeFlags&6&&(l.flags|=8192)):ua(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function s3(i,l){switch(He(l),l.tag){case 1:return la(l.type)&&dd(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return jo(),Br(oa),Br(Pi),Ff(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Rf(l),null;case 13:if(Br(ts),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Qt()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Br(ts),null;case 4:return jo(),null;case 10:return ls(l.type._context),null;case 22:case 23:return Hg(),null;case 24:return null;default:return null}}var cp=!1,da=!1,i3=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Nd(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){ei(i,l,g)}else d.current=null}function Dg(i,l,d){try{d()}catch(g){ei(i,l,g)}}var wx=!1;function a3(i,l){if(Au=ba,i=Zs(),eo(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var Z=0,je=-1,Ee=-1,Qe=0,vt=0,Nt=i,pt=null;t:for(;;){for(var Ht;Nt!==d||w!==0&&Nt.nodeType!==3||(je=Z+w),Nt!==_||g!==0&&Nt.nodeType!==3||(Ee=Z+g),Nt.nodeType===3&&(Z+=Nt.nodeValue.length),(Ht=Nt.firstChild)!==null;)pt=Nt,Nt=Ht;for(;;){if(Nt===i)break t;if(pt===d&&++Qe===w&&(je=Z),pt===_&&++vt===g&&(Ee=Z),(Ht=Nt.nextSibling)!==null)break;Nt=pt,pt=Nt.parentNode}Nt=Ht}d=je===-1||Ee===-1?null:{start:je,end:Ee}}else d=null}d=d||{start:0,end:0}}else d=null;for(tc={focusedElem:i,selectionRange:d},ba=!1,Xt=l;Xt!==null;)if(l=Xt,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Xt=i;else for(;Xt!==null;){l=Xt;try{var tn=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(tn!==null){var cn=tn.memoizedProps,ci=tn.memoizedState,Ve=l.stateNode,Fe=Ve.getSnapshotBeforeUpdate(l.elementType===l.type?cn:Ko(l.type,cn),ci);Ve.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:var We=l.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Pt){ei(l,l.return,Pt)}if(i=l.sibling,i!==null){i.return=l.return,Xt=i;break}Xt=l.return}return tn=wx,wx=!1,tn}function qf(i,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&i)===i){var _=w.destroy;w.destroy=void 0,_!==void 0&&Dg(l,d,_)}w=w.next}while(w!==g)}}function up(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Rg(i){var l=i.ref;if(l!==null){var d=i.stateNode;i.tag,i=d,typeof l=="function"?l(i):l.current=i}}function Nx(i){var l=i.alternate;l!==null&&(i.alternate=null,Nx(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[So],delete l[Tc],delete l[aa],delete l[xg],delete l[yg])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Sx(i){return i.tag===5||i.tag===3||i.tag===4}function jx(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Sx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ig(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=kc));else if(g!==4&&(i=i.child,i!==null))for(Ig(i,l,d),i=i.sibling;i!==null;)Ig(i,l,d),i=i.sibling}function Fg(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Fg(i,l,d),i=i.sibling;i!==null;)Fg(i,l,d),i=i.sibling}var Ji=null,Qo=!1;function Oc(i,l,d){for(d=d.child;d!==null;)Cx(i,l,d),d=d.sibling}function Cx(i,l,d){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Zt,d)}catch{}switch(d.tag){case 5:da||Nd(d,l);case 6:var g=Ji,w=Qo;Ji=null,Oc(i,l,d),Ji=g,Qo=w,Ji!==null&&(Qo?(i=Ji,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Ji.removeChild(d.stateNode));break;case 18:Ji!==null&&(Qo?(i=Ji,d=d.stateNode,i.nodeType===8?Ef(i.parentNode,d):i.nodeType===1&&Ef(i,d),Za(i)):Ef(Ji,d.stateNode));break;case 4:g=Ji,w=Qo,Ji=d.stateNode.containerInfo,Qo=!0,Oc(i,l,d),Ji=g,Qo=w;break;case 0:case 11:case 14:case 15:if(!da&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var _=w,Z=_.destroy;_=_.tag,Z!==void 0&&((_&2)!==0||(_&4)!==0)&&Dg(d,l,Z),w=w.next}while(w!==g)}Oc(i,l,d);break;case 1:if(!da&&(Nd(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(je){ei(d,l,je)}Oc(i,l,d);break;case 21:Oc(i,l,d);break;case 22:d.mode&1?(da=(g=da)||d.memoizedState!==null,Oc(i,l,d),da=g):Oc(i,l,d);break;default:Oc(i,l,d)}}function Ax(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new i3),l.forEach(function(g){var w=m3.bind(null,i,g);d.has(g)||(d.add(g),g.then(w,w))})}}function Zo(i,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var w=d[g];try{var _=i,Z=l,je=Z;e:for(;je!==null;){switch(je.tag){case 5:Ji=je.stateNode,Qo=!1;break e;case 3:Ji=je.stateNode.containerInfo,Qo=!0;break e;case 4:Ji=je.stateNode.containerInfo,Qo=!0;break e}je=je.return}if(Ji===null)throw Error(n(160));Cx(_,Z,w),Ji=null,Qo=!1;var Ee=w.alternate;Ee!==null&&(Ee.return=null),w.return=null}catch(Qe){ei(w,l,Qe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)_x(l,i),l=l.sibling}function _x(i,l){var d=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Zo(l,i),Pl(i),g&4){try{qf(3,i,i.return),up(3,i)}catch(cn){ei(i,i.return,cn)}try{qf(5,i,i.return)}catch(cn){ei(i,i.return,cn)}}break;case 1:Zo(l,i),Pl(i),g&512&&d!==null&&Nd(d,d.return);break;case 5:if(Zo(l,i),Pl(i),g&512&&d!==null&&Nd(d,d.return),i.flags&32){var w=i.stateNode;try{wt(w,"")}catch(cn){ei(i,i.return,cn)}}if(g&4&&(w=i.stateNode,w!=null)){var _=i.memoizedProps,Z=d!==null?d.memoizedProps:_,je=i.type,Ee=i.updateQueue;if(i.updateQueue=null,Ee!==null)try{je==="input"&&_.type==="radio"&&_.name!=null&&xt(w,_),Ct(je,Z);var Qe=Ct(je,_);for(Z=0;Z<Ee.length;Z+=2){var vt=Ee[Z],Nt=Ee[Z+1];vt==="style"?mn(w,Nt):vt==="dangerouslySetInnerHTML"?qe(w,Nt):vt==="children"?wt(w,Nt):R(w,vt,Nt,Qe)}switch(je){case"input":dn(w,_);break;case"textarea":G(w,_);break;case"select":var pt=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var Ht=_.value;Ht!=null?q(w,!!_.multiple,Ht,!1):pt!==!!_.multiple&&(_.defaultValue!=null?q(w,!!_.multiple,_.defaultValue,!0):q(w,!!_.multiple,_.multiple?[]:"",!1))}w[Tc]=_}catch(cn){ei(i,i.return,cn)}}break;case 6:if(Zo(l,i),Pl(i),g&4){if(i.stateNode===null)throw Error(n(162));w=i.stateNode,_=i.memoizedProps;try{w.nodeValue=_}catch(cn){ei(i,i.return,cn)}}break;case 3:if(Zo(l,i),Pl(i),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Za(l.containerInfo)}catch(cn){ei(i,i.return,cn)}break;case 4:Zo(l,i),Pl(i);break;case 13:Zo(l,i),Pl(i),w=i.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(Bg=wr())),g&4&&Ax(i);break;case 22:if(vt=d!==null&&d.memoizedState!==null,i.mode&1?(da=(Qe=da)||vt,Zo(l,i),da=Qe):Zo(l,i),Pl(i),g&8192){if(Qe=i.memoizedState!==null,(i.stateNode.isHidden=Qe)&&!vt&&(i.mode&1)!==0)for(Xt=i,vt=i.child;vt!==null;){for(Nt=Xt=vt;Xt!==null;){switch(pt=Xt,Ht=pt.child,pt.tag){case 0:case 11:case 14:case 15:qf(4,pt,pt.return);break;case 1:Nd(pt,pt.return);var tn=pt.stateNode;if(typeof tn.componentWillUnmount=="function"){g=pt,d=pt.return;try{l=g,tn.props=l.memoizedProps,tn.state=l.memoizedState,tn.componentWillUnmount()}catch(cn){ei(g,d,cn)}}break;case 5:Nd(pt,pt.return);break;case 22:if(pt.memoizedState!==null){Tx(Nt);continue}}Ht!==null?(Ht.return=pt,Xt=Ht):Tx(Nt)}vt=vt.sibling}e:for(vt=null,Nt=i;;){if(Nt.tag===5){if(vt===null){vt=Nt;try{w=Nt.stateNode,Qe?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(je=Nt.stateNode,Ee=Nt.memoizedProps.style,Z=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null,je.style.display=Cn("display",Z))}catch(cn){ei(i,i.return,cn)}}}else if(Nt.tag===6){if(vt===null)try{Nt.stateNode.nodeValue=Qe?"":Nt.memoizedProps}catch(cn){ei(i,i.return,cn)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===i)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===i)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===i)break e;vt===Nt&&(vt=null),Nt=Nt.return}vt===Nt&&(vt=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}break;case 19:Zo(l,i),Pl(i),g&4&&Ax(i);break;case 21:break;default:Zo(l,i),Pl(i)}}function Pl(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(Sx(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(wt(w,""),g.flags&=-33);var _=jx(i);Fg(i,_,w);break;case 3:case 4:var Z=g.stateNode.containerInfo,je=jx(i);Ig(i,je,Z);break;default:throw Error(n(161))}}catch(Ee){ei(i,i.return,Ee)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function o3(i,l,d){Xt=i,Px(i)}function Px(i,l,d){for(var g=(i.mode&1)!==0;Xt!==null;){var w=Xt,_=w.child;if(w.tag===22&&g){var Z=w.memoizedState!==null||cp;if(!Z){var je=w.alternate,Ee=je!==null&&je.memoizedState!==null||da;je=cp;var Qe=da;if(cp=Z,(da=Ee)&&!Qe)for(Xt=w;Xt!==null;)Z=Xt,Ee=Z.child,Z.tag===22&&Z.memoizedState!==null?Ex(w):Ee!==null?(Ee.return=Z,Xt=Ee):Ex(w);for(;_!==null;)Xt=_,Px(_),_=_.sibling;Xt=w,cp=je,da=Qe}kx(i)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,Xt=_):kx(i)}}function kx(i){for(;Xt!==null;){var l=Xt;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:da||up(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!da)if(d===null)g.componentDidMount();else{var w=l.elementType===l.type?d.memoizedProps:Ko(l.type,d.memoizedProps);g.componentDidUpdate(w,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&Ma(l,_,g);break;case 3:var Z=l.updateQueue;if(Z!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Ma(l,Z,d)}break;case 5:var je=l.stateNode;if(d===null&&l.flags&4){d=je;var Ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Ee.autoFocus&&d.focus();break;case"img":Ee.src&&(d.src=Ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Qe=l.alternate;if(Qe!==null){var vt=Qe.memoizedState;if(vt!==null){var Nt=vt.dehydrated;Nt!==null&&Za(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}da||l.flags&512&&Rg(l)}catch(pt){ei(l,l.return,pt)}}if(l===i){Xt=null;break}if(d=l.sibling,d!==null){d.return=l.return,Xt=d;break}Xt=l.return}}function Tx(i){for(;Xt!==null;){var l=Xt;if(l===i){Xt=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Xt=d;break}Xt=l.return}}function Ex(i){for(;Xt!==null;){var l=Xt;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{up(4,l)}catch(Ee){ei(l,d,Ee)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var w=l.return;try{g.componentDidMount()}catch(Ee){ei(l,w,Ee)}}var _=l.return;try{Rg(l)}catch(Ee){ei(l,_,Ee)}break;case 5:var Z=l.return;try{Rg(l)}catch(Ee){ei(l,Z,Ee)}}}catch(Ee){ei(l,l.return,Ee)}if(l===i){Xt=null;break}var je=l.sibling;if(je!==null){je.return=l.return,Xt=je;break}Xt=l.return}}var l3=Math.ceil,dp=$.ReactCurrentDispatcher,Og=$.ReactCurrentOwner,_o=$.ReactCurrentBatchConfig,Dr=0,Ui=null,Si=null,ea=0,ao=0,Sd=to(0),Ti=0,Uf=null,Lu=0,fp=0,Mg=0,zf=null,qa=null,Bg=0,jd=1/0,oc=null,hp=!1,qg=null,Mc=null,pp=!1,Bc=null,mp=0,$f=0,Ug=null,gp=-1,vp=0;function _a(){return(Dr&6)!==0?wr():gp!==-1?gp:gp=wr()}function qc(i){return(i.mode&1)===0?1:(Dr&2)!==0&&ea!==0?ea&-ea:Us.transition!==null?(vp===0&&(vp=Ft()),vp):(i=zt,i!==0||(i=window.event,i=i===void 0?16:Ro(i.type)),i)}function Yo(i,l,d,g){if(50<$f)throw $f=0,Ug=null,Error(n(185));vn(i,d,g),((Dr&2)===0||i!==Ui)&&(i===Ui&&((Dr&2)===0&&(fp|=d),Ti===4&&Uc(i,ea)),Ua(i,g),d===1&&Dr===0&&(l.mode&1)===0&&(jd=wr()+500,Pu&&T()))}function Ua(i,l){var d=i.callbackNode;Dt(i,l);var g=Rt(i,i===Ui?ea:0);if(g===0)d!==null&&Ns(d),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(d!=null&&Ns(d),l===1)i.tag===0?C(Dx.bind(null,i)):v(Dx.bind(null,i)),gg(function(){(Dr&6)===0&&T()}),d=null;else{switch(An(g)){case 1:d=is;break;case 4:d=Xr;break;case 16:d=sn;break;case 536870912:d=Ln;break;default:d=sn}d=Ux(d,Lx.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function Lx(i,l){if(gp=-1,vp=0,(Dr&6)!==0)throw Error(n(327));var d=i.callbackNode;if(Cd()&&i.callbackNode!==d)return null;var g=Rt(i,i===Ui?ea:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=xp(i,g);else{l=g;var w=Dr;Dr|=2;var _=Ix();(Ui!==i||ea!==l)&&(oc=null,jd=wr()+500,Ru(i,l));do try{d3();break}catch(je){Rx(i,je)}while(!0);Er(),dp.current=_,Dr=w,Si!==null?l=0:(Ui=null,ea=0,l=Ti)}if(l!==0){if(l===2&&(w=Lt(i),w!==0&&(g=w,l=zg(i,w))),l===1)throw d=Uf,Ru(i,0),Uc(i,g),Ua(i,wr()),d;if(l===6)Uc(i,g);else{if(w=i.current.alternate,(g&30)===0&&!c3(w)&&(l=xp(i,g),l===2&&(_=Lt(i),_!==0&&(g=_,l=zg(i,_))),l===1))throw d=Uf,Ru(i,0),Uc(i,g),Ua(i,wr()),d;switch(i.finishedWork=w,i.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Iu(i,qa,oc);break;case 3:if(Uc(i,g),(g&130023424)===g&&(l=Bg+500-wr(),10<l)){if(Rt(i,0)!==0)break;if(w=i.suspendedLanes,(w&g)!==g){_a(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=Tf(Iu.bind(null,i,qa,oc),l);break}Iu(i,qa,oc);break;case 4:if(Uc(i,g),(g&4194240)===g)break;for(l=i.eventTimes,w=-1;0<g;){var Z=31-Xe(g);_=1<<Z,Z=l[Z],Z>w&&(w=Z),g&=~_}if(g=w,g=wr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*l3(g/1960))-g,10<g){i.timeoutHandle=Tf(Iu.bind(null,i,qa,oc),g);break}Iu(i,qa,oc);break;case 5:Iu(i,qa,oc);break;default:throw Error(n(329))}}}return Ua(i,wr()),i.callbackNode===d?Lx.bind(null,i):null}function zg(i,l){var d=zf;return i.current.memoizedState.isDehydrated&&(Ru(i,l).flags|=256),i=xp(i,l),i!==2&&(l=qa,qa=d,l!==null&&$g(l)),i}function $g(i){qa===null?qa=i:qa.push.apply(qa,i)}function c3(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var w=d[g],_=w.getSnapshot;w=w.value;try{if(!As(_(),w))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Uc(i,l){for(l&=~Mg,l&=~fp,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-Xe(l),g=1<<d;i[d]=-1,l&=~g}}function Dx(i){if((Dr&6)!==0)throw Error(n(327));Cd();var l=Rt(i,0);if((l&1)===0)return Ua(i,wr()),null;var d=xp(i,l);if(i.tag!==0&&d===2){var g=Lt(i);g!==0&&(l=g,d=zg(i,g))}if(d===1)throw d=Uf,Ru(i,0),Uc(i,l),Ua(i,wr()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Iu(i,qa,oc),Ua(i,wr()),null}function Vg(i,l){var d=Dr;Dr|=1;try{return i(l)}finally{Dr=d,Dr===0&&(jd=wr()+500,Pu&&T())}}function Du(i){Bc!==null&&Bc.tag===0&&(Dr&6)===0&&Cd();var l=Dr;Dr|=1;var d=_o.transition,g=zt;try{if(_o.transition=null,zt=1,i)return i()}finally{zt=g,_o.transition=d,Dr=l,(Dr&6)===0&&T()}}function Hg(){ao=Sd.current,Br(Sd)}function Ru(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,Zh(d)),Si!==null)for(d=Si.return;d!==null;){var g=d;switch(He(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&dd();break;case 3:jo(),Br(oa),Br(Pi),Ff();break;case 5:Rf(g);break;case 4:jo();break;case 13:Br(ts);break;case 19:Br(ts);break;case 10:ls(g.type._context);break;case 22:case 23:Hg()}d=d.return}if(Ui=i,Si=i=zc(i.current,null),ea=ao=l,Ti=0,Uf=null,Mg=fp=Lu=0,qa=zf=null,Kr!==null){for(l=0;l<Kr.length;l++)if(d=Kr[l],g=d.interleaved,g!==null){d.interleaved=null;var w=g.next,_=d.pending;if(_!==null){var Z=_.next;_.next=w,g.next=Z}d.pending=g}Kr=null}return i}function Rx(i,l){do{var d=Si;try{if(Er(),fd.current=ip,Rc){for(var g=cs.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}Rc=!1}if(Co=0,Hs=Js=cs=null,Wo=!1,Ic=0,Og.current=null,d===null||d.return===null){Ti=1,Uf=l,Si=null;break}e:{var _=i,Z=d.return,je=d,Ee=l;if(l=ea,je.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Qe=Ee,vt=je,Nt=vt.tag;if((vt.mode&1)===0&&(Nt===0||Nt===11||Nt===15)){var pt=vt.alternate;pt?(vt.updateQueue=pt.updateQueue,vt.memoizedState=pt.memoizedState,vt.lanes=pt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Ht=ix(Z);if(Ht!==null){Ht.flags&=-257,ax(Ht,Z,je,_,l),Ht.mode&1&&sx(_,Qe,l),l=Ht,Ee=Qe;var tn=l.updateQueue;if(tn===null){var cn=new Set;cn.add(Ee),l.updateQueue=cn}else tn.add(Ee);break e}else{if((l&1)===0){sx(_,Qe,l),Wg();break e}Ee=Error(n(426))}}else if(at&&je.mode&1){var ci=ix(Z);if(ci!==null){(ci.flags&65536)===0&&(ci.flags|=256),ax(ci,Z,je,_,l),kt(wd(Ee,je));break e}}_=Ee=wd(Ee,je),Ti!==4&&(Ti=2),zf===null?zf=[_]:zf.push(_),_=Z;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var Ve=nx(_,Ee,l);Zr(_,Ve);break e;case 1:je=Ee;var Fe=_.type,We=_.stateNode;if((_.flags&128)===0&&(typeof Fe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Mc===null||!Mc.has(We)))){_.flags|=65536,l&=-l,_.lanes|=l;var Pt=rx(_,je,l);Zr(_,Pt);break e}}_=_.return}while(_!==null)}Ox(d)}catch(hn){l=hn,Si===d&&d!==null&&(Si=d=d.return);continue}break}while(!0)}function Ix(){var i=dp.current;return dp.current=ip,i===null?ip:i}function Wg(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),Ui===null||(Lu&268435455)===0&&(fp&268435455)===0||Uc(Ui,ea)}function xp(i,l){var d=Dr;Dr|=2;var g=Ix();(Ui!==i||ea!==l)&&(oc=null,Ru(i,l));do try{u3();break}catch(w){Rx(i,w)}while(!0);if(Er(),Dr=d,dp.current=g,Si!==null)throw Error(n(261));return Ui=null,ea=0,Ti}function u3(){for(;Si!==null;)Fx(Si)}function d3(){for(;Si!==null&&!Ci();)Fx(Si)}function Fx(i){var l=qx(i.alternate,i,ao);i.memoizedProps=i.pendingProps,l===null?Ox(i):Si=l,Og.current=null}function Ox(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=r3(d,l,ao),d!==null){Si=d;return}}else{if(d=s3(d,l),d!==null){d.flags&=32767,Si=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ti=6,Si=null;return}}if(l=l.sibling,l!==null){Si=l;return}Si=l=i}while(l!==null);Ti===0&&(Ti=5)}function Iu(i,l,d){var g=zt,w=_o.transition;try{_o.transition=null,zt=1,f3(i,l,d,g)}finally{_o.transition=w,zt=g}return null}function f3(i,l,d,g){do Cd();while(Bc!==null);if((Dr&6)!==0)throw Error(n(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(xr(i,_),i===Ui&&(Si=Ui=null,ea=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||pp||(pp=!0,Ux(sn,function(){return Cd(),null})),_=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||_){_=_o.transition,_o.transition=null;var Z=zt;zt=1;var je=Dr;Dr|=4,Og.current=null,a3(i,d),_x(d,i),xu(tc),ba=!!Au,tc=Au=null,i.current=d,o3(d),Ga(),Dr=je,zt=Z,_o.transition=_}else i.current=d;if(pp&&(pp=!1,Bc=i,mp=w),_=i.pendingLanes,_===0&&(Mc=null),yt(d.stateNode),Ua(i,wr()),l!==null)for(g=i.onRecoverableError,d=0;d<l.length;d++)w=l[d],g(w.value,{componentStack:w.stack,digest:w.digest});if(hp)throw hp=!1,i=qg,qg=null,i;return(mp&1)!==0&&i.tag!==0&&Cd(),_=i.pendingLanes,(_&1)!==0?i===Ug?$f++:($f=0,Ug=i):$f=0,T(),null}function Cd(){if(Bc!==null){var i=An(mp),l=_o.transition,d=zt;try{if(_o.transition=null,zt=16>i?16:i,Bc===null)var g=!1;else{if(i=Bc,Bc=null,mp=0,(Dr&6)!==0)throw Error(n(331));var w=Dr;for(Dr|=4,Xt=i.current;Xt!==null;){var _=Xt,Z=_.child;if((Xt.flags&16)!==0){var je=_.deletions;if(je!==null){for(var Ee=0;Ee<je.length;Ee++){var Qe=je[Ee];for(Xt=Qe;Xt!==null;){var vt=Xt;switch(vt.tag){case 0:case 11:case 15:qf(8,vt,_)}var Nt=vt.child;if(Nt!==null)Nt.return=vt,Xt=Nt;else for(;Xt!==null;){vt=Xt;var pt=vt.sibling,Ht=vt.return;if(Nx(vt),vt===Qe){Xt=null;break}if(pt!==null){pt.return=Ht,Xt=pt;break}Xt=Ht}}}var tn=_.alternate;if(tn!==null){var cn=tn.child;if(cn!==null){tn.child=null;do{var ci=cn.sibling;cn.sibling=null,cn=ci}while(cn!==null)}}Xt=_}}if((_.subtreeFlags&2064)!==0&&Z!==null)Z.return=_,Xt=Z;else e:for(;Xt!==null;){if(_=Xt,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:qf(9,_,_.return)}var Ve=_.sibling;if(Ve!==null){Ve.return=_.return,Xt=Ve;break e}Xt=_.return}}var Fe=i.current;for(Xt=Fe;Xt!==null;){Z=Xt;var We=Z.child;if((Z.subtreeFlags&2064)!==0&&We!==null)We.return=Z,Xt=We;else e:for(Z=Fe;Xt!==null;){if(je=Xt,(je.flags&2048)!==0)try{switch(je.tag){case 0:case 11:case 15:up(9,je)}}catch(hn){ei(je,je.return,hn)}if(je===Z){Xt=null;break e}var Pt=je.sibling;if(Pt!==null){Pt.return=je.return,Xt=Pt;break e}Xt=je.return}}if(Dr=w,T(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Zt,i)}catch{}g=!0}return g}finally{zt=d,_o.transition=l}}return!1}function Mx(i,l,d){l=wd(d,l),l=nx(i,l,1),i=$s(i,l,1),l=_a(),i!==null&&(vn(i,1,l),Ua(i,l))}function ei(i,l,d){if(i.tag===3)Mx(i,i,d);else for(;l!==null;){if(l.tag===3){Mx(l,i,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Mc===null||!Mc.has(g))){i=wd(d,i),i=rx(l,i,1),l=$s(l,i,1),i=_a(),l!==null&&(vn(l,1,i),Ua(l,i));break}}l=l.return}}function h3(i,l,d){var g=i.pingCache;g!==null&&g.delete(l),l=_a(),i.pingedLanes|=i.suspendedLanes&d,Ui===i&&(ea&d)===d&&(Ti===4||Ti===3&&(ea&130023424)===ea&&500>wr()-Bg?Ru(i,0):Mg|=d),Ua(i,l)}function Bx(i,l){l===0&&((i.mode&1)===0?l=1:(l=jt,jt<<=1,(jt&130023424)===0&&(jt=4194304)));var d=_a();i=Qr(i,l),i!==null&&(vn(i,l,d),Ua(i,d))}function p3(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),Bx(i,d)}function m3(i,l){var d=0;switch(i.tag){case 13:var g=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),Bx(i,d)}var qx;qx=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||oa.current)Ba=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return Ba=!1,n3(i,l,d);Ba=(i.flags&131072)!==0}else Ba=!1,at&&(l.flags&1048576)!==0&&Ue(l,se,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;lp(i,l),i=l.pendingProps;var w=Lc(l,Pi.current);ks(l,d),w=ku(null,l,g,i,w,d);var _=Ao();return l.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,la(g)?(_=!0,sc(l)):_=!1,l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,ki(l),w.updater=ap,l.stateNode=w,w._reactInternals=l,Sg(l,g,i,d),l=_g(null,l,g,!0,_,d)):(l.tag=0,at&&_&&rt(l),Aa(null,l,w,d),l=l.child),l;case 16:g=l.elementType;e:{switch(lp(i,l),i=l.pendingProps,w=g._init,g=w(g._payload),l.type=g,w=l.tag=v3(g),i=Ko(g,i),w){case 0:l=Ag(null,l,g,i,d);break e;case 1:l=fx(null,l,g,i,d);break e;case 11:l=ox(null,l,g,i,d);break e;case 14:l=lx(null,l,g,Ko(g.type,i),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Ko(g,w),Ag(i,l,g,w,d);case 1:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Ko(g,w),fx(i,l,g,w,d);case 3:e:{if(hx(l),i===null)throw Error(n(387));g=l.pendingProps,_=l.memoizedState,w=_.element,ca(i,l),qi(l,g,null,d);var Z=l.memoizedState;if(g=Z.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){w=wd(Error(n(423)),l),l=px(i,l,g,d,w);break e}else if(g!==w){w=wd(Error(n(424)),l),l=px(i,l,g,d,w);break e}else for(tt=Xi(l.stateNode.containerInfo.firstChild),et=l,at=!0,ct=null,d=vs(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Qt(),g===w){l=ac(i,l,d);break e}Aa(i,l,g,d)}l=l.child}return l;case 5:return ep(l),i===null&&en(l),g=l.type,w=l.pendingProps,_=i!==null?i.memoizedProps:null,Z=w.children,kf(g,w)?Z=null:_!==null&&kf(g,_)&&(l.flags|=32),dx(i,l),Aa(i,l,Z,d),l.child;case 6:return i===null&&en(l),null;case 13:return mx(i,l,d);case 4:return Dc(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Ys(l,null,g,d):Aa(i,l,g,d),l.child;case 11:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Ko(g,w),ox(i,l,g,w,d);case 7:return Aa(i,l,l.pendingProps,d),l.child;case 8:return Aa(i,l,l.pendingProps.children,d),l.child;case 12:return Aa(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,w=l.pendingProps,_=l.memoizedProps,Z=w.value,Ur(oi,g._currentValue),g._currentValue=Z,_!==null)if(As(_.value,Z)){if(_.children===w.children&&!oa.current){l=ac(i,l,d);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var je=_.dependencies;if(je!==null){Z=_.child;for(var Ee=je.firstContext;Ee!==null;){if(Ee.context===g){if(_.tag===1){Ee=zs(-1,d&-d),Ee.tag=2;var Qe=_.updateQueue;if(Qe!==null){Qe=Qe.shared;var vt=Qe.pending;vt===null?Ee.next=Ee:(Ee.next=vt.next,vt.next=Ee),Qe.pending=Ee}}_.lanes|=d,Ee=_.alternate,Ee!==null&&(Ee.lanes|=d),Lr(_.return,d,l),je.lanes|=d;break}Ee=Ee.next}}else if(_.tag===10)Z=_.type===l.type?null:_.child;else if(_.tag===18){if(Z=_.return,Z===null)throw Error(n(341));Z.lanes|=d,je=Z.alternate,je!==null&&(je.lanes|=d),Lr(Z,d,l),Z=_.sibling}else Z=_.child;if(Z!==null)Z.return=_;else for(Z=_;Z!==null;){if(Z===l){Z=null;break}if(_=Z.sibling,_!==null){_.return=Z.return,Z=_;break}Z=Z.return}_=Z}Aa(i,l,w.children,d),l=l.child}return l;case 9:return w=l.type,g=l.pendingProps.children,ks(l,d),w=Ts(w),g=g(w),l.flags|=1,Aa(i,l,g,d),l.child;case 14:return g=l.type,w=Ko(g,l.pendingProps),w=Ko(g.type,w),lx(i,l,g,w,d);case 15:return cx(i,l,l.type,l.pendingProps,d);case 17:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:Ko(g,w),lp(i,l),l.tag=1,la(g)?(i=!0,sc(l)):i=!1,ks(l,d),ex(l,g,w),Sg(l,g,w,d),_g(null,l,g,!0,i,d);case 19:return vx(i,l,d);case 22:return ux(i,l,d)}throw Error(n(156,l.tag))};function Ux(i,l){return kr(i,l)}function g3(i,l,d,g){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(i,l,d,g){return new g3(i,l,d,g)}function Gg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function v3(i){if(typeof i=="function")return Gg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===E)return 11;if(i===ie)return 14}return 2}function zc(i,l){var d=i.alternate;return d===null?(d=Po(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function yp(i,l,d,g,w,_){var Z=2;if(g=i,typeof i=="function")Gg(i)&&(Z=1);else if(typeof i=="string")Z=5;else e:switch(i){case re:return Fu(d.children,w,_,l);case K:Z=8,w|=8;break;case W:return i=Po(12,d,l,w|2),i.elementType=W,i.lanes=_,i;case Q:return i=Po(13,d,l,w),i.elementType=Q,i.lanes=_,i;case X:return i=Po(19,d,l,w),i.elementType=X,i.lanes=_,i;case te:return bp(d,w,_,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case he:Z=10;break e;case z:Z=9;break e;case E:Z=11;break e;case ie:Z=14;break e;case Ce:Z=16,g=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Po(Z,d,l,w),l.elementType=i,l.type=g,l.lanes=_,l}function Fu(i,l,d,g){return i=Po(7,i,g,l),i.lanes=d,i}function bp(i,l,d,g){return i=Po(22,i,g,l),i.elementType=te,i.lanes=d,i.stateNode={isHidden:!1},i}function Kg(i,l,d){return i=Po(6,i,null,l),i.lanes=d,i}function Qg(i,l,d){return l=Po(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function x3(i,l,d,g,w){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Zg(i,l,d,g,w,_,Z,je,Ee){return i=new x3(i,l,d,je,Ee),l===1?(l=1,_===!0&&(l|=8)):l=0,_=Po(3,null,null,l),i.current=_,_.stateNode=i,_.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},ki(_),i}function y3(i,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:g==null?null:""+g,children:i,containerInfo:l,implementation:d}}function zx(i){if(!i)return Cl;i=i._reactInternals;e:{if(hr(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(la(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(la(d))return Df(i,d,l)}return l}function $x(i,l,d,g,w,_,Z,je,Ee){return i=Zg(d,g,!0,i,w,_,Z,je,Ee),i.context=zx(null),d=i.current,g=_a(),w=qc(d),_=zs(g,w),_.callback=l??null,$s(d,_,w),i.current.lanes=w,vn(i,w,g),Ua(i,g),i}function wp(i,l,d,g){var w=l.current,_=_a(),Z=qc(w);return d=zx(d),l.context===null?l.context=d:l.pendingContext=d,l=zs(_,Z),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=$s(w,l,Z),i!==null&&(Yo(i,w,Z,_),Bi(i,w,Z)),Z}function Np(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function Vx(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Yg(i,l){Vx(i,l),(i=i.alternate)&&Vx(i,l)}function b3(){return null}var Hx=typeof reportError=="function"?reportError:function(i){console.error(i)};function Xg(i){this._internalRoot=i}Sp.prototype.render=Xg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));wp(i,l,null,null)},Sp.prototype.unmount=Xg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Du(function(){wp(null,i,null,null)}),l[Oi]=null}};function Sp(i){this._internalRoot=i}Sp.prototype.unstable_scheduleHydration=function(i){if(i){var l=F();i={blockedOn:null,target:i,priority:l};for(var d=0;d<as.length&&l!==0&&l<as[d].priority;d++);as.splice(d,0,i),d===0&&vl(i)}};function Jg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function jp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Wx(){}function w3(i,l,d,g,w){if(w){if(typeof g=="function"){var _=g;g=function(){var Qe=Np(Z);_.call(Qe)}}var Z=$x(l,g,i,0,null,!1,!1,"",Wx);return i._reactRootContainer=Z,i[Oi]=Z.current,Jl(i.nodeType===8?i.parentNode:i),Du(),Z}for(;w=i.lastChild;)i.removeChild(w);if(typeof g=="function"){var je=g;g=function(){var Qe=Np(Ee);je.call(Qe)}}var Ee=Zg(i,0,!1,null,null,!1,!1,"",Wx);return i._reactRootContainer=Ee,i[Oi]=Ee.current,Jl(i.nodeType===8?i.parentNode:i),Du(function(){wp(l,Ee,d,g)}),Ee}function Cp(i,l,d,g,w){var _=d._reactRootContainer;if(_){var Z=_;if(typeof w=="function"){var je=w;w=function(){var Ee=Np(Z);je.call(Ee)}}wp(l,Z,i,w)}else Z=w3(d,l,i,w,g);return Np(Z)}xn=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=Tt(l.pendingLanes);d!==0&&(Un(l,d|1),Ua(l,wr()),(Dr&6)===0&&(jd=wr()+500,T()))}break;case 13:Du(function(){var g=Qr(i,1);if(g!==null){var w=_a();Yo(g,i,1,w)}}),Yg(i,1)}},dr=function(i){if(i.tag===13){var l=Qr(i,134217728);if(l!==null){var d=_a();Yo(l,i,134217728,d)}Yg(i,134217728)}},Dn=function(i){if(i.tag===13){var l=qc(i),d=Qr(i,l);if(d!==null){var g=_a();Yo(d,i,l,g)}Yg(i,l)}},F=function(){return zt},de=function(i,l){var d=zt;try{return zt=i,l()}finally{zt=d}},Ye=function(i,l,d){switch(l){case"input":if(dn(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==i&&g.form===i.form){var w=_u(g);if(!w)throw Error(n(90));lt(g),dn(g,w)}}}break;case"textarea":G(i,d);break;case"select":l=d.value,l!=null&&q(i,!!d.multiple,l,!1)}},_r=Vg,ds=Du;var N3={usingClientEntryPoint:!1,Events:[Ec,nc,_u,Zn,bs,Vg]},Vf={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S3={bundleType:Vf.bundleType,version:Vf.version,rendererPackageName:Vf.rendererPackageName,rendererConfig:Vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ws(i),i===null?null:i.stateNode},findFiberByHostInstance:Vf.findFiberByHostInstance||b3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{Zt=Ap.inject(S3),On=Ap}catch{}}return za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N3,za.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jg(l))throw Error(n(200));return y3(i,l,null,d)},za.createRoot=function(i,l){if(!Jg(i))throw Error(n(299));var d=!1,g="",w=Hx;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),l=Zg(i,1,!1,null,null,d,!1,g,w),i[Oi]=l.current,Jl(i.nodeType===8?i.parentNode:i),new Xg(l)},za.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=ws(l),i=i===null?null:i.stateNode,i},za.flushSync=function(i){return Du(i)},za.hydrate=function(i,l,d){if(!jp(l))throw Error(n(200));return Cp(null,i,l,!0,d)},za.hydrateRoot=function(i,l,d){if(!Jg(i))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,w=!1,_="",Z=Hx;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(Z=d.onRecoverableError)),l=$x(l,null,i,1,d??null,w,!1,_,Z),i[Oi]=l.current,Jl(i),g)for(i=0;i<g.length;i++)d=g[i],w=d._getVersion,w=w(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,w]:l.mutableSourceEagerHydrationData.push(d,w);return new Sp(l)},za.render=function(i,l,d){if(!jp(l))throw Error(n(200));return Cp(null,i,l,!1,d)},za.unmountComponentAtNode=function(i){if(!jp(i))throw Error(n(40));return i._reactRootContainer?(Du(function(){Cp(null,null,i,!1,function(){i._reactRootContainer=null,i[Oi]=null})}),!0):!1},za.unstable_batchedUpdates=Vg,za.unstable_renderSubtreeIntoContainer=function(i,l,d,g){if(!jp(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Cp(i,l,d,!1,g)},za.version="18.3.1-next-f1338f8080-20240426",za}var e2;function U5(){if(e2)return n0.exports;e2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),n0.exports=E3(),n0.exports}var t2;function L3(){if(t2)return _p;t2=1;var t=U5();return _p.createRoot=t.createRoot,_p.hydrateRoot=t.hydrateRoot,_p}var D3=L3();function R3(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,a,o,u=[],c="",f=t.split("/");for(f[0]||f.shift();a=f.shift();)n=a[0],n==="*"?(u.push(n),c+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=a.indexOf("?",1),o=a.indexOf(".",1),u.push(a.substring(1,~r?r:~o?o:a.length)),c+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~r?"?":"")+"\\"+a.substring(o))):c+="/"+a;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}var P=Bm();const Nn=q5(P),z5=C3({__proto__:null,default:Nn},[P]);var i0={exports:{}},a0={};var n2;function I3(){if(n2)return a0;n2=1;var t=Bm();function e(y,j){return y===j&&(y!==0||1/y===1/j)||y!==y&&j!==j}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(y,j){var x=j(),D=r({inst:{value:x,getSnapshot:j}}),S=D[0].inst,k=D[1];return o(function(){S.value=x,S.getSnapshot=j,f(S)&&k({inst:S})},[y,x,j]),a(function(){return f(S)&&k({inst:S}),y(function(){f(S)&&k({inst:S})})},[y]),u(x),x}function f(y){var j=y.getSnapshot;y=y.value;try{var x=j();return!n(y,x)}catch{return!0}}function p(y,j){return j()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return a0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,a0}var r2;function F3(){return r2||(r2=1,i0.exports=I3()),i0.exports}var O3=F3();const M3=z5.useInsertionEffect,B3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$5=B3?P.useLayoutEffect:P.useEffect,q3=M3||$5,zv=t=>{const e=P.useRef([t,(...n)=>e[0](...n)]).current;return q3(()=>{e[0]=t}),e[1]},U3="popstate",$v="pushState",Vv="replaceState",z3="hashchange",s2=[U3,$v,Vv,z3],$3=t=>{for(const e of s2)addEventListener(e,t);return()=>{for(const e of s2)removeEventListener(e,t)}},V5=(t,e)=>O3.useSyncExternalStore($3,t,e),V3=()=>location.search,H3=({ssrSearch:t=""}={})=>V5(V3,()=>t),i2=()=>location.pathname,W3=({ssrPath:t}={})=>V5(i2,t?()=>t:i2),G3=(t,{replace:e=!1,state:n=null}={})=>history[e?Vv:$v](n,"",t),K3=(t={})=>[W3(t),G3],a2=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[a2]>"u"){for(const t of[$v,Vv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,a2,{value:!0})}const Q3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",H5=(t="")=>t==="/"?"":t,Z3=(t,e)=>t[0]==="~"?t.slice(1):H5(e)+t,Y3=(t="",e)=>Q3(o2(H5(t)),o2(e)),o2=t=>{try{return decodeURI(t)}catch{return t}},W5={hook:K3,searchHook:H3,parser:R3,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},G5=P.createContext(W5),Lh=()=>P.useContext(G5),K5={},Q5=P.createContext(K5),ed=()=>P.useContext(Q5),qm=t=>{const[e,n]=t.hook(t);return[Y3(t.base,e),zv((r,a)=>n(Z3(r,t.base),a))]},Va=()=>qm(Lh()),Z5=(t,e,n,r)=>{const{pattern:a,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),u=a.exec(n)||[],[c,...f]=u;return c!==void 0?[!0,(()=>{const p=o!==!1?Object.fromEntries(o.map((y,j)=>[y,f[j]])):u.groups;let m={...f};return p&&Object.assign(m,p),m})(),...r?[c]:[]]:[!1,null]},X3=({children:t,...e})=>{const n=Lh(),r=e.hook?W5:n;let a=r;const[o,u]=e.ssrPath?.split("?")??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??e.hook?.hrefs;let c=P.useRef({}),f=c.current,p=f;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];f===p&&y!==p[m]&&(c.current=p={...p}),p[m]=y,y!==r[m]&&(a=p)}return P.createElement(G5.Provider,{value:a,children:t})},l2=({children:t,component:e},n)=>e?P.createElement(e,{params:n}):typeof t=="function"?t(n):t,J3=t=>{let e=P.useRef(K5),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},$i=({path:t,nest:e,match:n,...r})=>{const a=Lh(),[o]=qm(a),[u,c,f]=n??Z5(a.parser,t,o,e),p=J3({...ed(),...c});if(!u)return null;const m=f?P.createElement(X3,{base:f},l2(r,p)):l2(r,p);return P.createElement(Q5.Provider,{value:p,children:m})},Y5=P.forwardRef((t,e)=>{const n=Lh(),[r,a]=qm(n),{to:o="",href:u=o,onClick:c,asChild:f,children:p,className:m,replace:y,state:j,...x}=t,D=zv(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(c?.(k),k.defaultPrevented||(k.preventDefault(),a(u,t)))}),S=n.hrefs(u[0]==="~"?u.slice(1):n.base+u,n);return f&&P.isValidElement(p)?P.cloneElement(p,{onClick:D,href:S}):P.createElement("a",{...x,onClick:D,href:S,className:m?.call?m(r===u):m,children:p,ref:e})}),X5=t=>Array.isArray(t)?t.flatMap(e=>X5(e&&e.type===P.Fragment?e.props.children:e)):[t],eC=({children:t,location:e})=>{const n=Lh(),[r]=qm(n);for(const a of X5(t)){let o=0;if(P.isValidElement(a)&&(o=Z5(n.parser,a.props.path,e||r,a.props.nest))[0])return P.cloneElement(a,{match:o})}return null},tC=t=>{const{to:e,href:n=e}=t,[,r]=Va(),a=zv(()=>r(e||n,t));return $5(()=>{a()},[]),null};var cf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zu=typeof window>"u"||"Deno"in globalThis;function ko(){}function nC(t,e){return typeof t=="function"?t(e):t}function Q0(t){return typeof t=="number"&&t>=0&&t!==1/0}function J5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ud(t,e){return typeof t=="function"?t(e):t}function tl(t,e){return typeof t=="function"?t(e):t}function c2(t,e){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:u,stale:c}=t;if(u){if(r){if(e.queryHash!==Hv(u,e.options))return!1}else if(!ch(e.queryKey,u))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function u2(t,e){const{exact:n,status:r,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if($u(e.options.mutationKey)!==$u(o))return!1}else if(!ch(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function Hv(t,e){return(e?.queryKeyHashFn||$u)(t)}function $u(t){return JSON.stringify(t,(e,n)=>Z0(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function ch(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ch(t[n],e[n])):!1}function eb(t,e){if(t===e)return t;const n=d2(t)&&d2(e);if(n||Z0(t)&&Z0(e)){const r=n?t:Object.keys(t),a=r.length,o=n?e:Object.keys(e),u=o.length,c=n?[]:{};let f=0;for(let p=0;p<u;p++){const m=n?p:o[p];(!n&&r.includes(m)||n)&&t[m]===void 0&&e[m]===void 0?(c[m]=void 0,f++):(c[m]=eb(t[m],e[m]),c[m]===t[m]&&t[m]!==void 0&&f++)}return a===u&&f===a?t:c}return e}function cm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function d2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Z0(t){if(!f2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!f2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function f2(t){return Object.prototype.toString.call(t)==="[object Object]"}function rC(t){return new Promise(e=>{setTimeout(e,t)})}function Y0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?eb(t,e):e}function sC(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function iC(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Wv=Symbol();function tb(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Wv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var aC=class extends cf{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!zu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Gv=new aC,oC=class extends cf{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!zu&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},um=new oC;function X0(){let t,e;const n=new Promise((a,o)=>{t=a,e=o});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),e(a)},n}function lC(t){return Math.min(1e3*2**t,3e4)}function nb(t){return(t??"online")==="online"?um.isOnline():!0}var rb=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function o0(t){return t instanceof rb}function sb(t){let e=!1,n=0,r=!1,a;const o=X0(),u=S=>{r||(j(new rb(S)),t.abort?.())},c=()=>{e=!0},f=()=>{e=!1},p=()=>Gv.isFocused()&&(t.networkMode==="always"||um.isOnline())&&t.canRun(),m=()=>nb(t.networkMode)&&t.canRun(),y=S=>{r||(r=!0,t.onSuccess?.(S),a?.(),o.resolve(S))},j=S=>{r||(r=!0,t.onError?.(S),a?.(),o.reject(S))},x=()=>new Promise(S=>{a=k=>{(r||p())&&S(k)},t.onPause?.()}).then(()=>{a=void 0,r||t.onContinue?.()}),D=()=>{if(r)return;let S;const k=n===0?t.initialPromise:void 0;try{S=k??t.fn()}catch(A){S=Promise.reject(A)}Promise.resolve(S).then(y).catch(A=>{if(r)return;const I=t.retry??(zu?0:3),R=t.retryDelay??lC,$=typeof R=="function"?R(n,A):R,N=I===!0||typeof I=="number"&&n<I||typeof I=="function"&&I(n,A);if(e||!N){j(A);return}n++,t.onFail?.(n,A),rC($).then(()=>p()?void 0:x()).then(()=>{e?j(A):D()})})};return{promise:o,cancel:u,continue:()=>(a?.(),o),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?D():x().then(D),o)}}function cC(){let t=[],e=0,n=c=>{c()},r=c=>{c()},a=c=>setTimeout(c,0);const o=c=>{e?t.push(c):a(()=>{n(c)})},u=()=>{const c=t;t=[],c.length&&a(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||u()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var Li=cC(),ib=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Q0(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(zu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},uC=class extends ib{#e;#t;#r;#n;#a;#i;constructor(t){super(),this.#i=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=dC(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const n=Y0(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(ko).catch(ko):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>tl(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!J5(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#i?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},a=()=>{const c=tb(this.options,e),f={queryKey:this.queryKey,meta:this.meta};return r(f),this.#i=!1,this.options.persister?this.options.persister(c,f,this):c(f)},o={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};r(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const u=c=>{o0(c)&&c.silent||this.#s({type:"error",error:c}),o0(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=sb({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:c=>{if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(f){u(f);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,f)=>{this.#s({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ab(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return o0(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Li.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function ab(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function dC(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fC=class extends cf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,a=e.queryHash??Hv(r,e);let o=this.get(a);return o||(o=new uC({cache:this,queryKey:r,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Li.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>c2(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>c2(t,n)):e}notify(t){Li.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Li.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Li.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hC=class extends ib{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||ob(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){this.#r=sb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,a)=>{this.#n({type:"failed",failureCount:r,error:a})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#r.canStart();try{if(!e){this.#n({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&this.#n({type:"pending",context:a,variables:t,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Li.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function ob(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pC=class extends cf{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,e,n){const r=new hC({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){const e=Pp(t),n=this.#e.get(e)??[];n.push(t),this.#e.set(e,n),this.notify({type:"added",mutation:t})}remove(t){const e=Pp(t);if(this.#e.has(e)){const n=this.#e.get(e)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(e):this.#e.set(e,n))}this.notify({type:"removed",mutation:t})}canRun(t){const e=this.#e.get(Pp(t))?.find(n=>n.state.status==="pending");return!e||e===t}runNext(t){return this.#e.get(Pp(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Li.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(n=>u2(e,n))}findAll(t={}){return this.getAll().filter(e=>u2(t,e))}notify(t){Li.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Li.batch(()=>Promise.all(t.map(e=>e.continue().catch(ko))))}};function Pp(t){return t.options.scope?.id??String(t.mutationId)}function h2(t){return{onFetch:(e,n)=>{const r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const p=async()=>{let m=!1;const y=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},j=tb(e.options,e.fetchOptions),x=async(D,S,k)=>{if(m)return Promise.reject();if(S==null&&D.pages.length)return Promise.resolve(D);const A={queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};y(A);const I=await j(A),{maxPages:R}=e.options,$=k?iC:sC;return{pages:$(D.pages,I,R),pageParams:$(D.pageParams,S,R)}};if(a&&o.length){const D=a==="backward",S=D?mC:p2,k={pages:o,pageParams:u},A=S(r,k);c=await x(k,A,D)}else{const D=t??o.length;do{const S=f===0?u[0]??r.initialPageParam:p2(r,c);if(f>0&&S==null)break;c=await x(c,S),f++}while(f<D)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function p2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function mC(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var gC=class{#e;#t;#r;#n;#a;#i;#s;#o;constructor(t={}){this.#e=t.queryCache||new fC,this.#t=t.mutationCache||new pC,this.#r=t.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#s=Gv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=um.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Ud(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,u=nC(e,o);if(u!==void 0)return this.#e.build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Li.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Li.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Li.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Li.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(ko).catch(ko)}invalidateQueries(t={},e={}){return Li.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:e?.cancelRefetch??!0},r=Li.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(ko)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(ko)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Ud(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ko).catch(ko)}fetchInfiniteQuery(t){return t.behavior=h2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ko).catch(ko)}ensureInfiniteQueryData(t){return t.behavior=h2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return um.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set($u(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()];let n={};return e.forEach(r=>{ch(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){this.#a.set($u(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()];let n={};return e.forEach(r=>{ch(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Hv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Wv&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},vC=class extends cf{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#s=X0(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#i;#s;#o;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),m2(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return J0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return J0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof tl(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),n._defaulted&&!cm(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&g2(this.#t,r,this.options,n)&&this.#d(),this.updateResult(e),a&&(this.#t!==r||tl(this.options.enabled,this.#t)!==tl(n.enabled,this.#t)||Ud(this.options.staleTime,this.#t)!==Ud(n.staleTime,this.#t))&&this.#g();const o=this.#v();a&&(this.#t!==r||tl(this.options.enabled,this.#t)!==tl(n.enabled,this.#t)||o!==this.#l)&&this.#x(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return yC(this,n)&&(this.#n=n,this.#i=this.options,this.#a=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(t){this.#N();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(ko)),e}#g(){this.#b();const t=Ud(this.options.staleTime,this.#t);if(zu||this.#n.isStale||!Q0(t))return;const n=J5(this.#n.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(t){this.#w(),this.#l=t,!(zu||tl(this.options.enabled,this.#t)===!1||!Q0(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||Gv.isFocused())&&this.#d()},this.#l))}#y(){this.#g(),this.#x(this.#v())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,a=this.#n,o=this.#a,u=this.#i,f=t!==n?t.state:this.#r,{state:p}=t;let m={...p},y=!1,j;if(e._optimisticResults){const re=this.hasListeners(),K=!re&&m2(t,e),W=re&&g2(t,n,e,r);(K||W)&&(m={...m,...ab(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:D,status:S}=m;if(e.select&&m.data!==void 0)if(a&&m.data===o?.data&&e.select===this.#m)j=this.#f;else try{this.#m=e.select,j=e.select(m.data),j=Y0(a?.data,j,e),this.#f=j,this.#o=null}catch(re){this.#o=re}else j=m.data;if(e.placeholderData!==void 0&&j===void 0&&S==="pending"){let re;if(a?.isPlaceholderData&&e.placeholderData===u?.placeholderData)re=a.data;else if(re=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&re!==void 0)try{re=e.select(re),this.#o=null}catch(K){this.#o=K}re!==void 0&&(S="success",j=Y0(a?.data,re,e),y=!0)}this.#o&&(x=this.#o,j=this.#f,D=Date.now(),S="error");const k=m.fetchStatus==="fetching",A=S==="pending",I=S==="error",R=A&&k,$=j!==void 0,xe={status:S,fetchStatus:m.fetchStatus,isPending:A,isSuccess:S==="success",isError:I,isInitialLoading:R,isLoading:R,data:j,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:D,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!A,isLoadingError:I&&!$,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:I&&$,isStale:Kv(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const re=he=>{xe.status==="error"?he.reject(xe.error):xe.data!==void 0&&he.resolve(xe.data)},K=()=>{const he=this.#s=xe.promise=X0();re(he)},W=this.#s;switch(W.status){case"pending":t.queryHash===n.queryHash&&re(W);break;case"fulfilled":(xe.status==="error"||xe.data!==W.value)&&K();break;case"rejected":(xe.status!=="error"||xe.error!==W.reason)&&K();break}}return xe}updateResult(t){const e=this.#n,n=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#h=this.#t),cm(n,e))return;this.#n=n;const r={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!this.#p.size)return!0;const c=new Set(u??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#n).some(f=>{const p=f;return this.#n[p]!==e[p]&&c.has(p)})};t?.listeners!==!1&&a()&&(r.listeners=!0),this.#S({...r,...t})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(t){Li.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function xC(t,e){return tl(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function m2(t,e){return xC(t,e)||t.state.data!==void 0&&J0(t,e,e.refetchOnMount)}function J0(t,e,n){if(tl(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Kv(t,e)}return!1}function g2(t,e,n,r){return(t!==e||tl(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Kv(t,n)}function Kv(t,e){return tl(e.enabled,t)!==!1&&t.isStaleByTime(Ud(e.staleTime,t))}function yC(t,e){return!cm(t.getCurrentResult(),e)}var bC=class extends cf{#e;#t=void 0;#r;#n;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),cm(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&$u(n.mutationKey)!==$u(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){const e=this.#r?.state??ob();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){Li.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#n.onSuccess?.(e.data,n,r),this.#n.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#n.onError?.(e.error,n,r),this.#n.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},lb=P.createContext(void 0),Um=t=>{const e=P.useContext(lb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},wC=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),s.jsx(lb.Provider,{value:t,children:e})),cb=P.createContext(!1),NC=()=>P.useContext(cb);cb.Provider;function SC(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var jC=P.createContext(SC()),CC=()=>P.useContext(jC);function ub(t,e){return typeof t=="function"?t(...e):!!t}function ev(){}var AC=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},_C=t=>{P.useEffect(()=>{t.clearReset()},[t])},PC=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&ub(n,[t.error,r]),kC=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},TC=(t,e)=>t.isLoading&&t.isFetching&&!e,EC=(t,e)=>t?.suspense&&e.isPending,v2=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function LC(t,e,n){const r=Um(),a=NC(),o=CC(),u=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=a?"isRestoring":"optimistic",kC(u),AC(u,o),_C(o);const c=!r.getQueryCache().get(u.queryHash),[f]=P.useState(()=>new e(r,u)),p=f.getOptimisticResult(u);if(P.useSyncExternalStore(P.useCallback(m=>{const y=a?ev:f.subscribe(Li.batchCalls(m));return f.updateResult(),y},[f,a]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),P.useEffect(()=>{f.setOptions(u,{listeners:!1})},[u,f]),EC(u,p))throw v2(u,f,o);if(PC({result:p,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw p.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(u,p),u.experimental_prefetchInRender&&!zu&&TC(p,a)&&(c?v2(u,f,o):r.getQueryCache().get(u.queryHash)?.promise)?.catch(ev).finally(()=>{f.updateResult()}),u.notifyOnChangeProps?p:f.trackResult(p)}function Bn(t,e){return LC(t,vC)}function Mr(t,e){const n=Um(),[r]=P.useState(()=>new bC(n,t));P.useEffect(()=>{r.setOptions(t)},[r,t]);const a=P.useSyncExternalStore(P.useCallback(u=>r.subscribe(Li.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=P.useCallback((u,c)=>{r.mutate(u,c).catch(ev)},[r]);if(a.error&&ub(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function db(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function jn(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await db(r),r}const DC=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/revira"),{credentials:"include"});return await db(n),await n.json()},Gn=new gC({defaultOptions:{queries:{queryFn:DC({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),RC=1,IC=1e6;let l0=0;function FC(){return l0=(l0+1)%Number.MAX_SAFE_INTEGER,l0.toString()}const c0=new Map,x2=t=>{if(c0.has(t))return;const e=setTimeout(()=>{c0.delete(t),rh({type:"REMOVE_TOAST",toastId:t})},IC);c0.set(t,e)},OC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,RC)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?x2(n):t.toasts.forEach(r=>{x2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Gp=[];let Kp={toasts:[]};function rh(t){Kp=OC(Kp,t),Gp.forEach(e=>{e(Kp)})}function MC({...t}){const e=FC(),n=a=>rh({type:"UPDATE_TOAST",toast:{...a,id:e}}),r=()=>rh({type:"DISMISS_TOAST",toastId:e});return rh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||r()}}}),{id:e,dismiss:r,update:n}}function Ha(){const[t,e]=P.useState(Kp);return P.useEffect(()=>(Gp.push(e),()=>{const n=Gp.indexOf(e);n>-1&&Gp.splice(n,1)}),[t]),{...t,toast:MC,dismiss:n=>rh({type:"DISMISS_TOAST",toastId:n})}}var uf=U5();const BC=q5(uf);function Kn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return e?.(a)}}function y2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fb(...t){return e=>{let n=!1;const r=t.map(a=>{const o=y2(a,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():y2(t[a],null)}}}}function Vr(...t){return P.useCallback(fb(...t),t)}function qC(t,e){const n=P.createContext(e),r=o=>{const{children:u,...c}=o,f=P.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:f,children:u})};r.displayName=t+"Provider";function a(o){const u=P.useContext(n);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,a]}function hl(t,e=[]){let n=[];function r(o,u){const c=P.createContext(u),f=n.length;n=[...n,u];const p=y=>{const{scope:j,children:x,...D}=y,S=j?.[t]?.[f]||c,k=P.useMemo(()=>D,Object.values(D));return s.jsx(S.Provider,{value:k,children:x})};p.displayName=o+"Provider";function m(y,j){const x=j?.[t]?.[f]||c,D=P.useContext(x);if(D)return D;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,m]}const a=()=>{const o=n.map(u=>P.createContext(u));return function(c){const f=c?.[t]||o;return P.useMemo(()=>({[`__scope${t}`]:{...c,[t]:f}}),[c,f])}};return a.scopeName=t,[r,UC(a,...e)]}function UC(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const u=r.reduce((c,{useScope:f,scopeName:p})=>{const y=f(o)[`__scope${p}`];return{...c,...y}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return n.scopeName=e.scopeName,n}function tf(t){const e=zC(t),n=P.forwardRef((r,a)=>{const{children:o,...u}=r,c=P.Children.toArray(o),f=c.find($C);if(f){const p=f.props.children,m=c.map(y=>y===f?P.Children.count(p)>1?P.Children.only(null):P.isValidElement(p)?p.props.children:null:y);return s.jsx(e,{...u,ref:a,children:P.isValidElement(p)?P.cloneElement(p,void 0,m):null})}return s.jsx(e,{...u,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}var hb=tf("Slot");function zC(t){const e=P.forwardRef((n,r)=>{const{children:a,...o}=n;if(P.isValidElement(a)){const u=HC(a),c=VC(o,a.props);return a.type!==P.Fragment&&(c.ref=r?fb(r,u):u),P.cloneElement(a,c)}return P.Children.count(a)>1?P.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pb=Symbol("radix.slottable");function mb(t){const e=({children:n})=>s.jsx(s.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pb,e}function $C(t){return P.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pb}function VC(t,e){const n={...e};for(const r in e){const a=t[r],o=e[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...c)=>{o(...c),a(...c)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function HC(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Qv(t){const e=t+"CollectionProvider",[n,r]=hl(e),[a,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:k,children:A}=S,I=Nn.useRef(null),R=Nn.useRef(new Map).current;return s.jsx(a,{scope:k,itemMap:R,collectionRef:I,children:A})};u.displayName=e;const c=t+"CollectionSlot",f=tf(c),p=Nn.forwardRef((S,k)=>{const{scope:A,children:I}=S,R=o(c,A),$=Vr(k,R.collectionRef);return s.jsx(f,{ref:$,children:I})});p.displayName=c;const m=t+"CollectionItemSlot",y="data-radix-collection-item",j=tf(m),x=Nn.forwardRef((S,k)=>{const{scope:A,children:I,...R}=S,$=Nn.useRef(null),N=Vr(k,$),xe=o(m,A);return Nn.useEffect(()=>(xe.itemMap.set($,{ref:$,...R}),()=>{xe.itemMap.delete($)})),s.jsx(j,{[y]:"",ref:N,children:I})});x.displayName=m;function D(S){const k=o(t+"CollectionConsumer",S);return Nn.useCallback(()=>{const I=k.collectionRef.current;if(!I)return[];const R=Array.from(I.querySelectorAll(`[${y}]`));return Array.from(k.itemMap.values()).sort((xe,re)=>R.indexOf(xe.ref.current)-R.indexOf(re.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:u,Slot:p,ItemSlot:x},D,r]}var WC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jn=WC.reduce((t,e)=>{const n=tf(`Primitive.${e}`),r=P.forwardRef((a,o)=>{const{asChild:u,...c}=a,f=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function gb(t,e){t&&uf.flushSync(()=>t.dispatchEvent(e))}function $a(t){const e=P.useRef(t);return P.useEffect(()=>{e.current=t}),P.useMemo(()=>(...n)=>e.current?.(...n),[])}function GC(t,e=globalThis?.document){const n=$a(t);P.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var KC="DismissableLayer",tv="dismissableLayer.update",QC="dismissableLayer.pointerDownOutside",ZC="dismissableLayer.focusOutside",b2,vb=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dh=P.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:u,onDismiss:c,...f}=t,p=P.useContext(vb),[m,y]=P.useState(null),j=m?.ownerDocument??globalThis?.document,[,x]=P.useState({}),D=Vr(e,re=>y(re)),S=Array.from(p.layers),[k]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(k),I=m?S.indexOf(m):-1,R=p.layersWithOutsidePointerEventsDisabled.size>0,$=I>=A,N=XC(re=>{const K=re.target,W=[...p.branches].some(he=>he.contains(K));!$||W||(a?.(re),u?.(re),re.defaultPrevented||c?.())},j),xe=JC(re=>{const K=re.target;[...p.branches].some(he=>he.contains(K))||(o?.(re),u?.(re),re.defaultPrevented||c?.())},j);return GC(re=>{I===p.layers.size-1&&(r?.(re),!re.defaultPrevented&&c&&(re.preventDefault(),c()))},j),P.useEffect(()=>{if(m)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(b2=j.body.style.pointerEvents,j.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),w2(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(j.body.style.pointerEvents=b2)}},[m,j,n,p]),P.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),w2())},[m,p]),P.useEffect(()=>{const re=()=>x({});return document.addEventListener(tv,re),()=>document.removeEventListener(tv,re)},[]),s.jsx(Jn.div,{...f,ref:D,style:{pointerEvents:R?$?"auto":"none":void 0,...t.style},onFocusCapture:Kn(t.onFocusCapture,xe.onFocusCapture),onBlurCapture:Kn(t.onBlurCapture,xe.onBlurCapture),onPointerDownCapture:Kn(t.onPointerDownCapture,N.onPointerDownCapture)})});Dh.displayName=KC;var YC="DismissableLayerBranch",xb=P.forwardRef((t,e)=>{const n=P.useContext(vb),r=P.useRef(null),a=Vr(e,r);return P.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Jn.div,{...t,ref:a})});xb.displayName=YC;function XC(t,e=globalThis?.document){const n=$a(t),r=P.useRef(!1),a=P.useRef(()=>{});return P.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let f=function(){yb(QC,n,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=f,e.addEventListener("click",a.current,{once:!0})):f()}else e.removeEventListener("click",a.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",o),e.removeEventListener("click",a.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function JC(t,e=globalThis?.document){const n=$a(t),r=P.useRef(!1);return P.useEffect(()=>{const a=o=>{o.target&&!r.current&&yb(ZC,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function w2(){const t=new CustomEvent(tv);document.dispatchEvent(t)}function yb(t,e,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?gb(a,o):a.dispatchEvent(o)}var eA=Dh,tA=xb,ji=globalThis?.document?P.useLayoutEffect:()=>{},nA="Portal",zm=P.forwardRef((t,e)=>{const{container:n,...r}=t,[a,o]=P.useState(!1);ji(()=>o(!0),[]);const u=n||a&&globalThis?.document?.body;return u?BC.createPortal(s.jsx(Jn.div,{...r,ref:e}),u):null});zm.displayName=nA;function rA(t,e){return P.useReducer((n,r)=>e[n][r]??n,t)}var fu=t=>{const{present:e,children:n}=t,r=sA(e),a=typeof n=="function"?n({present:r.isPresent}):P.Children.only(n),o=Vr(r.ref,iA(a));return typeof n=="function"||r.isPresent?P.cloneElement(a,{ref:o}):null};fu.displayName="Presence";function sA(t){const[e,n]=P.useState(),r=P.useRef({}),a=P.useRef(t),o=P.useRef("none"),u=t?"mounted":"unmounted",[c,f]=rA(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const p=kp(r.current);o.current=c==="mounted"?p:"none"},[c]),ji(()=>{const p=r.current,m=a.current;if(m!==t){const j=o.current,x=kp(p);t?f("MOUNT"):x==="none"||p?.display==="none"?f("UNMOUNT"):f(m&&j!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,f]),ji(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,y=x=>{const S=kp(r.current).includes(x.animationName);if(x.target===e&&S&&(f("ANIMATION_END"),!a.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},j=x=>{x.target===e&&(o.current=kp(r.current))};return e.addEventListener("animationstart",j),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",j),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:P.useCallback(p=>{p&&(r.current=getComputedStyle(p)),n(p)},[])}}function kp(t){return t?.animationName||"none"}function iA(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function nu({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,a]=aA({defaultProp:e,onChange:n}),o=t!==void 0,u=o?t:r,c=$a(n),f=P.useCallback(p=>{if(o){const y=typeof p=="function"?p(t):p;y!==t&&c(y)}else a(p)},[o,t,a,c]);return[u,f]}function aA({defaultProp:t,onChange:e}){const n=P.useState(t),[r]=n,a=P.useRef(r),o=$a(e);return P.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}var oA="VisuallyHidden",Rh=P.forwardRef((t,e)=>s.jsx(Jn.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Rh.displayName=oA;var lA=Rh,Zv="ToastProvider",[Yv,cA,uA]=Qv("Toast"),[bb]=hl("Toast",[uA]),[dA,$m]=bb(Zv),wb=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:u}=t,[c,f]=P.useState(null),[p,m]=P.useState(0),y=P.useRef(!1),j=P.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Zv}\`. Expected non-empty \`string\`.`),s.jsx(Yv.Provider,{scope:e,children:s.jsx(dA,{scope:e,label:n,duration:r,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:c,onViewportChange:f,onToastAdd:P.useCallback(()=>m(x=>x+1),[]),onToastRemove:P.useCallback(()=>m(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:j,children:u})})};wb.displayName=Zv;var Nb="ToastViewport",fA=["F8"],nv="toast.viewportPause",rv="toast.viewportResume",Sb=P.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=fA,label:a="Notifications ({hotkey})",...o}=t,u=$m(Nb,n),c=cA(n),f=P.useRef(null),p=P.useRef(null),m=P.useRef(null),y=P.useRef(null),j=Vr(e,y,u.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=u.toastCount>0;P.useEffect(()=>{const k=A=>{r.length!==0&&r.every(R=>A[R]||A.code===R)&&y.current?.focus()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[r]),P.useEffect(()=>{const k=f.current,A=y.current;if(D&&k&&A){const I=()=>{if(!u.isClosePausedRef.current){const xe=new CustomEvent(nv);A.dispatchEvent(xe),u.isClosePausedRef.current=!0}},R=()=>{if(u.isClosePausedRef.current){const xe=new CustomEvent(rv);A.dispatchEvent(xe),u.isClosePausedRef.current=!1}},$=xe=>{!k.contains(xe.relatedTarget)&&R()},N=()=>{k.contains(document.activeElement)||R()};return k.addEventListener("focusin",I),k.addEventListener("focusout",$),k.addEventListener("pointermove",I),k.addEventListener("pointerleave",N),window.addEventListener("blur",I),window.addEventListener("focus",R),()=>{k.removeEventListener("focusin",I),k.removeEventListener("focusout",$),k.removeEventListener("pointermove",I),k.removeEventListener("pointerleave",N),window.removeEventListener("blur",I),window.removeEventListener("focus",R)}}},[D,u.isClosePausedRef]);const S=P.useCallback(({tabbingDirection:k})=>{const I=c().map(R=>{const $=R.ref.current,N=[$,...CA($)];return k==="forwards"?N:N.reverse()});return(k==="forwards"?I.reverse():I).flat()},[c]);return P.useEffect(()=>{const k=y.current;if(k){const A=I=>{const R=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!R){const N=document.activeElement,xe=I.shiftKey;if(I.target===k&&xe){p.current?.focus();return}const W=S({tabbingDirection:xe?"backwards":"forwards"}),he=W.findIndex(z=>z===N);u0(W.slice(he+1))?I.preventDefault():xe?p.current?.focus():m.current?.focus()}};return k.addEventListener("keydown",A),()=>k.removeEventListener("keydown",A)}},[c,S]),s.jsxs(tA,{ref:f,role:"region","aria-label":a.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&s.jsx(sv,{ref:p,onFocusFromOutsideViewport:()=>{const k=S({tabbingDirection:"forwards"});u0(k)}}),s.jsx(Yv.Slot,{scope:n,children:s.jsx(Jn.ol,{tabIndex:-1,...o,ref:j})}),D&&s.jsx(sv,{ref:m,onFocusFromOutsideViewport:()=>{const k=S({tabbingDirection:"backwards"});u0(k)}})]})});Sb.displayName=Nb;var jb="ToastFocusProxy",sv=P.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=t,o=$m(jb,n);return s.jsx(Rh,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:u=>{const c=u.relatedTarget;!o.viewport?.contains(c)&&r()}})});sv.displayName=jb;var Vm="Toast",hA="toast.swipeStart",pA="toast.swipeMove",mA="toast.swipeCancel",gA="toast.swipeEnd",Cb=P.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o,...u}=t,[c=!0,f]=nu({prop:r,defaultProp:a,onChange:o});return s.jsx(fu,{present:n||c,children:s.jsx(yA,{open:c,...u,ref:e,onClose:()=>f(!1),onPause:$a(t.onPause),onResume:$a(t.onResume),onSwipeStart:Kn(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Kn(t.onSwipeMove,p=>{const{x:m,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Kn(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Kn(t.onSwipeEnd,p=>{const{x:m,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),f(!1)})})})});Cb.displayName=Vm;var[vA,xA]=bb(Vm,{onClose(){}}),yA=P.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:o,onClose:u,onEscapeKeyDown:c,onPause:f,onResume:p,onSwipeStart:m,onSwipeMove:y,onSwipeCancel:j,onSwipeEnd:x,...D}=t,S=$m(Vm,n),[k,A]=P.useState(null),I=Vr(e,X=>A(X)),R=P.useRef(null),$=P.useRef(null),N=a||S.duration,xe=P.useRef(0),re=P.useRef(N),K=P.useRef(0),{onToastAdd:W,onToastRemove:he}=S,z=$a(()=>{k?.contains(document.activeElement)&&S.viewport?.focus(),u()}),E=P.useCallback(X=>{!X||X===1/0||(window.clearTimeout(K.current),xe.current=new Date().getTime(),K.current=window.setTimeout(z,X))},[z]);P.useEffect(()=>{const X=S.viewport;if(X){const ie=()=>{E(re.current),p?.()},Ce=()=>{const te=new Date().getTime()-xe.current;re.current=re.current-te,window.clearTimeout(K.current),f?.()};return X.addEventListener(nv,Ce),X.addEventListener(rv,ie),()=>{X.removeEventListener(nv,Ce),X.removeEventListener(rv,ie)}}},[S.viewport,N,f,p,E]),P.useEffect(()=>{o&&!S.isClosePausedRef.current&&E(N)},[o,N,S.isClosePausedRef,E]),P.useEffect(()=>(W(),()=>he()),[W,he]);const Q=P.useMemo(()=>k?Lb(k):null,[k]);return S.viewport?s.jsxs(s.Fragment,{children:[Q&&s.jsx(bA,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),s.jsx(vA,{scope:n,onClose:z,children:uf.createPortal(s.jsx(Yv.ItemSlot,{scope:n,children:s.jsx(eA,{asChild:!0,onEscapeKeyDown:Kn(c,()=>{S.isFocusedToastEscapeKeyDownRef.current||z(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Jn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...D,ref:I,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Kn(t.onKeyDown,X=>{X.key==="Escape"&&(c?.(X.nativeEvent),X.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,z()))}),onPointerDown:Kn(t.onPointerDown,X=>{X.button===0&&(R.current={x:X.clientX,y:X.clientY})}),onPointerMove:Kn(t.onPointerMove,X=>{if(!R.current)return;const ie=X.clientX-R.current.x,Ce=X.clientY-R.current.y,te=!!$.current,ae=["left","right"].includes(S.swipeDirection),Ne=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,Re=ae?Ne(0,ie):0,ne=ae?0:Ne(0,Ce),O=X.pointerType==="touch"?10:2,L={x:Re,y:ne},oe={originalEvent:X,delta:L};te?($.current=L,Tp(pA,y,oe,{discrete:!1})):N2(L,S.swipeDirection,O)?($.current=L,Tp(hA,m,oe,{discrete:!1}),X.target.setPointerCapture(X.pointerId)):(Math.abs(ie)>O||Math.abs(Ce)>O)&&(R.current=null)}),onPointerUp:Kn(t.onPointerUp,X=>{const ie=$.current,Ce=X.target;if(Ce.hasPointerCapture(X.pointerId)&&Ce.releasePointerCapture(X.pointerId),$.current=null,R.current=null,ie){const te=X.currentTarget,ae={originalEvent:X,delta:ie};N2(ie,S.swipeDirection,S.swipeThreshold)?Tp(gA,x,ae,{discrete:!0}):Tp(mA,j,ae,{discrete:!0}),te.addEventListener("click",Ne=>Ne.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),bA=t=>{const{__scopeToast:e,children:n,...r}=t,a=$m(Vm,e),[o,u]=P.useState(!1),[c,f]=P.useState(!1);return SA(()=>u(!0)),P.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),c?null:s.jsx(zm,{asChild:!0,children:s.jsx(Rh,{...r,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},wA="ToastTitle",Ab=P.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Jn.div,{...r,ref:e})});Ab.displayName=wA;var NA="ToastDescription",_b=P.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(Jn.div,{...r,ref:e})});_b.displayName=NA;var Pb="ToastAction",kb=P.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?s.jsx(Eb,{altText:n,asChild:!0,children:s.jsx(Xv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Pb}\`. Expected non-empty \`string\`.`),null)});kb.displayName=Pb;var Tb="ToastClose",Xv=P.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,a=xA(Tb,n);return s.jsx(Eb,{asChild:!0,children:s.jsx(Jn.button,{type:"button",...r,ref:e,onClick:Kn(t.onClick,a.onClose)})})});Xv.displayName=Tb;var Eb=P.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...a}=t;return s.jsx(Jn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:e})});function Lb(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),jA(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const u=r.dataset.radixToastAnnounceAlt;u&&e.push(u)}else e.push(...Lb(r))}}),e}function Tp(t,e,n,{discrete:r}){const a=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?gb(a,o):a.dispatchEvent(o)}var N2=(t,e,n=0)=>{const r=Math.abs(t.x),a=Math.abs(t.y),o=r>a;return e==="left"||e==="right"?o&&r>n:!o&&a>n};function SA(t=()=>{}){const e=$a(t);ji(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function jA(t){return t.nodeType===t.ELEMENT_NODE}function CA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function u0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var AA=wb,Db=Sb,Rb=Cb,Ib=Ab,Fb=_b,Ob=kb,Mb=Xv;function Bb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Bb(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qb(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Bb(t))&&(r&&(r+=" "),r+=e);return r}const S2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,j2=qb,Hm=(t,e)=>n=>{var r;if(e?.variants==null)return j2(t,n?.class,n?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(p=>{const m=n?.[p],y=o?.[p];if(m===null)return null;const j=S2(m)||S2(y);return a[p][j]}),c=n&&Object.entries(n).reduce((p,m)=>{let[y,j]=m;return j===void 0||(p[y]=j),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:y,className:j,...x}=m;return Object.entries(x).every(D=>{let[S,k]=D;return Array.isArray(k)?k.includes({...o,...c}[S]):{...o,...c}[S]===k})?[...p,y,j]:p},[]);return j2(t,u,f,n?.class,n?.className)};const _A=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ub=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");var PA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kA=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:u,...c},f)=>P.createElement("svg",{ref:f,...PA,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ub("lucide",a),...c},[...u.map(([p,m])=>P.createElement(p,m)),...Array.isArray(o)?o:[o]]));const Fn=(t,e)=>{const n=P.forwardRef(({className:r,...a},o)=>P.createElement(kA,{ref:o,iconNode:e,className:Ub(`lucide-${_A(t)}`,r),...a}));return n.displayName=`${t}`,n};const df=Fn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const TA=Fn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const EA=Fn("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const LA=Fn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const C2=Fn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Jv=Fn("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const DA=Fn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Md=Fn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const zd=Fn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Qp=Fn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const RA=Fn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const iv=Fn("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const $d=Fn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const av=Fn("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);const Ih=Fn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Wm=Fn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vc=Fn("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const Ta=Fn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const dm=Fn("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const zb=Fn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const A2=Fn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const IA=Fn("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);const fm=Fn("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const FA=Fn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ov=Fn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const OA=Fn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const hu=Fn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const ru=Fn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const MA=Fn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Gm=Fn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const lv=Fn("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const oo=Fn("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const Vu=Fn("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const $b=Fn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const sl=Fn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const cv=Fn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const ff=Fn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const BA=Fn("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const e1=Fn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const qA=Fn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const UA=Fn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const zA=Fn("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);const lr=Fn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const $A=Fn("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const VA=Fn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Hc=Fn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const HA=Fn("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const uh=Fn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const WA=Fn("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const t1=Fn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),n1="-",GA=t=>{const e=QA(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const c=u.split(n1);return c[0]===""&&c.length!==1&&c.shift(),Vb(c,e)||KA(u)},getConflictingClassGroupIds:(u,c)=>{const f=n[u]||[];return c&&r[u]?[...f,...r[u]]:f}}},Vb=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),a=r?Vb(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(n1);return e.validators.find(({validator:u})=>u(o))?.classGroupId},_2=/^\[(.+)\]$/,KA=t=>{if(_2.test(t)){const e=_2.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},QA=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return YA(Object.entries(t.classGroups),n).forEach(([o,u])=>{uv(u,r,o,e)}),r},uv=(t,e,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:P2(e,a);o.classGroupId=n;return}if(typeof a=="function"){if(ZA(a)){uv(a(r),e,n,r);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,u])=>{uv(u,P2(e,o),n,r)})})},P2=(t,e)=>{let n=t;return e.split(n1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ZA=t=>t.isThemeGetter,YA=(t,e)=>e?t.map(([n,r])=>{const a=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([u,c])=>[e+u,c])):o);return[n,a]}):t,XA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const a=(o,u)=>{n.set(o,u),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let u=n.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return a(o,u),u},set(o,u){n.has(o)?n.set(o,u):a(o,u)}}},Hb="!",JA=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,a=e[0],o=e.length,u=c=>{const f=[];let p=0,m=0,y;for(let k=0;k<c.length;k++){let A=c[k];if(p===0){if(A===a&&(r||c.slice(k,k+o)===e)){f.push(c.slice(m,k)),m=k+o;continue}if(A==="/"){y=k;continue}}A==="["?p++:A==="]"&&p--}const j=f.length===0?c:c.substring(m),x=j.startsWith(Hb),D=x?j.substring(1):j,S=y&&y>m?y-m:void 0;return{modifiers:f,hasImportantModifier:x,baseClassName:D,maybePostfixModifierPosition:S}};return n?c=>n({className:c,parseClassName:u}):u},e_=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},t_=t=>({cache:XA(t.cacheSize),parseClassName:JA(t),...GA(t)}),n_=/\s+/,r_=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=e,o=[],u=t.trim().split(n_);let c="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{modifiers:m,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:x}=n(p);let D=!!x,S=r(D?j.substring(0,x):j);if(!S){if(!D){c=p+(c.length>0?" "+c:c);continue}if(S=r(j),!S){c=p+(c.length>0?" "+c:c);continue}D=!1}const k=e_(m).join(":"),A=y?k+Hb:k,I=A+S;if(o.includes(I))continue;o.push(I);const R=a(S,D);for(let $=0;$<R.length;++$){const N=R[$];o.push(A+N)}c=p+(c.length>0?" "+c:c)}return c};function s_(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Wb(e))&&(r&&(r+=" "),r+=n);return r}const Wb=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Wb(t[r]))&&(n&&(n+=" "),n+=e);return n};function i_(t,...e){let n,r,a,o=u;function u(f){const p=e.reduce((m,y)=>y(m),t());return n=t_(p),r=n.cache.get,a=n.cache.set,o=c,c(f)}function c(f){const p=r(f);if(p)return p;const m=r_(f,n);return a(f,m),m}return function(){return o(s_.apply(null,arguments))}}const xs=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Gb=/^\[(?:([a-z-]+):)?(.+)\]$/i,a_=/^\d+\/\d+$/,o_=new Set(["px","full","screen"]),l_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,c_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,d_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lc=t=>Vd(t)||o_.has(t)||a_.test(t),Wc=t=>hf(t,"length",b_),Vd=t=>!!t&&!Number.isNaN(Number(t)),d0=t=>hf(t,"number",Vd),Wf=t=>!!t&&Number.isInteger(Number(t)),h_=t=>t.endsWith("%")&&Vd(t.slice(0,-1)),nr=t=>Gb.test(t),Gc=t=>l_.test(t),p_=new Set(["length","size","percentage"]),m_=t=>hf(t,p_,Kb),g_=t=>hf(t,"position",Kb),v_=new Set(["image","url"]),x_=t=>hf(t,v_,N_),y_=t=>hf(t,"",w_),Gf=()=>!0,hf=(t,e,n)=>{const r=Gb.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},b_=t=>c_.test(t)&&!u_.test(t),Kb=()=>!1,w_=t=>d_.test(t),N_=t=>f_.test(t),S_=()=>{const t=xs("colors"),e=xs("spacing"),n=xs("blur"),r=xs("brightness"),a=xs("borderColor"),o=xs("borderRadius"),u=xs("borderSpacing"),c=xs("borderWidth"),f=xs("contrast"),p=xs("grayscale"),m=xs("hueRotate"),y=xs("invert"),j=xs("gap"),x=xs("gradientColorStops"),D=xs("gradientColorStopPositions"),S=xs("inset"),k=xs("margin"),A=xs("opacity"),I=xs("padding"),R=xs("saturate"),$=xs("scale"),N=xs("sepia"),xe=xs("skew"),re=xs("space"),K=xs("translate"),W=()=>["auto","contain","none"],he=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",nr,e],E=()=>[nr,e],Q=()=>["",lc,Wc],X=()=>["auto",Vd,nr],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ce=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>["start","end","center","between","around","evenly","stretch"],Ne=()=>["","0",nr],Re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[Vd,nr];return{cacheSize:500,separator:":",theme:{colors:[Gf],spacing:[lc,Wc],blur:["none","",Gc,nr],brightness:ne(),borderColor:[t],borderRadius:["none","","full",Gc,nr],borderSpacing:E(),borderWidth:Q(),contrast:ne(),grayscale:Ne(),hueRotate:ne(),invert:Ne(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[h_,Wc],inset:z(),margin:z(),opacity:ne(),padding:E(),saturate:ne(),scale:ne(),sepia:Ne(),skew:ne(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",nr]}],container:["container"],columns:[{columns:[Gc]}],"break-after":[{"break-after":Re()}],"break-before":[{"break-before":Re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),nr]}],overflow:[{overflow:he()}],"overflow-x":[{"overflow-x":he()}],"overflow-y":[{"overflow-y":he()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wf,nr]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nr]}],grow:[{grow:Ne()}],shrink:[{shrink:Ne()}],order:[{order:["first","last","none",Wf,nr]}],"grid-cols":[{"grid-cols":[Gf]}],"col-start-end":[{col:["auto",{span:["full",Wf,nr]},nr]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Gf]}],"row-start-end":[{row:["auto",{span:[Wf,nr]},nr]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nr]}],gap:[{gap:[j]}],"gap-x":[{"gap-x":[j]}],"gap-y":[{"gap-y":[j]}],"justify-content":[{justify:["normal",...ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[re]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[re]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nr,e]}],"min-w":[{"min-w":[nr,e,"min","max","fit"]}],"max-w":[{"max-w":[nr,e,"none","full","min","max","fit","prose",{screen:[Gc]},Gc]}],h:[{h:[nr,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nr,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nr,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nr,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gc,Wc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",d0]}],"font-family":[{font:[Gf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nr]}],"line-clamp":[{"line-clamp":["none",Vd,d0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",lc,nr]}],"list-image":[{"list-image":["none",nr]}],"list-style-type":[{list:["none","disc","decimal",nr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",lc,Wc]}],"underline-offset":[{"underline-offset":["auto",lc,nr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),g_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",m_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},x_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...Ce(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:Ce()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Ce()]}],"outline-offset":[{"outline-offset":[lc,nr]}],"outline-w":[{outline:[lc,Wc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[lc,Wc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gc,y_]}],"shadow-color":[{shadow:[Gf]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Gc,nr]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[y]}],saturate:[{saturate:[R]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nr]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",nr]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",nr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$]}],"scale-x":[{"scale-x":[$]}],"scale-y":[{"scale-y":[$]}],rotate:[{rotate:[Wf,nr]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[xe]}],"skew-y":[{"skew-y":[xe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nr]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[lc,Wc,d0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},j_=i_(S_);function Sn(...t){return j_(qb(t))}const C_=AA,Qb=P.forwardRef(({className:t,...e},n)=>s.jsx(Db,{ref:n,className:Sn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Qb.displayName=Db.displayName;const A_=Hm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Zb=P.forwardRef(({className:t,variant:e,...n},r)=>s.jsx(Rb,{ref:r,className:Sn(A_({variant:e}),t),...n}));Zb.displayName=Rb.displayName;const __=P.forwardRef(({className:t,...e},n)=>s.jsx(Ob,{ref:n,className:Sn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));__.displayName=Ob.displayName;const Yb=P.forwardRef(({className:t,...e},n)=>s.jsx(Mb,{ref:n,className:Sn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(t1,{className:"h-4 w-4"})}));Yb.displayName=Mb.displayName;const Xb=P.forwardRef(({className:t,...e},n)=>s.jsx(Ib,{ref:n,className:Sn("text-sm font-semibold",t),...e}));Xb.displayName=Ib.displayName;const Jb=P.forwardRef(({className:t,...e},n)=>s.jsx(Fb,{ref:n,className:Sn("text-sm opacity-90",t),...e}));Jb.displayName=Fb.displayName;function P_(){const{toasts:t}=Ha();return s.jsxs(C_,{children:[t.map(function({id:e,title:n,description:r,action:a,...o}){return s.jsxs(Zb,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(Xb,{children:n}),r&&s.jsx(Jb,{children:r})]}),a,s.jsx(Yb,{})]},e)}),s.jsx(Qb,{})]})}var k_=z5[" useId ".trim().toString()]||(()=>{}),T_=0;function eu(t){const[e,n]=P.useState(k_());return ji(()=>{n(r=>r??String(T_++))},[t]),e?`radix-${e}`:""}const E_=["top","right","bottom","left"],su=Math.min,uo=Math.max,hm=Math.round,Ep=Math.floor,Fl=t=>({x:t,y:t}),L_={left:"right",right:"left",bottom:"top",top:"bottom"},D_={start:"end",end:"start"};function dv(t,e,n){return uo(t,su(e,n))}function gc(t,e){return typeof t=="function"?t(e):t}function vc(t){return t.split("-")[0]}function pf(t){return t.split("-")[1]}function r1(t){return t==="x"?"y":"x"}function s1(t){return t==="y"?"height":"width"}function iu(t){return["top","bottom"].includes(vc(t))?"y":"x"}function i1(t){return r1(iu(t))}function R_(t,e,n){n===void 0&&(n=!1);const r=pf(t),a=i1(t),o=s1(a);let u=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(u=pm(u)),[u,pm(u)]}function I_(t){const e=pm(t);return[fv(t),e,fv(e)]}function fv(t){return t.replace(/start|end/g,e=>D_[e])}function F_(t,e,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:r:e?r:a;case"left":case"right":return e?o:u;default:return[]}}function O_(t,e,n,r){const a=pf(t);let o=F_(vc(t),n==="start",r);return a&&(o=o.map(u=>u+"-"+a),e&&(o=o.concat(o.map(fv)))),o}function pm(t){return t.replace(/left|right|bottom|top/g,e=>L_[e])}function M_(t){return{top:0,right:0,bottom:0,left:0,...t}}function ew(t){return typeof t!="number"?M_(t):{top:t,right:t,bottom:t,left:t}}function mm(t){const{x:e,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:e,right:e+r,bottom:n+a,x:e,y:n}}function k2(t,e,n){let{reference:r,floating:a}=t;const o=iu(e),u=i1(e),c=s1(u),f=vc(e),p=o==="y",m=r.x+r.width/2-a.width/2,y=r.y+r.height/2-a.height/2,j=r[c]/2-a[c]/2;let x;switch(f){case"top":x={x:m,y:r.y-a.height};break;case"bottom":x={x:m,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y};break;case"left":x={x:r.x-a.width,y};break;default:x={x:r.x,y:r.y}}switch(pf(e)){case"start":x[u]-=j*(n&&p?-1:1);break;case"end":x[u]+=j*(n&&p?-1:1);break}return x}const B_=async(t,e,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:u}=n,c=o.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y}=k2(p,r,f),j=r,x={},D=0;for(let S=0;S<c.length;S++){const{name:k,fn:A}=c[S],{x:I,y:R,data:$,reset:N}=await A({x:m,y,initialPlacement:r,placement:j,strategy:a,middlewareData:x,rects:p,platform:u,elements:{reference:t,floating:e}});m=I??m,y=R??y,x={...x,[k]:{...x[k],...$}},N&&D<=50&&(D++,typeof N=="object"&&(N.placement&&(j=N.placement),N.rects&&(p=N.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:a}):N.rects),{x:m,y}=k2(p,j,f)),S=-1)}return{x:m,y,placement:j,strategy:a,middlewareData:x}};async function dh(t,e){var n;e===void 0&&(e={});const{x:r,y:a,platform:o,rects:u,elements:c,strategy:f}=t,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:j=!1,padding:x=0}=gc(e,t),D=ew(x),k=c[j?y==="floating"?"reference":"floating":y],A=mm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:p,rootBoundary:m,strategy:f})),I=y==="floating"?{x:r,y:a,width:u.floating.width,height:u.floating.height}:u.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),$=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},N=mm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:I,offsetParent:R,strategy:f}):I);return{top:(A.top-N.top+D.top)/$.y,bottom:(N.bottom-A.bottom+D.bottom)/$.y,left:(A.left-N.left+D.left)/$.x,right:(N.right-A.right+D.right)/$.x}}const q_=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:a,rects:o,platform:u,elements:c,middlewareData:f}=e,{element:p,padding:m=0}=gc(t,e)||{};if(p==null)return{};const y=ew(m),j={x:n,y:r},x=i1(a),D=s1(x),S=await u.getDimensions(p),k=x==="y",A=k?"top":"left",I=k?"bottom":"right",R=k?"clientHeight":"clientWidth",$=o.reference[D]+o.reference[x]-j[x]-o.floating[D],N=j[x]-o.reference[x],xe=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let re=xe?xe[R]:0;(!re||!await(u.isElement==null?void 0:u.isElement(xe)))&&(re=c.floating[R]||o.floating[D]);const K=$/2-N/2,W=re/2-S[D]/2-1,he=su(y[A],W),z=su(y[I],W),E=he,Q=re-S[D]-z,X=re/2-S[D]/2+K,ie=dv(E,X,Q),Ce=!f.arrow&&pf(a)!=null&&X!==ie&&o.reference[D]/2-(X<E?he:z)-S[D]/2<0,te=Ce?X<E?X-E:X-Q:0;return{[x]:j[x]+te,data:{[x]:ie,centerOffset:X-ie-te,...Ce&&{alignmentOffset:te}},reset:Ce}}}),U_=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:a,middlewareData:o,rects:u,initialPlacement:c,platform:f,elements:p}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:j,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:S=!0,...k}=gc(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=vc(a),I=iu(c),R=vc(c)===c,$=await(f.isRTL==null?void 0:f.isRTL(p.floating)),N=j||(R||!S?[pm(c)]:I_(c)),xe=D!=="none";!j&&xe&&N.push(...O_(c,S,D,$));const re=[c,...N],K=await dh(e,k),W=[];let he=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&W.push(K[A]),y){const X=R_(a,u,$);W.push(K[X[0]],K[X[1]])}if(he=[...he,{placement:a,overflows:W}],!W.every(X=>X<=0)){var z,E;const X=(((z=o.flip)==null?void 0:z.index)||0)+1,ie=re[X];if(ie)return{data:{index:X,overflows:he},reset:{placement:ie}};let Ce=(E=he.filter(te=>te.overflows[0]<=0).sort((te,ae)=>te.overflows[1]-ae.overflows[1])[0])==null?void 0:E.placement;if(!Ce)switch(x){case"bestFit":{var Q;const te=(Q=he.filter(ae=>{if(xe){const Ne=iu(ae.placement);return Ne===I||Ne==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(Ne=>Ne>0).reduce((Ne,Re)=>Ne+Re,0)]).sort((ae,Ne)=>ae[1]-Ne[1])[0])==null?void 0:Q[0];te&&(Ce=te);break}case"initialPlacement":Ce=c;break}if(a!==Ce)return{reset:{placement:Ce}}}return{}}}};function T2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function E2(t){return E_.some(e=>t[e]>=0)}const z_=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...a}=gc(t,e);switch(r){case"referenceHidden":{const o=await dh(e,{...a,elementContext:"reference"}),u=T2(o,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:E2(u)}}}case"escaped":{const o=await dh(e,{...a,altBoundary:!0}),u=T2(o,n.floating);return{data:{escapedOffsets:u,escaped:E2(u)}}}default:return{}}}}};async function $_(t,e){const{placement:n,platform:r,elements:a}=t,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),u=vc(n),c=pf(n),f=iu(n)==="y",p=["left","top"].includes(u)?-1:1,m=o&&f?-1:1,y=gc(e,t);let{mainAxis:j,crossAxis:x,alignmentAxis:D}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof D=="number"&&(x=c==="end"?D*-1:D),f?{x:x*m,y:j*p}:{x:j*p,y:x*m}}const V_=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:a,y:o,placement:u,middlewareData:c}=e,f=await $_(e,t);return u===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:u}}}}},H_=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:a}=e,{mainAxis:o=!0,crossAxis:u=!1,limiter:c={fn:k=>{let{x:A,y:I}=k;return{x:A,y:I}}},...f}=gc(t,e),p={x:n,y:r},m=await dh(e,f),y=iu(vc(a)),j=r1(y);let x=p[j],D=p[y];if(o){const k=j==="y"?"top":"left",A=j==="y"?"bottom":"right",I=x+m[k],R=x-m[A];x=dv(I,x,R)}if(u){const k=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=D+m[k],R=D-m[A];D=dv(I,D,R)}const S=c.fn({...e,[j]:x,[y]:D});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[j]:o,[y]:u}}}}}},W_=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:a,rects:o,middlewareData:u}=e,{offset:c=0,mainAxis:f=!0,crossAxis:p=!0}=gc(t,e),m={x:n,y:r},y=iu(a),j=r1(y);let x=m[j],D=m[y];const S=gc(c,e),k=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(f){const R=j==="y"?"height":"width",$=o.reference[j]-o.floating[R]+k.mainAxis,N=o.reference[j]+o.reference[R]-k.mainAxis;x<$?x=$:x>N&&(x=N)}if(p){var A,I;const R=j==="y"?"width":"height",$=["top","left"].includes(vc(a)),N=o.reference[y]-o.floating[R]+($&&((A=u.offset)==null?void 0:A[y])||0)+($?0:k.crossAxis),xe=o.reference[y]+o.reference[R]+($?0:((I=u.offset)==null?void 0:I[y])||0)-($?k.crossAxis:0);D<N?D=N:D>xe&&(D=xe)}return{[j]:x,[y]:D}}}},G_=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:a,rects:o,platform:u,elements:c}=e,{apply:f=()=>{},...p}=gc(t,e),m=await dh(e,p),y=vc(a),j=pf(a),x=iu(a)==="y",{width:D,height:S}=o.floating;let k,A;y==="top"||y==="bottom"?(k=y,A=j===(await(u.isRTL==null?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(A=y,k=j==="end"?"top":"bottom");const I=S-m.top-m.bottom,R=D-m.left-m.right,$=su(S-m[k],I),N=su(D-m[A],R),xe=!e.middlewareData.shift;let re=$,K=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(K=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(re=I),xe&&!j){const he=uo(m.left,0),z=uo(m.right,0),E=uo(m.top,0),Q=uo(m.bottom,0);x?K=D-2*(he!==0||z!==0?he+z:uo(m.left,m.right)):re=S-2*(E!==0||Q!==0?E+Q:uo(m.top,m.bottom))}await f({...e,availableWidth:K,availableHeight:re});const W=await u.getDimensions(c.floating);return D!==W.width||S!==W.height?{reset:{rects:!0}}:{}}}};function Km(){return typeof window<"u"}function mf(t){return tw(t)?(t.nodeName||"").toLowerCase():"#document"}function po(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function $l(t){var e;return(e=(tw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tw(t){return Km()?t instanceof Node||t instanceof po(t).Node:!1}function cl(t){return Km()?t instanceof Element||t instanceof po(t).Element:!1}function ql(t){return Km()?t instanceof HTMLElement||t instanceof po(t).HTMLElement:!1}function L2(t){return!Km()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof po(t).ShadowRoot}function Fh(t){const{overflow:e,overflowX:n,overflowY:r,display:a}=ul(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(a)}function K_(t){return["table","td","th"].includes(mf(t))}function Qm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function a1(t){const e=o1(),n=cl(t)?ul(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Q_(t){let e=au(t);for(;ql(e)&&!nf(e);){if(a1(e))return e;if(Qm(e))return null;e=au(e)}return null}function o1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nf(t){return["html","body","#document"].includes(mf(t))}function ul(t){return po(t).getComputedStyle(t)}function Zm(t){return cl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function au(t){if(mf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||L2(t)&&t.host||$l(t);return L2(e)?e.host:e}function nw(t){const e=au(t);return nf(e)?t.ownerDocument?t.ownerDocument.body:t.body:ql(e)&&Fh(e)?e:nw(e)}function fh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=nw(t),o=a===((r=t.ownerDocument)==null?void 0:r.body),u=po(a);if(o){const c=hv(u);return e.concat(u,u.visualViewport||[],Fh(a)?a:[],c&&n?fh(c):[])}return e.concat(a,fh(a,[],n))}function hv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rw(t){const e=ul(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=ql(t),o=a?t.offsetWidth:n,u=a?t.offsetHeight:r,c=hm(n)!==o||hm(r)!==u;return c&&(n=o,r=u),{width:n,height:r,$:c}}function l1(t){return cl(t)?t:t.contextElement}function Hd(t){const e=l1(t);if(!ql(e))return Fl(1);const n=e.getBoundingClientRect(),{width:r,height:a,$:o}=rw(e);let u=(o?hm(n.width):n.width)/r,c=(o?hm(n.height):n.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const Z_=Fl(0);function sw(t){const e=po(t);return!o1()||!e.visualViewport?Z_:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y_(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==po(t)?!1:e}function Hu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),o=l1(t);let u=Fl(1);e&&(r?cl(r)&&(u=Hd(r)):u=Hd(t));const c=Y_(o,n,r)?sw(o):Fl(0);let f=(a.left+c.x)/u.x,p=(a.top+c.y)/u.y,m=a.width/u.x,y=a.height/u.y;if(o){const j=po(o),x=r&&cl(r)?po(r):r;let D=j,S=hv(D);for(;S&&r&&x!==D;){const k=Hd(S),A=S.getBoundingClientRect(),I=ul(S),R=A.left+(S.clientLeft+parseFloat(I.paddingLeft))*k.x,$=A.top+(S.clientTop+parseFloat(I.paddingTop))*k.y;f*=k.x,p*=k.y,m*=k.x,y*=k.y,f+=R,p+=$,D=po(S),S=hv(D)}}return mm({width:m,height:y,x:f,y:p})}function c1(t,e){const n=Zm(t).scrollLeft;return e?e.left+n:Hu($l(t)).left+n}function iw(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=r.left+e.scrollLeft-(n?0:c1(t,r)),o=r.top+e.scrollTop;return{x:a,y:o}}function X_(t){let{elements:e,rect:n,offsetParent:r,strategy:a}=t;const o=a==="fixed",u=$l(r),c=e?Qm(e.floating):!1;if(r===u||c&&o)return n;let f={scrollLeft:0,scrollTop:0},p=Fl(1);const m=Fl(0),y=ql(r);if((y||!y&&!o)&&((mf(r)!=="body"||Fh(u))&&(f=Zm(r)),ql(r))){const x=Hu(r);p=Hd(r),m.x=x.x+r.clientLeft,m.y=x.y+r.clientTop}const j=u&&!y&&!o?iw(u,f,!0):Fl(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-f.scrollLeft*p.x+m.x+j.x,y:n.y*p.y-f.scrollTop*p.y+m.y+j.y}}function J_(t){return Array.from(t.getClientRects())}function eP(t){const e=$l(t),n=Zm(t),r=t.ownerDocument.body,a=uo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=uo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+c1(t);const c=-n.scrollTop;return ul(r).direction==="rtl"&&(u+=uo(e.clientWidth,r.clientWidth)-a),{width:a,height:o,x:u,y:c}}function tP(t,e){const n=po(t),r=$l(t),a=n.visualViewport;let o=r.clientWidth,u=r.clientHeight,c=0,f=0;if(a){o=a.width,u=a.height;const p=o1();(!p||p&&e==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:o,height:u,x:c,y:f}}function nP(t,e){const n=Hu(t,!0,e==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,o=ql(t)?Hd(t):Fl(1),u=t.clientWidth*o.x,c=t.clientHeight*o.y,f=a*o.x,p=r*o.y;return{width:u,height:c,x:f,y:p}}function D2(t,e,n){let r;if(e==="viewport")r=tP(t,n);else if(e==="document")r=eP($l(t));else if(cl(e))r=nP(e,n);else{const a=sw(t);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return mm(r)}function aw(t,e){const n=au(t);return n===e||!cl(n)||nf(n)?!1:ul(n).position==="fixed"||aw(n,e)}function rP(t,e){const n=e.get(t);if(n)return n;let r=fh(t,[],!1).filter(c=>cl(c)&&mf(c)!=="body"),a=null;const o=ul(t).position==="fixed";let u=o?au(t):t;for(;cl(u)&&!nf(u);){const c=ul(u),f=a1(u);!f&&c.position==="fixed"&&(a=null),(o?!f&&!a:!f&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Fh(u)&&!f&&aw(t,u))?r=r.filter(m=>m!==u):a=c,u=au(u)}return e.set(t,r),r}function sP(t){let{element:e,boundary:n,rootBoundary:r,strategy:a}=t;const u=[...n==="clippingAncestors"?Qm(e)?[]:rP(e,this._c):[].concat(n),r],c=u[0],f=u.reduce((p,m)=>{const y=D2(e,m,a);return p.top=uo(y.top,p.top),p.right=su(y.right,p.right),p.bottom=su(y.bottom,p.bottom),p.left=uo(y.left,p.left),p},D2(e,c,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function iP(t){const{width:e,height:n}=rw(t);return{width:e,height:n}}function aP(t,e,n){const r=ql(e),a=$l(e),o=n==="fixed",u=Hu(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=Fl(0);if(r||!r&&!o)if((mf(e)!=="body"||Fh(a))&&(c=Zm(e)),r){const j=Hu(e,!0,o,e);f.x=j.x+e.clientLeft,f.y=j.y+e.clientTop}else a&&(f.x=c1(a));const p=a&&!r&&!o?iw(a,c):Fl(0),m=u.left+c.scrollLeft-f.x-p.x,y=u.top+c.scrollTop-f.y-p.y;return{x:m,y,width:u.width,height:u.height}}function f0(t){return ul(t).position==="static"}function R2(t,e){if(!ql(t)||ul(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return $l(t)===n&&(n=n.ownerDocument.body),n}function ow(t,e){const n=po(t);if(Qm(t))return n;if(!ql(t)){let a=au(t);for(;a&&!nf(a);){if(cl(a)&&!f0(a))return a;a=au(a)}return n}let r=R2(t,e);for(;r&&K_(r)&&f0(r);)r=R2(r,e);return r&&nf(r)&&f0(r)&&!a1(r)?n:r||Q_(t)||n}const oP=async function(t){const e=this.getOffsetParent||ow,n=this.getDimensions,r=await n(t.floating);return{reference:aP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lP(t){return ul(t).direction==="rtl"}const cP={convertOffsetParentRelativeRectToViewportRelativeRect:X_,getDocumentElement:$l,getClippingRect:sP,getOffsetParent:ow,getElementRects:oP,getClientRects:J_,getDimensions:iP,getScale:Hd,isElement:cl,isRTL:lP};function lw(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function uP(t,e){let n=null,r;const a=$l(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function u(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const p=t.getBoundingClientRect(),{left:m,top:y,width:j,height:x}=p;if(c||e(),!j||!x)return;const D=Ep(y),S=Ep(a.clientWidth-(m+j)),k=Ep(a.clientHeight-(y+x)),A=Ep(m),R={rootMargin:-D+"px "+-S+"px "+-k+"px "+-A+"px",threshold:uo(0,su(1,f))||1};let $=!0;function N(xe){const re=xe[0].intersectionRatio;if(re!==f){if(!$)return u();re?u(!1,re):r=setTimeout(()=>{u(!1,1e-7)},1e3)}re===1&&!lw(p,t.getBoundingClientRect())&&u(),$=!1}try{n=new IntersectionObserver(N,{...R,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,R)}n.observe(t)}return u(!0),o}function dP(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,p=l1(t),m=a||o?[...p?fh(p):[],...fh(e)]:[];m.forEach(A=>{a&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const y=p&&c?uP(p,n):null;let j=-1,x=null;u&&(x=new ResizeObserver(A=>{let[I]=A;I&&I.target===p&&x&&(x.unobserve(e),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),n()}),p&&!f&&x.observe(p),x.observe(e));let D,S=f?Hu(t):null;f&&k();function k(){const A=Hu(t);S&&!lw(S,A)&&n(),S=A,D=requestAnimationFrame(k)}return n(),()=>{var A;m.forEach(I=>{a&&I.removeEventListener("scroll",n),o&&I.removeEventListener("resize",n)}),y?.(),(A=x)==null||A.disconnect(),x=null,f&&cancelAnimationFrame(D)}}const fP=V_,hP=H_,pP=U_,mP=G_,gP=z_,I2=q_,vP=W_,xP=(t,e,n)=>{const r=new Map,a={platform:cP,...n},o={...a.platform,_c:r};return B_(t,e,{...a,platform:o})};var Zp=typeof document<"u"?P.useLayoutEffect:P.useEffect;function gm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gm(t[r],e[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&t.$$typeof)&&!gm(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function cw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function F2(t,e){const n=cw(t);return Math.round(e*n)/n}function h0(t){const e=P.useRef(t);return Zp(()=>{e.current=t}),e}function yP(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:u}={},transform:c=!0,whileElementsMounted:f,open:p}=t,[m,y]=P.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[j,x]=P.useState(r);gm(j,r)||x(r);const[D,S]=P.useState(null),[k,A]=P.useState(null),I=P.useCallback(ae=>{ae!==xe.current&&(xe.current=ae,S(ae))},[]),R=P.useCallback(ae=>{ae!==re.current&&(re.current=ae,A(ae))},[]),$=o||D,N=u||k,xe=P.useRef(null),re=P.useRef(null),K=P.useRef(m),W=f!=null,he=h0(f),z=h0(a),E=h0(p),Q=P.useCallback(()=>{if(!xe.current||!re.current)return;const ae={placement:e,strategy:n,middleware:j};z.current&&(ae.platform=z.current),xP(xe.current,re.current,ae).then(Ne=>{const Re={...Ne,isPositioned:E.current!==!1};X.current&&!gm(K.current,Re)&&(K.current=Re,uf.flushSync(()=>{y(Re)}))})},[j,e,n,z,E]);Zp(()=>{p===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,y(ae=>({...ae,isPositioned:!1})))},[p]);const X=P.useRef(!1);Zp(()=>(X.current=!0,()=>{X.current=!1}),[]),Zp(()=>{if($&&(xe.current=$),N&&(re.current=N),$&&N){if(he.current)return he.current($,N,Q);Q()}},[$,N,Q,he,W]);const ie=P.useMemo(()=>({reference:xe,floating:re,setReference:I,setFloating:R}),[I,R]),Ce=P.useMemo(()=>({reference:$,floating:N}),[$,N]),te=P.useMemo(()=>{const ae={position:n,left:0,top:0};if(!Ce.floating)return ae;const Ne=F2(Ce.floating,m.x),Re=F2(Ce.floating,m.y);return c?{...ae,transform:"translate("+Ne+"px, "+Re+"px)",...cw(Ce.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Ne,top:Re}},[n,c,Ce.floating,m.x,m.y]);return P.useMemo(()=>({...m,update:Q,refs:ie,elements:Ce,floatingStyles:te}),[m,Q,ie,Ce,te])}const bP=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?I2({element:r.current,padding:a}).fn(n):{}:r?I2({element:r,padding:a}).fn(n):{}}}},wP=(t,e)=>({...fP(t),options:[t,e]}),NP=(t,e)=>({...hP(t),options:[t,e]}),SP=(t,e)=>({...vP(t),options:[t,e]}),jP=(t,e)=>({...pP(t),options:[t,e]}),CP=(t,e)=>({...mP(t),options:[t,e]}),AP=(t,e)=>({...gP(t),options:[t,e]}),_P=(t,e)=>({...bP(t),options:[t,e]});var PP="Arrow",uw=P.forwardRef((t,e)=>{const{children:n,width:r=10,height:a=5,...o}=t;return s.jsx(Jn.svg,{...o,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});uw.displayName=PP;var kP=uw;function dw(t){const[e,n]=P.useState(void 0);return ji(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let u,c;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;u=p.inlineSize,c=p.blockSize}else u=t.offsetWidth,c=t.offsetHeight;n({width:u,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var u1="Popper",[fw,Ym]=hl(u1),[TP,hw]=fw(u1),pw=t=>{const{__scopePopper:e,children:n}=t,[r,a]=P.useState(null);return s.jsx(TP,{scope:e,anchor:r,onAnchorChange:a,children:n})};pw.displayName=u1;var mw="PopperAnchor",gw=P.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...a}=t,o=hw(mw,n),u=P.useRef(null),c=Vr(e,u);return P.useEffect(()=>{o.onAnchorChange(r?.current||u.current)}),r?null:s.jsx(Jn.div,{...a,ref:c})});gw.displayName=mw;var d1="PopperContent",[EP,LP]=fw(d1),vw=P.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:u=0,arrowPadding:c=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:j=!1,updatePositionStrategy:x="optimized",onPlaced:D,...S}=t,k=hw(d1,n),[A,I]=P.useState(null),R=Vr(e,be=>I(be)),[$,N]=P.useState(null),xe=dw($),re=xe?.width??0,K=xe?.height??0,W=r+(o!=="center"?"-"+o:""),he=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},z=Array.isArray(p)?p:[p],E=z.length>0,Q={padding:he,boundary:z.filter(RP),altBoundary:E},{refs:X,floatingStyles:ie,placement:Ce,isPositioned:te,middlewareData:ae}=yP({strategy:"fixed",placement:W,whileElementsMounted:(...be)=>dP(...be,{animationFrame:x==="always"}),elements:{reference:k.anchor},middleware:[wP({mainAxis:a+K,alignmentAxis:u}),f&&NP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?SP():void 0,...Q}),f&&jP({...Q}),CP({...Q,apply:({elements:be,rects:Le,availableWidth:Oe,availableHeight:ze})=>{const{width:Ze,height:lt}=Le.reference,ut=be.floating.style;ut.setProperty("--radix-popper-available-width",`${Oe}px`),ut.setProperty("--radix-popper-available-height",`${ze}px`),ut.setProperty("--radix-popper-anchor-width",`${Ze}px`),ut.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),$&&_P({element:$,padding:c}),IP({arrowWidth:re,arrowHeight:K}),j&&AP({strategy:"referenceHidden",...Q})]}),[Ne,Re]=bw(Ce),ne=$a(D);ji(()=>{te&&ne?.()},[te,ne]);const O=ae.arrow?.x,L=ae.arrow?.y,oe=ae.arrow?.centerOffset!==0,[ve,ye]=P.useState();return ji(()=>{A&&ye(window.getComputedStyle(A).zIndex)},[A]),s.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:te?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[ae.transformOrigin?.x,ae.transformOrigin?.y].join(" "),...ae.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(EP,{scope:n,placedSide:Ne,onArrowChange:N,arrowX:O,arrowY:L,shouldHideArrow:oe,children:s.jsx(Jn.div,{"data-side":Ne,"data-align":Re,...S,ref:R,style:{...S.style,animation:te?void 0:"none"}})})})});vw.displayName=d1;var xw="PopperArrow",DP={top:"bottom",right:"left",bottom:"top",left:"right"},yw=P.forwardRef(function(e,n){const{__scopePopper:r,...a}=e,o=LP(xw,r),u=DP[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(kP,{...a,ref:n,style:{...a.style,display:"block"}})})});yw.displayName=xw;function RP(t){return t!==null}var IP=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:a}=e,u=a.arrow?.centerOffset!==0,c=u?0:t.arrowWidth,f=u?0:t.arrowHeight,[p,m]=bw(n),y={start:"0%",center:"50%",end:"100%"}[m],j=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+f/2;let D="",S="";return p==="bottom"?(D=u?y:`${j}px`,S=`${-f}px`):p==="top"?(D=u?y:`${j}px`,S=`${r.floating.height+f}px`):p==="right"?(D=`${-f}px`,S=u?y:`${x}px`):p==="left"&&(D=`${r.floating.width+f}px`,S=u?y:`${x}px`),{data:{x:D,y:S}}}});function bw(t){const[e,n="center"]=t.split("-");return[e,n]}var FP=pw,ww=gw,Nw=vw,Sw=yw,[Xm]=hl("Tooltip",[Ym]),f1=Ym(),jw="TooltipProvider",OP=700,O2="tooltip.open",[MP,Cw]=Xm(jw),Aw=t=>{const{__scopeTooltip:e,delayDuration:n=OP,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:o}=t,u=P.useRef(!0),c=P.useRef(!1),f=P.useRef(0);return P.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),s.jsx(MP,{scope:e,isOpenDelayedRef:u,delayDuration:n,onOpen:P.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:P.useCallback(p=>{c.current=p},[]),disableHoverableContent:a,children:o})};Aw.displayName=jw;var _w="Tooltip",[cF,Jm]=Xm(_w),pv="TooltipTrigger",BP=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=Jm(pv,n),o=Cw(pv,n),u=f1(n),c=P.useRef(null),f=Vr(e,c,a.onTriggerChange),p=P.useRef(!1),m=P.useRef(!1),y=P.useCallback(()=>p.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),s.jsx(ww,{asChild:!0,...u,children:s.jsx(Jn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:f,onPointerMove:Kn(t.onPointerMove,j=>{j.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:Kn(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:Kn(t.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Kn(t.onFocus,()=>{p.current||a.onOpen()}),onBlur:Kn(t.onBlur,a.onClose),onClick:Kn(t.onClick,a.onClose)})})});BP.displayName=pv;var qP="TooltipPortal",[uF,UP]=Xm(qP,{forceMount:void 0}),rf="TooltipContent",Pw=P.forwardRef((t,e)=>{const n=UP(rf,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...o}=t,u=Jm(rf,t.__scopeTooltip);return s.jsx(fu,{present:r||u.open,children:u.disableHoverableContent?s.jsx(kw,{side:a,...o,ref:e}):s.jsx(zP,{side:a,...o,ref:e})})}),zP=P.forwardRef((t,e)=>{const n=Jm(rf,t.__scopeTooltip),r=Cw(rf,t.__scopeTooltip),a=P.useRef(null),o=Vr(e,a),[u,c]=P.useState(null),{trigger:f,onClose:p}=n,m=a.current,{onPointerInTransitChange:y}=r,j=P.useCallback(()=>{c(null),y(!1)},[y]),x=P.useCallback((D,S)=>{const k=D.currentTarget,A={x:D.clientX,y:D.clientY},I=GP(A,k.getBoundingClientRect()),R=KP(A,I),$=QP(S.getBoundingClientRect()),N=YP([...R,...$]);c(N),y(!0)},[y]);return P.useEffect(()=>()=>j(),[j]),P.useEffect(()=>{if(f&&m){const D=k=>x(k,m),S=k=>x(k,f);return f.addEventListener("pointerleave",D),m.addEventListener("pointerleave",S),()=>{f.removeEventListener("pointerleave",D),m.removeEventListener("pointerleave",S)}}},[f,m,x,j]),P.useEffect(()=>{if(u){const D=S=>{const k=S.target,A={x:S.clientX,y:S.clientY},I=f?.contains(k)||m?.contains(k),R=!ZP(A,u);I?j():R&&(j(),p())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[f,m,u,p,j]),s.jsx(kw,{...t,ref:o})}),[$P,VP]=Xm(_w,{isInside:!1}),HP=mb("TooltipContent"),kw=P.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:u,...c}=t,f=Jm(rf,n),p=f1(n),{onClose:m}=f;return P.useEffect(()=>(document.addEventListener(O2,m),()=>document.removeEventListener(O2,m)),[m]),P.useEffect(()=>{if(f.trigger){const y=j=>{j.target?.contains(f.trigger)&&m()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[f.trigger,m]),s.jsx(Dh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:y=>y.preventDefault(),onDismiss:m,children:s.jsxs(Nw,{"data-state":f.stateAttribute,...p,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(HP,{children:r}),s.jsx($P,{scope:n,isInside:!0,children:s.jsx(lA,{id:f.contentId,role:"tooltip",children:a||r})})]})})});Pw.displayName=rf;var Tw="TooltipArrow",WP=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,a=f1(n);return VP(Tw,n).isInside?null:s.jsx(Sw,{...a,...r,ref:e})});WP.displayName=Tw;function GP(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,a,o)){case o:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function KP(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function QP(t){const{top:e,right:n,bottom:r,left:a}=t;return[{x:a,y:e},{x:n,y:e},{x:n,y:r},{x:a,y:r}]}function ZP(t,e){const{x:n,y:r}=t;let a=!1;for(let o=0,u=e.length-1;o<e.length;u=o++){const c=e[o].x,f=e[o].y,p=e[u].x,m=e[u].y;f>r!=m>r&&n<(p-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function YP(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),XP(e)}function XP(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const a=t[r];for(;e.length>=2;){const o=e[e.length-1],u=e[e.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const o=n[n.length-1],u=n[n.length-2];if((o.x-u.x)*(a.y-u.y)>=(o.y-u.y)*(a.x-u.x))n.pop();else break}n.push(a)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var JP=Aw,Ew=Pw;const e6=JP,t6=P.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(Ew,{ref:r,sideOffset:e,className:Sn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));t6.displayName=Ew.displayName;var Ar;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),u={};for(const c of o)u[c]=a[c];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(Ar||(Ar={}));var mv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(mv||(mv={}));const Gt=Ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pc=t=>{switch(typeof t){case"undefined":return Gt.undefined;case"string":return Gt.string;case"number":return isNaN(t)?Gt.nan:Gt.number;case"boolean":return Gt.boolean;case"function":return Gt.function;case"bigint":return Gt.bigint;case"symbol":return Gt.symbol;case"object":return Array.isArray(t)?Gt.array:t===null?Gt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Gt.promise:typeof Map<"u"&&t instanceof Map?Gt.map:typeof Set<"u"&&t instanceof Set?Gt.set:typeof Date<"u"&&t instanceof Date?Gt.date:Gt.object;default:return Gt.unknown}},St=Ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),n6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class mo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let c=r,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(n(u))):c[p]=c[p]||{_errors:[]},c=c[p],f++}}};return a(this),r}static assert(e){if(!(e instanceof mo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}mo.create=t=>new mo(t);const sf=(t,e)=>{let n;switch(t.code){case St.invalid_type:t.received===Gt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ar.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ar.joinValues(t.keys,", ")}`;break;case St.invalid_union:n="Invalid input";break;case St.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ar.joinValues(t.options)}`;break;case St.invalid_enum_value:n=`Invalid enum value. Expected ${Ar.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:n="Invalid function arguments";break;case St.invalid_return_type:n="Invalid function return type";break;case St.invalid_date:n="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ar.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case St.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case St.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case St.custom:n="Invalid input";break;case St.invalid_intersection_types:n="Intersection results could not be merged";break;case St.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ar.assertNever(t)}return{message:n}};let Lw=sf;function r6(t){Lw=t}function vm(){return Lw}const xm=t=>{const{data:e,path:n,errorMaps:r,issueData:a}=t,o=[...n,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let c="";const f=r.filter(p=>!!p).slice().reverse();for(const p of f)c=p(u,{data:e,defaultError:c}).message;return{...a,path:o,message:c}},s6=[];function Ut(t,e){const n=vm(),r=xm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===sf?void 0:sf].filter(a=>!!a)});t.common.issues.push(r)}class xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const a of n){if(a.status==="aborted")return $n;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const a of n){const o=await a.key,u=await a.value;r.push({key:o,value:u})}return xa.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const a of n){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return $n;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const $n=Object.freeze({status:"aborted"}),Bd=t=>({status:"dirty",value:t}),Ea=t=>({status:"valid",value:t}),gv=t=>t.status==="aborted",vv=t=>t.status==="dirty",Wu=t=>t.status==="valid",hh=t=>typeof Promise<"u"&&t instanceof Promise;function ym(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Dw(t,e,n,r,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var pn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pn||(pn={}));var Jf,eh;class Ul{constructor(e,n,r,a){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M2=(t,e)=>{if(Wu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new mo(t.common.issues);return this._error=n,this._error}}};function tr(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:a}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,c)=>{var f,p;const{message:m}=t;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(f=m??r)!==null&&f!==void 0?f:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??n)!==null&&p!==void 0?p:c.defaultError}},description:a}}class ur{get description(){return this._def.description}_getType(e){return pc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:pc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xa,ctx:{common:e.parent.common,data:e.data,parsedType:pc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(hh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const a={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)},o=this._parseSync({data:e,path:a.path,parent:a});return M2(a,o)}"~validate"(e){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return Wu(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>Wu(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pc(e)},a=this._parse({data:e,path:r.path,parent:r}),o=await(hh(a)?a:Promise.resolve(a));return M2(r,o)}refine(e,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,o)=>{const u=e(a),c=()=>o.addIssue({code:St.custom,...r(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(e){return new dl({schema:this,typeName:qn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ol.create(this,this._def)}nullable(){return uu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return al.create(this)}promise(){return of.create(this,this._def)}or(e){return vh.create([this,e],this._def)}and(e){return xh.create(this,e,this._def)}transform(e){return new dl({...tr(this._def),schema:this,typeName:qn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sh({...tr(this._def),innerType:this,defaultValue:n,typeName:qn.ZodDefault})}brand(){return new h1({typeName:qn.ZodBranded,type:this,...tr(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jh({...tr(this._def),innerType:this,catchValue:n,typeName:qn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Oh.create(this,e)}readonly(){return Ch.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const i6=/^c[^\s-]{8,}$/i,a6=/^[0-9a-z]+$/,o6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,l6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,c6=/^[a-z0-9_-]{21}$/i,u6=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,d6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,f6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,h6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let p0;const p6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,m6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,g6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,v6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,x6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,y6=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",b6=new RegExp(`^${Rw}$`);function Iw(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function w6(t){return new RegExp(`^${Iw(t)}$`)}function Fw(t){let e=`${Rw}T${Iw(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function N6(t,e){return!!((e==="v4"||!e)&&p6.test(t)||(e==="v6"||!e)&&g6.test(t))}function S6(t,e){if(!u6.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function j6(t,e){return!!((e==="v4"||!e)&&m6.test(t)||(e==="v6"||!e)&&v6.test(t))}class il extends ur{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Gt.string){const o=this._getOrReturnCtx(e);return Ut(o,{code:St.invalid_type,expected:Gt.string,received:o.parsedType}),$n}const r=new xa;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(a=this._getOrReturnCtx(e,a),u?Ut(a,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&Ut(a,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")f6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"email",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")p0||(p0=new RegExp(h6,"u")),p0.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"emoji",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")l6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"uuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")c6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"nanoid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")i6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")a6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cuid2",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")o6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"ulid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Ut(a,{validation:"url",code:St.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"regex",code:St.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Fw(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?b6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?w6(o).test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?d6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"duration",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?N6(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"ip",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?S6(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"jwt",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?j6(e.data,o.version)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cidr",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?x6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"base64",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?y6.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"base64url",code:St.invalid_string,message:o.message}),r.dirty()):Ar.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(a=>e.test(a),{validation:n,code:St.invalid_string,...pn.errToObj(r)})}_addCheck(e){return new il({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...pn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...pn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...pn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...pn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...pn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...pn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...pn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...pn.errToObj(n)})}nonempty(e){return this.min(1,pn.errToObj(e))}trim(){return new il({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new il({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new il({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}il.create=t=>{var e;return new il({checks:[],typeName:qn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...tr(t)})};function C6(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=n>r?n:r,o=parseInt(t.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return o%u/Math.pow(10,a)}class ou extends ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Gt.number){const o=this._getOrReturnCtx(e);return Ut(o,{code:St.invalid_type,expected:Gt.number,received:o.parsedType}),$n}let r;const a=new xa;for(const o of this._def.checks)o.kind==="int"?Ar.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?C6(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.not_finite,message:o.message}),a.dirty()):Ar.assertNever(o);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,pn.toString(n))}setLimit(e,n,r,a){return new ou({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:pn.toString(a)}]})}_addCheck(e){return new ou({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:pn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:pn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ar.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ou.create=t=>new ou({checks:[],typeName:qn.ZodNumber,coerce:t?.coerce||!1,...tr(t)});class lu extends ur{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Gt.bigint)return this._getInvalidInput(e);let r;const a=new xa;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ut(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):Ar.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ut(n,{code:St.invalid_type,expected:Gt.bigint,received:n.parsedType}),$n}gte(e,n){return this.setLimit("min",e,!0,pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,pn.toString(n))}setLimit(e,n,r,a){return new lu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:pn.toString(a)}]})}_addCheck(e){return new lu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:pn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}lu.create=t=>{var e;return new lu({checks:[],typeName:qn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...tr(t)})};class ph extends ur{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Gt.boolean){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.boolean,received:r.parsedType}),$n}return Ea(e.data)}}ph.create=t=>new ph({typeName:qn.ZodBoolean,coerce:t?.coerce||!1,...tr(t)});class Gu extends ur{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Gt.date){const o=this._getOrReturnCtx(e);return Ut(o,{code:St.invalid_type,expected:Gt.date,received:o.parsedType}),$n}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Ut(o,{code:St.invalid_date}),$n}const r=new xa;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ar.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:pn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:pn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Gu.create=t=>new Gu({checks:[],coerce:t?.coerce||!1,typeName:qn.ZodDate,...tr(t)});class bm extends ur{_parse(e){if(this._getType(e)!==Gt.symbol){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.symbol,received:r.parsedType}),$n}return Ea(e.data)}}bm.create=t=>new bm({typeName:qn.ZodSymbol,...tr(t)});class mh extends ur{_parse(e){if(this._getType(e)!==Gt.undefined){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.undefined,received:r.parsedType}),$n}return Ea(e.data)}}mh.create=t=>new mh({typeName:qn.ZodUndefined,...tr(t)});class gh extends ur{_parse(e){if(this._getType(e)!==Gt.null){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.null,received:r.parsedType}),$n}return Ea(e.data)}}gh.create=t=>new gh({typeName:qn.ZodNull,...tr(t)});class af extends ur{constructor(){super(...arguments),this._any=!0}_parse(e){return Ea(e.data)}}af.create=t=>new af({typeName:qn.ZodAny,...tr(t)});class qu extends ur{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ea(e.data)}}qu.create=t=>new qu({typeName:qn.ZodUnknown,...tr(t)});class xc extends ur{_parse(e){const n=this._getOrReturnCtx(e);return Ut(n,{code:St.invalid_type,expected:Gt.never,received:n.parsedType}),$n}}xc.create=t=>new xc({typeName:qn.ZodNever,...tr(t)});class wm extends ur{_parse(e){if(this._getType(e)!==Gt.undefined){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.void,received:r.parsedType}),$n}return Ea(e.data)}}wm.create=t=>new wm({typeName:qn.ZodVoid,...tr(t)});class al extends ur{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),a=this._def;if(n.parsedType!==Gt.array)return Ut(n,{code:St.invalid_type,expected:Gt.array,received:n.parsedType}),$n;if(a.exactLength!==null){const u=n.data.length>a.exactLength.value,c=n.data.length<a.exactLength.value;(u||c)&&(Ut(n,{code:u?St.too_big:St.too_small,minimum:c?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Ut(n,{code:St.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Ut(n,{code:St.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,c)=>a.type._parseAsync(new Ul(n,u,n.path,c)))).then(u=>xa.mergeArray(r,u));const o=[...n.data].map((u,c)=>a.type._parseSync(new Ul(n,u,n.path,c)));return xa.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new al({...this._def,minLength:{value:e,message:pn.toString(n)}})}max(e,n){return new al({...this._def,maxLength:{value:e,message:pn.toString(n)}})}length(e,n){return new al({...this._def,exactLength:{value:e,message:pn.toString(n)}})}nonempty(e){return this.min(1,e)}}al.create=(t,e)=>new al({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qn.ZodArray,...tr(e)});function Id(t){if(t instanceof Gs){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ol.create(Id(r))}return new Gs({...t._def,shape:()=>e})}else return t instanceof al?new al({...t._def,type:Id(t.element)}):t instanceof Ol?Ol.create(Id(t.unwrap())):t instanceof uu?uu.create(Id(t.unwrap())):t instanceof zl?zl.create(t.items.map(e=>Id(e))):t}class Gs extends ur{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ar.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Gt.object){const p=this._getOrReturnCtx(e);return Ut(p,{code:St.invalid_type,expected:Gt.object,received:p.parsedType}),$n}const{status:r,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof xc&&this._def.unknownKeys==="strip"))for(const p in a.data)u.includes(p)||c.push(p);const f=[];for(const p of u){const m=o[p],y=a.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new Ul(a,y,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof xc){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of c)f.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(p==="strict")c.length>0&&(Ut(a,{code:St.unrecognized_keys,keys:c}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of c){const y=a.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new Ul(a,y,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of f){const y=await m.key,j=await m.value;p.push({key:y,value:j,alwaysSet:m.alwaysSet})}return p}).then(p=>xa.mergeObjectSync(r,p)):xa.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return pn.errToObj,new Gs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o,u,c;const f=(u=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,r).message)!==null&&u!==void 0?u:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=pn.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new Gs({...this._def,unknownKeys:"strip"})}passthrough(){return new Gs({...this._def,unknownKeys:"passthrough"})}extend(e){return new Gs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Gs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Gs({...this._def,catchall:e})}pick(e){const n={};return Ar.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Gs({...this._def,shape:()=>n})}omit(e){const n={};return Ar.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Gs({...this._def,shape:()=>n})}deepPartial(){return Id(this)}partial(e){const n={};return Ar.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?n[r]=a:n[r]=a.optional()}),new Gs({...this._def,shape:()=>n})}required(e){const n={};return Ar.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Ol;)o=o._def.innerType;n[r]=o}}),new Gs({...this._def,shape:()=>n})}keyof(){return Ow(Ar.objectKeys(this.shape))}}Gs.create=(t,e)=>new Gs({shape:()=>t,unknownKeys:"strip",catchall:xc.create(),typeName:qn.ZodObject,...tr(e)});Gs.strictCreate=(t,e)=>new Gs({shape:()=>t,unknownKeys:"strict",catchall:xc.create(),typeName:qn.ZodObject,...tr(e)});Gs.lazycreate=(t,e)=>new Gs({shape:t,unknownKeys:"strip",catchall:xc.create(),typeName:qn.ZodObject,...tr(e)});class vh extends ur{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function a(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new mo(c.ctx.common.issues));return Ut(n,{code:St.invalid_union,unionErrors:u}),$n}if(n.common.async)return Promise.all(r.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const f of r){const p={...n,common:{...n.common,issues:[]},parent:null},m=f._parseSync({data:n.data,path:n.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(f=>new mo(f));return Ut(n,{code:St.invalid_union,unionErrors:c}),$n}}get options(){return this._def.options}}vh.create=(t,e)=>new vh({options:t,typeName:qn.ZodUnion,...tr(e)});const hc=t=>t instanceof bh?hc(t.schema):t instanceof dl?hc(t.innerType()):t instanceof wh?[t.value]:t instanceof cu?t.options:t instanceof Nh?Ar.objectValues(t.enum):t instanceof Sh?hc(t._def.innerType):t instanceof mh?[void 0]:t instanceof gh?[null]:t instanceof Ol?[void 0,...hc(t.unwrap())]:t instanceof uu?[null,...hc(t.unwrap())]:t instanceof h1||t instanceof Ch?hc(t.unwrap()):t instanceof jh?hc(t._def.innerType):[];class eg extends ur{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Gt.object)return Ut(n,{code:St.invalid_type,expected:Gt.object,received:n.parsedType}),$n;const r=this.discriminator,a=n.data[r],o=this.optionsMap.get(a);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(Ut(n,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$n)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const a=new Map;for(const o of n){const u=hc(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of u){if(a.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);a.set(c,o)}}return new eg({typeName:qn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...tr(r)})}}function xv(t,e){const n=pc(t),r=pc(e);if(t===e)return{valid:!0,data:t};if(n===Gt.object&&r===Gt.object){const a=Ar.objectKeys(e),o=Ar.objectKeys(t).filter(c=>a.indexOf(c)!==-1),u={...t,...e};for(const c of o){const f=xv(t[c],e[c]);if(!f.valid)return{valid:!1};u[c]=f.data}return{valid:!0,data:u}}else if(n===Gt.array&&r===Gt.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],c=e[o],f=xv(u,c);if(!f.valid)return{valid:!1};a.push(f.data)}return{valid:!0,data:a}}else return n===Gt.date&&r===Gt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xh extends ur{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=(o,u)=>{if(gv(o)||gv(u))return $n;const c=xv(o.value,u.value);return c.valid?((vv(o)||vv(u))&&n.dirty(),{status:n.value,value:c.data}):(Ut(r,{code:St.invalid_intersection_types}),$n)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xh.create=(t,e,n)=>new xh({left:t,right:e,typeName:qn.ZodIntersection,...tr(n)});class zl extends ur{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Gt.array)return Ut(r,{code:St.invalid_type,expected:Gt.array,received:r.parsedType}),$n;if(r.data.length<this._def.items.length)return Ut(r,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$n;!this._def.rest&&r.data.length>this._def.items.length&&(Ut(r,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((u,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Ul(r,u,r.path,c)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>xa.mergeArray(n,u)):xa.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new zl({...this._def,rest:e})}}zl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zl({items:t,typeName:qn.ZodTuple,rest:null,...tr(e)})};class yh extends ur{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Gt.object)return Ut(r,{code:St.invalid_type,expected:Gt.object,received:r.parsedType}),$n;const a=[],o=this._def.keyType,u=this._def.valueType;for(const c in r.data)a.push({key:o._parse(new Ul(r,c,r.path,c)),value:u._parse(new Ul(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?xa.mergeObjectAsync(n,a):xa.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ur?new yh({keyType:e,valueType:n,typeName:qn.ZodRecord,...tr(r)}):new yh({keyType:il.create(),valueType:e,typeName:qn.ZodRecord,...tr(n)})}}class Nm extends ur{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Gt.map)return Ut(r,{code:St.invalid_type,expected:Gt.map,received:r.parsedType}),$n;const a=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([c,f],p)=>({key:a._parse(new Ul(r,c,r.path,[p,"key"])),value:o._parse(new Ul(r,f,r.path,[p,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of u){const p=await f.key,m=await f.value;if(p.status==="aborted"||m.status==="aborted")return $n;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of u){const p=f.key,m=f.value;if(p.status==="aborted"||m.status==="aborted")return $n;(p.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(p.value,m.value)}return{status:n.value,value:c}}}}Nm.create=(t,e,n)=>new Nm({valueType:e,keyType:t,typeName:qn.ZodMap,...tr(n)});class Ku extends ur{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Gt.set)return Ut(r,{code:St.invalid_type,expected:Gt.set,received:r.parsedType}),$n;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Ut(r,{code:St.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Ut(r,{code:St.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const o=this._def.valueType;function u(f){const p=new Set;for(const m of f){if(m.status==="aborted")return $n;m.status==="dirty"&&n.dirty(),p.add(m.value)}return{status:n.value,value:p}}const c=[...r.data.values()].map((f,p)=>o._parse(new Ul(r,f,r.path,p)));return r.common.async?Promise.all(c).then(f=>u(f)):u(c)}min(e,n){return new Ku({...this._def,minSize:{value:e,message:pn.toString(n)}})}max(e,n){return new Ku({...this._def,maxSize:{value:e,message:pn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ku.create=(t,e)=>new Ku({valueType:t,minSize:null,maxSize:null,typeName:qn.ZodSet,...tr(e)});class Wd extends ur{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Gt.function)return Ut(n,{code:St.invalid_type,expected:Gt.function,received:n.parsedType}),$n;function r(c,f){return xm({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vm(),sf].filter(p=>!!p),issueData:{code:St.invalid_arguments,argumentsError:f}})}function a(c,f){return xm({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vm(),sf].filter(p=>!!p),issueData:{code:St.invalid_return_type,returnTypeError:f}})}const o={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof of){const c=this;return Ea(async function(...f){const p=new mo([]),m=await c._def.args.parseAsync(f,o).catch(x=>{throw p.addIssue(r(f,x)),p}),y=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(y,o).catch(x=>{throw p.addIssue(a(y,x)),p})})}else{const c=this;return Ea(function(...f){const p=c._def.args.safeParse(f,o);if(!p.success)throw new mo([r(f,p.error)]);const m=Reflect.apply(u,this,p.data),y=c._def.returns.safeParse(m,o);if(!y.success)throw new mo([a(m,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Wd({...this._def,args:zl.create(e).rest(qu.create())})}returns(e){return new Wd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Wd({args:e||zl.create([]).rest(qu.create()),returns:n||qu.create(),typeName:qn.ZodFunction,...tr(r)})}}class bh extends ur{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}bh.create=(t,e)=>new bh({getter:t,typeName:qn.ZodLazy,...tr(e)});class wh extends ur{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ut(n,{received:n.data,code:St.invalid_literal,expected:this._def.value}),$n}return{status:"valid",value:e.data}}get value(){return this._def.value}}wh.create=(t,e)=>new wh({value:t,typeName:qn.ZodLiteral,...tr(e)});function Ow(t,e){return new cu({values:t,typeName:qn.ZodEnum,...tr(e)})}class cu extends ur{constructor(){super(...arguments),Jf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ut(n,{expected:Ar.joinValues(r),received:n.parsedType,code:St.invalid_type}),$n}if(ym(this,Jf)||Dw(this,Jf,new Set(this._def.values)),!ym(this,Jf).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ut(n,{received:n.data,code:St.invalid_enum_value,options:r}),$n}return Ea(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return cu.create(e,{...this._def,...n})}exclude(e,n=this._def){return cu.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Jf=new WeakMap;cu.create=Ow;class Nh extends ur{constructor(){super(...arguments),eh.set(this,void 0)}_parse(e){const n=Ar.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Gt.string&&r.parsedType!==Gt.number){const a=Ar.objectValues(n);return Ut(r,{expected:Ar.joinValues(a),received:r.parsedType,code:St.invalid_type}),$n}if(ym(this,eh)||Dw(this,eh,new Set(Ar.getValidEnumValues(this._def.values))),!ym(this,eh).has(e.data)){const a=Ar.objectValues(n);return Ut(r,{received:r.data,code:St.invalid_enum_value,options:a}),$n}return Ea(e.data)}get enum(){return this._def.values}}eh=new WeakMap;Nh.create=(t,e)=>new Nh({values:t,typeName:qn.ZodNativeEnum,...tr(e)});class of extends ur{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Gt.promise&&n.common.async===!1)return Ut(n,{code:St.invalid_type,expected:Gt.promise,received:n.parsedType}),$n;const r=n.parsedType===Gt.promise?n.data:Promise.resolve(n.data);return Ea(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}of.create=(t,e)=>new of({type:t,typeName:qn.ZodPromise,...tr(e)});class dl extends ur{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{Ut(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async c=>{if(n.value==="aborted")return $n;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?$n:f.status==="dirty"||n.value==="dirty"?Bd(f.value):f});{if(n.value==="aborted")return $n;const c=this._def.schema._parseSync({data:u,path:r.path,parent:r});return c.status==="aborted"?$n:c.status==="dirty"||n.value==="dirty"?Bd(c.value):c}}if(a.type==="refinement"){const u=c=>{const f=a.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?$n:(c.status==="dirty"&&n.dirty(),u(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?$n:(c.status==="dirty"&&n.dirty(),u(c.value).then(()=>({status:n.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Wu(u))return u;const c=a.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>Wu(u)?Promise.resolve(a.transform(u.value,o)).then(c=>({status:n.value,value:c})):u);Ar.assertNever(a)}}dl.create=(t,e,n)=>new dl({schema:t,typeName:qn.ZodEffects,effect:e,...tr(n)});dl.createWithPreprocess=(t,e,n)=>new dl({schema:e,effect:{type:"preprocess",transform:t},typeName:qn.ZodEffects,...tr(n)});class Ol extends ur{_parse(e){return this._getType(e)===Gt.undefined?Ea(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ol.create=(t,e)=>new Ol({innerType:t,typeName:qn.ZodOptional,...tr(e)});class uu extends ur{_parse(e){return this._getType(e)===Gt.null?Ea(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}uu.create=(t,e)=>new uu({innerType:t,typeName:qn.ZodNullable,...tr(e)});class Sh extends ur{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Gt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sh.create=(t,e)=>new Sh({innerType:t,typeName:qn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tr(e)});class jh extends ur{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hh(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new mo(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new mo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jh.create=(t,e)=>new jh({innerType:t,typeName:qn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tr(e)});class Sm extends ur{_parse(e){if(this._getType(e)!==Gt.nan){const r=this._getOrReturnCtx(e);return Ut(r,{code:St.invalid_type,expected:Gt.nan,received:r.parsedType}),$n}return{status:"valid",value:e.data}}}Sm.create=t=>new Sm({typeName:qn.ZodNaN,...tr(t)});const A6=Symbol("zod_brand");class h1 extends ur{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Oh extends ur{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?$n:o.status==="dirty"?(n.dirty(),Bd(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$n:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,n){return new Oh({in:e,out:n,typeName:qn.ZodPipeline})}}class Ch extends ur{_parse(e){const n=this._def.innerType._parse(e),r=a=>(Wu(a)&&(a.value=Object.freeze(a.value)),a);return hh(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Ch.create=(t,e)=>new Ch({innerType:t,typeName:qn.ZodReadonly,...tr(e)});function B2(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function Mw(t,e={},n){return t?af.create().superRefine((r,a)=>{var o,u;const c=t(r);if(c instanceof Promise)return c.then(f=>{var p,m;if(!f){const y=B2(e,r),j=(m=(p=y.fatal)!==null&&p!==void 0?p:n)!==null&&m!==void 0?m:!0;a.addIssue({code:"custom",...y,fatal:j})}});if(!c){const f=B2(e,r),p=(u=(o=f.fatal)!==null&&o!==void 0?o:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...f,fatal:p})}}):af.create()}const _6={object:Gs.lazycreate};var qn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qn||(qn={}));const P6=(t,e={message:`Input not instance of ${t.name}`})=>Mw(n=>n instanceof t,e),Bw=il.create,qw=ou.create,k6=Sm.create,T6=lu.create,Uw=ph.create,E6=Gu.create,L6=bm.create,D6=mh.create,R6=gh.create,I6=af.create,F6=qu.create,O6=xc.create,M6=wm.create,B6=al.create,q6=Gs.create,U6=Gs.strictCreate,z6=vh.create,$6=eg.create,V6=xh.create,H6=zl.create,W6=yh.create,G6=Nm.create,K6=Ku.create,Q6=Wd.create,Z6=bh.create,Y6=wh.create,X6=cu.create,J6=Nh.create,ek=of.create,q2=dl.create,tk=Ol.create,nk=uu.create,rk=dl.createWithPreprocess,sk=Oh.create,ik=()=>Bw().optional(),ak=()=>qw().optional(),ok=()=>Uw().optional(),lk={string:(t=>il.create({...t,coerce:!0})),number:(t=>ou.create({...t,coerce:!0})),boolean:(t=>ph.create({...t,coerce:!0})),bigint:(t=>lu.create({...t,coerce:!0})),date:(t=>Gu.create({...t,coerce:!0}))},ck=$n;var M=Object.freeze({__proto__:null,defaultErrorMap:sf,setErrorMap:r6,getErrorMap:vm,makeIssue:xm,EMPTY_PATH:s6,addIssueToContext:Ut,ParseStatus:xa,INVALID:$n,DIRTY:Bd,OK:Ea,isAborted:gv,isDirty:vv,isValid:Wu,isAsync:hh,get util(){return Ar},get objectUtil(){return mv},ZodParsedType:Gt,getParsedType:pc,ZodType:ur,datetimeRegex:Fw,ZodString:il,ZodNumber:ou,ZodBigInt:lu,ZodBoolean:ph,ZodDate:Gu,ZodSymbol:bm,ZodUndefined:mh,ZodNull:gh,ZodAny:af,ZodUnknown:qu,ZodNever:xc,ZodVoid:wm,ZodArray:al,ZodObject:Gs,ZodUnion:vh,ZodDiscriminatedUnion:eg,ZodIntersection:xh,ZodTuple:zl,ZodRecord:yh,ZodMap:Nm,ZodSet:Ku,ZodFunction:Wd,ZodLazy:bh,ZodLiteral:wh,ZodEnum:cu,ZodNativeEnum:Nh,ZodPromise:of,ZodEffects:dl,ZodTransformer:dl,ZodOptional:Ol,ZodNullable:uu,ZodDefault:Sh,ZodCatch:jh,ZodNaN:Sm,BRAND:A6,ZodBranded:h1,ZodPipeline:Oh,ZodReadonly:Ch,custom:Mw,Schema:ur,ZodSchema:ur,late:_6,get ZodFirstPartyTypeKind(){return qn},coerce:lk,any:I6,array:B6,bigint:T6,boolean:Uw,date:E6,discriminatedUnion:$6,effect:q2,enum:X6,function:Q6,instanceof:P6,intersection:V6,lazy:Z6,literal:Y6,map:G6,nan:k6,nativeEnum:J6,never:O6,null:R6,nullable:nk,number:qw,object:q6,oboolean:ok,onumber:ak,optional:tk,ostring:ik,pipeline:sk,preprocess:rk,promise:ek,record:W6,set:K6,strictObject:U6,string:Bw,symbol:L6,transformer:q2,tuple:H6,undefined:D6,union:z6,unknown:F6,void:M6,NEVER:ck,ZodIssueCode:St,quotelessJson:n6,ZodError:mo});const mt=Symbol.for("drizzle:entityKind");function na(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,mt))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(mt in n&&n[mt]===e[mt])return!0;n=Object.getPrototypeOf(n)}return!1}class Ah{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[mt]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class uk{static[mt]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const Gd=Symbol.for("drizzle:Name");class dk{static[mt]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{const{name:r,columns:a,foreignColumns:o}=e();return{name:r,columns:a,foreignTable:o[0].table,foreignColumns:o}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new fk(e,this)}}class fk{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[mt]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),a=n.map(c=>c.name),o=r.map(c=>c.name),u=[this.table[Gd],...a,r[0].table[Gd],...o];return e??`${u.join("_")}_fk`}}function hk(t,...e){return t(...e)}function pk(t,e){return`${t[Gd]}_${e.join("_")}_unique`}function U2(t,e,n){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function zw(t,e=0){const n=[];let r=e,a=!1;for(;r<t.length;){const o=t[r];if(o===","){(a||r===e)&&n.push(""),a=!0,r++;continue}if(a=!1,o==="\\"){r+=2;continue}if(o==='"'){const[f,p]=U2(t,r+1,!0);n.push(f),r=p;continue}if(o==="}")return[n,r+1];if(o==="{"){const[f,p]=zw(t,r+1);n.push(f),r=p;continue}const[u,c]=U2(t,r,!1);n.push(u),r=c}return[n,r]}function mk(t){const[e]=zw(t,1);return e}function $w(t){return`{${t.map(e=>Array.isArray(e)?$w(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class Rr extends uk{foreignKeyConfigs=[];static[mt]="PgColumnBuilder";array(e){return new vk(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:a})=>hk((o,u)=>{const c=new dk(()=>{const f=o();return{columns:[e],foreignColumns:[f]}});return u.onUpdate&&c.onUpdate(u.onUpdate),u.onDelete&&c.onDelete(u.onDelete),c.build(n)},r,a))}buildExtraConfigColumn(e){return new gk(e,this.config)}}class or extends Ah{constructor(e,n){n.uniqueName||(n.uniqueName=pk(e,[n.name])),super(e,n),this.table=e}static[mt]="PgColumn"}class gk extends or{static[mt]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class vk extends Rr{static[mt]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new p1(e,this.config,n)}}class p1 extends or{constructor(e,n,r,a){super(e,n),this.baseColumn=r,this.range=a,this.size=n.size}size;static[mt]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=mk(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){const r=e.map(a=>a===null?null:na(this.baseColumn,p1)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return n?r:$w(r)}}const z2=Symbol.for("drizzle:isPgEnum");function xk(t){return!!t&&typeof t=="function"&&z2 in t&&t[z2]===!0}class Vw{static[mt]="Subquery";constructor(e,n,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:a}}}const yk={startActiveSpan(t,e){return e()}},Kd=Symbol.for("drizzle:ViewBaseConfig"),m0=Symbol.for("drizzle:Schema"),$2=Symbol.for("drizzle:Columns"),V2=Symbol.for("drizzle:ExtraConfigColumns"),g0=Symbol.for("drizzle:OriginalName"),v0=Symbol.for("drizzle:BaseName"),jm=Symbol.for("drizzle:IsAlias"),H2=Symbol.for("drizzle:ExtraConfigBuilder"),Hw=Symbol.for("drizzle:IsDrizzleTable");class fo{static[mt]="Table";static Symbol={Name:Gd,Schema:m0,OriginalName:g0,Columns:$2,ExtraConfigColumns:V2,BaseName:v0,IsAlias:jm,ExtraConfigBuilder:H2};[Gd];[g0];[m0];[$2];[V2];[v0];[jm]=!1;[Hw]=!0;[H2]=void 0;constructor(e,n,r){this[Gd]=this[g0]=e,this[m0]=n,this[v0]=r}}function Ww(t){return typeof t=="object"&&t!==null&&Hw in t}function bk(t){return t!=null&&typeof t.getSQL=="function"}function wk(t){const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}class el{static[mt]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new ni([this])}}class ni{constructor(e){this.queryChunks=e}static[mt]="SQL";decoder=Gw;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return yk.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:u,prepareTyping:c,inlineParams:f,paramStartIndex:p}=r;return wk(e.map(m=>{if(na(m,el))return{sql:m.value.join(""),params:[]};if(na(m,yv))return{sql:o(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const y=[new el("(")];for(const[j,x]of m.entries())y.push(x),j<m.length-1&&y.push(new el(", "));return y.push(new el(")")),this.buildQueryFromSourceParams(y,r)}if(na(m,ni))return this.buildQueryFromSourceParams(m.queryChunks,{...r,inlineParams:f||m.shouldInlineParams});if(na(m,fo)){const y=m[fo.Symbol.Schema],j=m[fo.Symbol.Name];return{sql:y===void 0||m[jm]?o(j):o(y)+"."+o(j),params:[]}}if(na(m,Ah)){const y=a.getColumnCasing(m);if(n.invokeSource==="indexes")return{sql:o(y),params:[]};const j=m.table[fo.Symbol.Schema];return{sql:m.table[jm]||j===void 0?o(m.table[fo.Symbol.Name])+"."+o(y):o(j)+"."+o(m.table[fo.Symbol.Name])+"."+o(y),params:[]}}if(na(m,Nk)){const y=m[Kd].schema,j=m[Kd].name;return{sql:y===void 0||m[Kd].isAlias?o(j):o(y)+"."+o(j),params:[]}}if(na(m,Qw)){if(na(m.value,bv))return{sql:u(p.value++,m),params:[m],typings:["none"]};const y=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(na(y,ni))return this.buildQueryFromSourceParams([y],r);if(f)return{sql:this.mapInlineParam(y,r),params:[]};let j=["none"];return c&&(j=[c(m.encoder)]),{sql:u(p.value++,y),params:[y],typings:j}}return na(m,bv)?{sql:u(p.value++,m),params:[m],typings:["none"]}:na(m,ni.Aliased)&&m.fieldAlias!==void 0?{sql:o(m.fieldAlias),params:[]}:na(m,Vw)?m._.isWith?{sql:o(m._.alias),params:[]}:this.buildQueryFromSourceParams([new el("("),m._.sql,new el(") "),new yv(m._.alias)],r):xk(m)?m.schema?{sql:o(m.schema)+"."+o(m.enumName),params:[]}:{sql:o(m.enumName),params:[]}:bk(m)?m.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([m.getSQL()],r):this.buildQueryFromSourceParams([new el("("),m.getSQL(),new el(")")],r):f?{sql:this.mapInlineParam(m,r),params:[]}:{sql:u(p.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new ni.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class yv{constructor(e){this.value=e}static[mt]="Name";brand;getSQL(){return new ni([this])}}const Gw={mapFromDriverValue:t=>t},Kw={mapToDriverValue:t=>t};({...Gw,...Kw});class Qw{constructor(e,n=Kw){this.value=e,this.encoder=n}static[mt]="Param";brand;getSQL(){return new ni([this])}}function Cm(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new el(t[0]));for(const[r,a]of e.entries())n.push(a,new el(t[r+1]));return new ni(n)}(t=>{function e(){return new ni([])}t.empty=e;function n(f){return new ni(f)}t.fromList=n;function r(f){return new ni([new el(f)])}t.raw=r;function a(f,p){const m=[];for(const[y,j]of f.entries())y>0&&p!==void 0&&m.push(p),m.push(j);return new ni(m)}t.join=a;function o(f){return new yv(f)}t.identifier=o;function u(f){return new bv(f)}t.placeholder=u;function c(f,p){return new Qw(f,p)}t.param=c})(Cm||(Cm={}));(t=>{class e{constructor(r,a){this.sql=r,this.fieldAlias=a}static[mt]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(ni||(ni={}));class bv{constructor(e){this.name=e}static[mt]="Placeholder";getSQL(){return new ni([this])}}const Zw=Symbol.for("drizzle:IsDrizzleView");class Nk{static[mt]="View";[Kd];[Zw]=!0;constructor({name:e,schema:n,selectedFields:r,query:a}){this[Kd]={name:e,originalName:e,schema:n,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new ni([this])}}function Sk(t){return typeof t=="object"&&t!==null&&Zw in t}Ah.prototype.getSQL=function(){return new ni([this])};fo.prototype.getSQL=function(){return new ni([this])};Vw.prototype.getSQL=function(){return new ni([this])};function jk(t){return t[fo.Symbol.Columns]}function Ck(t){return t[Kd].selectedFields}function Hi(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class tg extends Rr{static[mt]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Ak extends tg{static[mt]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new _k(e,this.config)}}class _k extends or{static[mt]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Pk extends tg{static[mt]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new kk(e,this.config)}}class kk extends or{static[mt]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Tk(t,e){const{name:n,config:r}=Hi(t,e);return r.mode==="number"?new Ak(n):new Pk(n)}class Ek extends Rr{static[mt]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Lk(e,this.config)}}class Lk extends or{static[mt]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Dk extends Rr{static[mt]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Rk(e,this.config)}}class Rk extends or{static[mt]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Ik(t,e){const{name:n,config:r}=Hi(t,e);return r.mode==="number"?new Ek(n):new Dk(n)}class Fk extends Rr{static[mt]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ok(e,this.config)}}class Ok extends or{static[mt]="PgBoolean";getSQLType(){return"boolean"}}function Mk(t){return new Fk(t??"")}class Bk extends Rr{static[mt]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new qk(e,this.config)}}class qk extends or{static[mt]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function Uk(t,e={}){const{name:n,config:r}=Hi(t,e);return new Bk(n,r)}class zk extends Rr{static[mt]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new $k(e,this.config)}}class $k extends or{static[mt]="PgCidr";getSQLType(){return"cidr"}}function Vk(t){return new zk(t??"")}class Hk extends Rr{static[mt]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Wk(e,this.config)}}class Wk extends or{static[mt]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function Gk(t){return(e,n)=>{const{name:r,config:a}=Hi(e,n);return new Hk(r,a,t)}}class Mh extends Rr{static[mt]="PgDateColumnBaseBuilder";defaultNow(){return this.default(Cm`now()`)}}class Kk extends Mh{static[mt]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Qk(e,this.config)}}class Qk extends or{static[mt]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class Zk extends Mh{static[mt]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Yk(e,this.config)}}class Yk extends or{static[mt]="PgDateString";getSQLType(){return"date"}}function Xk(t,e){const{name:n,config:r}=Hi(t,e);return r?.mode==="date"?new Kk(n):new Zk(n)}class Jk extends Rr{static[mt]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new eT(e,this.config)}}class eT extends or{static[mt]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function tT(t){return new Jk(t??"")}class nT extends Rr{static[mt]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new rT(e,this.config)}}class rT extends or{static[mt]="PgInet";getSQLType(){return"inet"}}function sT(t){return new nT(t??"")}class iT extends tg{static[mt]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new aT(e,this.config)}}class aT extends or{static[mt]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function us(t){return new iT(t??"")}class oT extends Rr{static[mt]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new lT(e,this.config)}}class lT extends or{static[mt]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}}function cT(t,e={}){const{name:n,config:r}=Hi(t,e);return new oT(n,r)}class uT extends Rr{static[mt]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new dT(e,this.config)}}class dT extends or{static[mt]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function fT(t){return new uT(t??"")}class hT extends Rr{static[mt]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new pT(e,this.config)}}class pT extends or{static[mt]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function mT(t){return new hT(t??"")}class gT extends Rr{static[mt]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new vT(e,this.config)}}class vT extends or{static[mt]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class xT extends Rr{static[mt]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new yT(e,this.config)}}class yT extends or{static[mt]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function bT(t,e){const{name:n,config:r}=Hi(t,e);return!r?.mode||r.mode==="tuple"?new gT(n):new xT(n)}class wT extends Rr{static[mt]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new NT(e,this.config)}}class NT extends or{static[mt]="PgMacaddr";getSQLType(){return"macaddr"}}function ST(t){return new wT(t??"")}class jT extends Rr{static[mt]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new CT(e,this.config)}}class CT extends or{static[mt]="PgMacaddr8";getSQLType(){return"macaddr8"}}function AT(t){return new jT(t??"")}class _T extends Rr{static[mt]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new PT(e,this.config)}}class PT extends or{static[mt]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function Yw(t,e){const{name:n,config:r}=Hi(t,e);return new _T(n,r?.precision,r?.scale)}const Cr=Yw;class kT extends Rr{static[mt]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new TT(e,this.config)}}class TT extends or{static[mt]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class ET extends Rr{static[mt]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new LT(e,this.config)}}class LT extends or{static[mt]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function DT(t,e){const{name:n,config:r}=Hi(t,e);return!r?.mode||r.mode==="tuple"?new kT(n):new ET(n)}function RT(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function W2(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function Xw(t){const e=RT(t);let n=0;const r=e[n];n+=1;const a=new DataView(e.buffer),o=a.getUint32(n,r===1);if(n+=4,o&536870912&&(a.getUint32(n,r===1),n+=4),(o&65535)===1){const u=W2(e,n);n+=8;const c=W2(e,n);return n+=8,[u,c]}throw new Error("Unsupported geometry type")}class IT extends Rr{static[mt]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new FT(e,this.config)}}class FT extends or{static[mt]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Xw(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class OT extends Rr{static[mt]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new MT(e,this.config)}}class MT extends or{static[mt]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=Xw(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function BT(t,e){const{name:n,config:r}=Hi(t,e);return!r?.mode||r.mode==="tuple"?new IT(n):new OT(n)}class qT extends Rr{static[mt]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new UT(e,this.config)}}class UT extends or{static[mt]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function zT(t){return new qT(t??"")}class $T extends Rr{static[mt]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new VT(e,this.config)}}class VT extends or{static[mt]="PgSerial";getSQLType(){return"serial"}}function ya(t){return new $T(t??"")}class HT extends tg{static[mt]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new WT(e,this.config)}}class WT extends or{static[mt]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function GT(t){return new HT(t??"")}class KT extends Rr{static[mt]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new QT(e,this.config)}}class QT extends or{static[mt]="PgSmallSerial";getSQLType(){return"smallserial"}}function ZT(t){return new KT(t??"")}class YT extends Rr{static[mt]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new XT(e,this.config)}}class XT extends or{static[mt]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function ht(t,e={}){const{name:n,config:r}=Hi(t,e);return new YT(n,r)}class JT extends Mh{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[mt]="PgTimeBuilder";build(e){return new eE(e,this.config)}}class eE extends or{static[mt]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function tE(t,e={}){const{name:n,config:r}=Hi(t,e);return new JT(n,r.withTimezone??!1,r.precision)}class nE extends Mh{static[mt]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new rE(e,this.config)}}class rE extends or{static[mt]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class sE extends Mh{static[mt]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new iE(e,this.config)}}class iE extends or{static[mt]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Vl(t,e={}){const{name:n,config:r}=Hi(t,e);return r?.mode==="string"?new sE(n,r.withTimezone??!1,r.precision):new nE(n,r?.withTimezone??!1,r?.precision)}class aE extends Rr{static[mt]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Cm`gen_random_uuid()`)}build(e){return new oE(e,this.config)}}class oE extends or{static[mt]="PgUUID";getSQLType(){return"uuid"}}function lE(t){return new aE(t??"")}class cE extends Rr{static[mt]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new uE(e,this.config)}}class uE extends or{static[mt]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function dE(t,e={}){const{name:n,config:r}=Hi(t,e);return new cE(n,r)}class fE extends Rr{static[mt]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new hE(e,this.config)}}class hE extends or{static[mt]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function pE(t,e){const{name:n,config:r}=Hi(t,e);return new fE(n,r)}class mE extends Rr{static[mt]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new gE(e,this.config)}}class gE extends or{static[mt]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function vE(t,e){const{name:n,config:r}=Hi(t,e);return new mE(n,r)}class xE extends Rr{static[mt]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new yE(e,this.config)}}class yE extends or{static[mt]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function bE(t,e){const{name:n,config:r}=Hi(t,e);return new xE(n,r)}class wE extends Rr{static[mt]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new NE(e,this.config)}}class NE extends or{static[mt]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}function SE(t,e){const{name:n,config:r}=Hi(t,e);return new wE(n,r)}function jE(){return{bigint:Tk,bigserial:Ik,boolean:Mk,char:Uk,cidr:Vk,customType:Gk,date:Xk,doublePrecision:tT,inet:sT,integer:us,interval:cT,json:fT,jsonb:mT,line:bT,macaddr:ST,macaddr8:AT,numeric:Yw,point:DT,geometry:BT,real:zT,serial:ya,smallint:GT,smallserial:ZT,text:ht,time:tE,timestamp:Vl,uuid:lE,varchar:dE,bit:pE,halfvec:vE,sparsevec:bE,vector:SE}}const wv=Symbol.for("drizzle:PgInlineForeignKeys"),G2=Symbol.for("drizzle:EnableRLS");class K2 extends fo{static[mt]="PgTable";static Symbol=Object.assign({},fo.Symbol,{InlineForeignKeys:wv,EnableRLS:G2});[wv]=[];[G2]=!1;[fo.Symbol.ExtraConfigBuilder]=void 0}function CE(t,e,n,r,a=t){const o=new K2(t,r,a),u=typeof e=="function"?e(jE()):e,c=Object.fromEntries(Object.entries(u).map(([m,y])=>{const j=y;j.setName(m);const x=j.build(o);return o[wv].push(...j.buildForeignKeys(x,o)),[m,x]})),f=Object.fromEntries(Object.entries(u).map(([m,y])=>{const j=y;j.setName(m);const x=j.buildExtraConfigColumn(o);return[m,x]})),p=Object.assign(o,c);return p[fo.Symbol.Columns]=c,p[fo.Symbol.ExtraConfigColumns]=f,Object.assign(p,{enableRLS:()=>(p[K2.Symbol.EnableRLS]=!0,p)})}const La=(t,e,n)=>CE(t,e,n,void 0),Ws={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ui(t,e){return e.includes(t.columnType)}function AE(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const _E=M.union([M.string(),M.number(),M.boolean(),M.null()]),PE=M.union([_E,M.record(M.any()),M.array(M.any())]),kE=M.custom(t=>t instanceof Buffer);function Jw(t,e){const n=e?.zodInstance??M,r=e?.coerce??{};let a;return AE(t)&&(a=t.enumValues.length?n.enum(t.enumValues):n.string()),a||(ui(t,["PgGeometry","PgPointTuple"])?a=n.tuple([n.number(),n.number()]):ui(t,["PgGeometryObject","PgPointObject"])?a=n.object({x:n.number(),y:n.number()}):ui(t,["PgHalfVector","PgVector"])?(a=n.array(n.number()),a=t.dimensions?a.length(t.dimensions):a):ui(t,["PgLine"])?a=n.tuple([n.number(),n.number(),n.number()]):ui(t,["PgLineABC"])?a=n.object({a:n.number(),b:n.number(),c:n.number()}):ui(t,["PgArray"])?(a=n.array(Jw(t.baseColumn,n)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=n.array(n.any()):t.dataType==="number"?a=TE(t,n,r):t.dataType==="bigint"?a=EE(t,n,r):t.dataType==="boolean"?a=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?a=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?a=LE(t,n,r):t.dataType==="json"?a=PE:t.dataType==="custom"?a=n.any():t.dataType==="buffer"&&(a=kE)),a||(a=n.any()),a}function TE(t,e,n){let r=t.getSQLType().includes("unsigned"),a,o,u=!1;ui(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:Ws.INT8_MIN,o=r?Ws.INT8_UNSIGNED_MAX:Ws.INT8_MAX,u=!0):ui(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:Ws.INT16_MIN,o=r?Ws.INT16_UNSIGNED_MAX:Ws.INT16_MAX,u=!0):ui(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:Ws.INT24_MIN,o=r?Ws.INT24_UNSIGNED_MAX:Ws.INT24_MAX,u=ui(t,["MySqlMediumInt","SingleStoreMediumInt"])):ui(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:Ws.INT32_MIN,o=r?Ws.INT32_UNSIGNED_MAX:Ws.INT32_MAX,u=!0):ui(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:Ws.INT48_MIN,o=r?Ws.INT48_UNSIGNED_MAX:Ws.INT48_MAX):ui(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||ui(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,u=!0):ui(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,u=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let c=n===!0||n?.number?e.coerce.number():e.number();return c=c.min(a).max(o),u?c.int():c}function EE(t,e,n){const r=t.getSQLType().includes("unsigned"),a=r?0n:Ws.INT64_MIN,o=r?Ws.INT64_UNSIGNED_MAX:Ws.INT64_MAX;return(n===!0||n?.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function LE(t,e,n){if(ui(t,["PgUUID"]))return e.string().uuid();let r,a,o=!1;ui(t,["PgVarchar","SQLiteText"])?r=t.length:ui(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??Ws.INT16_UNSIGNED_MAX:ui(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=Ws.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=Ws.INT24_UNSIGNED_MAX:t.textType==="text"?r=Ws.INT16_UNSIGNED_MAX:r=Ws.INT8_UNSIGNED_MAX),ui(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,o=!0),ui(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let u=n===!0||n?.string?e.coerce.string():e.string();return u=a?u.regex(a):u,r&&o?u.length(r):r?u.max(r):u}function eN(t){return Ww(t)?jk(t):Ck(t)}function tN(t,e,n,r){const a={};for(const[o,u]of Object.entries(t)){if(!na(u,Ah)&&!na(u,ni)&&!na(u,ni.Aliased)&&typeof u=="object"){const y=Ww(u)||Sk(u)?eN(u):u;a[o]=tN(y,e[o]??{},n,r);continue}const c=e[o];if(c!==void 0&&typeof c!="function"){a[o]=c;continue}const f=na(u,Ah)?u:void 0,p=f?Jw(f,r):M.any(),m=typeof c=="function"?c(p):p;n.never(f)||(a[o]=m,f&&(n.nullable(f)&&(a[o]=a[o].nullable()),n.optional(f)&&(a[o]=a[o].optional())))}return M.object(a)}const DE={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Da=(t,e)=>{const n=eN(t);return tN(n,{},DE)},_h=["Standard","Administrator"],nN=La("users",{id:ya("id").primaryKey(),username:ht("username").notNull().unique(),password:ht("password").notNull(),name:ht("name").notNull().default("Admin"),email:ht("email"),mobile:ht("mobile"),role:ht("role").notNull().default("Standard"),createdAt:Vl("created_at").notNull().defaultNow()}),RE=La("user_client_assignments",{id:ya("id").primaryKey(),userId:us("user_id").notNull().references(()=>nN.id),clientId:us("client_id").notNull().references(()=>m1.id)}),m1=La("clients",{id:ya("id").primaryKey(),name:ht("name").notNull(),location:ht("location").notNull(),gstNo:ht("gst_no").notNull(),contactPerson:ht("contact_person").notNull(),mobileNumber:ht("mobile_number").notNull(),emailAddress:ht("email_address").notNull()}),Am=["Supply and Fabrication","Structural Fabrication","Job Work"],td=La("projects",{id:ya("id").primaryKey(),projectName:ht("project_name").notNull(),clientId:us("client_id").notNull().references(()=>m1.id),location:ht("location").notNull(),quotationType:ht("quotation_type").notNull(),createdAt:Vl("created_at").notNull().defaultNow()}),rN=La("quotations",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),quotationNumber:ht("quotation_number").notNull(),revision:ht("revision").notNull().default("R-000"),version:us("version").notNull().default(1),parentQuotationId:us("parent_quotation_id"),enquiryNumber:ht("enquiry_number").notNull(),subject:ht("subject").notNull(),contactName:ht("contact_name").notNull(),contactMobile:ht("contact_mobile").notNull(),contactEmail:ht("contact_email").notNull(),buildingDescription:ht("building_description"),buildingArea:ht("building_area"),frameType:ht("frame_type"),length:ht("length"),width:ht("width"),clearHeight:ht("clear_height"),roofSlope:ht("roof_slope"),paymentTerms:ht("payment_terms"),notes:ht("notes"),contentSections:ht("content_sections"),createdAt:Vl("created_at").notNull().defaultNow()}),IE=La("quotation_items",{id:ya("id").primaryKey(),quotationId:us("quotation_id").notNull().references(()=>rN.id),serialNo:us("serial_no").notNull(),description:ht("description").notNull(),unit:ht("unit").notNull(),quantity:Cr("quantity",{precision:10,scale:2}).notNull(),rate:Cr("rate",{precision:12,scale:2}).notNull(),amount:Cr("amount",{precision:14,scale:2}).notNull(),remarks:ht("remarks")}),sN=La("invoices",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),invoiceNumber:ht("invoice_number").notNull(),revision:ht("revision").notNull().default("R-001"),version:us("version").notNull().default(1),parentInvoiceId:us("parent_invoice_id"),organisationName:ht("organisation_name").notNull(),registeredAddress:ht("registered_address").notNull(),consigneeAddress:ht("consignee_address").notNull(),clientGstin:ht("client_gstin"),workOrderNo:ht("work_order_no"),dispatchDetails:ht("dispatch_details"),cgstRate:Cr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:Cr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:Cr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:ht("applied_tax_type").default("igst"),totalAmount:Cr("total_amount",{precision:14,scale:2}).default("0"),totalTax:Cr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:Cr("grand_total",{precision:14,scale:2}).default("0"),contentSections:ht("content_sections"),createdAt:Vl("created_at").notNull().defaultNow()}),FE=La("invoice_items",{id:ya("id").primaryKey(),invoiceId:us("invoice_id").notNull().references(()=>sN.id),serialNo:us("serial_no").notNull(),description:ht("description").notNull(),hsnCode:ht("hsn_code"),quantity:Cr("quantity",{precision:10,scale:3}).notNull(),unit:ht("unit").default("LS"),ratePerUnit:Cr("rate_per_unit",{precision:12,scale:2}),percentage:Cr("percentage",{precision:5,scale:2}),amount:Cr("amount",{precision:14,scale:2}).notNull(),remarks:ht("remarks")}),iN=La("gate_passes",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),gatePassNumber:ht("gate_pass_number").notNull(),revision:ht("revision").notNull().default("R-001"),version:us("version").notNull().default(1),parentGatePassId:us("parent_gate_pass_id"),organisationName:ht("organisation_name").notNull(),registeredAddress:ht("registered_address").notNull(),consigneeAddress:ht("consignee_address").notNull(),clientGstin:ht("client_gstin"),workOrderNo:ht("work_order_no"),dispatchDetails:ht("dispatch_details"),cgstRate:Cr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:Cr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:Cr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:ht("applied_tax_type").default("igst"),totalAmount:Cr("total_amount",{precision:14,scale:2}).default("0"),totalTax:Cr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:Cr("grand_total",{precision:14,scale:2}).default("0"),contentSections:ht("content_sections"),createdAt:Vl("created_at").notNull().defaultNow()}),OE=La("gate_pass_items",{id:ya("id").primaryKey(),gatePassId:us("gate_pass_id").notNull().references(()=>iN.id),serialNo:us("serial_no").notNull(),description:ht("description").notNull(),hsnCode:ht("hsn_code"),quantity:Cr("quantity",{precision:10,scale:3}).notNull(),unit:ht("unit").default("LS"),ratePerUnit:Cr("rate_per_unit",{precision:12,scale:2}),percentage:Cr("percentage",{precision:5,scale:2}),amount:Cr("amount",{precision:14,scale:2}).notNull(),remarks:ht("remarks")}),aN=La("delivery_challans",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),deliveryChallanNumber:ht("delivery_challan_number").notNull(),revision:ht("revision").notNull().default("R-001"),version:us("version").notNull().default(1),parentDeliveryChallanId:us("parent_delivery_challan_id"),organisationName:ht("organisation_name").notNull(),registeredAddress:ht("registered_address").notNull(),consigneeAddress:ht("consignee_address").notNull(),clientGstin:ht("client_gstin"),workOrderNo:ht("work_order_no"),dispatchDetails:ht("dispatch_details"),cgstRate:Cr("cgst_rate",{precision:5,scale:2}).default("9"),sgstRate:Cr("sgst_rate",{precision:5,scale:2}).default("9"),igstRate:Cr("igst_rate",{precision:5,scale:2}).default("18"),appliedTaxType:ht("applied_tax_type").default("igst"),totalAmount:Cr("total_amount",{precision:14,scale:2}).default("0"),totalTax:Cr("total_tax",{precision:14,scale:2}).default("0"),grandTotal:Cr("grand_total",{precision:14,scale:2}).default("0"),contentSections:ht("content_sections"),createdAt:Vl("created_at").notNull().defaultNow()}),ME=La("delivery_challan_items",{id:ya("id").primaryKey(),deliveryChallanId:us("delivery_challan_id").notNull().references(()=>aN.id),serialNo:us("serial_no").notNull(),description:ht("description").notNull(),hsnCode:ht("hsn_code"),quantity:Cr("quantity",{precision:10,scale:3}).notNull(),unit:ht("unit").default("LS"),ratePerUnit:Cr("rate_per_unit",{precision:12,scale:2}),percentage:Cr("percentage",{precision:5,scale:2}),amount:Cr("amount",{precision:14,scale:2}).notNull(),remarks:ht("remarks")}),BE=La("project_ledger_budgets",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),projectValue:Cr("project_value",{precision:14,scale:2}).notNull().default("0"),updatedAt:Vl("updated_at").notNull().defaultNow()}),qE=La("project_ledger_entries",{id:ya("id").primaryKey(),projectId:us("project_id").notNull().references(()=>td.id),entryDate:ht("entry_date").notNull(),entryType:ht("entry_type").notNull(),category:ht("category").notNull(),description:ht("description").notNull(),amount:Cr("amount",{precision:14,scale:2}).notNull(),paymentMode:ht("payment_mode").notNull(),remarks:ht("remarks"),reference:ht("reference"),receivedAgainst:ht("received_against"),chequeNumber:ht("cheque_number"),bankName:ht("bank_name"),chequeDate:ht("cheque_date"),utrNumber:ht("utr_number"),attachmentUrl:ht("attachment_url"),createdAt:Vl("created_at").notNull().defaultNow()}),UE=La("branding",{id:ya("id").primaryKey(),logoUrl:ht("logo_url").notNull().default("https://reviranexgen.com/assets/logo-with-name.png"),headerUrl:ht("header_url").notNull().default("https://reviranexgen.com/assets/header.jpg"),footerUrl:ht("footer_url").notNull().default("https://reviranexgen.com/assets/footer.jpg"),stampUrl:ht("stamp_url").notNull().default("https://reviranexgen.com/assets/stamp.png"),storeKeeperSignUrl:ht("store_keeper_sign_url").notNull().default(""),qcEnggSignUrl:ht("qc_engg_sign_url").notNull().default(""),storeInchargeSignUrl:ht("store_incharge_sign_url").notNull().default(""),plantHeadSignUrl:ht("plant_head_sign_url").notNull().default(""),primaryColor:ht("primary_color").notNull().default("#da2032"),secondaryColor:ht("secondary_color").notNull().default("#2f3591"),entityName:ht("entity_name").notNull().default("Revira NexGen Structure Pvt. Ltd."),cin:ht("cin").notNull().default("U16222DL2025PTC459465"),companyGstin:ht("company_gstin").notNull().default("07AAPCR3026H1ZA"),website:ht("website").notNull().default("www.reviranexgen.com"),email:ht("email").notNull().default("info@reviranexgen.com"),headOfficeAddress:ht("head_office_address").notNull().default("28, E2 Block, Shivram Park Nangloi Delhi - 110041"),workshopAddress:ht("workshop_address").notNull().default("Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"),updatedAt:Vl("updated_at").notNull().defaultNow()});Da(nN).omit({id:!0,createdAt:!0});Da(m1);Da(td).omit({id:!0,createdAt:!0});Da(rN).omit({id:!0,createdAt:!0});Da(IE).omit({id:!0});Da(sN).omit({id:!0,createdAt:!0});Da(FE).omit({id:!0});Da(iN).omit({id:!0,createdAt:!0});Da(OE).omit({id:!0});Da(aN).omit({id:!0,createdAt:!0});Da(ME).omit({id:!0});Da(BE).omit({id:!0,updatedAt:!0});Da(qE).omit({id:!0,createdAt:!0});const zE=Da(UE).omit({id:!0,updatedAt:!0});Da(RE).omit({id:!0});M.object({message:M.string()}),M.object({message:M.string()}),M.object({message:M.string()}),M.object({message:M.string()});const To={auth:{login:{method:"POST",path:"/revira/api/login",input:M.object({username:M.string().email("Please enter a valid email address"),password:M.string().min(1,"Password is required")}),responses:{200:M.custom()}},logout:{method:"POST",path:"/revira/api/logout",responses:{200:M.void()}},me:{path:"/revira/api/user",responses:{200:M.custom()}}},clients:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},create:{input:M.object({name:M.string().min(1,"Client name is required"),location:M.string().min(1,"Location is required"),gstNo:M.string().optional(),contactPerson:M.string().optional(),mobileNumber:M.string().optional(),emailAddress:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({name:M.string().min(1).optional(),location:M.string().min(1).optional(),gstNo:M.string().optional(),contactPerson:M.string().optional(),mobileNumber:M.string().optional(),emailAddress:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},projects:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},create:{input:M.object({projectName:M.string().min(1,"Project name is required"),clientId:M.number().min(1,"Client selection is required"),location:M.string().min(1,"Location is required"),quotationType:M.enum(Am,{errorMap:()=>({message:"Quotation type is required"})})}),responses:{201:M.custom()}},update:{input:M.object({projectName:M.string().min(1).optional(),clientId:M.number().min(1).optional(),location:M.string().min(1).optional(),quotationType:M.enum(Am).optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},quotations:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},getByProject:{responses:{200:M.custom()}},create:{input:M.object({projectId:M.number().min(1),quotationNumber:M.string().min(1),revision:M.string().default("R-000"),enquiryNumber:M.string().min(1),subject:M.string().min(1),contactName:M.string().min(1),contactMobile:M.string().min(1),contactEmail:M.string().email(),buildingDescription:M.string().optional(),buildingArea:M.string().optional(),frameType:M.string().optional(),length:M.string().optional(),width:M.string().optional(),clearHeight:M.string().optional(),roofSlope:M.string().optional(),paymentTerms:M.string().optional(),notes:M.string().optional(),contentSections:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({quotationNumber:M.string().min(1).optional(),revision:M.string().optional(),enquiryNumber:M.string().min(1).optional(),subject:M.string().min(1).optional(),contactName:M.string().min(1).optional(),contactMobile:M.string().min(1).optional(),contactEmail:M.string().email().optional(),buildingDescription:M.string().optional(),buildingArea:M.string().optional(),frameType:M.string().optional(),length:M.string().optional(),width:M.string().optional(),clearHeight:M.string().optional(),roofSlope:M.string().optional(),paymentTerms:M.string().optional(),notes:M.string().optional(),contentSections:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},quotationItems:{list:{responses:{200:M.array(M.custom())}},create:{input:M.object({serialNo:M.number().min(1),description:M.string().min(1),unit:M.string().min(1),quantity:M.string(),rate:M.string(),amount:M.string(),remarks:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({serialNo:M.number().min(1).optional(),description:M.string().min(1).optional(),unit:M.string().min(1).optional(),quantity:M.string().optional(),rate:M.string().optional(),amount:M.string().optional(),remarks:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},branding:{get:{responses:{200:M.custom()}},update:{input:M.object({logoUrl:M.string().optional(),headerUrl:M.string().optional(),footerUrl:M.string().optional(),stampUrl:M.string().optional(),storeKeeperSignUrl:M.string().optional(),qcEnggSignUrl:M.string().optional(),storeInchargeSignUrl:M.string().optional(),plantHeadSignUrl:M.string().optional(),primaryColor:M.string().optional(),secondaryColor:M.string().optional(),entityName:M.string().optional(),cin:M.string().optional(),companyGstin:M.string().optional(),website:M.string().optional(),email:M.string().optional(),headOfficeAddress:M.string().optional(),workshopAddress:M.string().optional()}),responses:{200:M.custom()}}},invoices:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},getByProject:{responses:{200:M.custom()}},create:{input:M.object({projectId:M.number().min(1),invoiceNumber:M.string().min(1),revision:M.string().default("R-001"),organisationName:M.string().min(1),registeredAddress:M.string().min(1),consigneeAddress:M.string().min(1),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({invoiceNumber:M.string().min(1).optional(),revision:M.string().optional(),organisationName:M.string().min(1).optional(),registeredAddress:M.string().min(1).optional(),consigneeAddress:M.string().min(1).optional(),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},invoiceItems:{list:{responses:{200:M.array(M.custom())}},create:{input:M.object({serialNo:M.number().min(1),description:M.string().min(1),hsnCode:M.string().optional(),quantity:M.string(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string(),remarks:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({serialNo:M.number().min(1).optional(),description:M.string().min(1).optional(),hsnCode:M.string().optional(),quantity:M.string().optional(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string().optional(),remarks:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},gatePasses:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},getByProject:{responses:{200:M.custom()}},create:{input:M.object({projectId:M.number().min(1),gatePassNumber:M.string().min(1),revision:M.string().default("R-001"),organisationName:M.string().min(1),registeredAddress:M.string().min(1),consigneeAddress:M.string().min(1),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({gatePassNumber:M.string().min(1).optional(),revision:M.string().optional(),organisationName:M.string().min(1).optional(),registeredAddress:M.string().min(1).optional(),consigneeAddress:M.string().min(1).optional(),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},gatePassItems:{list:{responses:{200:M.array(M.custom())}},create:{input:M.object({serialNo:M.number().min(1),description:M.string().min(1),hsnCode:M.string().optional(),quantity:M.string(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string(),remarks:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({serialNo:M.number().min(1).optional(),description:M.string().min(1).optional(),hsnCode:M.string().optional(),quantity:M.string().optional(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string().optional(),remarks:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},deliveryChallans:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},getByProject:{responses:{200:M.custom()}},create:{input:M.object({projectId:M.number().min(1),deliveryChallanNumber:M.string().min(1),revision:M.string().default("R-001"),organisationName:M.string().min(1),registeredAddress:M.string().min(1),consigneeAddress:M.string().min(1),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({deliveryChallanNumber:M.string().min(1).optional(),revision:M.string().optional(),organisationName:M.string().min(1).optional(),registeredAddress:M.string().min(1).optional(),consigneeAddress:M.string().min(1).optional(),clientGstin:M.string().optional(),workOrderNo:M.string().optional(),dispatchDetails:M.string().optional(),cgstRate:M.string().optional(),sgstRate:M.string().optional(),igstRate:M.string().optional(),appliedTaxType:M.string().optional(),totalAmount:M.string().optional(),totalTax:M.string().optional(),grandTotal:M.string().optional(),contentSections:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},deliveryChallanItems:{list:{responses:{200:M.array(M.custom())}},create:{input:M.object({serialNo:M.number().min(1),description:M.string().min(1),hsnCode:M.string().optional(),quantity:M.string(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string(),remarks:M.string().optional()}),responses:{201:M.custom()}},update:{input:M.object({serialNo:M.number().min(1).optional(),description:M.string().min(1).optional(),hsnCode:M.string().optional(),quantity:M.string().optional(),unit:M.string().optional(),ratePerUnit:M.string().optional(),percentage:M.string().optional(),amount:M.string().optional(),remarks:M.string().optional()}),responses:{200:M.custom()}},delete:{responses:{204:M.void()}}},ledger:{getBudget:{responses:{200:M.custom().nullable()}},upsertBudget:{input:M.object({projectValue:M.string()}),responses:{200:M.custom()}},listEntries:{responses:{200:M.array(M.custom())}},createEntry:{input:M.object({entryDate:M.string().min(1),entryType:M.enum(["expense","receipt"]),category:M.string().min(1),description:M.string().min(1),amount:M.string(),paymentMode:M.string().min(1),remarks:M.string().optional(),reference:M.string().optional(),receivedAgainst:M.string().optional(),chequeNumber:M.string().optional(),bankName:M.string().optional(),chequeDate:M.string().optional(),utrNumber:M.string().optional(),attachmentUrl:M.string().optional()}),responses:{201:M.custom()}},updateEntry:{input:M.object({entryDate:M.string().optional(),entryType:M.enum(["expense","receipt"]).optional(),category:M.string().optional(),description:M.string().optional(),amount:M.string().optional(),paymentMode:M.string().optional(),remarks:M.string().optional(),reference:M.string().optional(),receivedAgainst:M.string().optional(),chequeNumber:M.string().optional(),bankName:M.string().optional(),chequeDate:M.string().optional(),utrNumber:M.string().optional(),attachmentUrl:M.string().optional()}),responses:{200:M.custom()}},deleteEntry:{responses:{204:M.void()}}},users:{list:{responses:{200:M.array(M.custom())}},get:{responses:{200:M.custom()}},create:{input:M.object({username:M.string().email("Please enter a valid email address"),password:M.string().min(6,"Password must be at least 6 characters"),name:M.string().min(1,"Name is required"),email:M.string().email("Please enter a valid email address").optional(),mobile:M.string().min(10,"Valid mobile number is required").optional(),role:M.enum(_h,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:M.array(M.number()).optional()}),responses:{201:M.custom(),403:M.object({message:M.string()})}},update:{input:M.object({username:M.string().email().optional(),password:M.string().min(6).optional(),name:M.string().min(1).optional(),email:M.string().email().optional(),mobile:M.string().min(10).optional(),role:M.enum(_h).optional(),assignedClientIds:M.array(M.number()).optional()}),responses:{200:M.custom(),403:M.object({message:M.string()})}},delete:{responses:{204:M.void(),403:M.object({message:M.string()})}},getClientAssignments:{responses:{200:M.array(M.number())}}}};function Ra(){return Bn({queryKey:[To.auth.me.path],queryFn:async()=>{const t=await fetch(To.auth.me.path,{credentials:"include"});if(t.status===401)return null;if(!t.ok)throw new Error("Failed to fetch user");return To.auth.me.responses[200].parse(await t.json())},retry:(t,e)=>e?.message?.includes("401")?!1:t<3})}function $E(){const t=Um(),[,e]=Va(),{toast:n}=Ha();return Mr({mutationFn:async r=>{const a=To.auth.login.input.parse(r),o=await fetch(To.auth.login.path,{method:To.auth.login.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!o.ok)throw o.status===401?new Error("Invalid email or password"):new Error("Login failed");return To.auth.login.responses[200].parse(await o.json())},onSuccess:r=>{t.setQueryData([To.auth.me.path],r),n({title:"Welcome back!",description:`Successfully logged in as ${r.name}`}),e("/revira/dashboard")},onError:r=>{n({variant:"destructive",title:"Login Failed",description:r.message})}})}function VE(){const t=Um(),[,e]=Va(),{toast:n}=Ha();return Mr({mutationFn:async()=>{if(!(await fetch(To.auth.logout.path,{method:To.auth.logout.method,credentials:"include"})).ok)throw new Error("Logout failed")},onSuccess:()=>{t.setQueryData([To.auth.me.path],null),e("/revira"),n({title:"Logged out",description:"You have been successfully logged out."})}})}const oN=P.createContext({branding:null,isLoading:!0});function HE(){return P.useContext(oN)}function Q2(t){t=t.replace("#","");const e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255,a=Math.max(e,n,r),o=Math.min(e,n,r);let u=0,c=0;const f=(a+o)/2;if(a!==o){const p=a-o;switch(c=f>.5?p/(2-a-o):p/(a+o),a){case e:u=((n-r)/p+(n<r?6:0))/6;break;case n:u=((r-e)/p+2)/6;break;case r:u=((e-n)/p+4)/6;break}}return`${Math.round(u*360)} ${Math.round(c*100)}% ${Math.round(f*100)}%`}function WE({children:t}){const{data:e}=Ra(),{data:n,isLoading:r}=Bn({queryKey:["/revira/api/branding"],staleTime:300*1e3,enabled:!!e,refetchOnMount:!0,refetchOnWindowFocus:!1});return P.useEffect(()=>{if(n){const a=document.documentElement;if(n.primaryColor){const o=Q2(n.primaryColor);a.style.setProperty("--primary",o),a.style.setProperty("--ring",o)}if(n.secondaryColor){const o=Q2(n.secondaryColor);a.style.setProperty("--secondary",o)}}},[n]),s.jsx(oN.Provider,{value:{branding:n||null,isLoading:r},children:t})}var Bh=t=>t.type==="checkbox",Bu=t=>t instanceof Date,ka=t=>t==null;const lN=t=>typeof t=="object";var mi=t=>!ka(t)&&!Array.isArray(t)&&lN(t)&&!Bu(t),cN=t=>mi(t)&&t.target?Bh(t.target)?t.target.checked:t.target.value:t,GE=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,uN=(t,e)=>t.has(GE(e)),KE=t=>{const e=t.constructor&&t.constructor.prototype;return mi(e)&&e.hasOwnProperty("isPrototypeOf")},g1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ta(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(g1&&(t instanceof Blob||r))&&(n||mi(t)))if(e=n?[]:{},!n&&!KE(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=ta(t[a]));else return t;return e}var ng=t=>Array.isArray(t)?t.filter(Boolean):[],di=t=>t===void 0,Bt=(t,e,n)=>{if(!e||!mi(t))return n;const r=ng(e.split(/[,[\].]+?/)).reduce((a,o)=>ka(a)?a:a[o],t);return di(r)||r===t?di(t[e])?n:t[e]:r},co=t=>typeof t=="boolean",v1=t=>/^\w*$/.test(t),dN=t=>ng(t.replace(/["|']|\]/g,"").split(/\.|\[/)),$r=(t,e,n)=>{let r=-1;const a=v1(e)?[e]:dN(e),o=a.length,u=o-1;for(;++r<o;){const c=a[r];let f=n;if(r!==u){const p=t[c];f=mi(p)||Array.isArray(p)?p:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=f,t=t[c]}};const _m={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},nl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},fN=Nn.createContext(null),rg=()=>Nn.useContext(fN),QE=t=>{const{children:e,...n}=t;return Nn.createElement(fN.Provider,{value:n},e)};var hN=(t,e,n,r=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==nl.all&&(e._proxyFormState[u]=!r||nl.all),n&&(n[u]=!0),t[u]}});return a};function ZE(t){const e=rg(),{control:n=e.control,disabled:r,name:a,exact:o}=t||{},[u,c]=Nn.useState(n._formState),f=Nn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Nn.useRef(a);return p.current=a,Nn.useEffect(()=>n._subscribe({name:p.current,formState:f.current,exact:o,callback:m=>{!r&&c({...n._formState,...m})}}),[n,r,o]),Nn.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),Nn.useMemo(()=>hN(u,n,f.current,!1),[u,n])}var Rl=t=>typeof t=="string",pN=(t,e,n,r,a)=>Rl(t)?(r&&e.watch.add(t),Bt(n,t,a)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),Bt(n,o))):(r&&(e.watchAll=!0),n);function YE(t){const e=rg(),{control:n=e.control,name:r,defaultValue:a,disabled:o,exact:u}=t||{},c=Nn.useRef(r),f=Nn.useRef(a);c.current=r,Nn.useEffect(()=>n._subscribe({name:c.current,formState:{values:!0},exact:u,callback:y=>!o&&m(pN(c.current,n._names,y.values||n._formValues,!1,f.current))}),[n,o,u]);const[p,m]=Nn.useState(n._getWatch(r,a));return Nn.useEffect(()=>n._removeUnmounted()),p}function XE(t){const e=rg(),{name:n,disabled:r,control:a=e.control,shouldUnregister:o}=t,u=uN(a._names.array,n),c=YE({control:a,name:n,defaultValue:Bt(a._formValues,n,Bt(a._defaultValues,n,t.defaultValue)),exact:!0}),f=ZE({control:a,name:n,exact:!0}),p=Nn.useRef(t),m=Nn.useRef(a.register(n,{...t.rules,value:c,...co(t.disabled)?{disabled:t.disabled}:{}})),y=Nn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Bt(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Bt(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Bt(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Bt(f.validatingFields,n)},error:{enumerable:!0,get:()=>Bt(f.errors,n)}}),[f,n]),j=Nn.useCallback(k=>m.current.onChange({target:{value:cN(k),name:n},type:_m.CHANGE}),[n]),x=Nn.useCallback(()=>m.current.onBlur({target:{value:Bt(a._formValues,n),name:n},type:_m.BLUR}),[n,a._formValues]),D=Nn.useCallback(k=>{const A=Bt(a._fields,n);A&&k&&(A._f.ref={focus:()=>k.focus(),select:()=>k.select(),setCustomValidity:I=>k.setCustomValidity(I),reportValidity:()=>k.reportValidity()})},[a._fields,n]),S=Nn.useMemo(()=>({name:n,value:c,...co(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:j,onBlur:x,ref:D}),[n,r,f.disabled,j,x,D,c]);return Nn.useEffect(()=>{const k=a._options.shouldUnregister||o;a.register(n,{...p.current.rules,...co(p.current.disabled)?{disabled:p.current.disabled}:{}});const A=(I,R)=>{const $=Bt(a._fields,I);$&&$._f&&($._f.mount=R)};if(A(n,!0),k){const I=ta(Bt(a._options.defaultValues,n));$r(a._defaultValues,n,I),di(Bt(a._formValues,n))&&$r(a._formValues,n,I)}return!u&&a.register(n),()=>{(u?k&&!a._state.action:k)?a.unregister(n):A(n,!1)}},[n,a,u,o]),Nn.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),Nn.useMemo(()=>({field:S,formState:f,fieldState:y}),[S,f,y])}const JE=t=>t.render(XE(t));var mN=(t,e,n,r,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:a||!0}}:{},sh=t=>Array.isArray(t)?t:[t],Z2=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},Nv=t=>ka(t)||!lN(t);function Xc(t,e){if(Nv(t)||Nv(e))return t===e;if(Bu(t)&&Bu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const a of n){const o=t[a];if(!r.includes(a))return!1;if(a!=="ref"){const u=e[a];if(Bu(o)&&Bu(u)||mi(o)&&mi(u)||Array.isArray(o)&&Array.isArray(u)?!Xc(o,u):o!==u)return!1}}return!0}var Pa=t=>mi(t)&&!Object.keys(t).length,x1=t=>t.type==="file",rl=t=>typeof t=="function",Pm=t=>{if(!g1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},gN=t=>t.type==="select-multiple",y1=t=>t.type==="radio",e8=t=>y1(t)||Bh(t),x0=t=>Pm(t)&&t.isConnected;function t8(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=di(t)?r++:t[e[r++]];return t}function n8(t){for(const e in t)if(t.hasOwnProperty(e)&&!di(t[e]))return!1;return!0}function Ei(t,e){const n=Array.isArray(e)?e:v1(e)?[e]:dN(e),r=n.length===1?t:t8(t,n),a=n.length-1,o=n[a];return r&&delete r[o],a!==0&&(mi(r)&&Pa(r)||Array.isArray(r)&&n8(r))&&Ei(t,n.slice(0,-1)),t}var vN=t=>{for(const e in t)if(rl(t[e]))return!0;return!1};function km(t,e={}){const n=Array.isArray(t);if(mi(t)||n)for(const r in t)Array.isArray(t[r])||mi(t[r])&&!vN(t[r])?(e[r]=Array.isArray(t[r])?[]:{},km(t[r],e[r])):ka(t[r])||(e[r]=!0);return e}function xN(t,e,n){const r=Array.isArray(t);if(mi(t)||r)for(const a in t)Array.isArray(t[a])||mi(t[a])&&!vN(t[a])?di(e)||Nv(n[a])?n[a]=Array.isArray(t[a])?km(t[a],[]):{...km(t[a])}:xN(t[a],ka(e)?{}:e[a],n[a]):n[a]=!Xc(t[a],e[a]);return n}var Kf=(t,e)=>xN(t,e,km(e));const Y2={value:!1,isValid:!1},X2={value:!0,isValid:!0};var yN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!di(t[0].attributes.value)?di(t[0].value)||t[0].value===""?X2:{value:t[0].value,isValid:!0}:X2:Y2}return Y2},bN=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>di(t)?t:e?t===""?NaN:t&&+t:n&&Rl(t)?new Date(t):r?r(t):t;const J2={isValid:!1,value:null};var wN=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,J2):J2;function ey(t){const e=t.ref;return x1(e)?e.files:y1(e)?wN(t.refs).value:gN(e)?[...e.selectedOptions].map(({value:n})=>n):Bh(e)?yN(t.refs).value:bN(di(e.value)?t.ref.value:e.value,t)}var r8=(t,e,n,r)=>{const a={};for(const o of t){const u=Bt(e,o);u&&$r(a,o,u._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:r}},Tm=t=>t instanceof RegExp,Qf=t=>di(t)?t:Tm(t)?t.source:mi(t)?Tm(t.value)?t.value.source:t.value:t,ty=t=>({isOnSubmit:!t||t===nl.onSubmit,isOnBlur:t===nl.onBlur,isOnChange:t===nl.onChange,isOnAll:t===nl.all,isOnTouch:t===nl.onTouched});const ny="AsyncFunction";var s8=t=>!!t&&!!t.validate&&!!(rl(t.validate)&&t.validate.constructor.name===ny||mi(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===ny)),i8=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ry=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ih=(t,e,n,r)=>{for(const a of n||Object.keys(t)){const o=Bt(t,a);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(ih(c,e))break}else if(mi(c)&&ih(c,e))break}}};function sy(t,e,n){const r=Bt(t,n);if(r||v1(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),u=Bt(e,o),c=Bt(t,o);if(u&&!Array.isArray(u)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};a.pop()}return{name:n}}var a8=(t,e,n,r)=>{n(t);const{name:a,...o}=t;return Pa(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||nl.all))},o8=(t,e,n)=>!t||!e||t===e||sh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),l8=(t,e,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?r.isOnBlur:a.isOnBlur)?!t:(n?r.isOnChange:a.isOnChange)?t:!0,c8=(t,e)=>!ng(Bt(t,e)).length&&Ei(t,e),u8=(t,e,n)=>{const r=sh(Bt(t,n));return $r(r,"root",e[n]),$r(t,n,r),t},Yp=t=>Rl(t);function iy(t,e,n="validate"){if(Yp(t)||Array.isArray(t)&&t.every(Yp)||co(t)&&!t)return{type:n,message:Yp(t)?t:"",ref:e}}var Ad=t=>mi(t)&&!Tm(t)?t:{value:t,message:""},ay=async(t,e,n,r,a,o)=>{const{ref:u,refs:c,required:f,maxLength:p,minLength:m,min:y,max:j,pattern:x,validate:D,name:S,valueAsNumber:k,mount:A}=t._f,I=Bt(n,S);if(!A||e.has(S))return{};const R=c?c[0]:u,$=E=>{a&&R.reportValidity&&(R.setCustomValidity(co(E)?"":E||""),R.reportValidity())},N={},xe=y1(u),re=Bh(u),K=xe||re,W=(k||x1(u))&&di(u.value)&&di(I)||Pm(u)&&u.value===""||I===""||Array.isArray(I)&&!I.length,he=mN.bind(null,S,r,N),z=(E,Q,X,ie=cc.maxLength,Ce=cc.minLength)=>{const te=E?Q:X;N[S]={type:E?ie:Ce,message:te,ref:u,...he(E?ie:Ce,te)}};if(o?!Array.isArray(I)||!I.length:f&&(!K&&(W||ka(I))||co(I)&&!I||re&&!yN(c).isValid||xe&&!wN(c).isValid)){const{value:E,message:Q}=Yp(f)?{value:!!f,message:f}:Ad(f);if(E&&(N[S]={type:cc.required,message:Q,ref:R,...he(cc.required,Q)},!r))return $(Q),N}if(!W&&(!ka(y)||!ka(j))){let E,Q;const X=Ad(j),ie=Ad(y);if(!ka(I)&&!isNaN(I)){const Ce=u.valueAsNumber||I&&+I;ka(X.value)||(E=Ce>X.value),ka(ie.value)||(Q=Ce<ie.value)}else{const Ce=u.valueAsDate||new Date(I),te=Re=>new Date(new Date().toDateString()+" "+Re),ae=u.type=="time",Ne=u.type=="week";Rl(X.value)&&I&&(E=ae?te(I)>te(X.value):Ne?I>X.value:Ce>new Date(X.value)),Rl(ie.value)&&I&&(Q=ae?te(I)<te(ie.value):Ne?I<ie.value:Ce<new Date(ie.value))}if((E||Q)&&(z(!!E,X.message,ie.message,cc.max,cc.min),!r))return $(N[S].message),N}if((p||m)&&!W&&(Rl(I)||o&&Array.isArray(I))){const E=Ad(p),Q=Ad(m),X=!ka(E.value)&&I.length>+E.value,ie=!ka(Q.value)&&I.length<+Q.value;if((X||ie)&&(z(X,E.message,Q.message),!r))return $(N[S].message),N}if(x&&!W&&Rl(I)){const{value:E,message:Q}=Ad(x);if(Tm(E)&&!I.match(E)&&(N[S]={type:cc.pattern,message:Q,ref:u,...he(cc.pattern,Q)},!r))return $(Q),N}if(D){if(rl(D)){const E=await D(I,n),Q=iy(E,R);if(Q&&(N[S]={...Q,...he(cc.validate,Q.message)},!r))return $(Q.message),N}else if(mi(D)){let E={};for(const Q in D){if(!Pa(E)&&!r)break;const X=iy(await D[Q](I,n),R,Q);X&&(E={...X,...he(Q,X.message)},$(X.message),r&&(N[S]=E))}if(!Pa(E)&&(N[S]={ref:R,...E},!r))return N}}return $(!0),N};const d8={mode:nl.onSubmit,reValidateMode:nl.onChange,shouldFocusError:!0};function f8(t={}){let e={...d8,...t},n={submitCount:0,isDirty:!1,isLoading:rl(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let a=mi(e.defaultValues)||mi(e.values)?ta(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:ta(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...m};const j={array:Z2(),state:Z2()},x=ty(e.mode),D=ty(e.reValidateMode),S=e.criteriaMode===nl.all,k=U=>B=>{clearTimeout(p),p=setTimeout(U,B)},A=async U=>{if(!e.disabled&&(m.isValid||y.isValid||U)){const B=e.resolver?Pa((await W()).errors):await z(r,!0);B!==n.isValid&&j.state.next({isValid:B})}},I=(U,B)=>{!e.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((U||Array.from(c.mount)).forEach(G=>{G&&(B?$r(n.validatingFields,G,B):Ei(n.validatingFields,G))}),j.state.next({validatingFields:n.validatingFields,isValidating:!Pa(n.validatingFields)}))},R=(U,B=[],G,fe,Pe=!0,_e=!0)=>{if(fe&&G&&!e.disabled){if(u.action=!0,_e&&Array.isArray(Bt(r,U))){const Ie=G(Bt(r,U),fe.argA,fe.argB);Pe&&$r(r,U,Ie)}if(_e&&Array.isArray(Bt(n.errors,U))){const Ie=G(Bt(n.errors,U),fe.argA,fe.argB);Pe&&$r(n.errors,U,Ie),c8(n.errors,U)}if((m.touchedFields||y.touchedFields)&&_e&&Array.isArray(Bt(n.touchedFields,U))){const Ie=G(Bt(n.touchedFields,U),fe.argA,fe.argB);Pe&&$r(n.touchedFields,U,Ie)}(m.dirtyFields||y.dirtyFields)&&(n.dirtyFields=Kf(a,o)),j.state.next({name:U,isDirty:Q(U,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else $r(o,U,B)},$=(U,B)=>{$r(n.errors,U,B),j.state.next({errors:n.errors})},N=U=>{n.errors=U,j.state.next({errors:n.errors,isValid:!1})},xe=(U,B,G,fe)=>{const Pe=Bt(r,U);if(Pe){const _e=Bt(o,U,di(G)?Bt(a,U):G);di(_e)||fe&&fe.defaultChecked||B?$r(o,U,B?_e:ey(Pe._f)):Ce(U,_e),u.mount&&A()}},re=(U,B,G,fe,Pe)=>{let _e=!1,Ie=!1;const qe={name:U};if(!e.disabled){if(!G||fe){(m.isDirty||y.isDirty)&&(Ie=n.isDirty,n.isDirty=qe.isDirty=Q(),_e=Ie!==qe.isDirty);const wt=Xc(Bt(a,U),B);Ie=!!Bt(n.dirtyFields,U),wt?Ei(n.dirtyFields,U):$r(n.dirtyFields,U,!0),qe.dirtyFields=n.dirtyFields,_e=_e||(m.dirtyFields||y.dirtyFields)&&Ie!==!wt}if(G){const wt=Bt(n.touchedFields,U);wt||($r(n.touchedFields,U,G),qe.touchedFields=n.touchedFields,_e=_e||(m.touchedFields||y.touchedFields)&&wt!==G)}_e&&Pe&&j.state.next(qe)}return _e?qe:{}},K=(U,B,G,fe)=>{const Pe=Bt(n.errors,U),_e=(m.isValid||y.isValid)&&co(B)&&n.isValid!==B;if(e.delayError&&G?(f=k(()=>$(U,G)),f(e.delayError)):(clearTimeout(p),f=null,G?$r(n.errors,U,G):Ei(n.errors,U)),(G?!Xc(Pe,G):Pe)||!Pa(fe)||_e){const Ie={...fe,..._e&&co(B)?{isValid:B}:{},errors:n.errors,name:U};n={...n,...Ie},j.state.next(Ie)}},W=async U=>{I(U,!0);const B=await e.resolver(o,e.context,r8(U||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return I(U),B},he=async U=>{const{errors:B}=await W(U);if(U)for(const G of U){const fe=Bt(B,G);fe?$r(n.errors,G,fe):Ei(n.errors,G)}else n.errors=B;return B},z=async(U,B,G={valid:!0})=>{for(const fe in U){const Pe=U[fe];if(Pe){const{_f:_e,...Ie}=Pe;if(_e){const qe=c.array.has(_e.name),wt=Pe._f&&s8(Pe._f);wt&&m.validatingFields&&I([fe],!0);const ft=await ay(Pe,c.disabled,o,S,e.shouldUseNativeValidation&&!B,qe);if(wt&&m.validatingFields&&I([fe]),ft[_e.name]&&(G.valid=!1,B))break;!B&&(Bt(ft,_e.name)?qe?u8(n.errors,ft,_e.name):$r(n.errors,_e.name,ft[_e.name]):Ei(n.errors,_e.name))}!Pa(Ie)&&await z(Ie,B,G)}}return G.valid},E=()=>{for(const U of c.unMount){const B=Bt(r,U);B&&(B._f.refs?B._f.refs.every(G=>!x0(G)):!x0(B._f.ref))&&Oe(U)}c.unMount=new Set},Q=(U,B)=>!e.disabled&&(U&&B&&$r(o,U,B),!Xc(O(),a)),X=(U,B,G)=>pN(U,c,{...u.mount?o:di(B)?a:Rl(U)?{[U]:B}:B},G,B),ie=U=>ng(Bt(u.mount?o:a,U,e.shouldUnregister?Bt(a,U,[]):[])),Ce=(U,B,G={})=>{const fe=Bt(r,U);let Pe=B;if(fe){const _e=fe._f;_e&&(!_e.disabled&&$r(o,U,bN(B,_e)),Pe=Pm(_e.ref)&&ka(B)?"":B,gN(_e.ref)?[..._e.ref.options].forEach(Ie=>Ie.selected=Pe.includes(Ie.value)):_e.refs?Bh(_e.ref)?_e.refs.length>1?_e.refs.forEach(Ie=>(!Ie.defaultChecked||!Ie.disabled)&&(Ie.checked=Array.isArray(Pe)?!!Pe.find(qe=>qe===Ie.value):Pe===Ie.value)):_e.refs[0]&&(_e.refs[0].checked=!!Pe):_e.refs.forEach(Ie=>Ie.checked=Ie.value===Pe):x1(_e.ref)?_e.ref.value="":(_e.ref.value=Pe,_e.ref.type||j.state.next({name:U,values:ta(o)})))}(G.shouldDirty||G.shouldTouch)&&re(U,Pe,G.shouldTouch,G.shouldDirty,!0),G.shouldValidate&&ne(U)},te=(U,B,G)=>{for(const fe in B){const Pe=B[fe],_e=`${U}.${fe}`,Ie=Bt(r,_e);(c.array.has(U)||mi(Pe)||Ie&&!Ie._f)&&!Bu(Pe)?te(_e,Pe,G):Ce(_e,Pe,G)}},ae=(U,B,G={})=>{const fe=Bt(r,U),Pe=c.array.has(U),_e=ta(B);$r(o,U,_e),Pe?(j.array.next({name:U,values:ta(o)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&G.shouldDirty&&j.state.next({name:U,dirtyFields:Kf(a,o),isDirty:Q(U,_e)})):fe&&!fe._f&&!ka(_e)?te(U,_e,G):Ce(U,_e,G),ry(U,c)&&j.state.next({...n}),j.state.next({name:u.mount?U:void 0,values:ta(o)})},Ne=async U=>{u.mount=!0;const B=U.target;let G=B.name,fe=!0;const Pe=Bt(r,G),_e=Ie=>{fe=Number.isNaN(Ie)||Bu(Ie)&&isNaN(Ie.getTime())||Xc(Ie,Bt(o,G,Ie))};if(Pe){let Ie,qe;const wt=B.type?ey(Pe._f):cN(U),ft=U.type===_m.BLUR||U.type===_m.FOCUS_OUT,En=!i8(Pe._f)&&!e.resolver&&!Bt(n.errors,G)&&!Pe._f.deps||l8(ft,Bt(n.touchedFields,G),n.isSubmitted,D,x),Cn=ry(G,c,ft);$r(o,G,wt),ft?(Pe._f.onBlur&&Pe._f.onBlur(U),f&&f(0)):Pe._f.onChange&&Pe._f.onChange(U);const mn=re(G,wt,ft),gn=!Pa(mn)||Cn;if(!ft&&j.state.next({name:G,type:U.type,values:ta(o)}),En)return(m.isValid||y.isValid)&&(e.mode==="onBlur"?ft&&A():ft||A()),gn&&j.state.next({name:G,...Cn?{}:mn});if(!ft&&Cn&&j.state.next({...n}),e.resolver){const{errors:bn}=await W([G]);if(_e(wt),fe){const Ct=sy(n.errors,r,G),rn=sy(bn,r,Ct.name||G);Ie=rn.error,G=rn.name,qe=Pa(bn)}}else I([G],!0),Ie=(await ay(Pe,c.disabled,o,S,e.shouldUseNativeValidation))[G],I([G]),_e(wt),fe&&(Ie?qe=!1:(m.isValid||y.isValid)&&(qe=await z(r,!0)));fe&&(Pe._f.deps&&ne(Pe._f.deps),K(G,qe,Ie,mn))}},Re=(U,B)=>{if(Bt(n.errors,B)&&U.focus)return U.focus(),1},ne=async(U,B={})=>{let G,fe;const Pe=sh(U);if(e.resolver){const _e=await he(di(U)?U:Pe);G=Pa(_e),fe=U?!Pe.some(Ie=>Bt(_e,Ie)):G}else U?(fe=(await Promise.all(Pe.map(async _e=>{const Ie=Bt(r,_e);return await z(Ie&&Ie._f?{[_e]:Ie}:Ie)}))).every(Boolean),!(!fe&&!n.isValid)&&A()):fe=G=await z(r);return j.state.next({...!Rl(U)||(m.isValid||y.isValid)&&G!==n.isValid?{}:{name:U},...e.resolver||!U?{isValid:G}:{},errors:n.errors}),B.shouldFocus&&!fe&&ih(r,Re,U?Pe:c.mount),fe},O=U=>{const B={...u.mount?o:a};return di(U)?B:Rl(U)?Bt(B,U):U.map(G=>Bt(B,G))},L=(U,B)=>({invalid:!!Bt((B||n).errors,U),isDirty:!!Bt((B||n).dirtyFields,U),error:Bt((B||n).errors,U),isValidating:!!Bt(n.validatingFields,U),isTouched:!!Bt((B||n).touchedFields,U)}),oe=U=>{U&&sh(U).forEach(B=>Ei(n.errors,B)),j.state.next({errors:U?n.errors:{}})},ve=(U,B,G)=>{const fe=(Bt(r,U,{_f:{}})._f||{}).ref,Pe=Bt(n.errors,U)||{},{ref:_e,message:Ie,type:qe,...wt}=Pe;$r(n.errors,U,{...wt,...B,ref:fe}),j.state.next({name:U,errors:n.errors,isValid:!1}),G&&G.shouldFocus&&fe&&fe.focus&&fe.focus()},ye=(U,B)=>rl(U)?j.state.subscribe({next:G=>U(X(void 0,B),G)}):X(U,B,!0),be=U=>j.state.subscribe({next:B=>{o8(U.name,B.name,U.exact)&&a8(B,U.formState||m,le,U.reRenderRoot)&&U.callback({values:{...o},...n,...B})}}).unsubscribe,Le=U=>(u.mount=!0,y={...y,...U.formState},be({...U,formState:y})),Oe=(U,B={})=>{for(const G of U?sh(U):c.mount)c.mount.delete(G),c.array.delete(G),B.keepValue||(Ei(r,G),Ei(o,G)),!B.keepError&&Ei(n.errors,G),!B.keepDirty&&Ei(n.dirtyFields,G),!B.keepTouched&&Ei(n.touchedFields,G),!B.keepIsValidating&&Ei(n.validatingFields,G),!e.shouldUnregister&&!B.keepDefaultValue&&Ei(a,G);j.state.next({values:ta(o)}),j.state.next({...n,...B.keepDirty?{isDirty:Q()}:{}}),!B.keepIsValid&&A()},ze=({disabled:U,name:B})=>{(co(U)&&u.mount||U||c.disabled.has(B))&&(U?c.disabled.add(B):c.disabled.delete(B))},Ze=(U,B={})=>{let G=Bt(r,U);const fe=co(B.disabled)||co(e.disabled);return $r(r,U,{...G||{},_f:{...G&&G._f?G._f:{ref:{name:U}},name:U,mount:!0,...B}}),c.mount.add(U),G?ze({disabled:co(B.disabled)?B.disabled:e.disabled,name:U}):xe(U,!0,B.value),{...fe?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:Qf(B.min),max:Qf(B.max),minLength:Qf(B.minLength),maxLength:Qf(B.maxLength),pattern:Qf(B.pattern)}:{},name:U,onChange:Ne,onBlur:Ne,ref:Pe=>{if(Pe){Ze(U,B),G=Bt(r,U);const _e=di(Pe.value)&&Pe.querySelectorAll&&Pe.querySelectorAll("input,select,textarea")[0]||Pe,Ie=e8(_e),qe=G._f.refs||[];if(Ie?qe.find(wt=>wt===_e):_e===G._f.ref)return;$r(r,U,{_f:{...G._f,...Ie?{refs:[...qe.filter(x0),_e,...Array.isArray(Bt(a,U))?[{}]:[]],ref:{type:_e.type,name:U}}:{ref:_e}}}),xe(U,!1,void 0,_e)}else G=Bt(r,U,{}),G._f&&(G._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(uN(c.array,U)&&u.action)&&c.unMount.add(U)}}},lt=()=>e.shouldFocusError&&ih(r,Re,c.mount),ut=U=>{co(U)&&(j.state.next({disabled:U}),ih(r,(B,G)=>{const fe=Bt(r,G);fe&&(B.disabled=fe._f.disabled||U,Array.isArray(fe._f.refs)&&fe._f.refs.forEach(Pe=>{Pe.disabled=fe._f.disabled||U}))},0,!1))},_t=(U,B)=>async G=>{let fe;G&&(G.preventDefault&&G.preventDefault(),G.persist&&G.persist());let Pe=ta(o);if(j.state.next({isSubmitting:!0}),e.resolver){const{errors:_e,values:Ie}=await W();n.errors=_e,Pe=Ie}else await z(r);if(c.disabled.size)for(const _e of c.disabled)$r(Pe,_e,void 0);if(Ei(n.errors,"root"),Pa(n.errors)){j.state.next({errors:{}});try{await U(Pe,G)}catch(_e){fe=_e}}else B&&await B({...n.errors},G),lt(),setTimeout(lt);if(j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Pa(n.errors)&&!fe,submitCount:n.submitCount+1,errors:n.errors}),fe)throw fe},ue=(U,B={})=>{Bt(r,U)&&(di(B.defaultValue)?ae(U,ta(Bt(a,U))):(ae(U,B.defaultValue),$r(a,U,ta(B.defaultValue))),B.keepTouched||Ei(n.touchedFields,U),B.keepDirty||(Ei(n.dirtyFields,U),n.isDirty=B.defaultValue?Q(U,ta(Bt(a,U))):Q()),B.keepError||(Ei(n.errors,U),m.isValid&&A()),j.state.next({...n}))},xt=(U,B={})=>{const G=U?ta(U):a,fe=ta(G),Pe=Pa(U),_e=Pe?a:fe;if(B.keepDefaultValues||(a=G),!B.keepValues){if(B.keepDirtyValues){const Ie=new Set([...c.mount,...Object.keys(Kf(a,o))]);for(const qe of Array.from(Ie))Bt(n.dirtyFields,qe)?$r(_e,qe,Bt(o,qe)):ae(qe,Bt(_e,qe))}else{if(g1&&di(U))for(const Ie of c.mount){const qe=Bt(r,Ie);if(qe&&qe._f){const wt=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if(Pm(wt)){const ft=wt.closest("form");if(ft){ft.reset();break}}}}for(const Ie of c.mount)ae(Ie,Bt(_e,Ie))}o=ta(_e),j.array.next({values:{..._e}}),j.state.next({values:{..._e}})}c={mount:B.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!B.keepIsValid||!!B.keepDirtyValues,u.watch=!!e.shouldUnregister,j.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:Pe?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Xc(U,a)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Pe?{}:B.keepDirtyValues?B.keepDefaultValues&&o?Kf(a,o):n.dirtyFields:B.keepDefaultValues&&U?Kf(a,U):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},dn=(U,B)=>xt(rl(U)?U(o):U,B),Jt=(U,B={})=>{const G=Bt(r,U),fe=G&&G._f;if(fe){const Pe=fe.refs?fe.refs[0]:fe.ref;Pe.focus&&(Pe.focus(),B.shouldSelect&&rl(Pe.select)&&Pe.select())}},le=U=>{n={...n,...U}},q={control:{register:Ze,unregister:Oe,getFieldState:L,handleSubmit:_t,setError:ve,_subscribe:be,_runSchema:W,_getWatch:X,_getDirty:Q,_setValid:A,_setFieldArray:R,_setDisabledField:ze,_setErrors:N,_getFieldArray:ie,_reset:xt,_resetDefaultValues:()=>rl(e.defaultValues)&&e.defaultValues().then(U=>{dn(U,e.resetOptions),j.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:ut,_subjects:j,_proxyFormState:m,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(U){u=U},get _defaultValues(){return a},get _names(){return c},set _names(U){c=U},get _formState(){return n},get _options(){return e},set _options(U){e={...e,...U}}},subscribe:Le,trigger:ne,register:Ze,handleSubmit:_t,watch:ye,setValue:ae,getValues:O,reset:dn,resetField:ue,clearErrors:oe,unregister:Oe,setError:ve,setFocus:Jt,getFieldState:L};return{...q,formControl:q}}function gf(t={}){const e=Nn.useRef(void 0),n=Nn.useRef(void 0),[r,a]=Nn.useState({isDirty:!1,isValidating:!1,isLoading:rl(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:rl(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:f8(t),formState:r},t.formControl&&t.defaultValues&&!rl(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const o=e.current.control;return o._options=t,Nn.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0}),[o]),Nn.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Nn.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),Nn.useEffect(()=>{t.values&&!Xc(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[t.values,o]),Nn.useEffect(()=>{t.errors&&!Pa(t.errors)&&o._setErrors(t.errors)},[t.errors,o]),Nn.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Nn.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=hN(r,o),e.current}const oy=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Bt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},NN=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?oy(r.ref,n,t):r.refs&&r.refs.forEach(a=>oy(a,n,t))}},h8=(t,e)=>{e.shouldUseNativeValidation&&NN(t,e);const n={};for(const r in t){const a=Bt(e.fields,r),o=Object.assign(t[r]||{},{ref:a&&a.ref});if(p8(e.names||Object.keys(t),r)){const u=Object.assign({},Bt(n,r));$r(u,"root",o),$r(n,r,u)}else $r(n,r,o)}return n},p8=(t,e)=>t.some(n=>n.startsWith(e+"."));var m8=function(t,e){for(var n={};t.length;){var r=t[0],a=r.code,o=r.message,u=r.path.join(".");if(!n[u])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[u]={message:c.message,type:c.code}}else n[u]={message:o,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(y){return t.push(y)})}),e){var f=n[u].types,p=f&&f[r.code];n[u]=mN(u,e,n,a,p?[].concat(p,r.message):r.message)}t.shift()}return n},vf=function(t,e,n){return n===void 0&&(n={}),function(r,a,o){try{return Promise.resolve((function(u,c){try{var f=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(p){return o.shouldUseNativeValidation&&NN({},o),{errors:{},values:n.raw?r:p}})}catch(p){return c(p)}return f&&f.then?f.then(void 0,c):f})(0,function(u){if((function(c){return Array.isArray(c?.errors)})(u))return{values:{},errors:h8(m8(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}};const b1=Hm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Me=P.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...a},o)=>{const u=r?hb:"button";return s.jsx(u,{className:Sn(b1({variant:e,size:n,className:t})),ref:o,...a})});Me.displayName="Button";const Je=P.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Sn("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Je.displayName="Input";var g8="Label",SN=P.forwardRef((t,e)=>s.jsx(Jn.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));SN.displayName=g8;var jN=SN;const v8=Hm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),CN=P.forwardRef(({className:t,...e},n)=>s.jsx(jN,{ref:n,className:Sn(v8(),t),...e}));CN.displayName=jN.displayName;const xf=QE,AN=P.createContext({}),cr=({...t})=>s.jsx(AN.Provider,{value:{name:t.name},children:s.jsx(JE,{...t})}),sg=()=>{const t=P.useContext(AN),e=P.useContext(_N),{getFieldState:n,formState:r}=rg(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...a}},_N=P.createContext({}),rr=P.forwardRef(({className:t,...e},n)=>{const r=P.useId();return s.jsx(_N.Provider,{value:{id:r},children:s.jsx("div",{ref:n,className:Sn("space-y-2",t),...e})})});rr.displayName="FormItem";const sr=P.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:a}=sg();return s.jsx(CN,{ref:n,className:Sn(r&&"text-destructive",t),htmlFor:a,...e})});sr.displayName="FormLabel";const ir=P.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:o}=sg();return s.jsx(hb,{ref:e,id:r,"aria-describedby":n?`${a} ${o}`:`${a}`,"aria-invalid":!!n,...t})});ir.displayName="FormControl";const x8=P.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=sg();return s.jsx("p",{ref:n,id:r,className:Sn("text-sm text-muted-foreground",t),...e})});x8.displayName="FormDescription";const ar=P.forwardRef(({className:t,children:e,...n},r)=>{const{error:a,formMessageId:o}=sg(),u=a?String(a?.message??""):e;return u?s.jsx("p",{ref:r,id:o,className:Sn("text-sm font-medium text-destructive",t),...n,children:u}):null});ar.displayName="FormMessage";const y8=To.auth.login.input;function b8(){const[,t]=Va(),{data:e,isLoading:n}=Ra(),{mutate:r,isPending:a}=$E(),{data:o}=Bn({queryKey:["/revira/api/branding/public"],staleTime:300*1e3}),u=gf({resolver:vf(y8),defaultValues:{username:"",password:""}});P.useEffect(()=>{e&&t("/revira/dashboard")},[e,t]);function c(f){r(f)}return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx(ov,{className:"w-8 h-8 animate-spin text-primary"})}):e?null:s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:[s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"flex justify-center mb-8",children:o?.logoUrl?s.jsx("img",{src:o.logoUrl,alt:"Company Logo",className:"h-16 max-w-[280px] object-contain","data-testid":"img-login-logo"}):s.jsx("h1",{className:"font-display font-bold text-3xl text-slate-900",children:"REVIRAAPP"})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"font-display font-bold text-2xl text-slate-900",children:"Welcome Back"}),s.jsx("p",{className:"text-slate-500 mt-2",children:"Please enter your details to sign in."})]}),s.jsx(xf,{...u,children:s.jsxs("form",{onSubmit:u.handleSubmit(c),className:"space-y-6",children:[s.jsx(cr,{control:u.control,name:"username",render:({field:f})=>s.jsxs(rr,{children:[s.jsx(sr,{className:"text-slate-700 font-medium",children:"Email Address"}),s.jsx(ir,{children:s.jsx(Je,{placeholder:"admin@reviranexgen.com",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-username",...f})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:u.control,name:"password",render:({field:f})=>s.jsxs(rr,{children:[s.jsx(sr,{className:"text-slate-700 font-medium",children:"Password"}),s.jsx(ir,{children:s.jsx(Je,{type:"password",placeholder:"",className:"h-12 rounded-xl border-slate-300 focus:border-slate-900 transition-all","data-testid":"input-password",...f})}),s.jsx(ar,{})]})}),s.jsx(Me,{type:"submit",disabled:a,className:"w-full h-12 rounded-xl text-base font-semibold bg-[#da2032] hover:bg-[#c41b2b] text-white transition-all duration-300","data-testid":"button-login",children:a?s.jsxs(s.Fragment,{children:[s.jsx(ov,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200 text-center",children:s.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",s.jsx("span",{className:"font-medium text-slate-900",children:"Contact Support"})]})})]}),s.jsxs("div",{className:"fixed bottom-4 right-4 bg-slate-900/90 text-slate-300 p-4 rounded-lg backdrop-blur text-xs hidden lg:block shadow-xl",children:[s.jsx("p",{className:"font-bold text-white mb-1",children:"Demo Credentials:"}),s.jsx("p",{children:"User: admin@reviranexgen.com"}),s.jsx("p",{children:"Pass: Admin@121"})]})]})}var w1="Avatar",[w8]=hl(w1),[N8,PN]=w8(w1),kN=P.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[a,o]=P.useState("idle");return s.jsx(N8,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:s.jsx(Jn.span,{...r,ref:e})})});kN.displayName=w1;var TN="AvatarImage",EN=P.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...o}=t,u=PN(TN,n),c=S8(r,o),f=$a(p=>{a(p),u.onImageLoadingStatusChange(p)});return ji(()=>{c!=="idle"&&f(c)},[c,f]),c==="loaded"?s.jsx(Jn.img,{...o,ref:e,src:r}):null});EN.displayName=TN;var LN="AvatarFallback",DN=P.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,o=PN(LN,n),[u,c]=P.useState(r===void 0);return P.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(f)}},[r]),u&&o.imageLoadingStatus!=="loaded"?s.jsx(Jn.span,{...a,ref:e}):null});DN.displayName=LN;function ly(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function S8(t,{referrerPolicy:e,crossOrigin:n}){const r=C8(),a=P.useRef(null),o=r?(a.current||(a.current=new window.Image),a.current):null,[u,c]=P.useState(()=>ly(o,t));return ji(()=>{c(ly(o,t))},[o,t]),ji(()=>{const f=y=>()=>{c(y)};if(!o)return;const p=f("loaded"),m=f("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,n,e]),u}function j8(){return()=>{}}function C8(){return P.useSyncExternalStore(j8,()=>!0,()=>!1)}var RN=kN,IN=EN,FN=DN;const ON=P.forwardRef(({className:t,...e},n)=>s.jsx(RN,{ref:n,className:Sn(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));ON.displayName=RN.displayName;const MN=P.forwardRef(({className:t,...e},n)=>s.jsx(IN,{ref:n,className:Sn("aspect-square h-full w-full",t),...e}));MN.displayName=IN.displayName;const BN=P.forwardRef(({className:t,...e},n)=>s.jsx(FN,{ref:n,className:Sn("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));BN.displayName=FN.displayName;var y0="focusScope.autoFocusOnMount",b0="focusScope.autoFocusOnUnmount",cy={bubbles:!1,cancelable:!0},A8="FocusScope",N1=P.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...u}=t,[c,f]=P.useState(null),p=$a(a),m=$a(o),y=P.useRef(null),j=Vr(e,S=>f(S)),x=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let S=function(R){if(x.paused||!c)return;const $=R.target;c.contains($)?y.current=$:Zc(y.current,{select:!0})},k=function(R){if(x.paused||!c)return;const $=R.relatedTarget;$!==null&&(c.contains($)||Zc(y.current,{select:!0}))},A=function(R){if(document.activeElement===document.body)for(const N of R)N.removedNodes.length>0&&Zc(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",k);const I=new MutationObserver(A);return c&&I.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",k),I.disconnect()}}},[r,c,x.paused]),P.useEffect(()=>{if(c){dy.add(x);const S=document.activeElement;if(!c.contains(S)){const A=new CustomEvent(y0,cy);c.addEventListener(y0,p),c.dispatchEvent(A),A.defaultPrevented||(_8(L8(qN(c)),{select:!0}),document.activeElement===S&&Zc(c))}return()=>{c.removeEventListener(y0,p),setTimeout(()=>{const A=new CustomEvent(b0,cy);c.addEventListener(b0,m),c.dispatchEvent(A),A.defaultPrevented||Zc(S??document.body,{select:!0}),c.removeEventListener(b0,m),dy.remove(x)},0)}}},[c,p,m,x]);const D=P.useCallback(S=>{if(!n&&!r||x.paused)return;const k=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,A=document.activeElement;if(k&&A){const I=S.currentTarget,[R,$]=P8(I);R&&$?!S.shiftKey&&A===$?(S.preventDefault(),n&&Zc(R,{select:!0})):S.shiftKey&&A===R&&(S.preventDefault(),n&&Zc($,{select:!0})):A===I&&S.preventDefault()}},[n,r,x.paused]);return s.jsx(Jn.div,{tabIndex:-1,...u,ref:j,onKeyDown:D})});N1.displayName=A8;function _8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Zc(r,{select:e}),document.activeElement!==n)return}function P8(t){const e=qN(t),n=uy(e,t),r=uy(e.reverse(),t);return[n,r]}function qN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function uy(t,e){for(const n of t)if(!k8(n,{upTo:e}))return n}function k8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function T8(t){return t instanceof HTMLInputElement&&"select"in t}function Zc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&T8(t)&&e&&t.select()}}var dy=E8();function E8(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=fy(t,e),t.unshift(e)},remove(e){t=fy(t,e),t[0]?.resume()}}}function fy(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function L8(t){return t.filter(e=>e.tagName!=="A")}var w0=0;function UN(){P.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??hy()),document.body.insertAdjacentElement("beforeend",t[1]??hy()),w0++,()=>{w0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),w0--}},[])}function hy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Dl=function(){return Dl=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Dl.apply(this,arguments)};function zN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function D8(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Xp="right-scroll-bar-position",Jp="width-before-scroll-bar",R8="with-scroll-bars-hidden",I8="--removed-body-scroll-bar-size";function N0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function F8(t,e){var n=P.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=e,n.facade}var O8=typeof window<"u"?P.useLayoutEffect:P.useEffect,py=new WeakMap;function M8(t,e){var n=F8(null,function(r){return t.forEach(function(a){return N0(a,r)})});return O8(function(){var r=py.get(n);if(r){var a=new Set(r),o=new Set(t),u=n.current;a.forEach(function(c){o.has(c)||N0(c,null)}),o.forEach(function(c){a.has(c)||N0(c,u)})}py.set(n,t)},[t]),n}function B8(t){return t}function q8(t,e){e===void 0&&(e=B8);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var u=e(o,r);return n.push(u),function(){n=n.filter(function(c){return c!==u})}},assignSyncMedium:function(o){for(r=!0;n.length;){var u=n;n=[],u.forEach(o)}n={push:function(c){return o(c)},filter:function(){return n}}},assignMedium:function(o){r=!0;var u=[];if(n.length){var c=n;n=[],c.forEach(o),u=n}var f=function(){var m=u;u=[],m.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),n={push:function(m){u.push(m),p()},filter:function(m){return u=u.filter(m),n}}}};return a}function U8(t){t===void 0&&(t={});var e=q8(null);return e.options=Dl({async:!0,ssr:!1},t),e}var $N=function(t){var e=t.sideCar,n=zN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Dl({},n))};$N.isSideCarExport=!0;function z8(t,e){return t.useMedium(e),$N}var VN=U8(),S0=function(){},ig=P.forwardRef(function(t,e){var n=P.useRef(null),r=P.useState({onScrollCapture:S0,onWheelCapture:S0,onTouchMoveCapture:S0}),a=r[0],o=r[1],u=t.forwardProps,c=t.children,f=t.className,p=t.removeScrollBar,m=t.enabled,y=t.shards,j=t.sideCar,x=t.noIsolation,D=t.inert,S=t.allowPinchZoom,k=t.as,A=k===void 0?"div":k,I=t.gapMode,R=zN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=j,N=M8([n,e]),xe=Dl(Dl({},R),a);return P.createElement(P.Fragment,null,m&&P.createElement($,{sideCar:VN,removeScrollBar:p,shards:y,noIsolation:x,inert:D,setCallbacks:o,allowPinchZoom:!!S,lockRef:n,gapMode:I}),u?P.cloneElement(P.Children.only(c),Dl(Dl({},xe),{ref:N})):P.createElement(A,Dl({},xe,{className:f,ref:N}),c))});ig.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ig.classNames={fullWidth:Jp,zeroRight:Xp};var $8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function V8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$8();return e&&t.setAttribute("nonce",e),t}function H8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function W8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var G8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=V8())&&(H8(e,n),W8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},K8=function(){var t=G8();return function(e,n){P.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},HN=function(){var t=K8(),e=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return e},Q8={left:0,top:0,right:0,gap:0},j0=function(t){return parseInt(t||"",10)||0},Z8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[j0(n),j0(r),j0(a)]},Y8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Q8;var e=Z8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},X8=HN(),Qd="data-scroll-locked",J8=function(t,e,n,r){var a=t.left,o=t.top,u=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(R8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Qd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xp,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Jp,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Xp," .").concat(Xp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jp," .").concat(Jp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qd,`] {
    `).concat(I8,": ").concat(c,`px;
  }
`)},my=function(){var t=parseInt(document.body.getAttribute(Qd)||"0",10);return isFinite(t)?t:0},eL=function(){P.useEffect(function(){return document.body.setAttribute(Qd,(my()+1).toString()),function(){var t=my()-1;t<=0?document.body.removeAttribute(Qd):document.body.setAttribute(Qd,t.toString())}},[])},tL=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;eL();var o=P.useMemo(function(){return Y8(a)},[a]);return P.createElement(X8,{styles:J8(o,!e,a,n?"":"!important")})},Sv=!1;if(typeof window<"u")try{var Lp=Object.defineProperty({},"passive",{get:function(){return Sv=!0,!0}});window.addEventListener("test",Lp,Lp),window.removeEventListener("test",Lp,Lp)}catch{Sv=!1}var _d=Sv?{passive:!1}:!1,nL=function(t){return t.tagName==="TEXTAREA"},WN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nL(t)&&n[e]==="visible")},rL=function(t){return WN(t,"overflowY")},sL=function(t){return WN(t,"overflowX")},gy=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=GN(t,r);if(a){var o=KN(t,r),u=o[1],c=o[2];if(u>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iL=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},aL=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},GN=function(t,e){return t==="v"?rL(e):sL(e)},KN=function(t,e){return t==="v"?iL(e):aL(e)},oL=function(t,e){return t==="h"&&e==="rtl"?-1:1},lL=function(t,e,n,r,a){var o=oL(t,window.getComputedStyle(e).direction),u=o*r,c=n.target,f=e.contains(c),p=!1,m=u>0,y=0,j=0;do{var x=KN(t,c),D=x[0],S=x[1],k=x[2],A=S-k-o*D;(D||A)&&GN(t,c)&&(y+=A,j+=D),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(j)<1)&&(p=!0),p},Dp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vy=function(t){return[t.deltaX,t.deltaY]},xy=function(t){return t&&"current"in t?t.current:t},cL=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uL=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dL=0,Pd=[];function fL(t){var e=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),a=P.useState(dL++)[0],o=P.useState(HN)[0],u=P.useRef(t);P.useEffect(function(){u.current=t},[t]),P.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var S=D8([t.lockRef.current],(t.shards||[]).map(xy),!0).filter(Boolean);return S.forEach(function(k){return k.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=P.useCallback(function(S,k){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var A=Dp(S),I=n.current,R="deltaX"in S?S.deltaX:I[0]-A[0],$="deltaY"in S?S.deltaY:I[1]-A[1],N,xe=S.target,re=Math.abs(R)>Math.abs($)?"h":"v";if("touches"in S&&re==="h"&&xe.type==="range")return!1;var K=gy(re,xe);if(!K)return!0;if(K?N=re:(N=re==="v"?"h":"v",K=gy(re,xe)),!K)return!1;if(!r.current&&"changedTouches"in S&&(R||$)&&(r.current=N),!N)return!0;var W=r.current||N;return lL(W,k,S,W==="h"?R:$)},[]),f=P.useCallback(function(S){var k=S;if(!(!Pd.length||Pd[Pd.length-1]!==o)){var A="deltaY"in k?vy(k):Dp(k),I=e.current.filter(function(N){return N.name===k.type&&(N.target===k.target||k.target===N.shadowParent)&&cL(N.delta,A)})[0];if(I&&I.should){k.cancelable&&k.preventDefault();return}if(!I){var R=(u.current.shards||[]).map(xy).filter(Boolean).filter(function(N){return N.contains(k.target)}),$=R.length>0?c(k,R[0]):!u.current.noIsolation;$&&k.cancelable&&k.preventDefault()}}},[]),p=P.useCallback(function(S,k,A,I){var R={name:S,delta:k,target:A,should:I,shadowParent:hL(A)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function($){return $!==R})},1)},[]),m=P.useCallback(function(S){n.current=Dp(S),r.current=void 0},[]),y=P.useCallback(function(S){p(S.type,vy(S),S.target,c(S,t.lockRef.current))},[]),j=P.useCallback(function(S){p(S.type,Dp(S),S.target,c(S,t.lockRef.current))},[]);P.useEffect(function(){return Pd.push(o),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:j}),document.addEventListener("wheel",f,_d),document.addEventListener("touchmove",f,_d),document.addEventListener("touchstart",m,_d),function(){Pd=Pd.filter(function(S){return S!==o}),document.removeEventListener("wheel",f,_d),document.removeEventListener("touchmove",f,_d),document.removeEventListener("touchstart",m,_d)}},[]);var x=t.removeScrollBar,D=t.inert;return P.createElement(P.Fragment,null,D?P.createElement(o,{styles:uL(a)}):null,x?P.createElement(tL,{gapMode:t.gapMode}):null)}function hL(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pL=z8(VN,fL);var S1=P.forwardRef(function(t,e){return P.createElement(ig,Dl({},t,{ref:e,sideCar:pL}))});S1.classNames=ig.classNames;var mL=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},kd=new WeakMap,Rp=new WeakMap,Ip={},C0=0,QN=function(t){return t&&(t.host||QN(t.parentNode))},gL=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=QN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vL=function(t,e,n,r){var a=gL(e,Array.isArray(t)?t:[t]);Ip[n]||(Ip[n]=new WeakMap);var o=Ip[n],u=[],c=new Set,f=new Set(a),p=function(y){!y||c.has(y)||(c.add(y),p(y.parentNode))};a.forEach(p);var m=function(y){!y||f.has(y)||Array.prototype.forEach.call(y.children,function(j){if(c.has(j))m(j);else try{var x=j.getAttribute(r),D=x!==null&&x!=="false",S=(kd.get(j)||0)+1,k=(o.get(j)||0)+1;kd.set(j,S),o.set(j,k),u.push(j),S===1&&D&&Rp.set(j,!0),k===1&&j.setAttribute(n,"true"),D||j.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",j,A)}})};return m(e),c.clear(),C0++,function(){u.forEach(function(y){var j=kd.get(y)-1,x=o.get(y)-1;kd.set(y,j),o.set(y,x),j||(Rp.has(y)||y.removeAttribute(r),Rp.delete(y)),x||y.removeAttribute(n)}),C0--,C0||(kd=new WeakMap,kd=new WeakMap,Rp=new WeakMap,Ip={})}},ZN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=mL(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),vL(r,a,n,"aria-hidden")):function(){return null}},j1="Dialog",[YN,XN]=hl(j1),[xL,pl]=YN(j1),JN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:u=!0}=t,c=P.useRef(null),f=P.useRef(null),[p=!1,m]=nu({prop:r,defaultProp:a,onChange:o});return s.jsx(xL,{scope:e,triggerRef:c,contentRef:f,contentId:eu(),titleId:eu(),descriptionId:eu(),open:p,onOpenChange:m,onOpenToggle:P.useCallback(()=>m(y=>!y),[m]),modal:u,children:n})};JN.displayName=j1;var eS="DialogTrigger",tS=P.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=pl(eS,n),o=Vr(e,a.triggerRef);return s.jsx(Jn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":_1(a.open),...r,ref:o,onClick:Kn(t.onClick,a.onOpenToggle)})});tS.displayName=eS;var C1="DialogPortal",[yL,nS]=YN(C1,{forceMount:void 0}),rS=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:a}=t,o=pl(C1,e);return s.jsx(yL,{scope:e,forceMount:n,children:P.Children.map(r,u=>s.jsx(fu,{present:n||o.open,children:s.jsx(zm,{asChild:!0,container:a,children:u})}))})};rS.displayName=C1;var Em="DialogOverlay",sS=P.forwardRef((t,e)=>{const n=nS(Em,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=pl(Em,t.__scopeDialog);return o.modal?s.jsx(fu,{present:r||o.open,children:s.jsx(wL,{...a,ref:e})}):null});sS.displayName=Em;var bL=tf("DialogOverlay.RemoveScroll"),wL=P.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=pl(Em,n);return s.jsx(S1,{as:bL,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Jn.div,{"data-state":_1(a.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Qu="DialogContent",iS=P.forwardRef((t,e)=>{const n=nS(Qu,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,o=pl(Qu,t.__scopeDialog);return s.jsx(fu,{present:r||o.open,children:o.modal?s.jsx(NL,{...a,ref:e}):s.jsx(SL,{...a,ref:e})})});iS.displayName=Qu;var NL=P.forwardRef((t,e)=>{const n=pl(Qu,t.__scopeDialog),r=P.useRef(null),a=Vr(e,n.contentRef,r);return P.useEffect(()=>{const o=r.current;if(o)return ZN(o)},[]),s.jsx(aS,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Kn(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Kn(t.onPointerDownOutside,o=>{const u=o.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0;(u.button===2||c)&&o.preventDefault()}),onFocusOutside:Kn(t.onFocusOutside,o=>o.preventDefault())})}),SL=P.forwardRef((t,e)=>{const n=pl(Qu,t.__scopeDialog),r=P.useRef(!1),a=P.useRef(!1);return s.jsx(aS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const u=o.target;n.triggerRef.current?.contains(u)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),aS=P.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...u}=t,c=pl(Qu,n),f=P.useRef(null),p=Vr(e,f);return UN(),s.jsxs(s.Fragment,{children:[s.jsx(N1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(Dh,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":_1(c.open),...u,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(CL,{titleId:c.titleId}),s.jsx(_L,{contentRef:f,descriptionId:c.descriptionId})]})]})}),A1="DialogTitle",oS=P.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=pl(A1,n);return s.jsx(Jn.h2,{id:a.titleId,...r,ref:e})});oS.displayName=A1;var lS="DialogDescription",cS=P.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=pl(lS,n);return s.jsx(Jn.p,{id:a.descriptionId,...r,ref:e})});cS.displayName=lS;var uS="DialogClose",dS=P.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,a=pl(uS,n);return s.jsx(Jn.button,{type:"button",...r,ref:e,onClick:Kn(t.onClick,()=>a.onOpenChange(!1))})});dS.displayName=uS;function _1(t){return t?"open":"closed"}var fS="DialogTitleWarning",[jL,hS]=qC(fS,{contentName:Qu,titleName:A1,docsSlug:"dialog"}),CL=({titleId:t})=>{const e=hS(fS),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},AL="DialogDescriptionWarning",_L=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hS(AL).contentName}}.`;return P.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},P1=JN,k1=tS,T1=rS,qh=sS,Uh=iS,zh=oS,$h=cS,ag=dS;const PL=P1,kL=k1,TL=T1,pS=P.forwardRef(({className:t,...e},n)=>s.jsx(qh,{className:Sn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));pS.displayName=qh.displayName;const EL=Hm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),mS=P.forwardRef(({side:t="right",className:e,children:n,...r},a)=>s.jsxs(TL,{children:[s.jsx(pS,{}),s.jsxs(Uh,{ref:a,className:Sn(EL({side:t}),e),...r,children:[n,s.jsxs(ag,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(t1,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mS.displayName=Uh.displayName;const LL=P.forwardRef(({className:t,...e},n)=>s.jsx(zh,{ref:n,className:Sn("text-lg font-semibold text-foreground",t),...e}));LL.displayName=zh.displayName;const DL=P.forwardRef(({className:t,...e},n)=>s.jsx($h,{ref:n,className:Sn("text-sm text-muted-foreground",t),...e}));DL.displayName=$h.displayName;function Ks({children:t,user:e}){const[n]=Va(),{mutate:r}=VE(),[a,o]=P.useState(!1),{branding:u}=HE(),c=[{name:"Dashboard",href:"/revira/dashboard",icon:FA},{name:"Clients",href:"/revira/clients",icon:uh},{name:"Projects",href:"/revira/projects",icon:dm},{name:"User Management",href:"/revira/users",icon:HA},{name:"Branding",href:"/revira/branding",icon:lv},{name:"Settings",href:"/revira/settings",icon:qA}],f=()=>s.jsxs("div",{className:"flex flex-col h-full bg-white",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsx("div",{className:"flex justify-center",children:u?.logoUrl?s.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-12 max-w-[200px] object-contain","data-testid":"img-sidebar-logo"}):s.jsx("h1",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})})}),s.jsx("div",{className:"flex-1 px-4 py-6 space-y-1",children:c.map(p=>{const m=n===p.href;return s.jsxs(Y5,{href:p.href,className:`
              flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 group
              ${m?"bg-[#da2032] text-white":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}
            `,children:[s.jsx(p.icon,{className:`w-5 h-5 ${m?"text-white":"text-slate-500 group-hover:text-slate-900"}`}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsxs("div",{className:"p-4 border-t border-slate-200",children:[s.jsx("div",{className:"p-4 rounded-lg bg-slate-50 border border-slate-200 mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ON,{className:"h-10 w-10 border-2 border-slate-200",children:[s.jsx(MN,{src:`https://api.dicebear.com/7.x/initials/svg?seed=${e?.name}`}),s.jsx(BN,{className:"bg-slate-200 text-slate-700",children:e?.name?.[0]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:e?.name}),s.jsx("p",{className:"text-xs text-slate-500 truncate",children:e?.username})]})]})}),s.jsxs(Me,{variant:"outline",className:"w-full justify-start gap-3 text-slate-700 hover:text-slate-900 border-slate-300",onClick:()=>r(),children:[s.jsx(OA,{className:"w-4 h-4"}),"Sign Out"]})]})]});return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[s.jsx("aside",{className:"hidden lg:block w-72 h-screen sticky top-0 border-r border-slate-200",children:s.jsx(f,{})}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[s.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 sticky top-0 z-30 px-4 sm:px-6 lg:px-8 flex items-center justify-between shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 lg:hidden",children:[s.jsxs(PL,{open:a,onOpenChange:o,children:[s.jsx(kL,{asChild:!0,children:s.jsx(Me,{variant:"ghost",size:"icon",className:"-ml-2",children:s.jsx(MA,{className:"w-6 h-6 text-slate-600"})})}),s.jsx(mS,{side:"left",className:"p-0 w-72 border-r-0",children:s.jsx(f,{})})]}),u?.logoUrl?s.jsx("img",{src:u.logoUrl,alt:"Company Logo",className:"h-8 max-w-[140px] object-contain"}):s.jsx("span",{className:"font-display font-bold text-xl text-slate-900",children:"REVIRAAPP"})]}),s.jsx("div",{className:"flex-1 max-w-xl mx-auto hidden lg:block px-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(e1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-slate-100 border-transparent focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 text-sm"})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(Me,{variant:"ghost",size:"icon",className:"relative text-slate-500 hover:text-slate-700",children:[s.jsx(LA,{className:"w-5 h-5"}),s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"})]})})]}),s.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:s.jsx("div",{className:"max-w-7xl mx-auto animate-fade-in",children:t})})]})]})}const kn=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));kn.displayName="Card";const rs=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("flex flex-col space-y-1.5 p-6",t),...e}));rs.displayName="CardHeader";const ss=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("text-2xl font-semibold leading-none tracking-tight",t),...e}));ss.displayName="CardTitle";const Yc=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("text-sm text-muted-foreground",t),...e}));Yc.displayName="CardDescription";const Tn=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("p-6 pt-0",t),...e}));Tn.displayName="CardContent";const RL=P.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Sn("flex items-center p-6 pt-0",t),...e}));RL.displayName="CardFooter";async function Td(t){try{const e=await fetch(t,{credentials:"include"});return e.ok?e.json():[]}catch{return[]}}function IL(){const{data:t,isLoading:e}=Ra(),[,n]=Va(),{data:r=[]}=Bn({queryKey:["/revira/dashboard/clients"],queryFn:()=>Td("/revira/api/clients"),enabled:!!t}),{data:a=[]}=Bn({queryKey:["/revira/dashboard/projects"],queryFn:()=>Td("/revira/api/projects"),enabled:!!t}),{data:o=[]}=Bn({queryKey:["/revira/dashboard/quotations"],queryFn:()=>Td("/revira/api/quotations"),enabled:!!t}),{data:u=[]}=Bn({queryKey:["/revira/dashboard/invoices"],queryFn:()=>Td("/revira/api/invoices"),enabled:!!t}),{data:c=[]}=Bn({queryKey:["/revira/dashboard/gate-passes"],queryFn:()=>Td("/revira/api/gate-passes"),enabled:!!t}),{data:f=[]}=Bn({queryKey:["/revira/dashboard/delivery-challans"],queryFn:()=>Td("/revira/api/delivery-challans"),enabled:!!t}),p=P.useMemo(()=>{const S=new Map;return a.forEach(k=>S.set(k.id,k.projectName)),S},[a]),m=S=>{const k=String(S??"0").replace(/,/g,""),A=Number(k);return Number.isFinite(A)?A:0},y=P.useMemo(()=>u.reduce((S,k)=>S+m(k.grandTotal),0),[u]),j=P.useMemo(()=>{const S=new Set(o.map(N=>N.projectId)),k=new Set(u.map(N=>N.projectId)),A=new Set(c.map(N=>N.projectId)),I=new Set(f.map(N=>N.projectId)),R=a.length||1,$=a.filter(N=>S.has(N.id)&&k.has(N.id)&&A.has(N.id)&&I.has(N.id)).length;return{quotationCoverage:Math.round(S.size/R*100),invoiceCoverage:Math.round(k.size/R*100),gatePassCoverage:Math.round(A.size/R*100),deliveryCoverage:Math.round(I.size/R*100),fullDocProjects:$}},[a,o,u,c,f]),x=P.useMemo(()=>{const S=A=>new Date(A?String(A):0).getTime();return[...o.map(A=>({id:`q-${A.id}`,type:"Quotation",number:A.quotationNumber,projectId:A.projectId,revision:A.revision,createdAt:A.createdAt,targetPath:`/revira/projects/${A.projectId}/quotation/${A.id}`})),...u.map(A=>({id:`i-${A.id}`,type:"Invoice",number:A.invoiceNumber,projectId:A.projectId,revision:A.revision,createdAt:A.createdAt,targetPath:`/revira/projects/${A.projectId}/invoice/${A.id}`})),...c.map(A=>({id:`g-${A.id}`,type:"Gate Pass",number:A.gatePassNumber,projectId:A.projectId,revision:A.revision,createdAt:A.createdAt,targetPath:`/revira/projects/${A.projectId}/gate-pass/${A.id}`})),...f.map(A=>({id:`d-${A.id}`,type:"Delivery Challan",number:A.deliveryChallanNumber,projectId:A.projectId,revision:A.revision,createdAt:A.createdAt,targetPath:`/revira/projects/${A.projectId}/delivery-challan/${A.id}`}))].sort((A,I)=>S(I.createdAt)-S(A.createdAt)).slice(0,5)},[o,u,c,f]);if(e)return null;const D=[{title:"Clients",value:r.length,icon:uh,color:"text-blue-600",bg:"bg-blue-50"},{title:"Projects",value:a.length,icon:dm,color:"text-indigo-600",bg:"bg-indigo-50"},{title:"Documents",value:o.length+u.length+c.length+f.length,icon:Ta,color:"text-emerald-600",bg:"bg-emerald-50"},{title:"Invoice Value",value:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(y),icon:IA,color:"text-amber-600",bg:"bg-amber-50"}];return s.jsx(Ks,{user:t,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),s.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome, ",t?.name,". Live snapshot of projects and document flow."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{variant:"outline",onClick:()=>n("/revira/clients"),children:"Clients"}),s.jsx(Me,{variant:"outline",onClick:()=>n("/revira/projects"),children:"Projects"})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4",children:D.map(S=>s.jsx(kn,{className:"border-slate-200",children:s.jsx(Tn,{className:"p-5",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:S.title}),s.jsx("p",{className:"mt-2 text-2xl font-bold text-slate-900",children:S.value})]}),s.jsx("div",{className:`rounded-lg p-2.5 ${S.bg}`,children:s.jsx(S.icon,{className:`h-5 w-5 ${S.color}`})})]})})},S.title))}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-3",children:[s.jsxs(kn,{className:"xl:col-span-2 border-slate-200",children:[s.jsx(rs,{className:"pb-2",children:s.jsx(ss,{className:"text-base",children:"Recent Document Activity"})}),s.jsx(Tn,{children:x.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No activity yet. Create a project and start with quotation."}):s.jsx("div",{className:"space-y-2",children:x.map(S=>s.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-lg border border-slate-200 px-3 py-2.5 text-left transition hover:border-slate-300 hover:bg-slate-50",onClick:()=>n(S.targetPath),"data-testid":`button-dashboard-activity-${S.id}`,children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[S.type," ",s.jsxs("span",{className:"font-normal text-slate-500",children:["(",S.revision,")"]})]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[S.number," | ",p.get(S.projectId)||"Unknown Project"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:S.createdAt?new Date(S.createdAt).toLocaleDateString("en-IN"):"-"})]},S.id))})})]}),s.jsxs(kn,{className:"border-slate-200",children:[s.jsx(rs,{className:"pb-2",children:s.jsx(ss,{className:"text-base",children:"Documentation Health"})}),s.jsxs(Tn,{className:"space-y-3",children:[s.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Projects with all docs"}),s.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[j.fullDocProjects,"/",a.length]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(Ta,{className:"h-4 w-4 text-red-500"})," Quotations"]}),s.jsxs("span",{className:"font-semibold",children:[j.quotationCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(cv,{className:"h-4 w-4 text-green-600"})," Invoices"]}),s.jsxs("span",{className:"font-semibold",children:[j.invoiceCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(av,{className:"h-4 w-4 text-blue-600"})," Gate Pass"]}),s.jsxs("span",{className:"font-semibold",children:[j.gatePassCoverage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(iv,{className:"h-4 w-4 text-indigo-600"})," Delivery Challan"]}),s.jsxs("span",{className:"font-semibold",children:[j.deliveryCoverage,"%"]})]})]}),s.jsxs(Me,{className:"w-full mt-2",variant:"outline",onClick:()=>n("/revira/projects"),children:["Review Projects ",s.jsx(TA,{className:"ml-2 h-4 w-4"})]}),s.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-2.5 text-xs text-emerald-700 flex items-center gap-2",children:[s.jsx(EA,{className:"h-4 w-4"}),"Keep all four documents updated for better project traceability."]})]})]})]})]})})}const gi=P1,Ph=k1,FL=T1,gS=P.forwardRef(({className:t,...e},n)=>s.jsx(qh,{ref:n,className:Sn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));gS.displayName=qh.displayName;const ri=P.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(FL,{children:[s.jsx(gS,{}),s.jsxs(Uh,{ref:r,className:Sn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(ag,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(t1,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ri.displayName=Uh.displayName;const si=({className:t,...e})=>s.jsx("div",{className:Sn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});si.displayName="DialogHeader";const ii=P.forwardRef(({className:t,...e},n)=>s.jsx(zh,{ref:n,className:Sn("text-lg font-semibold leading-none tracking-tight",t),...e}));ii.displayName=zh.displayName;const Zu=P.forwardRef(({className:t,...e},n)=>s.jsx($h,{ref:n,className:Sn("text-sm text-muted-foreground",t),...e}));Zu.displayName=$h.displayName;const OL=M.object({name:M.string().min(1,"Client name is required"),location:M.string(),gstNo:M.string(),contactPerson:M.string(),mobileNumber:M.string().min(10,"Valid mobile number is required"),emailAddress:M.string()}),ML=t=>({...t,gstNo:t.gstNo?.trim()||"NA",contactPerson:t.contactPerson?.trim()||"NA",mobileNumber:t.mobileNumber?.trim()||"0000000000",emailAddress:t.emailAddress?.trim()||"na@example.com"});function BL(){const[e,n]=P.useState(!1),[r,a]=P.useState(null),[o,u]=P.useState(""),[c,f]=P.useState(!1),[p,m]=P.useState(1),[,y]=Va(),{toast:j}=Ha(),{data:x}=Ra(),{data:D,isLoading:S}=Bn({queryKey:["/revira/api/clients"]}),{data:k}=Bn({queryKey:["/revira/api/projects"]}),A=gf({resolver:vf(OL),defaultValues:{name:"",location:"",gstNo:"",contactPerson:"",mobileNumber:"",emailAddress:""}}),I=Mr({mutationFn:async E=>(await jn("POST","/revira/api/clients",ML(E))).json(),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/clients"]}),A.reset(),n(!1),j({title:"Success",description:"Client created successfully"})},onError:E=>{j({title:"Error",description:E.message,variant:"destructive"})}}),R=Mr({mutationFn:async({id:E,data:Q})=>(await jn("PUT",`/revira/api/clients/${E}`,Q)).json(),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/clients"]}),A.reset(),a(null),n(!1),j({title:"Success",description:"Client updated successfully"})},onError:E=>{j({title:"Error",description:E.message,variant:"destructive"})}}),$=Mr({mutationFn:async E=>{await jn("DELETE",`/revira/api/clients/${E}`)},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/clients"]}),j({title:"Success",description:"Client deleted successfully"})},onError:E=>{j({title:"Error",description:E.message,variant:"destructive"})}}),N=E=>{r?R.mutate({id:r.id,data:E}):I.mutate(E)},xe=E=>{a(E),A.reset({name:E.name,location:E.location,gstNo:E.gstNo,contactPerson:E.contactPerson,mobileNumber:E.mobileNumber,emailAddress:E.emailAddress}),n(!0)},re=E=>{n(E),E||(a(null),A.reset())},K=E=>{if((k??[]).some(X=>X.clientId===E)){f(!0);return}$.mutate(E)},W=P.useMemo(()=>{const E=o.trim().toLowerCase(),Q=[...D??[]].sort((X,ie)=>ie.id-X.id);return E?Q.filter(X=>[X.name,X.location,X.gstNo,X.contactPerson,X.mobileNumber,X.emailAddress].join(" ").toLowerCase().includes(E)):Q},[D,o]),he=Math.max(1,Math.ceil(W.length/10)),z=P.useMemo(()=>{const E=(p-1)*10;return W.slice(E,E+10)},[W,p]);return P.useEffect(()=>{m(1)},[o]),P.useEffect(()=>{p>he&&m(he)},[p,he]),s.jsxs(Ks,{user:x,children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:s.jsx(uh,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Clients"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your client partners"})]})]}),s.jsxs(gi,{open:e,onOpenChange:re,children:[s.jsx(Ph,{asChild:!0,children:s.jsxs(Me,{"data-testid":"button-add-client",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[s.jsx(sl,{className:"h-4 w-4 mr-2"}),"Add Client"]})}),s.jsxs(ri,{className:"sm:max-w-[500px]",children:[s.jsxs(si,{children:[s.jsx(ii,{children:r?"Edit Client":"Create New Client"}),s.jsx(Zu,{children:r?"Update client details below.":"Add a new client partner to your system."})]}),s.jsx(xf,{...A,children:s.jsxs("form",{onSubmit:A.handleSubmit(N),className:"space-y-4",children:[s.jsx(cr,{control:A.control,name:"name",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Client Name"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-client-name",placeholder:"Enter client name",...E})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:A.control,name:"location",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Location"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-location",placeholder:"Enter location",...E})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:A.control,name:"gstNo",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"GST No."}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-gst-no",placeholder:"Enter GST number",...E})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:A.control,name:"contactPerson",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Contact Person"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-contact-person",placeholder:"Enter contact person name",...E})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:A.control,name:"mobileNumber",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Mobile Number"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-mobile-number",placeholder:"Enter mobile number",...E})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:A.control,name:"emailAddress",render:({field:E})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Email Address"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-email-address",type:"email",placeholder:"Enter email address",...E})}),s.jsx(ar,{})]})}),s.jsx(Me,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:I.isPending||R.isPending,"data-testid":"button-submit-client",children:I.isPending||R.isPending?r?"Updating...":"Creating...":r?"Update Client":"Create Client"})]})})]})]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(e1,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx(Je,{value:o,onChange:E=>u(E.target.value),placeholder:"Search by name, GST, location, contact...",className:"pl-9","data-testid":"input-search-clients"})]})]}),s.jsx(kn,{className:"border-0 shadow-lg overflow-hidden",children:s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Name"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Location"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"GST No."})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Person"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Contact Info"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),S?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(E=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},E))}):W.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"divide-y divide-slate-100",children:[z.map(E=>s.jsxs("div",{"data-testid":`row-client-${E.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:s.jsx(Jv,{className:"w-4 h-4"})}),s.jsx("span",{className:"font-semibold text-slate-800 uppercase text-sm","data-testid":`text-client-name-${E.id}`,children:E.name.length>15?E.name.substring(0,15)+"...":E.name})]}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx(ru,{className:"w-3.5 h-3.5 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${E.id}`,children:E.location})]}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-700 text-sm font-mono","data-testid":`text-gst-${E.id}`,children:E.gstNo})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-contact-${E.id}`,children:E.contactPerson})}),s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($b,{className:"w-3 h-3 text-green-500"}),s.jsx("span",{className:"text-slate-600 text-xs","data-testid":`text-mobile-${E.id}`,children:E.mobileNumber})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"w-3 h-3 text-blue-500"}),s.jsx("span",{className:"text-slate-600 text-xs truncate max-w-[140px]","data-testid":`text-email-${E.id}`,title:E.emailAddress,children:E.emailAddress})]})]}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>y(`/clients/${E.id}/ledger`),"data-testid":`button-ledger-client-${E.id}`,title:"Client Ledger",children:s.jsx(fm,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>xe(E),"data-testid":`button-edit-client-${E.id}`,title:"Edit Client",children:s.jsx(Vu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>K(E.id),disabled:$.isPending,"data-testid":`button-delete-client-${E.id}`,title:"Delete Client",children:s.jsx(lr,{className:"w-4 h-4"})})]})]},E.id)),z.map(E=>s.jsxs("div",{className:"md:hidden px-4 py-4 space-y-2 hover:bg-slate-50/50","data-testid":`card-client-${E.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 uppercase text-sm",children:E.name}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:E.location})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>y(`/clients/${E.id}/ledger`),"data-testid":`button-ledger-client-mobile-${E.id}`,title:"Client Ledger",children:s.jsx(fm,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>xe(E),"data-testid":`button-edit-client-mobile-${E.id}`,children:s.jsx(Vu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>K(E.id),disabled:$.isPending,"data-testid":`button-delete-client-mobile-${E.id}`,children:s.jsx(lr,{className:"w-4 h-4"})})]})]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"GST:"})," ",E.gstNo]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"Contact:"})," ",E.contactPerson]}),s.jsxs("p",{className:"text-xs text-slate-600",children:[s.jsx("span",{className:"font-semibold",children:"Mobile:"})," ",E.mobileNumber]}),s.jsxs("p",{className:"text-xs text-slate-600 break-all",children:[s.jsx("span",{className:"font-semibold",children:"Email:"})," ",E.emailAddress]})]},`mobile-${E.id}`))]}),s.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-slate-50/60 px-4 py-3",children:[s.jsxs("p",{className:"text-sm text-slate-600",children:["Page ",p," of ",he," | ",W.length," records"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>m(E=>Math.max(1,E-1)),disabled:p===1,"data-testid":"button-clients-prev-page",children:"Previous"}),s.jsx(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>m(E=>Math.min(he,E+1)),disabled:p===he,"data-testid":"button-clients-next-page",children:"Next"})]})]})]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-blue-500/10 flex items-center justify-center mb-4",children:s.jsx(uh,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No clients yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first client partner."}),s.jsxs(Me,{onClick:()=>n(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Add First Client"]})]})]})}),s.jsx(gi,{open:c,onOpenChange:f,children:s.jsxs(ri,{className:"sm:max-w-md",children:[s.jsxs(si,{children:[s.jsx(ii,{children:"Client Delete Info"}),s.jsx(Zu,{children:"Client is not deleted due to multiple project is initiated"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Me,{onClick:()=>f(!1),"data-testid":"button-close-client-delete-info",children:"OK"})})]})})]})}function yy(t,[e,n]){return Math.min(n,Math.max(e,t))}var qL=P.createContext(void 0);function vS(t){const e=P.useContext(qL);return t||e||"ltr"}function xS(t){const e=P.useRef({value:t,previous:t});return P.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var UL=[" ","Enter","ArrowUp","ArrowDown"],zL=[" ","Enter"],Vh="Select",[og,lg,$L]=Qv(Vh),[yf]=hl(Vh,[$L,Ym]),cg=Ym(),[VL,pu]=yf(Vh),[HL,WL]=yf(Vh),yS=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:a,onOpenChange:o,value:u,defaultValue:c,onValueChange:f,dir:p,name:m,autoComplete:y,disabled:j,required:x,form:D}=t,S=cg(e),[k,A]=P.useState(null),[I,R]=P.useState(null),[$,N]=P.useState(!1),xe=vS(p),[re=!1,K]=nu({prop:r,defaultProp:a,onChange:o}),[W,he]=nu({prop:u,defaultProp:c,onChange:f}),z=P.useRef(null),E=k?D||!!k.closest("form"):!0,[Q,X]=P.useState(new Set),ie=Array.from(Q).map(Ce=>Ce.props.value).join(";");return s.jsx(FP,{...S,children:s.jsxs(VL,{required:x,scope:e,trigger:k,onTriggerChange:A,valueNode:I,onValueNodeChange:R,valueNodeHasChildren:$,onValueNodeHasChildrenChange:N,contentId:eu(),value:W,onValueChange:he,open:re,onOpenChange:K,dir:xe,triggerPointerDownPosRef:z,disabled:j,children:[s.jsx(og.Provider,{scope:e,children:s.jsx(HL,{scope:t.__scopeSelect,onNativeOptionAdd:P.useCallback(Ce=>{X(te=>new Set(te).add(Ce))},[]),onNativeOptionRemove:P.useCallback(Ce=>{X(te=>{const ae=new Set(te);return ae.delete(Ce),ae})},[]),children:n})}),E?s.jsxs(VS,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:y,value:W,onChange:Ce=>he(Ce.target.value),disabled:j,form:D,children:[W===void 0?s.jsx("option",{value:""}):null,Array.from(Q)]},ie):null]})})};yS.displayName=Vh;var bS="SelectTrigger",wS=P.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,o=cg(n),u=pu(bS,n),c=u.disabled||r,f=Vr(e,u.onTriggerChange),p=lg(n),m=P.useRef("touch"),[y,j,x]=HS(S=>{const k=p().filter(R=>!R.disabled),A=k.find(R=>R.value===u.value),I=WS(k,S,A);I!==void 0&&u.onValueChange(I.value)}),D=S=>{c||(u.onOpenChange(!0),x()),S&&(u.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return s.jsx(ww,{asChild:!0,...o,children:s.jsx(Jn.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":$S(u.value)?"":void 0,...a,ref:f,onClick:Kn(a.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&D(S)}),onPointerDown:Kn(a.onPointerDown,S=>{m.current=S.pointerType;const k=S.target;k.hasPointerCapture(S.pointerId)&&k.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(D(S),S.preventDefault())}),onKeyDown:Kn(a.onKeyDown,S=>{const k=y.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&j(S.key),!(k&&S.key===" ")&&UL.includes(S.key)&&(D(),S.preventDefault())})})})});wS.displayName=bS;var NS="SelectValue",SS=P.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:u="",...c}=t,f=pu(NS,n),{onValueNodeHasChildrenChange:p}=f,m=o!==void 0,y=Vr(e,f.onValueNodeChange);return ji(()=>{p(m)},[p,m]),s.jsx(Jn.span,{...c,ref:y,style:{pointerEvents:"none"},children:$S(f.value)?s.jsx(s.Fragment,{children:u}):o})});SS.displayName=NS;var GL="SelectIcon",jS=P.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...a}=t;return s.jsx(Jn.span,{"aria-hidden":!0,...a,ref:e,children:r||""})});jS.displayName=GL;var KL="SelectPortal",CS=t=>s.jsx(zm,{asChild:!0,...t});CS.displayName=KL;var Yu="SelectContent",AS=P.forwardRef((t,e)=>{const n=pu(Yu,t.__scopeSelect),[r,a]=P.useState();if(ji(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?uf.createPortal(s.jsx(_S,{scope:t.__scopeSelect,children:s.jsx(og.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),o):null}return s.jsx(PS,{...t,ref:e})});AS.displayName=Yu;var Jo=10,[_S,mu]=yf(Yu),QL="SelectContentImpl",ZL=tf("SelectContent.RemoveScroll"),PS=P.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:u,side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:j,collisionPadding:x,sticky:D,hideWhenDetached:S,avoidCollisions:k,...A}=t,I=pu(Yu,n),[R,$]=P.useState(null),[N,xe]=P.useState(null),re=Vr(e,be=>$(be)),[K,W]=P.useState(null),[he,z]=P.useState(null),E=lg(n),[Q,X]=P.useState(!1),ie=P.useRef(!1);P.useEffect(()=>{if(R)return ZN(R)},[R]),UN();const Ce=P.useCallback(be=>{const[Le,...Oe]=E().map(lt=>lt.ref.current),[ze]=Oe.slice(-1),Ze=document.activeElement;for(const lt of be)if(lt===Ze||(lt?.scrollIntoView({block:"nearest"}),lt===Le&&N&&(N.scrollTop=0),lt===ze&&N&&(N.scrollTop=N.scrollHeight),lt?.focus(),document.activeElement!==Ze))return},[E,N]),te=P.useCallback(()=>Ce([K,R]),[Ce,K,R]);P.useEffect(()=>{Q&&te()},[Q,te]);const{onOpenChange:ae,triggerPointerDownPosRef:Ne}=I;P.useEffect(()=>{if(R){let be={x:0,y:0};const Le=ze=>{be={x:Math.abs(Math.round(ze.pageX)-(Ne.current?.x??0)),y:Math.abs(Math.round(ze.pageY)-(Ne.current?.y??0))}},Oe=ze=>{be.x<=10&&be.y<=10?ze.preventDefault():R.contains(ze.target)||ae(!1),document.removeEventListener("pointermove",Le),Ne.current=null};return Ne.current!==null&&(document.addEventListener("pointermove",Le),document.addEventListener("pointerup",Oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Le),document.removeEventListener("pointerup",Oe,{capture:!0})}}},[R,ae,Ne]),P.useEffect(()=>{const be=()=>ae(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[ae]);const[Re,ne]=HS(be=>{const Le=E().filter(Ze=>!Ze.disabled),Oe=Le.find(Ze=>Ze.ref.current===document.activeElement),ze=WS(Le,be,Oe);ze&&setTimeout(()=>ze.ref.current.focus())}),O=P.useCallback((be,Le,Oe)=>{const ze=!ie.current&&!Oe;(I.value!==void 0&&I.value===Le||ze)&&(W(be),ze&&(ie.current=!0))},[I.value]),L=P.useCallback(()=>R?.focus(),[R]),oe=P.useCallback((be,Le,Oe)=>{const ze=!ie.current&&!Oe;(I.value!==void 0&&I.value===Le||ze)&&z(be)},[I.value]),ve=r==="popper"?jv:kS,ye=ve===jv?{side:c,sideOffset:f,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:j,collisionPadding:x,sticky:D,hideWhenDetached:S,avoidCollisions:k}:{};return s.jsx(_S,{scope:n,content:R,viewport:N,onViewportChange:xe,itemRefCallback:O,selectedItem:K,onItemLeave:L,itemTextRefCallback:oe,focusSelectedItem:te,selectedItemText:he,position:r,isPositioned:Q,searchRef:Re,children:s.jsx(S1,{as:ZL,allowPinchZoom:!0,children:s.jsx(N1,{asChild:!0,trapped:I.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Kn(a,be=>{I.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:s.jsx(Dh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:s.jsx(ve,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:be=>be.preventDefault(),...A,...ye,onPlaced:()=>X(!0),ref:re,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Kn(A.onKeyDown,be=>{const Le=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Le&&be.key.length===1&&ne(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let ze=E().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(be.key)&&(ze=ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Ze=be.target,lt=ze.indexOf(Ze);ze=ze.slice(lt+1)}setTimeout(()=>Ce(ze)),be.preventDefault()}})})})})})})});PS.displayName=QL;var YL="SelectItemAlignedPosition",kS=P.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,o=pu(Yu,n),u=mu(Yu,n),[c,f]=P.useState(null),[p,m]=P.useState(null),y=Vr(e,re=>m(re)),j=lg(n),x=P.useRef(!1),D=P.useRef(!0),{viewport:S,selectedItem:k,selectedItemText:A,focusSelectedItem:I}=u,R=P.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&p&&S&&k&&A){const re=o.trigger.getBoundingClientRect(),K=p.getBoundingClientRect(),W=o.valueNode.getBoundingClientRect(),he=A.getBoundingClientRect();if(o.dir!=="rtl"){const Ze=he.left-K.left,lt=W.left-Ze,ut=re.left-lt,_t=re.width+ut,ue=Math.max(_t,K.width),xt=window.innerWidth-Jo,dn=yy(lt,[Jo,Math.max(Jo,xt-ue)]);c.style.minWidth=_t+"px",c.style.left=dn+"px"}else{const Ze=K.right-he.right,lt=window.innerWidth-W.right-Ze,ut=window.innerWidth-re.right-lt,_t=re.width+ut,ue=Math.max(_t,K.width),xt=window.innerWidth-Jo,dn=yy(lt,[Jo,Math.max(Jo,xt-ue)]);c.style.minWidth=_t+"px",c.style.right=dn+"px"}const z=j(),E=window.innerHeight-Jo*2,Q=S.scrollHeight,X=window.getComputedStyle(p),ie=parseInt(X.borderTopWidth,10),Ce=parseInt(X.paddingTop,10),te=parseInt(X.borderBottomWidth,10),ae=parseInt(X.paddingBottom,10),Ne=ie+Ce+Q+ae+te,Re=Math.min(k.offsetHeight*5,Ne),ne=window.getComputedStyle(S),O=parseInt(ne.paddingTop,10),L=parseInt(ne.paddingBottom,10),oe=re.top+re.height/2-Jo,ve=E-oe,ye=k.offsetHeight/2,be=k.offsetTop+ye,Le=ie+Ce+be,Oe=Ne-Le;if(Le<=oe){const Ze=z.length>0&&k===z[z.length-1].ref.current;c.style.bottom="0px";const lt=p.clientHeight-S.offsetTop-S.offsetHeight,ut=Math.max(ve,ye+(Ze?L:0)+lt+te),_t=Le+ut;c.style.height=_t+"px"}else{const Ze=z.length>0&&k===z[0].ref.current;c.style.top="0px";const ut=Math.max(oe,ie+S.offsetTop+(Ze?O:0)+ye)+Oe;c.style.height=ut+"px",S.scrollTop=Le-oe+S.offsetTop}c.style.margin=`${Jo}px 0`,c.style.minHeight=Re+"px",c.style.maxHeight=E+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[j,o.trigger,o.valueNode,c,p,S,k,A,o.dir,r]);ji(()=>R(),[R]);const[$,N]=P.useState();ji(()=>{p&&N(window.getComputedStyle(p).zIndex)},[p]);const xe=P.useCallback(re=>{re&&D.current===!0&&(R(),I?.(),D.current=!1)},[R,I]);return s.jsx(JL,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:xe,children:s.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:s.jsx(Jn.div,{...a,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});kS.displayName=YL;var XL="SelectPopperPosition",jv=P.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Jo,...o}=t,u=cg(n);return s.jsx(Nw,{...u,...o,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jv.displayName=XL;var[JL,E1]=yf(Yu,{}),Cv="SelectViewport",TS=P.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...a}=t,o=mu(Cv,n),u=E1(Cv,n),c=Vr(e,o.onViewportChange),f=P.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(og.Slot,{scope:n,children:s.jsx(Jn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Kn(a.onScroll,p=>{const m=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:j}=u;if(j?.current&&y){const x=Math.abs(f.current-m.scrollTop);if(x>0){const D=window.innerHeight-Jo*2,S=parseFloat(y.style.minHeight),k=parseFloat(y.style.height),A=Math.max(S,k);if(A<D){const I=A+x,R=Math.min(D,I),$=I-R;y.style.height=R+"px",y.style.bottom==="0px"&&(m.scrollTop=$>0?$:0,y.style.justifyContent="flex-end")}}}f.current=m.scrollTop})})})]})});TS.displayName=Cv;var ES="SelectGroup",[eD,tD]=yf(ES),nD=P.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=eu();return s.jsx(eD,{scope:n,id:a,children:s.jsx(Jn.div,{role:"group","aria-labelledby":a,...r,ref:e})})});nD.displayName=ES;var LS="SelectLabel",DS=P.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=tD(LS,n);return s.jsx(Jn.div,{id:a.id,...r,ref:e})});DS.displayName=LS;var Lm="SelectItem",[rD,RS]=yf(Lm),IS=P.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...u}=t,c=pu(Lm,n),f=mu(Lm,n),p=c.value===r,[m,y]=P.useState(o??""),[j,x]=P.useState(!1),D=Vr(e,I=>f.itemRefCallback?.(I,r,a)),S=eu(),k=P.useRef("touch"),A=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(rD,{scope:n,value:r,disabled:a,textId:S,isSelected:p,onItemTextChange:P.useCallback(I=>{y(R=>R||(I?.textContent??"").trim())},[]),children:s.jsx(og.ItemSlot,{scope:n,value:r,disabled:a,textValue:m,children:s.jsx(Jn.div,{role:"option","aria-labelledby":S,"data-highlighted":j?"":void 0,"aria-selected":p&&j,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...u,ref:D,onFocus:Kn(u.onFocus,()=>x(!0)),onBlur:Kn(u.onBlur,()=>x(!1)),onClick:Kn(u.onClick,()=>{k.current!=="mouse"&&A()}),onPointerUp:Kn(u.onPointerUp,()=>{k.current==="mouse"&&A()}),onPointerDown:Kn(u.onPointerDown,I=>{k.current=I.pointerType}),onPointerMove:Kn(u.onPointerMove,I=>{k.current=I.pointerType,a?f.onItemLeave?.():k.current==="mouse"&&I.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Kn(u.onPointerLeave,I=>{I.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:Kn(u.onKeyDown,I=>{f.searchRef?.current!==""&&I.key===" "||(zL.includes(I.key)&&A(),I.key===" "&&I.preventDefault())})})})})});IS.displayName=Lm;var th="SelectItemText",FS=P.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,...o}=t,u=pu(th,n),c=mu(th,n),f=RS(th,n),p=WL(th,n),[m,y]=P.useState(null),j=Vr(e,A=>y(A),f.onItemTextChange,A=>c.itemTextRefCallback?.(A,f.value,f.disabled)),x=m?.textContent,D=P.useMemo(()=>s.jsx("option",{value:f.value,disabled:f.disabled,children:x},f.value),[f.disabled,f.value,x]),{onNativeOptionAdd:S,onNativeOptionRemove:k}=p;return ji(()=>(S(D),()=>k(D)),[S,k,D]),s.jsxs(s.Fragment,{children:[s.jsx(Jn.span,{id:f.textId,...o,ref:j}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?uf.createPortal(o.children,u.valueNode):null]})});FS.displayName=th;var OS="SelectItemIndicator",MS=P.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return RS(OS,n).isSelected?s.jsx(Jn.span,{"aria-hidden":!0,...r,ref:e}):null});MS.displayName=OS;var Av="SelectScrollUpButton",BS=P.forwardRef((t,e)=>{const n=mu(Av,t.__scopeSelect),r=E1(Av,t.__scopeSelect),[a,o]=P.useState(!1),u=Vr(e,r.onScrollButtonChange);return ji(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollTop>0;o(p)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(US,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop-f.offsetHeight)}}):null});BS.displayName=Av;var _v="SelectScrollDownButton",qS=P.forwardRef((t,e)=>{const n=mu(_v,t.__scopeSelect),r=E1(_v,t.__scopeSelect),[a,o]=P.useState(!1),u=Vr(e,r.onScrollButtonChange);return ji(()=>{if(n.viewport&&n.isPositioned){let c=function(){const p=f.scrollHeight-f.clientHeight,m=Math.ceil(f.scrollTop)<p;o(m)};const f=n.viewport;return c(),f.addEventListener("scroll",c),()=>f.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(US,{...t,ref:u,onAutoScroll:()=>{const{viewport:c,selectedItem:f}=n;c&&f&&(c.scrollTop=c.scrollTop+f.offsetHeight)}}):null});qS.displayName=_v;var US=P.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,o=mu("SelectScrollButton",n),u=P.useRef(null),c=lg(n),f=P.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return P.useEffect(()=>()=>f(),[f]),ji(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),s.jsx(Jn.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Kn(a.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(r,50))}),onPointerMove:Kn(a.onPointerMove,()=>{o.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(r,50))}),onPointerLeave:Kn(a.onPointerLeave,()=>{f()})})}),sD="SelectSeparator",zS=P.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Jn.div,{"aria-hidden":!0,...r,ref:e})});zS.displayName=sD;var Pv="SelectArrow",iD=P.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=cg(n),o=pu(Pv,n),u=mu(Pv,n);return o.open&&u.position==="popper"?s.jsx(Sw,{...a,...r,ref:e}):null});iD.displayName=Pv;function $S(t){return t===""||t===void 0}var VS=P.forwardRef((t,e)=>{const{value:n,...r}=t,a=P.useRef(null),o=Vr(e,a),u=xS(n);return P.useEffect(()=>{const c=a.current,f=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==n&&m){const y=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(y)}},[u,n]),s.jsx(Rh,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:n})})});VS.displayName="BubbleSelect";function HS(t){const e=$a(t),n=P.useRef(""),r=P.useRef(0),a=P.useCallback(u=>{const c=n.current+u;e(c),(function f(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(c)},[e]),o=P.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function WS(t,e,n){const a=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let u=aD(t,Math.max(o,0));a.length===1&&(u=u.filter(p=>p!==n));const f=u.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function aD(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var oD=yS,GS=wS,lD=SS,cD=jS,uD=CS,KS=AS,dD=TS,QS=DS,ZS=IS,fD=FS,hD=MS,YS=BS,XS=qS,JS=zS;const Ml=oD,Bl=lD,ol=P.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(GS,{ref:r,className:Sn("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(cD,{asChild:!0,children:s.jsx(zd,{className:"h-4 w-4 opacity-50"})})]}));ol.displayName=GS.displayName;const ej=P.forwardRef(({className:t,...e},n)=>s.jsx(YS,{ref:n,className:Sn("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(Qp,{className:"h-4 w-4"})}));ej.displayName=YS.displayName;const tj=P.forwardRef(({className:t,...e},n)=>s.jsx(XS,{ref:n,className:Sn("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(zd,{className:"h-4 w-4"})}));tj.displayName=XS.displayName;const ll=P.forwardRef(({className:t,children:e,position:n="popper",...r},a)=>s.jsx(uD,{children:s.jsxs(KS,{ref:a,className:Sn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(ej,{}),s.jsx(dD,{className:Sn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(tj,{})]})}));ll.displayName=KS.displayName;const pD=P.forwardRef(({className:t,...e},n)=>s.jsx(QS,{ref:n,className:Sn("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));pD.displayName=QS.displayName;const va=P.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(ZS,{ref:r,className:Sn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(hD,{children:s.jsx(Md,{className:"h-4 w-4"})})}),s.jsx(fD,{children:e})]}));va.displayName=ZS.displayName;const mD=P.forwardRef(({className:t,...e},n)=>s.jsx(JS,{ref:n,className:Sn("-mx-1 my-1 h-px bg-muted",t),...e}));mD.displayName=JS.displayName;const gD=M.object({projectName:M.string().min(1,"Project name is required"),clientId:M.string().min(1,"Client selection is required"),location:M.string().min(1,"Location is required"),quotationType:M.enum(Am,{errorMap:()=>({message:"Quotation type is required"})})});function vD(){const[e,n]=P.useState(!1),[r,a]=P.useState(null),[o,u]=P.useState(null),[c,f]=P.useState(""),[p,m]=P.useState(1),[,y]=Va(),{toast:j}=Ha(),{data:x}=Ra(),{data:D,isLoading:S}=Bn({queryKey:["/revira/api/projects"]}),{data:k,isLoading:A}=Bn({queryKey:["/revira/api/clients"]}),I=gf({resolver:vf(gD),defaultValues:{projectName:"",clientId:"",location:"",quotationType:void 0}}),R=Mr({mutationFn:async te=>jn("POST","/revira/api/projects",{...te,clientId:Number(te.clientId)}),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects"]}),j({title:"Project created",description:"The project has been created successfully."}),I.reset(),n(!1)},onError:te=>{j({title:"Error",description:te.message||"Failed to create project",variant:"destructive"})}}),$=Mr({mutationFn:async({id:te,data:ae})=>jn("PUT",`/revira/api/projects/${te}`,{...ae,clientId:Number(ae.clientId)}),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects"]}),j({title:"Project updated",description:"The project has been updated successfully."}),I.reset(),a(null),n(!1)},onError:te=>{j({title:"Error",description:te.message||"Failed to update project",variant:"destructive"})}}),N=Mr({mutationFn:async te=>jn("DELETE",`/revira/api/projects/${te}`),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects"]}),j({title:"Project deleted",description:"The project has been deleted successfully."}),u(null)},onError:te=>{j({title:"Error",description:te.message||"Failed to delete project",variant:"destructive"})}}),xe=te=>{r?$.mutate({id:r.id,data:te}):R.mutate(te)},re=te=>{a(te),I.reset({projectName:te.projectName,clientId:String(te.clientId),location:te.location,quotationType:te.quotationType}),n(!0)},K=te=>{n(te),te||(a(null),I.reset())},W=te=>k?.find(Ne=>Ne.id===te)?.name||"Unknown Client",he=te=>new Date(te).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase(),z=te=>{switch(te){case"Supply and Fabrication":return"text-blue-600";case"Structural Fabrication":return"text-purple-600";case"Job Work":return"text-amber-600";default:return"text-slate-600"}},E=te=>{switch(te){case"Supply and Fabrication":return"SUPPLY & FAB";case"Structural Fabrication":return"STRUCTURAL";case"Job Work":return"JOB WORK";default:return te.toUpperCase()}},Q=()=>{o&&N.mutate(o.id)},X=P.useMemo(()=>{const te=c.trim().toLowerCase(),ae=[...D??[]].sort((Ne,Re)=>{const ne=Ne.createdAt?new Date(Ne.createdAt).getTime():0,O=Re.createdAt?new Date(Re.createdAt).getTime():0;return ne!==O?O-ne:Re.id-Ne.id});return te?ae.filter(Ne=>[Ne.projectName,W(Ne.clientId),Ne.location,Ne.quotationType].join(" ").toLowerCase().includes(te)):ae},[D,c,k]),ie=Math.max(1,Math.ceil(X.length/10)),Ce=P.useMemo(()=>{const te=(p-1)*10;return X.slice(te,te+10)},[X,p]);return P.useEffect(()=>{m(1)},[c]),P.useEffect(()=>{p>ie&&m(ie)},[p,ie]),s.jsxs(Ks,{user:x,children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg shadow-primary/25",children:s.jsx(dm,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Projects"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your projects and quotations"})]})]}),s.jsxs(gi,{open:e,onOpenChange:K,children:[s.jsx(Ph,{asChild:!0,children:s.jsxs(Me,{"data-testid":"button-add-project",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg shadow-primary/25 transition-all duration-300",children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Add Project"]})}),s.jsxs(ri,{className:"sm:max-w-[500px]",children:[s.jsxs(si,{children:[s.jsx(ii,{children:r?"Edit Project":"Create New Project"}),s.jsx(Zu,{children:r?"Update project details below.":"Add a new project with client and quotation details."})]}),s.jsx(xf,{...I,children:s.jsxs("form",{onSubmit:I.handleSubmit(xe),className:"space-y-4",children:[s.jsx(cr,{control:I.control,name:"projectName",render:({field:te})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Project Name"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-project-name",placeholder:"Enter project name",...te})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:I.control,name:"clientId",render:({field:te})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Client Name"}),s.jsxs(Ml,{onValueChange:te.onChange,value:te.value,children:[s.jsx(ir,{children:s.jsx(ol,{"data-testid":"select-client",children:s.jsx(Bl,{placeholder:"Select a client"})})}),s.jsx(ll,{children:A?s.jsx(va,{value:"loading",disabled:!0,children:"Loading clients..."}):k&&k.length>0?k.map(ae=>s.jsx(va,{value:String(ae.id),"data-testid":`select-client-option-${ae.id}`,children:ae.name},ae.id)):s.jsx(va,{value:"none",disabled:!0,children:"No clients available. Please add a client first."})})]}),s.jsx(ar,{})]})}),s.jsx(cr,{control:I.control,name:"location",render:({field:te})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Location"}),s.jsx(ir,{children:s.jsx(Je,{"data-testid":"input-location",placeholder:"Enter location",...te})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:I.control,name:"quotationType",render:({field:te})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Quotation Type"}),s.jsxs(Ml,{onValueChange:te.onChange,value:te.value,children:[s.jsx(ir,{children:s.jsx(ol,{"data-testid":"select-quotation-type",children:s.jsx(Bl,{placeholder:"Select quotation type"})})}),s.jsx(ll,{children:Am.map(ae=>s.jsx(va,{value:ae,"data-testid":`select-quotation-option-${ae.replace(/\s+/g,"-").toLowerCase()}`,children:ae},ae))})]}),s.jsx(ar,{})]})}),s.jsx(Me,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/90",disabled:R.isPending||$.isPending,"data-testid":"button-submit-project",children:R.isPending||$.isPending?r?"Updating...":"Creating...":r?"Update Project":"Create Project"})]})})]})]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(e1,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx(Je,{value:c,onChange:te=>f(te.target.value),placeholder:"Search by project, client, location, type...",className:"pl-9","data-testid":"input-search-projects"})]})]}),s.jsx(kn,{className:"border-0 shadow-lg overflow-hidden",children:s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Project Identifier"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Client Partner"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Geographic Site"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Creation Date"})}),s.jsx("div",{className:"col-span-1",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),S?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(te=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-28"})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24 ml-auto"})})]},te))}):X.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"divide-y divide-slate-100",children:[Ce.map(te=>s.jsxs("div",{"data-testid":`row-project-${te.id}`,className:"hidden md:grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-400 to-teal-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:"P"}),s.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-project-name-${te.id}`,children:te.projectName.length>15?te.projectName.substring(0,15)+"...":te.projectName})]}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"font-semibold text-slate-700 uppercase text-sm","data-testid":`text-client-name-${te.id}`,children:W(te.clientId)})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-location-${te.id}`,children:te.location})}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx(DA,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-created-date-${te.id}`,children:te.createdAt?he(te.createdAt):"N/A"})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("span",{className:`font-bold text-xs uppercase tracking-wide ${z(te.quotationType)}`,"data-testid":`text-status-${te.id}`,children:E(te.quotationType)})}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>y(`/revira/projects/${te.id}/quotation`),"data-testid":`button-quotation-${te.id}`,title:"Create Quotation",children:s.jsx(Ta,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>y(`/revira/projects/${te.id}/invoice`),"data-testid":`button-invoice-${te.id}`,title:"Create Invoice",children:s.jsx(cv,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>y(`/revira/projects/${te.id}/gate-pass`),"data-testid":`button-gate-pass-${te.id}`,title:"Create Gate Pass",children:s.jsx(av,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>y(`/revira/projects/${te.id}/delivery-challan`),"data-testid":`button-delivery-challan-${te.id}`,title:"Create Delivery Challan",children:s.jsx(iv,{className:"w-4 h-4"})}),s.jsx(Me,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>y(`/revira/projects/${te.id}/ledger`),"data-testid":`button-ledger-${te.id}`,title:"Open Ledger",children:s.jsx(C2,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>re(te),"data-testid":`button-edit-project-${te.id}`,title:"Edit Project",children:s.jsx(Vu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>u(te),disabled:N.isPending,"data-testid":`button-delete-project-${te.id}`,title:"Delete Project",children:s.jsx(lr,{className:"w-4 h-4"})})]})]},te.id)),Ce.map(te=>s.jsxs("div",{className:"md:hidden px-4 py-4 space-y-3 hover:bg-slate-50/50","data-testid":`card-project-${te.id}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900",children:te.projectName}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:W(te.clientId)}),s.jsx("p",{className:"text-xs text-slate-500",children:te.location})]}),s.jsx("span",{className:`font-bold text-[10px] uppercase tracking-wide ${z(te.quotationType)}`,children:E(te.quotationType)})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-red-400 hover:text-red-600 hover:bg-red-50",onClick:()=>y(`/revira/projects/${te.id}/quotation`),"data-testid":`button-quotation-mobile-${te.id}`,children:s.jsx(Ta,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-green-600 hover:bg-green-50",onClick:()=>y(`/revira/projects/${te.id}/invoice`),"data-testid":`button-invoice-mobile-${te.id}`,children:s.jsx(cv,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50",onClick:()=>y(`/revira/projects/${te.id}/gate-pass`),"data-testid":`button-gate-pass-mobile-${te.id}`,children:s.jsx(av,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50",onClick:()=>y(`/revira/projects/${te.id}/delivery-challan`),"data-testid":`button-delivery-challan-mobile-${te.id}`,children:s.jsx(iv,{className:"w-4 h-4"})}),s.jsx(Me,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-violet-600 hover:bg-violet-50",onClick:()=>y(`/revira/projects/${te.id}/ledger`),"data-testid":`button-ledger-mobile-${te.id}`,title:"Open Ledger",children:s.jsx(C2,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>re(te),"data-testid":`button-edit-project-mobile-${te.id}`,children:s.jsx(Vu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>u(te),disabled:N.isPending,"data-testid":`button-delete-project-mobile-${te.id}`,children:s.jsx(lr,{className:"w-4 h-4"})})]})]},`mobile-${te.id}`))]}),s.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 bg-slate-50/60 px-4 py-3",children:[s.jsxs("p",{className:"text-sm text-slate-600",children:["Page ",p," of ",ie," | ",X.length," records"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>m(te=>Math.max(1,te-1)),disabled:p===1,"data-testid":"button-projects-prev-page",children:"Previous"}),s.jsx(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>m(te=>Math.min(ie,te+1)),disabled:p===ie,"data-testid":"button-projects-next-page",children:"Next"})]})]})]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-teal-500/10 flex items-center justify-center mb-4",children:s.jsx(dm,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No projects yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by creating your first project. Add clients first if you haven't already."}),s.jsxs(Me,{onClick:()=>n(!0),className:"bg-gradient-to-r from-primary to-primary/90 shadow-lg shadow-primary/25",children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Create First Project"]})]})]})}),s.jsx(gi,{open:!!o,onOpenChange:te=>!te&&u(null),children:s.jsxs(ri,{className:"sm:max-w-md",children:[s.jsxs(si,{children:[s.jsx(ii,{children:"Delete Project?"}),s.jsx(Zu,{children:o?`Are you sure you want to delete "${o.projectName}"? This action cannot be undone.`:"Are you sure you want to delete this project? This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>u(null),disabled:N.isPending,"data-testid":"button-cancel-delete-project",children:"Cancel"}),s.jsx(Me,{type:"button",variant:"destructive",onClick:Q,disabled:N.isPending,"data-testid":"button-confirm-delete-project",children:N.isPending?"Deleting...":"Delete"})]})]})})]})}var L1="Checkbox",[xD]=hl(L1),[yD,bD]=xD(L1),nj=P.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:u,disabled:c,value:f="on",onCheckedChange:p,form:m,...y}=t,[j,x]=P.useState(null),D=Vr(e,$=>x($)),S=P.useRef(!1),k=j?m||!!j.closest("form"):!0,[A=!1,I]=nu({prop:a,defaultProp:o,onChange:p}),R=P.useRef(A);return P.useEffect(()=>{const $=j?.form;if($){const N=()=>I(R.current);return $.addEventListener("reset",N),()=>$.removeEventListener("reset",N)}},[j,I]),s.jsxs(yD,{scope:n,state:A,disabled:c,children:[s.jsx(Jn.button,{type:"button",role:"checkbox","aria-checked":tu(A)?"mixed":A,"aria-required":u,"data-state":ij(A),"data-disabled":c?"":void 0,disabled:c,value:f,...y,ref:D,onKeyDown:Kn(t.onKeyDown,$=>{$.key==="Enter"&&$.preventDefault()}),onClick:Kn(t.onClick,$=>{I(N=>tu(N)?!0:!N),k&&(S.current=$.isPropagationStopped(),S.current||$.stopPropagation())})}),k&&s.jsx(wD,{control:j,bubbles:!S.current,name:r,value:f,checked:A,required:u,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:tu(o)?!1:o})]})});nj.displayName=L1;var rj="CheckboxIndicator",sj=P.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,o=bD(rj,n);return s.jsx(fu,{present:r||tu(o.state)||o.state===!0,children:s.jsx(Jn.span,{"data-state":ij(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});sj.displayName=rj;var wD=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:a,...o}=t,u=P.useRef(null),c=xS(n),f=dw(e);P.useEffect(()=>{const m=u.current,y=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(y,"checked").set;if(c!==n&&x){const D=new Event("click",{bubbles:r});m.indeterminate=tu(n),x.call(m,tu(n)?!1:n),m.dispatchEvent(D)}},[c,n,r]);const p=P.useRef(tu(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,...o,tabIndex:-1,ref:u,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function tu(t){return t==="indeterminate"}function ij(t){return tu(t)?"indeterminate":t?"checked":"unchecked"}var aj=nj,ND=sj;const ah=P.forwardRef(({className:t,...e},n)=>s.jsx(aj,{ref:n,className:Sn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(ND,{className:Sn("flex items-center justify-center text-current"),children:s.jsx(Md,{className:"h-4 w-4"})})}));ah.displayName=aj.displayName;var oj="AlertDialog",[SD]=hl(oj,[XN]),yc=XN(),lj=t=>{const{__scopeAlertDialog:e,...n}=t,r=yc(e);return s.jsx(P1,{...r,...n,modal:!0})};lj.displayName=oj;var jD="AlertDialogTrigger",CD=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,a=yc(n);return s.jsx(k1,{...a,...r,ref:e})});CD.displayName=jD;var AD="AlertDialogPortal",cj=t=>{const{__scopeAlertDialog:e,...n}=t,r=yc(e);return s.jsx(T1,{...r,...n})};cj.displayName=AD;var _D="AlertDialogOverlay",uj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,a=yc(n);return s.jsx(qh,{...a,...r,ref:e})});uj.displayName=_D;var Zd="AlertDialogContent",[PD,kD]=SD(Zd),TD=mb("AlertDialogContent"),dj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...a}=t,o=yc(n),u=P.useRef(null),c=Vr(e,u),f=P.useRef(null);return s.jsx(jL,{contentName:Zd,titleName:fj,docsSlug:"alert-dialog",children:s.jsx(PD,{scope:n,cancelRef:f,children:s.jsxs(Uh,{role:"alertdialog",...o,...a,ref:c,onOpenAutoFocus:Kn(a.onOpenAutoFocus,p=>{p.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[s.jsx(TD,{children:r}),s.jsx(LD,{contentRef:u})]})})})});dj.displayName=Zd;var fj="AlertDialogTitle",hj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,a=yc(n);return s.jsx(zh,{...a,...r,ref:e})});hj.displayName=fj;var pj="AlertDialogDescription",mj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,a=yc(n);return s.jsx($h,{...a,...r,ref:e})});mj.displayName=pj;var ED="AlertDialogAction",gj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,a=yc(n);return s.jsx(ag,{...a,...r,ref:e})});gj.displayName=ED;var vj="AlertDialogCancel",xj=P.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:a}=kD(vj,n),o=yc(n),u=Vr(e,a);return s.jsx(ag,{...o,...r,ref:u})});xj.displayName=vj;var LD=({contentRef:t})=>{const e=`\`${Zd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Zd}\` by passing a \`${pj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Zd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return P.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},DD=lj,RD=cj,yj=uj,bj=dj,wj=gj,Nj=xj,Sj=hj,jj=mj;const ID=DD,FD=RD,Cj=P.forwardRef(({className:t,...e},n)=>s.jsx(yj,{className:Sn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Cj.displayName=yj.displayName;const Aj=P.forwardRef(({className:t,...e},n)=>s.jsxs(FD,{children:[s.jsx(Cj,{}),s.jsx(bj,{ref:n,className:Sn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Aj.displayName=bj.displayName;const _j=({className:t,...e})=>s.jsx("div",{className:Sn("flex flex-col space-y-2 text-center sm:text-left",t),...e});_j.displayName="AlertDialogHeader";const Pj=({className:t,...e})=>s.jsx("div",{className:Sn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Pj.displayName="AlertDialogFooter";const kj=P.forwardRef(({className:t,...e},n)=>s.jsx(Sj,{ref:n,className:Sn("text-lg font-semibold",t),...e}));kj.displayName=Sj.displayName;const Tj=P.forwardRef(({className:t,...e},n)=>s.jsx(jj,{ref:n,className:Sn("text-sm text-muted-foreground",t),...e}));Tj.displayName=jj.displayName;const Ej=P.forwardRef(({className:t,...e},n)=>s.jsx(wj,{ref:n,className:Sn(b1(),t),...e}));Ej.displayName=wj.displayName;const Lj=P.forwardRef(({className:t,...e},n)=>s.jsx(Nj,{ref:n,className:Sn(b1({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Lj.displayName=Nj.displayName;function Hh({open:t,onOpenChange:e,title:n,description:r,onConfirm:a,confirmLabel:o="Delete",cancelLabel:u="Cancel",confirmTestId:c,cancelTestId:f}){return s.jsx(ID,{open:t,onOpenChange:e,children:s.jsxs(Aj,{children:[s.jsxs(_j,{children:[s.jsx(kj,{children:n}),s.jsx(Tj,{children:r})]}),s.jsxs(Pj,{children:[s.jsx(Lj,{"data-testid":f,children:u}),s.jsx(Ej,{onClick:a,className:"bg-[#d92134] text-white hover:bg-[#b51c2c]","data-testid":c,children:o})]})]})})}const Dj=M.object({name:M.string().min(1,"Name is required"),username:M.string().email("Please enter a valid email address"),mobile:M.string().min(10,"Valid mobile number is required"),password:M.string().min(6,"Password must be at least 6 characters"),role:M.enum(_h,{errorMap:()=>({message:"Role is required"})}),assignedClientIds:M.array(M.number()).optional()}),OD=Dj.partial().extend({name:M.string().min(1,"Name is required"),username:M.string().email("Please enter a valid email address"),mobile:M.string().min(10,"Valid mobile number is required"),role:M.enum(_h,{errorMap:()=>({message:"Role is required"})}),password:M.string().optional()});function MD(){const[t,e]=P.useState(!1),[n,r]=P.useState(null),[a,o]=P.useState([]),[u,c]=P.useState(null),{toast:f}=Ha(),{data:p}=Ra(),m=p?.role==="Administrator",{data:y,isLoading:j}=Bn({queryKey:["/revira/api/users"]}),{data:x}=Bn({queryKey:["/revira/api/clients"]}),D=gf({resolver:vf(n?OD:Dj),defaultValues:{name:"",username:"",mobile:"",password:"",role:"Standard",assignedClientIds:[]}}),S=D.watch("role"),k=Mr({mutationFn:async K=>jn("POST","/revira/api/users",{...K,email:K.username,assignedClientIds:a}),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/users"]}),f({title:"User created",description:"The user has been created successfully."}),D.reset(),o([]),e(!1)},onError:K=>{f({title:"Error",description:K.message||"Failed to create user",variant:"destructive"})}}),A=Mr({mutationFn:async({id:K,data:W})=>{const he={name:W.name,username:W.username,email:W.username,mobile:W.mobile,role:W.role,assignedClientIds:a};return W.password&&W.password.length>=6&&(he.password=W.password),jn("PUT",`/revira/api/users/${K}`,he)},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/users"]}),f({title:"User updated",description:"The user has been updated successfully."}),D.reset(),o([]),r(null),e(!1)},onError:K=>{f({title:"Error",description:K.message||"Failed to update user",variant:"destructive"})}}),I=Mr({mutationFn:async K=>jn("DELETE",`/revira/api/users/${K}`),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/users"]}),f({title:"User deleted",description:"The user has been deleted successfully."})},onError:K=>{f({title:"Error",description:K.message||"Failed to delete user",variant:"destructive"})}}),R=async K=>{r(K),D.reset({name:K.name,username:K.username,mobile:K.mobile||"",password:"",role:K.role});try{const he=await(await fetch(`/revira/api/users/${K.id}/clients`)).json();o(he)}catch{o([])}e(!0)},$=K=>{K||(D.reset(),r(null),o([])),e(K)},N=K=>{n?A.mutate({id:n.id,data:K}):k.mutate(K)},xe=K=>{o(W=>W.includes(K)?W.filter(he=>he!==K):[...W,K])},re=K=>K==="Administrator"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700";return s.jsxs(Ks,{user:p,children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-1","data-testid":"text-page-title",children:"User Management"}),s.jsx("p",{className:"text-slate-500","data-testid":"text-page-description",children:"Manage system users and their access permissions"})]}),m&&s.jsxs(gi,{open:t,onOpenChange:$,children:[s.jsxs(Me,{onClick:()=>{r(null),D.reset(),o([]),e(!0)},className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] hover:from-[#b51c2c] hover:to-[#a01827] shadow-lg shadow-red-200/50","data-testid":"button-add-user",children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Add User"]}),s.jsxs(ri,{className:"sm:max-w-[500px]",children:[s.jsxs(si,{children:[s.jsx(ii,{children:n?"Edit User":"Add New User"}),s.jsx(Zu,{children:n?"Update the user details below.":"Fill in the details to create a new user account."})]}),s.jsx(xf,{...D,children:s.jsxs("form",{onSubmit:D.handleSubmit(N),className:"space-y-4",children:[s.jsx(cr,{control:D.control,name:"name",render:({field:K})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"User Name"}),s.jsx(ir,{children:s.jsx(Je,{placeholder:"Enter full name",...K,"data-testid":"input-user-name"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:D.control,name:"username",render:({field:K})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Email ID"}),s.jsx(ir,{children:s.jsx(Je,{type:"email",placeholder:"Enter email address",...K,"data-testid":"input-user-email"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:D.control,name:"mobile",render:({field:K})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Mobile No."}),s.jsx(ir,{children:s.jsx(Je,{placeholder:"Enter mobile number",...K,"data-testid":"input-user-mobile"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:D.control,name:"password",render:({field:K})=>s.jsxs(rr,{children:[s.jsx(sr,{children:n?"New Password (leave blank to keep current)":"Password"}),s.jsx(ir,{children:s.jsx(Je,{type:"password",placeholder:n?"Enter new password (optional)":"Enter password",...K,"data-testid":"input-user-password"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:D.control,name:"role",render:({field:K})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Role"}),s.jsxs(Ml,{onValueChange:K.onChange,value:K.value,children:[s.jsx(ir,{children:s.jsx(ol,{"data-testid":"select-user-role",children:s.jsx(Bl,{placeholder:"Select role"})})}),s.jsx(ll,{children:_h.map(W=>s.jsx(va,{value:W,"data-testid":`option-role-${W.toLowerCase()}`,children:W},W))})]}),s.jsx(ar,{})]})}),S==="Standard"&&x&&x.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Assign Clients"}),s.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Standard users can only access projects of assigned clients"}),s.jsx("div",{className:"border rounded-md p-3 max-h-40 overflow-y-auto space-y-2",children:x.map(K=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ah,{id:`client-${K.id}`,checked:a.includes(K.id),onCheckedChange:()=>xe(K.id),"data-testid":`checkbox-client-${K.id}`}),s.jsx("label",{htmlFor:`client-${K.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:K.name})]},K.id))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>$(!1),"data-testid":"button-cancel",children:"Cancel"}),s.jsx(Me,{type:"submit",disabled:k.isPending||A.isPending,className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c]","data-testid":"button-submit-user",children:k.isPending||A.isPending?"Saving...":n?"Update User":"Create User"})]})]})})]})]})]}),s.jsx(kn,{className:"shadow-lg border-slate-200/50 overflow-hidden",children:s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mobile"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})})]})}),j?s.jsx("div",{className:"divide-y divide-slate-100",children:[1,2,3].map(K=>s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-5 animate-pulse",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-32"})}),s.jsx("div",{className:"col-span-3",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-40"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})}),s.jsx("div",{className:"col-span-2",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-16 ml-auto"})})]},K))}):y&&y.length>0?s.jsx("div",{className:"divide-y divide-slate-100",children:y.map(K=>s.jsxs("div",{"data-testid":`row-user-${K.id}`,className:"grid grid-cols-12 gap-4 px-6 py-5 items-center hover:bg-slate-50/50 transition-colors group",children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:K.name?.charAt(0).toUpperCase()||"U"}),s.jsx("span",{className:"font-semibold text-slate-800","data-testid":`text-user-name-${K.id}`,children:K.name})]}),s.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[s.jsx(hu,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-email-${K.id}`,children:K.username})]}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx($b,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-slate-600 text-sm","data-testid":`text-user-mobile-${K.id}`,children:K.mobile||"-"})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${re(K.role||"Standard")}`,"data-testid":`text-user-role-${K.id}`,children:[s.jsx(UA,{className:"w-3 h-3"}),K.role||"Standard"]})}),s.jsx("div",{className:"col-span-2 flex items-center justify-end gap-1",children:m&&s.jsxs(s.Fragment,{children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-amber-600 hover:bg-amber-50",onClick:()=>R(K),"data-testid":`button-edit-user-${K.id}`,title:"Edit User",children:s.jsx(Vu,{className:"w-4 h-4"})}),K.id!==p?.id&&s.jsx(Me,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md text-slate-400 hover:text-red-600 hover:bg-red-50",onClick:()=>c(K),disabled:I.isPending,"data-testid":`button-delete-user-${K.id}`,title:"Delete User",children:s.jsx(lr,{className:"w-4 h-4"})})]})})]},K.id))}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-slate-500/10 flex items-center justify-center mb-4",children:s.jsx(uh,{className:"w-8 h-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No users yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-sm mx-auto",children:"Get started by adding your first user account."}),m&&s.jsxs(Me,{onClick:()=>e(!0),className:"bg-gradient-to-r from-[#d92134] to-[#b51c2c] shadow-lg shadow-red-200/50",children:[s.jsx(sl,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})]})}),s.jsx(Hh,{open:!!u,onOpenChange:K=>{K||c(null)},title:"Delete User?",description:u?`Are you sure you want to delete ${u.name}? This action cannot be undone.`:"",onConfirm:()=>{u&&(I.mutate(u.id),c(null))},confirmLabel:"Delete",confirmTestId:"confirm-delete-user",cancelTestId:"cancel-delete-user"})]})}const Or=P.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Sn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Or.displayName="Textarea";var D1="Collapsible",[BD,Rj]=hl(D1),[qD,R1]=BD(D1),Ij=P.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:u,...c}=t,[f=!1,p]=nu({prop:r,defaultProp:a,onChange:u});return s.jsx(qD,{scope:n,disabled:o,contentId:eu(),open:f,onOpenToggle:P.useCallback(()=>p(m=>!m),[p]),children:s.jsx(Jn.div,{"data-state":F1(f),"data-disabled":o?"":void 0,...c,ref:e})})});Ij.displayName=D1;var Fj="CollapsibleTrigger",Oj=P.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,a=R1(Fj,n);return s.jsx(Jn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":F1(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:e,onClick:Kn(t.onClick,a.onOpenToggle)})});Oj.displayName=Fj;var I1="CollapsibleContent",Mj=P.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=R1(I1,t.__scopeCollapsible);return s.jsx(fu,{present:n||a.open,children:({present:o})=>s.jsx(UD,{...r,ref:e,present:o})})});Mj.displayName=I1;var UD=P.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=t,u=R1(I1,n),[c,f]=P.useState(r),p=P.useRef(null),m=Vr(e,p),y=P.useRef(0),j=y.current,x=P.useRef(0),D=x.current,S=u.open||c,k=P.useRef(S),A=P.useRef(void 0);return P.useEffect(()=>{const I=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(I)},[]),ji(()=>{const I=p.current;if(I){A.current=A.current||{transitionDuration:I.style.transitionDuration,animationName:I.style.animationName},I.style.transitionDuration="0s",I.style.animationName="none";const R=I.getBoundingClientRect();y.current=R.height,x.current=R.width,k.current||(I.style.transitionDuration=A.current.transitionDuration,I.style.animationName=A.current.animationName),f(r)}},[u.open,r]),s.jsx(Jn.div,{"data-state":F1(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":D?`${D}px`:void 0,...t.style},children:S&&a})});function F1(t){return t?"open":"closed"}var zD=Ij,$D=Oj,VD=Mj,bc="Accordion",HD=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[O1,WD,GD]=Qv(bc),[ug]=hl(bc,[GD,Rj]),M1=Rj(),Bj=Nn.forwardRef((t,e)=>{const{type:n,...r}=t,a=r,o=r;return s.jsx(O1.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(YD,{...o,ref:e}):s.jsx(ZD,{...a,ref:e})})});Bj.displayName=bc;var[qj,KD]=ug(bc),[Uj,QD]=ug(bc,{collapsible:!1}),ZD=Nn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...u}=t,[c,f]=nu({prop:n,defaultProp:r,onChange:a});return s.jsx(qj,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:f,onItemClose:Nn.useCallback(()=>o&&f(""),[o,f]),children:s.jsx(Uj,{scope:t.__scopeAccordion,collapsible:o,children:s.jsx(zj,{...u,ref:e})})})}),YD=Nn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=t,[u=[],c]=nu({prop:n,defaultProp:r,onChange:a}),f=Nn.useCallback(m=>c((y=[])=>[...y,m]),[c]),p=Nn.useCallback(m=>c((y=[])=>y.filter(j=>j!==m)),[c]);return s.jsx(qj,{scope:t.__scopeAccordion,value:u,onItemOpen:f,onItemClose:p,children:s.jsx(Uj,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(zj,{...o,ref:e})})})}),[XD,dg]=ug(bc),zj=Nn.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...u}=t,c=Nn.useRef(null),f=Vr(c,e),p=WD(n),y=vS(a)==="ltr",j=Kn(t.onKeyDown,x=>{if(!HD.includes(x.key))return;const D=x.target,S=p().filter(K=>!K.ref.current?.disabled),k=S.findIndex(K=>K.ref.current===D),A=S.length;if(k===-1)return;x.preventDefault();let I=k;const R=0,$=A-1,N=()=>{I=k+1,I>$&&(I=R)},xe=()=>{I=k-1,I<R&&(I=$)};switch(x.key){case"Home":I=R;break;case"End":I=$;break;case"ArrowRight":o==="horizontal"&&(y?N():xe());break;case"ArrowDown":o==="vertical"&&N();break;case"ArrowLeft":o==="horizontal"&&(y?xe():N());break;case"ArrowUp":o==="vertical"&&xe();break}const re=I%A;S[re].ref.current?.focus()});return s.jsx(XD,{scope:n,disabled:r,direction:a,orientation:o,children:s.jsx(O1.Slot,{scope:n,children:s.jsx(Jn.div,{...u,"data-orientation":o,ref:f,onKeyDown:r?void 0:j})})})}),Dm="AccordionItem",[JD,B1]=ug(Dm),$j=Nn.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...a}=t,o=dg(Dm,n),u=KD(Dm,n),c=M1(n),f=eu(),p=r&&u.value.includes(r)||!1,m=o.disabled||t.disabled;return s.jsx(JD,{scope:n,open:p,disabled:m,triggerId:f,children:s.jsx(zD,{"data-orientation":o.orientation,"data-state":Qj(p),...c,...a,ref:e,disabled:m,open:p,onOpenChange:y=>{y?u.onItemOpen(r):u.onItemClose(r)}})})});$j.displayName=Dm;var Vj="AccordionHeader",Hj=Nn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=dg(bc,n),o=B1(Vj,n);return s.jsx(Jn.h3,{"data-orientation":a.orientation,"data-state":Qj(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});Hj.displayName=Vj;var kv="AccordionTrigger",Wj=Nn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=dg(bc,n),o=B1(kv,n),u=QD(kv,n),c=M1(n);return s.jsx(O1.ItemSlot,{scope:n,children:s.jsx($D,{"aria-disabled":o.open&&!u.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...r,ref:e})})});Wj.displayName=kv;var Gj="AccordionContent",Kj=Nn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,a=dg(bc,n),o=B1(Gj,n),u=M1(n);return s.jsx(VD,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...u,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Kj.displayName=Gj;function Qj(t){return t?"open":"closed"}var eR=Bj,tR=$j,nR=Hj,Zj=Wj,Yj=Kj;const A0=eR,em=P.forwardRef(({className:t,...e},n)=>s.jsx(tR,{ref:n,className:Sn("border-b",t),...e}));em.displayName="AccordionItem";const tm=P.forwardRef(({className:t,children:e,...n},r)=>s.jsx(nR,{className:"flex",children:s.jsxs(Zj,{ref:r,className:Sn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(zd,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));tm.displayName=Zj.displayName;const nm=P.forwardRef(({className:t,children:e,...n},r)=>s.jsx(Yj,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Sn("pb-4 pt-0",t),children:e})}));nm.displayName=Yj.displayName;const rR="modulepreload",sR=function(t){return"/revira/"+t},by={},_0=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let f=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(n.map(p=>{if(p=sR(p),p in by)return;by[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const j=document.createElement("link");if(j.rel=m?"stylesheet":rR,m||(j.as="script"),j.crossOrigin="",j.href=p,c&&j.setAttribute("nonce",c),document.head.appendChild(j),m)return new Promise((x,D)=>{j.addEventListener("load",x),j.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function Yr(t){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(t)}var fl=Uint8Array,ho=Uint16Array,q1=Int32Array,U1=new fl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),z1=new fl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wy=new fl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xj=function(t,e){for(var n=new ho(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new q1(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return{b:n,r:a}},Jj=Xj(U1,2),iR=Jj.b,Tv=Jj.r;iR[28]=258,Tv[258]=28;var aR=Xj(z1,0),Ny=aR.r,Ev=new ho(32768);for(var ys=0;ys<32768;++ys){var Kc=(ys&43690)>>1|(ys&21845)<<1;Kc=(Kc&52428)>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>4|(Kc&3855)<<4,Ev[ys]=((Kc&65280)>>8|(Kc&255)<<8)>>1}var oh=(function(t,e,n){for(var r=t.length,a=0,o=new ho(e);a<r;++a)t[a]&&++o[t[a]-1];var u=new ho(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(n){c=new ho(1<<e);var f=15-e;for(a=0;a<r;++a)if(t[a])for(var p=a<<4|t[a],m=e-t[a],y=u[t[a]-1]++<<m,j=y|(1<<m)-1;y<=j;++y)c[Ev[y]>>f]=p}else for(c=new ho(r),a=0;a<r;++a)t[a]&&(c[a]=Ev[u[t[a]-1]++]>>15-t[a]);return c}),Xu=new fl(288);for(var ys=0;ys<144;++ys)Xu[ys]=8;for(var ys=144;ys<256;++ys)Xu[ys]=9;for(var ys=256;ys<280;++ys)Xu[ys]=7;for(var ys=280;ys<288;++ys)Xu[ys]=8;var Rm=new fl(32);for(var ys=0;ys<32;++ys)Rm[ys]=5;var oR=oh(Xu,9,0),lR=oh(Rm,5,0),e4=function(t){return(t+7)/8|0},cR=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new fl(t.subarray(e,n))},uc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Zf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},P0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,o=n.slice();if(!a)return{t:n4,l:0};if(a==1){var u=new fl(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(N,xe){return N.f-xe.f}),n.push({s:-1,f:25001});var c=n[0],f=n[1],p=0,m=1,y=2;for(n[0]={s:-1,f:c.f+f.f,l:c,r:f};m!=a-1;)c=n[n[p].f<n[y].f?p++:y++],f=n[p!=m&&n[p].f<n[y].f?p++:y++],n[m++]={s:-1,f:c.f+f.f,l:c,r:f};for(var j=o[0].s,r=1;r<a;++r)o[r].s>j&&(j=o[r].s);var x=new ho(j+1),D=Lv(n[m-1],x,0);if(D>e){var r=0,S=0,k=D-e,A=1<<k;for(o.sort(function(xe,re){return x[re.s]-x[xe.s]||xe.f-re.f});r<a;++r){var I=o[r].s;if(x[I]>e)S+=A-(1<<D-x[I]),x[I]=e;else break}for(S>>=k;S>0;){var R=o[r].s;x[R]<e?S-=1<<e-x[R]++-1:++r}for(;r>=0&&S;--r){var $=o[r].s;x[$]==e&&(--x[$],++S)}D=e}return{t:new fl(x),l:D}},Lv=function(t,e,n){return t.s==-1?Math.max(Lv(t.l,e,n+1),Lv(t.r,e,n+1)):e[t.s]=n},Sy=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ho(++e),r=0,a=t[0],o=1,u=function(f){n[r++]=f},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=t[c]}return{c:n.subarray(0,r),n:e}},Yf=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},t4=function(t,e,n){var r=n.length,a=e4(e+2);t[a]=r&255,t[a+1]=r>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<r;++o)t[a+o+4]=n[o];return(a+4+r)*8},jy=function(t,e,n,r,a,o,u,c,f,p,m){uc(e,m++,n),++a[256];for(var y=P0(a,15),j=y.t,x=y.l,D=P0(o,15),S=D.t,k=D.l,A=Sy(j),I=A.c,R=A.n,$=Sy(S),N=$.c,xe=$.n,re=new ho(19),K=0;K<I.length;++K)++re[I[K]&31];for(var K=0;K<N.length;++K)++re[N[K]&31];for(var W=P0(re,7),he=W.t,z=W.l,E=19;E>4&&!he[wy[E-1]];--E);var Q=p+5<<3,X=Yf(a,Xu)+Yf(o,Rm)+u,ie=Yf(a,j)+Yf(o,S)+u+14+3*E+Yf(re,he)+2*re[16]+3*re[17]+7*re[18];if(f>=0&&Q<=X&&Q<=ie)return t4(e,m,t.subarray(f,f+p));var Ce,te,ae,Ne;if(uc(e,m,1+(ie<X)),m+=2,ie<X){Ce=oh(j,x,0),te=j,ae=oh(S,k,0),Ne=S;var Re=oh(he,z,0);uc(e,m,R-257),uc(e,m+5,xe-1),uc(e,m+10,E-4),m+=14;for(var K=0;K<E;++K)uc(e,m+3*K,he[wy[K]]);m+=3*E;for(var ne=[I,N],O=0;O<2;++O)for(var L=ne[O],K=0;K<L.length;++K){var oe=L[K]&31;uc(e,m,Re[oe]),m+=he[oe],oe>15&&(uc(e,m,L[K]>>5&127),m+=L[K]>>12)}}else Ce=oR,te=Xu,ae=lR,Ne=Rm;for(var K=0;K<c;++K){var ve=r[K];if(ve>255){var oe=ve>>18&31;Zf(e,m,Ce[oe+257]),m+=te[oe+257],oe>7&&(uc(e,m,ve>>23&31),m+=U1[oe]);var ye=ve&31;Zf(e,m,ae[ye]),m+=Ne[ye],ye>3&&(Zf(e,m,ve>>5&8191),m+=z1[ye])}else Zf(e,m,Ce[ve]),m+=te[ve]}return Zf(e,m,Ce[256]),m+te[256]},uR=new q1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),n4=new fl(0),dR=function(t,e,n,r,a,o){var u=o.z||t.length,c=new fl(r+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(r,c.length-a),p=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var y=uR[e-1],j=y>>13,x=y&8191,D=(1<<n)-1,S=o.p||new ho(32768),k=o.h||new ho(D+1),A=Math.ceil(n/3),I=2*A,R=function(_t){return(t[_t]^t[_t+1]<<A^t[_t+2]<<I)&D},$=new q1(25e3),N=new ho(288),xe=new ho(32),re=0,K=0,W=o.i||0,he=0,z=o.w||0,E=0;W+2<u;++W){var Q=R(W),X=W&32767,ie=k[Q];if(S[X]=ie,k[Q]=X,z<=W){var Ce=u-W;if((re>7e3||he>24576)&&(Ce>423||!p)){m=jy(t,f,0,$,N,xe,K,he,E,W-E,m),he=re=K=0,E=W;for(var te=0;te<286;++te)N[te]=0;for(var te=0;te<30;++te)xe[te]=0}var ae=2,Ne=0,Re=x,ne=X-ie&32767;if(Ce>2&&Q==R(W-ne))for(var O=Math.min(j,Ce)-1,L=Math.min(32767,W),oe=Math.min(258,Ce);ne<=L&&--Re&&X!=ie;){if(t[W+ae]==t[W+ae-ne]){for(var ve=0;ve<oe&&t[W+ve]==t[W+ve-ne];++ve);if(ve>ae){if(ae=ve,Ne=ne,ve>O)break;for(var ye=Math.min(ne,ve-2),be=0,te=0;te<ye;++te){var Le=W-ne+te&32767,Oe=S[Le],ze=Le-Oe&32767;ze>be&&(be=ze,ie=Le)}}}X=ie,ie=S[X],ne+=X-ie&32767}if(Ne){$[he++]=268435456|Tv[ae]<<18|Ny[Ne];var Ze=Tv[ae]&31,lt=Ny[Ne]&31;K+=U1[Ze]+z1[lt],++N[257+Ze],++xe[lt],z=W+ae,++re}else $[he++]=t[W],++N[t[W]]}}for(W=Math.max(W,z);W<u;++W)$[he++]=t[W],++N[t[W]];m=jy(t,f,p,$,N,xe,K,he,E,W-E,m),p||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=k,o.p=S,o.i=W,o.w=z)}else{for(var W=o.w||0;W<u+p;W+=65535){var ut=W+65535;ut>=u&&(f[m/8|0]=p,ut=u),m=t4(f,m+1,t.subarray(W,ut))}o.i=u}return cR(c,0,r+e4(m)+a)},r4=function(){var t=1,e=0;return{p:function(n){for(var r=t,a=e,o=n.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=r+=n[u];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}t=r,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},fR=function(t,e,n,r,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new fl(o.length+t.length);u.set(o),u.set(t,o.length),t=u,a.w=o.length}return dR(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,a)},s4=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},hR=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=r4();a.p(e.dictionary),s4(t,2,a.d())}};function Dv(t,e){e||(e={});var n=r4();n.p(t);var r=fR(t,e,e.dictionary?6:2,4);return hR(r,e),s4(r,r.length-4,n.d()),r}var pR=typeof TextDecoder<"u"&&new TextDecoder,mR=0;try{pR.decode(n4,{stream:!0}),mR=1}catch{}function gR(t){if(Array.isArray(t))return t}function vR(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,o,u,c=[],f=!0,p=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(f=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){p=!0,a=m}finally{try{if(!f&&n.return!=null&&(u=n.return(),Object(u)!==u))return}finally{if(p)throw a}}return c}}function Cy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function xR(t,e){if(t){if(typeof t=="string")return Cy(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cy(t,e):void 0}}function yR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ay(t,e){return gR(t)||vR(t,e)||xR(t,e)||yR()}function _y(t,e="utf8"){return new TextDecoder(e).decode(t)}const bR=new TextEncoder;function wR(t){return bR.encode(t)}const NR=1024*8,SR=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),k0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class $1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=NR,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=n.offset?n.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof $1)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=k0[n].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+r);if(this.littleEndian===SR&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+r));c.reverse();const f=new k0[n](c.buffer);return this.offset+=r,f.reverse(),f}const u=new k0[n](o);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return _y(this.readBytes(e))}decodeText(e=1,n="utf8"){return _y(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(wR(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function bf(t){let e=t.length;for(;--e>=0;)t[e]=0}const jR=3,CR=258,i4=29,AR=256,_R=AR+1+i4,a4=30,PR=512,kR=new Array((_R+2)*2);bf(kR);const TR=new Array(a4*2);bf(TR);const ER=new Array(PR);bf(ER);const LR=new Array(CR-jR+1);bf(LR);const DR=new Array(i4);bf(DR);const RR=new Array(a4);bf(RR);const IR=(t,e,n,r)=>{let a=t&65535|0,o=t>>>16&65535|0,u=0;for(;n!==0;){u=n>2e3?2e3:n,n-=u;do a=a+e[r++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Rv=IR;const FR=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},OR=new Uint32Array(FR()),MR=(t,e,n,r)=>{const a=OR,o=r+n;t^=-1;for(let u=r;u<o;u++)t=t>>>8^a[(t^e[u])&255];return t^-1};var kl=MR,Iv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},o4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const BR=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var qR=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)BR(n,r)&&(t[r]=n[r])}}return t},UR=t=>{let e=0;for(let r=0,a=t.length;r<a;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,a=0,o=t.length;r<o;r++){let u=t[r];n.set(u,a),a+=u.length}return n},l4={assign:qR,flattenChunks:UR};let c4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c4=!1}const kh=new Uint8Array(256);for(let t=0;t<256;t++)kh[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;kh[254]=kh[254]=1;var zR=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,a,o,u=t.length,c=0;for(a=0;a<u;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)n=t.charCodeAt(a),(n&64512)===55296&&a+1<u&&(r=t.charCodeAt(a+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|n&63):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|n&63):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|n&63);return e};const $R=(t,e)=>{if(e<65534&&t.subarray&&c4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var VR=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,a;const o=new Array(n*2);for(a=0,r=0;r<n;){let u=t[r++];if(u<128){o[a++]=u;continue}let c=kh[u];if(c>4){o[a++]=65533,r+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&r<n;)u=u<<6|t[r++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return $R(o,a)},HR=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+kh[t[n]]>e?n:e},Fv={string2buf:zR,buf2string:VR,utf8border:HR};function WR(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var GR=WR;const Fp=16209,KR=16191;var QR=function(e,n){let r,a,o,u,c,f,p,m,y,j,x,D,S,k,A,I,R,$,N,xe,re,K,W,he;const z=e.state;r=e.next_in,W=e.input,a=r+(e.avail_in-5),o=e.next_out,he=e.output,u=o-(n-e.avail_out),c=o+(e.avail_out-257),f=z.dmax,p=z.wsize,m=z.whave,y=z.wnext,j=z.window,x=z.hold,D=z.bits,S=z.lencode,k=z.distcode,A=(1<<z.lenbits)-1,I=(1<<z.distbits)-1;e:do{D<15&&(x+=W[r++]<<D,D+=8,x+=W[r++]<<D,D+=8),R=S[x&A];t:for(;;){if($=R>>>24,x>>>=$,D-=$,$=R>>>16&255,$===0)he[o++]=R&65535;else if($&16){N=R&65535,$&=15,$&&(D<$&&(x+=W[r++]<<D,D+=8),N+=x&(1<<$)-1,x>>>=$,D-=$),D<15&&(x+=W[r++]<<D,D+=8,x+=W[r++]<<D,D+=8),R=k[x&I];n:for(;;){if($=R>>>24,x>>>=$,D-=$,$=R>>>16&255,$&16){if(xe=R&65535,$&=15,D<$&&(x+=W[r++]<<D,D+=8,D<$&&(x+=W[r++]<<D,D+=8)),xe+=x&(1<<$)-1,xe>f){e.msg="invalid distance too far back",z.mode=Fp;break e}if(x>>>=$,D-=$,$=o-u,xe>$){if($=xe-$,$>m&&z.sane){e.msg="invalid distance too far back",z.mode=Fp;break e}if(re=0,K=j,y===0){if(re+=p-$,$<N){N-=$;do he[o++]=j[re++];while(--$);re=o-xe,K=he}}else if(y<$){if(re+=p+y-$,$-=y,$<N){N-=$;do he[o++]=j[re++];while(--$);if(re=0,y<N){$=y,N-=$;do he[o++]=j[re++];while(--$);re=o-xe,K=he}}}else if(re+=y-$,$<N){N-=$;do he[o++]=j[re++];while(--$);re=o-xe,K=he}for(;N>2;)he[o++]=K[re++],he[o++]=K[re++],he[o++]=K[re++],N-=3;N&&(he[o++]=K[re++],N>1&&(he[o++]=K[re++]))}else{re=o-xe;do he[o++]=he[re++],he[o++]=he[re++],he[o++]=he[re++],N-=3;while(N>2);N&&(he[o++]=he[re++],N>1&&(he[o++]=he[re++]))}}else if(($&64)===0){R=k[(R&65535)+(x&(1<<$)-1)];continue n}else{e.msg="invalid distance code",z.mode=Fp;break e}break}}else if(($&64)===0){R=S[(R&65535)+(x&(1<<$)-1)];continue t}else if($&32){z.mode=KR;break e}else{e.msg="invalid literal/length code",z.mode=Fp;break e}break}}while(r<a&&o<c);N=D>>3,r-=N,D-=N<<3,x&=(1<<D)-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=o<c?257+(c-o):257-(o-c),z.hold=x,z.bits=D};const Ed=15,Py=852,ky=592,Ty=0,T0=1,Ey=2,ZR=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),YR=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XR=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JR=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),eI=(t,e,n,r,a,o,u,c)=>{const f=c.bits;let p=0,m=0,y=0,j=0,x=0,D=0,S=0,k=0,A=0,I=0,R,$,N,xe,re,K=null,W;const he=new Uint16Array(Ed+1),z=new Uint16Array(Ed+1);let E=null,Q,X,ie;for(p=0;p<=Ed;p++)he[p]=0;for(m=0;m<r;m++)he[e[n+m]]++;for(x=f,j=Ed;j>=1&&he[j]===0;j--);if(x>j&&(x=j),j===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<j&&he[y]===0;y++);for(x<y&&(x=y),k=1,p=1;p<=Ed;p++)if(k<<=1,k-=he[p],k<0)return-1;if(k>0&&(t===Ty||j!==1))return-1;for(z[1]=0,p=1;p<Ed;p++)z[p+1]=z[p]+he[p];for(m=0;m<r;m++)e[n+m]!==0&&(u[z[e[n+m]]++]=m);if(t===Ty?(K=E=u,W=20):t===T0?(K=ZR,E=YR,W=257):(K=XR,E=JR,W=0),I=0,m=0,p=y,re=o,D=x,S=0,N=-1,A=1<<x,xe=A-1,t===T0&&A>Py||t===Ey&&A>ky)return 1;for(;;){Q=p-S,u[m]+1<W?(X=0,ie=u[m]):u[m]>=W?(X=E[u[m]-W],ie=K[u[m]-W]):(X=96,ie=0),R=1<<p-S,$=1<<D,y=$;do $-=R,a[re+(I>>S)+$]=Q<<24|X<<16|ie|0;while($!==0);for(R=1<<p-1;I&R;)R>>=1;if(R!==0?(I&=R-1,I+=R):I=0,m++,--he[p]===0){if(p===j)break;p=e[n+u[m]]}if(p>x&&(I&xe)!==N){for(S===0&&(S=x),re+=y,D=p-S,k=1<<D;D+S<j&&(k-=he[D+S],!(k<=0));)D++,k<<=1;if(A+=1<<D,t===T0&&A>Py||t===Ey&&A>ky)return 1;N=I&xe,a[N]=x<<24|D<<16|re-o|0}}return I!==0&&(a[re+I]=p-S<<24|64<<16|0),c.bits=x,0};var lh=eI;const tI=0,u4=1,d4=2,{Z_FINISH:Ly,Z_BLOCK:nI,Z_TREES:Op,Z_OK:Ju,Z_STREAM_END:rI,Z_NEED_DICT:sI,Z_STREAM_ERROR:Eo,Z_DATA_ERROR:f4,Z_MEM_ERROR:h4,Z_BUF_ERROR:iI,Z_DEFLATED:Dy}=o4,fg=16180,Ry=16181,Iy=16182,Fy=16183,Oy=16184,My=16185,By=16186,qy=16187,Uy=16188,zy=16189,Im=16190,dc=16191,E0=16192,$y=16193,L0=16194,Vy=16195,Hy=16196,Wy=16197,Gy=16198,Mp=16199,Bp=16200,Ky=16201,Qy=16202,Zy=16203,Yy=16204,Xy=16205,D0=16206,Jy=16207,e5=16208,Es=16209,p4=16210,m4=16211,aI=852,oI=592,lI=15,cI=lI,t5=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function uI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const nd=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<fg||e.mode>m4?1:0},g4=t=>{if(nd(t))return Eo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=fg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(aI),e.distcode=e.distdyn=new Int32Array(oI),e.sane=1,e.back=-1,Ju},v4=t=>{if(nd(t))return Eo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,g4(t)},x4=(t,e)=>{let n;if(nd(t))return Eo;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Eo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,v4(t))},y4=(t,e)=>{if(!t)return Eo;const n=new uI;t.state=n,n.strm=t,n.window=null,n.mode=fg;const r=x4(t,e);return r!==Ju&&(t.state=null),r},dI=t=>y4(t,cI);let n5=!0,R0,I0;const fI=t=>{if(n5){R0=new Int32Array(512),I0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(lh(u4,t.lens,0,288,R0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;lh(d4,t.lens,0,32,I0,0,t.work,{bits:5}),n5=!1}t.lencode=R0,t.lenbits=9,t.distcode=I0,t.distbits=5},b4=(t,e,n,r)=>{let a;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>r&&(a=r),o.window.set(e.subarray(n-r,n-r+a),o.wnext),r-=a,r?(o.window.set(e.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},hI=(t,e)=>{let n,r,a,o,u,c,f,p,m,y,j,x,D,S,k=0,A,I,R,$,N,xe,re,K;const W=new Uint8Array(4);let he,z;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nd(t)||!t.output||!t.input&&t.avail_in!==0)return Eo;n=t.state,n.mode===dc&&(n.mode=E0),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,y=c,j=f,K=Ju;e:for(;;)switch(n.mode){case fg:if(n.wrap===0){n.mode=E0;break}for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&2&&p===35615){n.wbits===0&&(n.wbits=15),n.check=0,W[0]=p&255,W[1]=p>>>8&255,n.check=kl(n.check,W,2,0),p=0,m=0,n.mode=Ry;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=Es;break}if((p&15)!==Dy){t.msg="unknown compression method",n.mode=Es;break}if(p>>>=4,m-=4,re=(p&15)+8,n.wbits===0&&(n.wbits=re),re>15||re>n.wbits){t.msg="invalid window size",n.mode=Es;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=p&512?zy:dc,p=0,m=0;break;case Ry:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.flags=p,(n.flags&255)!==Dy){t.msg="unknown compression method",n.mode=Es;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Es;break}n.head&&(n.head.text=p>>8&1),n.flags&512&&n.wrap&4&&(W[0]=p&255,W[1]=p>>>8&255,n.check=kl(n.check,W,2,0)),p=0,m=0,n.mode=Iy;case Iy:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.time=p),n.flags&512&&n.wrap&4&&(W[0]=p&255,W[1]=p>>>8&255,W[2]=p>>>16&255,W[3]=p>>>24&255,n.check=kl(n.check,W,4,0)),p=0,m=0,n.mode=Fy;case Fy:for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.head&&(n.head.xflags=p&255,n.head.os=p>>8),n.flags&512&&n.wrap&4&&(W[0]=p&255,W[1]=p>>>8&255,n.check=kl(n.check,W,2,0)),p=0,m=0,n.mode=Oy;case Oy:if(n.flags&1024){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length=p,n.head&&(n.head.extra_len=p),n.flags&512&&n.wrap&4&&(W[0]=p&255,W[1]=p>>>8&255,n.check=kl(n.check,W,2,0)),p=0,m=0}else n.head&&(n.head.extra=null);n.mode=My;case My:if(n.flags&1024&&(x=n.length,x>c&&(x=c),x&&(n.head&&(re=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+x),re)),n.flags&512&&n.wrap&4&&(n.check=kl(n.check,r,x,o)),c-=x,o+=x,n.length-=x),n.length))break e;n.length=0,n.mode=By;case By:if(n.flags&2048){if(c===0)break e;x=0;do re=r[o+x++],n.head&&re&&n.length<65536&&(n.head.name+=String.fromCharCode(re));while(re&&x<c);if(n.flags&512&&n.wrap&4&&(n.check=kl(n.check,r,x,o)),c-=x,o+=x,re)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=qy;case qy:if(n.flags&4096){if(c===0)break e;x=0;do re=r[o+x++],n.head&&re&&n.length<65536&&(n.head.comment+=String.fromCharCode(re));while(re&&x<c);if(n.flags&512&&n.wrap&4&&(n.check=kl(n.check,r,x,o)),c-=x,o+=x,re)break e}else n.head&&(n.head.comment=null);n.mode=Uy;case Uy:if(n.flags&512){for(;m<16;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Es;break}p=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=dc;break;case zy:for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}t.adler=n.check=t5(p),p=0,m=0,n.mode=Im;case Im:if(n.havedict===0)return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,sI;t.adler=n.check=1,n.mode=dc;case dc:if(e===nI||e===Op)break e;case E0:if(n.last){p>>>=m&7,m-=m&7,n.mode=D0;break}for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}switch(n.last=p&1,p>>>=1,m-=1,p&3){case 0:n.mode=$y;break;case 1:if(fI(n),n.mode=Mp,e===Op){p>>>=2,m-=2;break e}break;case 2:n.mode=Hy;break;case 3:t.msg="invalid block type",n.mode=Es}p>>>=2,m-=2;break;case $y:for(p>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Es;break}if(n.length=p&65535,p=0,m=0,n.mode=L0,e===Op)break e;case L0:n.mode=Vy;case Vy:if(x=n.length,x){if(x>c&&(x=c),x>f&&(x=f),x===0)break e;a.set(r.subarray(o,o+x),u),c-=x,o+=x,f-=x,u+=x,n.length-=x;break}n.mode=dc;break;case Hy:for(;m<14;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.nlen=(p&31)+257,p>>>=5,m-=5,n.ndist=(p&31)+1,p>>>=5,m-=5,n.ncode=(p&15)+4,p>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Es;break}n.have=0,n.mode=Wy;case Wy:for(;n.have<n.ncode;){for(;m<3;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.lens[E[n.have++]]=p&7,p>>>=3,m-=3}for(;n.have<19;)n.lens[E[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,he={bits:n.lenbits},K=lh(tI,n.lens,0,19,n.lencode,0,n.work,he),n.lenbits=he.bits,K){t.msg="invalid code lengths set",n.mode=Es;break}n.have=0,n.mode=Gy;case Gy:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[p&(1<<n.lenbits)-1],A=k>>>24,I=k>>>16&255,R=k&65535,!(A<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(R<16)p>>>=A,m-=A,n.lens[n.have++]=R;else{if(R===16){for(z=A+2;m<z;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(p>>>=A,m-=A,n.have===0){t.msg="invalid bit length repeat",n.mode=Es;break}re=n.lens[n.have-1],x=3+(p&3),p>>>=2,m-=2}else if(R===17){for(z=A+3;m<z;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=A,m-=A,re=0,x=3+(p&7),p>>>=3,m-=3}else{for(z=A+7;m<z;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=A,m-=A,re=0,x=11+(p&127),p>>>=7,m-=7}if(n.have+x>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Es;break}for(;x--;)n.lens[n.have++]=re}}if(n.mode===Es)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Es;break}if(n.lenbits=9,he={bits:n.lenbits},K=lh(u4,n.lens,0,n.nlen,n.lencode,0,n.work,he),n.lenbits=he.bits,K){t.msg="invalid literal/lengths set",n.mode=Es;break}if(n.distbits=6,n.distcode=n.distdyn,he={bits:n.distbits},K=lh(d4,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,he),n.distbits=he.bits,K){t.msg="invalid distances set",n.mode=Es;break}if(n.mode=Mp,e===Op)break e;case Mp:n.mode=Bp;case Bp:if(c>=6&&f>=258){t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,QR(t,j),u=t.next_out,a=t.output,f=t.avail_out,o=t.next_in,r=t.input,c=t.avail_in,p=n.hold,m=n.bits,n.mode===dc&&(n.back=-1);break}for(n.back=0;k=n.lencode[p&(1<<n.lenbits)-1],A=k>>>24,I=k>>>16&255,R=k&65535,!(A<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(I&&(I&240)===0){for($=A,N=I,xe=R;k=n.lencode[xe+((p&(1<<$+N)-1)>>$)],A=k>>>24,I=k>>>16&255,R=k&65535,!($+A<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=$,m-=$,n.back+=$}if(p>>>=A,m-=A,n.back+=A,n.length=R,I===0){n.mode=Xy;break}if(I&32){n.back=-1,n.mode=dc;break}if(I&64){t.msg="invalid literal/length code",n.mode=Es;break}n.extra=I&15,n.mode=Ky;case Ky:if(n.extra){for(z=n.extra;m<z;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Qy;case Qy:for(;k=n.distcode[p&(1<<n.distbits)-1],A=k>>>24,I=k>>>16&255,R=k&65535,!(A<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if((I&240)===0){for($=A,N=I,xe=R;k=n.distcode[xe+((p&(1<<$+N)-1)>>$)],A=k>>>24,I=k>>>16&255,R=k&65535,!($+A<=m);){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}p>>>=$,m-=$,n.back+=$}if(p>>>=A,m-=A,n.back+=A,I&64){t.msg="invalid distance code",n.mode=Es;break}n.offset=R,n.extra=I&15,n.mode=Zy;case Zy:if(n.extra){for(z=n.extra;m<z;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Es;break}n.mode=Yy;case Yy:if(f===0)break e;if(x=j-f,n.offset>x){if(x=n.offset-x,x>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Es;break}x>n.wnext?(x-=n.wnext,D=n.wsize-x):D=n.wnext-x,x>n.length&&(x=n.length),S=n.window}else S=a,D=u-n.offset,x=n.length;x>f&&(x=f),f-=x,n.length-=x;do a[u++]=S[D++];while(--x);n.length===0&&(n.mode=Bp);break;case Xy:if(f===0)break e;a[u++]=n.length,f--,n.mode=Bp;break;case D0:if(n.wrap){for(;m<32;){if(c===0)break e;c--,p|=r[o++]<<m,m+=8}if(j-=f,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?kl(n.check,a,j,u-j):Rv(n.check,a,j,u-j)),j=f,n.wrap&4&&(n.flags?p:t5(p))!==n.check){t.msg="incorrect data check",n.mode=Es;break}p=0,m=0}n.mode=Jy;case Jy:if(n.wrap&&n.flags){for(;m<32;){if(c===0)break e;c--,p+=r[o++]<<m,m+=8}if(n.wrap&4&&p!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Es;break}p=0,m=0}n.mode=e5;case e5:K=rI;break e;case Es:K=f4;break e;case p4:return h4;case m4:default:return Eo}return t.next_out=u,t.avail_out=f,t.next_in=o,t.avail_in=c,n.hold=p,n.bits=m,(n.wsize||j!==t.avail_out&&n.mode<Es&&(n.mode<D0||e!==Ly))&&b4(t,t.output,t.next_out,j-t.avail_out),y-=t.avail_in,j-=t.avail_out,t.total_in+=y,t.total_out+=j,n.total+=j,n.wrap&4&&j&&(t.adler=n.check=n.flags?kl(n.check,a,j,t.next_out-j):Rv(n.check,a,j,t.next_out-j)),t.data_type=n.bits+(n.last?64:0)+(n.mode===dc?128:0)+(n.mode===Mp||n.mode===L0?256:0),(y===0&&j===0||e===Ly)&&K===Ju&&(K=iI),K},pI=t=>{if(nd(t))return Eo;let e=t.state;return e.window&&(e.window=null),t.state=null,Ju},mI=(t,e)=>{if(nd(t))return Eo;const n=t.state;return(n.wrap&2)===0?Eo:(n.head=e,e.done=!1,Ju)},gI=(t,e)=>{const n=e.length;let r,a,o;return nd(t)||(r=t.state,r.wrap!==0&&r.mode!==Im)?Eo:r.mode===Im&&(a=1,a=Rv(a,e,n,0),a!==r.check)?f4:(o=b4(t,e,n,n),o?(r.mode=p4,h4):(r.havedict=1,Ju))};var vI=v4,xI=x4,yI=g4,bI=dI,wI=y4,NI=hI,SI=pI,jI=mI,CI=gI,AI="pako inflate (from Nodeca project)",mc={inflateReset:vI,inflateReset2:xI,inflateResetKeep:yI,inflateInit:bI,inflateInit2:wI,inflate:NI,inflateEnd:SI,inflateGetHeader:jI,inflateSetDictionary:CI,inflateInfo:AI};function _I(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var PI=_I;const w4=Object.prototype.toString,{Z_NO_FLUSH:kI,Z_FINISH:TI,Z_OK:Th,Z_STREAM_END:F0,Z_NEED_DICT:O0,Z_STREAM_ERROR:EI,Z_DATA_ERROR:r5,Z_MEM_ERROR:LI}=o4;function Wh(t){this.options=l4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GR,this.strm.avail_out=0;let n=mc.inflateInit2(this.strm,e.windowBits);if(n!==Th)throw new Error(Iv[n]);if(this.header=new PI,mc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Fv.string2buf(e.dictionary):w4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=mc.inflateSetDictionary(this.strm,e.dictionary),n!==Th)))throw new Error(Iv[n])}Wh.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?TI:kI,w4.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=mc.inflate(n,u),o===O0&&a&&(o=mc.inflateSetDictionary(n,a),o===Th?o=mc.inflate(n,u):o===r5&&(o=O0));n.avail_in>0&&o===F0&&n.state.wrap>0&&t[n.next_in]!==0;)mc.inflateReset(n),o=mc.inflate(n,u);switch(o){case EI:case r5:case O0:case LI:return this.onEnd(o),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||o===F0))if(this.options.to==="string"){let f=Fv.utf8border(n.output,n.next_out),p=n.next_out-f,m=Fv.buf2string(n.output,f);n.next_out=p,n.avail_out=r-p,p&&n.output.set(n.output.subarray(f,f+p),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===Th&&c===0)){if(o===F0)return o=mc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Wh.prototype.onData=function(t){this.chunks.push(t)};Wh.prototype.onEnd=function(t){t===Th&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function DI(t,e){const n=new Wh(e);if(n.push(t),n.err)throw n.msg||Iv[n.err];return n.result}var RI=Wh,II=DI,FI={Inflate:RI,inflate:II};const{Inflate:OI,inflate:MI}=FI;var s5=OI,BI=MI;const N4=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;N4[t]=e}const i5=4294967295;function qI(t,e,n){let r=t;for(let a=0;a<n;a++)r=N4[(r^e[a])&255]^r>>>8;return r}function UI(t,e){return(qI(i5,t,e)^i5)>>>0}function a5(t,e,n){const r=t.readUint32(),a=UI(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${a}`)}function S4(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function j4(t,e,n,r){let a=0;for(;a<r;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-r]&255}function C4(t,e,n,r){let a=0;if(n.length===0)for(;a<r;a++)e[a]=t[a];else for(;a<r;a++)e[a]=t[a]+n[a]&255}function A4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=t[o]+(n[o]>>1)&255;for(;o<r;o++)e[o]=t[o]+(e[o-a]+n[o]>>1)&255}}function _4(t,e,n,r,a){let o=0;if(n.length===0){for(;o<a;o++)e[o]=t[o];for(;o<r;o++)e[o]=t[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=t[o]+n[o]&255;for(;o<r;o++)e[o]=t[o]+zI(e[o-a],n[o],n[o-a])&255}}function zI(t,e,n){const r=t+e-n,a=Math.abs(r-t),o=Math.abs(r-e),u=Math.abs(r-n);return a<=o&&a<=u?t:o<=u?e:n}function $I(t,e,n,r,a,o){switch(t){case 0:S4(e,n,a);break;case 1:j4(e,n,a,o);break;case 2:C4(e,n,r,a);break;case 3:A4(e,n,r,a,o);break;case 4:_4(e,n,r,a,o);break;default:throw new Error(`Unsupported filter: ${t}`)}}const VI=new Uint16Array([255]),HI=new Uint8Array(VI.buffer),WI=HI[0]===255;function GI(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(r*n*c);let p=0;for(let m=0;m<7;m++){const y=u[m],j=Math.ceil((n-y.x)/y.xStep),x=Math.ceil((r-y.y)/y.yStep);if(j<=0||x<=0)continue;const D=j*c,S=new Uint8Array(D);for(let k=0;k<x;k++){const A=e[p++],I=e.subarray(p,p+D);p+=D;const R=new Uint8Array(D);$I(A,I,R,S,D,c),S.set(R);for(let $=0;$<j;$++){const N=y.x+$*y.xStep,xe=y.y+k*y.yStep;if(!(N>=n||xe>=r))for(let re=0;re<c;re++)f[(xe*n+N)*c+re]=R[$*c+re]}}}if(o===16){const m=new Uint16Array(f.buffer);if(WI)for(let y=0;y<m.length;y++)m[y]=KI(m[y]);return m}else return f}function KI(t){return(t&255)<<8|t>>8&255}const QI=new Uint16Array([255]),ZI=new Uint8Array(QI.buffer),YI=ZI[0]===255,XI=new Uint8Array(0);function o5(t){const{data:e,width:n,height:r,channels:a,depth:o}=t,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*n),f=new Uint8Array(r*c);let p=XI,m=0,y,j;for(let x=0;x<r;x++){switch(y=e.subarray(m+1,m+1+c),j=f.subarray(x*c,(x+1)*c),e[m]){case 0:S4(y,j,c);break;case 1:j4(y,j,c,u);break;case 2:C4(y,j,p,c);break;case 3:A4(y,j,p,c,u);break;case 4:_4(y,j,p,c,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=j,m+=c+1}if(o===16){const x=new Uint16Array(f.buffer);if(YI)for(let D=0;D<x.length;D++)x[D]=JI(x[D]);return x}else return f}function JI(t){return(t&255)<<8|t>>8&255}const rm=Uint8Array.of(137,80,78,71,13,10,26,10);function l5(t){if(!e7(t.readBytes(rm.length)))throw new Error("wrong PNG signature")}function e7(t){if(t.length<rm.length)return!1;for(let e=0;e<rm.length;e++)if(t[e]!==rm[e])return!1;return!0}const t7="tEXt",n7=0,P4=new TextDecoder("latin1");function r7(t){if(i7(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const s7=/^[\u0000-\u00FF]*$/;function i7(t){if(!s7.test(t))throw new Error("invalid latin1 text")}function a7(t,e,n){const r=k4(e);t[r]=o7(e,n-r.length-1)}function k4(t){for(t.mark();t.readByte()!==n7;);const e=t.offset;t.reset();const n=P4.decode(t.readBytes(e-t.offset-1));return t.skip(1),r7(n),n}function o7(t,e){return P4.decode(t.readBytes(e))}const lo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},M0={UNKNOWN:-1,DEFLATE:0},c5={UNKNOWN:-1,ADAPTIVE:0},B0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},qp={NONE:0,BACKGROUND:1,PREVIOUS:2},q0={SOURCE:0,OVER:1};class l7 extends $1{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new s5,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=M0.UNKNOWN,this._filterMethod=c5.UNKNOWN,this._interlaceMethod=B0.UNKNOWN,this._colorType=lo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(l5(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(l5(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case t7:a7(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?a5(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?a5(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=c7(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case lo.GREYSCALE:r=1;break;case lo.TRUECOLOUR:r=3;break;case lo.INDEXED_COLOUR:r=1;break;case lo.GREYSCALE_ALPHA:r=2;break;case lo.TRUECOLOUR_ALPHA:r=4;break;case lo.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==M0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<n;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case lo.GREYSCALE:case lo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case lo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case lo.UNKNOWN:case lo.GREYSCALE_ALPHA:case lo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=k4(this),r=this.readUint8();if(r!==M0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:BI(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=o5({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case qp.NONE:break;case qp.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)r.data[u+c]=0}break;case qp.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,a=(o,u)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,f=(o*n.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(n.blendOp){case q0.SOURCE:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++)e.data[c+p]=n.data[f+p]}break;case q0.OVER:for(let o=0;o<n.height;o++)for(let u=0;u<n.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++){const m=n.data[f+this._png.channels-1]/r,y=p%(this._png.channels-1)===0?1:n.data[f+p],j=Math.floor(m*y+(1-m)*e.data[c+p]);e.data[c+p]+=j}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==c5.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===B0.NO_INTERLACE)this._png.data=o5({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===B0.ADAM7)this._png.data=GI({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:qp.NONE,blendOp:q0.SOURCE,data:e}),this._inflator=new s5,this._writingDataChunks=!1}}function c7(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var u5;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(u5||(u5={}));function u7(t,e){return new l7(t,e).decode()}var Wn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function U0(){Wn.console&&typeof Wn.console.log=="function"&&Wn.console.log.apply(Wn.console,arguments)}var ns={log:U0,warn:function(t){Wn.console&&(typeof Wn.console.warn=="function"?Wn.console.warn.apply(Wn.console,arguments):U0.call(null,arguments))},error:function(t){Wn.console&&(typeof Wn.console.error=="function"?Wn.console.error.apply(Wn.console,arguments):U0(t))}};function z0(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ou(r.response,e,n)},r.onerror=function(){ns.error("could not download file")},r.send()}function d5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Up(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ou=Wn.saveAs||((typeof window>"u"?"undefined":Yr(window))!=="object"||window!==Wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Wn.URL||Wn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?d5(a.href)?z0(t,e,n):Up(a,a.target="_blank"):Up(a)):(a.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Up(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(d5(t))z0(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Up(r)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Yr(o)!=="object"&&(ns.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return z0(t,e,n);var a=t.type==="application/octet-stream",o=/constructor/i.test(Wn.HTMLElement)||Wn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Yr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},c.readAsDataURL(t)}else{var f=Wn.URL||Wn.webkitURL,p=f.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function T4(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,o=n[r].process,u=a.exec(t);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+c+f+p}}var sm=Wn.atob.bind(Wn),f5=Wn.btoa.bind(Wn);function $0(t,e){var n=t[0],r=t[1],a=t[2],o=t[3];n=fa(n,r,a,o,e[0],7,-680876936),o=fa(o,n,r,a,e[1],12,-389564586),a=fa(a,o,n,r,e[2],17,606105819),r=fa(r,a,o,n,e[3],22,-1044525330),n=fa(n,r,a,o,e[4],7,-176418897),o=fa(o,n,r,a,e[5],12,1200080426),a=fa(a,o,n,r,e[6],17,-1473231341),r=fa(r,a,o,n,e[7],22,-45705983),n=fa(n,r,a,o,e[8],7,1770035416),o=fa(o,n,r,a,e[9],12,-1958414417),a=fa(a,o,n,r,e[10],17,-42063),r=fa(r,a,o,n,e[11],22,-1990404162),n=fa(n,r,a,o,e[12],7,1804603682),o=fa(o,n,r,a,e[13],12,-40341101),a=fa(a,o,n,r,e[14],17,-1502002290),n=ha(n,r=fa(r,a,o,n,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ha(o,n,r,a,e[6],9,-1069501632),a=ha(a,o,n,r,e[11],14,643717713),r=ha(r,a,o,n,e[0],20,-373897302),n=ha(n,r,a,o,e[5],5,-701558691),o=ha(o,n,r,a,e[10],9,38016083),a=ha(a,o,n,r,e[15],14,-660478335),r=ha(r,a,o,n,e[4],20,-405537848),n=ha(n,r,a,o,e[9],5,568446438),o=ha(o,n,r,a,e[14],9,-1019803690),a=ha(a,o,n,r,e[3],14,-187363961),r=ha(r,a,o,n,e[8],20,1163531501),n=ha(n,r,a,o,e[13],5,-1444681467),o=ha(o,n,r,a,e[2],9,-51403784),a=ha(a,o,n,r,e[7],14,1735328473),n=pa(n,r=ha(r,a,o,n,e[12],20,-1926607734),a,o,e[5],4,-378558),o=pa(o,n,r,a,e[8],11,-2022574463),a=pa(a,o,n,r,e[11],16,1839030562),r=pa(r,a,o,n,e[14],23,-35309556),n=pa(n,r,a,o,e[1],4,-1530992060),o=pa(o,n,r,a,e[4],11,1272893353),a=pa(a,o,n,r,e[7],16,-155497632),r=pa(r,a,o,n,e[10],23,-1094730640),n=pa(n,r,a,o,e[13],4,681279174),o=pa(o,n,r,a,e[0],11,-358537222),a=pa(a,o,n,r,e[3],16,-722521979),r=pa(r,a,o,n,e[6],23,76029189),n=pa(n,r,a,o,e[9],4,-640364487),o=pa(o,n,r,a,e[12],11,-421815835),a=pa(a,o,n,r,e[15],16,530742520),n=ma(n,r=pa(r,a,o,n,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ma(o,n,r,a,e[7],10,1126891415),a=ma(a,o,n,r,e[14],15,-1416354905),r=ma(r,a,o,n,e[5],21,-57434055),n=ma(n,r,a,o,e[12],6,1700485571),o=ma(o,n,r,a,e[3],10,-1894986606),a=ma(a,o,n,r,e[10],15,-1051523),r=ma(r,a,o,n,e[1],21,-2054922799),n=ma(n,r,a,o,e[8],6,1873313359),o=ma(o,n,r,a,e[15],10,-30611744),a=ma(a,o,n,r,e[6],15,-1560198380),r=ma(r,a,o,n,e[13],21,1309151649),n=ma(n,r,a,o,e[4],6,-145523070),o=ma(o,n,r,a,e[11],10,-1120210379),a=ma(a,o,n,r,e[2],15,718787259),r=ma(r,a,o,n,e[9],21,-343485551),t[0]=Jc(n,t[0]),t[1]=Jc(r,t[1]),t[2]=Jc(a,t[2]),t[3]=Jc(o,t[3])}function hg(t,e,n,r,a,o){return e=Jc(Jc(e,t),Jc(r,o)),Jc(e<<a|e>>>32-a,n)}function fa(t,e,n,r,a,o,u){return hg(e&n|~e&r,t,e,a,o,u)}function ha(t,e,n,r,a,o,u){return hg(e&r|n&~r,t,e,a,o,u)}function pa(t,e,n,r,a,o,u){return hg(e^n^r,t,e,a,o,u)}function ma(t,e,n,r,a,o,u){return hg(n^(e|~r),t,e,a,o,u)}function E4(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$0(r,d7(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for($0(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,$0(r,a),r}function d7(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var h5="0123456789abcdef".split("");function f7(t){for(var e="",n=0;n<4;n++)e+=h5[t>>8*n+4&15]+h5[t>>8*n&15];return e}function h7(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ov(t){return E4(t).map(h7).join("")}var p7=(function(t){for(var e=0;e<t.length;e++)t[e]=f7(t[e]);return t.join("")})(E4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jc(t,e){if(p7){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function Mv(t,e){var n,r,a,o;if(t!==n){for(var u=(a=t,o=1+(256/t.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var p=0;for(f=0;f<256;f++){var m=c[f];p=(p+m+u.charCodeAt(f))%256,c[f]=c[p],c[p]=m}n=t,r=c}else c=r;var y=e.length,j=0,x=0,D="";for(f=0;f<y;f++)x=(x+(m=c[j=(j+1)%256]))%256,c[j]=c[x],c[x]=m,u=c[(c[j]+c[x])%256],D+=String.fromCharCode(e.charCodeAt(f)^u);return D}var p5={print:4,modify:8,copy:16,"annot-forms":32};function Fd(t,e,n,r){this.v=1,this.r=2;var a=192;t.forEach(function(c){if(p5.perm!==void 0)throw new Error("Invalid permission: "+c);a+=p5[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Ov(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Mv(this.encryptionKey,this.padding)}function Od(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var a=t.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[r]}return e}function m5(t){if(Yr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[r,!!a],o},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[n]){var u=e[n][o];try{u[0].apply(t,r)}catch(c){Wn.console&&ns.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fm(t){if(!(this instanceof Fm))return new Fm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function L4(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Mu(t,e,n,r,a){if(!(this instanceof Mu))return new Mu(t,e,n,r,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,L4.call(this,r,a)}function qd(t,e,n,r,a){if(!(this instanceof qd))return new qd(t,e,n,r,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,L4.call(this,r,a)}function un(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,p="S",m=null;Yr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,a=t.format||a,o=t.compress||t.compressPdf||o,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(f=t.floatPrecision),p=t.defaultPathOperation||"S"),u=t.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=t.putOnlyUsedFonts||!1,j={},x={internal:{},__private__:{}};x.__private__.PubSub=m5;var D="1.3",S=x.__private__.getPdfVersion=function(){return D};x.__private__.setPdfVersion=function(b){D=b};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return k};var A=x.__private__.getPageFormat=function(b){return k[b]};a=a||"a4";var I="compat",R="advanced",$=I;function N(){this.saveGraphicsState(),ue(new Mt(wt,0,0,-wt,0,Ki()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),p="n",$=R}function xe(){this.restoreGraphicsState(),p="S",$=I}var re=x.__private__.combineFontStyleAndFontWeight=function(b,V){if(b=="bold"&&V=="normal"||b=="bold"&&V==400||b=="normal"&&V=="italic"||b=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(b=V==400||V==="normal"?b==="italic"?"italic":"normal":V!=700&&V!=="bold"||b!=="normal"?(V==700?"bold":V)+""+b:"bold"),b};x.advancedAPI=function(b){var V=$===I;return V&&N.call(this),typeof b!="function"||(b(this),V&&xe.call(this)),this},x.compatAPI=function(b){var V=$===R;return V&&xe.call(this),typeof b!="function"||(b(this),V&&N.call(this)),this},x.isAdvancedAPI=function(){return $===R};var K,W=function(b){if($!==R)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},he=x.roundToPrecision=x.__private__.roundToPrecision=function(b,V){var ge=e||V;if(isNaN(b)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(ge).replace(/0+$/,"")};K=x.hpf=x.__private__.hpf=typeof f=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return he(b,f)}:f==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return he(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return he(b,16)};var z=x.f2=x.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return he(b,2)},E=x.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return he(b,3)},Q=x.scale=x.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return $===I?b*wt:$===R?b:void 0},X=function(b){return Q((function(V){return $===I?Ki()-V:$===R?V:void 0})(b))};x.__private__.setPrecision=x.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var ie,Ce="00000000000000000000000000000000",te=x.__private__.getFileId=function(){return Ce},ae=x.__private__.setFileId=function(b){return Ce=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():Ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Dt=new Fd(m.userPermissions,m.userPassword,m.ownerPassword,Ce)),Ce};x.setFileId=function(b){return ae(b),this},x.getFileId=function(){return te()};var Ne=x.__private__.convertDateToPDFDate=function(b){var V=b.getTimezoneOffset(),ge=V<0?"+":"-",ke=Math.floor(Math.abs(V/60)),Be=Math.abs(V%60),st=[ge,oe(ke),"'",oe(Be),"'"].join("");return["D:",b.getFullYear(),oe(b.getMonth()+1),oe(b.getDate()),oe(b.getHours()),oe(b.getMinutes()),oe(b.getSeconds()),st].join("")},Re=x.__private__.convertPDFDateToDate=function(b){var V=parseInt(b.substr(2,4),10),ge=parseInt(b.substr(6,2),10)-1,ke=parseInt(b.substr(8,2),10),Be=parseInt(b.substr(10,2),10),st=parseInt(b.substr(12,2),10),dt=parseInt(b.substr(14,2),10);return new Date(V,ge,ke,Be,st,dt,0)},ne=x.__private__.setCreationDate=function(b){var V;if(b===void 0&&(b=new Date),b instanceof Date)V=Ne(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=b}return ie=V},O=x.__private__.getCreationDate=function(b){var V=ie;return b==="jsDate"&&(V=Re(ie)),V};x.setCreationDate=function(b){return ne(b),this},x.getCreationDate=function(b){return O(b)};var L,oe=x.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},ve=x.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},ye=0,be=[],Le=[],Oe=0,ze=[],Ze=[],lt=!1,ut=Le;x.__private__.setCustomOutputDestination=function(b){lt=!0,ut=b};var _t=function(b){lt||(ut=b)};x.__private__.resetCustomOutputDestination=function(){lt=!1,ut=Le};var ue=x.__private__.out=function(b){return b=b.toString(),Oe+=b.length+1,ut.push(b),ut},xt=x.__private__.write=function(b){return ue(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},dn=x.__private__.getArrayBuffer=function(b){for(var V=b.length,ge=new ArrayBuffer(V),ke=new Uint8Array(ge);V--;)ke[V]=b.charCodeAt(V);return ge},Jt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Jt};var le=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(b){return le=$===R?b/wt:b,this};var J,q=x.__private__.getFontSize=x.getFontSize=function(){return $===I?le:le*wt},U=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(b){return U=b,this},x.__private__.getR2L=x.getR2L=function(){return U};var B,G=x.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))J=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');J=b}else J=parseInt(b,10)};x.__private__.getZoomMode=function(){return J};var fe,Pe=x.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');B=b};x.__private__.getPageMode=function(){return B};var _e=x.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');fe=b};x.__private__.getLayoutMode=function(){return fe},x.__private__.setDisplayMode=x.setDisplayMode=function(b,V,ge){return G(b),_e(V),Pe(ge),this};var Ie={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(b){if(Object.keys(Ie).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ie[b]},x.__private__.getDocumentProperties=function(){return Ie},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(b){for(var V in Ie)Ie.hasOwnProperty(V)&&b[V]&&(Ie[V]=b[V]);return this},x.__private__.setDocumentProperty=function(b,V){if(Object.keys(Ie).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ie[b]=V};var qe,wt,ft,En,Cn,mn={},gn={},bn=[],Ct={},rn={},Ke={},Ye={},it=null,on=0,ln=[],Zn=new m5(x),bs=t.hotfixes||[],_r={},ds={},Nr=[],Mt=function b(V,ge,ke,Be,st,dt){if(!(this instanceof b))return new b(V,ge,ke,Be,st,dt);isNaN(V)&&(V=1),isNaN(ge)&&(ge=0),isNaN(ke)&&(ke=0),isNaN(Be)&&(Be=1),isNaN(st)&&(st=0),isNaN(dt)&&(dt=0),this._matrix=[V,ge,ke,Be,st,dt]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(b)},Mt.prototype.multiply=function(b){var V=b.sx*this.sx+b.shy*this.shx,ge=b.sx*this.shy+b.shy*this.sy,ke=b.shx*this.sx+b.sy*this.shx,Be=b.shx*this.shy+b.sy*this.sy,st=b.tx*this.sx+b.ty*this.shx+this.tx,dt=b.tx*this.shy+b.ty*this.sy+this.ty;return new Mt(V,ge,ke,Be,st,dt)},Mt.prototype.decompose=function(){var b=this.sx,V=this.shy,ge=this.shx,ke=this.sy,Be=this.tx,st=this.ty,dt=Math.sqrt(b*b+V*V),Yt=(b/=dt)*ge+(V/=dt)*ke;ge-=b*Yt,ke-=V*Yt;var an=Math.sqrt(ge*ge+ke*ke);return Yt/=an,b*(ke/=an)<V*(ge/=an)&&(b=-b,V=-V,Yt=-Yt,dt=-dt),{scale:new Mt(dt,0,0,an,0,0),translate:new Mt(1,0,0,1,Be,st),rotate:new Mt(b,V,-V,b,0,0),skew:new Mt(1,0,Yt,1,0,0)}},Mt.prototype.toString=function(b){return this.join(" ")},Mt.prototype.inversed=function(){var b=this.sx,V=this.shy,ge=this.shx,ke=this.sy,Be=this.tx,st=this.ty,dt=1/(b*ke-V*ge),Yt=ke*dt,an=-V*dt,Rn=-ge*dt,In=b*dt;return new Mt(Yt,an,Rn,In,-Yt*Be-Rn*st,-an*Be-In*st)},Mt.prototype.applyToPoint=function(b){var V=b.x*this.sx+b.y*this.shx+this.tx,ge=b.x*this.shy+b.y*this.sy+this.ty;return new Ms(V,ge)},Mt.prototype.applyToRectangle=function(b){var V=this.applyToPoint(b),ge=this.applyToPoint(new Ms(b.x+b.w,b.y+b.h));return new Do(V.x,V.y,ge.x-V.x,ge.y-V.y)},Mt.prototype.clone=function(){var b=this.sx,V=this.shy,ge=this.shx,ke=this.sy,Be=this.tx,st=this.ty;return new Mt(b,V,ge,ke,Be,st)},x.Matrix=Mt;var vr=x.matrixMult=function(b,V){return V.multiply(b)},fs=new Mt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=fs;var hs=function(b,V){if(!rn[b]){var ge=(V instanceof Mu?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);V.id=ge,rn[b]=ge,Ct[ge]=V,Zn.publish("addPattern",V)}};x.ShadingPattern=Mu,x.TilingPattern=qd,x.addShadingPattern=function(b,V){return W("addShadingPattern()"),hs(b,V),this},x.beginTilingPattern=function(b){W("beginTilingPattern()"),Gi(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},x.endTilingPattern=function(b,V){W("endTilingPattern()"),V.stream=Ze[L].join(`
`),hs(b,V),Zn.publish("endTilingPattern",V),Nr.pop().restore()};var Ls,Sr=x.__private__.newObject=function(){var b=Ir();return Pr(b,!0),b},Ir=x.__private__.newObjectDeferred=function(){return ye++,be[ye]=function(){return Oe},ye},Pr=function(b,V){return V=typeof V=="boolean"&&V,be[b]=Oe,V&&ue(b+" 0 obj"),b},Di=x.__private__.newAdditionalObject=function(){var b={objId:Ir(),content:""};return ze.push(b),b},Ds=Ir(),ps=Ir(),Hr=x.__private__.decodeColorString=function(b){var V=b.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length!==5||V[4]!=="k"&&V[4]!=="K"||(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var ge=parseFloat(V[0]);V=[ge,ge,ge,"r"]}for(var ke="#",Be=0;Be<3;Be++)ke+=("0"+Math.floor(255*parseFloat(V[Be])).toString(16)).slice(-2);return ke},hr=x.__private__.encodeColorString=function(b){var V;typeof b=="string"&&(b={ch1:b});var ge=b.ch1,ke=b.ch2,Be=b.ch3,st=b.ch4,dt=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var Yt=new T4(ge);if(Yt.ok)ge=Yt.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var an=parseInt(ge.substr(1),16);ge=an>>16&255,ke=an>>8&255,Be=255&an}if(ke===void 0||st===void 0&&ge===ke&&ke===Be)V=typeof ge=="string"?ge+" "+dt[0]:b.precision===2?z(ge/255)+" "+dt[0]:E(ge/255)+" "+dt[0];else if(st===void 0||Yr(st)==="object"){if(st&&!isNaN(st.a)&&st.a===0)return["1.","1.","1.",dt[1]].join(" ");V=typeof ge=="string"?[ge,ke,Be,dt[1]].join(" "):b.precision===2?[z(ge/255),z(ke/255),z(Be/255),dt[1]].join(" "):[E(ge/255),E(ke/255),E(Be/255),dt[1]].join(" ")}else V=typeof ge=="string"?[ge,ke,Be,st,dt[2]].join(" "):b.precision===2?[z(ge),z(ke),z(Be),z(st),dt[2]].join(" "):[E(ge),E(ke),E(Be),E(st),dt[2]].join(" ");return V},Qs=x.__private__.getFilters=function(){return u},Rs=x.__private__.putStream=function(b){var V=(b=b||{}).data||"",ge=b.filters||Qs(),ke=b.alreadyAppliedFilters||[],Be=b.addLength1||!1,st=V.length,dt=b.objectId,Yt=function(yn){return yn};if(m!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Yt=Dt.encryptor(dt,0));var an={};ge===!0&&(ge=["FlateEncode"]);var Rn=b.additionalKeyValues||[],In=(an=un.API.processDataByFilters!==void 0?un.API.processDataByFilters(V,ge):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(an.data.length!==0&&(Rn.push({key:"Length",value:an.data.length}),Be===!0&&Rn.push({key:"Length1",value:st})),In.length!=0)if(In.split("/").length-1==1)Rn.push({key:"Filter",value:In});else{Rn.push({key:"Filter",value:"["+In+"]"});for(var yr=0;yr<Rn.length;yr+=1)if(Rn[yr].key==="DecodeParms"){for(var Et=[],wn=0;wn<an.reverseChain.split("/").length-1;wn+=1)Et.push("null");Et.push(Rn[yr].value),Rn[yr].value="["+Et.join(" ")+"]"}}ue("<<");for(var Vt=0;Vt<Rn.length;Vt++)ue("/"+Rn[Vt].key+" "+Rn[Vt].value);ue(">>"),an.data.length!==0&&(ue("stream"),ue(Yt(an.data)),ue("endstream"))},Ri=x.__private__.putPage=function(b){var V=b.number,ge=b.data,ke=b.objId,Be=b.contentsObjId;Pr(ke,!0),ue("<</Type /Page"),ue("/Parent "+b.rootDictionaryObjId+" 0 R"),ue("/Resources "+b.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(K(b.mediaBox.bottomLeftX))+" "+parseFloat(K(b.mediaBox.bottomLeftY))+" "+K(b.mediaBox.topRightX)+" "+K(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&ue("/CropBox ["+K(b.cropBox.bottomLeftX)+" "+K(b.cropBox.bottomLeftY)+" "+K(b.cropBox.topRightX)+" "+K(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&ue("/BleedBox ["+K(b.bleedBox.bottomLeftX)+" "+K(b.bleedBox.bottomLeftY)+" "+K(b.bleedBox.topRightX)+" "+K(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&ue("/TrimBox ["+K(b.trimBox.bottomLeftX)+" "+K(b.trimBox.bottomLeftY)+" "+K(b.trimBox.topRightX)+" "+K(b.trimBox.topRightY)+"]"),b.artBox!==null&&ue("/ArtBox ["+K(b.artBox.bottomLeftX)+" "+K(b.artBox.bottomLeftY)+" "+K(b.artBox.topRightX)+" "+K(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&ue("/UserUnit "+b.userUnit),Zn.publish("putPage",{objId:ke,pageContext:ln[V],pageNumber:V,page:ge}),ue("/Contents "+Be+" 0 R"),ue(">>"),ue("endobj");var st=ge.join(`
`);return $===R&&(st+=`
Q`),Pr(Be,!0),Rs({data:st,filters:Qs(),objectId:Be}),ue("endobj"),ke},ws=x.__private__.putPages=function(){var b,V,ge=[];for(b=1;b<=on;b++)ln[b].objId=Ir(),ln[b].contentsObjId=Ir();for(b=1;b<=on;b++)ge.push(Ri({number:b,data:Ze[b],objId:ln[b].objId,contentsObjId:ln[b].contentsObjId,mediaBox:ln[b].mediaBox,cropBox:ln[b].cropBox,bleedBox:ln[b].bleedBox,trimBox:ln[b].trimBox,artBox:ln[b].artBox,userUnit:ln[b].userUnit,rootDictionaryObjId:Ds,resourceDictionaryObjId:ps}));Pr(Ds,!0),ue("<</Type /Pages");var ke="/Kids [";for(V=0;V<on;V++)ke+=ge[V]+" 0 R ";ue(ke+"]"),ue("/Count "+on),ue(">>"),ue("endobj"),Zn.publish("postPutPages")},Is=function(b){Zn.publish("putFont",{font:b,out:ue,newObject:Sr,putStream:Rs}),b.isAlreadyPutted!==!0&&(b.objectNumber=Sr(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Od(b.postScriptName)),ue("/Subtype /Type1"),typeof b.encoding=="string"&&ue("/Encoding /"+b.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},kr=function(b){b.objectNumber=Sr();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[K(b.x),K(b.y),K(b.x+b.width),K(b.y+b.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var ge=b.pages[1].join(`
`);Rs({data:ge,additionalKeyValues:V,objectId:b.objectNumber}),ue("endobj")},Ns=function(b,V){V||(V=21);var ge=Sr(),ke=(function(dt,Yt){var an,Rn=[],In=1/(Yt-1);for(an=0;an<1;an+=In)Rn.push(an);if(Rn.push(1),dt[0].offset!=0){var yr={offset:0,color:dt[0].color};dt.unshift(yr)}if(dt[dt.length-1].offset!=1){var Et={offset:1,color:dt[dt.length-1].color};dt.push(Et)}for(var wn="",Vt=0,yn=0;yn<Rn.length;yn++){for(an=Rn[yn];an>dt[Vt+1].offset;)Vt++;var zn=dt[Vt].offset,jr=(an-zn)/(dt[Vt+1].offset-zn),Ss=dt[Vt].color,es=dt[Vt+1].color;wn+=ve(Math.round((1-jr)*Ss[0]+jr*es[0]).toString(16))+ve(Math.round((1-jr)*Ss[1]+jr*es[1]).toString(16))+ve(Math.round((1-jr)*Ss[2]+jr*es[2]).toString(16))}return wn.trim()})(b.colors,V),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+V+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rs({data:ke,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),ue("endobj"),b.objectNumber=Sr(),ue("<< /ShadingType "+b.type),ue("/ColorSpace /DeviceRGB");var st="/Coords ["+K(parseFloat(b.coords[0]))+" "+K(parseFloat(b.coords[1]))+" ";b.type===2?st+=K(parseFloat(b.coords[2]))+" "+K(parseFloat(b.coords[3])):st+=K(parseFloat(b.coords[2]))+" "+K(parseFloat(b.coords[3]))+" "+K(parseFloat(b.coords[4]))+" "+K(parseFloat(b.coords[5])),ue(st+="]"),b.matrix&&ue("/Matrix ["+b.matrix.toString()+"]"),ue("/Function "+ge+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},Ci=function(b,V){var ge=Ir(),ke=Sr();V.push({resourcesOid:ge,objectOid:ke}),b.objectNumber=ke;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+b.boundingBox.map(K).join(" ")+"]"}),Be.push({key:"XStep",value:K(b.xStep)}),Be.push({key:"YStep",value:K(b.yStep)}),Be.push({key:"Resources",value:ge+" 0 R"}),b.matrix&&Be.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Rs({data:b.stream,additionalKeyValues:Be,objectId:b.objectNumber}),ue("endobj")},Ga=function(b){for(var V in b.objectNumber=Sr(),ue("<<"),b)switch(V){case"opacity":ue("/ca "+z(b[V]));break;case"stroke-opacity":ue("/CA "+z(b[V]))}ue(">>"),ue("endobj")},wr=function(b){Pr(b.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var V in ue("/Font <<"),mn)mn.hasOwnProperty(V)&&(y===!1||y===!0&&j.hasOwnProperty(V))&&ue("/"+V+" "+mn[V].objectNumber+" 0 R");ue(">>")})(),(function(){if(Object.keys(Ct).length>0){for(var V in ue("/Shading <<"),Ct)Ct.hasOwnProperty(V)&&Ct[V]instanceof Mu&&Ct[V].objectNumber>=0&&ue("/"+V+" "+Ct[V].objectNumber+" 0 R");Zn.publish("putShadingPatternDict"),ue(">>")}})(),(function(V){if(Object.keys(Ct).length>0){for(var ge in ue("/Pattern <<"),Ct)Ct.hasOwnProperty(ge)&&Ct[ge]instanceof x.TilingPattern&&Ct[ge].objectNumber>=0&&Ct[ge].objectNumber<V&&ue("/"+ge+" "+Ct[ge].objectNumber+" 0 R");Zn.publish("putTilingPatternDict"),ue(">>")}})(b.objectOid),(function(){if(Object.keys(Ke).length>0){var V;for(V in ue("/ExtGState <<"),Ke)Ke.hasOwnProperty(V)&&Ke[V].objectNumber>=0&&ue("/"+V+" "+Ke[V].objectNumber+" 0 R");Zn.publish("putGStateDict"),ue(">>")}})(),(function(){for(var V in ue("/XObject <<"),_r)_r.hasOwnProperty(V)&&_r[V].objectNumber>=0&&ue("/"+V+" "+_r[V].objectNumber+" 0 R");Zn.publish("putXobjectDict"),ue(">>")})(),ue(">>"),ue("endobj")},Ai=function(b){gn[b.fontName]=gn[b.fontName]||{},gn[b.fontName][b.fontStyle]=b.id},is=function(b,V,ge,ke,Be){var st={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:b,fontName:V,fontStyle:ge,encoding:ke,isStandardFont:Be||!1,metadata:{}};return Zn.publish("addFont",{font:st,instance:this}),mn[st.id]=st,Ai(st),st.id},Xr=x.__private__.pdfEscape=x.pdfEscape=function(b,V){return(function(ge,ke){var Be,st,dt,Yt,an,Rn,In,yr,Et;if(dt=(ke=ke||{}).sourceEncoding||"Unicode",an=ke.outputEncoding,(ke.autoencode||an)&&mn[qe].metadata&&mn[qe].metadata[dt]&&mn[qe].metadata[dt].encoding&&(Yt=mn[qe].metadata[dt].encoding,!an&&mn[qe].encoding&&(an=mn[qe].encoding),!an&&Yt.codePages&&(an=Yt.codePages[0]),typeof an=="string"&&(an=Yt[an]),an)){for(In=!1,Rn=[],Be=0,st=ge.length;Be<st;Be++)(yr=an[ge.charCodeAt(Be)])?Rn.push(String.fromCharCode(yr)):Rn.push(ge[Be]),Rn[Be].charCodeAt(0)>>8&&(In=!0);ge=Rn.join("")}for(Be=ge.length;In===void 0&&Be!==0;)ge.charCodeAt(Be-1)>>8&&(In=!0),Be--;if(!In)return ge;for(Rn=ke.noBOM?[]:[254,255],Be=0,st=ge.length;Be<st;Be++){if((Et=(yr=ge.charCodeAt(Be))>>8)>>8)throw new Error("Character at position "+Be+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rn.push(Et),Rn.push(yr-(Et<<8))}return String.fromCharCode.apply(void 0,Rn)})(b,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sn=x.__private__.beginPage=function(b){Ze[++on]=[],ln[on]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},Zt(on),_t(Ze[L])},pr=function(b,V){var ge,ke,Be;switch(n=V||n,typeof b=="string"&&(ge=A(b.toLowerCase()),Array.isArray(ge)&&(ke=ge[0],Be=ge[1])),Array.isArray(b)&&(ke=b[0]*wt,Be=b[1]*wt),isNaN(ke)&&(ke=a[0],Be=a[1]),(ke>14400||Be>14400)&&(ns.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Be=Math.min(14400,Be)),a=[ke,Be],n.substr(0,1)){case"l":Be>ke&&(a=[Be,ke]);break;case"p":ke>Be&&(a=[Be,ke])}sn(a),Ot(Vn),ue(er),Wr!==0&&ue(Wr+" J"),Os!==0&&ue(Os+" j"),Zn.publish("addPage",{pageNumber:on})},Ln=function(b){b>0&&b<=on&&(Ze.splice(b,1),ln.splice(b,1),on--,L>on&&(L=on),this.setPage(L))},Zt=function(b){b>0&&b<=on&&(L=b)},On=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ze.length-1},yt=function(b,V,ge){var ke,Be=void 0;return ge=ge||{},b=b!==void 0?b:mn[qe].fontName,V=V!==void 0?V:mn[qe].fontStyle,ke=b.toLowerCase(),gn[ke]!==void 0&&gn[ke][V]!==void 0?Be=gn[ke][V]:gn[b]!==void 0&&gn[b][V]!==void 0?Be=gn[b][V]:ge.disableWarning===!1&&ns.warn("Unable to look up font label for font '"+b+"', '"+V+"'. Refer to getFontList() for available fonts."),Be||ge.noFallback||(Be=gn.times[V])==null&&(Be=gn.times.normal),Be},Xe=x.__private__.putInfo=function(){var b=Sr(),V=function(ke){return ke};for(var ge in m!==null&&(V=Dt.encryptor(b,0)),ue("<<"),ue("/Producer ("+Xr(V("jsPDF "+un.version))+")"),Ie)Ie.hasOwnProperty(ge)&&Ie[ge]&&ue("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Xr(V(Ie[ge]))+")");ue("/CreationDate ("+Xr(V(ie))+")"),ue(">>"),ue("endobj")},ot=x.__private__.putCatalog=function(b){var V=(b=b||{}).rootDictionaryObjId||Ds;switch(Sr(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+V+" 0 R"),J||(J="fullwidth"),J){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+J;ge.substr(ge.length-1)==="%"&&(J=parseInt(J)/100),typeof J=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+z(J)+"]")}switch(fe||(fe="continuous"),fe){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}B&&ue("/PageMode /"+B),Zn.publish("putCatalog"),ue(">>"),ue("endobj")},nt=x.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(ye+1)),ue("/Root "+ye+" 0 R"),ue("/Info "+(ye-1)+" 0 R"),m!==null&&ue("/Encrypt "+Dt.oid+" 0 R"),ue("/ID [ <"+Ce+"> <"+Ce+"> ]"),ue(">>")},Ge=x.__private__.putHeader=function(){ue("%PDF-"+D),ue("%")},gt=x.__private__.putXRef=function(){var b="0000000000";ue("xref"),ue("0 "+(ye+1)),ue("0000000000 65535 f ");for(var V=1;V<=ye;V++)typeof be[V]=="function"?ue((b+be[V]()).slice(-10)+" 00000 n "):be[V]!==void 0?ue((b+be[V]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},jt=x.__private__.buildDocument=function(){var b;ye=0,Oe=0,Le=[],be=[],ze=[],Ds=Ir(),ps=Ir(),_t(Le),Zn.publish("buildDocument"),Ge(),ws(),(function(){Zn.publish("putAdditionalObjects");for(var ge=0;ge<ze.length;ge++){var ke=ze[ge];Pr(ke.objId,!0),ue(ke.content),ue("endobj")}Zn.publish("postPutAdditionalObjects")})(),b=[],(function(){for(var ge in mn)mn.hasOwnProperty(ge)&&(y===!1||y===!0&&j.hasOwnProperty(ge))&&Is(mn[ge])})(),(function(){var ge;for(ge in Ke)Ke.hasOwnProperty(ge)&&Ga(Ke[ge])})(),(function(){for(var ge in _r)_r.hasOwnProperty(ge)&&kr(_r[ge])})(),(function(ge){var ke;for(ke in Ct)Ct.hasOwnProperty(ke)&&(Ct[ke]instanceof Mu?Ns(Ct[ke]):Ct[ke]instanceof qd&&Ci(Ct[ke],ge))})(b),Zn.publish("putResources"),b.forEach(wr),wr({resourcesOid:ps,objectOid:Number.MAX_SAFE_INTEGER}),Zn.publish("postPutResources"),m!==null&&(Dt.oid=Sr(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Dt.v),ue("/R "+Dt.r),ue("/U <"+Dt.toHexString(Dt.U)+">"),ue("/O <"+Dt.toHexString(Dt.O)+">"),ue("/P "+Dt.P),ue(">>"),ue("endobj")),Xe(),ot();var V=Oe;return gt(),nt(),ue("startxref"),ue(""+V),ue("%%EOF"),_t(Ze[L]),Le.join(`
`)},Tt=x.__private__.getBlob=function(b){return new Blob([dn(b)],{type:"application/pdf"})},Rt=x.output=x.__private__.output=(Ls=function(b,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",b){case void 0:return jt();case"save":x.save(V.filename);break;case"arraybuffer":return dn(jt());case"blob":return Tt(jt());case"bloburi":case"bloburl":if(Wn.URL!==void 0&&typeof Wn.URL.createObjectURL=="function")return Wn.URL&&Wn.URL.createObjectURL(Tt(jt()))||void 0;ns.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",ke=jt();try{ge=f5(ke)}catch{ge=f5(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+V.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",st=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Be=V.pdfObjectUrl,st="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+st+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",Yt=Wn.open();return Yt!==null&&Yt.document.write(dt),Yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Rn=Wn.open();if(Rn!==null){Rn.document.write(an);var In=this;Rn.document.documentElement.querySelector("#pdfViewer").onload=function(){Rn.document.title=V.filename,Rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(In.output("bloburl"))}}return Rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',Et=Wn.open();if(Et!==null&&(Et.document.write(yr),Et.document.title=V.filename),Et||typeof safari>"u")return Et;break;case"datauri":case"dataurl":return Wn.document.location.href=this.output("datauristring",V);default:return null}},Ls.foo=function(){try{return Ls.apply(this,arguments)}catch(ge){var b=ge.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var V="Error in function "+b.split(`
`)[0].split("<")[0]+": "+ge.message;if(!Wn.console)throw new Error(V);Wn.console.error(V,ge),Wn.alert&&alert(V)}},Ls.foo.bar=Ls,Ls.foo),It=function(b){return Array.isArray(bs)===!0&&bs.indexOf(b)>-1};switch(r){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=It("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);wt=r}var Dt=null;ne(),ae();var Lt=x.__private__.getPageInfo=x.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ln[b].objId,pageNumber:b,pageContext:ln[b]}},Ft=x.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in ln)if(ln[V].objId===b)break;return Lt(V)},qt=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:ln[L].objId,pageNumber:L,pageContext:ln[L]}};x.addPage=function(){return pr.apply(this,arguments),this},x.setPage=function(){return Zt.apply(this,arguments),_t.call(this,Ze[L]),this},x.insertPage=function(b){return this.addPage(),this.movePage(L,b),this},x.movePage=function(b,V){var ge,ke;if(b>V){ge=Ze[b],ke=ln[b];for(var Be=b;Be>V;Be--)Ze[Be]=Ze[Be-1],ln[Be]=ln[Be-1];Ze[V]=ge,ln[V]=ke,this.setPage(V)}else if(b<V){ge=Ze[b],ke=ln[b];for(var st=b;st<V;st++)Ze[st]=Ze[st+1],ln[st]=ln[st+1];Ze[V]=ge,ln[V]=ke,this.setPage(V)}return this},x.deletePage=function(){return Ln.apply(this,arguments),this},x.__private__.text=x.text=function(b,V,ge,ke,Be){var st,dt,Yt,an,Rn,In,yr,Et,wn,Vt=(ke=ke||{}).scope||this;if(typeof b=="number"&&typeof V=="number"&&(typeof ge=="string"||Array.isArray(ge))){var yn=ge;ge=V,V=b,b=yn}if(arguments[3]instanceof Mt==0?(Yt=arguments[4],an=arguments[5],Yr(yr=arguments[3])==="object"&&yr!==null||(typeof Yt=="string"&&(an=Yt,Yt=null),typeof yr=="string"&&(an=yr,yr=null),typeof yr=="number"&&(Yt=yr,yr=null),ke={flags:yr,angle:Yt,align:an})):(W("The transform parameter of text() with a Matrix value"),wn=Be),isNaN(V)||isNaN(ge)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return Vt;var zn,jr="",Ss=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:At,es=Vt.internal.scaleFactor;function js(Tr){return Tr=Tr.split("	").join(Array(ke.TabLen||9).join(" ")),Xr(Tr,yr)}function Cs(Tr){for(var qr,_s=Tr.concat(),Zs=[],eo=_s.length;eo--;)typeof(qr=_s.shift())=="string"?Zs.push(qr):Array.isArray(Tr)&&(qr.length===1||qr[1]===void 0&&qr[2]===void 0)?Zs.push(qr[0]):Zs.push([qr[0],qr[1],qr[2]]);return Zs}function _i(Tr,qr){var _s;if(typeof Tr=="string")_s=qr(Tr)[0];else if(Array.isArray(Tr)){for(var Zs,eo,xu=Tr.concat(),Cc=[],zo=xu.length;zo--;)typeof(Zs=xu.shift())=="string"?Cc.push(qr(Zs)[0]):Array.isArray(Zs)&&typeof Zs[0]=="string"&&(eo=qr(Zs[0],Zs[1],Zs[2]),Cc.push([eo[0],eo[1],eo[2]]));_s=Cc}return _s}var Qi=!1,yi=!0;if(typeof b=="string")Qi=!0;else if(Array.isArray(b)){var Wt=b.concat();dt=[];for(var Fi,gs=Wt.length;gs--;)(typeof(Fi=Wt.shift())!="string"||Array.isArray(Fi)&&typeof Fi[0]!="string")&&(yi=!1);Qi=yi}if(Qi===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Fo=le/Vt.internal.scaleFactor,Oo=Fo*(Ss-1);switch(ke.baseline){case"bottom":ge-=Oo;break;case"top":ge+=Fo-Oo;break;case"hanging":ge+=Fo-2*Oo;break;case"middle":ge+=Fo/2-Oo}if((In=ke.maxWidth||0)>0&&(typeof b=="string"?b=Vt.splitTextToSize(b,In):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(Tr,qr){return Tr.concat(Vt.splitTextToSize(qr,In))},[]))),st={text:b,x:V,y:ge,options:ke,mutex:{pdfEscape:Xr,activeFontKey:qe,fonts:mn,activeFontSize:le}},Zn.publish("preProcessText",st),b=st.text,Yt=(ke=st.options).angle,wn instanceof Mt==0&&Yt&&typeof Yt=="number"){Yt*=Math.PI/180,ke.rotationDirection===0&&(Yt=-Yt),$===R&&(Yt=-Yt);var gu=Math.cos(Yt),vu=Math.sin(Yt);wn=new Mt(gu,vu,-vu,gu,0,0)}else Yt&&Yt instanceof Mt&&(wn=Yt);$!==R||wn||(wn=fs),(Rn=ke.charSpace||vi)!==void 0&&(jr+=K(Q(Rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Et=ke.horizontalScale)!==void 0&&(jr+=K(100*Et)+` Tz
`),ke.lang;var Zi=-1,Xa=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,xo=Vt.internal.getCurrentPageInfo().pageContext;switch(Xa){case 0:case!1:case"fill":Zi=0;break;case 1:case!0:case"stroke":Zi=1;break;case 2:case"fillThenStroke":Zi=2;break;case 3:case"invisible":Zi=3;break;case 4:case"fillAndAddForClipping":Zi=4;break;case 5:case"strokeAndAddPathForClipping":Zi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Zi=6;break;case 7:case"addToPathForClipping":Zi=7}var sd=xo.usedRenderingMode!==void 0?xo.usedRenderingMode:-1;Zi!==-1?jr+=Zi+` Tr
`:sd!==-1&&(jr+=`0 Tr
`),Zi!==-1&&(xo.usedRenderingMode=Zi),an=ke.align||"left";var wa,xl=le*Ss,wc=Vt.internal.pageSize.getWidth(),Nc=mn[qe];Rn=ke.charSpace||vi,In=ke.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var Mo=[],Ia=function(Tr){return Vt.getStringUnitWidth(Tr,{font:Nc,charSpace:Rn,fontSize:le,doKerning:!1})*le/es};if(Object.prototype.toString.call(b)==="[object Array]"){var Na;dt=Cs(b),an!=="left"&&(wa=dt.map(Ia));var Sa,yl=0;if(an==="right"){V-=wa[0],b=[],gs=dt.length;for(var yo=0;yo<gs;yo++)yo===0?(Sa=Fs(V),Na=ra(ge)):(Sa=Q(yl-wa[yo]),Na=-xl),b.push([dt[yo],Sa,Na]),yl=wa[yo]}else if(an==="center"){V-=wa[0]/2,b=[],gs=dt.length;for(var Bo=0;Bo<gs;Bo++)Bo===0?(Sa=Fs(V),Na=ra(ge)):(Sa=Q((yl-wa[Bo])/2),Na=-xl),b.push([dt[Bo],Sa,Na]),yl=wa[Bo]}else if(an==="left"){b=[],gs=dt.length;for(var qo=0;qo<gs;qo++)b.push(dt[qo])}else if(an==="justify"&&Nc.encoding==="Identity-H"){b=[],gs=dt.length,In=In!==0?In:wc;for(var bo=0,qs=0;qs<gs;qs++)if(Na=qs===0?ra(ge):-xl,Sa=qs===0?Fs(V):bo,qs<gs-1){var Wl=Q((In-wa[qs])/(dt[qs].split(" ").length-1)),wo=dt[qs].split(" ");b.push([wo[0]+" ",Sa,Na]),bo=0;for(var Ja=1;Ja<wo.length;Ja++){var Gl=(Ia(wo[Ja-1]+" "+wo[Ja])-Ia(wo[Ja]))*es+Wl;Ja==wo.length-1?b.push([wo[Ja],Gl,0]):b.push([wo[Ja]+" ",Gl,0]),bo-=Gl}}else b.push([dt[qs],Sa,Na]);b.push(["",bo,0])}else{if(an!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],gs=dt.length,In=In!==0?In:wc,qs=0;qs<gs;qs++){Na=qs===0?ra(ge):-xl,Sa=qs===0?Fs(V):0;var Kl=dt[qs].split(" ").length-1,Sc=Kl>0?(In-wa[qs])/Kl:0;qs<gs-1?Mo.push(K(Q(Sc))):Mo.push(0),b.push([dt[qs],Sa,Na])}}}(typeof ke.R2L=="boolean"?ke.R2L:U)===!0&&(b=_i(b,function(Tr,qr,_s){return[Tr.split("").reverse().join(""),qr,_s]})),st={text:b,x:V,y:ge,options:ke,mutex:{pdfEscape:Xr,activeFontKey:qe,fonts:mn,activeFontSize:le}},Zn.publish("postProcessText",st),b=st.text,zn=st.mutex.isHex||!1;var jc=mn[qe].encoding;jc!=="WinAnsiEncoding"&&jc!=="StandardEncoding"||(b=_i(b,function(Tr,qr,_s){return[js(Tr),qr,_s]})),dt=Cs(b),b=[];for(var Uo,bl,wl,Ql=Array.isArray(dt[0])?1:0,Nl="",Zl=function(Tr,qr,_s){var Zs="";return _s instanceof Mt?(_s=typeof ke.angle=="number"?vr(_s,new Mt(1,0,0,1,Tr,qr)):vr(new Mt(1,0,0,1,Tr,qr),_s),$===R&&(_s=vr(new Mt(1,0,0,-1,0,0),_s)),Zs=_s.join(" ")+` Tm
`):Zs=K(Tr)+" "+K(qr)+` Td
`,Zs},As=0;As<dt.length;As++){switch(Nl="",Ql){case 1:wl=(zn?"<":"(")+dt[As][0]+(zn?">":")"),Uo=parseFloat(dt[As][1]),bl=parseFloat(dt[As][2]);break;case 0:wl=(zn?"<":"(")+dt[As]+(zn?">":")"),Uo=Fs(V),bl=ra(ge)}Mo!==void 0&&Mo[As]!==void 0&&(Nl=Mo[As]+` Tw
`),As===0?b.push(Nl+Zl(Uo,bl,wn)+wl):Ql===0?b.push(Nl+wl):Ql===1&&b.push(Nl+Zl(Uo,bl,wn)+wl)}b=Ql===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var sa=`BT
/`;return sa+=qe+" "+le+` Tf
`,sa+=K(le*Ss)+` TL
`,sa+=Wi+`
`,sa+=jr,sa+=b,ue(sa+="ET"),j[qe]=!0,Vt};var vn=x.__private__.clip=x.clip=function(b){return ue(b==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return vn("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ue("n"),this};var xr=x.__private__.isValidStyle=function(b){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(V=!0),V};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(b){return xr(b)&&(p=b),this};var Un=x.__private__.getStyle=x.getStyle=function(b){var V=p;switch(b){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=b}return V},zt=x.close=function(){return ue("h"),this};x.stroke=function(){return ue("S"),this},x.fill=function(b){return An("f",b),this},x.fillEvenOdd=function(b){return An("f*",b),this},x.fillStroke=function(b){return An("B",b),this},x.fillStrokeEvenOdd=function(b){return An("B*",b),this};var An=function(b,V){Yr(V)==="object"?Dn(V,b):ue(b)},xn=function(b){b===null||$===R&&b===void 0||(b=Un(b),ue(b))};function dr(b,V,ge,ke,Be){var st=new qd(V||this.boundingBox,ge||this.xStep,ke||this.yStep,this.gState,Be||this.matrix);st.stream=this.stream;var dt=b+"$$"+this.cloneIndex+++"$$";return hs(dt,st),st}var Dn=function(b,V){var ge=rn[b.key],ke=Ct[ge];if(ke instanceof Mu)ue("q"),ue(F(V)),ke.gState&&x.setGState(ke.gState),ue(b.matrix.toString()+" cm"),ue("/"+ge+" sh"),ue("Q");else if(ke instanceof qd){var Be=new Mt(1,0,0,-1,0,Ki());b.matrix&&(Be=Be.multiply(b.matrix||fs),ge=dr.call(ke,b.key,b.boundingBox,b.xStep,b.yStep,Be).id),ue("q"),ue("/Pattern cs"),ue("/"+ge+" scn"),ke.gState&&x.setGState(ke.gState),ue(V),ue("Q")}},F=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},de=x.moveTo=function(b,V){return ue(K(Q(b))+" "+K(X(V))+" m"),this},we=x.lineTo=function(b,V){return ue(K(Q(b))+" "+K(X(V))+" l"),this},Ae=x.curveTo=function(b,V,ge,ke,Be,st){return ue([K(Q(b)),K(X(V)),K(Q(ge)),K(X(ke)),K(Q(Be)),K(X(st)),"c"].join(" ")),this};x.__private__.line=x.line=function(b,V,ge,ke,Be){if(isNaN(b)||isNaN(V)||isNaN(ge)||isNaN(ke)||!xr(Be))throw new Error("Invalid arguments passed to jsPDF.line");return $===I?this.lines([[ge-b,ke-V]],b,V,[1,1],Be||"S"):this.lines([[ge-b,ke-V]],b,V,[1,1]).stroke()},x.__private__.lines=x.lines=function(b,V,ge,ke,Be,st){var dt,Yt,an,Rn,In,yr,Et,wn,Vt,yn,zn,jr;if(typeof b=="number"&&(jr=ge,ge=V,V=b,b=jr),ke=ke||[1,1],st=st||!1,isNaN(V)||isNaN(ge)||!Array.isArray(b)||!Array.isArray(ke)||!xr(Be)||typeof st!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(de(V,ge),dt=ke[0],Yt=ke[1],Rn=b.length,yn=V,zn=ge,an=0;an<Rn;an++)(In=b[an]).length===2?(yn=In[0]*dt+yn,zn=In[1]*Yt+zn,we(yn,zn)):(yr=In[0]*dt+yn,Et=In[1]*Yt+zn,wn=In[2]*dt+yn,Vt=In[3]*Yt+zn,yn=In[4]*dt+yn,zn=In[5]*Yt+zn,Ae(yr,Et,wn,Vt,yn,zn));return st&&zt(),xn(Be),this},x.path=function(b){for(var V=0;V<b.length;V++){var ge=b[V],ke=ge.c;switch(ge.op){case"m":de(ke[0],ke[1]);break;case"l":we(ke[0],ke[1]);break;case"c":Ae.apply(this,ke);break;case"h":zt()}}return this},x.__private__.rect=x.rect=function(b,V,ge,ke,Be){if(isNaN(b)||isNaN(V)||isNaN(ge)||isNaN(ke)||!xr(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return $===I&&(ke=-ke),ue([K(Q(b)),K(X(V)),K(Q(ge)),K(Q(ke)),"re"].join(" ")),xn(Be),this},x.__private__.triangle=x.triangle=function(b,V,ge,ke,Be,st,dt){if(isNaN(b)||isNaN(V)||isNaN(ge)||isNaN(ke)||isNaN(Be)||isNaN(st)||!xr(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-b,ke-V],[Be-ge,st-ke],[b-Be,V-st]],b,V,[1,1],dt,!0),this},x.__private__.roundedRect=x.roundedRect=function(b,V,ge,ke,Be,st,dt){if(isNaN(b)||isNaN(V)||isNaN(ge)||isNaN(ke)||isNaN(Be)||isNaN(st)||!xr(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yt=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*ge),st=Math.min(st,.5*ke),this.lines([[ge-2*Be,0],[Be*Yt,0,Be,st-st*Yt,Be,st],[0,ke-2*st],[0,st*Yt,-Be*Yt,st,-Be,st],[2*Be-ge,0],[-Be*Yt,0,-Be,-st*Yt,-Be,-st],[0,2*st-ke],[0,-st*Yt,Be*Yt,-st,Be,-st]],b+Be,V,[1,1],dt,!0),this},x.__private__.ellipse=x.ellipse=function(b,V,ge,ke,Be){if(isNaN(b)||isNaN(V)||isNaN(ge)||isNaN(ke)||!xr(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var st=4/3*(Math.SQRT2-1)*ge,dt=4/3*(Math.SQRT2-1)*ke;return de(b+ge,V),Ae(b+ge,V-dt,b+st,V-ke,b,V-ke),Ae(b-st,V-ke,b-ge,V-dt,b-ge,V),Ae(b-ge,V+dt,b-st,V+ke,b,V+ke),Ae(b+st,V+ke,b+ge,V+dt,b+ge,V),xn(Be),this},x.__private__.circle=x.circle=function(b,V,ge,ke){if(isNaN(b)||isNaN(V)||isNaN(ge)||!xr(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,V,ge,ge,ke)},x.setFont=function(b,V,ge){return ge&&(V=re(V,ge)),qe=yt(b,V,{disableWarning:!1}),this};var Se=x.__private__.getFont=x.getFont=function(){return mn[yt.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var b,V,ge={};for(b in gn)if(gn.hasOwnProperty(b))for(V in ge[b]=[],gn[b])gn[b].hasOwnProperty(V)&&ge[b].push(V);return ge},x.addFont=function(b,V,ge,ke,Be){var st=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&st.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&st.indexOf(arguments[3])==-1&&(ge=re(ge,ke)),is.call(this,b,V,ge,Be=Be||"Identity-H")};var At,Vn=t.lineWidth||.200025,$t=x.__private__.getLineWidth=x.getLineWidth=function(){return Vn},Ot=x.__private__.setLineWidth=x.setLineWidth=function(b){return Vn=b,ue(K(Q(b))+" w"),this};x.__private__.setLineDash=un.API.setLineDash=un.API.setLineDashPattern=function(b,V){if(b=b||[],V=V||0,isNaN(V)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(ge){return K(Q(ge))}).join(" "),V=K(Q(V)),ue("["+b+"] "+V+" d"),this};var as=x.__private__.getLineHeight=x.getLineHeight=function(){return le*At};x.__private__.getLineHeight=x.getLineHeight=function(){return le*At};var Ka=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(At=b),this},Qa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return At};Ka(t.lineHeight);var Fs=x.__private__.getHorizontalCoordinate=function(b){return Q(b)},ra=x.__private__.getVerticalCoordinate=function(b){return $===R?b:ln[L].mediaBox.topRightY-ln[L].mediaBox.bottomLeftY-Q(b)},vl=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(b){return K(Fs(b))},bt=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(b){return K(ra(b))},er=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Hr(er)},x.__private__.setStrokeColor=x.setDrawColor=function(b,V,ge,ke){return er=hr({ch1:b,ch2:V,ch3:ge,ch4:ke,pdfColorType:"draw",precision:2}),ue(er),this};var Lo=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Hr(Lo)},x.__private__.setFillColor=x.setFillColor=function(b,V,ge,ke){return Lo=hr({ch1:b,ch2:V,ch3:ge,ch4:ke,pdfColorType:"fill",precision:2}),ue(Lo),this};var Wi=t.textColor||"0 g",Za=x.__private__.getTextColor=x.getTextColor=function(){return Hr(Wi)};x.__private__.setTextColor=x.setTextColor=function(b,V,ge,ke){return Wi=hr({ch1:b,ch2:V,ch3:ge,ch4:ke,pdfColorType:"text",precision:3}),this};var vi=t.charSpace,ba=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(vi||0)};x.__private__.setCharSpace=x.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vi=b,this};var Wr=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(b){var V=x.CapJoinStyles[b];if(V===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wr=V,ue(V+" J"),this};var Os=0;x.__private__.setLineJoin=x.setLineJoin=function(b){var V=x.CapJoinStyles[b];if(V===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Os=V,ue(V+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(K(Q(b))+" M"),this},x.GState=Fm,x.setGState=function(b){(b=typeof b=="string"?Ke[Ye[b]]:Ii(null,b)).equals(it)||(ue("/"+b.id+" gs"),it=b)};var Ii=function(b,V){if(!b||!Ye[b]){var ge=!1;for(var ke in Ke)if(Ke.hasOwnProperty(ke)&&Ke[ke].equals(V)){ge=!0;break}if(ge)V=Ke[ke];else{var Be="GS"+(Object.keys(Ke).length+1).toString(10);Ke[Be]=V,V.id=Be}return b&&(Ye[b]=V.id),Zn.publish("addGState",V),V}};x.addGState=function(b,V){return Ii(b,V),this},x.saveGraphicsState=function(){return ue("q"),bn.push({key:qe,size:le,color:Wi}),this},x.restoreGraphicsState=function(){ue("Q");var b=bn.pop();return qe=b.key,le=b.size,Wi=b.color,it=null,this},x.setCurrentTransformationMatrix=function(b){return ue(b.toString()+" cm"),this},x.comment=function(b){return ue("#"+b),this};var Ms=function(b,V){var ge=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(st){isNaN(st)||(ge=parseFloat(st))}});var ke=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(st){isNaN(st)||(ke=parseFloat(st))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(st){Be=st.toString()}}),this},Do=function(b,V,ge,ke){Ms.call(this,b,V),this.type="rect";var Be=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(dt){isNaN(dt)||(Be=parseFloat(dt))}});var st=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return st},set:function(dt){isNaN(dt)||(st=parseFloat(dt))}}),this},Ro=function(){this.page=on,this.currentPage=L,this.pages=Ze.slice(0),this.pagesContext=ln.slice(0),this.x=ft,this.y=En,this.matrix=Cn,this.width=go(L),this.height=vo(L),this.outputDestination=ut,this.id="",this.objectNumber=-1};Ro.prototype.restore=function(){on=this.page,L=this.currentPage,ln=this.pagesContext,Ze=this.pages,ft=this.x,En=this.y,Cn=this.matrix,Io(L,this.width),ms(L,this.height),ut=this.outputDestination};var Gi=function(b,V,ge,ke,Be){Nr.push(new Ro),on=L=0,Ze=[],ft=b,En=V,Cn=Be,sn([ge,ke])};for(var Ya in x.beginFormObject=function(b,V,ge,ke,Be){return Gi(b,V,ge,ke,Be),this},x.endFormObject=function(b){return(function(V){if(ds[V])Nr.pop().restore();else{var ge=new Ro,ke="Xo"+(Object.keys(_r).length+1).toString(10);ge.id=ke,ds[V]=ke,_r[ke]=ge,Zn.publish("addFormObject",ge),Nr.pop().restore()}})(b),this},x.doFormObject=function(b,V){var ge=_r[ds[b]];return ue("q"),ue(V.toString()+" cm"),ue("/"+ge.id+" Do"),ue("Q"),this},x.getFormObject=function(b){var V=_r[ds[b]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},x.save=function(b,V){return b=b||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(Ou(Tt(jt()),b),typeof Ou.unload=="function"&&Wn.setTimeout&&setTimeout(Ou.unload,911),this):new Promise(function(ge,ke){try{var Be=Ou(Tt(jt()),b);typeof Ou.unload=="function"&&Wn.setTimeout&&setTimeout(Ou.unload,911),ge(Be)}catch(st){ke(st.message)}})},un.API)un.API.hasOwnProperty(Ya)&&(Ya==="events"&&un.API.events.length?(function(b,V){var ge,ke,Be;for(Be=V.length-1;Be!==-1;Be--)ge=V[Be][0],ke=V[Be][1],b.subscribe.apply(b,[ge].concat(typeof ke=="function"?[ke]:ke))})(Zn,un.API.events):x[Ya]=un.API[Ya]);function go(b){return ln[b].mediaBox.topRightX-ln[b].mediaBox.bottomLeftX}function Io(b,V){ln[b].mediaBox.topRightX=V+ln[b].mediaBox.bottomLeftX}function vo(b){return ln[b].mediaBox.topRightY-ln[b].mediaBox.bottomLeftY}function ms(b,V){ln[b].mediaBox.topRightY=V+ln[b].mediaBox.bottomLeftY}var Bs=x.getPageWidth=function(b){return go(b=b||L)/wt},ai=x.setPageWidth=function(b,V){Io(b,V*wt)},Ki=x.getPageHeight=function(b){return vo(b=b||L)/wt},xi=x.setPageHeight=function(b,V){ms(b,V*wt)};return x.internal={pdfEscape:Xr,getStyle:Un,getFont:Se,getFontSize:q,getCharSpace:ba,getTextColor:Za,getLineHeight:as,getLineHeightFactor:Qa,getLineWidth:$t,write:xt,getHorizontalCoordinate:Fs,getVerticalCoordinate:ra,getCoordinateString:vl,getVerticalCoordinateString:bt,collections:{},newObject:Sr,newAdditionalObject:Di,newObjectDeferred:Ir,newObjectDeferredBegin:Pr,getFilters:Qs,putStream:Rs,events:Zn,scaleFactor:wt,pageSize:{getWidth:function(){return Bs(L)},setWidth:function(b){ai(L,b)},getHeight:function(){return Ki(L)},setHeight:function(b){xi(L,b)}},encryptionOptions:m,encryption:Dt,getEncryptor:function(b){return m!==null?Dt.encryptor(b,0):function(V){return V}},output:Rt,getNumberOfPages:On,get pages(){return Ze},out:ue,f2:z,f3:E,getPageInfo:Lt,getPageInfoByObjId:Ft,getCurrentPageInfo:qt,getPDFVersion:S,Point:Ms,Rectangle:Do,Matrix:Mt,hasHotfix:It},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Bs(L)},set:function(b){ai(L,b)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Ki(L)},set:function(b){xi(L,b)},enumerable:!0,configurable:!0}),(function(b){for(var V=0,ge=Jt.length;V<ge;V++){var ke=is.call(this,b[V][0],b[V][1],b[V][2],Jt[V][3],!0);y===!1&&(j[ke]=!0);var Be=b[V][0].split("-");Ai({id:ke,fontName:Be[0],fontStyle:Be[1]||""})}Zn.publish("addFonts",{fonts:mn,dictionary:gn})}).call(x,Jt),qe="F1",pr(a,n),Zn.publish("initialized"),x}Fd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Fd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Fd.prototype.processOwnerPassword=function(t,e){return Mv(Ov(e).substr(0,5),t)},Fd.prototype.encryptor=function(t,e){var n=Ov(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Mv(n,r)}},Fm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Yr(t)!==Yr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},un.API={events:[]},un.version="4.0.0";var ti=un.API,V1=1,rd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ld=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xn=function(t){return t.toFixed(2)},Qc=function(t){return t.toFixed(5)};ti.__acroform__={};var Wa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},g5=function(t){return t*V1},El=function(t){var e=new R4,n=nn.internal.getHeight(t)||0,r=nn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Xn(r)),Number(Xn(n))],e},m7=ti.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},g7=ti.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},v7=ti.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},fi=ti.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return v7(t,e-1)},hi=ti.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return m7(t,e-1)},pi=ti.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return g7(t,e-1)},x7=ti.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=t[0],o=t[1],u=t[2],c=t[3],f={};return f.lowerLeft_X=n(a)||0,f.lowerLeft_Y=r(o+c)||0,f.upperRight_X=n(a+u)||0,f.upperRight_Y=r(o)||0,[Number(Xn(f.lowerLeft_X)),Number(Xn(f.lowerLeft_Y)),Number(Xn(f.upperRight_X)),Number(Xn(f.upperRight_Y))]},y7=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Bv(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Xn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=El(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Bv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(z){return z.split(`
`)}):a.map(function(z){return[z]});var o=n,u=nn.internal.getHeight(t)||0;u=u<0?-u:u;var c=nn.internal.getWidth(t)||0;c=c<0?-c:c;var f=function(z,E,Q){if(z+1<a.length){var X=E+" "+a[z+1][0];return zp(X,t,Q).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,y=zp("3",t,o).height,j=t.multiline?u-o:(u-y)/2,x=j+=2,D=0,S=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+zp(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var A="",I=0,R=0;R<a.length;R++)if(a.hasOwnProperty(R)){var $=!1;if(a[R].length!==1&&k!==a[R].length-1){if((y+2)*(I+2)+2>u)continue e;A+=a[R][k],$=!0,S=R,R--}else{A=(A+=a[R][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var N=parseInt(R),xe=f(N,A,o),re=R>=a.length-1;if(xe&&!re){A+=" ",k=0;continue}if(xe||re){if(re)S=N;else if(t.multiline&&(y+2)*(I+2)+2>u)continue e}else{if(!t.multiline||(y+2)*(I+2)+2>u)continue e;S=N}}for(var K="",W=D;W<=S;W++){var he=a[W];if(t.multiline){if(W===S){K+=he[k]+" ",k=(k+1)%he.length;continue}if(W===D){K+=he[he.length-1]+" ";continue}}K+=he[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,m=zp(K,t,o).width,t.textAlign){case"right":p=c-m-2;break;case"center":p=(c-m)/2;break;default:p=2}e+=Xn(p)+" "+Xn(x)+` Td
`,e+="("+rd(K)+`) Tj
`,e+=-Xn(p)+` 0 Td
`,x=-(o+2),m=0,D=$?S:S+1,I++,A=""}break}return r.text=e,r.fontSize=o,r},zp=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},b7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},w7=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},N7=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ml.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(b7)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");V1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new I4,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.objId=void 0,o.hasAnnotation&&w7(o,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,a){var o=!r;for(var u in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var c=r[u],f=[],p=c.Rect;if(c.Rect&&(c.Rect=x7(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=nn.createDefaultAppearanceStream(c),Yr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=p,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=y7(c);f.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var y="";for(var j in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(j)){var x=c.appearanceStreamContent[j];if(y+="/"+j+" ",y+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var D=x[u];typeof D=="function"&&(D=D.call(a,c)),y+="/"+u+" "+D+" ",a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D)}}else typeof(D=x)=="function"&&(D=D.call(a,c)),y+="/"+u+" "+D,a.internal.acroformPlugin.xForms.indexOf(D)>=0||a.internal.acroformPlugin.xForms.push(D);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(S,k){for(var A in S)if(S.hasOwnProperty(A)){var I=A,R=S[A];k.internal.newObjectDeferredBegin(R.objId,!0),Yr(R)==="object"&&typeof R.putStream=="function"&&R.putStream(),delete S[I]}})(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},D4=ti.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),Yr(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),a+="("+rd(r(t[o].toString()))+")"):a+=t[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},V0=function(t,e,n){var r=function(a){return a};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+rd(r(t))+")"},Il=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Il.prototype.toString=function(){return this.objId+" 0 R"},Il.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Il.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],a=this[r];a&&(Array.isArray(a)?t.push({key:r,value:D4(a,this.objId,this.scope)}):a instanceof Il?(a.scope=this.scope,t.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:r,value:a}))}return t};var R4=function(){Il.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Wa(R4,Il);var I4=function(){Il.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+rd(n(t))+")"}},set:function(n){t=n}})};Wa(I4,Il);var ml=function t(){Il.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(e,3)},set:function(A){A?this.F=hi(e,3):this.F=pi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Om)return;o="FieldObject"+t.FieldNum++}var A=function(I){return I};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+rd(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(A){c=A}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(A){f=A}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/V1:p},set:function(A){p=A}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(A){m=A}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Om||this instanceof Uu))return V0(y,this.objId,this.scope)},set:function(A){A=A.toString(),y=A}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Vi==0?V0(j,this.objId,this.scope):j},set:function(A){A=A.toString(),j=this instanceof Vi==0?A.substr(0,1)==="("?Ld(A.substr(1,A.length-2)):Ld(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?Ld(j.substr(1,j.length-1)):j},set:function(A){A=A.toString(),j=this instanceof Vi==1?"/"+A:A}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Vi==0?V0(x,this.objId,this.scope):x},set:function(A){A=A.toString(),x=this instanceof Vi==0?A.substr(0,1)==="("?Ld(A.substr(1,A.length-2)):Ld(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi==1?Ld(x.substr(1,x.length-1)):x},set:function(A){A=A.toString(),x=this instanceof Vi==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(A){A=!!A,S=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(A){D=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(A){A?this.Ff=hi(this.Ff,1):this.Ff=pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(A){A?this.Ff=hi(this.Ff,2):this.Ff=pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(A){A?this.Ff=hi(this.Ff,3):this.Ff=pi(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Wa(ml,Il);var Yd=function(){ml.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return D4(e,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,p=[];f=u.exec(o);)p.push(f[c]);return p})(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(n){n?this.Ff=hi(this.Ff,18):this.Ff=pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=hi(this.Ff,19):this.Ff=pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(n){n?(this.Ff=hi(this.Ff,20),e.sort()):this.Ff=pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(n){n?this.Ff=hi(this.Ff,22):this.Ff=pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(n){n?this.Ff=hi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(n){n?this.Ff=hi(this.Ff,27):this.Ff=pi(this.Ff,27)}}),this.hasAppearanceStream=!1};Wa(Yd,ml);var Xd=function(){Yd.call(this),this.fontName="helvetica",this.combo=!1};Wa(Xd,Yd);var Jd=function(){Xd.call(this),this.combo=!0};Wa(Jd,Xd);var im=function(){Jd.call(this),this.edit=!0};Wa(im,Jd);var Vi=function(){ml.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(n){n?this.Ff=hi(this.Ff,15):this.Ff=pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(n){n?this.Ff=hi(this.Ff,16):this.Ff=pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(n){n?this.Ff=hi(this.Ff,17):this.Ff=pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(n){n?this.Ff=hi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+rd(n(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Yr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Wa(Vi,ml);var am=function(){Vi.call(this),this.pushButton=!0};Wa(am,Vi);var ef=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Wa(ef,Vi);var Om=function(){var t,e;ml.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+rd(a(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Yr(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wa(Om,ml),ef.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ef.prototype.createOption=function(t){var e=new Om;return e.Parent=this,e.optionName=t,this.Kids.push(e),S7.call(this.scope,e),e};var om=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nn.CheckBox.createAppearanceStream()};Wa(om,Vi);var Uu=function(){ml.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(e){e?this.Ff=hi(this.Ff,13):this.Ff=pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(e){e?this.Ff=hi(this.Ff,21):this.Ff=pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(e){e?this.Ff=hi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(e){e?this.Ff=hi(this.Ff,24):this.Ff=pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(e){e?this.Ff=hi(this.Ff,25):this.Ff=pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(e){e?this.Ff=hi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wa(Uu,ml);var lm=function(){Uu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(t){t?this.Ff=hi(this.Ff,14):this.Ff=pi(this.Ff,14)}}),this.password=!0};Wa(lm,Uu);var nn={CheckBox:{createAppearanceStream:function(){return{N:{On:nn.CheckBox.YesNormal},D:{On:nn.CheckBox.YesPushDown,Off:nn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=El(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=Bv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Xn(nn.internal.getWidth(t))+" "+Xn(nn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Xn(o.fontSize)+" Tf "+a),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=El(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=[],o=nn.internal.getHeight(t),u=nn.internal.getWidth(t),c=Bv(t,t.caption);return a.push("1 g"),a.push("0 0 "+Xn(u)+" "+Xn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Xn(u-1)+" "+Xn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Xn(c.fontSize)+" Tf "+r),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=El(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Xn(nn.internal.getWidth(t))+" "+Xn(nn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nn.RadioButton.Circle.YesNormal,e.D[t]=nn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=El(t);e.scope=t.scope;var n=[],r=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=nn.internal.Bezier_C,o=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qc(nn.internal.getWidth(t)/2)+" "+Qc(nn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=El(t);e.scope=t.scope;var n=[],r=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*nn.internal.Bezier_C).toFixed(5)),u=Number((r*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qc(nn.internal.getWidth(t)/2)+" "+Qc(nn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qc(nn.internal.getWidth(t)/2)+" "+Qc(nn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=El(t);e.scope=t.scope;var n=[],r=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qc(nn.internal.getWidth(t)/2)+" "+Qc(nn.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nn.RadioButton.Cross.YesNormal,e.D[t]=nn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=El(t);e.scope=t.scope;var n=[],r=nn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Xn(nn.internal.getWidth(t)-2)+" "+Xn(nn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Xn(r.x1.x)+" "+Xn(r.x1.y)+" m"),n.push(Xn(r.x2.x)+" "+Xn(r.x2.y)+" l"),n.push(Xn(r.x4.x)+" "+Xn(r.x4.y)+" m"),n.push(Xn(r.x3.x)+" "+Xn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=El(t);e.scope=t.scope;var n=nn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Xn(nn.internal.getWidth(t))+" "+Xn(nn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Xn(nn.internal.getWidth(t)-2)+" "+Xn(nn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Xn(n.x1.x)+" "+Xn(n.x1.y)+" m"),r.push(Xn(n.x2.x)+" "+Xn(n.x2.y)+" l"),r.push(Xn(n.x4.x)+" "+Xn(n.x4.y)+" m"),r.push(Xn(n.x3.x)+" "+Xn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=El(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Xn(nn.internal.getWidth(t))+" "+Xn(nn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nn.internal.getWidth(t),n=nn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},nn.internal.getWidth=function(t){var e=0;return Yr(t)==="object"&&(e=g5(t.Rect[2])),e},nn.internal.getHeight=function(t){var e=0;return Yr(t)==="object"&&(e=g5(t.Rect[3])),e};var S7=ti.addField=function(t){if(N7(this,t),!(t instanceof ml))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ti.AcroFormChoiceField=Yd,ti.AcroFormListBox=Xd,ti.AcroFormComboBox=Jd,ti.AcroFormEditBox=im,ti.AcroFormButton=Vi,ti.AcroFormPushButton=am,ti.AcroFormRadioButton=ef,ti.AcroFormCheckBox=om,ti.AcroFormTextField=Uu,ti.AcroFormPasswordField=lm,ti.AcroFormAppearance=nn,ti.AcroForm={ChoiceField:Yd,ListBox:Xd,ComboBox:Jd,EditBox:im,Button:Vi,PushButton:am,RadioButton:ef,CheckBox:om,TextField:Uu,PasswordField:lm,Appearance:nn},un.AcroForm={ChoiceField:Yd,ListBox:Xd,ComboBox:Jd,EditBox:im,Button:Vi,PushButton:am,RadioButton:ef,CheckBox:om,TextField:Uu,PasswordField:lm,Appearance:nn};un.AcroForm;function F4(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(z,E){var Q,X,ie,Ce,te,ae=n;if((E=E||n)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(xe(z))for(te in r)for(ie=r[te],Q=0;Q<ie.length;Q+=1){for(Ce=!0,X=0;X<ie[Q].length;X+=1)if(ie[Q][X]!==void 0&&ie[Q][X]!==z[X]){Ce=!1;break}if(Ce===!0){ae=te;break}}else for(te in r)for(ie=r[te],Q=0;Q<ie.length;Q+=1){for(Ce=!0,X=0;X<ie[Q].length;X+=1)if(ie[Q][X]!==void 0&&ie[Q][X]!==z.charCodeAt(X)){Ce=!1;break}if(Ce===!0){ae=te;break}}return ae===n&&E!==n&&(ae=E),ae},o=function z(E){for(var Q=this.internal.write,X=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var Ce=[];if(Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Image"}),Ce.push({key:"Width",value:E.width}),Ce.push({key:"Height",value:E.height}),E.colorSpace===A.INDEXED?Ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(Ce.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===A.DEVICE_CMYK&&Ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ce.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&Ce.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)&&E.transparency.length>0){for(var te="",ae=0,Ne=E.transparency.length;ae<Ne;ae++)te+=E.transparency[ae]+" "+E.transparency[ae]+" ";Ce.push({key:"Mask",value:"["+te+"]"})}E.sMask!==void 0&&Ce.push({key:"SMask",value:E.objectId+1+" 0 R"});var Re=E.filter!==void 0?["/"+E.filter]:void 0;if(X({data:E.data,additionalKeyValues:Ce,alreadyAppliedFilters:Re,objectId:E.objectId}),Q("endobj"),"sMask"in E&&E.sMask!==void 0){var ne,O=(ne=E.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:E.bitsPerComponent,L={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:E.sMask};"filter"in E&&(L.decodeParameters="/Predictor ".concat(E.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(E.width),L.filter=E.filter),z.call(this,L)}if(E.colorSpace===A.INDEXED){var oe=this.internal.newObject();X({data:K(new Uint8Array(E.palette)),objectId:oe}),Q("endobj")}},u=function(){var z=this.internal.collections[e+"images"];for(var E in z)o.call(this,z[E])},c=function(){var z,E=this.internal.collections[e+"images"],Q=this.internal.write;for(var X in E)Q("/I"+(z=E[X]).index,z.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},p=function(){var z=this.internal.collections[e+"images"];return f.call(this),z},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(z){return typeof t["process"+z.toUpperCase()]=="function"},j=function(z){return Yr(z)==="object"&&z.nodeType===1},x=function(z,E){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var Q=""+z.getAttribute("src");if(Q.indexOf("data:image/")===0)return sm(unescape(Q).split("base64,").pop());var X=t.loadFile(Q,!0);if(X!==void 0)return X}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var ie;switch(E){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return sm(z.toDataURL(ie,1).split("base64,").pop())}},D=function(z){var E=this.internal.collections[e+"images"];if(E){for(var Q in E)if(z===E[Q].alias)return E[Q]}},S=function(z,E,Q){return z||E||(z=-96,E=-96),z<0&&(z=-1*Q.width*72/z/this.internal.scaleFactor),E<0&&(E=-1*Q.height*72/E/this.internal.scaleFactor),z===0&&(z=E*Q.width/Q.height),E===0&&(E=z*Q.height/Q.width),[z,E]},k=function(z,E,Q,X,ie,Ce){var te=S.call(this,Q,X,ie),ae=this.internal.getCoordinateString,Ne=this.internal.getVerticalCoordinateString,Re=p.call(this);if(Q=te[0],X=te[1],Re[ie.index]=ie,Ce){Ce*=Math.PI/180;var ne=Math.cos(Ce),O=Math.sin(Ce),L=function(ve){return ve.toFixed(4)},oe=[L(ne),L(O),L(-1*O),L(ne),0,0,"cm"]}this.internal.write("q"),Ce?(this.internal.write([1,"0","0",1,ae(z),Ne(E+X),"cm"].join(" ")),this.internal.write(oe.join(" ")),this.internal.write([ae(Q),"0","0",ae(X),"0","0","cm"].join(" "))):this.internal.write([ae(Q),"0","0",ae(X),ae(z),Ne(E+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},A=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(z){var E,Q,X=0;if(typeof z=="string")for(Q=z.length,E=0;E<Q;E++)X=(X<<5)-X+z.charCodeAt(E),X|=0;else if(xe(z))for(Q=z.byteLength/2,E=0;E<Q;E++)X=(X<<5)-X+z[E],X|=0;return X},$=t.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var E=!0;return z.length===0&&(E=!1),z.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(E=!1),E},N=t.__addimage__.extractImageFromDataUrl=function(z){if(z==null||!(z=z.trim()).startsWith("data:"))return null;var E=z.indexOf(",");return E<0?null:z.substring(0,E).trim().endsWith("base64")?z.substring(E+1):null};t.__addimage__.isArrayBuffer=function(z){return z instanceof ArrayBuffer};var xe=t.__addimage__.isArrayBufferView=function(z){return z instanceof Int8Array||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array},re=t.__addimage__.binaryStringToUint8Array=function(z){for(var E=z.length,Q=new Uint8Array(E),X=0;X<E;X++)Q[X]=z.charCodeAt(X);return Q},K=t.__addimage__.arrayBufferToBinaryString=function(z){for(var E="",Q=xe(z)?z:new Uint8Array(z),X=0;X<Q.length;X+=8192)E+=String.fromCharCode.apply(null,Q.subarray(X,X+8192));return E};t.addImage=function(){var z,E,Q,X,ie,Ce,te,ae,Ne;if(typeof arguments[1]=="number"?(E=n,Q=arguments[1],X=arguments[2],ie=arguments[3],Ce=arguments[4],te=arguments[5],ae=arguments[6],Ne=arguments[7]):(E=arguments[1],Q=arguments[2],X=arguments[3],ie=arguments[4],Ce=arguments[5],te=arguments[6],ae=arguments[7],Ne=arguments[8]),Yr(z=arguments[0])==="object"&&!j(z)&&"imageData"in z){var Re=z;z=Re.imageData,E=Re.format||E||n,Q=Re.x||Q||0,X=Re.y||X||0,ie=Re.w||Re.width||ie,Ce=Re.h||Re.height||Ce,te=Re.alias||te,ae=Re.compression||ae,Ne=Re.rotation||Re.angle||Ne}var ne=this.internal.getFilters();if(ae===void 0&&ne.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(Q)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var O=W.call(this,z,E,te,ae);return k.call(this,Q,X,ie,Ce,O,Ne),this};var W=function(z,E,Q,X){var ie,Ce,te;if(typeof z=="string"&&a(z)===n){z=unescape(z);var ae=he(z,!1);(ae!==""||(ae=t.loadFile(z,!0))!==void 0)&&(z=ae)}if(j(z)&&(z=x(z,E)),E=a(z,E),!y(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((te=Q)==null||te.length===0)&&(Q=(function(Ne){return typeof Ne=="string"||xe(Ne)?R(Ne):xe(Ne.data)?R(Ne.data):null})(z)),(ie=D.call(this,Q))||(z instanceof Uint8Array||E==="RGBA"||(Ce=z,z=re(z)),ie=this["process"+E.toUpperCase()](z,m.call(this),Q,(function(Ne){return Ne&&typeof Ne=="string"&&(Ne=Ne.toUpperCase()),Ne in t.image_compression?Ne:I.NONE})(X),Ce)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},he=t.__addimage__.convertBase64ToBinaryString=function(z,E){E=typeof E!="boolean"||E;var Q,X="";if(typeof z=="string"){var ie;Q=(ie=N(z))!==null&&ie!==void 0?ie:z;try{X=sm(Q)}catch(Ce){if(E)throw $(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(z){var E,Q,X="";if(j(z)&&(z=x(z)),typeof z=="string"&&a(z)===n&&((X=he(z,!1))===""&&(X=t.loadFile(z)||""),z=X),Q=a(z),!y(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(z instanceof Uint8Array||(z=re(z)),!(E=this["process"+Q.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=Q,E}})(un.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};un.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),p=n.pageContext.annotations,m=!1,y=0;y<p.length&&!m;y++)switch((r=p[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var j=0;j<p.length;j++){r=p[j];var x=this.internal.pdfEscape,D=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(S.objId),I=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+x(A(r.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+x(A(I))+") >>",S.content=o;var R=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(S.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(r.bounds.x)+" "+c(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var $=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+x(D(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var N=this.annotations._nameMap[r.options.name];r.options.pageNumber=N.page,r.options.top=N.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+x(D(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var xe=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+xe+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(n),y:p(r),w:f(n+a),h:p(r+o)},options:u,type:"link"})},t.textWithLink=function(n,r,a,o){var u,c,f=this.getTextWidth(n),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(n,c).length;u=Math.ceil(p*m)}else c=f,u=p;return this.text(n,r,a,o),a+=.2*p,o.align==="center"&&(r-=f/2),o.align==="right"&&(r-=f),this.link(r,a-p,c,u,o),f},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(un.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},f=t.__arabicParser__.isArabicAlfLetter=function(S){return u(S)&&a.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return u(S)&&o(S)&&e[S.charCodeAt(0)].length==4},y=t.__arabicParser__.resolveLigatures=function(S){var k=0,A=n,I="",R=0;for(k=0;k<S.length;k+=1)A[S.charCodeAt(k)]!==void 0?(R++,typeof(A=A[S.charCodeAt(k)])=="number"&&(I+=String.fromCharCode(A),A=n,R=0),k===S.length-1&&(A=n,I+=S.charAt(k-(R-1)),k-=R-1,R=0)):(A=n,I+=S.charAt(k-R),k-=R,R=0);return I};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var j=t.__arabicParser__.getCorrectForm=function(S,k,A){return u(S)?o(S)===!1?-1:!p(S)||!u(k)&&!u(A)||!u(A)&&c(k)||c(S)&&!u(k)||c(S)&&f(k)||c(S)&&c(k)?0:m(S)&&u(k)&&!c(k)&&u(A)&&p(A)?3:c(S)||!u(A)?1:2:-1},x=function(S){var k=0,A=0,I=0,R="",$="",N="",xe=(S=S||"").split("\\s+"),re=[];for(k=0;k<xe.length;k+=1){for(re.push(""),A=0;A<xe[k].length;A+=1)R=xe[k][A],$=xe[k][A-1],N=xe[k][A+1],u(R)?(I=j(R,$,N),re[k]+=I!==-1?String.fromCharCode(e[R.charCodeAt(0)][I]):R):re[k]+=R;re[k]=y(re[k])}return re.join(" ")},D=t.__arabicParser__.processArabic=t.processArabic=function(){var S,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var I=0;for(A=[],I=0;I<k.length;I+=1)Array.isArray(k[I])?A.push([x(k[I][0]),k[I][1],k[I][2]]):A.push([x(k[I])]);S=A}else S=x(k);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",D])})(un.API),un.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(un.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(S){j=S}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(S){x=S}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(S){D=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},t.getTextDimensions=function(f,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),y=p.font||this.getFont(),j=p.scaleFactor||this.internal.scaleFactor,x=0,D=0,S=0,k=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var A=p.maxWidth;A>0?typeof f=="string"?f=this.splitTextToSize(f,A):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(R,$){return R.concat(k.splitTextToSize($,A))},[])):f=Array.isArray(f)?f:[f];for(var I=0;I<f.length;I++)x<(S=this.getStringUnitWidth(f[I],{font:y})*m)&&(x=S);return x!==0&&(D=f.length),{w:x/=j,h:Math.max((D*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/j,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,j=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,x&&j&&(this.printHeaderRow(f.lineNumber,!0),f.y+=j[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};t.table=function(f,p,m,y,j){if(r.call(this),!m)throw new Error("No data for PDF table.");var x,D,S,k,A=[],I=[],R=[],$={},N={},xe=[],re=[],K=(j=j||{}).autoSize||!1,W=j.printHeaders!==!1,he=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,z=j.margins||Object.assign({width:this.getPageWidth()},e),E=typeof j.padding=="number"?j.padding:3,Q=j.headerBackgroundColor||"#c8c8c8",X=j.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=X,this.setFontSize(he),y==null)I=A=Object.keys(m[0]),R=A.map(function(){return"left"});else if(Array.isArray(y)&&Yr(y[0])==="object")for(A=y.map(function(Re){return Re.name}),I=y.map(function(Re){return Re.prompt||Re.name||""}),R=y.map(function(Re){return Re.align||"left"}),x=0;x<y.length;x+=1)N[y[x].name]=.7499990551181103*y[x].width;else Array.isArray(y)&&typeof y[0]=="string"&&(I=A=y,R=A.map(function(){return"left"}));if(K||Array.isArray(y)&&typeof y[0]=="string")for(x=0;x<A.length;x+=1){for($[k=A[x]]=m.map(function(Re){return Re[k]}),this.setFont(void 0,"bold"),xe.push(this.getTextDimensions(I[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=$[k],this.setFont(void 0,"normal"),S=0;S<D.length;S+=1)xe.push(this.getTextDimensions(D[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[k]=Math.max.apply(null,xe)+E+E,xe=[]}if(W){var ie={};for(x=0;x<A.length;x+=1)ie[A[x]]={},ie[A[x]].text=I[x],ie[A[x]].align=R[x];var Ce=c.call(this,ie,N);re=A.map(function(Re){return new o(f,p,N[Re],Ce,ie[Re].text,void 0,ie[Re].align)}),this.setTableHeaderRow(re),this.printHeaderRow(1,!1)}var te=y.reduce(function(Re,ne){return Re[ne.name]=ne.align,Re},{});for(x=0;x<m.length;x+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:x,data:m[x]},this);var ae=c.call(this,m[x],N);for(S=0;S<A.length;S+=1){var Ne=m[x][A[S]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:x,col:S,data:Ne},this),u.call(this,new o(f,p,N[A[S]],ae,Ne,x+2,te[A[S]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var c=function(f,p){var m=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(f).map(function(x){var D=f[x];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,p[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*y/j+m+m},this).reduce(function(x,D){return Math.max(x,D)},0)};t.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},t.printHeaderRow=function(f,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,j.push(m)),m.lineNumber=f;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(D)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}})(un.API);var O4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},M4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qv=F4(M4),B4=[100,200,300,400,500,600,700,800,900],j7=F4(B4);function H0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return O4[o=o||"normal"]?o:"normal"})(t.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(t.weight),a=(function(o){return typeof qv[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,r].join(" ")}}}function v5(t,e,n,r){var a;for(a=n;a>=0&&a<e.length;a+=r)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=r)if(t[e[a]])return t[e[a]]}var C7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},x5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function y5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function b5(t){return t.trimLeft()}function A7(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function _7(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var $p,w5,N5,Dd,Vp,S5,j5,C5,W0=["times"];function A5(t,e,n,r,a){var o=4,u=P5;switch(a){case un.API.image_compression.FAST:o=1,u=_5;break;case un.API.image_compression.MEDIUM:o=6,u=k5;break;case un.API.image_compression.SLOW:o=9,u=T5}t=(function(f,p,m,y){for(var j,x=f.length/p,D=new Uint8Array(f.length+x),S=[P7,_5,P5,k5,T5],k=0;k<x;k+=1){var A=k*p,I=f.subarray(A,A+p);if(y)D.set(y(I,m,j),A+k);else{for(var R=S.length,$=[],N=0;N<R;N+=1)$[N]=S[N](I,m,j);var xe=T7($.concat());D.set($[xe],A+k)}j=I}return D})(t,e,Math.ceil(n*r/8),u);var c=Dv(t,{level:o});return un.API.__addimage__.arrayBufferToBinaryString(c)}function P7(t){var e=Array.apply([],t);return e.unshift(0),e}function _5(t,e){var n=t.length,r=[];r[0]=1;for(var a=0;a<n;a+=1){var o=t[a-e]||0;r[a+1]=t[a]-o+256&255}return r}function P5(t,e,n){var r=t.length,a=[];a[0]=2;for(var o=0;o<r;o+=1){var u=n&&n[o]||0;a[o+1]=t[o]-u+256&255}return a}function k5(t,e,n){var r=t.length,a=[];a[0]=3;for(var o=0;o<r;o+=1){var u=t[o-e]||0,c=n&&n[o]||0;a[o+1]=t[o]+256-(u+c>>>1)&255}return a}function T5(t,e,n){var r=t.length,a=[];a[0]=4;for(var o=0;o<r;o+=1){var u=k7(t[o-e]||0,n&&n[o]||0,n&&n[o-e]||0);a[o+1]=t[o]-u+256&255}return a}function k7(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),a=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=a&&r<=o?t:a<=o?e:n}function T7(t){var e=t.map(function(n){return n.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function G0(t,e,n){var r=e*n,a=Math.floor(r/8),o=16-(r-8*a+n),u=(1<<n)-1;return q4(t,a)>>o&u}function E5(t,e,n,r){var a=n*r,o=Math.floor(a/8),u=16-(a-8*o+r),c=(1<<r)-1,f=(e&c)<<u;(function(p,m,y){if(m+1<p.byteLength)p.setUint16(m,y,!1);else{var j=y>>8&255;p.setUint8(m,j)}})(t,o,q4(t,o)&~(c<<u)&65535|f)}function q4(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function E7(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,u=1<<1+(7&a);t[e++],t[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var p=!0,m=[],y=0,j=null,x=0,D=null;for(this.width=n,this.height=r;p&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,D=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((z=t[e++])>=0))throw Error("Invalid block size");if(z===0)break;e+=z}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];y=t[e++]|t[e++]<<8,j=t[e++],1&S||(j=null),x=S>>2&7,e++;break;case 254:for(;;){if(!((z=t[e++])>=0))throw Error("Invalid block size");if(z===0)break;e+=z}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,$=t[e++],N=$>>6&1,xe=1<<1+(7&$),re=c,K=f,W=!1;$>>7&&(W=!0,re=e,K=xe,e+=3*xe);var he=e;for(e++;;){var z;if(!((z=t[e++])>=0))throw Error("Invalid block size");if(z===0)break;e+=z}m.push({x:k,y:A,width:I,height:R,has_local_palette:W,palette_offset:re,palette_size:K,data_offset:he,data_length:e-he,transparent_index:j,interlaced:!!N,delay:y,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return D},this.frameInfo=function(E){if(E<0||E>=m.length)throw new Error("Frame index out of range.");return m[E]},this.decodeAndBlitFrameBGRA=function(E,Q){var X=this.frameInfo(E),ie=X.width*X.height,Ce=new Uint8Array(ie);L5(t,X.data_offset,Ce,ie);var te=X.palette_offset,ae=X.transparent_index;ae===null&&(ae=256);var Ne=X.width,Re=n-Ne,ne=Ne,O=4*(X.y*n+X.x),L=4*((X.y+X.height)*n+X.x),oe=O,ve=4*Re;X.interlaced===!0&&(ve+=4*n*7);for(var ye=8,be=0,Le=Ce.length;be<Le;++be){var Oe=Ce[be];if(ne===0&&(ne=Ne,(oe+=ve)>=L&&(ve=4*Re+4*n*(ye-1),oe=O+(Ne+Re)*(ye<<1),ye>>=1)),Oe===ae)oe+=4;else{var ze=t[te+3*Oe],Ze=t[te+3*Oe+1],lt=t[te+3*Oe+2];Q[oe++]=lt,Q[oe++]=Ze,Q[oe++]=ze,Q[oe++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(E,Q){var X=this.frameInfo(E),ie=X.width*X.height,Ce=new Uint8Array(ie);L5(t,X.data_offset,Ce,ie);var te=X.palette_offset,ae=X.transparent_index;ae===null&&(ae=256);var Ne=X.width,Re=n-Ne,ne=Ne,O=4*(X.y*n+X.x),L=4*((X.y+X.height)*n+X.x),oe=O,ve=4*Re;X.interlaced===!0&&(ve+=4*n*7);for(var ye=8,be=0,Le=Ce.length;be<Le;++be){var Oe=Ce[be];if(ne===0&&(ne=Ne,(oe+=ve)>=L&&(ve=4*Re+4*n*(ye-1),oe=O+(Ne+Re)*(ye<<1),ye>>=1)),Oe===ae)oe+=4;else{var ze=t[te+3*Oe],Ze=t[te+3*Oe+1],lt=t[te+3*Oe+2];Q[oe++]=ze,Q[oe++]=Ze,Q[oe++]=lt,Q[oe++]=255}--ne}}}function L5(t,e,n,r){for(var a=t[e++],o=1<<a,u=o+1,c=u+1,f=a+1,p=(1<<f)-1,m=0,y=0,j=0,x=t[e++],D=new Int32Array(4096),S=null;;){for(;m<16&&x!==0;)y|=t[e++]<<m,m+=8,x===1?x=t[e++]:--x;if(m<f)break;var k=y&p;if(y>>=f,m-=f,k!==o){if(k===u)break;for(var A=k<c?k:S,I=0,R=A;R>o;)R=D[R]>>8,++I;var $=R;if(j+I+(A!==k?1:0)>r)return void ns.log("Warning, gif stream longer than expected.");n[j++]=$;var N=j+=I;for(A!==k&&(n[j++]=$),R=A;I--;)R=D[R],n[--N]=255&R,R>>=8;S!==null&&c<4096&&(D[c++]=S<<8|$,c>=p+1&&f<12&&(++f,p=p<<1|1)),S=k}else c=u+1,p=(1<<(f=a+1))-1,S=null}return j!==r&&ns.log("Warning, gif stream shorter than expected."),n}function K0(t){var e,n,r,a,o,u=Math.floor,c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(64),y=new Array(65535),j=new Array(65535),x=new Array(64),D=new Array(64),S=[],k=0,A=7,I=new Array(64),R=new Array(64),$=new Array(64),N=new Array(256),xe=new Array(2048),re=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ce(O,L){for(var oe=0,ve=0,ye=new Array,be=1;be<=16;be++){for(var Le=1;Le<=O[be];Le++)ye[L[ve]]=[],ye[L[ve]][0]=oe,ye[L[ve]][1]=be,ve++,oe++;oe*=2}return ye}function te(O){for(var L=O[0],oe=O[1]-1;oe>=0;)L&1<<oe&&(k|=1<<A),oe--,--A<0&&(k==255?(ae(255),ae(0)):ae(k),A=7,k=0)}function ae(O){S.push(O)}function Ne(O){ae(O>>8&255),ae(255&O)}function Re(O,L,oe,ve,ye){for(var be,Le=ye[0],Oe=ye[240],ze=(function(le,J){var q,U,B,G,fe,Pe,_e,Ie,qe,wt,ft=0;for(qe=0;qe<8;++qe){q=le[ft],U=le[ft+1],B=le[ft+2],G=le[ft+3],fe=le[ft+4],Pe=le[ft+5],_e=le[ft+6];var En=q+(Ie=le[ft+7]),Cn=q-Ie,mn=U+_e,gn=U-_e,bn=B+Pe,Ct=B-Pe,rn=G+fe,Ke=G-fe,Ye=En+rn,it=En-rn,on=mn+bn,ln=mn-bn;le[ft]=Ye+on,le[ft+4]=Ye-on;var Zn=.707106781*(ln+it);le[ft+2]=it+Zn,le[ft+6]=it-Zn;var bs=.382683433*((Ye=Ke+Ct)-(ln=gn+Cn)),_r=.5411961*Ye+bs,ds=1.306562965*ln+bs,Nr=.707106781*(on=Ct+gn),Mt=Cn+Nr,vr=Cn-Nr;le[ft+5]=vr+_r,le[ft+3]=vr-_r,le[ft+1]=Mt+ds,le[ft+7]=Mt-ds,ft+=8}for(ft=0,qe=0;qe<8;++qe){q=le[ft],U=le[ft+8],B=le[ft+16],G=le[ft+24],fe=le[ft+32],Pe=le[ft+40],_e=le[ft+48];var fs=q+(Ie=le[ft+56]),hs=q-Ie,Ls=U+_e,Sr=U-_e,Ir=B+Pe,Pr=B-Pe,Di=G+fe,Ds=G-fe,ps=fs+Di,Hr=fs-Di,hr=Ls+Ir,Qs=Ls-Ir;le[ft]=ps+hr,le[ft+32]=ps-hr;var Rs=.707106781*(Qs+Hr);le[ft+16]=Hr+Rs,le[ft+48]=Hr-Rs;var Ri=.382683433*((ps=Ds+Pr)-(Qs=Sr+hs)),ws=.5411961*ps+Ri,Is=1.306562965*Qs+Ri,kr=.707106781*(hr=Pr+Sr),Ns=hs+kr,Ci=hs-kr;le[ft+40]=Ci+ws,le[ft+24]=Ci-ws,le[ft+8]=Ns+Is,le[ft+56]=Ns-Is,ft++}for(qe=0;qe<64;++qe)wt=le[qe]*J[qe],x[qe]=wt>0?wt+.5|0:wt-.5|0;return x})(O,L),Ze=0;Ze<64;++Ze)D[re[Ze]]=ze[Ze];var lt=D[0]-oe;oe=D[0],lt==0?te(ve[0]):(te(ve[j[be=32767+lt]]),te(y[be]));for(var ut=63;ut>0&&D[ut]==0;)ut--;if(ut==0)return te(Le),oe;for(var _t,ue=1;ue<=ut;){for(var xt=ue;D[ue]==0&&ue<=ut;)++ue;var dn=ue-xt;if(dn>=16){_t=dn>>4;for(var Jt=1;Jt<=_t;++Jt)te(Oe);dn&=15}be=32767+D[ue],te(ye[(dn<<4)+j[be]]),te(y[be]),ue++}return ut!=63&&te(Le),oe}function ne(O){O=Math.min(Math.max(O,1),100),o!=O&&((function(L){for(var oe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ve=0;ve<64;ve++){var ye=u((oe[ve]*L+50)/100);ye=Math.min(Math.max(ye,1),255),c[re[ve]]=ye}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var Oe=u((be[Le]*L+50)/100);Oe=Math.min(Math.max(Oe,1),255),f[re[Le]]=Oe}for(var ze=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ze=0,lt=0;lt<8;lt++)for(var ut=0;ut<8;ut++)p[Ze]=1/(c[re[Ze]]*ze[lt]*ze[ut]*8),m[Ze]=1/(f[re[Ze]]*ze[lt]*ze[ut]*8),Ze++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,L){L&&ne(L),S=new Array,k=0,A=7,Ne(65496),Ne(65504),Ne(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),Ne(1),Ne(1),ae(0),ae(0),(function(){Ne(65499),Ne(132),ae(0);for(var U=0;U<64;U++)ae(c[U]);ae(1);for(var B=0;B<64;B++)ae(f[B])})(),(function(U,B){Ne(65472),Ne(17),ae(8),Ne(B),Ne(U),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)})(O.width,O.height),(function(){Ne(65476),Ne(418),ae(0);for(var U=0;U<16;U++)ae(K[U+1]);for(var B=0;B<=11;B++)ae(W[B]);ae(16);for(var G=0;G<16;G++)ae(he[G+1]);for(var fe=0;fe<=161;fe++)ae(z[fe]);ae(1);for(var Pe=0;Pe<16;Pe++)ae(E[Pe+1]);for(var _e=0;_e<=11;_e++)ae(Q[_e]);ae(17);for(var Ie=0;Ie<16;Ie++)ae(X[Ie+1]);for(var qe=0;qe<=161;qe++)ae(ie[qe])})(),Ne(65498),Ne(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var oe=0,ve=0,ye=0;k=0,A=7,this.encode.displayName="_encode_";for(var be,Le,Oe,ze,Ze,lt,ut,_t,ue,xt=O.data,dn=O.width,Jt=O.height,le=4*dn,J=0;J<Jt;){for(be=0;be<le;){for(Ze=le*J+be,ut=-1,_t=0,ue=0;ue<64;ue++)lt=Ze+(_t=ue>>3)*le+(ut=4*(7&ue)),J+_t>=Jt&&(lt-=le*(J+1+_t-Jt)),be+ut>=le&&(lt-=be+ut-le+4),Le=xt[lt++],Oe=xt[lt++],ze=xt[lt++],I[ue]=(xe[Le]+xe[Oe+256|0]+xe[ze+512|0]>>16)-128,R[ue]=(xe[Le+768|0]+xe[Oe+1024|0]+xe[ze+1280|0]>>16)-128,$[ue]=(xe[Le+1280|0]+xe[Oe+1536|0]+xe[ze+1792|0]>>16)-128;oe=Re(I,p,oe,e,r),ve=Re(R,m,ve,n,a),ye=Re($,m,ye,n,a),be+=32}J+=8}if(A>=0){var q=[];q[1]=A+1,q[0]=(1<<A+1)-1,te(q)}return Ne(65497),new Uint8Array(S)},t=t||50,(function(){for(var O=String.fromCharCode,L=0;L<256;L++)N[L]=O(L)})(),e=Ce(K,W),n=Ce(E,Q),r=Ce(he,z),a=Ce(X,ie),(function(){for(var O=1,L=2,oe=1;oe<=15;oe++){for(var ve=O;ve<L;ve++)j[32767+ve]=oe,y[32767+ve]=[],y[32767+ve][1]=oe,y[32767+ve][0]=ve;for(var ye=-(L-1);ye<=-O;ye++)j[32767+ye]=oe,y[32767+ye]=[],y[32767+ye][1]=oe,y[32767+ye][0]=L-1+ye;O<<=1,L<<=1}})(),(function(){for(var O=0;O<256;O++)xe[O]=19595*O,xe[O+256|0]=38470*O,xe[O+512|0]=7471*O+32768,xe[O+768|0]=-11059*O,xe[O+1024|0]=-21709*O,xe[O+1280|0]=32768*O+8421375,xe[O+1536|0]=-27439*O,xe[O+1792|0]=-5329*O})(),ne(t)}function Xo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function D5(t){function e(W){if(!W)throw Error("assert :P")}function n(W,he,z){for(var E=0;4>E;E++)if(W[he+E]!=z.charCodeAt(E))return!0;return!1}function r(W,he,z,E,Q){for(var X=0;X<Q;X++)W[he+X]=z[E+X]}function a(W,he,z,E){for(var Q=0;Q<E;Q++)W[he+Q]=z}function o(W){return new Int32Array(W)}function u(W,he){for(var z=[],E=0;E<W;E++)z.push(new he);return z}function c(W,he){var z=[];return(function E(Q,X,ie){for(var Ce=ie[X],te=0;te<Ce&&(Q.push(ie.length>X+1?[]:new he),!(ie.length<X+1));te++)E(Q[te],X+1,ie)})(z,0,W),z}var f=function(){var W=this;function he(h,v){for(var C=1<<v-1>>>0;h&C;)C>>>=1;return C?(h&C-1)+C:h}function z(h,v,C,T,H){e(!(T%C));do h[v+(T-=C)]=H;while(0<T)}function E(h,v,C,T,H){if(e(2328>=H),512>=H)var Y=o(512);else if((Y=o(H))==null)return 0;return(function(ee,se,ce,pe,Te,$e){var me,De,Ue=se,rt=1<<ce,He=o(16),et=o(16);for(e(Te!=0),e(pe!=null),e(ee!=null),e(0<ce),De=0;De<Te;++De){if(15<pe[De])return 0;++He[pe[De]]}if(He[0]==Te)return 0;for(et[1]=0,me=1;15>me;++me){if(He[me]>1<<me)return 0;et[me+1]=et[me]+He[me]}for(De=0;De<Te;++De)me=pe[De],0<pe[De]&&($e[et[me]++]=De);if(et[15]==1)return(pe=new Q).g=0,pe.value=$e[0],z(ee,Ue,1,rt,pe),rt;var tt,at=-1,ct=rt-1,fn=0,Kt=1,Qn=1,en=1<<ce;for(De=0,me=1,Te=2;me<=ce;++me,Te<<=1){if(Kt+=Qn<<=1,0>(Qn-=He[me]))return 0;for(;0<He[me];--He[me])(pe=new Q).g=me,pe.value=$e[De++],z(ee,Ue+fn,Te,en,pe),fn=he(fn,me)}for(me=ce+1,Te=2;15>=me;++me,Te<<=1){if(Kt+=Qn<<=1,0>(Qn-=He[me]))return 0;for(;0<He[me];--He[me]){if(pe=new Q,(fn&ct)!=at){for(Ue+=en,tt=1<<(at=me)-ce;15>at&&!(0>=(tt-=He[at]));)++at,tt<<=1;rt+=en=1<<(tt=at-ce),ee[se+(at=fn&ct)].g=tt+ce,ee[se+at].value=Ue-se-at}pe.g=me-ce,pe.value=$e[De++],z(ee,Ue+(fn>>ce),Te,en,pe),fn=he(fn,me)}}return Kt!=2*et[15]-1?0:rt})(h,v,C,T,H,Y)}function Q(){this.value=this.g=0}function X(){this.value=this.g=0}function ie(){this.G=u(5,Q),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ia,X)}function Ce(h,v,C,T){e(h!=null),e(v!=null),e(2147483648>T),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=C,h.Jd=v,h.Yc=C+T,h.Zc=4<=T?C+T-4+1:C,Le(h)}function te(h,v){for(var C=0;0<v--;)C|=ze(h,128)<<v;return C}function ae(h,v){var C=te(h,v);return Oe(h)?-C:C}function Ne(h,v,C,T){var H,Y=0;for(e(h!=null),e(v!=null),e(4294967288>T),h.Sb=T,h.Ra=0,h.u=0,h.h=0,4<T&&(T=4),H=0;H<T;++H)Y+=v[C+H]<<8*H;h.Ra=Y,h.bb=T,h.oa=v,h.pa=C}function Re(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<yl-8>>>0,++h.bb,h.u-=8;ve(h)&&(h.h=1,h.u=0)}function ne(h,v){if(e(0<=v),!h.h&&v<=Sa){var C=oe(h)&Na[v];return h.u+=v,Re(h),C}return h.h=1,h.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function oe(h){return h.Ra>>>(h.u&yl-1)>>>0}function ve(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>yl}function ye(h,v){h.u=v,h.h=ve(h)}function be(h){h.u>=yo&&(e(h.u>=yo),Re(h))}function Le(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Oe(h){return te(h,1)}function ze(h,v){var C=h.Ca;0>h.b&&Le(h);var T=h.b,H=C*v>>>8,Y=(h.I>>>T>H)+0;for(Y?(C-=H,h.I-=H+1<<T>>>0):C=H+1,T=C,H=0;256<=T;)H+=8,T>>=8;return T=7^H+Bo[T],h.b-=T,h.Ca=(C<<T)-1,Y}function Ze(h,v,C){h[v+0]=C>>24&255,h[v+1]=C>>16&255,h[v+2]=C>>8&255,h[v+3]=255&C}function lt(h,v){return h[v+0]|h[v+1]<<8}function ut(h,v){return lt(h,v)|h[v+2]<<16}function _t(h,v){return lt(h,v)|lt(h,v+2)<<16}function ue(h,v){var C=1<<v;return e(h!=null),e(0<v),h.X=o(C),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function xt(h,v){e(h!=null),e(v!=null),e(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function dn(){this.X=[],this.Xa=this.Mb=0}function Jt(h,v,C,T){e(C!=null),e(T!=null);var H=C[0],Y=T[0];return H==0&&(H=(h*Y+v/2)/v),Y==0&&(Y=(v*H+h/2)/h),0>=H||0>=Y?0:(C[0]=H,T[0]=Y,1)}function le(h,v){return h+(1<<v)-1>>>v}function J(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function q(h,v){W[v]=function(C,T,H,Y,ee,se,ce){var pe;for(pe=0;pe<ee;++pe){var Te=W[h](se[ce+pe-1],H,Y+pe);se[ce+pe]=J(C[T+pe],Te)}}}function U(){this.ud=this.hd=this.jd=0}function B(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function G(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function fe(h,v){return G(h+(h-v+.5>>1))}function Pe(h,v,C){return Math.abs(v-C)-Math.abs(h-C)}function _e(h,v,C,T,H,Y,ee){for(T=Y[ee-1],C=0;C<H;++C)Y[ee+C]=T=J(h[v+C],T)}function Ie(h,v,C,T,H){var Y;for(Y=0;Y<C;++Y){var ee=h[v+Y],se=ee>>8&255,ce=16711935&(ce=(ce=16711935&ee)+((se<<16)+se));T[H+Y]=(4278255360&ee)+ce>>>0}}function qe(h,v){v.jd=255&h,v.hd=h>>8&255,v.ud=h>>16&255}function wt(h,v,C,T,H,Y){var ee;for(ee=0;ee<T;++ee){var se=v[C+ee],ce=se>>>8,pe=se,Te=255&(Te=(Te=se>>>16)+((h.jd<<24>>24)*(ce<<24>>24)>>>5));pe=255&(pe=(pe+=(h.hd<<24>>24)*(ce<<24>>24)>>>5)+((h.ud<<24>>24)*(Te<<24>>24)>>>5)),H[Y+ee]=(4278255360&se)+(Te<<16)+pe}}function ft(h,v,C,T,H){W[v]=function(Y,ee,se,ce,pe,Te,$e,me,De){for(ce=$e;ce<me;++ce)for($e=0;$e<De;++$e)pe[Te++]=H(se[T(Y[ee++])])},W[h]=function(Y,ee,se,ce,pe,Te,$e){var me=8>>Y.b,De=Y.Ea,Ue=Y.K[0],rt=Y.w;if(8>me)for(Y=(1<<Y.b)-1,rt=(1<<me)-1;ee<se;++ee){var He,et=0;for(He=0;He<De;++He)He&Y||(et=T(ce[pe++])),Te[$e++]=H(Ue[et&rt]),et>>=me}else W["VP8LMapColor"+C](ce,pe,Ue,rt,Te,$e,ee,se,De)}}function En(h,v,C,T,H){for(C=v+C;v<C;){var Y=h[v++];T[H++]=Y>>16&255,T[H++]=Y>>8&255,T[H++]=255&Y}}function Cn(h,v,C,T,H){for(C=v+C;v<C;){var Y=h[v++];T[H++]=Y>>16&255,T[H++]=Y>>8&255,T[H++]=255&Y,T[H++]=Y>>24&255}}function mn(h,v,C,T,H){for(C=v+C;v<C;){var Y=(ee=h[v++])>>16&240|ee>>12&15,ee=240&ee|ee>>28&15;T[H++]=Y,T[H++]=ee}}function gn(h,v,C,T,H){for(C=v+C;v<C;){var Y=(ee=h[v++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;T[H++]=Y,T[H++]=ee}}function bn(h,v,C,T,H){for(C=v+C;v<C;){var Y=h[v++];T[H++]=255&Y,T[H++]=Y>>8&255,T[H++]=Y>>16&255}}function Ct(h,v,C,T,H,Y){if(Y==0)for(C=v+C;v<C;)Ze(T,((Y=h[v++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),H+=32;else r(T,H,h,v,C)}function rn(h,v){W[v][0]=W[h+"0"],W[v][1]=W[h+"1"],W[v][2]=W[h+"2"],W[v][3]=W[h+"3"],W[v][4]=W[h+"4"],W[v][5]=W[h+"5"],W[v][6]=W[h+"6"],W[v][7]=W[h+"7"],W[v][8]=W[h+"8"],W[v][9]=W[h+"9"],W[v][10]=W[h+"10"],W[v][11]=W[h+"11"],W[v][12]=W[h+"12"],W[v][13]=W[h+"13"],W[v][14]=W[h+"0"],W[v][15]=W[h+"0"]}function Ke(h){return h==Pc||h==Jl||h==Su||h==ju}function Ye(){this.eb=[],this.size=this.A=this.fb=0}function it(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function on(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ye,this.f.kb=new it,this.sd=null}function ln(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bs(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function _r(h,v){var C=h.T,T=v.ba.f.RGBA,H=T.eb,Y=T.fb+h.ka*T.A,ee=aa[v.ba.S],se=h.y,ce=h.O,pe=h.f,Te=h.N,$e=h.ea,me=h.W,De=v.cc,Ue=v.dc,rt=v.Mc,He=v.Nc,et=h.ka,tt=h.ka+h.T,at=h.U,ct=at+1>>1;for(et==0?ee(se,ce,null,null,pe,Te,$e,me,pe,Te,$e,me,H,Y,null,null,at):(ee(v.ec,v.fc,se,ce,De,Ue,rt,He,pe,Te,$e,me,H,Y-T.A,H,Y,at),++C);et+2<tt;et+=2)De=pe,Ue=Te,rt=$e,He=me,Te+=h.Rc,me+=h.Rc,Y+=2*T.A,ee(se,(ce+=2*h.fa)-h.fa,se,ce,De,Ue,rt,He,pe,Te,$e,me,H,Y-T.A,H,Y,at);return ce+=h.fa,h.j+tt<h.o?(r(v.ec,v.fc,se,ce,at),r(v.cc,v.dc,pe,Te,ct),r(v.Mc,v.Nc,$e,me,ct),C--):1&tt||ee(se,ce,null,null,pe,Te,$e,me,pe,Te,$e,me,H,Y+T.A,null,null,at),C}function ds(h,v,C){var T=h.F,H=[h.J];if(T!=null){var Y=h.U,ee=v.ba.S,se=ee==Nu||ee==Su;v=v.ba.f.RGBA;var ce=[0],pe=h.ka;ce[0]=h.T,h.Kb&&(pe==0?--ce[0]:(--pe,H[0]-=h.width),h.j+h.ka+h.T==h.o&&(ce[0]=h.o-h.j-pe));var Te=v.eb;pe=v.fb+pe*v.A,h=bu(T,H[0],h.width,Y,ce,Te,pe+(se?0:3),v.A),e(C==ce),h&&Ke(ee)&&Xl(Te,pe,se,Y,ce,v.A)}return 0}function Nr(h){var v=h.ma,C=v.ba.S,T=11>C,H=C==Sl||C==wu||C==Nu||C==Gr||C==12||Ke(C);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!wc(v.Oa,h,H?11:12))return 0;if(H&&Ke(C)&&Cs(),h.da)alert("todo:use_scaling");else{if(T){if(v.Ib=bs,h.Kb){if(C=h.U+1>>1,v.memory=o(h.U+2*C),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+C,v.Ib=_r,Cs()}}else alert("todo:EmitYUV");H&&(v.Jb=ds,T&&es())}if(T&&!Pi){for(h=0;256>h;++h)oa[h]=89858*(h-128)+to>>$o,la[h]=-22014*(h-128)+to,Lc[h]=-45773*(h-128),rc[h]=113618*(h-128)+to>>$o;for(h=Br;h<Ur;++h)v=76283*(h-16)+to>>$o,dd[h-Br]=Xe(v,255),Xh[h-Br]=Xe(v+8>>4,15);Pi=1}return 1}function Mt(h){var v=h.ma,C=h.U,T=h.T;return e(!(1&h.ka)),0>=C||0>=T?0:(C=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,C),v.Dc+=C,1)}function vr(h){h.ma.memory=null}function fs(h,v,C,T){return ne(h,8)!=47?0:(v[0]=ne(h,14)+1,C[0]=ne(h,14)+1,T[0]=ne(h,1),ne(h,3)!=0?0:!h.h)}function hs(h,v){if(4>h)return h+1;var C=h-2>>1;return(2+(1&h)<<C)+ne(v,C)+1}function Ls(h,v){return 120<v?v-120:1<=(C=((C=mg[v-1])>>4)*h+(8-(15&C)))?C:1;var C}function Sr(h,v,C){var T=oe(C),H=h[v+=255&T].g-8;return 0<H&&(ye(C,C.u+8),T=oe(C),v+=h[v].value,v+=T&(1<<H)-1),ye(C,C.u+h[v].g),h[v].value}function Ir(h,v,C){return C.g+=h.g,C.value+=h.value<<v>>>0,e(8>=C.g),h.g}function Pr(h,v,C){var T=h.xc;return e((v=T==0?0:h.vc[h.md*(C>>T)+(v>>T)])<h.Wb),h.Ya[v]}function Di(h,v,C,T){var H=h.ab,Y=h.c*v,ee=h.C;v=ee+v;var se=C,ce=T;for(T=h.Ta,C=h.Ua;0<H--;){var pe=h.gc[H],Te=ee,$e=v,me=se,De=ce,Ue=(ce=T,se=C,pe.Ea);switch(e(Te<$e),e($e<=pe.nc),pe.hc){case 2:qs(me,De,($e-Te)*Ue,ce,se);break;case 0:var rt=Te,He=$e,et=ce,tt=se,at=(en=pe).Ea;rt==0&&(qo(me,De,null,null,1,et,tt),_e(me,De+1,0,0,at-1,et,tt+1),De+=at,tt+=at,++rt);for(var ct=1<<en.b,fn=ct-1,Kt=le(at,en.b),Qn=en.K,en=en.w+(rt>>en.b)*Kt;rt<He;){var mr=Qn,Ps=en,Yn=1;for(bo(me,De,et,tt-at,1,et,tt);Yn<at;){var Qt=(Yn&~fn)+ct;Qt>at&&(Qt=at),(0,Kl[mr[Ps++]>>8&15])(me,De+ +Yn,et,tt+Yn-at,Qt-Yn,et,tt+Yn),Yn=Qt}De+=at,tt+=at,++rt&fn||(en+=Kt)}$e!=pe.nc&&r(ce,se-Ue,ce,se+($e-Te-1)*Ue,Ue);break;case 1:for(Ue=me,He=De,at=(me=pe.Ea)-(tt=me&~(et=(De=1<<pe.b)-1)),rt=le(me,pe.b),ct=pe.K,pe=pe.w+(Te>>pe.b)*rt;Te<$e;){for(fn=ct,Kt=pe,Qn=new U,en=He+tt,mr=He+me;He<en;)qe(fn[Kt++],Qn),Sc(Qn,Ue,He,De,ce,se),He+=De,se+=De;He<mr&&(qe(fn[Kt++],Qn),Sc(Qn,Ue,He,at,ce,se),He+=at,se+=at),++Te&et||(pe+=rt)}break;case 3:if(me==ce&&De==se&&0<pe.b){for(He=ce,me=Ue=se+($e-Te)*Ue-(tt=($e-Te)*le(pe.Ea,pe.b)),De=ce,et=se,rt=[],tt=(at=tt)-1;0<=tt;--tt)rt[tt]=De[et+tt];for(tt=at-1;0<=tt;--tt)He[me+tt]=rt[tt];Wl(pe,Te,$e,ce,Ue,ce,se)}else Wl(pe,Te,$e,me,De,ce,se)}se=T,ce=C}ce!=C&&r(T,C,se,ce,Y)}function Ds(h,v){var C=h.V,T=h.Ba+h.c*h.C,H=v-h.C;if(e(v<=h.l.o),e(16>=H),0<H){var Y=h.l,ee=h.Ta,se=h.Ua,ce=Y.width;if(Di(h,H,C,T),H=se=[se],e((C=h.C)<(T=v)),e(Y.v<Y.va),T>Y.o&&(T=Y.o),C<Y.j){var pe=Y.j-C;C=Y.j,H[0]+=pe*ce}if(C>=T?C=0:(H[0]+=4*Y.v,Y.ka=C-Y.j,Y.U=Y.va-Y.v,Y.T=T-C,C=1),C){if(se=se[0],11>(C=h.ca).S){var Te=C.f.RGBA,$e=(T=C.S,H=Y.U,Y=Y.T,pe=Te.eb,Te.A),me=Y;for(Te=Te.fb+h.Ma*Te.A;0<me--;){var De=ee,Ue=se,rt=H,He=pe,et=Te;switch(T){case od:jc(De,Ue,rt,He,et);break;case Sl:Uo(De,Ue,rt,He,et);break;case Pc:Uo(De,Ue,rt,He,et),Xl(He,et,0,rt,1,0);break;case Gh:Ql(De,Ue,rt,He,et);break;case wu:Ct(De,Ue,rt,He,et,1);break;case Jl:Ct(De,Ue,rt,He,et,1),Xl(He,et,0,rt,1,0);break;case Nu:Ct(De,Ue,rt,He,et,0);break;case Su:Ct(De,Ue,rt,He,et,0),Xl(He,et,1,rt,1,0);break;case Gr:bl(De,Ue,rt,He,et);break;case ju:bl(De,Ue,rt,He,et),Nf(He,et,rt,1,0);break;case ld:wl(De,Ue,rt,He,et);break;default:e(0)}se+=ce,Te+=$e}h.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=C.height)}}h.C=v,e(h.C<=h.i)}function ps(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var C=h.Ya[v].G,T=h.Ya[v].H;if(0<C[1][T[1]+0].g||0<C[2][T[2]+0].g||0<C[3][T[3]+0].g)return 0}return 1}function Hr(h,v,C,T,H,Y){if(h.Z!=0){var ee=h.qd,se=h.rd;for(e(Oi[h.Z]!=null);v<C;++v)Oi[h.Z](ee,se,T,H,T,H,Y),ee=T,se=H,H+=Y;h.qd=ee,h.rd=se}}function hr(h,v){var C=h.l.ma,T=C.Z==0||C.Z==1?h.l.j:h.C;if(T=h.C<T?T:h.C,e(v<=h.l.o),v>T){var H=h.l.width,Y=C.ca,ee=C.tb+H*T,se=h.V,ce=h.Ba+h.c*T,pe=h.gc;e(h.ab==1),e(pe[0].hc==3),Ja(pe[0],T,v,se,ce,Y,ee),Hr(C,T,v,Y,ee,H)}h.C=h.Ma=v}function Qs(h,v,C,T,H,Y,ee){var se=h.$/T,ce=h.$%T,pe=h.m,Te=h.s,$e=C+h.$,me=$e;H=C+T*H;var De=C+T*Y,Ue=280+Te.ua,rt=h.Pb?se:16777216,He=0<Te.ua?Te.Wa:null,et=Te.wc,tt=$e<De?Pr(Te,ce,se):null;e(h.C<Y),e(De<=H);var at=!1;e:for(;;){for(;at||$e<De;){var ct=0;if(se>=rt){var fn=$e-C;e((rt=h).Pb),rt.wd=rt.m,rt.xd=fn,0<rt.s.ua&&xt(rt.s.Wa,rt.s.vb),rt=se+ud}if(ce&et||(tt=Pr(Te,ce,se)),e(tt!=null),tt.Qb&&(v[$e]=tt.qb,at=!0),!at)if(be(pe),tt.jc){ct=pe,fn=v;var Kt=$e,Qn=tt.pd[oe(ct)&Ia-1];e(tt.jc),256>Qn.g?(ye(ct,ct.u+Qn.g),fn[Kt]=Qn.value,ct=0):(ye(ct,ct.u+Qn.g-256),e(256<=Qn.value),ct=Qn.value),ct==0&&(at=!0)}else ct=Sr(tt.G[0],tt.H[0],pe);if(pe.h)break;if(at||256>ct){if(!at)if(tt.nd)v[$e]=(tt.qb|ct<<8)>>>0;else{if(be(pe),at=Sr(tt.G[1],tt.H[1],pe),be(pe),fn=Sr(tt.G[2],tt.H[2],pe),Kt=Sr(tt.G[3],tt.H[3],pe),pe.h)break;v[$e]=(Kt<<24|at<<16|ct<<8|fn)>>>0}if(at=!1,++$e,++ce>=T&&(ce=0,++se,ee!=null&&se<=Y&&!(se%16)&&ee(h,se),He!=null))for(;me<$e;)ct=v[me++],He.X[(506832829*ct&4294967295)>>>He.Mb]=ct}else if(280>ct){if(ct=hs(ct-256,pe),fn=Sr(tt.G[4],tt.H[4],pe),be(pe),fn=Ls(T,fn=hs(fn,pe)),pe.h)break;if($e-C<fn||H-$e<ct)break e;for(Kt=0;Kt<ct;++Kt)v[$e+Kt]=v[$e+Kt-fn];for($e+=ct,ce+=ct;ce>=T;)ce-=T,++se,ee!=null&&se<=Y&&!(se%16)&&ee(h,se);if(e($e<=H),ce&et&&(tt=Pr(Te,ce,se)),He!=null)for(;me<$e;)ct=v[me++],He.X[(506832829*ct&4294967295)>>>He.Mb]=ct}else{if(!(ct<Ue))break e;for(at=ct-280,e(He!=null);me<$e;)ct=v[me++],He.X[(506832829*ct&4294967295)>>>He.Mb]=ct;ct=$e,e(!(at>>>(fn=He).Xa)),v[ct]=fn.X[at],at=!0}at||e(pe.h==ve(pe))}if(h.Pb&&pe.h&&$e<H)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&xt(h.s.vb,h.s.Wa);else{if(pe.h)break e;ee?.(h,se>Y?Y:se),h.a=0,h.$=$e-C}return 1}return h.a=3,0}function Rs(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,e(h!=null)}function Ri(){var h=new Rn;return h==null?null:(h.a=0,h.xb=Tc,rn("Predictor","VP8LPredictors"),rn("Predictor","VP8LPredictors_C"),rn("PredictorAdd","VP8LPredictorsAdd"),rn("PredictorAdd","VP8LPredictorsAdd_C"),qs=Ie,Sc=wt,jc=En,Uo=Cn,bl=mn,wl=gn,Ql=bn,W.VP8LMapColor32b=wo,W.VP8LMapColor8b=Gl,h)}function ws(h,v,C,T,H){var Y=1,ee=[h],se=[v],ce=T.m,pe=T.s,Te=null,$e=0;e:for(;;){if(C)for(;Y&&ne(ce,1);){var me=ee,De=se,Ue=T,rt=1,He=Ue.m,et=Ue.gc[Ue.ab],tt=ne(He,2);if(Ue.Oc&1<<tt)Y=0;else{switch(Ue.Oc|=1<<tt,et.hc=tt,et.Ea=me[0],et.nc=De[0],et.K=[null],++Ue.ab,e(4>=Ue.ab),tt){case 0:case 1:et.b=ne(He,3)+2,rt=ws(le(et.Ea,et.b),le(et.nc,et.b),0,Ue,et.K),et.K=et.K[0];break;case 3:var at,ct=ne(He,8)+1,fn=16<ct?0:4<ct?1:2<ct?2:3;if(me[0]=le(et.Ea,fn),et.b=fn,at=rt=ws(ct,1,0,Ue,et.K)){var Kt,Qn=ct,en=et,mr=1<<(8>>en.b),Ps=o(mr);if(Ps==null)at=0;else{var Yn=en.K[0],Qt=en.w;for(Ps[0]=en.K[0][0],Kt=1;Kt<1*Qn;++Kt)Ps[Kt]=J(Yn[Qt+Kt],Ps[Kt-1]);for(;Kt<4*mr;++Kt)Ps[Kt]=0;en.K[0]=null,en.K[0]=Ps,at=1}}rt=at;break;case 2:break;default:e(0)}Y=rt}}if(ee=ee[0],se=se[0],Y&&ne(ce,1)&&!(Y=1<=($e=ne(ce,4))&&11>=$e)){T.a=3;break e}var kt;if(kt=Y)t:{var Us,Mn,fr,Jr=T,bi=ee,Ys=se,vs=$e,oi=C,wi=Jr.m,os=Jr.s,br=[null],Er=1,ls=0,Lr=Qh[vs];n:for(;;){if(oi&&ne(wi,1)){var ks=ne(wi,3)+2,Ts=le(bi,ks),Kr=le(Ys,ks),Mi=Ts*Kr;if(!ws(Ts,Kr,0,Jr,br))break n;for(br=br[0],os.xc=ks,Us=0;Us<Mi;++Us){var zr=br[Us]>>8&65535;br[Us]=zr,zr>=Er&&(Er=zr+1)}}if(wi.h)break n;for(Mn=0;5>Mn;++Mn){var Qr=ec[Mn];!Mn&&0<vs&&(Qr+=1<<vs),ls<Qr&&(ls=Qr)}var Xs=u(Er*Lr,Q),ki=Er,ca=u(ki,ie);if(ca==null)var zs=null;else e(65536>=ki),zs=ca;var $s=o(ls);if(zs==null||$s==null||Xs==null){Jr.a=1;break n}var Bi=Xs;for(Us=fr=0;Us<Er;++Us){var Zr=zs[Us],qi=Zr.G,Ma=Zr.H,no=0,Ni=1,Vs=0;for(Mn=0;5>Mn;++Mn){Qr=ec[Mn],qi[Mn]=Bi,Ma[Mn]=fr,!Mn&&0<vs&&(Qr+=1<<vs);s:{var Al,Ho=Qr,Dc=Jr,jo=$s,ep=Bi,Rf=fr,ts=0,ro=Dc.m,If=ne(ro,1);if(a(jo,0,0,Ho),If){var Ff=ne(ro,1)+1,fd=ne(ro,1),hd=ne(ro,fd==0?1:8);jo[hd]=1,Ff==2&&(jo[hd=ne(ro,8)]=1);var Co=1}else{var cs=o(19),Js=ne(ro,4)+4;if(19<Js){Dc.a=3;var Hs=0;break s}for(Al=0;Al<Js;++Al)cs[pg[Al]]=ne(ro,3);var Rc=void 0,Wo=void 0,Ic=Dc,bg=cs,li=Ho,pd=jo,ku=0,Ao=Ic.m,so=8,ja=u(128,Q);r:for(;E(ja,0,7,bg,19);){if(ne(Ao,1)){var Tu=2+2*ne(Ao,3);if((Rc=2+ne(Ao,Tu))>li)break r}else Rc=li;for(Wo=0;Wo<li&&Rc--;){be(Ao);var md=ja[0+(127&oe(Ao))];ye(Ao,Ao.u+md.g);var _l=md.value;if(16>_l)pd[Wo++]=_l,_l!=0&&(so=_l);else{var tp=_l==16,Of=_l-16,np=cd[Of],Mf=ne(Ao,Cu[Of])+np;if(Wo+Mf>li)break r;for(var rp=tp?so:0;0<Mf--;)pd[Wo++]=rp}}ku=1;break r}ku||(Ic.a=3),Co=ku}(Co=Co&&!ro.h)&&(ts=E(ep,Rf,8,jo,Ho)),Co&&ts!=0?Hs=ts:(Dc.a=3,Hs=0)}if(Hs==0)break n;if(Ni&&Kh[Mn]==1&&(Ni=Bi[fr].g==0),no+=Bi[fr].g,fr+=Hs,3>=Mn){var Fc,gd=$s[0];for(Fc=1;Fc<Qr;++Fc)$s[Fc]>gd&&(gd=$s[Fc]);Vs+=gd}}if(Zr.nd=Ni,Zr.Qb=0,Ni&&(Zr.qb=(qi[3][Ma[3]+0].value<<24|qi[1][Ma[1]+0].value<<16|qi[2][Ma[2]+0].value)>>>0,no==0&&256>qi[0][Ma[0]+0].value&&(Zr.Qb=1,Zr.qb+=qi[0][Ma[0]+0].value<<8)),Zr.jc=!Zr.Qb&&6>Vs,Zr.jc){var Eu,Ca=Zr;for(Eu=0;Eu<Ia;++Eu){var Go=Eu,io=Ca.pd[Go],ic=Ca.G[0][Ca.H[0]+Go];256<=ic.value?(io.g=ic.g+256,io.value=ic.value):(io.g=0,io.value=0,Go>>=Ir(ic,8,io),Go>>=Ir(Ca.G[1][Ca.H[1]+Go],16,io),Go>>=Ir(Ca.G[2][Ca.H[2]+Go],0,io),Ir(Ca.G[3][Ca.H[3]+Go],24,io))}}}os.vc=br,os.Wb=Er,os.Ya=zs,os.yc=Xs,kt=1;break t}kt=0}if(!(Y=kt)){T.a=3;break e}if(0<$e){if(pe.ua=1<<$e,!ue(pe.Wa,$e)){T.a=1,Y=0;break e}}else pe.ua=0;var vd=T,xd=ee,sp=se,yd=vd.s,bd=yd.xc;if(vd.c=xd,vd.i=sp,yd.md=le(xd,bd),yd.wc=bd==0?-1:(1<<bd)-1,C){T.xb=So;break e}if((Te=o(ee*se))==null){T.a=1,Y=0;break e}Y=(Y=Qs(T,Te,0,ee,se,se,null))&&!ce.h;break e}return Y?(H!=null?H[0]=Te:(e(Te==null),e(C)),T.$=0,C||Rs(pe)):Rs(pe),Y}function Is(h,v){var C=h.c*h.i,T=C+v+16*v;return e(h.c<=v),h.V=o(T),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+C+v,1)}function kr(h,v){var C=h.C,T=v-C,H=h.V,Y=h.Ba+h.c*C;for(e(v<=h.l.o);0<T;){var ee=16<T?16:T,se=h.l.ma,ce=h.l.width,pe=ce*ee,Te=se.ca,$e=se.tb+ce*C,me=h.Ta,De=h.Ua;Di(h,ee,H,Y),Sf(me,De,Te,$e,pe),Hr(se,C,C+ee,Te,$e,ce),T-=ee,H+=ee*h.c,C+=ee}e(C==v),h.C=h.Ma=v}function Ns(){this.ub=this.yd=this.td=this.Rb=0}function Ci(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ga(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function wr(){this.Yb=(function(){var h=[];return(function v(C,T,H){for(var Y=H[T],ee=0;ee<Y&&(C.push(H.length>T+1?[]:0),!(H.length<T+1));ee++)v(C[ee],T+1,H)})(h,0,[3,11]),h})()}function Ai(){this.jb=o(3),this.Wc=c([4,8],wr),this.Xc=c([4,17],wr)}function is(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Xr(){this.ld=this.La=this.dd=this.tc=0}function sn(){this.Na=this.la=0}function pr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ln(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xr),this.Y=0,this.ya=Array(new Ln),this.aa=0,this.l=new ot}function On(){this.y=o(16),this.f=o(8),this.ea=o(8)}function yt(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Ns,this.Kc=new Ci,this.ed=new is,this.Qa=new Ga,this.Ic=this.$c=this.Aa=0,this.D=new Zt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,O),this.ia=0,this.pb=u(4,pr),this.Pa=new Ai,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new On),this.Hd=0,this.rb=Array(new sn),this.sb=0,this.wa=Array(new Xr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ln),this.L=this.aa=0,this.gd=c([4,2],Xr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xe(h,v){return 0>h?0:h>v?v:h}function ot(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function nt(){var h=new yt;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,tc||(tc=Tt)),h}function Ge(h,v,C){return h.a==0&&(h.a=v,h.sc=C,h.cb=0),0}function gt(h,v,C){return 3<=C&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function jt(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return Ge(h,2,"null VP8Io passed to VP8GetHeaders()");var C=v.data,T=v.w,H=v.ha;if(4>H)return Ge(h,7,"Truncated header.");var Y=C[T+0]|C[T+1]<<8|C[T+2]<<16,ee=h.Od;if(ee.Rb=!(1&Y),ee.td=Y>>1&7,ee.yd=Y>>4&1,ee.ub=Y>>5,3<ee.td)return Ge(h,3,"Incorrect keyframe parameters.");if(!ee.yd)return Ge(h,4,"Frame not displayable.");T+=3,H-=3;var se=h.Kc;if(ee.Rb){if(7>H)return Ge(h,7,"cannot parse picture header");if(!gt(C,T,H))return Ge(h,3,"Bad code word");se.c=16383&(C[T+4]<<8|C[T+3]),se.Td=C[T+4]>>6,se.i=16383&(C[T+6]<<8|C[T+5]),se.Ud=C[T+6]>>6,T+=7,H-=7,h.za=se.c+15>>4,h.Ub=se.i+15>>4,v.width=se.c,v.height=se.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a((Y=h.Pa).jb,0,255,Y.jb.length),e((Y=h.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,a(Y.Zb,0,0,Y.Zb.length),a(Y.Lb,0,0,Y.Lb)}if(ee.ub>H)return Ge(h,7,"bad partition length");Ce(Y=h.m,C,T,ee.ub),T+=ee.ub,H-=ee.ub,ee.Rb&&(se.Ld=Oe(Y),se.Kd=Oe(Y)),se=h.Qa;var ce,pe=h.Pa;if(e(Y!=null),e(se!=null),se.Cb=Oe(Y),se.Cb){if(se.Bb=Oe(Y),Oe(Y)){for(se.Fb=Oe(Y),ce=0;4>ce;++ce)se.Zb[ce]=Oe(Y)?ae(Y,7):0;for(ce=0;4>ce;++ce)se.Lb[ce]=Oe(Y)?ae(Y,6):0}if(se.Bb)for(ce=0;3>ce;++ce)pe.jb[ce]=Oe(Y)?te(Y,8):255}else se.Bb=0;if(Y.Ka)return Ge(h,3,"cannot parse segment header");if((se=h.ed).zd=Oe(Y),se.Tb=te(Y,6),se.wb=te(Y,3),se.Pc=Oe(Y),se.Pc&&Oe(Y)){for(pe=0;4>pe;++pe)Oe(Y)&&(se.vd[pe]=ae(Y,6));for(pe=0;4>pe;++pe)Oe(Y)&&(se.od[pe]=ae(Y,6))}if(h.L=se.Tb==0?0:se.zd?1:2,Y.Ka)return Ge(h,3,"cannot parse filter header");var Te=H;if(H=ce=T,T=ce+Te,se=Te,h.Xb=(1<<te(h.m,2))-1,Te<3*(pe=h.Xb))C=7;else{for(ce+=3*pe,se-=3*pe,Te=0;Te<pe;++Te){var $e=C[H+0]|C[H+1]<<8|C[H+2]<<16;$e>se&&($e=se),Ce(h.Jc[+Te],C,ce,$e),ce+=$e,se-=$e,H+=3}Ce(h.Jc[+pe],C,ce,se),C=ce<T?0:5}if(C!=0)return Ge(h,C,"cannot parse partitions");for(C=te(ce=h.m,7),H=Oe(ce)?ae(ce,4):0,T=Oe(ce)?ae(ce,4):0,se=Oe(ce)?ae(ce,4):0,pe=Oe(ce)?ae(ce,4):0,ce=Oe(ce)?ae(ce,4):0,Te=h.Qa,$e=0;4>$e;++$e){if(Te.Cb){var me=Te.Zb[$e];Te.Fb||(me+=C)}else{if(0<$e){h.pb[$e]=h.pb[0];continue}me=C}var De=h.pb[$e];De.Sc[0]=kc[Xe(me+H,127)],De.Sc[1]=Au[Xe(me+0,127)],De.Eb[0]=2*kc[Xe(me+T,127)],De.Eb[1]=101581*Au[Xe(me+se,127)]>>16,8>De.Eb[1]&&(De.Eb[1]=8),De.Qc[0]=kc[Xe(me+pe,117)],De.Qc[1]=Au[Xe(me+ce,127)],De.lc=me+ce}if(!ee.Rb)return Ge(h,4,"Not a key frame.");for(Oe(Y),ee=h.Pa,C=0;4>C;++C){for(H=0;8>H;++H)for(T=0;3>T;++T)for(se=0;11>se;++se)pe=ze(Y,vg[C][H][T][se])?te(Y,8):Yh[C][H][T][se],ee.Wc[C][H].Yb[T][se]=pe;for(H=0;17>H;++H)ee.Xc[C][H]=ee.Wc[C][Ef[H]]}return h.kc=Oe(Y),h.kc&&(h.Bd=te(Y,8)),h.cb=1}function Tt(h,v,C,T,H,Y,ee){var se=v[H].Yb[C];for(C=0;16>H;++H){if(!ze(h,se[C+0]))return H;for(;!ze(h,se[C+1]);)if(se=v[++H].Yb[0],C=0,H==16)return 16;var ce=v[H+1].Yb;if(ze(h,se[C+2])){var pe=h,Te=0;if(ze(pe,(me=se)[($e=C)+3]))if(ze(pe,me[$e+6])){for(se=0,$e=2*(Te=ze(pe,me[$e+8]))+(me=ze(pe,me[$e+9+Te])),Te=0,me=kf[$e];me[se];++se)Te+=Te+ze(pe,me[se]);Te+=3+(8<<$e)}else ze(pe,me[$e+7])?(Te=7+2*ze(pe,165),Te+=ze(pe,145)):Te=5+ze(pe,159);else Te=ze(pe,me[$e+4])?3+ze(pe,me[$e+5]):2;se=ce[2]}else Te=1,se=ce[1];ce=ee+Tf[H],0>(pe=h).b&&Le(pe);var $e,me=pe.b,De=($e=pe.Ca>>1)-(pe.I>>me)>>31;--pe.b,pe.Ca+=De,pe.Ca|=1,pe.I-=($e+1&De)<<me,Y[ce]=((Te^De)-De)*T[(0<H)+0]}return 16}function Rt(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function It(h,v,C,T,H){H=h[v+C+32*T]+(H>>3),h[v+C+32*T]=-256&H?0>H?0:255:H}function Dt(h,v,C,T,H,Y){It(h,v,0,C,T+H),It(h,v,1,C,T+Y),It(h,v,2,C,T-Y),It(h,v,3,C,T-H)}function Lt(h){return(20091*h>>16)+h}function Ft(h,v,C,T){var H,Y=0,ee=o(16);for(H=0;4>H;++H){var se=h[v+0]+h[v+8],ce=h[v+0]-h[v+8],pe=(35468*h[v+4]>>16)-Lt(h[v+12]),Te=Lt(h[v+4])+(35468*h[v+12]>>16);ee[Y+0]=se+Te,ee[Y+1]=ce+pe,ee[Y+2]=ce-pe,ee[Y+3]=se-Te,Y+=4,v++}for(H=Y=0;4>H;++H)se=(h=ee[Y+0]+4)+ee[Y+8],ce=h-ee[Y+8],pe=(35468*ee[Y+4]>>16)-Lt(ee[Y+12]),It(C,T,0,0,se+(Te=Lt(ee[Y+4])+(35468*ee[Y+12]>>16))),It(C,T,1,0,ce+pe),It(C,T,2,0,ce-pe),It(C,T,3,0,se-Te),Y++,T+=32}function qt(h,v,C,T){var H=h[v+0]+4,Y=35468*h[v+4]>>16,ee=Lt(h[v+4]),se=35468*h[v+1]>>16;Dt(C,T,0,H+ee,h=Lt(h[v+1]),se),Dt(C,T,1,H+Y,h,se),Dt(C,T,2,H-Y,h,se),Dt(C,T,3,H-ee,h,se)}function vn(h,v,C,T,H){Ft(h,v,C,T),H&&Ft(h,v+16,C,T+4)}function xr(h,v,C,T){Zl(h,v+0,C,T,1),Zl(h,v+32,C,T+128,1)}function Un(h,v,C,T){var H;for(h=h[v+0]+4,H=0;4>H;++H)for(v=0;4>v;++v)It(C,T,v,H,h)}function zt(h,v,C,T){h[v+0]&&Tr(h,v+0,C,T),h[v+16]&&Tr(h,v+16,C,T+4),h[v+32]&&Tr(h,v+32,C,T+128),h[v+48]&&Tr(h,v+48,C,T+128+4)}function An(h,v,C,T){var H,Y=o(16);for(H=0;4>H;++H){var ee=h[v+0+H]+h[v+12+H],se=h[v+4+H]+h[v+8+H],ce=h[v+4+H]-h[v+8+H],pe=h[v+0+H]-h[v+12+H];Y[0+H]=ee+se,Y[8+H]=ee-se,Y[4+H]=pe+ce,Y[12+H]=pe-ce}for(H=0;4>H;++H)ee=(h=Y[0+4*H]+3)+Y[3+4*H],se=Y[1+4*H]+Y[2+4*H],ce=Y[1+4*H]-Y[2+4*H],pe=h-Y[3+4*H],C[T+0]=ee+se>>3,C[T+16]=pe+ce>>3,C[T+32]=ee-se>>3,C[T+48]=pe-ce>>3,T+=64}function xn(h,v,C){var T,H=v-32,Y=Yi,ee=255-h[H-1];for(T=0;T<C;++T){var se,ce=Y,pe=ee+h[v-1];for(se=0;se<C;++se)h[v+se]=ce[pe+h[H+se]];v+=32}}function dr(h,v){xn(h,v,4)}function Dn(h,v){xn(h,v,8)}function F(h,v){xn(h,v,16)}function de(h,v){var C;for(C=0;16>C;++C)r(h,v+32*C,h,v-32,16)}function we(h,v){var C;for(C=16;0<C;--C)a(h,v,h[v-1],16),v+=32}function Ae(h,v,C){var T;for(T=0;16>T;++T)a(v,C+32*T,h,16)}function Se(h,v){var C,T=16;for(C=0;16>C;++C)T+=h[v-1+32*C]+h[v+C-32];Ae(T>>5,h,v)}function At(h,v){var C,T=8;for(C=0;16>C;++C)T+=h[v-1+32*C];Ae(T>>4,h,v)}function Vn(h,v){var C,T=8;for(C=0;16>C;++C)T+=h[v+C-32];Ae(T>>4,h,v)}function $t(h,v){Ae(128,h,v)}function Ot(h,v,C){return h+2*v+C+2>>2}function as(h,v){var C,T=v-32;for(T=new Uint8Array([Ot(h[T-1],h[T+0],h[T+1]),Ot(h[T+0],h[T+1],h[T+2]),Ot(h[T+1],h[T+2],h[T+3]),Ot(h[T+2],h[T+3],h[T+4])]),C=0;4>C;++C)r(h,v+32*C,T,0,T.length)}function Ka(h,v){var C=h[v-1],T=h[v-1+32],H=h[v-1+64],Y=h[v-1+96];Ze(h,v+0,16843009*Ot(h[v-1-32],C,T)),Ze(h,v+32,16843009*Ot(C,T,H)),Ze(h,v+64,16843009*Ot(T,H,Y)),Ze(h,v+96,16843009*Ot(H,Y,Y))}function Qa(h,v){var C,T=4;for(C=0;4>C;++C)T+=h[v+C-32]+h[v-1+32*C];for(T>>=3,C=0;4>C;++C)a(h,v+32*C,T,4)}function Fs(h,v){var C=h[v-1+0],T=h[v-1+32],H=h[v-1+64],Y=h[v-1-32],ee=h[v+0-32],se=h[v+1-32],ce=h[v+2-32],pe=h[v+3-32];h[v+0+96]=Ot(T,H,h[v-1+96]),h[v+1+96]=h[v+0+64]=Ot(C,T,H),h[v+2+96]=h[v+1+64]=h[v+0+32]=Ot(Y,C,T),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=Ot(ee,Y,C),h[v+3+64]=h[v+2+32]=h[v+1+0]=Ot(se,ee,Y),h[v+3+32]=h[v+2+0]=Ot(ce,se,ee),h[v+3+0]=Ot(pe,ce,se)}function ra(h,v){var C=h[v+1-32],T=h[v+2-32],H=h[v+3-32],Y=h[v+4-32],ee=h[v+5-32],se=h[v+6-32],ce=h[v+7-32];h[v+0+0]=Ot(h[v+0-32],C,T),h[v+1+0]=h[v+0+32]=Ot(C,T,H),h[v+2+0]=h[v+1+32]=h[v+0+64]=Ot(T,H,Y),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=Ot(H,Y,ee),h[v+3+32]=h[v+2+64]=h[v+1+96]=Ot(Y,ee,se),h[v+3+64]=h[v+2+96]=Ot(ee,se,ce),h[v+3+96]=Ot(se,ce,ce)}function vl(h,v){var C=h[v-1+0],T=h[v-1+32],H=h[v-1+64],Y=h[v-1-32],ee=h[v+0-32],se=h[v+1-32],ce=h[v+2-32],pe=h[v+3-32];h[v+0+0]=h[v+1+64]=Y+ee+1>>1,h[v+1+0]=h[v+2+64]=ee+se+1>>1,h[v+2+0]=h[v+3+64]=se+ce+1>>1,h[v+3+0]=ce+pe+1>>1,h[v+0+96]=Ot(H,T,C),h[v+0+64]=Ot(T,C,Y),h[v+0+32]=h[v+1+96]=Ot(C,Y,ee),h[v+1+32]=h[v+2+96]=Ot(Y,ee,se),h[v+2+32]=h[v+3+96]=Ot(ee,se,ce),h[v+3+32]=Ot(se,ce,pe)}function bt(h,v){var C=h[v+0-32],T=h[v+1-32],H=h[v+2-32],Y=h[v+3-32],ee=h[v+4-32],se=h[v+5-32],ce=h[v+6-32],pe=h[v+7-32];h[v+0+0]=C+T+1>>1,h[v+1+0]=h[v+0+64]=T+H+1>>1,h[v+2+0]=h[v+1+64]=H+Y+1>>1,h[v+3+0]=h[v+2+64]=Y+ee+1>>1,h[v+0+32]=Ot(C,T,H),h[v+1+32]=h[v+0+96]=Ot(T,H,Y),h[v+2+32]=h[v+1+96]=Ot(H,Y,ee),h[v+3+32]=h[v+2+96]=Ot(Y,ee,se),h[v+3+64]=Ot(ee,se,ce),h[v+3+96]=Ot(se,ce,pe)}function er(h,v){var C=h[v-1+0],T=h[v-1+32],H=h[v-1+64],Y=h[v-1+96];h[v+0+0]=C+T+1>>1,h[v+2+0]=h[v+0+32]=T+H+1>>1,h[v+2+32]=h[v+0+64]=H+Y+1>>1,h[v+1+0]=Ot(C,T,H),h[v+3+0]=h[v+1+32]=Ot(T,H,Y),h[v+3+32]=h[v+1+64]=Ot(H,Y,Y),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=Y}function Lo(h,v){var C=h[v-1+0],T=h[v-1+32],H=h[v-1+64],Y=h[v-1+96],ee=h[v-1-32],se=h[v+0-32],ce=h[v+1-32],pe=h[v+2-32];h[v+0+0]=h[v+2+32]=C+ee+1>>1,h[v+0+32]=h[v+2+64]=T+C+1>>1,h[v+0+64]=h[v+2+96]=H+T+1>>1,h[v+0+96]=Y+H+1>>1,h[v+3+0]=Ot(se,ce,pe),h[v+2+0]=Ot(ee,se,ce),h[v+1+0]=h[v+3+32]=Ot(C,ee,se),h[v+1+32]=h[v+3+64]=Ot(T,C,ee),h[v+1+64]=h[v+3+96]=Ot(H,T,C),h[v+1+96]=Ot(Y,H,T)}function Wi(h,v){var C;for(C=0;8>C;++C)r(h,v+32*C,h,v-32,8)}function Za(h,v){var C;for(C=0;8>C;++C)a(h,v,h[v-1],8),v+=32}function vi(h,v,C){var T;for(T=0;8>T;++T)a(v,C+32*T,h,8)}function ba(h,v){var C,T=8;for(C=0;8>C;++C)T+=h[v+C-32]+h[v-1+32*C];vi(T>>4,h,v)}function Wr(h,v){var C,T=4;for(C=0;8>C;++C)T+=h[v+C-32];vi(T>>3,h,v)}function Os(h,v){var C,T=4;for(C=0;8>C;++C)T+=h[v-1+32*C];vi(T>>3,h,v)}function Ii(h,v){vi(128,h,v)}function Ms(h,v,C){var T=h[v-C],H=h[v+0],Y=3*(H-T)+No[1020+h[v-2*C]-h[v+C]],ee=_c[112+(Y+4>>3)];h[v-C]=Yi[255+T+_c[112+(Y+3>>3)]],h[v+0]=Yi[255+H-ee]}function Do(h,v,C,T){var H=h[v+0],Y=h[v+C];return Fa[255+h[v-2*C]-h[v-C]]>T||Fa[255+Y-H]>T}function Ro(h,v,C,T){return 4*Fa[255+h[v-C]-h[v+0]]+Fa[255+h[v-2*C]-h[v+C]]<=T}function Gi(h,v,C,T,H){var Y=h[v-3*C],ee=h[v-2*C],se=h[v-C],ce=h[v+0],pe=h[v+C],Te=h[v+2*C],$e=h[v+3*C];return 4*Fa[255+se-ce]+Fa[255+ee-pe]>T?0:Fa[255+h[v-4*C]-Y]<=H&&Fa[255+Y-ee]<=H&&Fa[255+ee-se]<=H&&Fa[255+$e-Te]<=H&&Fa[255+Te-pe]<=H&&Fa[255+pe-ce]<=H}function Ya(h,v,C,T){var H=2*T+1;for(T=0;16>T;++T)Ro(h,v+T,C,H)&&Ms(h,v+T,C)}function go(h,v,C,T){var H=2*T+1;for(T=0;16>T;++T)Ro(h,v+T*C,1,H)&&Ms(h,v+T*C,1)}function Io(h,v,C,T){var H;for(H=3;0<H;--H)Ya(h,v+=4*C,C,T)}function vo(h,v,C,T){var H;for(H=3;0<H;--H)go(h,v+=4,C,T)}function ms(h,v,C,T,H,Y,ee,se){for(Y=2*Y+1;0<H--;){if(Gi(h,v,C,Y,ee))if(Do(h,v,C,se))Ms(h,v,C);else{var ce=h,pe=v,Te=C,$e=ce[pe-2*Te],me=ce[pe-Te],De=ce[pe+0],Ue=ce[pe+Te],rt=ce[pe+2*Te],He=27*(tt=No[1020+3*(De-me)+No[1020+$e-Ue]])+63>>7,et=18*tt+63>>7,tt=9*tt+63>>7;ce[pe-3*Te]=Yi[255+ce[pe-3*Te]+tt],ce[pe-2*Te]=Yi[255+$e+et],ce[pe-Te]=Yi[255+me+He],ce[pe+0]=Yi[255+De-He],ce[pe+Te]=Yi[255+Ue-et],ce[pe+2*Te]=Yi[255+rt-tt]}v+=T}}function Bs(h,v,C,T,H,Y,ee,se){for(Y=2*Y+1;0<H--;){if(Gi(h,v,C,Y,ee))if(Do(h,v,C,se))Ms(h,v,C);else{var ce=h,pe=v,Te=C,$e=ce[pe-Te],me=ce[pe+0],De=ce[pe+Te],Ue=_c[112+(4+(rt=3*(me-$e))>>3)],rt=_c[112+(rt+3>>3)],He=Ue+1>>1;ce[pe-2*Te]=Yi[255+ce[pe-2*Te]+He],ce[pe-Te]=Yi[255+$e+rt],ce[pe+0]=Yi[255+me-Ue],ce[pe+Te]=Yi[255+De-He]}v+=T}}function ai(h,v,C,T,H,Y){ms(h,v,C,1,16,T,H,Y)}function Ki(h,v,C,T,H,Y){ms(h,v,1,C,16,T,H,Y)}function xi(h,v,C,T,H,Y){var ee;for(ee=3;0<ee;--ee)Bs(h,v+=4*C,C,1,16,T,H,Y)}function b(h,v,C,T,H,Y){var ee;for(ee=3;0<ee;--ee)Bs(h,v+=4,1,C,16,T,H,Y)}function V(h,v,C,T,H,Y,ee,se){ms(h,v,H,1,8,Y,ee,se),ms(C,T,H,1,8,Y,ee,se)}function ge(h,v,C,T,H,Y,ee,se){ms(h,v,1,H,8,Y,ee,se),ms(C,T,1,H,8,Y,ee,se)}function ke(h,v,C,T,H,Y,ee,se){Bs(h,v+4*H,H,1,8,Y,ee,se),Bs(C,T+4*H,H,1,8,Y,ee,se)}function Be(h,v,C,T,H,Y,ee,se){Bs(h,v+4,1,H,8,Y,ee,se),Bs(C,T+4,1,H,8,Y,ee,se)}function st(){this.ba=new on,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function dt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new dn,this.vb=new dn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new Q}function Rn(){this.xb=this.a=0,this.l=new ot,this.ca=new on,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=u(4,Yt),this.Oc=0}function In(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ot,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(h,v,C,T,H,Y,ee){for(h=h==null?0:h[v+0],v=0;v<ee;++v)H[Y+v]=h+C[T+v]&255,h=H[Y+v]}function Et(h,v,C,T,H,Y,ee){var se;if(h==null)yr(null,null,C,T,H,Y,ee);else for(se=0;se<ee;++se)H[Y+se]=h[v+se]+C[T+se]&255}function wn(h,v,C,T,H,Y,ee){if(h==null)yr(null,null,C,T,H,Y,ee);else{var se,ce=h[v+0],pe=ce,Te=ce;for(se=0;se<ee;++se)pe=Te+(ce=h[v+se])-pe,Te=C[T+se]+(-256&pe?0>pe?0:255:pe)&255,pe=ce,H[Y+se]=Te}}function Vt(h,v,C,T){var H=v.width,Y=v.o;if(e(h!=null&&v!=null),0>C||0>=T||C+T>Y)return null;if(!h.Cc){if(h.ga==null){var ee;if(h.ga=new In,(ee=h.ga==null)||(ee=v.width*v.o,e(h.Gb.length==0),h.Gb=o(ee),h.Uc=0,h.Gb==null?ee=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,ee=1),ee=!ee),!ee){ee=h.ga;var se=h.Fa,ce=h.P,pe=h.qc,Te=h.mb,$e=h.nb,me=ce+1,De=pe-1,Ue=ee.l;if(e(se!=null&&Te!=null&&v!=null),Oi[0]=null,Oi[1]=yr,Oi[2]=Et,Oi[3]=wn,ee.ca=Te,ee.tb=$e,ee.c=v.width,ee.i=v.height,e(0<ee.c&&0<ee.i),1>=pe)v=0;else if(ee.$a=3&se[ce+0],ee.Z=se[ce+0]>>2&3,ee.Lc=se[ce+0]>>4&3,ce=se[ce+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||ce)v=0;else if(Ue.put=Mt,Ue.ac=Nr,Ue.bc=vr,Ue.ma=ee,Ue.width=v.width,Ue.height=v.height,Ue.Da=v.Da,Ue.v=v.v,Ue.va=v.va,Ue.j=v.j,Ue.o=v.o,ee.$a)e:{e(ee.$a==1),v=Ri();t:for(;;){if(v==null){v=0;break e}if(e(ee!=null),ee.mc=v,v.c=ee.c,v.i=ee.i,v.l=ee.l,v.l.ma=ee,v.l.width=ee.c,v.l.height=ee.i,v.a=0,Ne(v.m,se,me,De),!ws(ee.c,ee.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&ps(v.s)?(ee.ic=1,se=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(se),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(ee.ic=0,v=Is(v,ee.c)),!v))break t;v=1;break e}ee.mc=null,v=0}else v=De>=ee.c*ee.i;ee=!v}if(ee)return null;h.ga.Lc!=1?h.Ga=0:T=Y-C}e(h.ga!=null),e(C+T<=Y);e:{if(v=(se=h.ga).c,Y=se.l.o,se.$a==0){if(me=h.rc,De=h.Vc,Ue=h.Fa,ce=h.P+1+C*v,pe=h.mb,Te=h.nb+C*v,e(ce<=h.P+h.qc),se.Z!=0)for(e(Oi[se.Z]!=null),ee=0;ee<T;++ee)Oi[se.Z](me,De,Ue,ce,pe,Te,v),me=pe,De=Te,Te+=v,ce+=v;else for(ee=0;ee<T;++ee)r(pe,Te,Ue,ce,v),me=pe,De=Te,Te+=v,ce+=v;h.rc=me,h.Vc=De}else{if(e(se.mc!=null),v=C+T,e((ee=se.mc)!=null),e(v<=ee.i),ee.C>=v)v=1;else if(se.ic||es(),se.ic){se=ee.V,me=ee.Ba,De=ee.c;var rt=ee.i,He=(Ue=1,ce=ee.$/De,pe=ee.$%De,Te=ee.m,$e=ee.s,ee.$),et=De*rt,tt=De*v,at=$e.wc,ct=He<tt?Pr($e,pe,ce):null;e(He<=et),e(v<=rt),e(ps($e));t:for(;;){for(;!Te.h&&He<tt;){if(pe&at||(ct=Pr($e,pe,ce)),e(ct!=null),be(Te),256>(rt=Sr(ct.G[0],ct.H[0],Te)))se[me+He]=rt,++He,++pe>=De&&(pe=0,++ce<=v&&!(ce%16)&&hr(ee,ce));else{if(!(280>rt)){Ue=0;break t}rt=hs(rt-256,Te);var fn,Kt=Sr(ct.G[4],ct.H[4],Te);if(be(Te),!(He>=(Kt=Ls(De,Kt=hs(Kt,Te)))&&et-He>=rt)){Ue=0;break t}for(fn=0;fn<rt;++fn)se[me+He+fn]=se[me+He+fn-Kt];for(He+=rt,pe+=rt;pe>=De;)pe-=De,++ce<=v&&!(ce%16)&&hr(ee,ce);He<tt&&pe&at&&(ct=Pr($e,pe,ce))}e(Te.h==ve(Te))}hr(ee,ce>v?v:ce);break t}!Ue||Te.h&&He<et?(Ue=0,ee.a=Te.h?5:3):ee.$=He,v=Ue}else v=Qs(ee,ee.V,ee.Ba,ee.c,ee.i,v,kr);if(!v){T=0;break e}}C+T>=Y&&(h.Cc=1),T=1}if(!T)return null;if(h.Cc&&((T=h.ga)!=null&&(T.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+C*H}function yn(h,v,C,T,H,Y){for(;0<H--;){var ee,se=h,ce=v+(C?1:0),pe=h,Te=v+(C?0:3);for(ee=0;ee<T;++ee){var $e=pe[Te+4*ee];$e!=255&&($e*=32897,se[ce+4*ee+0]=se[ce+4*ee+0]*$e>>23,se[ce+4*ee+1]=se[ce+4*ee+1]*$e>>23,se[ce+4*ee+2]=se[ce+4*ee+2]*$e>>23)}v+=Y}}function zn(h,v,C,T,H){for(;0<T--;){var Y;for(Y=0;Y<C;++Y){var ee=h[v+2*Y+0],se=15&(pe=h[v+2*Y+1]),ce=4369*se,pe=(240&pe|pe>>4)*ce>>16;h[v+2*Y+0]=(240&ee|ee>>4)*ce>>16&240|(15&ee|ee<<4)*ce>>16>>4&15,h[v+2*Y+1]=240&pe|se}v+=H}}function jr(h,v,C,T,H,Y,ee,se){var ce,pe,Te=255;for(pe=0;pe<H;++pe){for(ce=0;ce<T;++ce){var $e=h[v+ce];Y[ee+4*ce]=$e,Te&=$e}v+=C,ee+=se}return Te!=255}function Ss(h,v,C,T,H){var Y;for(Y=0;Y<H;++Y)C[T+Y]=h[v+Y]>>8}function es(){Xl=yn,Nf=zn,bu=jr,Sf=Ss}function js(h,v,C){W[h]=function(T,H,Y,ee,se,ce,pe,Te,$e,me,De,Ue,rt,He,et,tt,at){var ct,fn=at-1>>1,Kt=se[ce+0]|pe[Te+0]<<16,Qn=$e[me+0]|De[Ue+0]<<16;e(T!=null);var en=3*Kt+Qn+131074>>2;for(v(T[H+0],255&en,en>>16,rt,He),Y!=null&&(en=3*Qn+Kt+131074>>2,v(Y[ee+0],255&en,en>>16,et,tt)),ct=1;ct<=fn;++ct){var mr=se[ce+ct]|pe[Te+ct]<<16,Ps=$e[me+ct]|De[Ue+ct]<<16,Yn=Kt+mr+Qn+Ps+524296,Qt=Yn+2*(mr+Qn)>>3;en=Qt+Kt>>1,Kt=(Yn=Yn+2*(Kt+Ps)>>3)+mr>>1,v(T[H+2*ct-1],255&en,en>>16,rt,He+(2*ct-1)*C),v(T[H+2*ct-0],255&Kt,Kt>>16,rt,He+(2*ct-0)*C),Y!=null&&(en=Yn+Qn>>1,Kt=Qt+Ps>>1,v(Y[ee+2*ct-1],255&en,en>>16,et,tt+(2*ct-1)*C),v(Y[ee+2*ct+0],255&Kt,Kt>>16,et,tt+(2*ct+0)*C)),Kt=mr,Qn=Ps}1&at||(en=3*Kt+Qn+131074>>2,v(T[H+at-1],255&en,en>>16,rt,He+(at-1)*C),Y!=null&&(en=3*Qn+Kt+131074>>2,v(Y[ee+at-1],255&en,en>>16,et,tt+(at-1)*C)))}}function Cs(){aa[od]=xg,aa[Sl]=jl,aa[Gh]=yg,aa[wu]=Ec,aa[Nu]=nc,aa[Gr]=_u,aa[ld]=Lf,aa[Pc]=jl,aa[Jl]=Ec,aa[Su]=nc,aa[ju]=_u}function _i(h){return h&-16384?0>h?0:255:h>>Cl}function Qi(h,v){return _i((19077*h>>8)+(26149*v>>8)-14234)}function yi(h,v,C){return _i((19077*h>>8)-(6419*v>>8)-(13320*C>>8)+8708)}function Wt(h,v){return _i((19077*h>>8)+(33050*v>>8)-17685)}function Fi(h,v,C,T,H){T[H+0]=Qi(h,C),T[H+1]=yi(h,v,C),T[H+2]=Wt(h,v)}function gs(h,v,C,T,H){T[H+0]=Wt(h,v),T[H+1]=yi(h,v,C),T[H+2]=Qi(h,C)}function Fo(h,v,C,T,H){var Y=yi(h,v,C);v=Y<<3&224|Wt(h,v)>>3,T[H+0]=248&Qi(h,C)|Y>>5,T[H+1]=v}function Oo(h,v,C,T,H){var Y=240&Wt(h,v)|15;T[H+0]=240&Qi(h,C)|yi(h,v,C)>>4,T[H+1]=Y}function gu(h,v,C,T,H){T[H+0]=255,Fi(h,v,C,T,H+1)}function vu(h,v,C,T,H){gs(h,v,C,T,H),T[H+3]=255}function Zi(h,v,C,T,H){Fi(h,v,C,T,H),T[H+3]=255}function Xa(h,v,C){W[h]=function(T,H,Y,ee,se,ce,pe,Te,$e){for(var me=Te+(-2&$e)*C;Te!=me;)v(T[H+0],Y[ee+0],se[ce+0],pe,Te),v(T[H+1],Y[ee+0],se[ce+0],pe,Te+C),H+=2,++ee,++ce,Te+=2*C;1&$e&&v(T[H+0],Y[ee+0],se[ce+0],pe,Te)}}function xo(h,v,C){return C==0?h==0?v==0?6:5:v==0?4:0:C}function sd(h,v,C,T,H){switch(h>>>30){case 3:Zl(v,C,T,H,0);break;case 2:As(v,C,T,H);break;case 1:Tr(v,C,T,H)}}function wa(h,v){var C,T,H=v.M,Y=v.Nb,ee=h.oc,se=h.pc+40,ce=h.oc,pe=h.pc+584,Te=h.oc,$e=h.pc+600;for(C=0;16>C;++C)ee[se+32*C-1]=129;for(C=0;8>C;++C)ce[pe+32*C-1]=129,Te[$e+32*C-1]=129;for(0<H?ee[se-1-32]=ce[pe-1-32]=Te[$e-1-32]=129:(a(ee,se-32-1,127,21),a(ce,pe-32-1,127,9),a(Te,$e-32-1,127,9)),T=0;T<h.za;++T){var me=v.ya[v.aa+T];if(0<T){for(C=-1;16>C;++C)r(ee,se+32*C-4,ee,se+32*C+12,4);for(C=-1;8>C;++C)r(ce,pe+32*C-4,ce,pe+32*C+4,4),r(Te,$e+32*C-4,Te,$e+32*C+4,4)}var De=h.Gd,Ue=h.Hd+T,rt=me.ad,He=me.Hc;if(0<H&&(r(ee,se-32,De[Ue].y,0,16),r(ce,pe-32,De[Ue].f,0,8),r(Te,$e-32,De[Ue].ea,0,8)),me.Za){var et=ee,tt=se-32+16;for(0<H&&(T>=h.za-1?a(et,tt,De[Ue].y[15],4):r(et,tt,De[Ue+1].y,0,4)),C=0;4>C;C++)et[tt+128+C]=et[tt+256+C]=et[tt+384+C]=et[tt+0+C];for(C=0;16>C;++C,He<<=2)et=ee,tt=se+Df[C],Oa[me.Ob[C]](et,tt),sd(He,rt,16*+C,et,tt)}else if(et=xo(T,H,me.Ob[0]),Xi[et](ee,se),He!=0)for(C=0;16>C;++C,He<<=2)sd(He,rt,16*+C,ee,se+Df[C]);for(C=me.Gc,et=xo(T,H,me.Dd),ia[et](ce,pe),ia[et](Te,$e),He=rt,et=ce,tt=pe,255&(me=0|C)&&(170&me?sa(He,256,et,tt):qr(He,256,et,tt)),me=Te,He=$e,255&(C>>=8)&&(170&C?sa(rt,320,me,He):qr(rt,320,me,He)),H<h.Ub-1&&(r(De[Ue].y,0,ee,se+480,16),r(De[Ue].f,0,ce,pe+224,8),r(De[Ue].ea,0,Te,$e+224,8)),C=8*Y*h.B,De=h.sa,Ue=h.ta+16*T+16*Y*h.R,rt=h.qa,me=h.ra+8*T+C,He=h.Ha,et=h.Ia+8*T+C,C=0;16>C;++C)r(De,Ue+C*h.R,ee,se+32*C,16);for(C=0;8>C;++C)r(rt,me+C*h.B,ce,pe+32*C,8),r(He,et+C*h.B,Te,$e+32*C,8)}}function xl(h,v,C,T,H,Y,ee,se,ce){var pe=[0],Te=[0],$e=0,me=ce!=null?ce.kd:0,De=ce??new dt;if(h==null||12>C)return 7;De.data=h,De.w=v,De.ha=C,v=[v],C=[C],De.gb=[De.gb];e:{var Ue=v,rt=C,He=De.gb;if(e(h!=null),e(rt!=null),e(He!=null),He[0]=0,12<=rt[0]&&!n(h,Ue[0],"RIFF")){if(n(h,Ue[0]+8,"WEBP")){He=3;break e}var et=_t(h,Ue[0]+4);if(12>et||4294967286<et){He=3;break e}if(me&&et>rt[0]-8){He=7;break e}He[0]=et,Ue[0]+=12,rt[0]-=12}He=0}if(He!=0)return He;for(et=0<De.gb[0],C=C[0];;){e:{var tt=h;rt=v,He=C;var at=pe,ct=Te,fn=Ue=[0];if((en=$e=[$e])[0]=0,8>He[0])He=7;else{if(!n(tt,rt[0],"VP8X")){if(_t(tt,rt[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var Kt=_t(tt,rt[0]+8),Qn=1+ut(tt,rt[0]+12);if(2147483648<=Qn*(tt=1+ut(tt,rt[0]+15))){He=3;break e}fn!=null&&(fn[0]=Kt),at!=null&&(at[0]=Qn),ct!=null&&(ct[0]=tt),rt[0]+=18,He[0]-=18,en[0]=1}He=0}}if($e=$e[0],Ue=Ue[0],He!=0)return He;if(rt=!!(2&Ue),!et&&$e)return 3;if(Y!=null&&(Y[0]=!!(16&Ue)),ee!=null&&(ee[0]=rt),se!=null&&(se[0]=0),ee=pe[0],Ue=Te[0],$e&&rt&&ce==null){He=0;break}if(4>C){He=7;break}if(et&&$e||!et&&!$e&&!n(h,v[0],"ALPH")){C=[C],De.na=[De.na],De.P=[De.P],De.Sa=[De.Sa];e:{Kt=h,He=v,et=C;var en=De.gb;at=De.na,ct=De.P,fn=De.Sa,Qn=22,e(Kt!=null),e(et!=null),tt=He[0];var mr=et[0];for(e(at!=null),e(fn!=null),at[0]=null,ct[0]=null,fn[0]=0;;){if(He[0]=tt,et[0]=mr,8>mr){He=7;break e}var Ps=_t(Kt,tt+4);if(4294967286<Ps){He=3;break e}var Yn=8+Ps+1&-2;if(Qn+=Yn,0<en&&Qn>en){He=3;break e}if(!n(Kt,tt,"VP8 ")||!n(Kt,tt,"VP8L")){He=0;break e}if(mr[0]<Yn){He=7;break e}n(Kt,tt,"ALPH")||(at[0]=Kt,ct[0]=tt+8,fn[0]=Ps),tt+=Yn,mr-=Yn}}if(C=C[0],De.na=De.na[0],De.P=De.P[0],De.Sa=De.Sa[0],He!=0)break}C=[C],De.Ja=[De.Ja],De.xa=[De.xa];e:if(en=h,He=v,et=C,at=De.gb[0],ct=De.Ja,fn=De.xa,Kt=He[0],tt=!n(en,Kt,"VP8 "),Qn=!n(en,Kt,"VP8L"),e(en!=null),e(et!=null),e(ct!=null),e(fn!=null),8>et[0])He=7;else{if(tt||Qn){if(en=_t(en,Kt+4),12<=at&&en>at-12){He=3;break e}if(me&&en>et[0]-8){He=7;break e}ct[0]=en,He[0]+=8,et[0]-=8,fn[0]=Qn}else fn[0]=5<=et[0]&&en[Kt+0]==47&&!(en[Kt+4]>>5),ct[0]=et[0];He=0}if(C=C[0],De.Ja=De.Ja[0],De.xa=De.xa[0],v=v[0],He!=0)break;if(4294967286<De.Ja)return 3;if(se==null||rt||(se[0]=De.xa?2:1),ee=[ee],Ue=[Ue],De.xa){if(5>C){He=7;break}se=ee,me=Ue,rt=Y,h==null||5>C?h=0:5<=C&&h[v+0]==47&&!(h[v+4]>>5)?(et=[0],en=[0],at=[0],Ne(ct=new L,h,v,C),fs(ct,et,en,at)?(se!=null&&(se[0]=et[0]),me!=null&&(me[0]=en[0]),rt!=null&&(rt[0]=at[0]),h=1):h=0):h=0}else{if(10>C){He=7;break}se=Ue,h==null||10>C||!gt(h,v+3,C-3)?h=0:(me=h[v+0]|h[v+1]<<8|h[v+2]<<16,rt=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=De.Ja||!rt||!h?h=0:(ee&&(ee[0]=rt),se&&(se[0]=h),h=1))}if(!h||(ee=ee[0],Ue=Ue[0],$e&&(pe[0]!=ee||Te[0]!=Ue)))return 3;ce!=null&&(ce[0]=De,ce.offset=v-ce.w,e(4294967286>v-ce.w),e(ce.offset==ce.ha-C));break}return He==0||He==7&&$e&&ce==null?(Y!=null&&(Y[0]|=De.na!=null&&0<De.na.length),T!=null&&(T[0]=ee),H!=null&&(H[0]=Ue),0):He}function wc(h,v,C){var T=v.width,H=v.height,Y=0,ee=0,se=T,ce=H;if(v.Da=h!=null&&0<h.Da,v.Da&&(se=h.cd,ce=h.bd,Y=h.v,ee=h.j,11>C||(Y&=-2,ee&=-2),0>Y||0>ee||0>=se||0>=ce||Y+se>T||ee+ce>H))return 0;if(v.v=Y,v.j=ee,v.va=Y+se,v.o=ee+ce,v.U=se,v.T=ce,v.da=h!=null&&0<h.da,v.da){if(!Jt(se,ce,C=[h.ib],Y=[h.hb]))return 0;v.ib=C[0],v.hb=Y[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*T/4&&v.hb<3*H/4,v.Kb=0),1}function Nc(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Mo(h,v,C,T){if(T==null||0>=h||0>=v)return 2;if(C!=null){if(C.Da){var H=C.cd,Y=C.bd,ee=-2&C.v,se=-2&C.j;if(0>ee||0>se||0>=H||0>=Y||ee+H>h||se+Y>v)return 2;h=H,v=Y}if(C.da){if(!Jt(h,v,H=[C.ib],Y=[C.hb]))return 2;h=H[0],v=Y[0]}}T.width=h,T.height=v;e:{var ce=T.width,pe=T.height;if(h=T.S,0>=ce||0>=pe||!(h>=od&&13>h))h=2;else{if(0>=T.Rd&&T.sd==null){ee=Y=H=v=0;var Te=(se=ce*Pu[h])*pe;if(11>h||(Y=(pe+1)/2*(v=(ce+1)/2),h==12&&(ee=(H=ce)*pe)),(pe=o(Te+2*Y+ee))==null){h=1;break e}T.sd=pe,11>h?((ce=T.f.RGBA).eb=pe,ce.fb=0,ce.A=se,ce.size=Te):((ce=T.f.kb).y=pe,ce.O=0,ce.fa=se,ce.Fd=Te,ce.f=pe,ce.N=0+Te,ce.Ab=v,ce.Cd=Y,ce.ea=pe,ce.W=0+Te+Y,ce.Db=v,ce.Ed=Y,h==12&&(ce.F=pe,ce.J=0+Te+2*Y),ce.Tc=ee,ce.lb=H)}if(v=1,H=T.S,Y=T.width,ee=T.height,H>=od&&13>H)if(11>H)h=T.f.RGBA,v&=(se=Math.abs(h.A))*(ee-1)+Y<=h.size,v&=se>=Y*Pu[H],v&=h.eb!=null;else{h=T.f.kb,se=(Y+1)/2,Te=(ee+1)/2,ce=Math.abs(h.fa),pe=Math.abs(h.Ab);var $e=Math.abs(h.Db),me=Math.abs(h.lb),De=me*(ee-1)+Y;v&=ce*(ee-1)+Y<=h.Fd,v&=pe*(Te-1)+se<=h.Cd,v=(v&=$e*(Te-1)+se<=h.Ed)&ce>=Y&pe>=se&$e>=se,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,H==12&&(v&=me>=Y,v&=De<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||C!=null&&C.fd&&(h=Nc(T)),h}var Ia=64,Na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sa=24,yl=32,yo=8,Bo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];q("Predictor0","PredictorAdd0"),W.Predictor0=function(){return 4278190080},W.Predictor1=function(h){return h},W.Predictor2=function(h,v,C){return v[C+0]},W.Predictor3=function(h,v,C){return v[C+1]},W.Predictor4=function(h,v,C){return v[C-1]},W.Predictor5=function(h,v,C){return B(B(h,v[C+1]),v[C+0])},W.Predictor6=function(h,v,C){return B(h,v[C-1])},W.Predictor7=function(h,v,C){return B(h,v[C+0])},W.Predictor8=function(h,v,C){return B(v[C-1],v[C+0])},W.Predictor9=function(h,v,C){return B(v[C+0],v[C+1])},W.Predictor10=function(h,v,C){return B(B(h,v[C-1]),B(v[C+0],v[C+1]))},W.Predictor11=function(h,v,C){var T=v[C+0];return 0>=Pe(T>>24&255,h>>24&255,(v=v[C-1])>>24&255)+Pe(T>>16&255,h>>16&255,v>>16&255)+Pe(T>>8&255,h>>8&255,v>>8&255)+Pe(255&T,255&h,255&v)?T:h},W.Predictor12=function(h,v,C){var T=v[C+0];return(G((h>>24&255)+(T>>24&255)-((v=v[C-1])>>24&255))<<24|G((h>>16&255)+(T>>16&255)-(v>>16&255))<<16|G((h>>8&255)+(T>>8&255)-(v>>8&255))<<8|G((255&h)+(255&T)-(255&v)))>>>0},W.Predictor13=function(h,v,C){var T=v[C-1];return(fe((h=B(h,v[C+0]))>>24&255,T>>24&255)<<24|fe(h>>16&255,T>>16&255)<<16|fe(h>>8&255,T>>8&255)<<8|fe(255&h,255&T))>>>0};var qo=W.PredictorAdd0;W.PredictorAdd1=_e,q("Predictor2","PredictorAdd2"),q("Predictor3","PredictorAdd3"),q("Predictor4","PredictorAdd4"),q("Predictor5","PredictorAdd5"),q("Predictor6","PredictorAdd6"),q("Predictor7","PredictorAdd7"),q("Predictor8","PredictorAdd8"),q("Predictor9","PredictorAdd9"),q("Predictor10","PredictorAdd10"),q("Predictor11","PredictorAdd11"),q("Predictor12","PredictorAdd12"),q("Predictor13","PredictorAdd13");var bo=W.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var qs,Wl=W.ColorIndexInverseTransform,wo=W.MapARGB,Ja=W.VP8LColorIndexInverseTransformAlpha,Gl=W.MapAlpha,Kl=W.VP8LPredictorsAdd=[];Kl.length=16,(W.VP8LPredictors=[]).length=16,(W.VP8LPredictorsAdd_C=[]).length=16,(W.VP8LPredictors_C=[]).length=16;var Sc,jc,Uo,bl,wl,Ql,Nl,Zl,As,sa,Tr,qr,_s,Zs,eo,xu,Cc,zo,id,Ac,ad,wf,yu,Yl,Xl,Nf,bu,Sf,jf=o(511),Cf=o(2041),Af=o(225),_f=o(767),Pf=0,No=Cf,_c=Af,Yi=_f,Fa=jf,od=0,Sl=1,Gh=2,wu=3,Nu=4,Gr=5,ld=6,Pc=7,Jl=8,Su=9,ju=10,Cu=[2,3,7],cd=[3,3,11],ec=[280,256,256,256,40],Kh=[0,1,1,1,0],pg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ud=8,kc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Au=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tc=null,kf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Yh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ef=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xi=[],Oa=[],ia=[],So=1,Tc=2,Oi=[],aa=[];js("UpsampleRgbLinePair",Fi,3),js("UpsampleBgrLinePair",gs,3),js("UpsampleRgbaLinePair",Zi,4),js("UpsampleBgraLinePair",vu,4),js("UpsampleArgbLinePair",gu,4),js("UpsampleRgba4444LinePair",Oo,2),js("UpsampleRgb565LinePair",Fo,2);var xg=W.UpsampleRgbLinePair,yg=W.UpsampleBgrLinePair,jl=W.UpsampleRgbaLinePair,Ec=W.UpsampleBgraLinePair,nc=W.UpsampleArgbLinePair,_u=W.UpsampleRgba4444LinePair,Lf=W.UpsampleRgb565LinePair,$o=16,to=1<<$o-1,Br=-227,Ur=482,Cl=6,Pi=0,oa=o(256),rc=o(256),Lc=o(256),la=o(256),dd=o(Ur-Br),Xh=o(Ur-Br);Xa("YuvToRgbRow",Fi,3),Xa("YuvToBgrRow",gs,3),Xa("YuvToRgbaRow",Zi,4),Xa("YuvToBgraRow",vu,4),Xa("YuvToArgbRow",gu,4),Xa("YuvToRgba4444Row",Oo,2),Xa("YuvToRgb565Row",Fo,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sc=[0,2,8],Jh=[8,7,6,4,4,2,2,2,1,1,1,1],Vo=1;this.WebPDecodeRGBA=function(h,v,C,T,H){var Y=Sl,ee=new st,se=new on;ee.ba=se,se.S=Y,se.width=[se.width],se.height=[se.height];var ce=se.width,pe=se.height,Te=new ln;if(Te==null||h==null)var $e=2;else e(Te!=null),$e=xl(h,v,C,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if($e!=0?ce=0:(ce!=null&&(ce[0]=Te.width[0]),pe!=null&&(pe[0]=Te.height[0]),ce=1),ce){se.width=se.width[0],se.height=se.height[0],T!=null&&(T[0]=se.width),H!=null&&(H[0]=se.height);e:{if(T=new ot,(H=new dt).data=h,H.w=v,H.ha=C,H.kd=1,v=[0],e(H!=null),((h=xl(H.data,H.w,H.ha,null,null,null,v,null,H))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(e(ee!=null),T.data=H.data,T.w=H.w+H.offset,T.ha=H.ha-H.offset,T.put=Mt,T.ac=Nr,T.bc=vr,T.ma=ee,H.xa){if((h=Ri())==null){ee=1;break e}if((function(me,De){var Ue=[0],rt=[0],He=[0];t:for(;;){if(me==null)return 0;if(De==null)return me.a=2,0;if(me.l=De,me.a=0,Ne(me.m,De.data,De.w,De.ha),!fs(me.m,Ue,rt,He)){me.a=3;break t}if(me.xb=Tc,De.width=Ue[0],De.height=rt[0],!ws(Ue[0],rt[0],1,me,null))break t;return 1}return e(me.a!=0),0})(h,T)){if(T=(v=Mo(T.width,T.height,ee.Oa,ee.ba))==0){t:{T=h;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((C=T.l)!=null),e((H=C.ma)!=null),T.xb!=0){if(T.ca=H.ba,T.tb=H.tb,e(T.ca!=null),!wc(H.Oa,C,wu)){T.a=2;break n}if(!Is(T,C.width)||C.da)break n;if((C.da||Ke(T.ca.S))&&es(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&es()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!ue(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Qs(T,T.V,T.Ba,T.c,T.i,C.o,Ds))break n;H.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(v=h.a)}else v=h.a}else{if((h=new nt)==null){ee=1;break e}if(h.Fa=H.na,h.P=H.P,h.qc=H.Sa,jt(h,T)){if((v=Mo(T.width,T.height,ee.Oa,ee.ba))==0){if(h.Aa=0,C=ee.Oa,e((H=h)!=null),C!=null){if(0<(ce=0>(ce=C.Md)?0:100<ce?255:255*ce/100)){for(pe=Te=0;4>pe;++pe)12>($e=H.pb[pe]).lc&&($e.ia=ce*Jh[0>$e.lc?0:$e.lc]>>3),Te|=$e.ia;Te&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=C.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(me,De){if(me==null)return 0;if(De==null)return Ge(me,2,"NULL VP8Io parameter in VP8Decode().");if(!me.cb&&!jt(me,De))return 0;if(e(me.cb),De.ac==null||De.ac(De)){De.ob&&(me.L=0);var Ue=sc[me.L];if(me.L==2?(me.yb=0,me.zb=0):(me.yb=De.v-Ue>>4,me.zb=De.j-Ue>>4,0>me.yb&&(me.yb=0),0>me.zb&&(me.zb=0)),me.Va=De.o+15+Ue>>4,me.Hb=De.va+15+Ue>>4,me.Hb>me.za&&(me.Hb=me.za),me.Va>me.Ub&&(me.Va=me.Ub),0<me.L){var rt=me.ed;for(Ue=0;4>Ue;++Ue){var He;if(me.Qa.Cb){var et=me.Qa.Lb[Ue];me.Qa.Fb||(et+=rt.Tb)}else et=rt.Tb;for(He=0;1>=He;++He){var tt=me.gd[Ue][He],at=et;if(rt.Pc&&(at+=rt.vd[0],He&&(at+=rt.od[0])),0<(at=0>at?0:63<at?63:at)){var ct=at;0<rt.wb&&(ct=4<rt.wb?ct>>2:ct>>1)>9-rt.wb&&(ct=9-rt.wb),1>ct&&(ct=1),tt.dd=ct,tt.tc=2*at+ct,tt.ld=40<=at?2:15<=at?1:0}else tt.tc=0;tt.La=He}}}Ue=0}else Ge(me,6,"Frame setup failed"),Ue=me.a;if(Ue=Ue==0){if(Ue){me.$c=0,0<me.Aa||(me.Ic=Vo);t:{Ue=me.Ic,rt=4*(ct=me.za);var fn=32*ct,Kt=ct+1,Qn=0<me.L?ct*(0<me.Aa?2:1):0,en=(me.Aa==2?2:1)*ct;if((tt=rt+832+(He=3*(16*Ue+sc[me.L])/2*fn)+(et=me.Fa!=null&&0<me.Fa.length?me.Kc.c*me.Kc.i:0))!=tt)Ue=0;else{if(tt>me.Vb){if(me.Vb=0,me.Ec=o(tt),me.Fc=0,me.Ec==null){Ue=Ge(me,1,"no memory during frame initialization.");break t}me.Vb=tt}tt=me.Ec,at=me.Fc,me.Ac=tt,me.Bc=at,at+=rt,me.Gd=u(fn,On),me.Hd=0,me.rb=u(Kt+1,sn),me.sb=1,me.wa=Qn?u(Qn,Xr):null,me.Y=0,me.D.Nb=0,me.D.wa=me.wa,me.D.Y=me.Y,0<me.Aa&&(me.D.Y+=ct),e(!0),me.oc=tt,me.pc=at,at+=832,me.ya=u(en,Ln),me.aa=0,me.D.ya=me.ya,me.D.aa=me.aa,me.Aa==2&&(me.D.aa+=ct),me.R=16*ct,me.B=8*ct,ct=(fn=sc[me.L])*me.R,fn=fn/2*me.B,me.sa=tt,me.ta=at+ct,me.qa=me.sa,me.ra=me.ta+16*Ue*me.R+fn,me.Ha=me.qa,me.Ia=me.ra+8*Ue*me.B+fn,me.$c=0,at+=He,me.mb=et?tt:null,me.nb=et?at:null,e(at+et<=me.Fc+me.Vb),Rt(me),a(me.Ac,me.Bc,0,rt),Ue=1}}if(Ue){if(De.ka=0,De.y=me.sa,De.O=me.ta,De.f=me.qa,De.N=me.ra,De.ea=me.Ha,De.Vd=me.Ia,De.fa=me.R,De.Rc=me.B,De.F=null,De.J=0,!Pf){for(Ue=-255;255>=Ue;++Ue)jf[255+Ue]=0>Ue?-Ue:Ue;for(Ue=-1020;1020>=Ue;++Ue)Cf[1020+Ue]=-128>Ue?-128:127<Ue?127:Ue;for(Ue=-112;112>=Ue;++Ue)Af[112+Ue]=-16>Ue?-16:15<Ue?15:Ue;for(Ue=-255;510>=Ue;++Ue)_f[255+Ue]=0>Ue?0:255<Ue?255:Ue;Pf=1}Nl=An,Zl=vn,sa=xr,Tr=Un,qr=zt,As=qt,_s=ai,Zs=Ki,eo=V,xu=ge,Cc=xi,zo=b,id=ke,Ac=Be,ad=Ya,wf=go,yu=Io,Yl=vo,Oa[0]=Qa,Oa[1]=dr,Oa[2]=as,Oa[3]=Ka,Oa[4]=Fs,Oa[5]=vl,Oa[6]=ra,Oa[7]=bt,Oa[8]=Lo,Oa[9]=er,Xi[0]=Se,Xi[1]=F,Xi[2]=de,Xi[3]=we,Xi[4]=At,Xi[5]=Vn,Xi[6]=$t,ia[0]=ba,ia[1]=Dn,ia[2]=Wi,ia[3]=Za,ia[4]=Os,ia[5]=Wr,ia[6]=Ii,Ue=1}else Ue=0}Ue&&(Ue=(function(mr,Ps){for(mr.M=0;mr.M<mr.Va;++mr.M){var Yn,Qt=mr.Jc[mr.M&mr.Xb],kt=mr.m,Us=mr;for(Yn=0;Yn<Us.za;++Yn){var Mn=kt,fr=Us,Jr=fr.Ac,bi=fr.Bc+4*Yn,Ys=fr.zc,vs=fr.ya[fr.aa+Yn];if(fr.Qa.Bb?vs.$b=ze(Mn,fr.Pa.jb[0])?2+ze(Mn,fr.Pa.jb[2]):ze(Mn,fr.Pa.jb[1]):vs.$b=0,fr.kc&&(vs.Ad=ze(Mn,fr.Bd)),vs.Za=!ze(Mn,145)+0,vs.Za){var oi=vs.Ob,wi=0;for(fr=0;4>fr;++fr){var os,br=Ys[0+fr];for(os=0;4>os;++os){br=gg[Jr[bi+os]][br];for(var Er=Zh[ze(Mn,br[0])];0<Er;)Er=Zh[2*Er+ze(Mn,br[Er])];br=-Er,Jr[bi+os]=br}r(oi,wi,Jr,bi,4),wi+=4,Ys[0+fr]=br}}else br=ze(Mn,156)?ze(Mn,128)?1:3:ze(Mn,163)?2:0,vs.Ob[0]=br,a(Jr,bi,br,4),a(Ys,0,br,4);vs.Dd=ze(Mn,142)?ze(Mn,114)?ze(Mn,183)?1:3:2:0}if(Us.m.Ka)return Ge(mr,7,"Premature end-of-partition0 encountered.");for(;mr.ja<mr.za;++mr.ja){if(Us=Qt,Mn=(kt=mr).rb[kt.sb-1],Jr=kt.rb[kt.sb+kt.ja],Yn=kt.ya[kt.aa+kt.ja],bi=kt.kc?Yn.Ad:0)Mn.la=Jr.la=0,Yn.Za||(Mn.Na=Jr.Na=0),Yn.Hc=0,Yn.Gc=0,Yn.ia=0;else{var ls,Lr;if(Mn=Jr,Jr=Us,bi=kt.Pa.Xc,Ys=kt.ya[kt.aa+kt.ja],vs=kt.pb[Ys.$b],fr=Ys.ad,oi=0,wi=kt.rb[kt.sb-1],br=os=0,a(fr,oi,0,384),Ys.Za)var ks=0,Ts=bi[3];else{Er=o(16);var Kr=Mn.Na+wi.Na;if(Kr=tc(Jr,bi[1],Kr,vs.Eb,0,Er,0),Mn.Na=wi.Na=(0<Kr)+0,1<Kr)Nl(Er,0,fr,oi);else{var Mi=Er[0]+3>>3;for(Er=0;256>Er;Er+=16)fr[oi+Er]=Mi}ks=1,Ts=bi[0]}var zr=15&Mn.la,Qr=15&wi.la;for(Er=0;4>Er;++Er){var Xs=1&Qr;for(Mi=Lr=0;4>Mi;++Mi)zr=zr>>1|(Xs=(Kr=tc(Jr,Ts,Kr=Xs+(1&zr),vs.Sc,ks,fr,oi))>ks)<<7,Lr=Lr<<2|(3<Kr?3:1<Kr?2:fr[oi+0]!=0),oi+=16;zr>>=4,Qr=Qr>>1|Xs<<7,os=(os<<8|Lr)>>>0}for(Ts=zr,ks=Qr>>4,ls=0;4>ls;ls+=2){for(Lr=0,zr=Mn.la>>4+ls,Qr=wi.la>>4+ls,Er=0;2>Er;++Er){for(Xs=1&Qr,Mi=0;2>Mi;++Mi)Kr=Xs+(1&zr),zr=zr>>1|(Xs=0<(Kr=tc(Jr,bi[2],Kr,vs.Qc,0,fr,oi)))<<3,Lr=Lr<<2|(3<Kr?3:1<Kr?2:fr[oi+0]!=0),oi+=16;zr>>=2,Qr=Qr>>1|Xs<<5}br|=Lr<<4*ls,Ts|=zr<<4<<ls,ks|=(240&Qr)<<ls}Mn.la=Ts,wi.la=ks,Ys.Hc=os,Ys.Gc=br,Ys.ia=43690&br?0:vs.ia,bi=!(os|br)}if(0<kt.L&&(kt.wa[kt.Y+kt.ja]=kt.gd[Yn.$b][Yn.Za],kt.wa[kt.Y+kt.ja].La|=!bi),Us.Ka)return Ge(mr,7,"Premature end-of-file encountered.")}if(Rt(mr),kt=Ps,Us=1,Yn=(Qt=mr).D,Mn=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(Yn.M=Qt.M,Yn.uc=Mn,wa(Qt,Yn),Us=1,Yn=(Lr=Qt.D).Nb,Mn=(br=sc[Qt.L])*Qt.R,Jr=br/2*Qt.B,Er=16*Yn*Qt.R,Mi=8*Yn*Qt.B,bi=Qt.sa,Ys=Qt.ta-Mn+Er,vs=Qt.qa,fr=Qt.ra-Jr+Mi,oi=Qt.Ha,wi=Qt.Ia-Jr+Mi,Qr=(zr=Lr.M)==0,os=zr>=Qt.Va-1,Qt.Aa==2&&wa(Qt,Lr),Lr.uc)for(Xs=(Kr=Qt).D.M,e(Kr.D.uc),Lr=Kr.yb;Lr<Kr.Hb;++Lr){ks=Lr,Ts=Xs;var ki=(ca=(Vs=Kr).D).Nb;ls=Vs.R;var ca=ca.wa[ca.Y+ks],zs=Vs.sa,$s=Vs.ta+16*ki*ls+16*ks,Bi=ca.dd,Zr=ca.tc;if(Zr!=0)if(e(3<=Zr),Vs.L==1)0<ks&&wf(zs,$s,ls,Zr+4),ca.La&&Yl(zs,$s,ls,Zr),0<Ts&&ad(zs,$s,ls,Zr+4),ca.La&&yu(zs,$s,ls,Zr);else{var qi=Vs.B,Ma=Vs.qa,no=Vs.ra+8*ki*qi+8*ks,Ni=Vs.Ha,Vs=Vs.Ia+8*ki*qi+8*ks;ki=ca.ld,0<ks&&(Zs(zs,$s,ls,Zr+4,Bi,ki),xu(Ma,no,Ni,Vs,qi,Zr+4,Bi,ki)),ca.La&&(zo(zs,$s,ls,Zr,Bi,ki),Ac(Ma,no,Ni,Vs,qi,Zr,Bi,ki)),0<Ts&&(_s(zs,$s,ls,Zr+4,Bi,ki),eo(Ma,no,Ni,Vs,qi,Zr+4,Bi,ki)),ca.La&&(Cc(zs,$s,ls,Zr,Bi,ki),id(Ma,no,Ni,Vs,qi,Zr,Bi,ki))}}if(Qt.ia&&alert("todo:DitherRow"),kt.put!=null){if(Lr=16*zr,zr=16*(zr+1),Qr?(kt.y=Qt.sa,kt.O=Qt.ta+Er,kt.f=Qt.qa,kt.N=Qt.ra+Mi,kt.ea=Qt.Ha,kt.W=Qt.Ia+Mi):(Lr-=br,kt.y=bi,kt.O=Ys,kt.f=vs,kt.N=fr,kt.ea=oi,kt.W=wi),os||(zr-=br),zr>kt.o&&(zr=kt.o),kt.F=null,kt.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&Lr<zr&&(kt.J=Vt(Qt,kt,Lr,zr-Lr),kt.F=Qt.mb,kt.F==null&&kt.F.length==0)){Us=Ge(Qt,3,"Could not decode alpha data.");break t}Lr<kt.j&&(br=kt.j-Lr,Lr=kt.j,e(!(1&br)),kt.O+=Qt.R*br,kt.N+=Qt.B*(br>>1),kt.W+=Qt.B*(br>>1),kt.F!=null&&(kt.J+=kt.width*br)),Lr<zr&&(kt.O+=kt.v,kt.N+=kt.v>>1,kt.W+=kt.v>>1,kt.F!=null&&(kt.J+=kt.v),kt.ka=Lr-kt.j,kt.U=kt.va-kt.v,kt.T=zr-Lr,Us=kt.put(kt))}Yn+1!=Qt.Ic||os||(r(Qt.sa,Qt.ta-Mn,bi,Ys+16*Qt.R,Mn),r(Qt.qa,Qt.ra-Jr,vs,fr+8*Qt.B,Jr),r(Qt.Ha,Qt.Ia-Jr,oi,wi+8*Qt.B,Jr))}if(!Us)return Ge(mr,6,"Output aborted.")}return 1})(me,De)),De.bc!=null&&De.bc(De),Ue&=1}return Ue?(me.cb=0,Ue):0})(h,T)||(v=h.a)}}else v=h.a}v==0&&ee.Oa!=null&&ee.Oa.fd&&(v=Nc(ee.ba))}ee=v}Y=ee!=0?null:11>Y?se.f.RGBA.eb:se.f.kb.y}else Y=null;return Y};var Pu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(W,he){for(var z="",E=0;E<4;E++)z+=String.fromCharCode(W[he++]);return z}function m(W,he){return W[he+0]|W[he+1]<<8}function y(W,he){return(W[he+0]|W[he+1]<<8|W[he+2]<<16)>>>0}function j(W,he){return(W[he+0]|W[he+1]<<8|W[he+2]<<16|W[he+3]<<24)>>>0}new f;var x=[0],D=[0],S=[],k=new f,A=t,I=(function(W,he){var z={},E=0,Q=!1,X=0,ie=0;if(z.frames=[],!(function(O,L){for(var oe=0;oe<4;oe++)if(O[L+oe]!="RIFF".charCodeAt(oe))return!0;return!1})(W,he)){for(j(W,he+=4),he+=8;he<W.length;){var Ce=p(W,he),te=j(W,he+=4);he+=4;var ae=te+(1&te);switch(Ce){case"VP8 ":case"VP8L":z.frames[E]===void 0&&(z.frames[E]={}),(ne=z.frames[E]).src_off=Q?ie:he-8,ne.src_size=X+te+8,E++,Q&&(Q=!1,X=0,ie=0);break;case"VP8X":(ne=z.header={}).feature_flags=W[he];var Ne=he+4;ne.canvas_width=1+y(W,Ne),Ne+=3,ne.canvas_height=1+y(W,Ne),Ne+=3;break;case"ALPH":Q=!0,X=ae+8,ie=he-8;break;case"ANIM":(ne=z.header).bgcolor=j(W,he),Ne=he+4,ne.loop_count=m(W,Ne),Ne+=2;break;case"ANMF":var Re,ne;(ne=z.frames[E]={}).offset_x=2*y(W,he),he+=3,ne.offset_y=2*y(W,he),he+=3,ne.width=1+y(W,he),he+=3,ne.height=1+y(W,he),he+=3,ne.duration=y(W,he),he+=3,Re=W[he++],ne.dispose=1&Re,ne.blend=Re>>1&1}Ce!="ANMF"&&(he+=ae)}return z}})(A,0);I.response=A,I.rgbaoutput=!0,I.dataurl=!1;var R=I.header?I.header:null,$=I.frames?I.frames:null;if(R){R.loop_counter=R.loop_count,x=[R.canvas_height],D=[R.canvas_width];for(var N=0;N<$.length&&$[N].blend!=0;N++);}var xe=$[0],re=k.WebPDecodeRGBA(A,xe.src_off,xe.src_size,D,x);xe.rgba=re,xe.imgwidth=D[0],xe.imgheight=x[0];for(var K=0;K<D[0]*x[0]*4;K++)S[K]=re[K];return this.width=D,this.height=x,this.data=S,this}(function(t){var e,n,r,a,o,u,c,f,p,m=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new f,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new u,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new u,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,p=new m}]);var y=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var L=O;Object.defineProperty(this,"pdf",{get:function(){return L}});var oe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return oe},set:function(ue){oe=!!ue}});var ve=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ve},set:function(ue){ve=!!ue}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(ue){isNaN(ue)||(ye=ue)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(ue){isNaN(ue)||(be=ue)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(ue){var xt;typeof ue=="number"?xt=[ue,ue,ue,ue]:((xt=new Array(4))[0]=ue[0],xt[1]=ue.length>=2?ue[1]:xt[0],xt[2]=ue.length>=3?ue[2]:xt[0],xt[3]=ue.length>=4?ue[3]:xt[1]),p.margin=xt}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(ue){Le=ue}});var Oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Oe},set:function(ue){Oe=ue}});var ze=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ze},set:function(ue){ze=ue}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(ue){ue instanceof m&&(p=ue)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(ue){p.path=ue}});var Ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ze},set:function(ue){Ze=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var xt;xt=j(ue),this.ctx.fillStyle=xt.style,this.ctx.isFillTransparent=xt.a===0,this.ctx.fillOpacity=xt.a,this.pdf.setFillColor(xt.r,xt.g,xt.b,{a:xt.a}),this.pdf.setTextColor(xt.r,xt.g,xt.b,{a:xt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var xt=j(ue);this.ctx.strokeStyle=xt.style,this.ctx.isStrokeTransparent=xt.a===0,this.ctx.strokeOpacity=xt.a,xt.a===0?this.pdf.setDrawColor(255,255,255):(xt.a,this.pdf.setDrawColor(xt.r,xt.g,xt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var lt=null,ut=null,_t=null;Object.defineProperty(this,"fontFaces",{get:function(){return _t},set:function(ue){lt=null,ut=null,_t=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var xt;if(this.ctx.font=ue,(xt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ue))!==null){var dn=xt[1];xt[2];var Jt=xt[3],le=xt[4];xt[5];var J=xt[6],q=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(le)[2];le=Math.floor(q==="px"?parseFloat(le)*this.pdf.internal.scaleFactor:q==="em"?parseFloat(le)*this.pdf.getFontSize():parseFloat(le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(le);var U=(function(ft){var En,Cn,mn=[],gn=ft.trim();if(gn==="")return W0;if(gn in x5)return[x5[gn]];for(;gn!=="";){switch(Cn=null,En=(gn=b5(gn)).charAt(0)){case'"':case"'":Cn=A7(gn.substring(1),En);break;default:Cn=_7(gn)}if(Cn===null||(mn.push(Cn[0]),(gn=b5(Cn[1]))!==""&&gn.charAt(0)!==","))return W0;gn=gn.replace(/^,/,"")}return mn})(J);if(this.fontFaces){var B=(function(ft,En){var Cn=ft.getFontList(),mn=JSON.stringify(Cn);if(lt===null||ut!==mn){var gn=(function(bn){var Ct=[];return Object.keys(bn).forEach(function(rn){bn[rn].forEach(function(Ke){var Ye=null;switch(Ke){case"bold":Ye={family:rn,weight:"bold"};break;case"italic":Ye={family:rn,style:"italic"};break;case"bolditalic":Ye={family:rn,weight:"bold",style:"italic"};break;case"":case"normal":Ye={family:rn}}Ye!==null&&(Ye.ref={name:rn,style:Ke},Ct.push(Ye))})}),Ct})(Cn);lt=(function(bn){for(var Ct={},rn=0;rn<bn.length;++rn){var Ke=H0(bn[rn]),Ye=Ke.family,it=Ke.stretch,on=Ke.style,ln=Ke.weight;Ct[Ye]=Ct[Ye]||{},Ct[Ye][it]=Ct[Ye][it]||{},Ct[Ye][it][on]=Ct[Ye][it][on]||{},Ct[Ye][it][on][ln]=Ke}return Ct})(gn.concat(En)),ut=mn}return lt})(this.pdf,this.fontFaces),G=U.map(function(ft){return{family:ft,stretch:"normal",weight:Jt,style:dn}}),fe=(function(ft,En,Cn){for(var mn=(Cn=Cn||{}).defaultFontFamily||"times",gn=Object.assign({},C7,Cn.genericFontFamilies||{}),bn=null,Ct=null,rn=0;rn<En.length;++rn)if(gn[(bn=H0(En[rn])).family]&&(bn.family=gn[bn.family]),ft.hasOwnProperty(bn.family)){Ct=ft[bn.family];break}if(!(Ct=Ct||ft[mn]))throw new Error("Could not find a font-family for the rule '"+y5(bn)+"' and default family '"+mn+"'.");if(Ct=(function(Ke,Ye){if(Ye[Ke])return Ye[Ke];var it=qv[Ke],on=it<=qv.normal?-1:1,ln=v5(Ye,M4,it,on);if(!ln)throw new Error("Could not find a matching font-stretch value for "+Ke);return ln})(bn.stretch,Ct),Ct=(function(Ke,Ye){if(Ye[Ke])return Ye[Ke];for(var it=O4[Ke],on=0;on<it.length;++on)if(Ye[it[on]])return Ye[it[on]];throw new Error("Could not find a matching font-style for "+Ke)})(bn.style,Ct),!(Ct=(function(Ke,Ye){if(Ye[Ke])return Ye[Ke];if(Ke===400&&Ye[500])return Ye[500];if(Ke===500&&Ye[400])return Ye[400];var it=j7[Ke],on=v5(Ye,B4,it,Ke<400?-1:1);if(!on)throw new Error("Could not find a matching font-weight for value "+Ke);return on})(bn.weight,Ct)))throw new Error("Failed to resolve a font for the rule '"+y5(bn)+"'.");return Ct})(B,G);this.pdf.setFont(fe.ref.name,fe.ref.style)}else{var Pe="";(Jt==="bold"||parseInt(Jt,10)>=700||dn==="bold")&&(Pe="bold"),dn==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var _e="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<U.length;qe++){if(this.pdf.internal.getFont(U[qe],Pe,{noFallback:!0,disableWarning:!0})!==void 0){_e=U[qe];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(U[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_e=U[qe],Pe="bold";else if(this.pdf.internal.getFont(U[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_e=U[qe],Pe="normal";break}}if(_e===""){for(var wt=0;wt<U.length;wt++)if(Ie[U[wt]]){_e=Ie[U[wt]];break}}_e=_e===""?"Times":_e,this.pdf.setFont(_e,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};y.prototype.setLineDash=function(O){this.lineDash=O},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){$.call(this,"fill",!1)},y.prototype.stroke=function(){$.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(O,L){if(isNaN(O)||isNaN(L))throw ns.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var oe=this.ctx.transform.applyToPoint(new u(O,L));this.path.push({type:"mt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new u(O,L)},y.prototype.closePath=function(){var O=new u(0,0),L=0;for(L=this.path.length-1;L!==-1;L--)if(this.path[L].type==="begin"&&Yr(this.path[L+1])==="object"&&typeof this.path[L+1].x=="number"){O=new u(this.path[L+1].x,this.path[L+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(O.x,O.y)},y.prototype.lineTo=function(O,L){if(isNaN(O)||isNaN(L))throw ns.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var oe=this.ctx.transform.applyToPoint(new u(O,L));this.path.push({type:"lt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new u(oe.x,oe.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},y.prototype.quadraticCurveTo=function(O,L,oe,ve){if(isNaN(oe)||isNaN(ve)||isNaN(O)||isNaN(L))throw ns.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new u(oe,ve)),be=this.ctx.transform.applyToPoint(new u(O,L));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new u(ye.x,ye.y)},y.prototype.bezierCurveTo=function(O,L,oe,ve,ye,be){if(isNaN(ye)||isNaN(be)||isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve))throw ns.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new u(ye,be)),Oe=this.ctx.transform.applyToPoint(new u(O,L)),ze=this.ctx.transform.applyToPoint(new u(oe,ve));this.path.push({type:"bct",x1:Oe.x,y1:Oe.y,x2:ze.x,y2:ze.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new u(Le.x,Le.y)},y.prototype.arc=function(O,L,oe,ve,ye,be){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve)||isNaN(ye))throw ns.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new u(O,L));O=Le.x,L=Le.y;var Oe=this.ctx.transform.applyToPoint(new u(0,oe)),ze=this.ctx.transform.applyToPoint(new u(0,0));oe=Math.sqrt(Math.pow(Oe.x-ze.x,2)+Math.pow(Oe.y-ze.y,2))}Math.abs(ye-ve)>=2*Math.PI&&(ve=0,ye=2*Math.PI),this.path.push({type:"arc",x:O,y:L,radius:oe,startAngle:ve,endAngle:ye,counterclockwise:be})},y.prototype.arcTo=function(O,L,oe,ve,ye){throw new Error("arcTo not implemented.")},y.prototype.rect=function(O,L,oe,ve){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve))throw ns.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,L),this.lineTo(O+oe,L),this.lineTo(O+oe,L+ve),this.lineTo(O,L+ve),this.lineTo(O,L),this.lineTo(O+oe,L),this.lineTo(O,L)},y.prototype.fillRect=function(O,L,oe,ve){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve))throw ns.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,L,oe,ve),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},y.prototype.strokeRect=function(O,L,oe,ve){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve))throw ns.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(O,L,oe,ve),this.stroke())},y.prototype.clearRect=function(O,L,oe,ve){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve))throw ns.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,L,oe,ve))},y.prototype.save=function(O){O=typeof O!="boolean"||O;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("q");if(this.pdf.setPage(L),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ve=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ve}},y.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("Q");this.pdf.setPage(L),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(O){var L,oe,ve,ye;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))L=0,oe=0,ve=0,ye=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(be!==null)L=parseInt(be[1]),oe=parseInt(be[2]),ve=parseInt(be[3]),ye=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)L=parseInt(be[1]),oe=parseInt(be[2]),ve=parseInt(be[3]),ye=parseFloat(be[4]);else{if(ye=1,typeof O=="string"&&O.charAt(0)!=="#"){var Le=new T4(O);O=Le.ok?Le.toHex():"#000000"}O.length===4?(L=O.substring(1,2),L+=L,oe=O.substring(2,3),oe+=oe,ve=O.substring(3,4),ve+=ve):(L=O.substring(1,3),oe=O.substring(3,5),ve=O.substring(5,7)),L=parseInt(L,16),oe=parseInt(oe,16),ve=parseInt(ve,16)}}return{r:L,g:oe,b:ve,a:ye,style:O}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(O,L,oe,ve){if(isNaN(L)||isNaN(oe)||typeof O!="string")throw ns.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ve=isNaN(ve)?void 0:ve,!x.call(this)){var ye=ae(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;E.call(this,{text:O,x:L,y:oe,scale:be,angle:ye,align:this.textAlign,maxWidth:ve})}},y.prototype.strokeText=function(O,L,oe,ve){if(isNaN(L)||isNaN(oe)||typeof O!="string")throw ns.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){ve=isNaN(ve)?void 0:ve;var ye=ae(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;E.call(this,{text:O,x:L,y:oe,scale:be,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:ve})}},y.prototype.measureText=function(O){if(typeof O!="string")throw ns.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var L=this.pdf,oe=this.pdf.internal.scaleFactor,ve=L.internal.getFontSize(),ye=L.getStringUnitWidth(O)*ve/L.internal.scaleFactor;return new function(be){var Le=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:ye*=Math.round(96*oe/72*1e4)/1e4})},y.prototype.scale=function(O,L){if(isNaN(O)||isNaN(L))throw ns.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var oe=new f(O,0,0,L,0,0);this.ctx.transform=this.ctx.transform.multiply(oe)},y.prototype.rotate=function(O){if(isNaN(O))throw ns.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var L=new f(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(L)},y.prototype.translate=function(O,L){if(isNaN(O)||isNaN(L))throw ns.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var oe=new f(1,0,0,1,O,L);this.ctx.transform=this.ctx.transform.multiply(oe)},y.prototype.transform=function(O,L,oe,ve,ye,be){if(isNaN(O)||isNaN(L)||isNaN(oe)||isNaN(ve)||isNaN(ye)||isNaN(be))throw ns.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new f(O,L,oe,ve,ye,be);this.ctx.transform=this.ctx.transform.multiply(Le)},y.prototype.setTransform=function(O,L,oe,ve,ye,be){O=isNaN(O)?1:O,L=isNaN(L)?0:L,oe=isNaN(oe)?0:oe,ve=isNaN(ve)?1:ve,ye=isNaN(ye)?0:ye,be=isNaN(be)?0:be,this.ctx.transform=new f(O,L,oe,ve,ye,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(O,L,oe,ve,ye,be,Le,Oe,ze){var Ze=this.pdf.getImageProperties(O),lt=1,ut=1,_t=1,ue=1;ve!==void 0&&Oe!==void 0&&(_t=Oe/ve,ue=ze/ye,lt=Ze.width/ve*Oe/ve,ut=Ze.height/ye*ze/ye),be===void 0&&(be=L,Le=oe,L=0,oe=0),ve!==void 0&&Oe===void 0&&(Oe=ve,ze=ye),ve===void 0&&Oe===void 0&&(Oe=Ze.width,ze=Ze.height);var xt=this.ctx.transform.decompose(),dn=ae(xt.rotate.shx),Jt=new f,le=(Jt=(Jt=(Jt=Jt.multiply(xt.translate)).multiply(xt.skew)).multiply(xt.scale)).applyToRectangle(new c(be-L*_t,Le-oe*ue,ve*lt,ye*ut));if(this.autoPaging){for(var J,q=k.call(this,le),U=[],B=0;B<q.length;B+=1)U.indexOf(q[B])===-1&&U.push(q[B]);R(U);for(var G=U[0],fe=U[U.length-1],Pe=G;Pe<fe+1;Pe++){this.pdf.setPage(Pe);var _e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=Pe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Pe===1?0:qe+(Pe-2)*wt;if(this.ctx.clip_path.length!==0){var En=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(J,this.posX+this.margin[3],-ft+Ie+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=En}var Cn=JSON.parse(JSON.stringify(le));Cn=I([Cn],this.posX+this.margin[3],-ft+Ie+this.ctx.prevPageLastElemOffset)[0];var mn=(Pe>G||Pe<fe)&&S.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,wt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Cn.x,Cn.y,Cn.w,Cn.h,null,null,dn),mn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",le.x,le.y,le.w,le.h,null,null,dn)};var k=function(O,L,oe){var ve=[];L=L||this.pdf.internal.pageSize.width,oe=oe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ve.push(Math.floor((O.y+ye)/oe)+1);break;case"arc":ve.push(Math.floor((O.y+ye-O.radius)/oe)+1),ve.push(Math.floor((O.y+ye+O.radius)/oe)+1);break;case"qct":var be=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ve.push(Math.floor((be.y+ye)/oe)+1),ve.push(Math.floor((be.y+be.h+ye)/oe)+1);break;case"bct":var Le=Re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ve.push(Math.floor((Le.y+ye)/oe)+1),ve.push(Math.floor((Le.y+Le.h+ye)/oe)+1);break;case"rect":ve.push(Math.floor((O.y+ye)/oe)+1),ve.push(Math.floor((O.y+O.h+ye)/oe)+1)}for(var Oe=0;Oe<ve.length;Oe+=1)for(;this.pdf.internal.getNumberOfPages()<ve[Oe];)A.call(this);return ve},A=function(){var O=this.fillStyle,L=this.strokeStyle,oe=this.font,ve=this.lineCap,ye=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=L,this.font=oe,this.lineCap=ve,this.lineWidth=ye,this.lineJoin=be},I=function(O,L,oe){for(var ve=0;ve<O.length;ve++)switch(O[ve].type){case"bct":O[ve].x2+=L,O[ve].y2+=oe;case"qct":O[ve].x1+=L,O[ve].y1+=oe;default:O[ve].x+=L,O[ve].y+=oe}return O},R=function(O){return O.sort(function(L,oe){return L-oe})},$=function(O,L){var oe=this.fillStyle,ve=this.strokeStyle,ye=this.lineCap,be=this.lineWidth,Le=Math.abs(be*this.ctx.transform.scaleX),Oe=this.lineJoin;if(this.autoPaging){for(var ze,Ze,lt=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),_t=[],ue=0;ue<ut.length;ue++)if(ut[ue].x!==void 0)for(var xt=k.call(this,ut[ue]),dn=0;dn<xt.length;dn+=1)_t.indexOf(xt[dn])===-1&&_t.push(xt[dn]);for(var Jt=0;Jt<_t.length;Jt++)for(;this.pdf.internal.getNumberOfPages()<_t[Jt];)A.call(this);R(_t);for(var le=_t[0],J=_t[_t.length-1],q=le;q<J+1;q++){this.pdf.setPage(q),this.fillStyle=oe,this.strokeStyle=ve,this.lineCap=ye,this.lineWidth=Le,this.lineJoin=Oe;var U=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],B=q===1?this.posY+this.margin[0]:this.margin[0],G=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=q===1?0:G+(q-2)*fe;if(this.ctx.clip_path.length!==0){var _e=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ze,this.posX+this.margin[3],-Pe+B+this.ctx.prevPageLastElemOffset),N.call(this,O,!0),this.path=_e}if(Ze=JSON.parse(JSON.stringify(lt)),this.path=I(Ze,this.posX+this.margin[3],-Pe+B+this.ctx.prevPageLastElemOffset),L===!1||q===0){var Ie=(q>le||q<J)&&S.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],U,fe,null).clip().discardPath()),N.call(this,O,L),Ie&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=lt}else this.lineWidth=Le,N.call(this,O,L),this.lineWidth=be},N=function(O,L){if((O!=="stroke"||L||!D.call(this))&&(O==="stroke"||L||!x.call(this))){for(var oe,ve,ye=[],be=this.path,Le=0;Le<be.length;Le++){var Oe=be[Le];switch(Oe.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:Oe,deltas:[],abs:[]});break;case"lt":var ze=ye.length;if(be[Le-1]&&!isNaN(be[Le-1].x)&&(oe=[Oe.x-be[Le-1].x,Oe.y-be[Le-1].y],ze>0)){for(;ze>=0;ze--)if(ye[ze-1].close!==!0&&ye[ze-1].begin!==!0){ye[ze-1].deltas.push(oe),ye[ze-1].abs.push(Oe);break}}break;case"bct":oe=[Oe.x1-be[Le-1].x,Oe.y1-be[Le-1].y,Oe.x2-be[Le-1].x,Oe.y2-be[Le-1].y,Oe.x-be[Le-1].x,Oe.y-be[Le-1].y],ye[ye.length-1].deltas.push(oe);break;case"qct":var Ze=be[Le-1].x+2/3*(Oe.x1-be[Le-1].x),lt=be[Le-1].y+2/3*(Oe.y1-be[Le-1].y),ut=Oe.x+2/3*(Oe.x1-Oe.x),_t=Oe.y+2/3*(Oe.y1-Oe.y),ue=Oe.x,xt=Oe.y;oe=[Ze-be[Le-1].x,lt-be[Le-1].y,ut-be[Le-1].x,_t-be[Le-1].y,ue-be[Le-1].x,xt-be[Le-1].y],ye[ye.length-1].deltas.push(oe);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(Oe)}}ve=L?null:O==="stroke"?"stroke":"fill";for(var dn=!1,Jt=0;Jt<ye.length;Jt++)if(ye[Jt].arc)for(var le=ye[Jt].abs,J=0;J<le.length;J++){var q=le[J];q.type==="arc"?K.call(this,q.x,q.y,q.radius,q.startAngle,q.endAngle,q.counterclockwise,void 0,L,!dn):Q.call(this,q.x,q.y),dn=!0}else if(ye[Jt].close===!0)this.pdf.internal.out("h"),dn=!1;else if(ye[Jt].begin!==!0){var U=ye[Jt].start.x,B=ye[Jt].start.y;X.call(this,ye[Jt].deltas,U,B),dn=!0}ve&&W.call(this,ve),L&&he.call(this)}},xe=function(O){var L=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,oe=L*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-oe;case"top":return O+L-oe;case"hanging":return O+L-2*oe;case"middle":return O+L/2-oe;default:return O}},re=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(L,oe){this.colorStops.push([L,oe])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(O,L,oe,ve,ye,be,Le,Oe,ze){for(var Ze=Ce.call(this,oe,ve,ye,be),lt=0;lt<Ze.length;lt++){var ut=Ze[lt];lt===0&&(ze?z.call(this,ut.x1+O,ut.y1+L):Q.call(this,ut.x1+O,ut.y1+L)),ie.call(this,O,L,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}Oe?he.call(this):W.call(this,Le)},W=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(O,L){this.pdf.internal.out(n(O)+" "+r(L)+" m")},E=function(O){var L;switch(O.align){case"right":case"end":L="right";break;case"center":L="center";break;default:L="left"}var oe,ve,ye,be=this.pdf.getTextDimensions(O.text),Le=xe.call(this,O.y),Oe=re.call(this,Le)-be.h,ze=this.ctx.transform.applyToPoint(new u(O.x,Le));if(this.autoPaging){var Ze=this.ctx.transform.decompose(),lt=new f;lt=(lt=(lt=lt.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale);for(var ut=this.ctx.transform.applyToRectangle(new c(O.x,Le,be.w,be.h)),_t=lt.applyToRectangle(new c(O.x,Oe,be.w,be.h)),ue=k.call(this,_t),xt=[],dn=0;dn<ue.length;dn+=1)xt.indexOf(ue[dn])===-1&&xt.push(ue[dn]);R(xt);for(var Jt=xt[0],le=xt[xt.length-1],J=Jt;J<le+1;J++){this.pdf.setPage(J);var q=J===1?this.posY+this.margin[0]:this.margin[0],U=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],B=this.pdf.internal.pageSize.height-this.margin[2],G=B-this.margin[0],fe=this.pdf.internal.pageSize.width-this.margin[1],Pe=fe-this.margin[3],_e=J===1?0:U+(J-2)*G;if(this.ctx.clip_path.length!==0){var Ie=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(oe,this.posX+this.margin[3],-1*_e+q),N.call(this,"fill",!0),this.path=Ie}var qe=I([JSON.parse(JSON.stringify(_t))],this.posX+this.margin[3],-_e+q+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*O.scale),ye=this.lineWidth,this.lineWidth=ye*O.scale);var wt=this.autoPaging!=="text";if(wt||qe.y+qe.h<=B){if(wt||qe.y>=q&&qe.x<=fe){var ft=wt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||fe-qe.x)[0],En=I([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-_e+q+this.ctx.prevPageLastElemOffset)[0],Cn=wt&&(J>Jt||J<le)&&S.call(this);Cn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,G,null).clip().discardPath()),this.pdf.text(ft,En.x,En.y,{angle:O.angle,align:L,renderingMode:O.renderingMode}),Cn&&this.pdf.restoreGraphicsState()}}else qe.y<B&&(this.ctx.prevPageLastElemOffset+=B-qe.y);O.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ye)}}else O.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*O.scale),ye=this.lineWidth,this.lineWidth=ye*O.scale),this.pdf.text(O.text,ze.x+this.posX,ze.y+this.posY,{angle:O.angle,align:L,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ye)},Q=function(O,L,oe,ve){oe=oe||0,ve=ve||0,this.pdf.internal.out(n(O+oe)+" "+r(L+ve)+" l")},X=function(O,L,oe){return this.pdf.lines(O,L,oe,null,null)},ie=function(O,L,oe,ve,ye,be,Le,Oe){this.pdf.internal.out([e(a(oe+O)),e(o(ve+L)),e(a(ye+O)),e(o(be+L)),e(a(Le+O)),e(o(Oe+L)),"c"].join(" "))},Ce=function(O,L,oe,ve){for(var ye=2*Math.PI,be=Math.PI/2;L>oe;)L-=ye;var Le=Math.abs(oe-L);Le<ye&&ve&&(Le=ye-Le);for(var Oe=[],ze=ve?-1:1,Ze=L;Le>1e-5;){var lt=Ze+ze*Math.min(Le,be);Oe.push(te.call(this,O,Ze,lt)),Le-=Math.abs(lt-Ze),Ze=lt}return Oe},te=function(O,L,oe){var ve=(oe-L)/2,ye=O*Math.cos(ve),be=O*Math.sin(ve),Le=ye,Oe=-be,ze=Le*Le+Oe*Oe,Ze=ze+Le*ye+Oe*be,lt=4/3*(Math.sqrt(2*ze*Ze)-Ze)/(Le*be-Oe*ye),ut=Le-lt*Oe,_t=Oe+lt*Le,ue=ut,xt=-_t,dn=ve+L,Jt=Math.cos(dn),le=Math.sin(dn);return{x1:O*Math.cos(L),y1:O*Math.sin(L),x2:ut*Jt-_t*le,y2:ut*le+_t*Jt,x3:ue*Jt-xt*le,y3:ue*le+xt*Jt,x4:O*Math.cos(oe),y4:O*Math.sin(oe)}},ae=function(O){return 180*O/Math.PI},Ne=function(O,L,oe,ve,ye,be){var Le=O+.5*(oe-O),Oe=L+.5*(ve-L),ze=ye+.5*(oe-ye),Ze=be+.5*(ve-be),lt=Math.min(O,ye,Le,ze),ut=Math.max(O,ye,Le,ze),_t=Math.min(L,be,Oe,Ze),ue=Math.max(L,be,Oe,Ze);return new c(lt,_t,ut-lt,ue-_t)},Re=function(O,L,oe,ve,ye,be,Le,Oe){var ze,Ze,lt,ut,_t,ue,xt,dn,Jt,le,J,q,U,B,G=oe-O,fe=ve-L,Pe=ye-oe,_e=be-ve,Ie=Le-ye,qe=Oe-be;for(Ze=0;Ze<41;Ze++)Jt=(xt=(lt=O+(ze=Ze/40)*G)+ze*((_t=oe+ze*Pe)-lt))+ze*(_t+ze*(ye+ze*Ie-_t)-xt),le=(dn=(ut=L+ze*fe)+ze*((ue=ve+ze*_e)-ut))+ze*(ue+ze*(be+ze*qe-ue)-dn),Ze==0?(J=Jt,q=le,U=Jt,B=le):(J=Math.min(J,Jt),q=Math.min(q,le),U=Math.max(U,Jt),B=Math.max(B,le));return new c(Math.round(J),Math.round(q),Math.round(U-J),Math.round(B-q))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,L,oe=(O=this.ctx.lineDash,L=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:L}));this.prevLineDash!==oe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=oe)}}})(un.API),(function(t){var e=function(u){var c,f,p,m,y,j,x,D,S,k;for(f=[],p=0,m=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(y=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(j=(y=((y=((y=((y=(y-(k=y%85))/85)-(S=y%85))/85)-(D=y%85))/85)-(x=y%85))/85)%85,f.push(j+33,x+33,D+33,S+33,k+33)):f.push(122);return(function(A,I){for(var R=I;R>0;R--)A.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},n=function(u){var c,f,p,m,y,j=String,x="length",D=255,S="charCodeAt",k="slice",A="replace";for(u[k](-2),u=u[k](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),p=[],m=0,y=(u+=c="uuuuu"[k](u[x]%5||5))[x];y>m;m+=5)f=52200625*(u[S](m)-33)+614125*(u[S](m+1)-33)+7225*(u[S](m+2)-33)+85*(u[S](m+3)-33)+(u[S](m+4)-33),p.push(D&f>>24,D&f>>16,D&f>>8,D&f);return(function(I,R){for(var $=R;$>0;$--)I.pop()})(p,c[x]),j.fromCharCode.apply(j,p)},r=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=Dv(c)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(u,c){var f=0,p=u||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=a(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(un.API),(function(t){t.loadFile=function(e,n,r){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,p,m){var y=new XMLHttpRequest,j=0,x=function(D){var S=D.length,k=[],A=String.fromCharCode;for(j=0;j<S;j+=1)k.push(A(255&D.charCodeAt(j)));return k.join("")};if(y.open("GET",f,!p),y.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(y.onload=function(){y.status===200?m(x(this.responseText)):m(void 0)}),y.send(null),p&&y.status===200)return x(y.responseText)})(a,o,u)}catch{}return c})(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(un.API),(function(t){function e(){return(Wn.html2canvas?Promise.resolve(Wn.html2canvas):_0(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Wn.DOMPurify?Promise.resolve(Wn.DOMPurify):_0(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var f=Yr(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var p=document.createElement(c);for(var m in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[m]=f.style[m];return p},o=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)p!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(c(y,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function c(f){var p=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),p);return(m=m.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(n).then(function(p){return this.set({src:a("div",{innerHTML:c,dompurify:p})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var p=this.opt.jsPDF,m=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,j=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete j.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var D=m[x],S=D.src.find(function(k){return k.format==="truetype"});S&&p.addFont(S.url,D.ref.name,D.ref.style)}return j.windowHeight=j.windowHeight||0,j.windowHeight=j.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):j.windowHeight,p.context2d.save(!0),f(this.prop.container,j)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(r(c)!=="object")return this;var f=Object.keys(c||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=c[p]};switch(p){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[p]=c[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var p=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(p):p})},u.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(c=c||un.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,p,m){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,p,m){return this.setProgress(c?this.progress.val+c:null,f||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(c,f){var p=this;return this.thenCore(c,f,function(m,y){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(j){return p.updateProgress(null,m),j}).then(m,y).then(function(j){return p.updateProgress(1),j})})},u.prototype.thenCore=function(c,f,p){p=p||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),f&&(f=f.bind(m));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),j=p.call(y,c,f);return u.convert(j,m.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,un.getPageSize=function(c,f,p){if(Yr(c)==="object"){var m=c;c=m.orientation,f=m.unit||f,p=m.format||p}f=f||"mm",p=p||"a4",c=(""+(c||"P")).toLowerCase();var y,j=(""+p).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+f}var D,S=0,k=0;if(x.hasOwnProperty(j))S=x[j][1]/y,k=x[j][0]/y;else try{S=p[1],k=p[0]}catch{throw new Error("Invalid format: "+p)}if(c==="p"||c==="portrait")c="p",k>S&&(D=k,k=S,S=D);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",S>k&&(D=k,k=S,S=D)}return{width:k,height:S,unit:f,k:y,orientation:c}},t.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(H0):null;var p=new u(f);return f.worker?p:p.from(c).doCallback()}})(un.API),un.API.addJS=function(t){return N5=t,this.internal.events.subscribe("postPutResources",function(){$p=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($p+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),w5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$p!==void 0&&w5!==void 0&&this.internal.out("/Names <</JavaScript "+$p+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=r.exec(u);if(c!=null){var f=c[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var y=n.internal.newObject();m.push(y);var j=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<m.length;o++)n.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,o){var u={title:a,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var o=0;o<a.children.length;o++)r.count++,this.count_r(r,a.children[o]);return r.count}}])})(un.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,a,o,u,c){var f,p=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,f=(function(y){for(var j,x=256*y.charCodeAt(4)+y.charCodeAt(5),D=y.length,S={width:0,height:0,numcomponents:1},k=4;k<D;k+=2){if(k+=x,e.indexOf(y.charCodeAt(k+1))!==-1){j=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),S={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:j,numcomponents:y.charCodeAt(k+9)};break}x=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return S})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:n,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:p,index:r,alias:a}}return m}})(un.API),un.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,o=u7(t,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,p=o.palette,m=o.depth;a=p&&f===1?(function(K){for(var W=K.width,he=K.height,z=K.data,E=K.palette,Q=K.depth,X=!1,ie=[],Ce=[],te=void 0,ae=!1,Ne=0,Re=0;Re<E.length;Re++){var ne=Ay(E[Re],4),O=ne[0],L=ne[1],oe=ne[2],ve=ne[3];ie.push(O,L,oe),ve!=null&&(ve===0?(Ne++,Ce.length<1&&Ce.push(Re)):ve<255&&(ae=!0))}if(ae||Ne>1){X=!0,Ce=void 0;var ye=W*he;te=new Uint8Array(ye);for(var be=new DataView(z.buffer),Le=0;Le<ye;Le++){var Oe=G0(be,Le,Q),ze=Ay(E[Oe],4)[3];te[Le]=ze}}else Ne===0&&(Ce=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:z,alphaBytes:te,needSMask:X,palette:ie,mask:Ce}})(o):f===2||f===4?(function(K){for(var W=K.data,he=K.width,z=K.height,E=K.channels,Q=K.depth,X=E===2?"DeviceGray":"DeviceRGB",ie=E-1,Ce=he*z,te=ie,ae=Ce*te,Ne=1*Ce,Re=Math.ceil(ae*Q/8),ne=Math.ceil(Ne*Q/8),O=new Uint8Array(Re),L=new Uint8Array(ne),oe=new DataView(W.buffer),ve=new DataView(O.buffer),ye=new DataView(L.buffer),be=!1,Le=0;Le<Ce;Le++){for(var Oe=Le*E,ze=0;ze<te;ze++)E5(ve,G0(oe,Oe+ze,Q),Le*te+ze,Q);var Ze=G0(oe,Oe+te,Q);Ze<(1<<Q)-1&&(be=!0),E5(ye,Ze,1*Le,Q)}return{colorSpace:X,colorsPerPixel:ie,sMaskBitsPerComponent:be?Q:void 0,colorBytes:O,alphaBytes:L,needSMask:be}})(o):(function(K){var W=K.data,he=K.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:he,colorsPerPixel:he==="DeviceGray"?1:3,colorBytes:W instanceof Uint16Array?(function(z){for(var E=z.length,Q=new Uint8Array(2*E),X=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),ie=0;ie<E;ie++)X.setUint16(2*ie,z[ie],!1);return Q})(W):W,needSMask:!1}})(o);var y,j,x,D=a,S=D.colorSpace,k=D.colorsPerPixel,A=D.sMaskBitsPerComponent,I=D.colorBytes,R=D.alphaBytes,$=D.needSMask,N=D.palette,xe=D.mask,re=null;return r!==un.API.image_compression.NONE&&typeof Dv=="function"?(re=(function(K){var W;switch(K){case un.API.image_compression.FAST:W=11;break;case un.API.image_compression.MEDIUM:W=13;break;case un.API.image_compression.SLOW:W=14;break;default:W=12}return W})(r),y=this.decode.FLATE_DECODE,j="/Predictor ".concat(re," /Colors ").concat(k," /BitsPerComponent ").concat(m," /Columns ").concat(u),t=A5(I,Math.ceil(u*k*m/8),k,m,r),$&&(x=A5(R,Math.ceil(u*A/8),1,A,r))):(y=void 0,j=void 0,t=I,$&&(x=R)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:n,data:t,index:e,filter:y,decodeParameters:j,transparency:xe,palette:N,sMask:x,predictor:re,width:u,height:c,bitsPerComponent:m,sMaskBitsPerComponent:A,colorSpace:S}}},(function(t){t.processGIF89A=function(e,n,r,a){var o=new E7(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:c},m=new K0(100).encode(p,100);return t.processJPEG.call(this,m,n,r,a)},t.processGIF87A=t.processGIF89A})(un.API),Xo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ns.log("bit decode error:"+n)}},Xo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}n!==0&&(this.pos+=4-n)}},Xo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*a*4,c=o>>4,f=15&o,p=this.palette[c];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*a+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Xo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Xo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,m=r*this.width*4+4*a;this.data[m]=f,this.data[m+1]=c,this.data[m+2]=u,this.data[m+3]=p}this.pos+=t}},Xo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&n)/n*255|0,p=(u>>11)/e*255|0,m=a*this.width*4+4*o;this.data[m]=p,this.data[m+1]=f,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},Xo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Xo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=u}},Xo.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,a){var o=new Xo(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new K0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),D5.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,a){var o=new D5(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},p=new K0(100).encode(f,100);return t.processJPEG.call(this,p,n,r,a)}})(un.API),un.API.processRGBA=function(t,e,n){for(var r=t.data,a=r.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,p=0;p<a;p+=4){var m=r[p],y=r[p+1],j=r[p+2],x=r[p+3];o[c++]=m,o[c++]=y,o[c++]=j,u[f++]=x}var D=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:D,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},un.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dd=un.API,Vp=Dd.getCharWidthsArray=function(t,e){var n,r,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,p=e.kerning?e.kerning:a.metadata.Unicode.kerning,m=p.fof?p.fof:1,y=e.doKerning!==!1,j=0,x=t.length,D=0,S=c[0]||f,k=[];for(n=0;n<x;n++)r=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(j=y&&Yr(p[r])==="object"&&!isNaN(parseInt(p[r][D],10))?p[r][D]/m:0,k.push((c[r]||S)/f+j)),D=r;return k},S5=Dd.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Dd.processArabic&&(t=Dd.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,a)/n:Vp.apply(this,arguments).reduce(function(o,u){return o+u},0)},j5=function(t,e,n,r){for(var a=[],o=0,u=t.length,c=0;o!==u&&c+e[o]<n;)c+=e[o],o++;a.push(t.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>r&&(a.push(t.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(t.slice(f,o)),a},C5=function(t,e,n){n||(n={});var r,a,o,u,c,f,p,m=[],y=[m],j=n.textIndent||0,x=0,D=0,S=t.split(" "),k=Vp.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var A=Array(f).join(" "),I=[];S.map(function($){($=$.split(/\s*\n/)).length>1?I=I.concat($.map(function(N,xe){return(xe&&N.length?`
`:"")+N})):I.push($[0])}),S=I,f=S5.apply(this,[A,n])}for(o=0,u=S.length;o<u;o++){var R=0;if(r=S[o],f&&r[0]==`
`&&(r=r.substr(1),R=1),j+x+(D=(a=Vp.apply(this,[r,n])).reduce(function($,N){return $+N},0))>e||R){if(D>e){for(c=j5.apply(this,[r,a,e-(j+x),e]),m.push(c.shift()),m=[c.pop()];c.length;)y.push([c.shift()]);D=a.slice(r.length-(m[0]?m[0].length:0)).reduce(function($,N){return $+N},0)}else m=[r];y.push(m),j=D+f,x=k}else m.push(r),j+=x+D,x=k}return p=f?function($,N){return(N?A:"")+$.join(" ")}:function($){return $.join(" ")},y.map(p)},Dd.splitTextToSize=function(t,e,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var y=this.internal.getFont(m.fontName,m.fontStyle),j="Unicode";return y.metadata[j]?{widths:y.metadata[j].widths||{0:1},kerning:y.metadata[j].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=n.lineIndent;var c,f,p=[];for(c=0,f=r.length;c<f;c++)p=p.concat(C5.apply(this,[r[c],u,o]));return p},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},a={},o=0;o<16;o++)r[n[o]]=e[o],a[e[o]]=n[o];var u=function(j){return"0x"+parseInt(j,10).toString(16)},c=t.__fontmetrics__.compress=function(j){var x,D,S,k,A=["{"];for(var I in j){if(x=j[I],isNaN(parseInt(I,10))?D="'"+I+"'":(I=parseInt(I,10),D=(D=u(I).slice(2)).slice(0,-1)+a[D.slice(-1)]),typeof x=="number")x<0?(S=u(x).slice(3),k="-"):(S=u(x).slice(2),k=""),S=k+S.slice(0,-1)+a[S.slice(-1)];else{if(Yr(x)!=="object")throw new Error("Don't know what to do with value type "+Yr(x)+".");S=c(x)}A.push(D+S)}return A.push("}"),A.join("")},f=t.__fontmetrics__.uncompress=function(j){if(typeof j!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,D,S,k,A={},I=1,R=A,$=[],N="",xe="",re=j.length-1,K=1;K<re;K+=1)(k=j[K])=="'"?x?(S=x.join(""),x=void 0):x=[]:x?x.push(k):k=="{"?($.push([R,S]),R={},S=void 0):k=="}"?((D=$.pop())[0][D[1]]=R,S=void 0,R=D[0]):k=="-"?I=-1:S===void 0?r.hasOwnProperty(k)?(N+=r[k],S=parseInt(N,16)*I,I=1,N=""):N+=k:r.hasOwnProperty(k)?(xe+=r[k],R[S]=parseInt(xe,16)*I,I=1,S=void 0,xe=""):xe+=k;return A},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},y={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(j){var x=j.font,D=y.Unicode[x.postScriptName];D&&(x.metadata.Unicode={},x.metadata.Unicode.widths=D.widths,x.metadata.Unicode.kerning=D.kerning);var S=m.Unicode[x.postScriptName];S&&(x.metadata.Unicode.encoding=S,x.encoding=S.codePages[0])}])})(un.API),(function(t){var e=function(n){for(var r=n.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=n.charCodeAt(o);return a};t.API.events.push(["addFont",function(n){var r=void 0,a=n.font,o=n.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(sm(c)),u.metadata=t.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,r)}}])})(un),un.API.addSvgAsImage=function(t,e,n,r,a,o,u,c){if(isNaN(e)||isNaN(n))throw ns.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw ns.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=r,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Wn.canvg?Promise.resolve(Wn.canvg):_0(()=>import("./index.es-Bx3AvbgY.js"),[])).catch(function(j){return Promise.reject(new Error("Could not load canvg: "+j))}).then(function(j){return j.default?j.default:j}).then(function(j){return j.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(m)}).then(function(){y.addImage(f.toDataURL("image/jpeg",1),e,n,r,a,u,c)})},un.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,n);return this},un.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],p=0,m=0,y=0;function j(D,S){var k,A=!1;for(k=0;k<D.length;k+=1)D[k]===S&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=c.length;for(y=0;y<x;y+=1)n[c[y]].value=n[c[y]].defaultValue,n[c[y]].explicitSet=!1}if(Yr(t)==="object"){for(a in t)if(o=t[a],j(c,a)&&o!==void 0){if(n[a].type==="boolean"&&typeof o=="boolean")n[a].value=o;else if(n[a].type==="name"&&j(n[a].valueSet,o))n[a].value=o;else if(n[a].type==="integer"&&Number.isInteger(o))n[a].value=o;else if(n[a].type==="array"){for(p=0;p<o.length;p+=1)if(r=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(r=!1);r===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}n[a].value="["+f.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,S=[];for(D in n)n[D].explicitSet===!0&&(n[D].type==="name"?S.push("/"+D+" /"+n[D].value):S.push("/"+D+" "+n[D].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(un.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],y=0,j=o.length;y<j;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(p[4-c.length],c)}return m.join("")},r=function(o){var u,c,f,p,m,y,j;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,j=(c=Object.keys(o).sort(function(x,D){return x-D})).length;y<j;y++)u=c[y],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,j=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",D=0;D<j.length;D++)x+=String.fromCharCode(j[D]);var S=p();m({data:x,addLength1:!0,objectId:S}),f("endobj");var k=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var A=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Od(c.fontName)),f("/FontFile2 "+S+" 0 R"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var I=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Od(c.fontName)),f("/FontDescriptor "+A+" 0 R"),f("/W "+t.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+k+" 0 R"),f("/BaseFont /"+Od(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+I+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,p=u.newObject,m=u.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,j="",x=0;x<y.length;x++)j+=String.fromCharCode(y[x]);var D=p();m({data:j,addLength1:!0,objectId:D}),f("endobj");var S=p();m({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var k=p();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+D+" 0 R"),f("/Flags 96"),f("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+Od(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=p();for(var A=0;A<c.metadata.hmtx.widths.length;A++)c.metadata.hmtx.widths[A]=parseInt(c.metadata.hmtx.widths[A]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Od(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,p=o.y,m=o.options||{},y=o.mutex||{},j=y.pdfEscape,x=y.activeFontKey,D=y.fonts,S=x,k="",A=0,I="",R=D[S].encoding;if(D[S].encoding!=="Identity-H")return{text:c,x:f,y:p,options:m,mutex:y};for(I=c,S=x,Array.isArray(c)&&(I=c[0]),A=0;A<I.length;A+=1)D[S].metadata.hasOwnProperty("cmap")&&(u=D[S].metadata.cmap.unicode.codeMap[I[A].charCodeAt(0)]),u||I[A].charCodeAt(0)<256&&D[S].metadata.hasOwnProperty("Unicode")?k+=I[A]:k+="";var $="";return parseInt(S.slice(1))<14||R==="WinAnsiEncoding"?$=j(k,S).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&($=n(k,D[S])),y.isHex=!0,{text:$,x:f,y:p,options:m,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?c.push([a(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):c.push(a(Object.assign({},f,{text:u[p]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(un),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(un.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var a,o,u,c,f,p,m,y=e,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,R=0;this.__bidiEngine__={};var $=function(z){var E=z.charCodeAt(),Q=E>>8,X=S[Q];return X!==void 0?y[256*X+(255&E)]:Q===252||Q===253?"AL":A.test(Q)?"L":Q===8?"R":"N"},N=function(z){for(var E,Q=0;Q<z.length;Q++){if((E=$(z.charAt(Q)))==="L")return!1;if(E==="R")return!0}return!1},xe=function(z,E,Q,X){var ie,Ce,te,ae,Ne=E[X];switch(Ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(Ne="AN");break;case"AL":I=!0,Ne="R";break;case"WS":case"BN":Ne="N";break;case"CS":X<1||X+1>=E.length||(ie=Q[X-1])!=="EN"&&ie!=="AN"||(Ce=E[X+1])!=="EN"&&Ce!=="AN"?Ne="N":I&&(Ce="AN"),Ne=Ce===ie?Ce:"N";break;case"ES":Ne=(ie=X>0?Q[X-1]:"B")==="EN"&&X+1<E.length&&E[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&Q[X-1]==="EN"){Ne="EN";break}if(I){Ne="N";break}for(te=X+1,ae=E.length;te<ae&&E[te]==="ET";)te++;Ne=te<ae&&E[te]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(ae=E.length,te=X+1;te<ae&&E[te]==="NSM";)te++;if(te<ae){var Re=z[X],ne=Re>=1425&&Re<=2303||Re===64286;if(ie=E[te],ne&&(ie==="R"||ie==="AL")){Ne="R";break}}}Ne=X<1||(ie=E[X-1])==="B"?"N":Q[X-1];break;case"B":I=!1,a=!0,Ne=R;break;case"S":o=!0,Ne="N"}return Ne},re=function(z,E,Q){var X=z.split("");return Q&&K(X,Q,{hiLevel:R}),X.reverse(),E&&E.reverse(),X.join("")},K=function(z,E,Q){var X,ie,Ce,te,ae,Ne=-1,Re=z.length,ne=0,O=[],L=R?x:j,oe=[];for(I=!1,a=!1,o=!1,ie=0;ie<Re;ie++)oe[ie]=$(z[ie]);for(Ce=0;Ce<Re;Ce++){if(ae=ne,O[Ce]=xe(z,oe,O,Ce),X=240&(ne=L[ae][D[O[Ce]]]),ne&=15,E[Ce]=te=L[ne][5],X>0)if(X===16){for(ie=Ne;ie<Ce;ie++)E[ie]=1;Ne=-1}else Ne=-1;if(L[ne][6])Ne===-1&&(Ne=Ce);else if(Ne>-1){for(ie=Ne;ie<Ce;ie++)E[ie]=te;Ne=-1}oe[Ce]==="B"&&(E[Ce]=0),Q.hiLevel|=te}o&&(function(ve,ye,be){for(var Le=0;Le<be;Le++)if(ve[Le]==="S"){ye[Le]=R;for(var Oe=Le-1;Oe>=0&&ve[Oe]==="WS";Oe--)ye[Oe]=R}})(oe,E,Re)},W=function(z,E,Q,X,ie){if(!(ie.hiLevel<z)){if(z===1&&R===1&&!a)return E.reverse(),void(Q&&Q.reverse());for(var Ce,te,ae,Ne,Re=E.length,ne=0;ne<Re;){if(X[ne]>=z){for(ae=ne+1;ae<Re&&X[ae]>=z;)ae++;for(Ne=ne,te=ae-1;Ne<te;Ne++,te--)Ce=E[Ne],E[Ne]=E[te],E[te]=Ce,Q&&(Ce=Q[Ne],Q[Ne]=Q[te],Q[te]=Ce);ne=ae}ne++}}},he=function(z,E,Q){var X=z.split(""),ie={hiLevel:R};return Q||(Q=[]),K(X,Q,ie),(function(Ce,te,ae){if(ae.hiLevel!==0&&m)for(var Ne,Re=0;Re<Ce.length;Re++)te[Re]===1&&(Ne=k.indexOf(Ce[Re]))>=0&&(Ce[Re]=k[Ne+1])})(X,Q,ie),W(2,X,E,Q,ie),W(1,X,E,Q,ie),X.join("")};return this.__bidiEngine__.doBidiReorder=function(z,E,Q){if((function(ie,Ce){if(Ce)for(var te=0;te<ie.length;te++)Ce[te]=te;c===void 0&&(c=N(ie)),p===void 0&&(p=N(ie))})(z,E),u||!f||p)if(u&&f&&c^p)R=c?1:0,z=re(z,E,Q);else if(!u&&f&&p)R=c?1:0,z=he(z,E,Q),z=re(z,E);else if(!u||c||f||p){if(u&&!f&&c^p)z=re(z,E),c?(R=0,z=he(z,E,Q)):(R=1,z=he(z,E,Q),z=re(z,E));else if(u&&c&&!f&&p)R=1,z=he(z,E,Q),z=re(z,E);else if(!u&&!f&&c^p){var X=m;c?(R=1,z=he(z,E,Q),R=0,m=!1,z=he(z,E,Q),m=X):(R=0,z=he(z,E,Q),z=re(z,E),R=1,m=!1,z=he(z,E,Q),m=X,z=re(z,E))}}else R=0,z=he(z,E,Q);else R=c?1:0,z=he(z,E,Q);return z},this.__bidiEngine__.setOptions=function(z){z&&(u=z.isInputVisual,f=z.isOutputVisual,c=z.isInputRtl,p=z.isOutputRtl,m=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([n.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([n.doBidiReorder(a[c])]);r.text=u}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(un),un.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new du(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new W7(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new L7(this.contents),this.head=new R7(this),this.name=new B7(this),this.cmap=new U4(this),this.toUnicode={},this.hhea=new I7(this),this.maxp=new q7(this),this.hmtx=new U7(this),this.post=new O7(this),this.os2=new F7(this),this.loca=new H7(this),this.glyf=new z7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,p;for(p=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var gl,du=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,a;for(a=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,a,o,u,c,f;return e=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*a+16777216*o+65536*u+256*c+f},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,a,o;for(o=[],r=0,a=e.length;r<a;r++)n=e[r],o.push(this.writeByte(n));return o},t})(),L7=(function(){var t;function e(n){var r,a,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,a,o,u,c,f,p,m,y,j,x,D,S;for(S in x=Object.keys(n).length,f=Math.log(2),y=16*Math.floor(Math.log(x)/f),u=Math.floor(y/f),m=16*x-y,(a=new du).writeInt(this.scalarType),a.writeShort(x),a.writeShort(y),a.writeShort(u),a.writeShort(m),o=16*x,p=a.pos+o,c=null,D=[],n)for(j=n[S],a.writeString(S),a.writeInt(t(j)),a.writeInt(p),a.writeInt(j.length),D=D.concat(j),S==="head"&&(c=p),p+=j.length;p%4;)D.push(0),p++;return a.write(D),r=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(r),a.data},t=function(n){var r,a,o,u;for(n=z4.call(n);n.length%4;)n.push(0);for(o=new du(n),a=0,r=0,u=n.length;r<u;r=r+=4)a+=o.readUInt32();return 4294967295&a},e})(),D7={}.hasOwnProperty,Hl=function(t,e){for(var n in e)D7.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};gl=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var R7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new du).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),R5=(function(){function t(e,n){var r,a,o,u,c,f,p,m,y,j,x,D,S,k,A,I,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(x=e.readUInt16(),j=x/2,e.pos+=6,o=(function(){var $,N;for(N=[],f=$=0;0<=j?$<j:$>j;f=0<=j?++$:--$)N.push(e.readUInt16());return N})(),e.pos+=2,S=(function(){var $,N;for(N=[],f=$=0;0<=j?$<j:$>j;f=0<=j?++$:--$)N.push(e.readUInt16());return N})(),p=(function(){var $,N;for(N=[],f=$=0;0<=j?$<j:$>j;f=0<=j?++$:--$)N.push(e.readUInt16());return N})(),m=(function(){var $,N;for(N=[],f=$=0;0<=j?$<j:$>j;f=0<=j?++$:--$)N.push(e.readUInt16());return N})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var $,N;for(N=[],f=$=0;0<=a?$<a:$>a;f=0<=a?++$:--$)N.push(e.readUInt16());return N})(),f=A=0,R=o.length;A<R;f=++A)for(k=o[f],r=I=D=S[f];D<=k?I<=k:I>=k;r=D<=k?++I:--I)m[f]===0?u=r+p[f]:(u=c[m[f]/2+(r-D)-(j-f)]||0)!==0&&(u+=p[f]),this.codeMap[r]=65535&u}e.pos=y}return t.encode=function(e,n){var r,a,o,u,c,f,p,m,y,j,x,D,S,k,A,I,R,$,N,xe,re,K,W,he,z,E,Q,X,ie,Ce,te,ae,Ne,Re,ne,O,L,oe,ve,ye,be,Le,Oe,ze,Ze,lt;switch(X=new du,u=Object.keys(e).sort(function(ut,_t){return ut-_t}),n){case"macroman":for(S=0,k=(function(){var ut=[];for(D=0;D<256;++D)ut.push(0);return ut})(),I={0:0},o={},ie=0,Ne=u.length;ie<Ne;ie++)I[Oe=e[a=u[ie]]]==null&&(I[Oe]=++S),o[a]={old:e[a],new:I[e[a]]},k[a]=I[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(k),{charMap:o,subtable:X.data,maxGlyphID:S+1};case"unicode":for(E=[],y=[],R=0,I={},r={},A=p=null,Ce=0,Re=u.length;Ce<Re;Ce++)I[N=e[a=u[Ce]]]==null&&(I[N]=++R),r[a]={old:N,new:I[N]},c=I[N]-a,A!=null&&c===p||(A&&y.push(A),E.push(a),p=c),A=a;for(A&&y.push(A),y.push(65535),E.push(65535),he=2*(W=E.length),K=2*Math.pow(Math.log(W)/Math.LN2,2),j=Math.log(K/2)/Math.LN2,re=2*W-K,f=[],xe=[],x=[],D=te=0,ne=E.length;te<ne;D=++te){if(z=E[D],m=y[D],z===65535){f.push(0),xe.push(0);break}if(z-(Q=r[z].new)>=32768)for(f.push(0),xe.push(2*(x.length+W-D)),a=ae=z;z<=m?ae<=m:ae>=m;a=z<=m?++ae:--ae)x.push(r[a].new);else f.push(Q-z),xe.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*W+2*x.length),X.writeUInt16(0),X.writeUInt16(he),X.writeUInt16(K),X.writeUInt16(j),X.writeUInt16(re),be=0,O=y.length;be<O;be++)a=y[be],X.writeUInt16(a);for(X.writeUInt16(0),Le=0,L=E.length;Le<L;Le++)a=E[Le],X.writeUInt16(a);for(ze=0,oe=f.length;ze<oe;ze++)c=f[ze],X.writeUInt16(c);for(Ze=0,ve=xe.length;Ze<ve;Ze++)$=xe[Ze],X.writeUInt16($);for(lt=0,ye=x.length;lt<ye;lt++)S=x[lt],X.writeUInt16(S);return{charMap:r,subtable:X.data,maxGlyphID:R+1}}},t})(),U4=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)n=new R5(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,a;return n==null&&(n="macroman"),r=R5.encode(e,n),(a=new du).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},t})(),I7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),F7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),O7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)n=e.readByte(),a.push(this.names.push(e.readString(n)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},t})(),M7=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},B7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,a,o,u,c,f,p,m,y,j;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=m=0,y=r.length;m<y;o=++m)a=r[o],e.pos=a.offset,p=e.readString(a.length),u=new M7(p,a),f[j=a.nameID]==null&&(f[j]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t})(),q7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),U7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],n=p=0;0<=a?p<a:p>a;n=0<=a?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,y,j;for(j=[],p=0,m=(y=this.metrics).length;p<m;p++)o=y[p],j.push(o.advance);return j}).call(this),r=this.widths[this.widths.length-1],f=[],n=u=0;0<=a?u<a:u>a;n=0<=a?++u:--u)f.push(this.widths.push(r));return f},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),z4=[].slice,z7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,a,o,u,c,f,p,m,y;return e in this.cache?this.cache[e]:(o=this.file.loca,n=this.file.contents,r=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,u=(c=new du(n.read(a))).readShort(),p=c.readShort(),y=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[e]=u===-1?new V7(c,p,y,f,m):new $7(c,u,p,y,f,m),this.cache[e]))},t.prototype.encode=function(e,n,r){var a,o,u,c,f;for(u=[],o=[],c=0,f=n.length;c<f;c++)a=e[n[c]],o.push(u.length),a&&(u=u.concat(a.encode(r)));return o.push(u.length),{table:u,offsets:o}},t})(),$7=(function(){function t(e,n,r,a,o,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),V7=(function(){function t(e,n,r,a,o){var u,c;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new du(z4.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),H7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Hl(t,gl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<r.length;++u)if(r[u]=a,o<n.length&&n[o]==u){++o,r[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},t})(),W7=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,a,o;for(n in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[n],e[n]=a[r];return e},t.prototype.glyphsFor=function(e){var n,r,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in n=[],a)(r=a[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in f=this.glyphsFor(n))r=f[o],a[o]=r;return a},t.prototype.encode=function(e,n){var r,a,o,u,c,f,p,m,y,j,x,D,S,k,A;for(a in r=U4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),x={0:0},A=r.charMap)x[(f=A[a]).old]=f.new;for(D in j=r.maxGlyphID,u)D in x||(x[D]=j++);return m=(function(I){var R,$;for(R in $={},I)$[I[R]]=R;return $})(x),y=Object.keys(m).sort(function(I,R){return I-R}),S=(function(){var I,R,$;for($=[],I=0,R=y.length;I<R;I++)c=y[I],$.push(m[c]);return $})(),o=this.font.glyf.encode(u,S,x),p=this.font.loca.encode(o.offsets,S),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t})();un.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,a,o,u;if(Array.isArray(n))return"["+(function(){var c,f,p;for(p=[],c=0,f=n.length;c<f;c++)r=n[c],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in o=["<<"],n)u=n[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+n},e})();const Ll=({label:t,onClick:e,testId:n})=>s.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[s.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 top-1/2 -translate-y-1/2 border-t border-dotted border-[#d92134]"}),s.jsxs(Me,{type:"button",onClick:e,className:"relative z-10 h-10 min-w-[220px] rounded-full border border-[#d92134]/35 bg-white px-8 text-sm font-semibold text-[#d92134] shadow-none transition hover:bg-[#fff5f6]","data-testid":n,children:["+ ",t]})]}),Rd=P.memo(function({data:e,section:n,showAddButton:r=!0,onUpdateRow:a,onRemoveRow:o,onAddRow:u}){return s.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"Sr. No."}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Details"}),s.jsx("th",{className:"w-12 p-3"})]})}),s.jsx("tbody",{children:e.map((c,f)=>s.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[s.jsx("td",{className:"p-3 text-center text-slate-600",children:c.slNo}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:c.description,onChange:p=>a(n,f,"description",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-desc-${f}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:c.details,onChange:p=>a(n,f,"details",p.target.value),className:"h-8 border-0 bg-transparent focus:bg-white","data-testid":`input-${n}-details-${f}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>o(n,f),disabled:e.length===1,className:"h-8 w-8 text-red-500","data-testid":`button-remove-${n}-${f}`,children:s.jsx(lr,{className:"h-4 w-4"})})})]},`${n}-${f}`))})]}),r&&s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Ll,{label:"Add Row",onClick:()=>u(n),testId:`button-add-${n}`})})]})}),Eh=()=>({id:`drawing-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fileName:"",mimeType:"",dataUrl:""}),$4=t=>{if(!Array.isArray(t)||t.length===0)return[Eh()];const e=t.filter(n=>!!(n&&typeof n=="object")).map((n,r)=>({id:typeof n.id=="string"&&n.id.trim()?n.id:`drawing-${Date.now()}-${r}`,fileName:typeof n.fileName=="string"?n.fileName:"",mimeType:typeof n.mimeType=="string"?n.mimeType:"",dataUrl:typeof n.dataUrl=="string"?n.dataUrl:""}));return e.length>0?e:[Eh()]},Xf=t=>$4(t),lf=(t,e)=>({id:`payment-section-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,heading:t,terms:e}),V4=()=>[lf("Supply and Erection",["20% advance on confirmation of order/PO.","40% after finalisation & submission of GA drawing.","30% before dispatch of material.","5% after Structure Erection.","5% after Building Handing over."]),lf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])],Tl=(t,e)=>{const n=(r,a)=>{const o=r.trim();return o?o.toLowerCase()==="peb - supply and erection"?"Supply and Erection":o:`Heading ${a+1}`};if(Array.isArray(t)&&t.length>0){const r=t.filter(a=>!!(a&&typeof a=="object")).map((a,o)=>({id:typeof a.id=="string"&&a.id.trim()?a.id:`payment-section-${Date.now()}-${o}`,heading:n(typeof a.heading=="string"?a.heading:"",o),terms:Array.isArray(a.terms)?a.terms.filter(u=>typeof u=="string"):[]})).filter(a=>a.terms.length>0||a.heading.trim().length>0);if(r.length>0)return r}return Array.isArray(e)&&e.length>0?[lf("Supply and Erection",e),lf("Civil Construction",["20% Advance along with PO","40% on GA drawing Approval","20% Excavation, PCC and Fiiling","10% on Plinth & RCC floor completion","5% on brickwork completion","5% on handingover"])]:V4()},Mm=(t,e)=>({id:`notes-block-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:t,items:e}),fc=(t,e)=>{if(Array.isArray(t)&&t.length>0){const n=t.filter(r=>!!(r&&typeof r=="object")).map((r,a)=>({id:typeof r.id=="string"&&r.id.trim()?r.id:`notes-block-${Date.now()}-${a}`,title:typeof r.title=="string"&&r.title.trim()?r.title:`Notes ${a+1}`,items:Array.isArray(r.items)?r.items.filter(o=>typeof o=="string"):[]})).map(r=>({...r,items:r.items.length>0?r.items:["New note..."]}));if(n.length>0)return n}return Array.isArray(e)&&e.length>0?[Mm("Notes",e)]:[Mm("Notes",["New note..."])]},G7={proposalTitle:"Techno-Commercial Offer",introSections:[{id:"intro1",type:"paragraph",content:"We are pleased to submit our proposal for the supply & erection of steel Structure against your subject enquiry."},{id:"intro2",type:"paragraph",content:"Our area of expertise is in complete design, manufacture, installation & commissioning of Heavy Structural Fabrication & Pre-Engineered Building."},{id:"intro3",type:"paragraph",content:"This proposal is detailed for your ready reference and includes scope of supply, building description, design loads/criteria, material specifications, time delivery, etc complete."},{id:"intro4",type:"paragraph",content:"We trust you will find that our proposal is in line with your requirements and we look forward to your valued order."}],paymentTerms:["15% advance on confirmation of Work order before Labour mobilization.","85% after fabrication Completion"],notes:["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables."],notesBlocks:[Mm("Notes",["Above mentioned rates are quoted on the basis of inputs received and discussion.","GST @ 18% Extra.","Billing as per BOQ.","No third-party inspection or any inspection charges bear by the Revira Nexgen.","NDT test will be performed at shop only and excluding all machines, testing and consumables."])],closingParagraphs:[{id:"closing1",type:"paragraph",content:"We hope you'll find our offer in line with your requirement & place your valued WO on us giving us an opportunity to serve you. However, please feel free to contact us for any sort of additional information that you may feel is required pertaining to this offer. We assure you our best support at all times."}],closingThanks:"Thanking you",closingCompanyName:"Revira Nexgen Structures Pvt. Ltd.",scopeBriefDetails:[{slNo:1,description:"Building Nos.",details:"01"},{slNo:2,description:"Building Description",details:"PEB Shed"},{slNo:3,description:"Building built-up Area",details:"15494 SQF"}],scopeBasicBuilding:[{slNo:1,description:"Frame Type",details:"RF/MF"},{slNo:2,description:"Length (M)",details:"36"},{slNo:3,description:"Width (M) or Span",details:"21"},{slNo:4,description:"Clear Height (M)",details:"9.0"},{slNo:5,description:"Brick Wall Height (M)",details:"3.0"},{slNo:6,description:"Side wall Column Spacing (M)",details:"As Per Drawing"},{slNo:7,description:"Roof Slope",details:"1:10"},{slNo:8,description:"End Wall Column Spacing (M)",details:"As Per GA"},{slNo:9,description:"Bay Spacing (M)",details:"As Per GA"},{slNo:10,description:"Type of end frames",details:"Non-Expandable Frames"},{slNo:11,description:"Wind bracing",details:"As per GA drawing"},{slNo:12,description:"Roof cladding",details:"As per GA drawing"},{slNo:13,description:"Wall cladding",details:"As per GA drawing"}],scopeBuildingAdditions:[{slNo:1,description:"Canopy - Location",details:"As per approved drawing"},{slNo:2,description:"Framed openings",details:"As per approved drawing"}],steelWorkFinish:[{slNo:1,description:"Welding",details:"Continuous FCAW welding along with Intermediate, AWS D1.1"},{slNo:2,description:"Frames, Built-up / HR sections/Bracings",details:"Mechanical Cleaning with swipe blast on heavy mill scale and one coat of primer and one coat of Finish Enamel paint"},{slNo:3,description:"Purlins / Girts",details:"ASTM A653"},{slNo:4,description:"Profile sheets",details:"Bare-0.47 mm thk and colour -0.5 mm thk blue RAL5012"}],designLoads:[{slNo:1,description:"Dead load",details:"0.15 KN/M2"},{slNo:2,description:"Live load",details:"0.57 KN/M2"},{slNo:3,description:"Crane Capacity",details:"-"},{slNo:4,description:"Wind load (Kmph or m/sec)",details:"44 M/sec"},{slNo:5,description:"Mezzanine Load -Kg/SQM",details:"-"},{slNo:6,description:"Slab Thickness (MM)",details:"-"},{slNo:7,description:"Seismic load (Zone no.)",details:"III"}],applicableCodes:["Frame members are designed in accordance with AISC-LRFD (American Institute of Steel Construction).","Cold Formed members are designed in accordance with the AISC For Use of Cold-Formed Light Gauge Steel Structural Member's In General Building Construction.","Deflection as per IS 800-2007.","All welding is done in accordance with the 2000 Edition of the American Welding Society (AWS D1.1).","Structural Welding Code-Steel. All Welders are qualified for the type of welds performed.",'Manufacturing dimensional tolerances are in accordance with the requirements of the 1996 Edition of the Metal Building Manufacturer Association (MBMA) of the USA.; "Low rise building systems Manual".'],materialSpecs:[{slNo:1,description:"Primary Members - Built up sections (Make  SAIL/JINDAL/TATA)",details:"Min. Y.S. 350 MPA"},{slNo:2,description:"Hot Rolled Sections - Channels (Make  TATA/Apollo/SAIL)",details:"IS: 2062 / A 572, Grade 36, Min. Y.S. 250 MPA"},{slNo:3,description:"Purlins/Girts (Make  JSW/TATA)",details:"ASTM A653"},{slNo:4,description:"Anchor bolts",details:"IS 2062 E250A"},{slNo:5,description:"Primary Connection bolts Electroplated/Pre galvanised",details:"High Strength Bolts, IS: 1367 / 8.8 Grade"},{slNo:6,description:"Secondary connection bolts Pre galvanised",details:"Bolt as per ASTM A 325, Grade 4.6"}],drawingsDelivery:["RNSPL will issue shop Approval Drawings within 1 week from date of signing contract/issue of Purchase Order and receipt of advance payment.","BUYER must return the accepted approval drawings preferably within 1 week thereafter; otherwise, may result in revision to delivery commitment.","Anchor bolts & Layout drawings for fixing anchor bolts will be provided within 10 days from the date of receipt of Advance payment.","Dispatch of materials will start as per agreed time frame from the date of receipt of signed Approval drawings with receipt of payment as per agreed terms."],erectionScopeClient:["After completion of Anchor bolt fixing, back filling of the murum up to the FFL level & rolling is under the scope of the client.","Anchor bolt shall be provided to site and fixing in presence of our engineer at site only.","Minimum 15 days curing time is to be given after Anchor Bolt Casting is done.","Free Power and water to be provided close to site.","If power not available, DG has to be provided.","We assumed that, crane can move inside the proposed building while erecting the main frames.","Security of the material is under the scope of the client.","Shelter/accommodation to be provided to the workers till completion of the work."],erectionScopeCompany:["Unloading and stacking of the material at site, Erection of material as per RNSPL specifications.","Anchor Bolt Supply & Periodic Supervision is in our Scope.","Alignment of columns and rafters.","Plumb and checking water level of columns & Portal frame.","Cleaning and touch up paint work for the structure on damaged surfaces during transportation and site movement.","Alignment of Purlins and Girts.","Fixing of roof sheeting, wall sheeting and accessories."],paymentTermSections:V4(),commercialTerms:[{slNo:1,description:"Payment Terms including taxes",conditions:"As above"},{slNo:2,description:"Delivery period",conditions:"Delivery as per mutually agreed from the date of receipt of signed approved drawings and receipt of payment as per agreed terms."},{slNo:3,description:"Erection period",conditions:"Erection Period as per mutually agreed after delivery of complete material."},{slNo:4,description:"GST",conditions:"Extra @ 18% for supply and Erection both."},{slNo:5,description:"Scope of contract",conditions:"This Contract is the only Agreement between the SELLER & BUYER and the terms which have been Expressly stated will be binding."},{slNo:6,description:"Proposal validity",conditions:"This proposal is valid for (5) days from the date of this proposal."},{slNo:7,description:"Erection drawing",conditions:"The SELLER will furnish the BUYER with all standard erection drawings required for erection of buildings."},{slNo:8,description:"Specification changes",conditions:"SELLER reserves the right to modify design and substitute material equal or superior to originally specified."},{slNo:9,description:"Change in scope",conditions:"Any change to the stated scope of supply may lead to variation in price and delivery period."},{slNo:10,description:"Our liability",conditions:"SELLER liability is restricted to scope of this contract only."},{slNo:11,description:"Ownership Of Un-Approved Material",conditions:"All unapproved material supplied to site shall be the property of SELLER."},{slNo:12,description:"Warranty",conditions:"Products supplied are warranted against defective material & workmanship for One year."},{slNo:13,description:"Permits",conditions:"SELLER shall not be responsible for obtaining permits to erect or install any product."},{slNo:14,description:"Force Majeure",conditions:"SELLER shall not be liable for delays due to circumstances beyond control."},{slNo:15,description:"Weighment",conditions:"Weight mentioned in SELLER Bill of Supply will be final for billing purposes."},{slNo:16,description:"Safety at site",conditions:"BUYER shall provide secured area for unloading and storing all material."},{slNo:17,description:"Exclusions",conditions:"Anything not mentioned in the offer."}],bankDetails:[{particular:"Account holder",value:"REVIRA NEXGEN STRUCTURES PRIVATE LIMITED"},{particular:"Bank Name",value:"YES Bank"},{particular:"A/C No.",value:"073361900002657"},{particular:"IFSC Code",value:"YESB0000733"}],uploadDrawings:[Eh()]},H4=["scopeBrief","scopeBasic","scopeAdditions","steelWork","designLoads","applicableCodes","materialSpecs","drawingsDelivery","erectionScopeClient","erectionScopeCompany","commercialPrice","paymentTerms","commercialTerms"],W4=["commercialPrice","paymentTerms"],nh={scopeBrief:"SCOPE OF SUPPLY - BRIEF DETAILS",scopeBasic:"SCOPE OF SUPPLY - BASIC BUILDING DESCRIPTION",scopeAdditions:"STANDARD BUILDING ADDITIONS (CANOPY / FASCIA / LINER / PARTITIONS)",steelWork:"STEEL WORK FINISH",designLoads:"DESIGN LOADS",applicableCodes:"APPLICABLE CODES for Design",materialSpecs:"MATERIAL SPECIFICATIONS",drawingsDelivery:"DRAWINGS & DELIVERY",erectionScopeClient:"ERECTION SCOPES - SCOPE OF CLIENT",erectionScopeCompany:"ERECTION SCOPES - SCOPE OF COMPANY",commercialPrice:"COMMERCIAL PRICE & PAYMENT",paymentTerms:"PAYMENT TERMS",commercialTerms:"COMMERCIAL TERMS & CONDITIONS"},Hp=t=>(t?H4:W4).map((n,r)=>({id:`${n}-${r+1}`,type:n,heading:nh[n]}));function I5(){const{projectId:t,quotationId:e}=ed(),[,n]=Va(),{toast:r}=Ha(),{data:a}=Ra(),o=P.useRef(null),[u,c]=P.useState({quotationNumber:"",revision:"R-001",enquiryNumber:"",subject:"Supply & erection of Steel Structures for PEB Shed",contactName:"Hareram R Sharma",contactMobile:"8390491843",contactEmail:"Hareram.sharma@reviranexgen.com",buildingDescription:"PEB Shed",buildingArea:"",frameType:"RF/MF",length:"",width:"",clearHeight:"",roofSlope:"1:10",paymentTerms:"",notes:"",proposalTitle:"Techno-Commercial Offer",toLabel:"To",msLabel:"M/s"}),[f,p]=P.useState([{serialNo:1,description:"Fabrication of Structural steel hot rolled section on job work-labour basis i.e. Pipe rack str excluding detailing.",unit:"Rs/MT",quantity:600,rate:7440,amount:4464e3,remarks:""}]),[m,y]=P.useState(G7),[j,x]=P.useState(null),[D,S]=P.useState(null),[k,A]=P.useState(null),[I,R]=P.useState(null),[$,N]=P.useState(null),[xe,re]=P.useState({}),[K,W]=P.useState(null),[he,z]=P.useState(null),[E,Q]=P.useState(null),[X,ie]=P.useState(null),[Ce,te]=P.useState(null),[ae,Ne]=P.useState(null),[Re,ne]=P.useState(!1),[O,L]=P.useState(!1),[oe,ve]=P.useState(!1),[ye,be]=P.useState({open:!1,title:"",description:"",onConfirm:null}),[Le,Oe]=P.useState(!1),[ze,Ze]=P.useState(!1),[lt,ut]=P.useState(!1),[_t,ue]=P.useState({to:"",subject:"",message:""}),[xt,dn]=P.useState({mobile:"",message:""}),[Jt,le]=P.useState(null),[J,q]=P.useState([]),[U,B]=P.useState({}),{data:G,isLoading:fe}=Bn({queryKey:["/revira/api/projects",t],queryFn:async()=>{const F=await fetch(`/revira/api/projects/${t}`,{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch project");return F.json()},enabled:!!t}),{data:Pe,isLoading:_e}=Bn({queryKey:["/revira/api/clients",G?.clientId],queryFn:async()=>{const F=await fetch(`/revira/api/clients/${G?.clientId}`,{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch client");return F.json()},enabled:!!G?.clientId}),{data:Ie}=Bn({queryKey:["/revira/api/branding"],enabled:!!a}),{data:qe}=Bn({queryKey:["/revira/api/projects",t,"quotation",e||"latest"],queryFn:async()=>{if(e){const de=await fetch(`/revira/api/quotations/${e}`,{credentials:"include"});if(!de.ok)throw new Error("Failed to fetch quotation");return de.json()}const F=await fetch(`/revira/api/projects/${t}/quotation`,{credentials:"include"});if(!F.ok){if(F.status===404)return null;throw new Error("Failed to fetch quotation")}return F.json()},enabled:!!t}),{data:wt}=Bn({queryKey:["/revira/api/quotations",qe?.id,"items"],queryFn:async()=>{const F=await fetch(`/revira/api/quotations/${qe?.id}/items`,{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch items");return F.json()},enabled:!!qe?.id}),{data:ft}=Bn({queryKey:["/revira/api/projects",t,"quotation-versions"],queryFn:async()=>{const F=await fetch(`/revira/api/projects/${t}/quotation-versions`,{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch versions");return F.json()},enabled:!!t}),En=P.useCallback(()=>G?.quotationType==="Supply and Fabrication"?H4:W4,[G?.quotationType]),Cn=P.useCallback(F=>{const de=new Set(En());if(!Array.isArray(F))return Hp(G?.quotationType==="Supply and Fabrication");const we=F.filter(Ae=>!!(Ae&&typeof Ae=="object"&&"id"in Ae&&"type"in Ae&&typeof Ae.id=="string"&&typeof Ae.type=="string")).filter(Ae=>de.has(Ae.type)).map(Ae=>({id:Ae.id,type:Ae.type,heading:typeof Ae.heading=="string"&&Ae.heading.trim().length>0?Ae.heading:nh[Ae.type]}));if(!we.some(Ae=>Ae.type==="paymentTerms")&&de.has("paymentTerms")){const Ae={id:`paymentTerms-${Date.now()}`,type:"paymentTerms",heading:nh.paymentTerms},Se=we.findIndex(At=>At.type==="commercialPrice");Se>=0?we.splice(Se+1,0,Ae):we.push(Ae)}return we.map(Ae=>{if(Ae.type!=="commercialPrice")return Ae;const Se=Ae.heading.trim().toUpperCase();return Se==="COMMERCIAL PRICE"||Se==="COMMERCIAL PRICE & PAYMENT TERMS"?{...Ae,heading:"COMMERCIAL PRICE & PAYMENT"}:Ae})},[En,G?.quotationType]);P.useEffect(()=>{if(G&&Pe&&!qe){const F=G.quotationType==="Supply and Fabrication"?"RNS-Peb":G.quotationType==="Structural Fabrication"?"RNS-SF":"RNS-JW",we=new Date().toLocaleString("en-US",{month:"short",year:"numeric"}).toUpperCase().replace(" ","-"),Ae=G.quotationType==="Supply and Fabrication"?"Supply & erection of Steel Structures for PEB Shed":G.quotationType==="Structural Fabrication"?"Structural Fabrication - Steel Structures":"Job Work - Steel Structures";c(Se=>({...Se,quotationNumber:`RNS/${we}/${Pe.name}/RNS-${String(G.id).padStart(3,"0")}`,enquiryNumber:`${F}-RNS-${String(G.id).padStart(3,"0")}`,subject:Ae})),q(Hp(G.quotationType==="Supply and Fabrication"))}},[G,Pe,qe]),P.useEffect(()=>{if(qe){let F=null;if(qe.contentSections)try{F=JSON.parse(qe.contentSections);const de=Array.isArray(F?.paymentTerms)?F.paymentTerms.filter(we=>typeof we=="string"):[];y(we=>({...we,...F,notes:Array.isArray(F?.notes)?F.notes.filter(Ae=>typeof Ae=="string"):we.notes,notesBlocks:fc(F?.notesBlocks,Array.isArray(F?.notes)?F.notes.filter(Ae=>typeof Ae=="string"):we.notes),paymentTermSections:Tl(F?.paymentTermSections,de),uploadDrawings:$4(F?.uploadDrawings)})),q(Cn(F?.accordionBlocks))}catch(de){console.error("Failed to parse content sections:",de),q(Hp(G?.quotationType==="Supply and Fabrication"))}else q(Hp(G?.quotationType==="Supply and Fabrication"));c({quotationNumber:qe.quotationNumber,revision:qe.revision,enquiryNumber:qe.enquiryNumber,subject:qe.subject,contactName:qe.contactName,contactMobile:qe.contactMobile,contactEmail:qe.contactEmail,buildingDescription:qe.buildingDescription||"",buildingArea:qe.buildingArea||"",frameType:qe.frameType||"",length:qe.length||"",width:qe.width||"",clearHeight:qe.clearHeight||"",roofSlope:qe.roofSlope||"",paymentTerms:qe.paymentTerms||"",notes:qe.notes||"",proposalTitle:F?.proposalTitle||"Techno-Commercial Offer",toLabel:F?.toLabel||"To",msLabel:F?.msLabel||"M/s"})}},[qe,Cn,G?.quotationType]),P.useEffect(()=>{wt&&wt.length>0&&p(wt.map(F=>({id:F.id,serialNo:F.serialNo,description:F.description,unit:F.unit,quantity:Number(F.quantity)||0,rate:Number(F.rate)||0,amount:Number(F.amount)||0,remarks:F.remarks||""})))},[wt]),P.useEffect(()=>{B(F=>{const de={};return J.forEach(we=>{de[we.id]=F[we.id]??!0}),de})},[J]),P.useEffect(()=>{const F=Tl(m.paymentTermSections,m.paymentTerms);re(de=>{const we={};return F.forEach(Ae=>{we[Ae.id]=de[Ae.id]??!0}),we})},[m.paymentTermSections,m.paymentTerms]);const mn=Mr({mutationFn:async()=>{const de=await(await jn("POST","/revira/api/quotations",{projectId:Number(t),...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:J})})).json();for(const we of f)we.description.trim()&&await jn("POST",`/revira/api/quotations/${de.id}/items`,{serialNo:we.serialNo,description:we.description,unit:we.unit,quantity:String(we.quantity),rate:String(we.rate),amount:String(we.amount),remarks:we.remarks});return de},onSuccess:F=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation","latest"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",F.id]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),n(`/revira/projects/${t}/quotation/${F.id}`),r({title:"Quotation saved",description:"The quotation has been created successfully."})},onError:F=>{r({title:"Error",description:F.message||"Failed to create quotation",variant:"destructive"})}}),gn=Mr({mutationFn:async()=>{if(qe){if(await jn("PUT",`/revira/api/quotations/${qe.id}`,{...u,contentSections:JSON.stringify({...m,proposalTitle:u.proposalTitle,toLabel:u.toLabel,msLabel:u.msLabel,accordionBlocks:J})}),wt)for(const F of wt)await jn("DELETE",`/revira/api/quotation-items/${F.id}`);for(const F of f)F.description.trim()&&await jn("POST",`/revira/api/quotations/${qe.id}/items`,{serialNo:F.serialNo,description:F.description,unit:F.unit,quantity:String(F.quantity),rate:String(F.rate),amount:String(F.amount),remarks:F.remarks})}},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation",e||"latest"]}),Gn.invalidateQueries({queryKey:["/revira/api/quotations",qe?.id,"items"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),r({title:"Quotation updated",description:"The quotation has been updated successfully."})},onError:F=>{r({title:"Error",description:F.message||"Failed to update quotation",variant:"destructive"})}}),bn=Mr({mutationFn:async()=>{if(!qe)throw new Error("No quotation to duplicate");return(await jn("POST",`/revira/api/quotations/${qe.id}/duplicate`)).json()},onSuccess:F=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),r({title:"Quotation duplicated",description:`Created new version: ${F.revision}`}),n(`/revira/projects/${t}/quotation/${F.id}`)},onError:F=>{r({title:"Error",description:F.message||"Failed to duplicate quotation",variant:"destructive"})}}),Ct=()=>{qe?gn.mutate():mn.mutate()},rn=()=>{p([...f,{serialNo:f.length+1,description:"",unit:"Rs/MT",quantity:0,rate:0,amount:0,remarks:""}])},Ke=F=>{if(f.length>1){const de=f.filter((we,Ae)=>Ae!==F).map((we,Ae)=>({...we,serialNo:Ae+1}));p(de)}},Ye=(F,de,we)=>{const Ae=[...f];if(de==="quantity"||de==="rate"||de==="amount"?Ae[F]={...Ae[F],[de]:Number(we)||0}:Ae[F]={...Ae[F],[de]:we},de==="quantity"||de==="rate"){const Se=Ae[F].quantity,At=Ae[F].rate;Ae[F].amount=Se*At}p(Ae)},it=()=>f.reduce((F,de)=>F+de.amount,0),on=F=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(F).replace(""," "),ln=()=>new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),Zn=(F,de)=>{y(we=>({...we,introSections:we.introSections.map(Ae=>Ae.id===F?{...Ae,content:de}:Ae)}))},bs=()=>{const F=`intro${Date.now()}`;y(de=>({...de,introSections:[...de.introSections,{id:F,type:"paragraph",content:"New paragraph..."}]}))},_r=F=>{y(de=>({...de,introSections:de.introSections.filter(we=>we.id!==F)}))},ds=F=>{y(de=>{const we=fc(de.notesBlocks,de.notes).map(Ae=>Ae.id===F?{...Ae,items:[...Ae.items,"New note..."]}:Ae);return{...de,notesBlocks:we,notes:we[0]?.items??de.notes}})},Nr=(F,de,we)=>{y(Ae=>{const Se=fc(Ae.notesBlocks,Ae.notes).map(At=>At.id===F?{...At,items:At.items.map((Vn,$t)=>$t===de?we:Vn)}:At);return{...Ae,notesBlocks:Se,notes:Se[0]?.items??Ae.notes}})},Mt=(F,de)=>{y(we=>{const Ae=fc(we.notesBlocks,we.notes).map(Se=>{if(Se.id!==F)return Se;const At=Se.items.filter((Vn,$t)=>$t!==de);return{...Se,items:At.length>0?At:["New note..."]}});return{...we,notesBlocks:Ae,notes:Ae[0]?.items??we.notes}})},vr=F=>{y(de=>{const we=fc(de.notesBlocks,de.notes),Ae=we.find(Vn=>Vn.id===F);if(!Ae)return de;const Se=Mm(`${Ae.title} Copy`,[...Ae.items]),At=[...we,Se];return{...de,notesBlocks:At,notes:At[0]?.items??de.notes}})},fs=(F,de)=>{y(we=>{const Ae=fc(we.notesBlocks,we.notes).map(Se=>Se.id===F?{...Se,title:de}:Se);return{...we,notesBlocks:Ae,notes:Ae[0]?.items??we.notes}})},hs=F=>{y(de=>{const we=fc(de.notesBlocks,de.notes);if(we.length<=1)return de;const Ae=we.filter(Se=>Se.id!==F);return{...de,notesBlocks:Ae,notes:Ae[0]?.items??de.notes}}),S(de=>de?.blockId===F?null:de),A(de=>de===F?null:de)},Ls=()=>{y(F=>({...F,paymentTermSections:[...Tl(F.paymentTermSections),lf("New Heading",["New payment term..."])]}))},Sr=(F,de)=>{y(we=>({...we,paymentTermSections:Tl(we.paymentTermSections).map(Ae=>Ae.id===F?{...Ae,heading:de}:Ae)}))},Ir=F=>{y(de=>({...de,paymentTermSections:(()=>{const we=Tl(de.paymentTermSections).filter(Ae=>Ae.id!==F);return we.length>0?we:[lf("New Heading",["New payment term..."])]})()}))},Pr=F=>{y(de=>({...de,paymentTermSections:Tl(de.paymentTermSections).map(we=>we.id===F?{...we,terms:[...we.terms,"New payment term..."]}:we)}))},Di=(F,de,we)=>{y(Ae=>({...Ae,paymentTermSections:Tl(Ae.paymentTermSections).map(Se=>Se.id===F?{...Se,terms:Se.terms.map((At,Vn)=>Vn===de?we:At)}:Se)}))},Ds=(F,de)=>{y(we=>({...we,paymentTermSections:Tl(we.paymentTermSections).map(Ae=>Ae.id===F?{...Ae,terms:Ae.terms.filter((Se,At)=>At!==de)}:Ae)}))},ps=()=>{y(F=>({...F,drawingsDelivery:[...F.drawingsDelivery,"New drawings/delivery item..."]})),W(m.drawingsDelivery.length)},Hr=(F,de)=>{y(we=>({...we,drawingsDelivery:we.drawingsDelivery.map((Ae,Se)=>Se===F?de:Ae)}))},hr=F=>{y(de=>({...de,drawingsDelivery:de.drawingsDelivery.filter((we,Ae)=>Ae!==F)}))},Qs=()=>{y(F=>({...F,erectionScopeClient:[...F.erectionScopeClient,"New client scope item..."]})),z(m.erectionScopeClient.length)},Rs=(F,de)=>{y(we=>({...we,erectionScopeClient:we.erectionScopeClient.map((Ae,Se)=>Se===F?de:Ae)}))},Ri=F=>{y(de=>({...de,erectionScopeClient:de.erectionScopeClient.filter((we,Ae)=>Ae!==F)}))},ws=()=>{y(F=>({...F,erectionScopeCompany:[...F.erectionScopeCompany,"New company scope item..."]})),Q(m.erectionScopeCompany.length)},Is=(F,de)=>{y(we=>({...we,erectionScopeCompany:we.erectionScopeCompany.map((Ae,Se)=>Se===F?de:Ae)}))},kr=F=>{y(de=>({...de,erectionScopeCompany:de.erectionScopeCompany.filter((we,Ae)=>Ae!==F)}))},Ns=()=>{y(F=>({...F,applicableCodes:[...F.applicableCodes,"New applicable code..."]})),ie(m.applicableCodes.length)},Ci=(F,de)=>{y(we=>({...we,applicableCodes:we.applicableCodes.map((Ae,Se)=>Se===F?de:Ae)}))},Ga=F=>{y(de=>({...de,applicableCodes:de.applicableCodes.filter((we,Ae)=>Ae!==F)}))},wr=()=>{const F=m.commercialTerms.length+1;y(de=>({...de,commercialTerms:[...de.commercialTerms,{slNo:F,description:"New Term",conditions:"Enter conditions..."}]})),te(m.commercialTerms.length)},Ai=(F,de,we)=>{y(Ae=>({...Ae,commercialTerms:Ae.commercialTerms.map((Se,At)=>At===F?{...Se,[de]:we}:Se)}))},is=F=>{y(de=>({...de,commercialTerms:de.commercialTerms.filter((we,Ae)=>Ae!==F).map((we,Ae)=>({...we,slNo:Ae+1}))}))},Xr=()=>{y(F=>({...F,bankDetails:[...F.bankDetails,{particular:"New Field",value:"Enter value..."}]})),Ne(m.bankDetails.length)},sn=(F,de,we)=>{y(Ae=>({...Ae,bankDetails:Ae.bankDetails.map((Se,At)=>At===F?{...Se,[de]:we}:Se)}))},pr=F=>{y(de=>({...de,bankDetails:de.bankDetails.filter((we,Ae)=>Ae!==F)}))},Ln=(F,de)=>{y(we=>({...we,closingParagraphs:we.closingParagraphs.map(Ae=>Ae.id===F?{...Ae,content:de}:Ae)}))},Zt=(F,de)=>{const we=de.target.files?.[0];if(!we)return;const Ae=we.type.startsWith("image/"),Se=we.type==="application/pdf"||we.name.toLowerCase().endsWith(".pdf");if(!Ae&&!Se){r({title:"Unsupported file type",description:"Please upload an image or a PDF file.",variant:"destructive"});return}if(we.size>10*1024*1024){r({title:"File too large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}const At=new FileReader;At.onloadend=()=>{const Vn=typeof At.result=="string"?At.result:"";y($t=>({...$t,uploadDrawings:Xf($t.uploadDrawings).map(Ot=>Ot.id===F?{...Ot,fileName:we.name,mimeType:Se?"application/pdf":we.type||"image/png",dataUrl:Vn}:Ot)}))},At.readAsDataURL(we)},On=()=>{y(F=>({...F,uploadDrawings:[...Xf(F.uploadDrawings),Eh()]}))},yt=F=>{y(de=>{const we=Xf(de.uploadDrawings).filter(Ae=>Ae.id!==F);return{...de,uploadDrawings:we.length>0?we:[Eh()]}})},Xe=P.useCallback((F,de,we,Ae)=>{y(Se=>({...Se,[F]:Se[F].map((At,Vn)=>Vn===de?{...At,[we]:Ae}:At)}))},[]),ot=P.useCallback(F=>{y(de=>{const we=de[F];return{...de,[F]:[...we,{slNo:we.length+1,description:"",details:""}]}})},[]),nt=P.useCallback((F,de)=>{y(we=>{const Ae=we[F];return Ae.length>1?{...we,[F]:Ae.filter((Se,At)=>At!==de).map((Se,At)=>({...Se,slNo:At+1}))}:we})},[]),Ge=P.useCallback(F=>U[F]??!0,[U]),gt=P.useCallback(F=>{B(de=>({...de,[F]:!(de[F]??!0)}))},[]),jt=P.useCallback((F,de)=>{B(we=>({...we,[F]:de}))},[]),Tt=P.useCallback((F,de)=>{F===de||F<0||de<0||q(we=>{if(F>=we.length||de>=we.length)return we;const Ae=[...we],[Se]=Ae.splice(F,1);return Ae.splice(de,0,Se),Ae})},[]),Rt=P.useCallback(F=>{q(de=>de.filter(we=>we.id!==F)),B(de=>{const{[F]:we,...Ae}=de;return Ae})},[]),It=P.useCallback(F=>{let de=null;q(we=>{const Ae=we.findIndex($t=>$t.id===F);if(Ae===-1)return we;const Se=we[Ae],At={id:`${Se.type}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,type:Se.type,heading:Se.heading};de=At.id;const Vn=[...we];return Vn.splice(Ae+1,0,At),Vn}),de&&B(we=>({...we,[de]:!0}))},[]),Dt=P.useCallback((F,de)=>{q(we=>we.map(Ae=>Ae.id===F?{...Ae,heading:de}:Ae))},[]),Lt=P.useCallback(F=>J.filter(de=>de.type===F),[J]),Ft=P.useCallback(F=>J.findIndex(de=>de.id===F),[J]),qt=P.useCallback(F=>{const de=Ft(F.id);return{isEditingHeading:Jt===F.id,onStartEditHeading:()=>le(F.id),onHeadingChange:Ae=>Dt(F.id,Ae),onHeadingBlur:()=>{const Ae=J.find(Se=>Se.id===F.id);Ae&&!Ae.heading.trim()&&Dt(F.id,nh[F.type]),le(null)},onMoveUp:de>0?()=>Tt(de,de-1):void 0,onMoveDown:de>=0&&de<J.length-1?()=>Tt(de,de+1):void 0,onDuplicate:()=>It(F.id),onDelete:()=>Rt(F.id),canMoveUp:de>0,canMoveDown:de>=0&&de<J.length-1}},[J,It,Jt,Ft,Tt,Rt,Dt]),vn=async F=>{const de=F?.save??!0,we=F?.silent??!1,Ae=F?.returnDataUri??!1;Oe(!0);try{const Se=new un({orientation:"portrait",unit:"mm",format:"a4"}),At=210,Vn=297,$t=15,Ot=At-$t*2,as=35,Ka=30,Qa=Et=>Et*.2646,Fs=Qa(80),ra=Qa(50),vl=Qa(80);let bt=as+10,er=1;const Lo=Et=>new Promise((wn,Vt)=>{const yn=new Image;yn.crossOrigin="anonymous",yn.onload=()=>{const zn=document.createElement("canvas");zn.width=yn.width,zn.height=yn.height,zn.getContext("2d")?.drawImage(yn,0,0),wn(zn.toDataURL("image/png"))},yn.onerror=Vt,yn.src=Et});let Wi=null,Za=null,vi=null;try{Ie?.headerUrl&&(Wi=await Lo(Ie.headerUrl)),Ie?.footerUrl&&(Za=await Lo(Ie.footerUrl)),Ie?.stampUrl&&(vi=await Lo(Ie.stampUrl))}catch(Et){console.warn("Failed to load branding images:",Et)}const ba=Et=>{Wi&&Se.addImage(Wi,"PNG",0,0,At,as),Za&&Se.addImage(Za,"PNG",0,Vn-Ka,At,Ka),vi&&Se.addImage(vi,"PNG",At-ra-Fs,Vn-vl-Fs,Fs,Fs),Se.setFontSize(8),Se.setTextColor(128,128,128),Se.text(`Page ${Et}`,At/2,Vn-8,{align:"center"})},Wr=Et=>bt+Et>Vn-Ka-10?(Se.addPage(),er++,ba(er),Se.setTextColor(0,0,0),Se.setFont("helvetica","normal"),bt=as+10,!0):!1,Os=(Et,wn=14,Vt="#1e3a5f",yn=!0)=>{bt+=10,Wr(15),yn&&wn>=12?(Se.setFillColor("#d92134"),Se.rect($t,bt-4,4,5,"F"),Se.setFontSize(wn),Se.setTextColor(Vt),Se.setFont("helvetica","bold"),Se.text(Et,$t+7,bt)):(Se.setFontSize(wn),Se.setTextColor(Vt),Se.setFont("helvetica","bold"),Se.text(Et,$t,bt)),bt+=5.5},Ii=(Et,wn=10,Vt=0)=>{Se.setFontSize(wn),Se.setTextColor(0,0,0),Se.setFont("helvetica","normal"),Se.splitTextToSize(Et,Ot).forEach(zn=>{Wr(6),Se.text(zn,$t+Vt,bt),bt+=5})},Ms=(Et,wn,Vt)=>{bt+=3;const yn=8,zn=2,jr="#fff5f5",Ss="#eeb7b7";Wr(yn+5),Se.setFillColor(jr),Se.rect($t,bt-5,Ot,yn,"F"),Se.setDrawColor(Ss),Se.setLineWidth(.2),Se.rect($t,bt-5,Ot,yn,"S");let es=$t;Se.setFontSize(9),Se.setTextColor(0,0,0),Se.setFont("helvetica","bold"),Et.forEach((js,Cs)=>{Se.line(es,bt-5,es,bt-5+yn),Se.text(js,es+zn,bt),es+=Vt[Cs]}),Se.line(es,bt-5,es,bt-5+yn),bt+=yn,Se.setFont("helvetica","normal"),wn.forEach((js,Cs)=>{const _i=js.map((Fi,gs)=>Se.splitTextToSize(Fi,Vt[gs]-zn*2)),Qi=Math.max(..._i.map(Fi=>Fi.length)),yi=Math.max(yn,Qi*4+zn);Wr(yi),Cs%2===0&&(Se.setFillColor(245,245,245),Se.rect($t,bt-5,Ot,yi,"F")),Se.setDrawColor(Ss),Se.rect($t,bt-5,Ot,yi,"S");let Wt=$t;_i.forEach((Fi,gs)=>{Se.line(Wt,bt-5,Wt,bt-5+yi),Fi.forEach((Fo,Oo)=>{Se.text(Fo,Wt+zn,bt-1+Oo*4)}),Wt+=Vt[gs]}),Se.line(Wt,bt-5,Wt,bt-5+yi),bt+=yi}),bt+=1.5},Do=async()=>{const Et=window.pdfjsLib;if(Et)return Et;await new Promise((Vt,yn)=>{const zn=document.querySelector('script[data-pdfjs="true"]');if(zn){zn.addEventListener("load",()=>Vt(),{once:!0}),zn.addEventListener("error",()=>yn(new Error("Failed to load PDF renderer.")),{once:!0});return}const jr=document.createElement("script");jr.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",jr.async=!0,jr.dataset.pdfjs="true",jr.onload=()=>Vt(),jr.onerror=()=>yn(new Error("Failed to load PDF renderer.")),document.head.appendChild(jr)});const wn=window.pdfjsLib;if(!wn)throw new Error("PDF renderer is unavailable.");return wn.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",wn},Ro=async Et=>{const wn=await Do(),Vt=await(await fetch(Et)).arrayBuffer(),yn=await wn.getDocument({data:Vt}).promise,zn=[],jr=Math.min(yn.numPages,30);for(let Ss=1;Ss<=jr;Ss++){const es=await yn.getPage(Ss),js=es.getViewport({scale:1.5}),Cs=document.createElement("canvas");Cs.width=js.width,Cs.height=js.height;const _i=Cs.getContext("2d");_i&&(await es.render({canvasContext:_i,viewport:js}).promise,zn.push(Cs.toDataURL("image/jpeg",.9)))}return zn},Gi=(Et,wn)=>{Se.addPage(),er++,ba(er),bt=as+10,Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(30,58,95),Se.splitTextToSize(wn,Ot).forEach(Wt=>{Se.text(Wt,$t,bt),bt+=5}),bt+=1;const yn=Se.getImageProperties(Et),zn=Ot,jr=Vn-Ka-bt-8,Ss=zn/yn.width,es=jr/yn.height,js=Math.min(Ss,es),Cs=yn.width*js,_i=yn.height*js,Qi=$t+(zn-Cs)/2,yi=Et.startsWith("data:image/png")?"PNG":"JPEG";Se.addImage(Et,yi,Qi,bt,Cs,_i)};ba(1),Se.setFontSize(10),Se.setTextColor(0,0,0),Se.text(`Ref.: ${u.quotationNumber}`,$t,bt),Se.text(`Date: ${new Date().toLocaleDateString("en-IN")}, Revision: ${u.revision}`,At-$t,bt,{align:"right"}),bt+=8,Se.text(`Enquiry no.: ${u.enquiryNumber}`,$t,bt),bt+=8,Se.text(`Project Location: ${G?.location||"-"}`,$t,bt),bt+=15,Se.setFontSize(18),Se.setTextColor("#da2032"),Se.setFont("helvetica","bold"),Se.text(u.proposalTitle||"Techno-Commercial Offer",At/2,bt,{align:"center"}),bt+=15,Se.setFontSize(12),Se.setTextColor(0,0,0),Se.setFont("helvetica","bold"),Se.text(u.toLabel||"To",$t,bt),bt+=6,Se.setFont("helvetica","normal"),Se.text(`${u.msLabel||"M/s"} ${Pe?.name||"-"}`,$t,bt),bt+=6,Se.setFontSize(10),Se.setFont("helvetica","normal"),Se.text(`${Pe?.location||""}`,$t,bt),bt+=12,Se.setFont("helvetica","bold"),Se.text(`Subject: ${u.subject}`,$t,bt),bt+=12,Se.setFont("helvetica","normal"),m.introSections.forEach(Et=>{Ii(Et.content,10,0)}),bt+=7,Se.setFont("helvetica","normal"),Se.setFontSize(10),Se.text("Regards,",$t,bt),bt+=6,Se.setFont("helvetica","bold"),Se.text(u.contactName,$t,bt),bt+=5,Se.setFont("helvetica","normal"),Se.text(`Mo: ${u.contactMobile}`,$t,bt),bt+=5,Se.text(`Email: ${u.contactEmail}`,$t,bt),bt+=5.5,Se.addPage(),er++,ba(er),bt=as+10;const Ya=er;Se.setFontSize(16),Se.setTextColor("#1e3a5f"),Se.setFont("helvetica","bold"),Se.text("INDEX",At/2,bt,{align:"center"}),bt+=15;const go=bt,Io=[];bt+=80,Se.addPage(),er++,ba(er),bt=as+10,J.forEach((Et,wn)=>{const Vt=Et.heading&&Et.heading.trim().length>0?Et.heading:nh[Et.type]||`Section ${wn+1}`,yn=Vt,zn=J.slice(0,wn).filter(Ss=>Ss.heading===Et.heading).length,jr=zn>0?`${yn} (${zn+1})`:yn;switch(Io.push({title:jr,page:er}),Et.type){case"scopeBrief":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["Sl. No.","Description","Details"],m.scopeBriefDetails.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[25,90,65]);break;case"scopeBasic":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["Sl. No.","Description","Details"],m.scopeBasicBuilding.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[25,90,65]);break;case"scopeAdditions":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["Sr. No.","Description","Details"],m.scopeBuildingAdditions.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[25,90,65]);break;case"steelWork":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["No.","Description","Details"],m.steelWorkFinish.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[20,80,80]);break;case"designLoads":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["Sr. No.","Description","Details"],m.designLoads.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[25,90,65]);break;case"applicableCodes":Wr(45),Os(Vt,14,"#1e3a5f"),m.applicableCodes.forEach(Wt=>{Ii(` ${Wt}`,9,5)});break;case"materialSpecs":Wr(50),Os(Vt,14,"#1e3a5f"),Ms(["SI. No.","Structural Components","Details"],m.materialSpecs.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.details]),[25,90,65]);break;case"drawingsDelivery":Wr(45),Os(Vt,14,"#1e3a5f"),m.drawingsDelivery.forEach(Wt=>{Ii(` ${Wt}`,9,5)});break;case"erectionScopeClient":Wr(45),Os(Vt,14,"#1e3a5f"),m.erectionScopeClient.forEach(Wt=>{Ii(` ${Wt}`,9,5)});break;case"erectionScopeCompany":Wr(45),Os(Vt,14,"#1e3a5f"),m.erectionScopeCompany.forEach(Wt=>{Ii(` ${Wt}`,9,5)});break;case"commercialPrice":Wr(60),Os(Vt,14,"#1e3a5f");const Ss=["S.N.","Description","UOM","QTY","Rate","Amount","Remarks"],es=f.map(Wt=>[Wt.serialNo.toString(),Wt.description,Wt.unit,Wt.quantity.toString(),`Rs.${Wt.rate.toLocaleString("en-IN")}`,`Rs.${Wt.amount.toLocaleString("en-IN")}`,Wt.remarks||""]);Ms(Ss,es,[15,55,20,20,25,30,15]);const js=it();Wr(18);const Cs=75,_i=9,Qi=At-$t-Cs;Se.setFillColor("#fff5f5"),Se.setDrawColor("#eeb7b7"),Se.setLineWidth(.2),Se.rect(Qi,bt-3,Cs,_i,"FD"),Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(0,0,0);const yi=js.toLocaleString("en-IN");Se.text(`Total Amount: ${yi}.`,Qi+3,bt+2),bt+=_i+2;break;case"paymentTerms":Wr(50),Os(Vt,14,"#1e3a5f"),Tl(m.paymentTermSections,m.paymentTerms).forEach(Wt=>{Wr(8),Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(0,0,0),Se.text(Wt.heading,$t,bt),bt+=5,Wt.terms.forEach((Fi,gs)=>{Ii(`${gs+1}. ${Fi}`,9,5)}),bt+=2}),Os("BANK DETAILS",11,"#1e3a5f"),m.bankDetails.forEach(Wt=>{Ii(`${Wt.particular}: ${Wt.value}`,9,0)});break;case"commercialTerms":Wr(80),Os(Vt,14,"#1e3a5f"),Ms(["SI. No.","Description","Conditions"],m.commercialTerms.map(Wt=>[Wt.slNo.toString(),Wt.description,Wt.conditions]),[20,45,115]);break;default:break}}),Wr(30),fc(m.notesBlocks,m.notes).forEach(Et=>{Os(`${Et.title}:`,11,"#333333"),Et.items.forEach((wn,Vt)=>{Ii(`${Vt+1}. ${wn}`,9,5)}),bt+=2}),bt+=7,Wr(20),m.closingParagraphs.forEach(Et=>{Ii(Et.content,10,0)}),bt+=3.5,bt+=7,bt+=10,Se.setFont("helvetica","bold"),Se.setFontSize(11),Se.setTextColor(0,0,0),Se.text(m.closingThanks||"Thanking you",$t,bt),bt+=6,Se.setTextColor("#da2032"),Se.text(m.closingCompanyName||"Revira Nexgen Structures Pvt. Ltd.",$t,bt);const vo=Xf(m.uploadDrawings).filter(Et=>Et.dataUrl);if(vo.length>0){Io.push({title:"Upload a Drawing",page:er+1});for(const Et of vo)if(Et.mimeType==="application/pdf")try{const wn=await Ro(Et.dataUrl);if(wn.length===0)throw new Error("No pages rendered");for(let Vt=0;Vt<wn.length;Vt++)Gi(wn[Vt],`${Et.fileName||"Uploaded PDF"} - Page ${Vt+1}`)}catch(wn){Se.addPage(),er++,ba(er),bt=as+10,Se.setFont("helvetica","bold"),Se.setFontSize(11),Se.setTextColor(218,32,50),Se.text("Uploaded PDF could not be rendered",$t,bt),bt+=7,Se.setFont("helvetica","normal"),Se.setFontSize(10),Se.setTextColor(0,0,0),Se.text(`File: ${Et.fileName||"Attachment"}`,$t,bt),bt+=6,Se.splitTextToSize("PDF pages were skipped because the renderer could not be loaded in this browser/session.",Ot).forEach(yn=>{Se.text(yn,$t,bt),bt+=5}),console.warn("Failed to render PDF attachment:",wn)}else Et.dataUrl.startsWith("data:image/")&&Gi(Et.dataUrl,Et.fileName||"Uploaded image")}Se.setPage(Ya);const ms=go,Bs=8,ai="#eeb7b7",Ki=[25,120,Ot-145];let xi=$t;Se.setFillColor("#fff5f5"),Se.rect($t,ms-5,Ot,Bs,"F"),Se.setDrawColor(ai),Se.setLineWidth(.3),Se.rect($t,ms-5,Ot,Bs,"S");let b=$t;Ki.forEach(Et=>{Se.line(b,ms-5,b,ms-5+Bs),b+=Et}),Se.line(b,ms-5,b,ms-5+Bs),Se.setFontSize(9),Se.setTextColor(0,0,0),Se.setFont("helvetica","bold"),Se.text("Sl. No.",xi+2,ms),xi+=25,Se.text("Subject",xi+2,ms),xi+=120,Se.text("Page No.",xi+2,ms);let V=ms+Bs;Se.setTextColor(0,0,0),Se.setFont("helvetica","normal"),Io.forEach((Et,wn)=>{xi=$t,wn%2===0&&(Se.setFillColor(245,245,245),Se.rect($t,V-5,Ot,Bs,"F")),Se.setDrawColor(ai),Se.rect($t,V-5,Ot,Bs,"S"),b=$t,Ki.forEach(Vt=>{Se.line(b,V-5,b,V-5+Bs),b+=Vt}),Se.line(b,V-5,b,V-5+Bs),Se.text((wn+1).toString(),xi+2,V),xi+=25,Se.text(Et.title,xi+2,V),xi+=120,Se.text(Et.page?.toString()||"-",xi+2,V),V+=Bs});const ge=new Date,ke=String(ge.getDate()).padStart(2,"0"),Be=String(ge.getMonth()+1).padStart(2,"0"),st=ge.getFullYear(),dt=`${ke}${Be}${st}`,Yt=Pe?.name?Pe.name.split(/\s+/).map(Et=>Et.charAt(0).toUpperCase()).join(""):"COMPANY",an=G?.quotationType==="Supply and Fabrication"?"Peb":G?.quotationType==="Structural Fabrication"?"SF":"JW",Rn=String(G?.id||1).padStart(3,"0"),In=`RNS_${dt}_${Yt}_${an}-${Rn}_${u.revision}.pdf`,yr=Ae?Se.output("datauristring",{filename:In}):void 0;return de&&Se.save(In),we||r({title:de?"PDF exported":"PDF generated",description:de?"The quotation has been exported as PDF.":"The quotation PDF is ready."}),{filename:In,dataUri:yr}}catch(Se){return console.error("PDF export error:",Se),we||r({title:"Export failed",description:"Failed to export PDF. Please try again.",variant:"destructive"}),null}finally{Oe(!1)}},xr=()=>{const F=u.quotationNumber||"-",de=u.revision||"-",we=Pe?.name||"Client";return`Quotation ${F} (${de}) for ${we} is ready. Please find the exported PDF attached.`},Un="9968422442",zt=()=>{if(!qe?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}ue({to:Pe?.emailAddress||"",subject:`Quotation ${u.quotationNumber||""} ${u.revision||""}`.trim(),message:`Please find the attached file for details

-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`}),L(!0)},An=async()=>{if(!qe?.id){r({title:"Save required",description:"Please save quotation first, then send via email.",variant:"destructive"});return}const F=_t.to.split(/[,\s;]+/).map(Ae=>Ae.trim()).filter(Boolean);if(F.length===0){r({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!_t.subject.trim()){r({title:"Subject required",description:"Please enter email subject.",variant:"destructive"});return}if(!_t.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}Ze(!0);const de=await vn({save:!1,silent:!0,returnDataUri:!0});if(!de?.dataUri){Ze(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for email.",variant:"destructive"});return}const we=de.dataUri.split(",")[1]||"";try{const Se=await(await jn("POST",`/revira/api/quotations/${qe.id}/send-email`,{to:F,subject:_t.subject.trim(),message:_t.message.trim(),fileName:de.filename,pdfBase64:we})).json(),At=Array.isArray(Se?.accepted)?Se.accepted:[],Vn=At.length>0?At.join(", "):F.join(", "),$t=Se?.messageId?` Message ID: ${Se.messageId}.`:"";r({title:"Email queued",description:`SMTP accepted: ${Vn}.${$t} Check inbox/spam on recipient side.`}),L(!1)}catch(Ae){r({title:"Send failed",description:Ae?.message||"Failed to send email.",variant:"destructive"})}finally{Ze(!1)}},xn=()=>{if(!qe?.id){r({title:"Save required",description:"Please save quotation first, then send on WhatsApp.",variant:"destructive"});return}const F=(Pe?.mobileNumber||"").replace(/\D/g,""),de=F.length===10?`91${F}`:F;dn({mobile:de,message:`${xr()}
Project: ${G?.projectName||"-"}
Client: ${Pe?.name||"-"}
From: ${Un}`}),ve(!0)},dr=async()=>{const F=xt.mobile.split(/[,\s;]+/).map(Ae=>Ae.replace(/\D/g,"")).filter(Boolean);if(F.length===0){r({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!xt.message.trim()){r({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}ut(!0);const de=await vn({save:!1,silent:!0,returnDataUri:!0});if(!de?.dataUri){ut(!1),r({title:"PDF failed",description:"Unable to generate quotation PDF for WhatsApp send.",variant:"destructive"});return}const we=de.dataUri.split(",")[1]||"";try{await jn("POST",`/revira/api/quotations/${qe?.id}/send-whatsapp`,{to:F,message:xt.message.trim(),fileName:de.filename,pdfBase64:we}),r({title:"WhatsApp sent",description:`Quotation sent to ${F.join(", ")}.`}),ve(!1)}catch(Ae){r({title:"Send failed",description:Ae?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{ut(!1)}},Dn=({title:F,number:de,expanded:we,onToggle:Ae,onAdd:Se,testId:At,isEditingHeading:Vn,onStartEditHeading:$t,onHeadingChange:Ot,onHeadingBlur:as,onMoveUp:Ka,onMoveDown:Qa,onDuplicate:Fs,onDelete:ra,canMoveUp:vl=!0,canMoveDown:bt=!0})=>s.jsxs("div",{className:"flex items-center gap-3 bg-[#d92134] text-white px-4 py-3 rounded-lg cursor-pointer",onClick:Ae,"data-testid":At||`section-header-${de}`,children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white text-[#d92134] rounded font-bold text-sm",children:de}),Vn?s.jsx(Je,{value:F,onChange:er=>Ot?.(er.target.value),onBlur:as,onKeyDown:er=>{(er.key==="Enter"||er.key==="Escape")&&as?.()},autoFocus:!0,className:"h-8 flex-1 text-slate-900 bg-white",onClick:er=>er.stopPropagation()}):s.jsx("span",{className:"font-semibold flex-1",children:F}),$t&&!Vn&&s.jsx(Me,{variant:"ghost",size:"icon",onClick:er=>{er.stopPropagation(),$t()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Edit heading",children:s.jsx(oo,{className:"h-4 w-4"})}),Se&&s.jsxs(Me,{variant:"ghost",size:"sm",onClick:er=>{er.stopPropagation(),Se()},className:"text-white hover:bg-white/20 h-7",children:[s.jsx(sl,{className:"h-4 w-4 mr-1"})," Add"]}),Ka&&s.jsx(Me,{variant:"ghost",size:"icon",onClick:er=>{er.stopPropagation(),Ka()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!vl,title:"Move up",children:s.jsx(Qp,{className:"h-4 w-4"})}),Qa&&s.jsx(Me,{variant:"ghost",size:"icon",onClick:er=>{er.stopPropagation(),Qa()},className:"text-white hover:bg-white/20 h-7 w-7",disabled:!bt,title:"Move down",children:s.jsx(zd,{className:"h-4 w-4"})}),Fs&&s.jsx(Me,{variant:"ghost",size:"icon",onClick:er=>{er.stopPropagation(),Fs()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Duplicate block",children:s.jsx($d,{className:"h-4 w-4"})}),ra&&s.jsx(Me,{variant:"ghost",size:"icon",onClick:er=>{er.stopPropagation(),ra()},className:"text-white hover:bg-white/20 h-7 w-7",title:"Delete block",children:s.jsx(lr,{className:"h-4 w-4"})}),we?s.jsx(Qp,{className:"h-5 w-5"}):s.jsx(zd,{className:"h-5 w-5"})]});return fe||_e?s.jsx(Ks,{user:a,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):!G||!Pe?s.jsx(Ks,{user:a,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),s.jsx(Me,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})}):s.jsxs(Ks,{user:a,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),"data-testid":"button-back",children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:G.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(ru,{className:"h-4 w-4"}),G.location]})]})]}),s.jsxs(Me,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-quotation",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),"New Quotation"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>ne(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:qe?.revision||u.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>ne(!0),"data-testid":"button-view-versions",children:s.jsx(Wm,{className:"h-4 w-4"})}),qe&&s.jsx(Me,{variant:"outline",size:"icon",onClick:()=>bn.mutate(),disabled:bn.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:s.jsx($d,{className:"w-4 h-4"})}),s.jsxs(Me,{onClick:()=>{vn()},disabled:Le,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Ih,{className:"w-4 h-4 mr-2"}),Le?"Exporting...":"Export PDF"]}),s.jsx(Me,{variant:"outline",size:"icon",onClick:zt,disabled:Le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email",title:"Send quotation by email",children:s.jsx(hu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"outline",size:"icon",onClick:xn,disabled:Le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp",title:"Send quotation on WhatsApp",children:s.jsx(Gm,{className:"w-4 h-4"})}),s.jsxs(Me,{variant:"outline",onClick:Ct,disabled:mn.isPending||gn.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-quotation",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),mn.isPending||gn.isPending?"Saving...":"Save Changes"]}),qe&&ft&&ft.length>1&&s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:()=>be({open:!0,title:"Delete Quotation?",description:`Are you sure you want to delete this quotation (${qe.revision})?`,onConfirm:async()=>{if(qe)try{await jn("DELETE",`/revira/api/quotations/${qe.id}`),Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]});const F=ft.filter(de=>de.id!==qe.id);F.length>0?n(`/revira/projects/${t}/quotation/${F[0].id}`):n(`/revira/projects/${t}/quotation`),r({title:"Quotation deleted",description:`${qe.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete quotation.",variant:"destructive"})}}}),"data-testid":"button-delete-quotation",children:s.jsx(lr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{ref:o,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#da2032] rounded",children:s.jsx(Ta,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Technical Proposal Metadata"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Ref ID"}),s.jsx(Je,{value:u.quotationNumber,onChange:F=>c({...u,quotationNumber:F.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-quotation-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Creation Date"}),s.jsx(Je,{value:ln(),readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Enquiry Ref"}),s.jsx(Je,{value:u.enquiryNumber,onChange:F=>c({...u,enquiryNumber:F.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-enquiry-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Project Site (Legacy)"}),s.jsx(Je,{value:G.location,readOnly:!0,className:"mt-1 bg-slate-50 border-slate-200"})]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Proposal Header Title"}),s.jsx(Je,{value:u.proposalTitle,onChange:F=>c({...u,proposalTitle:F.target.value}),className:"mt-2 text-lg font-bold bg-white border-slate-200","data-testid":"input-proposal-title"})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-[#da2032] uppercase tracking-wide",children:"Client Subject Specification"}),s.jsx(Je,{value:u.subject,onChange:F=>c({...u,subject:F.target.value}),className:"mt-2 bg-white border-slate-200","data-testid":"input-subject"})]})]})]}),s.jsxs(kn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:s.jsx(Ta,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Main Covering Letter"})]}),s.jsxs(Tn,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500",children:"To Label"}),s.jsx(Je,{value:u.toLabel,onChange:F=>c({...u,toLabel:F.target.value}),className:"mt-1","data-testid":"input-to-label"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500",children:"M/s Label"}),s.jsx(Je,{value:u.msLabel,onChange:F=>c({...u,msLabel:F.target.value}),className:"mt-1","data-testid":"input-ms-label"})]})]}),s.jsxs("p",{className:"font-semibold text-slate-700",children:[u.toLabel||"To",","]}),s.jsx("p",{className:"font-semibold text-slate-800 mt-1",children:(u.msLabel||"M/s")+" "+Pe.name}),s.jsx("p",{className:"text-slate-600 text-slate-700 mt-1",children:Pe.location})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-700",children:"Subject: "}),s.jsx("span",{className:"text-slate-600",children:u.subject})]}),s.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[s.jsx("p",{children:"Dear Sir,"}),m.introSections.map((F,de)=>s.jsx("div",{className:"group relative",children:j===F.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Or,{value:F.content,onChange:we=>Zn(F.id,we.target.value),className:"flex-1 min-h-[60px]",autoFocus:!0}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(Me,{size:"icon",variant:"ghost",onClick:()=>x(null),children:s.jsx(Md,{className:"h-4 w-4 text-green-600"})}),s.jsx(Me,{size:"icon",variant:"ghost",onClick:()=>_r(F.id),children:s.jsx(lr,{className:"h-4 w-4 text-red-600"})})]})]}):s.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>x(F.id),children:[F.content,s.jsx(oo,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},F.id)),s.jsxs(Me,{variant:"ghost",size:"sm",onClick:bs,className:"text-[#da2032]","data-testid":"button-add-intro",children:[s.jsx(sl,{className:"h-4 w-4 mr-1"})," Add Paragraph"]})]})]})]}),s.jsxs(kn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b bg-slate-50",children:[s.jsx("div",{className:"p-2 bg-[#d92134] rounded",children:s.jsx(Ta,{className:"h-5 w-5 text-white"})}),s.jsx("h2",{className:"text-lg font-bold text-[#d92134] uppercase tracking-wide",children:"Master Signatory Authority"})]}),s.jsx(Tn,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Full Legal Name"}),s.jsx(Je,{value:u.contactName,onChange:F=>c({...u,contactName:F.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Contact Handset"}),s.jsx(Je,{value:u.contactMobile,onChange:F=>c({...u,contactMobile:F.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"Official Email Address"}),s.jsx(Je,{value:u.contactEmail,onChange:F=>c({...u,contactEmail:F.target.value}),className:"mt-1 bg-slate-50 border-slate-200","data-testid":"input-contact-email"})]})]})})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[G?.quotationType==="Supply and Fabrication"&&s.jsxs(s.Fragment,{children:[Lt("scopeBrief").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"01",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.scopeBriefDetails,section:"scopeBriefDetails",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("scopeBasic").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"02",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.scopeBasicBuilding,section:"scopeBasicBuilding",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("scopeAdditions").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"03",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.scopeBuildingAdditions,section:"scopeBuildingAdditions",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("steelWork").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"04",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.steelWorkFinish,section:"steelWorkFinish",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("designLoads").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"05",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.designLoads,section:"designLoads",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("applicableCodes").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.applicableCodes.map((de,we)=>s.jsx("li",{className:"flex items-start gap-3 group",children:X===we?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:de,onChange:Ae=>Ci(we,Ae.target.value),onBlur:()=>ie(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ga(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:de}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>ie(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ga(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})},we))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(Ll,{label:"Add Item",onClick:Ns})})]})})]},F.id)),Lt("materialSpecs").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"06",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(Rd,{data:m.materialSpecs,section:"materialSpecs",onUpdateRow:Xe,onRemoveRow:nt,onAddRow:ot})]},F.id)),Lt("drawingsDelivery").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"09",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.drawingsDelivery.map((de,we)=>s.jsx("li",{className:"flex items-start gap-3 group",children:K===we?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:de,onChange:Ae=>Hr(we,Ae.target.value),onBlur:()=>W(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>hr(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:de}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>W(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>hr(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})},we))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(Ll,{label:"Add Item",onClick:ps})})]})})]},F.id)),Lt("erectionScopeClient").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"10",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeClient.map((de,we)=>s.jsx("li",{className:"flex items-start gap-3 group",children:he===we?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:de,onChange:Ae=>Rs(we,Ae.target.value),onBlur:()=>z(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ri(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:de}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>z(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ri(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})},we))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(Ll,{label:"Add Item",onClick:Qs})})]})})]},F.id)),Lt("erectionScopeCompany").map(F=>s.jsxs("div",{className:"space-y-4",style:{order:Ft(F.id)},children:[s.jsx(Dn,{title:F.heading,number:"11",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)}),Ge(F.id)&&s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6",children:[s.jsx("ul",{className:"space-y-3 text-sm",children:m.erectionScopeCompany.map((de,we)=>s.jsx("li",{className:"flex items-start gap-3 group",children:E===we?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:de,onChange:Ae=>Is(we,Ae.target.value),onBlur:()=>Q(null),autoFocus:!0,className:"flex-1 min-h-[60px]"}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>kr(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[#d92134] font-bold mt-0.5",children:""}),s.jsx("span",{className:"text-slate-700 flex-1",children:de}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Q(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>kr(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})},we))}),s.jsx("div",{className:"mt-4 border-t pt-3 flex justify-center",children:s.jsx(Ll,{label:"Add Item",onClick:ws})})]})})]},F.id))]}),Lt("commercialPrice").map(F=>s.jsx(A0,{type:"single",collapsible:!0,value:Ge(F.id)?`commercial-price-${F.id}`:"",onValueChange:de=>jt(F.id,de===`commercial-price-${F.id}`),style:{order:Ft(F.id)},children:s.jsxs(em,{value:`commercial-price-${F.id}`,className:"border-0",children:[s.jsx(tm,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(Dn,{title:F.heading,number:G?.quotationType==="Supply and Fabrication"?"12":"01",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)})})}),s.jsx(nm,{className:"p-0 pt-4",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"S.N."}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 w-24 text-slate-600 font-medium",children:"Unit"}),s.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Quantity"}),s.jsx("th",{className:"text-right p-3 w-24 text-slate-600 font-medium",children:"Rate"}),s.jsx("th",{className:"text-right p-3 w-32 text-slate-600 font-medium",children:"Amount"}),s.jsx("th",{className:"text-left p-3 w-32 text-slate-600 font-medium",children:"Remarks"}),s.jsx("th",{className:"w-12 p-3"})]})}),s.jsxs("tbody",{children:[f.map((de,we)=>s.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[s.jsx("td",{className:"p-3 text-center text-slate-600",children:de.serialNo}),s.jsx("td",{className:"p-3",children:s.jsx(Or,{value:de.description,onChange:Ae=>Ye(we,"description",Ae.target.value),className:"min-h-[60px] text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-desc-${we}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:de.unit,onChange:Ae=>Ye(we,"unit",Ae.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-unit-${we}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:de.quantity,onChange:Ae=>Ye(we,"quantity",Ae.target.value),className:"h-8 text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-qty-${we}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:de.rate,onChange:Ae=>Ye(we,"rate",Ae.target.value),className:"h-8 min-w-[90px] text-sm text-right border-0 bg-transparent focus:bg-white","data-testid":`input-item-rate-${we}`})}),s.jsx("td",{className:"p-3 text-right font-medium",children:on(de.amount)}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:de.remarks,onChange:Ae=>Ye(we,"remarks",Ae.target.value),className:"h-8 text-sm border-0 bg-transparent focus:bg-white","data-testid":`input-item-remarks-${we}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>Ke(we),disabled:f.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${we}`,children:s.jsx(lr,{className:"h-4 w-4"})})})]},we)),s.jsxs("tr",{className:"bg-slate-50 font-semibold",children:[s.jsx("td",{colSpan:5,className:"p-3 text-right",children:"Total:"}),s.jsx("td",{className:"p-3 text-right",children:on(it())}),s.jsx("td",{colSpan:2})]})]})]}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Ll,{label:"Add Row",onClick:rn,testId:"button-add-row"})})]})})})]})},F.id)),Lt("paymentTerms").map(F=>s.jsx(A0,{type:"single",collapsible:!0,value:Ge(F.id)?`payment-terms-${F.id}`:"",onValueChange:de=>jt(F.id,de===`payment-terms-${F.id}`),style:{order:Ft(F.id)},children:s.jsxs(em,{value:`payment-terms-${F.id}`,className:"border-0",children:[s.jsx(tm,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(Dn,{title:F.heading,number:"PT",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)})})}),s.jsx(nm,{className:"p-0 pt-4",children:s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6 space-y-4",children:[Tl(m.paymentTermSections,m.paymentTerms).map((de,we)=>{const Ae=xe[de.id]??!0;return s.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[s.jsxs("div",{className:"group flex items-center gap-2",children:[s.jsx(Me,{type:"button",size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>re(Se=>({...Se,[de.id]:!(Se[de.id]??!0)})),"data-testid":`button-toggle-payment-heading-${we}`,children:Ae?s.jsx(Qp,{className:"h-4 w-4 text-slate-500"}):s.jsx(zd,{className:"h-4 w-4 text-slate-500"})}),I===de.id?s.jsxs(s.Fragment,{children:[s.jsx(Je,{value:de.heading,onChange:Se=>Sr(de.id,Se.target.value),className:"h-8 font-semibold flex-1",placeholder:"Heading",autoFocus:!0,onBlur:()=>R(null),onKeyDown:Se=>Se.key==="Enter"&&R(null),"data-testid":`input-payment-heading-${we}`}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>Ir(de.id),"data-testid":`button-remove-payment-heading-${we}`,children:s.jsx(lr,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded font-semibold text-slate-700",onClick:()=>R(de.id),children:de.heading}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>R(de.id),children:s.jsx(oo,{className:"h-3 w-3 text-slate-400"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-600",onClick:()=>Ir(de.id),"data-testid":`button-remove-payment-heading-${we}`,children:s.jsx(lr,{className:"h-4 w-4"})})]})]}),Ae&&s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 text-sm",children:de.terms.map((Se,At)=>s.jsx("li",{className:"flex items-start gap-2 group",children:$?.sectionId===de.id&&$?.termIndex===At?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:Se,onChange:Vn=>Di(de.id,At,Vn.target.value),onBlur:()=>N(null),autoFocus:!0,className:"flex-1 min-h-[60px]","data-testid":`input-payment-term-${we}-${At}`}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ds(de.id,At),"data-testid":`button-remove-payment-term-${we}-${At}`,children:s.jsx(lr,{className:"h-4 w-4 text-red-600"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"w-6 text-slate-400",children:[At+1,"."]}),s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded text-slate-700",onClick:()=>N({sectionId:de.id,termIndex:At}),children:Se}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>N({sectionId:de.id,termIndex:At}),children:s.jsx(oo,{className:"h-3 w-3 text-slate-400"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ds(de.id,At),"data-testid":`button-remove-payment-term-${we}-${At}`,children:s.jsx(lr,{className:"h-4 w-4 text-red-600"})})]})},`${de.id}-${At}`))}),s.jsxs(Me,{variant:"ghost",size:"sm",onClick:()=>Pr(de.id),className:"text-[#da2032]","data-testid":`button-add-payment-term-${we}`,children:[s.jsx(sl,{className:"h-4 w-4 mr-1"})," Add Term"]})]})]},de.id)}),s.jsx("div",{className:"mt-2 border-t pt-3 flex justify-center",children:s.jsx(Ll,{label:"Add Section",onClick:Ls})}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("div",{className:"mb-2",children:s.jsx("h4",{className:"font-semibold text-slate-700",children:"Bank Details:"})}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-1/3",children:"Particulars"}),s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium",children:"Value"}),s.jsx("th",{className:"text-left p-2 text-slate-600 font-medium w-20",children:"Actions"})]})}),s.jsx("tbody",{children:m.bankDetails.map((de,we)=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:ae===we?s.jsx(Je,{value:de.particular,onChange:Ae=>sn(we,"particular",Ae.target.value),className:"text-slate-600","data-testid":`input-bank-particular-${we}`}):s.jsxs("span",{className:"text-slate-600 cursor-pointer hover:text-[#d92134]",onClick:()=>Ne(we),children:[de.particular,":"]})}),s.jsx("td",{className:"p-2",children:ae===we?s.jsx(Je,{value:de.value,onChange:Ae=>sn(we,"value",Ae.target.value),"data-testid":`input-bank-value-${we}`}):s.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>Ne(we),children:de.value})}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex gap-1",children:[ae===we?s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ne(null),children:s.jsx(Md,{className:"h-4 w-4 text-green-600"})}):s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Ne(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>pr(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})})]},we))})]}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Ll,{label:"Add Item",onClick:Xr,testId:"button-add-bank-detail"})})]})]})})})]})},F.id)),G?.quotationType==="Supply and Fabrication"&&Lt("commercialTerms").map(F=>s.jsx(A0,{type:"single",collapsible:!0,value:Ge(F.id)?`terms-conditions-${F.id}`:"",onValueChange:de=>jt(F.id,de===`terms-conditions-${F.id}`),style:{order:Ft(F.id)},children:s.jsxs(em,{value:`terms-conditions-${F.id}`,className:"border-0",children:[s.jsx(tm,{className:"p-0 hover:no-underline [&>svg]:hidden text-left",children:s.jsx("div",{className:"w-full text-left",children:s.jsx(Dn,{title:F.heading,number:"08",expanded:Ge(F.id),onToggle:()=>gt(F.id),...qt(F)})})}),s.jsx(nm,{className:"p-0 pt-4",children:s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b",children:[s.jsx("th",{className:"text-left p-3 w-16 text-slate-600 font-medium",children:"SI. No."}),s.jsx("th",{className:"text-left p-3 w-48 text-slate-600 font-medium",children:"Description"}),s.jsx("th",{className:"text-left p-3 text-slate-600 font-medium",children:"Conditions"}),s.jsx("th",{className:"text-left p-3 w-20 text-slate-600 font-medium",children:"Actions"})]})}),s.jsx("tbody",{className:"text-slate-700",children:m.commercialTerms.map((de,we)=>s.jsxs("tr",{className:`border-b ${we%2===1?"bg-slate-50/50":""}`,children:[s.jsx("td",{className:"p-3 align-top",children:de.slNo}),s.jsx("td",{className:"p-3 align-top",children:Ce===we?s.jsx(Je,{value:de.description,onChange:Ae=>Ai(we,"description",Ae.target.value),className:"font-medium","data-testid":`input-term-desc-${we}`}):s.jsx("span",{className:"font-medium cursor-pointer hover:text-[#d92134]",onClick:()=>te(we),children:de.description})}),s.jsx("td",{className:"p-3 align-top",children:Ce===we?s.jsx(Or,{value:de.conditions,onChange:Ae=>Ai(we,"conditions",Ae.target.value),className:"min-h-[80px]","data-testid":`input-term-cond-${we}`}):s.jsx("span",{className:"cursor-pointer hover:text-[#d92134]",onClick:()=>te(we),children:de.conditions})}),s.jsx("td",{className:"p-3 align-top",children:s.jsxs("div",{className:"flex gap-1",children:[Ce===we?s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>te(null),children:s.jsx(Md,{className:"h-4 w-4 text-green-600"})}):s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>te(we),children:s.jsx(oo,{className:"h-4 w-4"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>is(we),children:s.jsx(lr,{className:"h-4 w-4 text-red-500"})})]})})]},we))})]})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Ll,{label:"Add Row",onClick:wr})})]})})})]})},F.id))]}),fc(m.notesBlocks,m.notes).map((F,de,we)=>s.jsxs(kn,{className:"shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-slate-50",children:[k===F.id?s.jsx(Je,{value:F.title,onChange:Ae=>fs(F.id,Ae.target.value),className:"h-8 max-w-sm font-semibold text-slate-700 bg-white",autoFocus:!0,onBlur:()=>{fs(F.id,F.title.trim()||"Notes"),A(null)},onKeyDown:Ae=>{(Ae.key==="Enter"||Ae.key==="Escape")&&(fs(F.id,F.title.trim()||"Notes"),A(null))},"data-testid":`input-notes-block-heading-${de}`}):s.jsx("h3",{className:"font-semibold text-slate-700 cursor-pointer hover:text-[#d92134]",onClick:()=>A(F.id),"data-testid":`text-notes-block-heading-${de}`,children:F.title}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>vr(F.id),className:"h-8 border-[#d92134]/30 text-[#d92134] hover:bg-[#fff5f6]","data-testid":`button-duplicate-notes-block-${de}`,children:[s.jsx($d,{className:"h-4 w-4 mr-1"})," Duplicate"]}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",onClick:()=>hs(F.id),disabled:we.length<=1,className:"h-8 border-red-200 text-red-600 hover:bg-red-50","data-testid":`button-delete-notes-block-${de}`,children:[s.jsx(lr,{className:"h-4 w-4 mr-1"})," Delete"]})]})]}),s.jsx(Tn,{className:"p-6",children:s.jsx("ul",{className:"space-y-2 text-sm",children:F.items.map((Ae,Se)=>s.jsx("li",{className:"group flex items-start gap-2",children:D?.blockId===F.id&&D?.noteIndex===Se?s.jsxs(s.Fragment,{children:[s.jsx(Or,{value:Ae,onChange:At=>Nr(F.id,Se,At.target.value),className:"flex-1 min-h-[40px]",autoFocus:!0,onBlur:()=>S(null)}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Mt(F.id,Se),children:s.jsx(lr,{className:"h-4 w-4 text-red-600"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"w-6 text-slate-400",children:[Se+1,"."]}),s.jsx("span",{className:"cursor-pointer hover:bg-slate-50 flex-1 p-1 rounded",onClick:()=>S({blockId:F.id,noteIndex:Se}),children:Ae}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:()=>S({blockId:F.id,noteIndex:Se}),children:s.jsx(oo,{className:"h-3 w-3 text-slate-400"})}),s.jsx(Me,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>Mt(F.id,Se),children:s.jsx(lr,{className:"h-4 w-4 text-red-600"})})]})},`${F.id}-${Se}`))})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Ll,{label:"Add Item",onClick:()=>ds(F.id),testId:`button-add-note-item-${de}`})})]},F.id)),s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6 space-y-4",children:[m.closingParagraphs.map(F=>s.jsx("div",{className:"group relative text-sm text-slate-700",children:j===F.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Or,{value:F.content,onChange:de=>Ln(F.id,de.target.value),className:"flex-1 min-h-[80px]",autoFocus:!0}),s.jsx(Me,{size:"icon",variant:"ghost",onClick:()=>x(null),children:s.jsx(Md,{className:"h-4 w-4 text-green-600"})})]}):s.jsxs("p",{className:"cursor-pointer hover:bg-slate-50 p-2 rounded border border-transparent hover:border-slate-200",onClick:()=>x(F.id),children:[F.content,s.jsx(oo,{className:"inline-block ml-2 h-3 w-3 text-slate-400 opacity-0 group-hover:opacity-100"})]})},F.id)),s.jsxs("div",{className:"pt-4 border-t space-y-2",children:[s.jsx("div",{className:"group",children:s.jsx(Je,{value:m.closingThanks,onChange:F=>y(de=>({...de,closingThanks:F.target.value})),className:"font-semibold text-slate-700 bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-full","data-testid":"input-closing-thanks"})}),s.jsx("div",{className:"group",children:s.jsx(Je,{value:m.closingCompanyName,onChange:F=>y(de=>({...de,closingCompanyName:F.target.value})),className:"font-bold text-[#da2032] bg-transparent border-transparent hover:border-slate-200 focus:border-slate-300 w-full","data-testid":"input-closing-company"})})]})]})}),s.jsx(kn,{className:"shadow-sm",children:s.jsxs(Tn,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Upload a Drawing"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",onClick:On,"data-testid":"button-add-drawing-upload-field",children:[s.jsx(sl,{className:"h-4 w-4 mr-1"})," Add uploader field"]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"Upload images or PDF files. These will be appended in exported quotation PDF after End of Documents."}),s.jsx("div",{className:"space-y-3",children:Xf(m.uploadDrawings).map((F,de)=>s.jsxs("div",{className:"rounded-lg border p-3 space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx(Je,{type:"file",accept:"image/*,.pdf",onChange:we=>Zt(F.id,we),"data-testid":`input-drawing-upload-${de}`}),s.jsx(Me,{type:"button",variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>yt(F.id),"data-testid":`button-remove-drawing-upload-${de}`,children:s.jsx(lr,{className:"h-4 w-4"})})]}),F.fileName?s.jsxs("p",{className:"text-xs text-slate-600",children:["Selected: ",F.fileName]}):s.jsx("p",{className:"text-xs text-slate-400",children:"No file selected"})]},F.id))})]})}),s.jsx("div",{className:"text-center py-6 text-sm text-slate-500",children:s.jsx("p",{children:"!! End of Documents !!"})})]})]}),s.jsx(gi,{open:Re,onOpenChange:ne,children:s.jsxs(ri,{className:"max-w-lg",children:[s.jsx(si,{children:s.jsx(ii,{children:"Quotation Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:ft?.map(F=>s.jsxs("div",{className:`p-3 border rounded-lg ${qe?.id===F.id?"border-[#d92134] bg-red-50":"hover:bg-slate-50"}`,children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold text-[#d92134]",children:F.revision}),qe?.id===F.id&&s.jsx("span",{className:"text-xs bg-[#d92134] text-white px-2 py-0.5 rounded",children:"Current"})]})}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1 space-y-0.5",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Enquiry Ref:"})," ",F.enquiryNumber||"-"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Created:"})," ",new Date(F.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsxs(Me,{size:"sm",variant:qe?.id===F.id?"secondary":"default",className:qe?.id===F.id?"":"bg-[#d92134] hover:bg-[#b91c2c]",onClick:()=>{n(`/revira/projects/${t}/quotation/${F.id}`),ne(!1)},"data-testid":`button-edit-version-${F.id}`,children:[s.jsx(oo,{className:"h-4 w-4 mr-1"}),qe?.id===F.id?"Editing":"Edit"]}),ft&&ft.length>1&&s.jsxs(Me,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:de=>{de.stopPropagation(),be({open:!0,title:"Delete Quotation Version?",description:`Are you sure you want to delete ${F.revision}?`,onConfirm:async()=>{try{if(await jn("DELETE",`/revira/api/quotations/${F.id}`),Gn.invalidateQueries({queryKey:["/revira/api/projects",t,"quotation-versions"]}),qe?.id===F.id){const we=ft.filter(Ae=>Ae.id!==F.id);we.length>0?n(`/revira/projects/${t}/quotation/${we[0].id}`):n(`/revira/projects/${t}/quotation`)}r({title:"Version deleted",description:`${F.revision} has been deleted.`})}catch{r({title:"Error",description:"Failed to delete version.",variant:"destructive"})}}})},"data-testid":`button-delete-version-${F.id}`,children:[s.jsx(lr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},F.id))})]})}),s.jsx(gi,{open:O,onOpenChange:L,children:s.jsxs(ri,{className:"sm:max-w-xl",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Quotation by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(Je,{value:_t.to,onChange:F=>ue(de=>({...de,to:F.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"You can enter multiple email ids separated by comma. A copy is always sent to reviranexgen@gmail.com."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(Je,{value:_t.subject,onChange:F=>ue(de=>({...de,subject:F.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Or,{value:_t.message,onChange:F=>ue(de=>({...de,message:F.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>L(!1),disabled:ze,"data-testid":"button-send-email-cancel",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:An,disabled:ze,"data-testid":"button-send-email-submit",children:ze?"Sending...":"Submit"})]})]})]})}),s.jsx(gi,{open:oe,onOpenChange:ve,children:s.jsxs(ri,{className:"sm:max-w-lg",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Quotation on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(Je,{value:xt.mobile,onChange:F=>dn(de=>({...de,mobile:F.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Or,{value:xt.message,onChange:F=>dn(de=>({...de,message:F.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>ve(!1),disabled:lt,"data-testid":"button-send-whatsapp-cancel",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:dr,disabled:lt,"data-testid":"button-send-whatsapp-submit",children:lt?"Sending...":"Submit"})]})]})]})}),s.jsx(Hh,{open:ye.open,onOpenChange:F=>{F||be({open:!1,title:"",description:"",onConfirm:null})},title:ye.title,description:ye.description,onConfirm:()=>{ye.onConfirm?.(),be({open:!1,title:"",description:"",onConfirm:null})},confirmLabel:"Delete",confirmTestId:"confirm-delete-quotation-action",cancelTestId:"cancel-delete-quotation-action"})]})}const K7=({label:t,onClick:e,testId:n})=>s.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[s.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 top-1/2 -translate-y-1/2 border-t border-dotted border-[#d92134]"}),s.jsxs(Me,{type:"button",onClick:e,className:"relative z-10 h-10 min-w-[220px] rounded-full border border-[#d92134]/35 bg-white px-8 text-sm font-semibold text-[#d92134] shadow-none transition hover:bg-[#fff5f6]","data-testid":n,children:["+ ",t]})]});function F5(){const t=ed(),e=t.id,n=t.invoiceId,[,r]=Va(),{toast:a}=Ha(),[o,u]=P.useState(!1),[c,f]=P.useState(!1),[p,m]=P.useState(!1),[y,j]=P.useState(!1),[x,D]=P.useState(!1),[S,k]=P.useState({to:"",subject:"",message:""}),[A,I]=P.useState({mobile:"",message:""}),[R,$]=P.useState({open:!1,title:"",description:"",onConfirm:null}),[N,xe]=P.useState({invoiceNumber:"",revision:"R-001",invoiceType:"PROFORMA INVOICE",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),[re,K]=P.useState([{id:1,serialNo:1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}]),{data:W}=Ra(),{data:he}=Bn({queryKey:["/revira/api/projects",e],queryFn:async()=>{const le=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!le.ok)throw new Error("Failed to fetch project");return le.json()},enabled:!!e}),{data:z}=Bn({queryKey:["/revira/api/clients",he?.clientId],queryFn:async()=>{const le=await fetch(`/revira/api/clients/${he?.clientId}`,{credentials:"include"});if(!le.ok)throw new Error("Failed to fetch client");return le.json()},enabled:!!he?.clientId}),{data:E}=Bn({queryKey:["/revira/api/branding"],enabled:!!W}),{data:Q}=Bn({queryKey:["/revira/api/invoices",n],queryFn:async()=>{if(n){const J=await fetch(`/revira/api/invoices/${n}`,{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch invoice");return J.json()}const le=await fetch(`/revira/api/projects/${e}/invoice`,{credentials:"include"});if(!le.ok){if(le.status===404)return null;throw new Error("Failed to fetch invoice")}return le.json()},enabled:!!e}),{data:X}=Bn({queryKey:["/revira/api/invoices",Q?.id,"items"],queryFn:async()=>{const le=await fetch(`/revira/api/invoices/${Q?.id}/items`,{credentials:"include"});if(!le.ok)throw new Error("Failed to fetch items");return le.json()},enabled:!!Q?.id}),{data:ie}=Bn({queryKey:["/revira/api/projects",e,"invoice-versions"],queryFn:async()=>{const le=await fetch(`/revira/api/projects/${e}/invoice-versions`,{credentials:"include"});return le.ok?le.json():[]},enabled:!!e}),Ce=le=>{if(!le)return{};try{const J=JSON.parse(le);return J&&typeof J=="object"?J:{}}catch{return{}}},te=P.useCallback(()=>N.orderReferenceType==="po"?N.purchaseOrderNo||"-":N.workOrderNo||"-",[N.orderReferenceType,N.workOrderNo,N.purchaseOrderNo]),ae=P.useCallback(()=>{const le=[];return N.vehicleNo.trim()&&le.push(`Vehicle No.: ${N.vehicleNo.trim()}`),N.showDispatchLrNo&&le.push(`L.R. No.: ${N.dispatchLrNo||"-"}`),N.showDispatchPo&&le.push(`P.O.: ${N.dispatchPoNo||"-"}`),N.showDispatchGatePass&&le.push(`Gate Pass: ${N.dispatchGatePass||"-"}`),le.length?le.join(" | "):"-"},[N.vehicleNo,N.showDispatchLrNo,N.dispatchLrNo,N.showDispatchPo,N.dispatchPoNo,N.showDispatchGatePass,N.dispatchGatePass]),Ne=P.useCallback(()=>{const le={invoiceType:N.invoiceType,orderReferenceType:N.orderReferenceType,showWorkOrderNo:N.orderReferenceType==="wo",showPurchaseOrderNo:N.orderReferenceType==="po",purchaseOrderNo:N.purchaseOrderNo,vehicleNo:N.vehicleNo,showDispatchLrNo:N.showDispatchLrNo,showDispatchPo:N.showDispatchPo,showDispatchGatePass:N.showDispatchGatePass,dispatchLrNo:N.dispatchLrNo,dispatchPoNo:N.dispatchPoNo,dispatchGatePass:N.dispatchGatePass};return JSON.stringify(le)},[N]);P.useEffect(()=>{if(he&&z&&!Q){const le=new Date,J=le.getMonth()>=3?`${le.getFullYear()}-${(le.getFullYear()+1).toString().slice(-2)}`:`${le.getFullYear()-1}-${le.getFullYear().toString().slice(-2)}`;xe(q=>({...q,invoiceNumber:`RNS/${J}/RNS-SL-${String(he.id).padStart(3,"0")}`,organisationName:`M/s ${z.name}`,registeredAddress:z.location,consigneeAddress:`M/s ${z.name}, ${z.location}`,clientGstin:z.gstNo||""}))}},[he,z,Q]),P.useEffect(()=>{if(Q){const le=Ce(Q.contentSections),J=B=>(B||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),q=le.orderReferenceType||(le.showPurchaseOrderNo?"po":"wo"),U=le.vehicleNo!==void 0||le.showDispatchLrNo!==void 0||le.showDispatchPo!==void 0||le.showDispatchGatePass!==void 0||le.dispatchLrNo!==void 0||le.dispatchPoNo!==void 0||le.dispatchGatePass!==void 0;xe({invoiceNumber:Q.invoiceNumber,revision:Q.revision,invoiceType:le.invoiceType||"PROFORMA INVOICE",organisationName:Q.organisationName,registeredAddress:Q.registeredAddress,consigneeAddress:Q.consigneeAddress,clientGstin:Q.clientGstin||"",workOrderNo:J(Q.workOrderNo)||"NIL",orderReferenceType:q,purchaseOrderNo:le.purchaseOrderNo||(q==="po"?J(Q.workOrderNo):""),dispatchDetails:Q.dispatchDetails||"-",vehicleNo:le.vehicleNo||(!U&&Q.dispatchDetails&&Q.dispatchDetails!=="-"?Q.dispatchDetails:""),showDispatchLrNo:le.showDispatchLrNo??!1,showDispatchPo:le.showDispatchPo??!1,showDispatchGatePass:le.showDispatchGatePass??!1,dispatchLrNo:le.dispatchLrNo||"",dispatchPoNo:le.dispatchPoNo||"",dispatchGatePass:le.dispatchGatePass||"",appliedTaxType:Q.appliedTaxType||"igst",cgstRate:Q.cgstRate||"9",sgstRate:Q.sgstRate||"9",igstRate:Q.igstRate||"18"})}},[Q]),P.useEffect(()=>{X&&X.length>0&&K(X.map(le=>({id:le.id,serialNo:le.serialNo,description:le.description,hsnCode:le.hsnCode||"940610",quantity:Number(le.quantity)||1,unit:le.unit||"LS",ratePerUnit:Number(le.ratePerUnit)||0,percentage:Number(le.percentage)||0,amount:Number(le.amount)||0,remarks:le.remarks||""})))},[X]);const ne=P.useCallback(()=>{const le=re.reduce((fe,Pe)=>fe+(Number(Pe.amount)||0),0);let J=0,q=0,U=0;N.appliedTaxType==="cgst_sgst"?(J=le*(Number(N.cgstRate)/100),q=le*(Number(N.sgstRate)/100)):U=le*(Number(N.igstRate)/100);const B=J+q+U,G=le+B;return{totalAmount:le,cgstAmount:J,sgstAmount:q,igstAmount:U,totalTax:B,grandTotal:G}},[re,N.appliedTaxType,N.cgstRate,N.sgstRate,N.igstRate])(),O=P.useCallback(()=>re.filter(le=>le.description.trim()),[re]),L=le=>{const J=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],q=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(le===0)return"Zero";const U=_e=>_e===0?"":_e<20?J[_e]:_e<100?q[Math.floor(_e/10)]+(_e%10!==0?" "+J[_e%10]:""):J[Math.floor(_e/100)]+" Hundred"+(_e%100!==0?" "+U(_e%100):""),B=_e=>{if(_e===0)return"";const Ie=Math.floor(_e/1e7),qe=Math.floor(_e%1e7/1e5),wt=Math.floor(_e%1e5/1e3),ft=_e%1e3;let En="";return Ie>0&&(En+=U(Ie)+" Crore "),qe>0&&(En+=U(qe)+" Lakh "),wt>0&&(En+=U(wt)+" Thousand "),ft>0&&(En+=U(ft)),En.trim()},G=Math.floor(le),fe=Math.round((le-G)*100);let Pe=B(G)+" Rupees";return fe>0&&(Pe+=" and "+U(fe)+" Paise"),Pe+=" Only",Pe},oe=Mr({mutationFn:async()=>{const le=O(),q=await(await jn("POST","/revira/api/invoices",{projectId:Number(e),invoiceNumber:N.invoiceNumber,revision:N.revision,organisationName:N.organisationName,registeredAddress:N.registeredAddress,consigneeAddress:N.consigneeAddress,clientGstin:N.clientGstin,workOrderNo:te(),dispatchDetails:ae(),appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)})).json();for(const U of le)await jn("POST",`/revira/api/invoices/${q.id}/items`,{serialNo:U.serialNo,description:U.description,hsnCode:U.hsnCode,quantity:String(U.quantity),unit:U.unit,ratePerUnit:String(U.ratePerUnit),percentage:String(U.percentage),amount:String(U.amount),remarks:U.remarks});return q},onSuccess:le=>{Gn.invalidateQueries({queryKey:["/revira/api/invoices"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),r(`/revira/projects/${e}/invoice/${le.id}`),a({title:"Invoice saved",description:"The invoice has been created successfully."})},onError:le=>{a({title:"Error",description:le.message||"Failed to create invoice",variant:"destructive"})}}),ve=Mr({mutationFn:async()=>{const le=O();await jn("PUT",`/revira/api/invoices/${Q?.id}`,{invoiceNumber:N.invoiceNumber,revision:N.revision,organisationName:N.organisationName,registeredAddress:N.registeredAddress,consigneeAddress:N.consigneeAddress,clientGstin:N.clientGstin,workOrderNo:te(),dispatchDetails:ae(),appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)});let J=X||[];if(!J.length){const q=await fetch(`/revira/api/invoices/${Q?.id}/items`,{credentials:"include"});q.ok&&(J=await q.json())}for(const q of J)await jn("DELETE",`/revira/api/invoice-items/${q.id}`);for(const q of le)await jn("POST",`/revira/api/invoices/${Q?.id}/items`,{serialNo:q.serialNo,description:q.description,hsnCode:q.hsnCode,quantity:String(q.quantity),unit:q.unit,ratePerUnit:String(q.ratePerUnit),percentage:String(q.percentage),amount:String(q.amount),remarks:q.remarks})},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/invoices"]}),Gn.invalidateQueries({queryKey:["/revira/api/invoices",Q?.id,"items"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice updated",description:"The invoice has been updated successfully."})},onError:le=>{a({title:"Error",description:le.message||"Failed to update invoice",variant:"destructive"})}}),ye=Mr({mutationFn:async()=>(await jn("POST",`/revira/api/invoices/${Q?.id}/duplicate`,{})).json(),onSuccess:le=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),r(`/revira/projects/${e}/invoice/${le.id}`),a({title:"Invoice duplicated",description:`Created new version: ${le.revision}`})},onError:le=>{a({title:"Error",description:le.message||"Failed to duplicate invoice",variant:"destructive"})}}),be=Mr({mutationFn:async le=>{await jn("DELETE",`/revira/api/invoices/${le}`,void 0)},onSuccess:()=>{if(Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"invoice-versions"]}),a({title:"Invoice deleted",description:"The invoice version has been deleted."}),u(!1),ie&&ie.length>1){const le=ie.filter(J=>J.id!==Q?.id);le.length>0?r(`/revira/projects/${e}/invoice/${le[0].id}`):r(`/revira/projects/${e}/invoice`)}else r(`/revira/projects/${e}/invoice`)},onError:le=>{a({title:"Error",description:le.message||"Failed to delete invoice",variant:"destructive"})}}),Le=()=>{Q?ve.mutate():oe.mutate()},Oe=()=>{const le=Math.max(...re.map(J=>J.id),0)+1;K([...re,{id:le,serialNo:re.length+1,description:"",hsnCode:"940610",quantity:1,unit:"LS",ratePerUnit:0,percentage:0,amount:0,remarks:""}])},ze=le=>{if(re.length>1){const J=re.filter(q=>q.id!==le);K(J.map((q,U)=>({...q,serialNo:U+1})))}},Ze=(le,J,q)=>{K(U=>U.map(B=>{if(B.id===le){const G={...B,[J]:q};return(J==="quantity"||J==="ratePerUnit")&&(G.amount=Number(G.quantity)*Number(G.ratePerUnit)),G}return B}))},lt=le=>`${le.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,ut=async le=>{const J=le?.save??!0,q=le?.silent??!1,U=le?.returnDataUri??!1;try{const B=new un({orientation:"portrait",unit:"mm",format:"a4"}),G=210,fe=297,Pe=15,_e=G-Pe*2,Ie=35,qe=30,wt=sn=>sn*.2646,ft=wt(80),En=wt(50),Cn=wt(80),mn=wt(10),gn=wt(3),bn=wt(3),Ct="#eeb7b7",rn="#fff5f5";let Ke=Ie+10,Ye=1;const it=sn=>sn.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),on=sn=>it(sn),ln=sn=>new Promise((pr,Ln)=>{const Zt=new Image;Zt.crossOrigin="anonymous",Zt.onload=()=>{const On=document.createElement("canvas");On.width=Zt.width,On.height=Zt.height,On.getContext("2d")?.drawImage(Zt,0,0),pr(On.toDataURL("image/png"))},Zt.onerror=Ln,Zt.src=sn});let Zn=null,bs=null,_r=null;try{E?.headerUrl&&(Zn=await ln(E.headerUrl)),E?.footerUrl&&(bs=await ln(E.footerUrl)),E?.stampUrl&&(_r=await ln(E.stampUrl))}catch(sn){console.warn("Failed to load branding images:",sn)}const ds=sn=>{Zn&&B.addImage(Zn,"PNG",0,0,G,Ie),bs&&B.addImage(bs,"PNG",0,fe-qe,G,qe),_r&&B.addImage(_r,"PNG",G-En-ft,fe-Cn-ft,ft,ft),B.setFontSize(8),B.setTextColor(128,128,128),B.text(`Page ${sn}`,G/2,fe-8,{align:"center"})},Nr=sn=>Ke+sn>fe-qe-10?(B.addPage(),Ye++,ds(Ye),Ke=Ie+10,!0):!1,Mt=(sn,pr=12)=>{Ke+=4,Nr(12),B.setFillColor("#d92134"),B.rect(Pe,Ke-3.5,4,5,"F"),B.setFont("helvetica","bold"),B.setFontSize(pr),B.setTextColor("#1e3a5f"),B.text(sn,Pe+7,Ke),Ke+=5.5},vr=(sn,pr,Ln=[])=>{const Zt=[32,63,32,63],On=5.8,yt=bn,Xe=wt(3),ot=jt=>jt-3,nt=(jt,Tt=0)=>ot(jt)+Xe+2.5+Tt*3.2;Nr(On+4),B.setFont("helvetica","normal"),B.setFontSize(8.5);let Ge=0;const gt=jt=>jt.forEach(([Tt,Rt])=>{const It=B.splitTextToSize(Tt,Zt[0]-yt*2),Dt=B.splitTextToSize(Rt||"-",Zt[1]+Zt[2]+Zt[3]-yt*2),Lt=Math.max(It.length||1,Dt.length||1),Ft=Math.max(On,Lt*3.2+1.2);if(Nr(Ft+2),Ge%2===0&&(B.setFillColor(245,245,245),B.rect(Pe,ot(Ke),_e,Ft,"F")),B.setDrawColor(Ct),B.rect(Pe,ot(Ke),_e,Ft,"S"),B.line(Pe+Zt[0],ot(Ke),Pe+Zt[0],ot(Ke)+Ft),B.setFont("helvetica","bold"),It.forEach((qt,vn)=>{B.text(qt,Pe+yt,nt(Ke,vn))}),Tt==="Dispatch Details"&&Rt){const qt=Rt.split(",").map(An=>An.trim()).filter(Boolean),vn=Pe+Zt[0]+yt,xr=Pe+Zt[0]+Zt[1]+Zt[2]+Zt[3]-yt;let Un=vn,zt=nt(Ke,0);qt.forEach((An,xn)=>{const dr=xn<qt.length-1?", ":"",Dn=An.indexOf(" - "),F=Dn>-1?An.slice(0,Dn):An,de=Dn>-1?An.slice(Dn):"",we=B.getTextWidth(F),Ae=B.getTextWidth(de+dr);Un+we+Ae>xr&&(Un=vn,zt+=3.2),B.setFont("helvetica","bold"),B.text(F,Un,zt),Un+=we,B.setFont("helvetica","normal"),B.text(de+dr,Un,zt),Un+=Ae})}else B.setFont("helvetica","normal"),Dt.forEach((qt,vn)=>{B.text(qt,Pe+Zt[0]+yt,nt(Ke,vn))});Ke+=Ft,Ge+=1});gt(sn),pr.forEach(jt=>{const[Tt,Rt]=jt,It=B.splitTextToSize(Tt?.[0]||"",Zt[0]-yt*2),Dt=B.splitTextToSize(Tt?.[1]||"-",Zt[1]-yt*2),Lt=B.splitTextToSize(Rt?.[0]||"",Zt[2]-yt*2),Ft=B.splitTextToSize(Rt?.[1]||"",Zt[3]-yt*2),qt=Math.max(It.length||1,Dt.length||1,Lt.length||1,Ft.length||1),vn=Math.max(On,qt*3.2+1.2);Nr(vn+2),Ge%2===0&&(B.setFillColor(245,245,245),B.rect(Pe,ot(Ke),_e,vn,"F")),B.setDrawColor(Ct),B.rect(Pe,ot(Ke),_e,vn,"S");let xr=Pe;for(let Un=0;Un<3;Un++)xr+=Zt[Un],B.line(xr,ot(Ke),xr,ot(Ke)+vn);B.setFont("helvetica","bold"),It.forEach((Un,zt)=>B.text(Un,Pe+yt,nt(Ke,zt))),Lt.forEach((Un,zt)=>B.text(Un,Pe+Zt[0]+Zt[1]+yt,nt(Ke,zt))),B.setFont("helvetica","normal"),Dt.forEach((Un,zt)=>B.text(Un,Pe+Zt[0]+yt,nt(Ke,zt))),Ft.forEach((Un,zt)=>B.text(Un,Pe+Zt[0]+Zt[1]+Zt[2]+yt,nt(Ke,zt))),Ke+=vn,Ge+=1}),gt(Ln)},fs=sn=>{const pr=[32,75,32,51],Ln=5.8,Zt=bn,On=wt(3),yt=ot=>ot-3,Xe=(ot,nt=0)=>yt(ot)+On+2.5+nt*3.2;Nr(Ln+4),B.setFont("helvetica","normal"),B.setFontSize(8.5),sn.forEach((ot,nt)=>{const[Ge,gt]=ot,jt=B.splitTextToSize(Ge?.[0]||"",pr[0]-Zt*2),Tt=B.splitTextToSize(Ge?.[1]||"-",pr[1]-Zt*2),Rt=B.splitTextToSize(gt?.[0]||"",pr[2]-Zt*2),It=B.splitTextToSize(gt?.[1]||"",pr[3]-Zt*2),Dt=Math.max(jt.length||1,Tt.length||1,Rt.length||1,It.length||1),Lt=Math.max(Ln,Dt*3.2+1.2);Nr(Lt+2),nt%2===0&&(B.setFillColor(245,245,245),B.rect(Pe,yt(Ke),_e,Lt,"F")),B.setDrawColor(Ct),B.rect(Pe,yt(Ke),_e,Lt,"S");let Ft=Pe;for(let qt=0;qt<3;qt++)Ft+=pr[qt],B.line(Ft,yt(Ke),Ft,yt(Ke)+Lt);B.setFont("helvetica","bold"),jt.forEach((qt,vn)=>B.text(qt,Pe+Zt,Xe(Ke,vn))),Rt.forEach((qt,vn)=>B.text(qt,Pe+pr[0]+pr[1]+Zt,Xe(Ke,vn))),B.setFont("helvetica","normal"),Tt.forEach((qt,vn)=>B.text(qt,Pe+pr[0]+Zt,Xe(Ke,vn))),It.forEach((qt,vn)=>B.text(qt,Pe+pr[0]+pr[1]+pr[2]+Zt,Xe(Ke,vn))),Ke+=Lt})},hs=(sn,pr)=>{const Ln=[95,55,_e-150],Zt=5.8,On=bn;Nr(Zt+6),B.setFillColor(rn),B.setDrawColor(Ct),B.setLineWidth(.2),B.rect(Pe,Ke-3.2,_e,Zt,"FD"),B.setFont("helvetica","bold"),B.setFontSize(8.5),B.text("Total Amount In Words",Pe+bn,Ke+.8),B.text("Details",Pe+Ln[0]+bn,Ke+.8),B.text("Amount",Pe+Ln[0]+Ln[1]+bn,Ke+.8),B.line(Pe+Ln[0],Ke-3.2,Pe+Ln[0],Ke-3.2+Zt),B.line(Pe+Ln[0]+Ln[1],Ke-3.2,Pe+Ln[0]+Ln[1],Ke-3.2+Zt),Ke+=Zt,B.setFont("helvetica","normal"),B.setFontSize(8.5);const yt=pr.map(Ge=>{const gt=B.splitTextToSize(Ge.detail,Ln[1]-On*2),jt=B.splitTextToSize(Ge.value,Ln[2]-On*2),Tt=Math.max(gt.length||1,jt.length||1),Rt=Math.max(Zt,Tt*3.2+1.2);return{detailLines:gt,valueLines:jt,rowHeight:Rt}}),Xe=yt.reduce((Ge,gt)=>Ge+gt.rowHeight,0);Nr(Xe+2),B.setDrawColor(Ct),B.rect(Pe,Ke-3.2,Ln[0],Xe,"S");const ot=B.splitTextToSize(sn,Ln[0]-On*3);B.setFont("helvetica","bold"),ot.forEach((Ge,gt)=>{B.text(Ge,Pe+On,Ke+.1+gn+gt*3.2)});let nt=Ke;yt.forEach((Ge,gt)=>{gt%2===0&&(B.setFillColor(245,245,245),B.rect(Pe+Ln[0],nt-3.2,Ln[1]+Ln[2],Ge.rowHeight,"F")),B.setDrawColor(Ct),B.rect(Pe+Ln[0],nt-3.2,Ln[1]+Ln[2],Ge.rowHeight,"S"),B.line(Pe+Ln[0]+Ln[1],nt-3.2,Pe+Ln[0]+Ln[1],nt-3.2+Ge.rowHeight),(pr[gt]?.detail||"").trim().toLowerCase()==="grand total"?B.setFont("helvetica","bold"):B.setFont("helvetica","normal"),Ge.detailLines.forEach((jt,Tt)=>{B.text(jt,Pe+Ln[0]+On,nt+.1+gn+Tt*3.2)}),(pr[gt]?.detail||"").trim().toLowerCase()==="grand total"?B.setFont("helvetica","bold"):B.setFont("helvetica","normal"),Ge.valueLines.forEach((jt,Tt)=>{B.text(jt,Pe+Ln[0]+Ln[1]+On,nt+.1+gn+Tt*3.2)}),nt+=Ge.rowHeight}),Ke=nt},Ls=N.invoiceType||"PROFORMA INVOICE",Sr=Ls==="TAX INVOICE"?"T.I. No":"P.I No",Ir=Ls==="TAX INVOICE"?"TI":"PI",Pr=new Date,Di=Pr.getMonth()>=3?`${Pr.getFullYear()}-${String(Pr.getFullYear()+1).slice(-2)}`:`${Pr.getFullYear()-1}-${String(Pr.getFullYear()).slice(-2)}`,Ds=String(he?.id||0).padStart(3,"0"),ps=`RNS/${Di}/RNS-${Ir}-${Ds}`,Hr=[["GSTIN",N.clientGstin||""]],hr=[];N.orderReferenceType==="po"?Hr.push(["P.O. No.",N.purchaseOrderNo||"-"]):Hr.push(["W.O. No.",N.workOrderNo||"-"]),N.vehicleNo.trim()&&hr.push(`Vehicle No. - ${N.vehicleNo.trim()}`),N.showDispatchLrNo&&hr.push(`L.R. No. - ${N.dispatchLrNo||"-"}`),N.showDispatchPo&&hr.push(`D.C No. - ${N.dispatchPoNo||"-"}`),N.showDispatchGatePass&&hr.push(`Gate Pass - ${N.dispatchGatePass||"-"}`);const Qs=hr.length?hr.join(",    "):"-",Rs=[];for(let sn=0;sn<Hr.length;sn+=2)Rs.push([Hr[sn],Hr[sn+1]]);ds(Ye),B.setFontSize(16),B.setFont("helvetica","bold"),B.setTextColor("#da2032"),B.text(Ls,G/2,Ke,{align:"center"}),Ke+=10,B.setFont("helvetica","normal"),B.setTextColor(0,0,0),B.setFontSize(9),B.text(`CIN: ${E?.cin||""}`,Pe,Ke),B.text(`Company GSTIN: ${E?.companyGstin||"07AAPCR3026H1ZA"}`,G/2-20,Ke),B.text(`${Sr}: ${ps}`,G-Pe-50,Ke),Ke+=5,B.text(`Email: ${E?.email||"sales@reviranexgen.com"}`,G/2-20,Ke),B.text(`Date: ${new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,G-Pe-50,Ke),Ke+=8,Mt("Client Details",11),vr([["Organisation Name",N.organisationName],["Registered Address",N.registeredAddress],["Consignee Address",N.consigneeAddress]],Rs,[["Dispatch Details",Qs]]),Ke+=mn;const Ri=["Sr.No.","Description of Goods","HSN Code","Qty.","Unit","Rate","%age","Basic Amount (INR)"],ws=[12,55,20,13,13,20,14,43],Is=re.filter(sn=>sn.description.trim()).map(sn=>[String(sn.serialNo),sn.description,sn.hsnCode,String(sn.quantity),sn.unit||"LS",it(Number(sn.ratePerUnit)||0),`${Number(sn.percentage)||0}%`,it(Number(sn.amount)||0)]);Nr(15),B.setFillColor(rn),B.setDrawColor(Ct),B.setLineWidth(.2),B.rect(Pe,Ke-3,_e,5.8,"FD"),B.setFont("helvetica","bold"),B.setFontSize(8);let kr=Pe;Ri.forEach((sn,pr)=>{B.line(kr,Ke-3,kr,Ke+2.8),B.text(sn,kr+bn,Ke+.8),kr+=ws[pr]}),B.line(kr,Ke-3,kr,Ke+2.8),Ke+=5.8,B.setFont("helvetica","normal"),Is.forEach((sn,pr)=>{const Ln=sn.map((Xe,ot)=>B.splitTextToSize(Xe,ws[ot]-bn*2)),Zt=Math.max(...Ln.map(Xe=>Xe.length)),On=Math.max(5.8,Zt*3.2+1.2);Nr(On+2),pr%2===0&&(B.setFillColor(245,245,245),B.rect(Pe,Ke-3,_e,On,"F")),B.setDrawColor(Ct),B.rect(Pe,Ke-3,_e,On,"S");let yt=Pe;Ln.forEach((Xe,ot)=>{B.line(yt,Ke-3,yt,Ke-3+On),ot===0?B.setFont("helvetica","bold"):B.setFont("helvetica","normal"),Xe.forEach((nt,Ge)=>{B.text(nt,yt+bn,Ke+.1+gn+Ge*3.2)}),yt+=ws[ot]}),B.line(yt,Ke-3,yt,Ke-3+On),Ke+=On}),Ke+=mn;const Ns=[{detail:"Total Amount (INR)",value:on(ne.totalAmount)},{detail:"Total Amount before Tax",value:on(ne.totalAmount)},{detail:"(1) Add: CGST",value:on(ne.cgstAmount)},{detail:"(2) Add: SGST",value:on(ne.sgstAmount)},{detail:"(3) Add: IGST",value:on(ne.igstAmount)},{detail:"Total GST",value:on(ne.totalTax)},{detail:"Grand Total",value:on(ne.grandTotal)}];hs(L(ne.grandTotal),Ns),Ke+=mn,Mt("Bank Details",11),fs([[["Account Name",E?.entityName||"Revira NexGen Structures Pvt. Ltd"],["Account Number","73361900002657"]],[["Address",E?.headOfficeAddress||"28, E2 Block, Shivram Park Nangloi Delhi - 110041"],["IFSC Code","YESB0000733"]]]),Ke+=mn,Nr(20),B.text(`For, ${E?.entityName||"Revira NexGen Structures Pvt. Ltd"}`,G-Pe-60,Ke),Ke+=18,B.text("Authorised Signatory",G-Pe-50,Ke);const Ci=new Date,Ga=`${String(Ci.getDate()).padStart(2,"0")}${String(Ci.getMonth()+1).padStart(2,"0")}${Ci.getFullYear()}`,wr=(E?.entityName||"RNS").split(" ").map(sn=>sn[0]).join(""),is=`${Ls==="TAX INVOICE"?"TAX_INVOICE":"PROFORMA_INVOICE"}_${Ga}_${wr}_${N.revision}.pdf`,Xr=U?B.output("datauristring",{filename:is}):void 0;return J&&B.save(is),q||a({title:J?"PDF exported":"PDF generated",description:J?`Invoice saved as ${is}`:"Invoice PDF is ready."}),{fileName:is,dataUri:Xr}}catch(B){return console.error("PDF export error:",B),q||a({title:"Export failed",description:"Failed to export invoice PDF. Please try again.",variant:"destructive"}),null}},_t=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,ue=()=>{if(!Q?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}k({to:z?.emailAddress||"",subject:`Invoice ${N.invoiceNumber||""} ${N.revision||""}`.trim(),message:`Please find the attached file for details

${_t}`}),f(!0)},xt=async()=>{if(!Q?.id){a({title:"Save required",description:"Please save invoice first, then send via email.",variant:"destructive"});return}const le=S.to.split(/[,\s;]+/).map(q=>q.trim()).filter(Boolean);if(le.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const J=await ut({save:!1,silent:!0,returnDataUri:!0});if(!J?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for email.",variant:"destructive"});return}try{const q=J.dataUri.split(",")[1]||"",B=await(await jn("POST",`/revira/api/invoices/${Q.id}/send-email`,{to:le,subject:S.subject.trim(),message:S.message.trim(),fileName:J.fileName,pdfBase64:q})).json(),G=Array.isArray(B?.accepted)?B.accepted:[],fe=G.length>0?G.join(", "):le.join(", ");a({title:"Email queued",description:`SMTP accepted: ${fe}.`}),f(!1)}catch(q){a({title:"Send failed",description:q?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},dn=()=>{if(!Q?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const le=(z?.mobileNumber||"").replace(/\D/g,""),J=le.length===10?`91${le}`:le;I({mobile:J,message:`Please find the attached file for details

${_t}`}),j(!0)},Jt=async()=>{if(!Q?.id){a({title:"Save required",description:"Please save invoice first, then send on WhatsApp.",variant:"destructive"});return}const le=A.mobile.split(/[,\s;]+/).map(q=>q.replace(/\D/g,"")).filter(Boolean);if(le.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!A.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const J=await ut({save:!1,silent:!0,returnDataUri:!0});if(!J?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate invoice PDF for WhatsApp send.",variant:"destructive"});return}try{const q=J.dataUri.split(",")[1]||"";await jn("POST",`/revira/api/invoices/${Q.id}/send-whatsapp`,{to:le,message:A.message.trim(),fileName:J.fileName,pdfBase64:q}),a({title:"WhatsApp sent",description:`Invoice sent to ${le.join(", ")}.`}),j(!1)}catch(q){a({title:"Send failed",description:q?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!he||!z||!W?s.jsx(Ks,{user:W,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(Ks,{user:W,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:he.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(ru,{className:"h-4 w-4"}),he.location]})]})]}),s.jsxs(Me,{className:"bg-[#d92134] hover:bg-[#b51c2c]","data-testid":"button-new-invoice",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:Q?.revision||N.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(Wm,{className:"h-4 w-4"})}),Q&&s.jsx(Me,{variant:"outline",size:"icon",onClick:()=>ye.mutate(),disabled:ye.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate",children:s.jsx($d,{className:"w-4 h-4"})}),s.jsxs(Me,{onClick:ut,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(Me,{variant:"outline",size:"icon",onClick:ue,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-invoice",title:"Send invoice by email",children:s.jsx(hu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"outline",size:"icon",onClick:dn,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-invoice",title:"Send invoice on WhatsApp",children:s.jsx(Gm,{className:"w-4 h-4"})}),s.jsxs(Me,{variant:"outline",onClick:Le,disabled:oe.isPending||ve.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-invoice",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),oe.isPending||ve.isPending?"Saving...":"Save Changes"]}),Q&&ie&&ie.length>1&&s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:()=>$({open:!0,title:"Delete Invoice?",description:`Are you sure you want to delete this invoice (${Q.revision})?`,onConfirm:()=>be.mutate(Q.id)}),"data-testid":"button-delete-invoice",children:s.jsx(lr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsxs(ss,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Ta,{className:"w-5 h-5"}),"INVOICE DETAILS"]})}),s.jsxs(Tn,{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Invoice Type"}),s.jsxs(Ml,{value:N.invoiceType,onValueChange:le=>xe({...N,invoiceType:le}),children:[s.jsx(ol,{"data-testid":"select-invoice-type",children:s.jsx(Bl,{})}),s.jsxs(ll,{children:[s.jsx(va,{value:"PROFORMA INVOICE",children:"PROFORMA INVOICE"}),s.jsx(va,{value:"TAX INVOICE",children:"TAX INVOICE"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Invoice No."}),s.jsx(Je,{value:N.invoiceNumber,onChange:le=>xe({...N,invoiceNumber:le.target.value}),"data-testid":"input-invoice-number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(Je,{value:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),disabled:!0})]})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"CLIENT DETAILS"})}),s.jsxs(Tn,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Organisation Name"}),s.jsx(Je,{value:N.organisationName,onChange:le=>xe({...N,organisationName:le.target.value}),"data-testid":"input-organisation-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Client GSTIN"}),s.jsx(Je,{value:N.clientGstin,onChange:le=>xe({...N,clientGstin:le.target.value}),"data-testid":"input-client-gstin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Registered Address"}),s.jsx(Je,{value:N.registeredAddress,onChange:le=>xe({...N,registeredAddress:le.target.value}),"data-testid":"input-registered-address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Consignee Address"}),s.jsx(Or,{value:N.consigneeAddress,onChange:le=>xe({...N,consigneeAddress:le.target.value}),rows:2,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Order Reference Selection"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Reference Type"}),s.jsxs(Ml,{value:N.orderReferenceType,onValueChange:le=>xe({...N,orderReferenceType:le}),children:[s.jsx(ol,{"data-testid":"select-order-reference-type",children:s.jsx(Bl,{})}),s.jsxs(ll,{children:[s.jsx(va,{value:"wo",children:"W.O. No."}),s.jsx(va,{value:"po",children:"P.O. No."})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:N.orderReferenceType==="po"?"P.O. No.":"W.O. No."}),s.jsx(Je,{value:N.orderReferenceType==="po"?N.purchaseOrderNo:N.workOrderNo,onChange:le=>xe({...N,...N.orderReferenceType==="po"?{purchaseOrderNo:le.target.value}:{workOrderNo:le.target.value}}),"data-testid":N.orderReferenceType==="po"?"input-po-number":"input-work-order"})]})]})]}),s.jsxs("div",{className:"space-y-3 border rounded-md p-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Dispatch Details"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(Je,{value:N.vehicleNo,onChange:le=>xe({...N,vehicleNo:le.target.value}),"data-testid":"input-vehicle-no"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ah,{checked:N.showDispatchLrNo,onCheckedChange:le=>xe({...N,showDispatchLrNo:le===!0}),"data-testid":"checkbox-dispatch-lr"}),"L.R. No."]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ah,{checked:N.showDispatchPo,onCheckedChange:le=>xe({...N,showDispatchPo:le===!0}),"data-testid":"checkbox-dispatch-po"}),"D.C No."]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[s.jsx(ah,{checked:N.showDispatchGatePass,onCheckedChange:le=>xe({...N,showDispatchGatePass:le===!0}),"data-testid":"checkbox-dispatch-gate-pass"}),"Gate Pass"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[N.showDispatchLrNo&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"L.R. No."}),s.jsx(Je,{value:N.dispatchLrNo,onChange:le=>xe({...N,dispatchLrNo:le.target.value}),"data-testid":"input-dispatch-lr"})]}),N.showDispatchPo&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"D.C No."}),s.jsx(Je,{value:N.dispatchPoNo,onChange:le=>xe({...N,dispatchPoNo:le.target.value}),"data-testid":"input-dispatch-po"})]}),N.showDispatchGatePass&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Gate Pass"}),s.jsx(Je,{value:N.dispatchGatePass,onChange:le=>xe({...N,dispatchGatePass:le.target.value}),"data-testid":"input-dispatch-gate-pass"})]})]})]})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"INVOICE ITEMS"})}),s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"Sr."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600",children:"Description"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"HSN Code"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Qty"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"Unit"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"Rate"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"Amount"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsx("tbody",{children:re.map(le=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:le.serialNo,onChange:J=>Ze(le.id,"serialNo",parseInt(J.target.value)||1),className:"w-14 text-center","data-testid":`input-serial-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Or,{value:le.description,onChange:J=>Ze(le.id,"description",J.target.value),rows:2,placeholder:"Description","data-testid":`input-description-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:le.hsnCode,onChange:J=>Ze(le.id,"hsnCode",J.target.value),"data-testid":`input-hsn-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:le.quantity,onChange:J=>Ze(le.id,"quantity",parseFloat(J.target.value)||0),"data-testid":`input-qty-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:le.unit,onChange:J=>Ze(le.id,"unit",J.target.value),"data-testid":`input-unit-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:le.ratePerUnit,onChange:J=>Ze(le.id,"ratePerUnit",parseFloat(J.target.value)||0),"data-testid":`input-rate-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:le.amount,onChange:J=>Ze(le.id,"amount",parseFloat(J.target.value)||0),"data-testid":`input-amount-${le.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>ze(le.id),disabled:re.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${le.id}`,children:s.jsx(lr,{className:"h-4 w-4"})})})]},le.id))})]})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(K7,{label:"Add Row",onClick:Oe,testId:"button-add-item"})})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"TAX & TOTALS"})}),s.jsx(Tn,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Tax Type"}),s.jsxs(Ml,{value:N.appliedTaxType,onValueChange:le=>xe({...N,appliedTaxType:le}),children:[s.jsx(ol,{"data-testid":"select-tax-type",children:s.jsx(Bl,{})}),s.jsxs(ll,{children:[s.jsx(va,{value:"igst",children:"IGST (Interstate)"}),s.jsx(va,{value:"cgst_sgst",children:"CGST + SGST (Intrastate)"})]})]})]}),N.appliedTaxType==="cgst_sgst"?s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CGST Rate (%)"}),s.jsx(Je,{type:"number",value:N.cgstRate,onChange:le=>xe({...N,cgstRate:le.target.value}),"data-testid":"input-cgst-rate"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"SGST Rate (%)"}),s.jsx(Je,{type:"number",value:N.sgstRate,onChange:le=>xe({...N,sgstRate:le.target.value}),"data-testid":"input-sgst-rate"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"IGST Rate (%)"}),s.jsx(Je,{type:"number",value:N.igstRate,onChange:le=>xe({...N,igstRate:le.target.value}),"data-testid":"input-igst-rate"})]})]}),s.jsxs("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Total Amount"}),s.jsx("span",{className:"font-medium",children:lt(ne.totalAmount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Amount before Tax"}),s.jsx("span",{className:"font-medium",children:lt(ne.totalAmount)})]}),N.appliedTaxType==="cgst_sgst"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"CGST"}),s.jsx("span",{children:lt(ne.cgstAmount)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"SGST"}),s.jsx("span",{children:lt(ne.sgstAmount)})]})]}):s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500",children:"IGST"}),s.jsx("span",{children:lt(ne.igstAmount)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-slate-600",children:"Total Tax"}),s.jsx("span",{className:"font-medium",children:lt(ne.totalTax)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2 text-lg",children:[s.jsx("span",{className:"font-bold text-slate-700",children:"Grand Total"}),s.jsx("span",{className:"font-bold text-blue-600",children:lt(ne.grandTotal)})]}),s.jsx("div",{className:"text-sm text-slate-500 mt-2",children:L(ne.grandTotal)})]})]})})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"BANK DETAILS"})}),s.jsx(Tn,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Account Name:"}),s.jsx("span",{className:"ml-2 font-medium",children:E?.entityName||"Revira NexGen Structures Pvt. Ltd"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Account Number:"}),s.jsx("span",{className:"ml-2 font-medium",children:"073361900002657"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Bank Address:"}),s.jsx("span",{className:"ml-2 font-medium",children:E?.headOfficeAddress||"28 E2 Block, Shivram Park, Nangloi, Delhi 41"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"IFSC Code:"}),s.jsx("span",{className:"ml-2 font-medium",children:"YESB0000733"})]})]})})]})]})]}),s.jsx(gi,{open:o,onOpenChange:u,children:s.jsxs(ri,{className:"max-w-md",children:[s.jsx(si,{children:s.jsx(ii,{children:"Invoice Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:ie?.map(le=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${le.id===Q?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/invoice/${le.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:le.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(le.createdAt).toLocaleDateString()})]}),ie&&ie.length>1&&s.jsx(Me,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:J=>{J.stopPropagation(),$({open:!0,title:"Delete Invoice Version?",description:`Are you sure you want to delete version ${le.revision}?`,onConfirm:()=>be.mutate(le.id)})},"data-testid":`button-delete-version-${le.id}`,children:s.jsx(lr,{className:"w-4 h-4"})})]})},le.id))})]})}),s.jsx(gi,{open:c,onOpenChange:f,children:s.jsxs(ri,{className:"sm:max-w-xl",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Invoice by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(Je,{value:S.to,onChange:le=>k(J=>({...J,to:le.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(Je,{value:S.subject,onChange:le=>k(J=>({...J,subject:le.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Or,{value:S.message,onChange:le=>k(J=>({...J,message:le.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-invoice"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-invoice",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:xt,disabled:p,"data-testid":"button-send-email-submit-invoice",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(gi,{open:y,onOpenChange:j,children:s.jsxs(ri,{className:"sm:max-w-lg",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Invoice on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(Je,{value:A.mobile,onChange:le=>I(J=>({...J,mobile:le.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-invoice"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Or,{value:A.message,onChange:le=>I(J=>({...J,message:le.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-invoice"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:x,"data-testid":"button-send-whatsapp-cancel-invoice",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:Jt,disabled:x,"data-testid":"button-send-whatsapp-submit-invoice",children:x?"Sending...":"Submit"})]})]})]})}),s.jsx(Hh,{open:R.open,onOpenChange:le=>{le||$({open:!1,title:"",description:"",onConfirm:null})},title:R.title,description:R.description,onConfirm:()=>{R.onConfirm?.(),$({open:!1,title:"",description:"",onConfirm:null})},confirmLabel:"Delete",confirmTestId:"confirm-delete-invoice-action",cancelTestId:"cancel-delete-invoice-action"})]})}const Q7=({label:t,onClick:e,testId:n})=>s.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[s.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 top-1/2 -translate-y-1/2 border-t border-dotted border-[#d92134]"}),s.jsxs(Me,{type:"button",onClick:e,className:"relative z-10 h-10 min-w-[220px] rounded-full border border-[#d92134]/35 bg-white px-8 text-sm font-semibold text-[#d92134] shadow-none transition hover:bg-[#fff5f6]","data-testid":n,children:["+ ",t]})]});function O5(){const t=ed(),e=t.id,n=t.gatePassId,[,r]=Va(),{toast:a}=Ha(),[o,u]=P.useState(!1),[c,f]=P.useState(!1),[p,m]=P.useState(!1),[y,j]=P.useState(!1),[x,D]=P.useState(!1),[S,k]=P.useState({to:"",subject:"",message:""}),[A,I]=P.useState({mobile:"",message:""}),[R,$]=P.useState({open:!1,title:"",description:"",onConfirm:null}),[N,xe]=P.useState({gatePassNumber:"",revision:"R-001",gatePassType:"GATE PASS",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),re=J=>{const q=J.split(/\s+/).map(U=>U.trim()).filter(Boolean);return q.length?q.map(U=>U[0]).join("").toUpperCase():"PROJECT"},K=J=>{const q=String(J.getDate()).padStart(2,"0"),U=String(J.getMonth()+1).padStart(2,"0"),B=String(J.getFullYear()).slice(-2);return`${q}-${U}-${B}`},[W,he]=P.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:z}=Ra(),{data:E}=Bn({queryKey:["/revira/api/projects",e],queryFn:async()=>{const J=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch project");return J.json()},enabled:!!e}),{data:Q}=Bn({queryKey:["/revira/api/clients",E?.clientId],queryFn:async()=>{const J=await fetch(`/revira/api/clients/${E?.clientId}`,{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch client");return J.json()},enabled:!!E?.clientId}),{data:X}=Bn({queryKey:["/revira/api/branding"],enabled:!!z}),{data:ie}=Bn({queryKey:["/revira/api/gate-passes",n],queryFn:async()=>{if(n){const q=await fetch(`/revira/api/gate-passes/${n}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch gate pass");return q.json()}const J=await fetch(`/revira/api/projects/${e}/gate-pass`,{credentials:"include"});if(!J.ok){if(J.status===404)return null;throw new Error("Failed to fetch gate pass")}return J.json()},enabled:!!e}),{data:Ce}=Bn({queryKey:["/revira/api/gate-passes",ie?.id,"items"],queryFn:async()=>{const J=await fetch(`/revira/api/gate-passes/${ie?.id}/items`,{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch items");return J.json()},enabled:!!ie?.id}),{data:te}=Bn({queryKey:["/revira/api/projects",e,"gate-pass-versions"],queryFn:async()=>{const J=await fetch(`/revira/api/projects/${e}/gate-pass-versions`,{credentials:"include"});return J.ok?J.json():[]},enabled:!!e}),ae=J=>{if(!J)return{};try{const q=JSON.parse(J);return q&&typeof q=="object"?q:{}}catch{return{}}};P.useCallback(()=>N.orderReferenceType==="po"?N.purchaseOrderNo||"-":N.workOrderNo||"-",[N.orderReferenceType,N.workOrderNo,N.purchaseOrderNo]),P.useCallback(()=>{const J=[];return N.vehicleNo.trim()&&J.push(`Vehicle No.: ${N.vehicleNo.trim()}`),N.showDispatchLrNo&&J.push(`L.R. No.: ${N.dispatchLrNo||"-"}`),N.showDispatchPo&&J.push(`P.O.: ${N.dispatchPoNo||"-"}`),N.showDispatchGatePass&&J.push(`Gate Pass: ${N.dispatchGatePass||"-"}`),J.length?J.join(" | "):"-"},[N.vehicleNo,N.showDispatchLrNo,N.dispatchLrNo,N.showDispatchPo,N.dispatchPoNo,N.showDispatchGatePass,N.dispatchGatePass]);const Ne=P.useCallback(()=>{const J={gatePassType:N.gatePassType,issueNo:N.issueNo,issueDate:N.issueDate,revNo:N.revNo,revDate:N.revDate,consigneeName:N.consigneeName,consigneeAddressText:N.consigneeAddressText,modeOfTransport:N.modeOfTransport,vehicleNumber:N.vehicleNumber,transportVehicle:N.transportVehicle,contactNo:N.contactNo,contactPerson:N.contactPerson,remarkText:N.remarkText,storeKeeperSignature:N.storeKeeperSignature,qcEnggSignature:N.qcEnggSignature,storeInchargeSignature:N.storeInchargeSignature,plantHeadSignature:N.plantHeadSignature,orderReferenceType:N.orderReferenceType,showWorkOrderNo:N.orderReferenceType==="wo",showPurchaseOrderNo:N.orderReferenceType==="po",purchaseOrderNo:N.purchaseOrderNo,vehicleNo:N.vehicleNo,showDispatchLrNo:N.showDispatchLrNo,showDispatchPo:N.showDispatchPo,showDispatchGatePass:N.showDispatchGatePass,dispatchLrNo:N.dispatchLrNo,dispatchPoNo:N.dispatchPoNo,dispatchGatePass:N.dispatchGatePass};return JSON.stringify(J)},[N]);P.useEffect(()=>{if(E&&Q&&!ie){const J=new Date,q=re(E.projectName),U=K(J);xe(B=>({...B,gatePassNumber:`RNS/${q}/${U}/RNS-GT-002`,issueDate:J.toISOString().split("T")[0],revDate:J.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:Q.name,registeredAddress:Q.location,consigneeAddress:`${Q.name}
${Q.location}`,clientGstin:Q.gstNo||""}))}},[E,Q,ie]),P.useEffect(()=>{if(ie){const J=ae(ie.contentSections),q=Pe=>(Pe||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),U=J.orderReferenceType||(J.showPurchaseOrderNo?"po":"wo"),B=J.vehicleNo!==void 0||J.showDispatchLrNo!==void 0||J.showDispatchPo!==void 0||J.showDispatchGatePass!==void 0||J.dispatchLrNo!==void 0||J.dispatchPoNo!==void 0||J.dispatchGatePass!==void 0,G=J.transportVehicle||ie.dispatchDetails||"",fe=G.includes("-")?G.split("-").map(Pe=>Pe.trim()):[];xe({gatePassNumber:ie.gatePassNumber,revision:ie.revision,gatePassType:J.gatePassType||"GATE PASS",issueNo:J.issueNo||"001",issueDate:J.issueDate||"",revNo:J.revNo||"00",revDate:J.revDate||"",consigneeName:J.consigneeName||ie.organisationName||"",consigneeAddressText:J.consigneeAddressText||ie.registeredAddress||"",modeOfTransport:J.modeOfTransport||fe[0]||"By Road",vehicleNumber:J.vehicleNumber||fe[1]||"",transportVehicle:J.transportVehicle||J.vehicleNo||ie.dispatchDetails||"",contactNo:J.contactNo||"",contactPerson:J.contactPerson||"",remarkText:J.remarkText||"",storeKeeperSignature:J.storeKeeperSignature||"",qcEnggSignature:J.qcEnggSignature||"",storeInchargeSignature:J.storeInchargeSignature||"",plantHeadSignature:J.plantHeadSignature||"",organisationName:ie.organisationName,registeredAddress:ie.registeredAddress,consigneeAddress:ie.consigneeAddress,clientGstin:ie.clientGstin||"",workOrderNo:q(ie.workOrderNo)||"NIL",orderReferenceType:U,purchaseOrderNo:J.purchaseOrderNo||(U==="po"?q(ie.workOrderNo):""),dispatchDetails:ie.dispatchDetails||"-",vehicleNo:J.vehicleNo||(!B&&ie.dispatchDetails&&ie.dispatchDetails!=="-"?ie.dispatchDetails:""),showDispatchLrNo:J.showDispatchLrNo??!1,showDispatchPo:J.showDispatchPo??!1,showDispatchGatePass:J.showDispatchGatePass??!1,dispatchLrNo:J.dispatchLrNo||"",dispatchPoNo:J.dispatchPoNo||"",dispatchGatePass:J.dispatchGatePass||"",appliedTaxType:ie.appliedTaxType||"igst",cgstRate:ie.cgstRate||"9",sgstRate:ie.sgstRate||"9",igstRate:ie.igstRate||"18"})}},[ie]),P.useEffect(()=>{Ce&&Ce.length>0&&he(Ce.map((J,q)=>({id:J.id,serialNo:J.serialNo>0?J.serialNo:q+1,partMark:J.hsnCode||"",materialDescription:J.description||"",materialSize:J.ratePerUnit&&J.ratePerUnit!=="0"?J.ratePerUnit:"-",quantity:Number(J.quantity)||0,asslyPartSl:J.unit||"",approxValue:J.amount&&J.amount!=="0"?J.amount:"-",remarks:J.remarks||""})))},[Ce]);const ne=P.useCallback(()=>{const J=W.reduce((Pe,_e)=>{const Ie=Number(String(_e.approxValue).replace(/,/g,""));return Pe+(Number.isFinite(Ie)?Ie:0)},0);let q=0,U=0,B=0;N.appliedTaxType==="cgst_sgst"?(q=J*(Number(N.cgstRate)/100),U=J*(Number(N.sgstRate)/100)):B=J*(Number(N.igstRate)/100);const G=q+U+B,fe=J+G;return{totalAmount:J,cgstAmount:q,sgstAmount:U,igstAmount:B,totalTax:G,grandTotal:fe}},[W,N.appliedTaxType,N.cgstRate,N.sgstRate,N.igstRate])(),O=(J,q="0")=>{const U=Number(String(J??"").replace(/,/g,"").trim());return Number.isFinite(U)?String(U):q},L=(J,q)=>{const U=X?.[q]||"";xe(B=>B[J]?{...B,[J]:""}:U?{...B,[J]:U}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),B))},oe=P.useCallback(()=>W.slice(0,5).filter(J=>J.partMark.trim()||J.materialDescription.trim()),[W]),ve=Mr({mutationFn:async()=>{const J=oe(),U=await(await jn("POST","/revira/api/gate-passes",{projectId:Number(e),gatePassNumber:N.gatePassNumber,revision:N.revision,organisationName:N.consigneeName||"Company Name",registeredAddress:N.consigneeAddressText||"-",consigneeAddress:`${N.consigneeName||"Company Name"}
${N.consigneeAddressText||"-"}`.trim(),clientGstin:N.clientGstin,workOrderNo:N.issueNo||"-",dispatchDetails:`${N.modeOfTransport||"By Road"} - ${N.vehicleNumber||"-"}`,appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)})).json();for(let B=0;B<J.length;B++){const G=J[B];await jn("POST",`/revira/api/gate-passes/${U.id}/items`,{serialNo:G.serialNo>0?G.serialNo:B+1,description:G.materialDescription,hsnCode:G.partMark,quantity:O(G.quantity),unit:G.asslyPartSl,ratePerUnit:O(G.materialSize,"0"),percentage:"0",amount:O(G.approxValue,"0"),remarks:G.remarks})}return U},onSuccess:J=>{Gn.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),r(`/revira/projects/${e}/gate-pass/${J.id}`),a({title:"Gate Pass saved",description:"The gate pass has been created successfully."})},onError:J=>{a({title:"Error",description:J.message||"Failed to create gate pass",variant:"destructive"})}}),ye=Mr({mutationFn:async()=>{const J=oe();await jn("PUT",`/revira/api/gate-passes/${ie?.id}`,{gatePassNumber:N.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002",revision:N.revision,organisationName:N.consigneeName||"Company Name",registeredAddress:N.consigneeAddressText||"-",consigneeAddress:`${N.consigneeName||"Company Name"}
${N.consigneeAddressText||"-"}`.trim(),clientGstin:N.clientGstin,workOrderNo:N.issueNo||"-",dispatchDetails:`${N.modeOfTransport||"By Road"} - ${N.vehicleNumber||"-"}`,appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)});let q=Ce||[];if(!q.length){const U=await fetch(`/revira/api/gate-passes/${ie?.id}/items`,{credentials:"include"});U.ok&&(q=await U.json())}for(const U of q)await jn("DELETE",`/revira/api/gate-pass-items/${U.id}`);for(let U=0;U<J.length;U++){const B=J[U];await jn("POST",`/revira/api/gate-passes/${ie?.id}/items`,{serialNo:B.serialNo>0?B.serialNo:U+1,description:B.materialDescription,hsnCode:B.partMark,quantity:O(B.quantity),unit:B.asslyPartSl,ratePerUnit:O(B.materialSize,"0"),percentage:"0",amount:O(B.approxValue,"0"),remarks:B.remarks})}},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/gate-passes"]}),Gn.invalidateQueries({queryKey:["/revira/api/gate-passes",ie?.id,"items"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass updated",description:"The gate pass has been updated successfully."})},onError:J=>{a({title:"Error",description:J.message||"Failed to update gate pass",variant:"destructive"})}}),be=Mr({mutationFn:async()=>(await jn("POST",`/revira/api/gate-passes/${ie?.id}/duplicate`,{})).json(),onSuccess:J=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),r(`/revira/projects/${e}/gate-pass/${J.id}`),a({title:"Gate Pass duplicated",description:`Created new version: ${J.revision}`})},onError:J=>{a({title:"Error",description:J.message||"Failed to duplicate gate pass",variant:"destructive"})}}),Le=Mr({mutationFn:async J=>{await jn("DELETE",`/revira/api/gate-passes/${J}`,void 0)},onSuccess:()=>{if(Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"gate-pass-versions"]}),a({title:"Gate Pass deleted",description:"The gate pass version has been deleted."}),u(!1),te&&te.length>1){const J=te.filter(q=>q.id!==ie?.id);J.length>0?r(`/revira/projects/${e}/gate-pass/${J[0].id}`):r(`/revira/projects/${e}/gate-pass`)}else r(`/revira/projects/${e}/gate-pass`)},onError:J=>{a({title:"Error",description:J.message||"Failed to delete gate pass",variant:"destructive"})}}),Oe=()=>{ie?ye.mutate():ve.mutate()},ze=()=>{const J=Math.max(...W.map(q=>q.id),0)+1;he([...W,{id:J,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},Ze=J=>{if(W.length>1){const q=W.filter(U=>U.id!==J);he(q.map((U,B)=>({...U,serialNo:B+1})))}},lt=(J,q,U)=>{he(B=>B.map(G=>G.id===J?{...G,[q]:U}:G))},ut=()=>W.reduce((J,q)=>{const U=Number(String(q.approxValue||"").replace(/,/g,"").trim());return J+(Number.isFinite(U)?U:0)},0),_t=async J=>{const q=J?.save??!0,U=J?.silent??!1,B=J?.returnDataUri??!1;try{const G=new un({orientation:"portrait",unit:"mm",format:"a4"}),fe=210,Pe=297,_e=15,Ie=fe-_e*2,qe=35,wt=30,ft=yt=>yt*.2646,En=ft(80),Cn=ft(50),mn=ft(80),gn=ft(10),bn=ft(3),Ct=ft(3),rn="#eeb7b7",Ke="#fff5f5";let Ye=qe+10,it=1;const on=yt=>yt.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),ln=yt=>on(yt),Zn=yt=>new Promise((Xe,ot)=>{const nt=new Image;nt.crossOrigin="anonymous",nt.onload=()=>{const Ge=document.createElement("canvas");Ge.width=nt.width,Ge.height=nt.height,Ge.getContext("2d")?.drawImage(nt,0,0),Xe(Ge.toDataURL("image/png"))},nt.onerror=ot,nt.src=yt});let bs=null,_r=null,ds=null;try{X?.headerUrl&&(bs=await Zn(X.headerUrl)),X?.footerUrl&&(_r=await Zn(X.footerUrl)),X?.stampUrl&&(ds=await Zn(X.stampUrl))}catch(yt){console.warn("Failed to load branding images:",yt)}const Nr=yt=>{bs&&G.addImage(bs,"PNG",0,0,fe,qe),_r&&G.addImage(_r,"PNG",0,Pe-wt,fe,wt),ds&&G.addImage(ds,"PNG",fe-Cn-En,Pe-mn-En,En,En),G.setFontSize(8),G.setTextColor(128,128,128),G.text(`Page ${yt}`,fe/2,Pe-8,{align:"center"})},Mt=yt=>Ye+yt>Pe-wt-10?(G.addPage(),it++,Nr(it),Ye=qe+10,!0):!1,vr=(yt,Xe=12)=>{Ye+=4,Mt(12),G.setFillColor("#d92134"),G.rect(_e,Ye-3.5,4,5,"F"),G.setFont("helvetica","bold"),G.setFontSize(Xe),G.setTextColor("#1e3a5f"),G.text(yt,_e+7,Ye),Ye+=5.5},fs=(yt,Xe,ot=[])=>{const nt=[38,57,38,57],Ge=5.8,gt=Ct,jt=ft(3),Tt=Lt=>Lt-3,Rt=(Lt,Ft=0)=>Tt(Lt)+jt+2.5+Ft*3.2;Mt(Ge+4),G.setFont("helvetica","normal"),G.setFontSize(8.5);let It=0;const Dt=Lt=>Lt.forEach(([Ft,qt])=>{const vn=G.splitTextToSize(Ft,nt[0]-gt*2),xr=G.splitTextToSize(qt||"-",nt[1]+nt[2]+nt[3]-gt*2),Un=Math.max(vn.length||1,xr.length||1),zt=Math.max(Ge,Un*3.2+1.2);if(Mt(zt+2),It%2===0&&(G.setFillColor(245,245,245),G.rect(_e,Tt(Ye),Ie,zt,"F")),G.setDrawColor(rn),G.rect(_e,Tt(Ye),Ie,zt,"S"),G.line(_e+nt[0],Tt(Ye),_e+nt[0],Tt(Ye)+zt),G.setFont("helvetica","bold"),vn.forEach((An,xn)=>{G.text(An,_e+gt,Rt(Ye,xn))}),Ft==="Dispatch Details"&&qt){const An=qt.split(",").map(de=>de.trim()).filter(Boolean),xn=_e+nt[0]+gt,dr=_e+nt[0]+nt[1]+nt[2]+nt[3]-gt;let Dn=xn,F=Rt(Ye,0);An.forEach((de,we)=>{const Ae=we<An.length-1?", ":"",Se=de.indexOf(" - "),At=Se>-1?de.slice(0,Se):de,Vn=Se>-1?de.slice(Se):"",$t=G.getTextWidth(At),Ot=G.getTextWidth(Vn+Ae);Dn+$t+Ot>dr&&(Dn=xn,F+=3.2),G.setFont("helvetica","bold"),G.text(At,Dn,F),Dn+=$t,G.setFont("helvetica","normal"),G.text(Vn+Ae,Dn,F),Dn+=Ot})}else G.setFont("helvetica","normal"),xr.forEach((An,xn)=>{G.text(An,_e+nt[0]+gt,Rt(Ye,xn))});Ye+=zt,It+=1});Dt(yt),Xe.forEach(Lt=>{const[Ft,qt]=Lt,vn=G.splitTextToSize(Ft?.[0]||"",nt[0]-gt*2),xr=G.splitTextToSize(Ft?.[1]||"-",nt[1]-gt*2),Un=G.splitTextToSize(qt?.[0]||"",nt[2]-gt*2),zt=G.splitTextToSize(qt?.[1]||"",nt[3]-gt*2),An=Math.max(vn.length||1,xr.length||1,Un.length||1,zt.length||1),xn=Math.max(Ge,An*3.2+1.2);Mt(xn+2),It%2===0&&(G.setFillColor(245,245,245),G.rect(_e,Tt(Ye),Ie,xn,"F")),G.setDrawColor(rn),G.rect(_e,Tt(Ye),Ie,xn,"S");let dr=_e;for(let Dn=0;Dn<3;Dn++)dr+=nt[Dn],G.line(dr,Tt(Ye),dr,Tt(Ye)+xn);G.setFont("helvetica","bold"),vn.forEach((Dn,F)=>G.text(Dn,_e+gt,Rt(Ye,F))),Un.forEach((Dn,F)=>G.text(Dn,_e+nt[0]+nt[1]+gt,Rt(Ye,F))),G.setFont("helvetica","normal"),xr.forEach((Dn,F)=>G.text(Dn,_e+nt[0]+gt,Rt(Ye,F))),zt.forEach((Dn,F)=>G.text(Dn,_e+nt[0]+nt[1]+nt[2]+gt,Rt(Ye,F))),Ye+=xn,It+=1}),Dt(ot)},hs=yt=>{const Xe=[32,75,32,51],ot=5.8,nt=Ct,Ge=ft(3),gt=Tt=>Tt-3,jt=(Tt,Rt=0)=>gt(Tt)+Ge+2.5+Rt*3.2;Mt(ot+4),G.setFont("helvetica","normal"),G.setFontSize(8.5),yt.forEach((Tt,Rt)=>{const[It,Dt]=Tt,Lt=G.splitTextToSize(It?.[0]||"",Xe[0]-nt*2),Ft=G.splitTextToSize(It?.[1]||"-",Xe[1]-nt*2),qt=G.splitTextToSize(Dt?.[0]||"",Xe[2]-nt*2),vn=G.splitTextToSize(Dt?.[1]||"",Xe[3]-nt*2),xr=Math.max(Lt.length||1,Ft.length||1,qt.length||1,vn.length||1),Un=Math.max(ot,xr*3.2+1.2);Mt(Un+2),Rt%2===0&&(G.setFillColor(245,245,245),G.rect(_e,gt(Ye),Ie,Un,"F")),G.setDrawColor(rn),G.rect(_e,gt(Ye),Ie,Un,"S");let zt=_e;for(let An=0;An<3;An++)zt+=Xe[An],G.line(zt,gt(Ye),zt,gt(Ye)+Un);G.setFont("helvetica","bold"),Lt.forEach((An,xn)=>G.text(An,_e+nt,jt(Ye,xn))),qt.forEach((An,xn)=>G.text(An,_e+Xe[0]+Xe[1]+nt,jt(Ye,xn))),G.setFont("helvetica","normal"),Ft.forEach((An,xn)=>G.text(An,_e+Xe[0]+nt,jt(Ye,xn))),vn.forEach((An,xn)=>G.text(An,_e+Xe[0]+Xe[1]+Xe[2]+nt,jt(Ye,xn))),Ye+=Un})},Ls=(yt,Xe)=>{const ot=[95,55,Ie-150],nt=5.8,Ge=Ct;Mt(nt+6),G.setFillColor(Ke),G.setDrawColor(rn),G.setLineWidth(.2),G.rect(_e,Ye-3.2,Ie,nt,"FD"),G.setFont("helvetica","bold"),G.setFontSize(8.5),G.text("Total Amount In Words",_e+Ct,Ye+.8),G.text("Details",_e+ot[0]+Ct,Ye+.8),G.text("Amount",_e+ot[0]+ot[1]+Ct,Ye+.8),G.line(_e+ot[0],Ye-3.2,_e+ot[0],Ye-3.2+nt),G.line(_e+ot[0]+ot[1],Ye-3.2,_e+ot[0]+ot[1],Ye-3.2+nt),Ye+=nt,G.setFont("helvetica","normal"),G.setFontSize(8.5);const gt=Xe.map(It=>{const Dt=G.splitTextToSize(It.detail,ot[1]-Ge*2),Lt=G.splitTextToSize(It.value,ot[2]-Ge*2),Ft=Math.max(Dt.length||1,Lt.length||1),qt=Math.max(nt,Ft*3.2+1.2);return{detailLines:Dt,valueLines:Lt,rowHeight:qt}}),jt=gt.reduce((It,Dt)=>It+Dt.rowHeight,0);Mt(jt+2),G.setDrawColor(rn),G.rect(_e,Ye-3.2,ot[0],jt,"S");const Tt=G.splitTextToSize(yt,ot[0]-Ge*3);G.setFont("helvetica","bold"),Tt.forEach((It,Dt)=>{G.text(It,_e+Ge,Ye+.1+bn+Dt*3.2)});let Rt=Ye;gt.forEach((It,Dt)=>{Dt%2===0&&(G.setFillColor(245,245,245),G.rect(_e+ot[0],Rt-3.2,ot[1]+ot[2],It.rowHeight,"F")),G.setDrawColor(rn),G.rect(_e+ot[0],Rt-3.2,ot[1]+ot[2],It.rowHeight,"S"),G.line(_e+ot[0]+ot[1],Rt-3.2,_e+ot[0]+ot[1],Rt-3.2+It.rowHeight),(Xe[Dt]?.detail||"").trim().toLowerCase()==="grand total"?G.setFont("helvetica","bold"):G.setFont("helvetica","normal"),It.detailLines.forEach((Lt,Ft)=>{G.text(Lt,_e+ot[0]+Ge,Rt+.1+bn+Ft*3.2)}),(Xe[Dt]?.detail||"").trim().toLowerCase()==="grand total"?G.setFont("helvetica","bold"):G.setFont("helvetica","normal"),It.valueLines.forEach((Lt,Ft)=>{G.text(Lt,_e+ot[0]+ot[1]+Ge,Rt+.1+bn+Ft*3.2)}),Rt+=It.rowHeight}),Ye=Rt},Sr="NON-RETURNABLE GATE PASS",Ir=N.issueDate?new Date(N.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),Pr=N.revDate?new Date(N.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");Nr(it),G.setFontSize(16),G.setFont("helvetica","bold"),G.setTextColor("#da2032"),G.text(Sr,fe/2,Ye,{align:"center"}),Ye+=8,vr("Gate Pass Details",11),fs([["Doc. No",N.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-GT-002"],["Date",Ir||"-"],["CONSIGNEE NAME",N.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",N.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",N.modeOfTransport||"By Road"],["Vehicle No.",N.vehicleNumber||"MH 40 CX 2839"],["Contact No.",N.contactNo||"7972800638"],["Contact person",N.contactPerson||"SAILESH"]],[]),Ye+=gn;const Di=["SR. NO.","PARTMARK","MATERIAL DISCRIPTION","MATERIAL SIZE","QUANTITY","ASSLY PART SL","APPROX. VALUE"],Ds=[14,25,40,29,20,24,28],ps=W.filter(yt=>yt.partMark.trim()||yt.materialDescription.trim()).map(yt=>[yt.serialNo?String(yt.serialNo):"",yt.partMark,yt.materialDescription,yt.materialSize,String(yt.quantity),yt.asslyPartSl,yt.approxValue]);Mt(15),G.setFillColor(Ke),G.setDrawColor(rn),G.setLineWidth(.2),G.rect(_e,Ye-3,Ie,5.8,"FD"),G.setFont("helvetica","bold"),G.setFontSize(8);let Hr=_e;Di.forEach((yt,Xe)=>{G.line(Hr,Ye-3,Hr,Ye+2.8),G.text(yt,Hr+Ct,Ye+.8),Hr+=Ds[Xe]}),G.line(Hr,Ye-3,Hr,Ye+2.8),Ye+=5.8,G.setFont("helvetica","normal"),ps.forEach((yt,Xe)=>{const ot=yt.map((jt,Tt)=>G.splitTextToSize(jt,Ds[Tt]-Ct*2)),nt=Math.max(...ot.map(jt=>jt.length)),Ge=Math.max(5.8,nt*3.2+1.2);Mt(Ge+2),Xe%2===0&&(G.setFillColor(245,245,245),G.rect(_e,Ye-3,Ie,Ge,"F")),G.setDrawColor(rn),G.rect(_e,Ye-3,Ie,Ge,"S");let gt=_e;ot.forEach((jt,Tt)=>{G.line(gt,Ye-3,gt,Ye-3+Ge),Tt===0?G.setFont("helvetica","bold"):G.setFont("helvetica","normal"),jt.forEach((Rt,It)=>{G.text(Rt,gt+Ct,Ye+.1+bn+It*3.2)}),gt+=Ds[Tt]}),G.line(gt,Ye-3,gt,Ye-3+Ge),Ye+=Ge});const hr=W.reduce((yt,Xe)=>yt+(Number(Xe.quantity)||0),0),Qs=ut(),Ri=["","","TOTAL","",String(hr),"",Qs.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((yt,Xe)=>G.splitTextToSize(yt,Ds[Xe]-Ct*2)),ws=Math.max(...Ri.map(yt=>yt.length)),Is=Math.max(5.8,ws*3.2+1.2);Mt(Is+2),G.setFillColor(245,245,245),G.rect(_e,Ye-3,Ie,Is,"F"),G.setDrawColor(rn),G.rect(_e,Ye-3,Ie,Is,"S");let kr=_e;Ri.forEach((yt,Xe)=>{G.line(kr,Ye-3,kr,Ye-3+Is),G.setFont("helvetica",Xe===2||Xe===4||Xe===5||Xe===6?"bold":"normal"),yt.forEach((ot,nt)=>{G.text(ot,kr+Ct,Ye+.1+bn+nt*3.2)}),kr+=Ds[Xe]}),G.line(kr,Ye-3,kr,Ye-3+Is),Ye+=Is,Ye+=gn,vr("Remark",11);const Ns=18;Mt(Ns+5),G.setDrawColor(rn),G.rect(_e,Ye-3,Ie,Ns,"S"),G.setFont("helvetica","normal"),G.setFontSize(9),G.splitTextToSize(N.remarkText||"-",Ie-2*Ct).forEach((yt,Xe)=>{G.text(yt,_e+Ct,Ye+.1+bn+Xe*3.2)}),Ye+=Ns+gn,vr("Signature",11);const Ga=[{label:"Store Keeper",data:N.storeKeeperSignature},{label:"Qc Engg.",data:N.qcEnggSignature},{label:"Store Incharge",data:N.storeInchargeSignature},{label:"Plant Head",data:N.plantHeadSignature}],wr=3,Ai=22,is=(Ie-wr*3)/4;Mt(Ai+12),Ga.forEach((yt,Xe)=>{const ot=_e+Xe*(is+wr);if(G.rect(ot,Ye-3,is,Ai,"S"),yt.data)try{const nt=G.getImageProperties(yt.data),Ge=nt.width||1,gt=nt.height||1,jt=is-2,Tt=Ai-7,Rt=Ge/gt,It=jt/Tt;let Dt=jt,Lt=Tt;Rt>It?Lt=jt/Rt:Dt=Tt*Rt;const Ft=ot+1+(jt-Dt)/2,qt=Ye-2.2+(Tt-Lt)/2;G.addImage(yt.data,"PNG",Ft,qt,Dt,Lt)}catch{}G.setFont("helvetica","bold"),G.setFontSize(8),G.text(yt.label,ot+is/2,Ye+Ai-1.2,{align:"center"})}),Ye+=Ai;const Xr=new Date,sn=`${String(Xr.getDate()).padStart(2,"0")}${String(Xr.getMonth()+1).padStart(2,"0")}${Xr.getFullYear()}`,pr=(X?.entityName||"RNS").split(" ").map(yt=>yt[0]).join(""),Zt=`GATE_PASS_${sn}_${pr}_${N.revision}.pdf`,On=B?G.output("datauristring",{filename:Zt}):void 0;return q&&G.save(Zt),U||a({title:q?"PDF exported":"PDF generated",description:q?`Gate Pass saved as ${Zt}`:"Gate pass PDF is ready."}),{fileName:Zt,dataUri:On}}catch(G){return console.error("PDF export error:",G),U||a({title:"Export failed",description:"Failed to export gate pass PDF. Please try again.",variant:"destructive"}),null}},ue=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,xt=()=>{if(!ie?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}k({to:Q?.emailAddress||"",subject:`Gate Pass ${N.gatePassNumber||""} ${N.revision||""}`.trim(),message:`Please find the attached file for details

${ue}`}),f(!0)},dn=async()=>{if(!ie?.id){a({title:"Save required",description:"Please save gate pass first, then send via email.",variant:"destructive"});return}const J=S.to.split(/[,\s;]+/).map(U=>U.trim()).filter(Boolean);if(J.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const q=await _t({save:!1,silent:!0,returnDataUri:!0});if(!q?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for email.",variant:"destructive"});return}try{const U=q.dataUri.split(",")[1]||"",G=await(await jn("POST",`/revira/api/gate-passes/${ie.id}/send-email`,{to:J,subject:S.subject.trim(),message:S.message.trim(),fileName:q.fileName,pdfBase64:U})).json(),fe=Array.isArray(G?.accepted)?G.accepted:[],Pe=fe.length>0?fe.join(", "):J.join(", ");a({title:"Email queued",description:`SMTP accepted: ${Pe}.`}),f(!1)}catch(U){a({title:"Send failed",description:U?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},Jt=()=>{if(!ie?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const J=(Q?.mobileNumber||"").replace(/\D/g,""),q=J.length===10?`91${J}`:J;I({mobile:q,message:`Please find the attached file for details

${ue}`}),j(!0)},le=async()=>{if(!ie?.id){a({title:"Save required",description:"Please save gate pass first, then send on WhatsApp.",variant:"destructive"});return}const J=A.mobile.split(/[,\s;]+/).map(U=>U.replace(/\D/g,"")).filter(Boolean);if(J.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!A.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const q=await _t({save:!1,silent:!0,returnDataUri:!0});if(!q?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate gate pass PDF for WhatsApp send.",variant:"destructive"});return}try{const U=q.dataUri.split(",")[1]||"";await jn("POST",`/revira/api/gate-passes/${ie.id}/send-whatsapp`,{to:J,message:A.message.trim(),fileName:q.fileName,pdfBase64:U}),a({title:"WhatsApp sent",description:`Gate pass sent to ${J.join(", ")}.`}),j(!1)}catch(U){a({title:"Send failed",description:U?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!E||!Q||!z?s.jsx(Ks,{user:z,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(Ks,{user:z,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:E.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(ru,{className:"h-4 w-4"}),E.location]})]})]}),s.jsxs(Me,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/revira/projects/${e}/gate-pass`),"data-testid":"button-new-gate-pass",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),"New Gate Pass"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:ie?.revision||N.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(Wm,{className:"h-4 w-4"})}),ie&&s.jsx(Me,{variant:"outline",size:"icon",onClick:()=>be.mutate(),disabled:be.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-gate-pass",children:s.jsx($d,{className:"w-4 h-4"})}),s.jsxs(Me,{onClick:_t,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(Me,{variant:"outline",size:"icon",onClick:xt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-gate-pass",title:"Send gate pass by email",children:s.jsx(hu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"outline",size:"icon",onClick:Jt,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-gate-pass",title:"Send gate pass on WhatsApp",children:s.jsx(Gm,{className:"w-4 h-4"})}),s.jsxs(Me,{variant:"outline",onClick:Oe,disabled:ve.isPending||ye.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-gate-pass",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),ve.isPending||ye.isPending?"Saving...":"Save Changes"]}),ie&&te&&te.length>1&&s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:()=>$({open:!0,title:"Delete Gate Pass?",description:`Are you sure you want to delete this gate pass (${ie.revision})?`,onConfirm:()=>Le.mutate(ie.id)}),"data-testid":"button-delete-gate-pass",children:s.jsx(lr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsxs(ss,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Ta,{className:"w-5 h-5"}),"GATE PASS DETAILS"]})}),s.jsxs(Tn,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),s.jsx(Je,{value:N.gatePassNumber,onChange:J=>xe({...N,gatePassNumber:J.target.value}),"data-testid":"input-doc-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(Je,{type:"date",value:N.issueDate,onChange:J=>xe({...N,issueDate:J.target.value}),"data-testid":"input-date"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),s.jsx(Je,{value:N.consigneeName,onChange:J=>xe({...N,consigneeName:J.target.value}),"data-testid":"input-consignee-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),s.jsx(Or,{value:N.consigneeAddressText,onChange:J=>xe({...N,consigneeAddressText:J.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),s.jsx(Je,{value:N.modeOfTransport,onChange:J=>xe({...N,modeOfTransport:J.target.value}),"data-testid":"input-mode-of-transport"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(Je,{value:N.vehicleNumber,onChange:J=>xe({...N,vehicleNumber:J.target.value}),"data-testid":"input-vehicle-number"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),s.jsx(Je,{value:N.contactNo,onChange:J=>xe({...N,contactNo:J.target.value}),"data-testid":"input-contact-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),s.jsx(Je,{value:N.contactPerson,onChange:J=>xe({...N,contactPerson:J.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"GATE PASS ITEMS"})}),s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"PARTMARK"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"ASSLY PART SL"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsxs("tbody",{children:[W.map(J=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.serialNo===0?"":J.serialNo,onChange:q=>lt(J.id,"serialNo",parseInt(q.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.partMark,onChange:q=>lt(J.id,"partMark",q.target.value),"data-testid":`input-partmark-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.materialDescription,onChange:q=>lt(J.id,"materialDescription",q.target.value),"data-testid":`input-material-description-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.materialSize,onChange:q=>lt(J.id,"materialSize",q.target.value),"data-testid":`input-material-size-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:J.quantity,onChange:q=>lt(J.id,"quantity",parseFloat(q.target.value)||0),"data-testid":`input-qty-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.asslyPartSl,onChange:q=>lt(J.id,"asslyPartSl",q.target.value),"data-testid":`input-assly-part-sl-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:J.approxValue,onChange:q=>lt(J.id,"approxValue",q.target.value),"data-testid":`input-approx-value-${J.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>Ze(J.id),disabled:W.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${J.id}`,children:s.jsx(lr,{className:"h-4 w-4"})})})]},J.id)),s.jsxs("tr",{className:"border-t bg-slate-50",children:[s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:W.reduce((J,q)=>J+(Number(q.quantity)||0),0)}),s.jsx("td",{className:"p-3 font-semibold"}),s.jsx("td",{className:"p-3 font-semibold",children:ut().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3"})]})]})]})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Q7,{label:"Add Row",onClick:ze,testId:"button-add-item"})})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"REMARK"})}),s.jsx(Tn,{className:"p-6",children:s.jsx(Or,{value:N.remarkText,onChange:J=>xe({...N,remarkText:J.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),s.jsx(Tn,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>L("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:N.storeKeeperSignature?s.jsx("img",{src:N.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.storeKeeperSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>L("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:N.qcEnggSignature?s.jsx("img",{src:N.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),s.jsx("span",{className:"text-xs text-slate-500",children:N.qcEnggSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>L("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:N.storeInchargeSignature?s.jsx("img",{src:N.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.storeInchargeSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>L("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:N.plantHeadSignature?s.jsx("img",{src:N.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),s.jsx(gi,{open:o,onOpenChange:u,children:s.jsxs(ri,{className:"max-w-md",children:[s.jsx(si,{children:s.jsx(ii,{children:"Gate Pass Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:te?.map(J=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${J.id===ie?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/gate-pass/${J.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:J.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(J.createdAt).toLocaleDateString()})]}),te&&te.length>1&&s.jsx(Me,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:q=>{q.stopPropagation(),$({open:!0,title:"Delete Gate Pass Version?",description:`Are you sure you want to delete version ${J.revision}?`,onConfirm:()=>Le.mutate(J.id)})},"data-testid":`button-delete-version-${J.id}`,children:s.jsx(lr,{className:"w-4 h-4"})})]})},J.id))})]})}),s.jsx(gi,{open:c,onOpenChange:f,children:s.jsxs(ri,{className:"sm:max-w-xl",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Gate Pass by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(Je,{value:S.to,onChange:J=>k(q=>({...q,to:J.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(Je,{value:S.subject,onChange:J=>k(q=>({...q,subject:J.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Or,{value:S.message,onChange:J=>k(q=>({...q,message:J.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-gate-pass"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-gate-pass",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:dn,disabled:p,"data-testid":"button-send-email-submit-gate-pass",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(gi,{open:y,onOpenChange:j,children:s.jsxs(ri,{className:"sm:max-w-lg",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Gate Pass on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(Je,{value:A.mobile,onChange:J=>I(q=>({...q,mobile:J.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-gate-pass"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Or,{value:A.message,onChange:J=>I(q=>({...q,message:J.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-gate-pass"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:x,"data-testid":"button-send-whatsapp-cancel-gate-pass",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:le,disabled:x,"data-testid":"button-send-whatsapp-submit-gate-pass",children:x?"Sending...":"Submit"})]})]})]})}),s.jsx(Hh,{open:R.open,onOpenChange:J=>{J||$({open:!1,title:"",description:"",onConfirm:null})},title:R.title,description:R.description,onConfirm:()=>{R.onConfirm?.(),$({open:!1,title:"",description:"",onConfirm:null})},confirmLabel:"Delete",confirmTestId:"confirm-delete-gate-pass-action",cancelTestId:"cancel-delete-gate-pass-action"})]})}const Z7=({label:t,onClick:e,testId:n})=>s.jsxs("div",{className:"relative flex w-full items-center justify-center",children:[s.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-x-0 top-1/2 -translate-y-1/2 border-t border-dotted border-[#d92134]"}),s.jsxs(Me,{type:"button",onClick:e,className:"relative z-10 h-10 min-w-[220px] rounded-full border border-[#d92134]/35 bg-white px-8 text-sm font-semibold text-[#d92134] shadow-none transition hover:bg-[#fff5f6]","data-testid":n,children:["+ ",t]})]});function M5(){const t=ed(),e=t.id,n=t.deliveryChallanId,[,r]=Va(),{toast:a}=Ha(),[o,u]=P.useState(!1),[c,f]=P.useState(!1),[p,m]=P.useState(!1),[y,j]=P.useState(!1),[x,D]=P.useState(!1),[S,k]=P.useState({to:"",subject:"",message:""}),[A,I]=P.useState({mobile:"",message:""}),[R,$]=P.useState({open:!1,title:"",description:"",onConfirm:null}),[N,xe]=P.useState({gatePassNumber:"",revision:"R-001",gatePassType:"Delivery Challan",issueNo:"001",issueDate:"",revNo:"00",revDate:"",consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",remarkText:"",storeKeeperSignature:"",qcEnggSignature:"",storeInchargeSignature:"",plantHeadSignature:"",organisationName:"",registeredAddress:"",consigneeAddress:"",clientGstin:"",workOrderNo:"NIL",orderReferenceType:"wo",purchaseOrderNo:"",dispatchDetails:"-",vehicleNo:"",showDispatchLrNo:!1,showDispatchPo:!1,showDispatchGatePass:!1,dispatchLrNo:"",dispatchPoNo:"",dispatchGatePass:"",appliedTaxType:"igst",cgstRate:"9",sgstRate:"9",igstRate:"18"}),re=q=>{const U=q.split(/\s+/).map(B=>B.trim()).filter(Boolean);return U.length?U.map(B=>B[0]).join("").toUpperCase():"PROJECT"},K=q=>{const U=String(q.getDate()).padStart(2,"0"),B=String(q.getMonth()+1).padStart(2,"0"),G=String(q.getFullYear()).slice(-2);return`${U}-${B}-${G}`},[W,he]=P.useState([{id:1,serialNo:1,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"20",quantity:1,asslyPartSl:"5/8",approxValue:"-",remarks:""},{id:2,serialNo:2,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"30",quantity:1,asslyPartSl:"6/8",approxValue:"-",remarks:""},{id:3,serialNo:3,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"7/8",approxValue:"-",remarks:""},{id:4,serialNo:4,partMark:"PRA-BS2-193",materialDescription:"BEAM",materialSize:"10",quantity:1,asslyPartSl:"8/7",approxValue:"-",remarks:""},{id:5,serialNo:5,partMark:"PRA-BS2-B168",materialDescription:"BEAM",materialSize:"-",quantity:1,asslyPartSl:"1/1",approxValue:"-",remarks:""}]),{data:z}=Ra(),{data:E}=Bn({queryKey:["/revira/api/projects",e],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch project");return q.json()},enabled:!!e}),{data:Q}=Bn({queryKey:["/revira/api/clients",E?.clientId],queryFn:async()=>{const q=await fetch(`/revira/api/clients/${E?.clientId}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch client");return q.json()},enabled:!!E?.clientId}),{data:X}=Bn({queryKey:["/revira/api/branding"],enabled:!!z}),{data:ie}=Bn({queryKey:["/revira/api/delivery-challans",n],queryFn:async()=>{if(n){const U=await fetch(`/revira/api/delivery-challans/${n}`,{credentials:"include"});if(!U.ok)throw new Error("Failed to fetch Delivery Challan");return U.json()}const q=await fetch(`/revira/api/projects/${e}/delivery-challan`,{credentials:"include"});if(!q.ok){if(q.status===404)return null;throw new Error("Failed to fetch Delivery Challan")}return q.json()},enabled:!!e}),{data:Ce}=Bn({queryKey:["/revira/api/delivery-challans",ie?.id,"items"],queryFn:async()=>{const q=await fetch(`/revira/api/delivery-challans/${ie?.id}/items`,{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch items");return q.json()},enabled:!!ie?.id}),{data:te}=Bn({queryKey:["/revira/api/projects",e,"delivery-challan-versions"],queryFn:async()=>{const q=await fetch(`/revira/api/projects/${e}/delivery-challan-versions`,{credentials:"include"});return q.ok?q.json():[]},enabled:!!e}),ae=q=>{if(!q)return{};try{const U=JSON.parse(q);return U&&typeof U=="object"?U:{}}catch{return{}}};P.useCallback(()=>N.orderReferenceType==="po"?N.purchaseOrderNo||"-":N.workOrderNo||"-",[N.orderReferenceType,N.workOrderNo,N.purchaseOrderNo]),P.useCallback(()=>{const q=[];return N.vehicleNo.trim()&&q.push(`Vehicle No.: ${N.vehicleNo.trim()}`),N.showDispatchLrNo&&q.push(`L.R. No.: ${N.dispatchLrNo||"-"}`),N.showDispatchPo&&q.push(`P.O.: ${N.dispatchPoNo||"-"}`),N.showDispatchGatePass&&q.push(`Delivery Challan: ${N.dispatchGatePass||"-"}`),q.length?q.join(" | "):"-"},[N.vehicleNo,N.showDispatchLrNo,N.dispatchLrNo,N.showDispatchPo,N.dispatchPoNo,N.showDispatchGatePass,N.dispatchGatePass]);const Ne=P.useCallback(()=>{const q={gatePassType:N.gatePassType,issueNo:N.issueNo,issueDate:N.issueDate,revNo:N.revNo,revDate:N.revDate,consigneeName:N.consigneeName,consigneeAddressText:N.consigneeAddressText,modeOfTransport:N.modeOfTransport,vehicleNumber:N.vehicleNumber,transportVehicle:N.transportVehicle,contactNo:N.contactNo,contactPerson:N.contactPerson,remarkText:N.remarkText,storeKeeperSignature:N.storeKeeperSignature,qcEnggSignature:N.qcEnggSignature,storeInchargeSignature:N.storeInchargeSignature,plantHeadSignature:N.plantHeadSignature,orderReferenceType:N.orderReferenceType,showWorkOrderNo:N.orderReferenceType==="wo",showPurchaseOrderNo:N.orderReferenceType==="po",purchaseOrderNo:N.purchaseOrderNo,vehicleNo:N.vehicleNo,showDispatchLrNo:N.showDispatchLrNo,showDispatchPo:N.showDispatchPo,showDispatchGatePass:N.showDispatchGatePass,dispatchLrNo:N.dispatchLrNo,dispatchPoNo:N.dispatchPoNo,dispatchGatePass:N.dispatchGatePass};return JSON.stringify(q)},[N]);P.useEffect(()=>{if(E&&Q&&!ie){const q=new Date,U=re(E.projectName),B=K(q);xe(G=>({...G,gatePassNumber:`RNS/${U}/${B}/RNS-DC-002`,issueDate:q.toISOString().split("T")[0],revDate:q.toISOString().split("T")[0],consigneeName:"Company Name",consigneeAddressText:"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203",modeOfTransport:"By Road",vehicleNumber:"MH 40 CX 2839",transportVehicle:"By Road - MH 40 CX 2839",contactNo:"7972800638",contactPerson:"SAILESH",organisationName:Q.name,registeredAddress:Q.location,consigneeAddress:`${Q.name}
${Q.location}`,clientGstin:Q.gstNo||""}))}},[E,Q,ie]),P.useEffect(()=>{if(ie){const q=ae(ie.contentSections),U=_e=>(_e||"").replace(/^W\.O\.\s*No\.\s*:\s*/i,"").replace(/^P\.O\.\s*No\.\s*:\s*/i,"").trim(),B=q.orderReferenceType||(q.showPurchaseOrderNo?"po":"wo"),G=q.vehicleNo!==void 0||q.showDispatchLrNo!==void 0||q.showDispatchPo!==void 0||q.showDispatchGatePass!==void 0||q.dispatchLrNo!==void 0||q.dispatchPoNo!==void 0||q.dispatchGatePass!==void 0,fe=q.transportVehicle||ie.dispatchDetails||"",Pe=fe.includes("-")?fe.split("-").map(_e=>_e.trim()):[];xe({gatePassNumber:ie.deliveryChallanNumber,revision:ie.revision,gatePassType:q.gatePassType||"Delivery Challan",issueNo:q.issueNo||"001",issueDate:q.issueDate||"",revNo:q.revNo||"00",revDate:q.revDate||"",consigneeName:q.consigneeName||ie.organisationName||"",consigneeAddressText:q.consigneeAddressText||ie.registeredAddress||"",modeOfTransport:q.modeOfTransport||Pe[0]||"By Road",vehicleNumber:q.vehicleNumber||Pe[1]||"",transportVehicle:q.transportVehicle||q.vehicleNo||ie.dispatchDetails||"",contactNo:q.contactNo||"",contactPerson:q.contactPerson||"",remarkText:q.remarkText||"",storeKeeperSignature:q.storeKeeperSignature||"",qcEnggSignature:q.qcEnggSignature||"",storeInchargeSignature:q.storeInchargeSignature||"",plantHeadSignature:q.plantHeadSignature||"",organisationName:ie.organisationName,registeredAddress:ie.registeredAddress,consigneeAddress:ie.consigneeAddress,clientGstin:ie.clientGstin||"",workOrderNo:U(ie.workOrderNo)||"NIL",orderReferenceType:B,purchaseOrderNo:q.purchaseOrderNo||(B==="po"?U(ie.workOrderNo):""),dispatchDetails:ie.dispatchDetails||"-",vehicleNo:q.vehicleNo||(!G&&ie.dispatchDetails&&ie.dispatchDetails!=="-"?ie.dispatchDetails:""),showDispatchLrNo:q.showDispatchLrNo??!1,showDispatchPo:q.showDispatchPo??!1,showDispatchGatePass:q.showDispatchGatePass??!1,dispatchLrNo:q.dispatchLrNo||"",dispatchPoNo:q.dispatchPoNo||"",dispatchGatePass:q.dispatchGatePass||"",appliedTaxType:ie.appliedTaxType||"igst",cgstRate:ie.cgstRate||"9",sgstRate:ie.sgstRate||"9",igstRate:ie.igstRate||"18"})}},[ie]),P.useEffect(()=>{Ce&&Ce.length>0&&he(Ce.map((q,U)=>({id:q.id,serialNo:q.serialNo>0?q.serialNo:U+1,partMark:q.hsnCode||"",materialDescription:q.description||"",materialSize:q.ratePerUnit&&q.ratePerUnit!=="0"?q.ratePerUnit:"-",quantity:Number(q.quantity)||0,asslyPartSl:q.unit||"",approxValue:q.amount&&q.amount!=="0"?q.amount:"-",remarks:q.remarks||""})))},[Ce]);const ne=P.useCallback(()=>{const q=W.reduce((_e,Ie)=>{const qe=Number(String(Ie.approxValue).replace(/,/g,""));return _e+(Number.isFinite(qe)?qe:0)},0);let U=0,B=0,G=0;N.appliedTaxType==="cgst_sgst"?(U=q*(Number(N.cgstRate)/100),B=q*(Number(N.sgstRate)/100)):G=q*(Number(N.igstRate)/100);const fe=U+B+G,Pe=q+fe;return{totalAmount:q,cgstAmount:U,sgstAmount:B,igstAmount:G,totalTax:fe,grandTotal:Pe}},[W,N.appliedTaxType,N.cgstRate,N.sgstRate,N.igstRate])(),O=(q,U="0")=>{const B=Number(String(q??"").replace(/,/g,"").trim());return Number.isFinite(B)?String(B):U},L=(q,U)=>{const B=q.materialDescription.trim()||q.partMark.trim()||"ITEM",G=String(q.materialSize??"").replace(/,/g,"").trim(),fe=/^-?\d+(\.\d+)?$/.test(G);return{serialNo:q.serialNo>0?q.serialNo:U+1,description:B,hsnCode:q.partMark.trim()||void 0,quantity:O(q.quantity),unit:q.asslyPartSl.trim()||"NOS",ratePerUnit:fe?O(G,"0"):"0",percentage:"0",amount:O(q.approxValue,"0"),remarks:q.remarks}},oe=(q,U)=>{const B=X?.[U]||"";xe(G=>G[q]?{...G,[q]:""}:B?{...G,[q]:B}:(a({title:"No branding signature",description:"Upload this signature image in Branding page first.",variant:"destructive"}),G))},ve=P.useCallback(()=>{const q=U=>{const B=String(U??"").trim();return B!==""&&B!=="-"};return W.slice(0,5).filter(U=>q(U.materialDescription)||q(U.materialSize)||q(U.partMark)||q(U.asslyPartSl)||q(U.approxValue)||Number(U.quantity)>0)},[W]),ye=Mr({mutationFn:async()=>{const q=ve(),B=await(await jn("POST","/revira/api/delivery-challans",{projectId:Number(e),deliveryChallanNumber:N.gatePassNumber,revision:N.revision,organisationName:N.consigneeName||"Company Name",registeredAddress:N.consigneeAddressText||"-",consigneeAddress:`${N.consigneeName||"Company Name"}
${N.consigneeAddressText||"-"}`.trim(),clientGstin:N.clientGstin,workOrderNo:N.issueNo||"-",dispatchDetails:`${N.modeOfTransport||"By Road"} - ${N.vehicleNumber||"-"}`,appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)})).json();for(let G=0;G<q.length;G++){const fe=q[G];await jn("POST",`/revira/api/delivery-challans/${B.id}/items`,L(fe,G))}return B},onSuccess:q=>{Gn.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),r(`/revira/projects/${e}/delivery-challan/${q.id}`),a({title:"Delivery Challan saved",description:"The delivery challan has been created successfully."})},onError:q=>{a({title:"Error",description:q.message||"Failed to create delivery challan",variant:"destructive"})}}),be=Mr({mutationFn:async()=>{const q=ve();await jn("PUT",`/revira/api/delivery-challans/${ie?.id}`,{deliveryChallanNumber:N.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002",revision:N.revision,organisationName:N.consigneeName||"Company Name",registeredAddress:N.consigneeAddressText||"-",consigneeAddress:`${N.consigneeName||"Company Name"}
${N.consigneeAddressText||"-"}`.trim(),clientGstin:N.clientGstin,workOrderNo:N.issueNo||"-",dispatchDetails:`${N.modeOfTransport||"By Road"} - ${N.vehicleNumber||"-"}`,appliedTaxType:N.appliedTaxType,cgstRate:N.cgstRate,sgstRate:N.sgstRate,igstRate:N.igstRate,contentSections:Ne(),totalAmount:String(ne.totalAmount),totalTax:String(ne.totalTax),grandTotal:String(ne.grandTotal)});let U=Ce||[];if(!U.length){const B=await fetch(`/revira/api/delivery-challans/${ie?.id}/items`,{credentials:"include"});B.ok&&(U=await B.json())}for(const B of U)await jn("DELETE",`/revira/api/delivery-challan-items/${B.id}`);for(let B=0;B<q.length;B++){const G=q[B];await jn("POST",`/revira/api/delivery-challans/${ie?.id}/items`,L(G,B))}},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/delivery-challans"]}),Gn.invalidateQueries({queryKey:["/revira/api/delivery-challans",ie?.id,"items"]}),Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan updated",description:"The delivery challan has been updated successfully."})},onError:q=>{a({title:"Error",description:q.message||"Failed to update delivery challan",variant:"destructive"})}}),Le=Mr({mutationFn:async()=>(await jn("POST",`/revira/api/delivery-challans/${ie?.id}/duplicate`,{})).json(),onSuccess:q=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),r(`/revira/projects/${e}/delivery-challan/${q.id}`),a({title:"Delivery Challan duplicated",description:`Created new version: ${q.revision}`})},onError:q=>{a({title:"Error",description:q.message||"Failed to duplicate delivery challan",variant:"destructive"})}}),Oe=Mr({mutationFn:async q=>{await jn("DELETE",`/revira/api/delivery-challans/${q}`,void 0)},onSuccess:()=>{if(Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"delivery-challan-versions"]}),a({title:"Delivery Challan deleted",description:"The delivery challan version has been deleted."}),u(!1),te&&te.length>1){const q=te.filter(U=>U.id!==ie?.id);q.length>0?r(`/revira/projects/${e}/delivery-challan/${q[0].id}`):r(`/revira/projects/${e}/delivery-challan`)}else r(`/revira/projects/${e}/delivery-challan`)},onError:q=>{a({title:"Error",description:q.message||"Failed to delete delivery challan",variant:"destructive"})}}),ze=()=>{ie?be.mutate():ye.mutate()},Ze=()=>{const q=Math.max(...W.map(U=>U.id),0)+1;he([...W,{id:q,serialNo:W.length+1,partMark:"",materialDescription:"",materialSize:"-",quantity:0,asslyPartSl:"",approxValue:"-",remarks:""}])},lt=q=>{if(W.length>1){const U=W.filter(B=>B.id!==q);he(U.map((B,G)=>({...B,serialNo:G+1})))}},ut=(q,U,B)=>{he(G=>G.map(fe=>fe.id===q?{...fe,[U]:B}:fe))},_t=()=>W.reduce((q,U)=>{const B=Number(String(U.approxValue||"").replace(/,/g,"").trim());return q+(Number.isFinite(B)?B:0)},0),ue=async q=>{const U=q?.save??!0,B=q?.silent??!1,G=q?.returnDataUri??!1;try{const fe=new un({orientation:"portrait",unit:"mm",format:"a4"}),Pe=210,_e=297,Ie=15,qe=Pe-Ie*2,wt=35,ft=30,En=Xe=>Xe*.2646,Cn=En(80),mn=En(50),gn=En(80),bn=En(10),Ct=En(3),rn=En(3),Ke="#eeb7b7",Ye="#fff5f5";let it=wt+10,on=1;const ln=Xe=>Xe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),Zn=Xe=>ln(Xe),bs=Xe=>new Promise((ot,nt)=>{const Ge=new Image;Ge.crossOrigin="anonymous",Ge.onload=()=>{const gt=document.createElement("canvas");gt.width=Ge.width,gt.height=Ge.height,gt.getContext("2d")?.drawImage(Ge,0,0),ot(gt.toDataURL("image/png"))},Ge.onerror=nt,Ge.src=Xe});let _r=null,ds=null,Nr=null;try{X?.headerUrl&&(_r=await bs(X.headerUrl)),X?.footerUrl&&(ds=await bs(X.footerUrl)),X?.stampUrl&&(Nr=await bs(X.stampUrl))}catch(Xe){console.warn("Failed to load branding images:",Xe)}const Mt=Xe=>{_r&&fe.addImage(_r,"PNG",0,0,Pe,wt),ds&&fe.addImage(ds,"PNG",0,_e-ft,Pe,ft),Nr&&fe.addImage(Nr,"PNG",Pe-mn-Cn,_e-gn-Cn,Cn,Cn),fe.setFontSize(8),fe.setTextColor(128,128,128),fe.text(`Page ${Xe}`,Pe/2,_e-8,{align:"center"})},vr=Xe=>it+Xe>_e-ft-10?(fe.addPage(),on++,Mt(on),it=wt+10,!0):!1,fs=(Xe,ot=12)=>{it+=4,vr(12),fe.setFillColor("#d92134"),fe.rect(Ie,it-3.5,4,5,"F"),fe.setFont("helvetica","bold"),fe.setFontSize(ot),fe.setTextColor("#1e3a5f"),fe.text(Xe,Ie+7,it),it+=5.5},hs=(Xe,ot,nt=[])=>{const Ge=[38,57,38,57],gt=5.8,jt=rn,Tt=En(3),Rt=Ft=>Ft-3,It=(Ft,qt=0)=>Rt(Ft)+Tt+2.5+qt*3.2;vr(gt+4),fe.setFont("helvetica","normal"),fe.setFontSize(8.5);let Dt=0;const Lt=Ft=>Ft.forEach(([qt,vn])=>{const xr=fe.splitTextToSize(qt,Ge[0]-jt*2),Un=fe.splitTextToSize(vn||"-",Ge[1]+Ge[2]+Ge[3]-jt*2),zt=Math.max(xr.length||1,Un.length||1),An=Math.max(gt,zt*3.2+1.2);if(vr(An+2),Dt%2===0&&(fe.setFillColor(245,245,245),fe.rect(Ie,Rt(it),qe,An,"F")),fe.setDrawColor(Ke),fe.rect(Ie,Rt(it),qe,An,"S"),fe.line(Ie+Ge[0],Rt(it),Ie+Ge[0],Rt(it)+An),fe.setFont("helvetica","bold"),xr.forEach((xn,dr)=>{fe.text(xn,Ie+jt,It(it,dr))}),qt==="Dispatch Details"&&vn){const xn=vn.split(",").map(we=>we.trim()).filter(Boolean),dr=Ie+Ge[0]+jt,Dn=Ie+Ge[0]+Ge[1]+Ge[2]+Ge[3]-jt;let F=dr,de=It(it,0);xn.forEach((we,Ae)=>{const Se=Ae<xn.length-1?", ":"",At=we.indexOf(" - "),Vn=At>-1?we.slice(0,At):we,$t=At>-1?we.slice(At):"",Ot=fe.getTextWidth(Vn),as=fe.getTextWidth($t+Se);F+Ot+as>Dn&&(F=dr,de+=3.2),fe.setFont("helvetica","bold"),fe.text(Vn,F,de),F+=Ot,fe.setFont("helvetica","normal"),fe.text($t+Se,F,de),F+=as})}else fe.setFont("helvetica","normal"),Un.forEach((xn,dr)=>{fe.text(xn,Ie+Ge[0]+jt,It(it,dr))});it+=An,Dt+=1});Lt(Xe),ot.forEach(Ft=>{const[qt,vn]=Ft,xr=fe.splitTextToSize(qt?.[0]||"",Ge[0]-jt*2),Un=fe.splitTextToSize(qt?.[1]||"-",Ge[1]-jt*2),zt=fe.splitTextToSize(vn?.[0]||"",Ge[2]-jt*2),An=fe.splitTextToSize(vn?.[1]||"",Ge[3]-jt*2),xn=Math.max(xr.length||1,Un.length||1,zt.length||1,An.length||1),dr=Math.max(gt,xn*3.2+1.2);vr(dr+2),Dt%2===0&&(fe.setFillColor(245,245,245),fe.rect(Ie,Rt(it),qe,dr,"F")),fe.setDrawColor(Ke),fe.rect(Ie,Rt(it),qe,dr,"S");let Dn=Ie;for(let F=0;F<3;F++)Dn+=Ge[F],fe.line(Dn,Rt(it),Dn,Rt(it)+dr);fe.setFont("helvetica","bold"),xr.forEach((F,de)=>fe.text(F,Ie+jt,It(it,de))),zt.forEach((F,de)=>fe.text(F,Ie+Ge[0]+Ge[1]+jt,It(it,de))),fe.setFont("helvetica","normal"),Un.forEach((F,de)=>fe.text(F,Ie+Ge[0]+jt,It(it,de))),An.forEach((F,de)=>fe.text(F,Ie+Ge[0]+Ge[1]+Ge[2]+jt,It(it,de))),it+=dr,Dt+=1}),Lt(nt)},Ls=Xe=>{const ot=[32,75,32,51],nt=5.8,Ge=rn,gt=En(3),jt=Rt=>Rt-3,Tt=(Rt,It=0)=>jt(Rt)+gt+2.5+It*3.2;vr(nt+4),fe.setFont("helvetica","normal"),fe.setFontSize(8.5),Xe.forEach((Rt,It)=>{const[Dt,Lt]=Rt,Ft=fe.splitTextToSize(Dt?.[0]||"",ot[0]-Ge*2),qt=fe.splitTextToSize(Dt?.[1]||"-",ot[1]-Ge*2),vn=fe.splitTextToSize(Lt?.[0]||"",ot[2]-Ge*2),xr=fe.splitTextToSize(Lt?.[1]||"",ot[3]-Ge*2),Un=Math.max(Ft.length||1,qt.length||1,vn.length||1,xr.length||1),zt=Math.max(nt,Un*3.2+1.2);vr(zt+2),It%2===0&&(fe.setFillColor(245,245,245),fe.rect(Ie,jt(it),qe,zt,"F")),fe.setDrawColor(Ke),fe.rect(Ie,jt(it),qe,zt,"S");let An=Ie;for(let xn=0;xn<3;xn++)An+=ot[xn],fe.line(An,jt(it),An,jt(it)+zt);fe.setFont("helvetica","bold"),Ft.forEach((xn,dr)=>fe.text(xn,Ie+Ge,Tt(it,dr))),vn.forEach((xn,dr)=>fe.text(xn,Ie+ot[0]+ot[1]+Ge,Tt(it,dr))),fe.setFont("helvetica","normal"),qt.forEach((xn,dr)=>fe.text(xn,Ie+ot[0]+Ge,Tt(it,dr))),xr.forEach((xn,dr)=>fe.text(xn,Ie+ot[0]+ot[1]+ot[2]+Ge,Tt(it,dr))),it+=zt})},Sr=(Xe,ot)=>{const nt=[95,55,qe-150],Ge=5.8,gt=rn;vr(Ge+6),fe.setFillColor(Ye),fe.setDrawColor(Ke),fe.setLineWidth(.2),fe.rect(Ie,it-3.2,qe,Ge,"FD"),fe.setFont("helvetica","bold"),fe.setFontSize(8.5),fe.text("Total Amount In Words",Ie+rn,it+.8),fe.text("Details",Ie+nt[0]+rn,it+.8),fe.text("Amount",Ie+nt[0]+nt[1]+rn,it+.8),fe.line(Ie+nt[0],it-3.2,Ie+nt[0],it-3.2+Ge),fe.line(Ie+nt[0]+nt[1],it-3.2,Ie+nt[0]+nt[1],it-3.2+Ge),it+=Ge,fe.setFont("helvetica","normal"),fe.setFontSize(8.5);const jt=ot.map(Dt=>{const Lt=fe.splitTextToSize(Dt.detail,nt[1]-gt*2),Ft=fe.splitTextToSize(Dt.value,nt[2]-gt*2),qt=Math.max(Lt.length||1,Ft.length||1),vn=Math.max(Ge,qt*3.2+1.2);return{detailLines:Lt,valueLines:Ft,rowHeight:vn}}),Tt=jt.reduce((Dt,Lt)=>Dt+Lt.rowHeight,0);vr(Tt+2),fe.setDrawColor(Ke),fe.rect(Ie,it-3.2,nt[0],Tt,"S");const Rt=fe.splitTextToSize(Xe,nt[0]-gt*3);fe.setFont("helvetica","bold"),Rt.forEach((Dt,Lt)=>{fe.text(Dt,Ie+gt,it+.1+Ct+Lt*3.2)});let It=it;jt.forEach((Dt,Lt)=>{Lt%2===0&&(fe.setFillColor(245,245,245),fe.rect(Ie+nt[0],It-3.2,nt[1]+nt[2],Dt.rowHeight,"F")),fe.setDrawColor(Ke),fe.rect(Ie+nt[0],It-3.2,nt[1]+nt[2],Dt.rowHeight,"S"),fe.line(Ie+nt[0]+nt[1],It-3.2,Ie+nt[0]+nt[1],It-3.2+Dt.rowHeight),(ot[Lt]?.detail||"").trim().toLowerCase()==="grand total"?fe.setFont("helvetica","bold"):fe.setFont("helvetica","normal"),Dt.detailLines.forEach((Ft,qt)=>{fe.text(Ft,Ie+nt[0]+gt,It+.1+Ct+qt*3.2)}),(ot[Lt]?.detail||"").trim().toLowerCase()==="grand total"?fe.setFont("helvetica","bold"):fe.setFont("helvetica","normal"),Dt.valueLines.forEach((Ft,qt)=>{fe.text(Ft,Ie+nt[0]+nt[1]+gt,It+.1+Ct+qt*3.2)}),It+=Dt.rowHeight}),it=It},Ir="DELIVERY CHALLAN",Pr=N.issueDate?new Date(N.issueDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB"),Di=N.revDate?new Date(N.revDate).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");Mt(on),fe.setFontSize(16),fe.setFont("helvetica","bold"),fe.setTextColor("#da2032"),fe.text(Ir,Pe/2,it,{align:"center"}),it+=8,fs("Delivery Challan Details",11),hs([["Doc. No",N.gatePassNumber||"RNS/PROJECT/00-00-00/RNS-DC-002"],["Date",Pr||"-"],["CONSIGNEE NAME",N.consigneeName||"Company Name"],["CONSIGNEE ADDRESS",N.consigneeAddressText||"PLOT NO. D3, MIDC Umred, Girad Mohpa Road, Belgaon Umred Nagpur, Maharashtra-441203"],["Mode of transport",N.modeOfTransport||"By Road"],["Vehicle No.",N.vehicleNumber||"MH 40 CX 2839"],["Contact No.",N.contactNo||"7972800638"],["Contact person",N.contactPerson||"SAILESH"]],[]),it+=bn;const Ds=["SR. NO.","MATERIAL DISCRIPTION","MATERIAL SIZE","ITEM CODE","UNIT","QUANTITY","APPROX. VALUE"],ps=[14,40,29,25,24,20,28],Hr=W.filter(Xe=>Xe.partMark.trim()||Xe.materialDescription.trim()).map(Xe=>[Xe.serialNo?String(Xe.serialNo):"",Xe.materialDescription,Xe.materialSize,Xe.partMark,Xe.asslyPartSl,String(Xe.quantity),Xe.approxValue]);vr(15),fe.setFillColor(Ye),fe.setDrawColor(Ke),fe.setLineWidth(.2),fe.rect(Ie,it-3,qe,5.8,"FD"),fe.setFont("helvetica","bold"),fe.setFontSize(8);let hr=Ie;Ds.forEach((Xe,ot)=>{fe.line(hr,it-3,hr,it+2.8),fe.text(Xe,hr+rn,it+.8),hr+=ps[ot]}),fe.line(hr,it-3,hr,it+2.8),it+=5.8,fe.setFont("helvetica","normal"),Hr.forEach((Xe,ot)=>{const nt=Xe.map((Tt,Rt)=>fe.splitTextToSize(Tt,ps[Rt]-rn*2)),Ge=Math.max(...nt.map(Tt=>Tt.length)),gt=Math.max(5.8,Ge*3.2+1.2);vr(gt+2),ot%2===0&&(fe.setFillColor(245,245,245),fe.rect(Ie,it-3,qe,gt,"F")),fe.setDrawColor(Ke),fe.rect(Ie,it-3,qe,gt,"S");let jt=Ie;nt.forEach((Tt,Rt)=>{fe.line(jt,it-3,jt,it-3+gt),Rt===0?fe.setFont("helvetica","bold"):fe.setFont("helvetica","normal"),Tt.forEach((It,Dt)=>{fe.text(It,jt+rn,it+.1+Ct+Dt*3.2)}),jt+=ps[Rt]}),fe.line(jt,it-3,jt,it-3+gt),it+=gt});const Qs=W.reduce((Xe,ot)=>Xe+(Number(ot.quantity)||0),0),Rs=_t(),ws=["","","TOTAL","",String(Qs),"",Rs.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})].map((Xe,ot)=>fe.splitTextToSize(Xe,ps[ot]-rn*2)),Is=Math.max(...ws.map(Xe=>Xe.length)),kr=Math.max(5.8,Is*3.2+1.2);vr(kr+2),fe.setFillColor(245,245,245),fe.rect(Ie,it-3,qe,kr,"F"),fe.setDrawColor(Ke),fe.rect(Ie,it-3,qe,kr,"S");let Ns=Ie;ws.forEach((Xe,ot)=>{fe.line(Ns,it-3,Ns,it-3+kr),fe.setFont("helvetica",ot===2||ot===4||ot===5||ot===6?"bold":"normal"),Xe.forEach((nt,Ge)=>{fe.text(nt,Ns+rn,it+.1+Ct+Ge*3.2)}),Ns+=ps[ot]}),fe.line(Ns,it-3,Ns,it-3+kr),it+=kr,it+=bn,fs("Remark",11);const Ci=18;vr(Ci+5),fe.setDrawColor(Ke),fe.rect(Ie,it-3,qe,Ci,"S"),fe.setFont("helvetica","normal"),fe.setFontSize(9),fe.splitTextToSize(N.remarkText||"-",qe-2*rn).forEach((Xe,ot)=>{fe.text(Xe,Ie+rn,it+.1+Ct+ot*3.2)}),it+=Ci+bn,fs("Signature",11);const wr=[{label:"Store Keeper",data:N.storeKeeperSignature},{label:"Qc Engg.",data:N.qcEnggSignature},{label:"Store Incharge",data:N.storeInchargeSignature},{label:"Plant Head",data:N.plantHeadSignature}],Ai=3,is=22,Xr=(qe-Ai*3)/4;vr(is+12),wr.forEach((Xe,ot)=>{const nt=Ie+ot*(Xr+Ai);if(fe.rect(nt,it-3,Xr,is,"S"),Xe.data)try{const Ge=fe.getImageProperties(Xe.data),gt=Ge.width||1,jt=Ge.height||1,Tt=Xr-2,Rt=is-7,It=gt/jt,Dt=Tt/Rt;let Lt=Tt,Ft=Rt;It>Dt?Ft=Tt/It:Lt=Rt*It;const qt=nt+1+(Tt-Lt)/2,vn=it-2.2+(Rt-Ft)/2;fe.addImage(Xe.data,"PNG",qt,vn,Lt,Ft)}catch{}fe.setFont("helvetica","bold"),fe.setFontSize(8),fe.text(Xe.label,nt+Xr/2,it+is-1.2,{align:"center"})}),it+=is;const sn=new Date,pr=`${String(sn.getDate()).padStart(2,"0")}${String(sn.getMonth()+1).padStart(2,"0")}${sn.getFullYear()}`,Ln=(X?.entityName||"RNS").split(" ").map(Xe=>Xe[0]).join(""),On=`GATE_PASS_${pr}_${Ln}_${N.revision}.pdf`,yt=G?fe.output("datauristring",{filename:On}):void 0;return U&&fe.save(On),B||a({title:U?"PDF exported":"PDF generated",description:U?`Delivery Challan saved as ${On}`:"Delivery challan PDF is ready."}),{fileName:On,dataUri:yt}}catch(fe){return console.error("PDF export error:",fe),B||a({title:"Export failed",description:"Failed to export delivery challan PDF. Please try again.",variant:"destructive"}),null}},xt=`-------------
Thanks & Regards
Hareram Sharma
Revira Nexgen Structures Pvt. Ltd.
Mo. No. 8390491843`,dn=()=>{if(!ie?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}k({to:Q?.emailAddress||"",subject:`Delivery Challan ${N.gatePassNumber||""} ${N.revision||""}`.trim(),message:`Please find the attached file for details

${xt}`}),f(!0)},Jt=async()=>{if(!ie?.id){a({title:"Save required",description:"Please save delivery challan first, then send via email.",variant:"destructive"});return}const q=S.to.split(/[,\s;]+/).map(B=>B.trim()).filter(Boolean);if(q.length===0){a({title:"Email required",description:"Please enter at least one recipient email id.",variant:"destructive"});return}if(!S.subject.trim()||!S.message.trim()){a({title:"Fields required",description:"Please enter subject and message body.",variant:"destructive"});return}m(!0);const U=await ue({save:!1,silent:!0,returnDataUri:!0});if(!U?.dataUri){m(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for email.",variant:"destructive"});return}try{const B=U.dataUri.split(",")[1]||"",fe=await(await jn("POST",`/revira/api/delivery-challans/${ie.id}/send-email`,{to:q,subject:S.subject.trim(),message:S.message.trim(),fileName:U.fileName,pdfBase64:B})).json(),Pe=Array.isArray(fe?.accepted)?fe.accepted:[],_e=Pe.length>0?Pe.join(", "):q.join(", ");a({title:"Email queued",description:`SMTP accepted: ${_e}.`}),f(!1)}catch(B){a({title:"Send failed",description:B?.message||"Failed to send email.",variant:"destructive"})}finally{m(!1)}},le=()=>{if(!ie?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const q=(Q?.mobileNumber||"").replace(/\D/g,""),U=q.length===10?`91${q}`:q;I({mobile:U,message:`Please find the attached file for details

${xt}`}),j(!0)},J=async()=>{if(!ie?.id){a({title:"Save required",description:"Please save delivery challan first, then send on WhatsApp.",variant:"destructive"});return}const q=A.mobile.split(/[,\s;]+/).map(B=>B.replace(/\D/g,"")).filter(Boolean);if(q.length===0){a({title:"Mobile required",description:"Please enter at least one mobile number.",variant:"destructive"});return}if(!A.message.trim()){a({title:"Message required",description:"Please enter message body.",variant:"destructive"});return}D(!0);const U=await ue({save:!1,silent:!0,returnDataUri:!0});if(!U?.dataUri){D(!1),a({title:"PDF failed",description:"Unable to generate delivery challan PDF for WhatsApp send.",variant:"destructive"});return}try{const B=U.dataUri.split(",")[1]||"";await jn("POST",`/revira/api/delivery-challans/${ie.id}/send-whatsapp`,{to:q,message:A.message.trim(),fileName:U.fileName,pdfBase64:B}),a({title:"WhatsApp sent",description:`Delivery challan sent to ${q.join(", ")}.`}),j(!1)}catch(B){a({title:"Send failed",description:B?.message||"Failed to send WhatsApp message.",variant:"destructive"})}finally{D(!1)}};return!E||!Q||!z?s.jsx(Ks,{user:z,children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs(Ks,{user:z,children:[s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>r("/revira/projects"),"data-testid":"button-back",children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:E.projectName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-500",children:[s.jsx(ru,{className:"h-4 w-4"}),E.location]})]})]}),s.jsxs(Me,{className:"bg-[#d92134] hover:bg-[#b51c2c]",onClick:()=>r(`/revira/projects/${e}/delivery-challan`),"data-testid":"button-new-delivery-challan",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),"New Delivery Challan"]})]}),s.jsxs("div",{className:"bg-[#d92134] rounded-xl p-4 mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-90",onClick:()=>u(!0),"data-testid":"button-versions-count",children:[s.jsx("span",{className:"text-white font-medium",children:"Versions"}),s.jsx("div",{className:"flex items-center justify-center px-3 h-8 bg-white text-[#d92134] rounded font-bold",children:ie?.revision||N.revision||"R-001"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>u(!0),"data-testid":"button-view-versions",children:s.jsx(Wm,{className:"h-4 w-4"})}),ie&&s.jsx(Me,{variant:"outline",size:"icon",onClick:()=>Le.mutate(),disabled:Le.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-duplicate-delivery-challan",children:s.jsx($d,{className:"w-4 h-4"})}),s.jsxs(Me,{onClick:ue,className:"bg-[#22c55e] hover:bg-[#16a34a] text-white","data-testid":"button-export-pdf",children:[s.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),s.jsx(Me,{variant:"outline",size:"icon",onClick:dn,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-email-delivery-challan",title:"Send delivery challan by email",children:s.jsx(hu,{className:"w-4 h-4"})}),s.jsx(Me,{variant:"outline",size:"icon",onClick:le,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-send-whatsapp-delivery-challan",title:"Send delivery challan on WhatsApp",children:s.jsx(Gm,{className:"w-4 h-4"})}),s.jsxs(Me,{variant:"outline",onClick:ze,disabled:ye.isPending||be.isPending,className:"bg-white/10 border-white/20 text-white hover:bg-white/20","data-testid":"button-save-delivery-challan",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),ye.isPending||be.isPending?"Saving...":"Save Changes"]}),ie&&te&&te.length>1&&s.jsx(Me,{variant:"outline",size:"icon",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 hover:text-red-200",onClick:()=>$({open:!0,title:"Delete Delivery Challan?",description:`Are you sure you want to delete this Delivery Challan (${ie.revision})?`,onConfirm:()=>Oe.mutate(ie.id)}),"data-testid":"button-delete-delivery-challan",children:s.jsx(lr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsxs(ss,{className:"text-lg text-slate-700 flex items-center gap-2",children:[s.jsx(Ta,{className:"w-5 h-5"}),"Delivery Challan DETAILS"]})}),s.jsxs(Tn,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Doc. No"}),s.jsx(Je,{value:N.gatePassNumber,onChange:q=>xe({...N,gatePassNumber:q.target.value}),"data-testid":"input-doc-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Date"}),s.jsx(Je,{type:"date",value:N.issueDate,onChange:q=>xe({...N,issueDate:q.target.value}),"data-testid":"input-date"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE NAME"}),s.jsx(Je,{value:N.consigneeName,onChange:q=>xe({...N,consigneeName:q.target.value}),"data-testid":"input-consignee-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"CONSIGNEE ADDRESS"}),s.jsx(Or,{value:N.consigneeAddressText,onChange:q=>xe({...N,consigneeAddressText:q.target.value}),rows:3,"data-testid":"input-consignee-address"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Mode of transport"}),s.jsx(Je,{value:N.modeOfTransport,onChange:q=>xe({...N,modeOfTransport:q.target.value}),"data-testid":"input-mode-of-transport"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Vehicle No."}),s.jsx(Je,{value:N.vehicleNumber,onChange:q=>xe({...N,vehicleNumber:q.target.value}),"data-testid":"input-vehicle-number"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact No."}),s.jsx(Je,{value:N.contactNo,onChange:q=>xe({...N,contactNo:q.target.value}),"data-testid":"input-contact-no"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Contact Person"}),s.jsx(Je,{value:N.contactPerson,onChange:q=>xe({...N,contactPerson:q.target.value}),"data-testid":"input-contact-person"})]})]})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"Delivery Challan ITEMS"})}),s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-16",children:"SR. NO."}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-48",children:"MATERIAL DISCRIPTION"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"MATERIAL SIZE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-44",children:"ITEM CODE"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-28",children:"UNIT"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-20",children:"QUANTITY"}),s.jsx("th",{className:"p-3 text-left text-sm font-medium text-slate-600 w-24",children:"APPROX. VALUE"}),s.jsx("th",{className:"p-3 w-12"})]})}),s.jsxs("tbody",{children:[W.map(q=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.serialNo===0?"":q.serialNo,onChange:U=>ut(q.id,"serialNo",parseInt(U.target.value)||0),className:"w-14 text-center","data-testid":`input-serial-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.materialDescription,onChange:U=>ut(q.id,"materialDescription",U.target.value),"data-testid":`input-material-description-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.materialSize,onChange:U=>ut(q.id,"materialSize",U.target.value),"data-testid":`input-material-size-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.partMark,onChange:U=>ut(q.id,"partMark",U.target.value),"data-testid":`input-partmark-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.asslyPartSl,onChange:U=>ut(q.id,"asslyPartSl",U.target.value),"data-testid":`input-assly-part-sl-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{type:"number",value:q.quantity,onChange:U=>ut(q.id,"quantity",parseFloat(U.target.value)||0),"data-testid":`input-qty-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Je,{value:q.approxValue,onChange:U=>ut(q.id,"approxValue",U.target.value),"data-testid":`input-approx-value-${q.id}`})}),s.jsx("td",{className:"p-3",children:s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>lt(q.id),disabled:W.length===1,className:"h-8 w-8 text-red-500 hover:text-red-700","data-testid":`button-remove-item-${q.id}`,children:s.jsx(lr,{className:"h-4 w-4"})})})]},q.id)),s.jsxs("tr",{className:"border-t bg-slate-50",children:[s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:"TOTAL"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3"}),s.jsx("td",{className:"p-3 font-semibold",children:W.reduce((q,U)=>q+(Number(U.quantity)||0),0)}),s.jsx("td",{className:"p-3 font-semibold",children:_t().toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3"})]})]})]})}),s.jsx("div",{className:"p-3 border-t bg-gradient-to-b from-white to-slate-50/70 text-center",children:s.jsx(Z7,{label:"Add Row",onClick:Ze,testId:"button-add-item"})})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"REMARK"})}),s.jsx(Tn,{className:"p-6",children:s.jsx(Or,{value:N.remarkText,onChange:q=>xe({...N,remarkText:q.target.value}),rows:4,placeholder:"Add remark...","data-testid":"input-gate-pass-remark"})})]}),s.jsxs(kn,{children:[s.jsx(rs,{className:"bg-slate-100",children:s.jsx(ss,{className:"text-lg text-slate-700",children:"SIGNATURE"})}),s.jsx(Tn,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.storeKeeperSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>oe("storeKeeperSignature","storeKeeperSignUrl"),"data-testid":"signature-store-keeper",children:N.storeKeeperSignature?s.jsx("img",{src:N.storeKeeperSignature,alt:"Store Keeper Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Keeper"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.storeKeeperSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.qcEnggSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>oe("qcEnggSignature","qcEnggSignUrl"),"data-testid":"signature-qc-engg",children:N.qcEnggSignature?s.jsx("img",{src:N.qcEnggSignature,alt:"Qc Engg. Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Qc Engg."}),s.jsx("span",{className:"text-xs text-slate-500",children:N.qcEnggSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.storeInchargeSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>oe("storeInchargeSignature","storeInchargeSignUrl"),"data-testid":"signature-store-incharge",children:N.storeInchargeSignature?s.jsx("img",{src:N.storeInchargeSignature,alt:"Store Incharge Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Store Incharge"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.storeInchargeSignature?"Selected":"Not selected"})]})]}),s.jsxs("div",{className:"border rounded-md p-2",children:[s.jsx("button",{type:"button",className:`w-full h-20 border rounded bg-white overflow-hidden ${N.plantHeadSignature?"ring-2 ring-[#d92134]":""}`,onClick:()=>oe("plantHeadSignature","plantHeadSignUrl"),"data-testid":"signature-plant-head",children:N.plantHeadSignature?s.jsx("img",{src:N.plantHeadSignature,alt:"Plant Head Signature",className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Click to select"})}),s.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Plant Head"}),s.jsx("span",{className:"text-xs text-slate-500",children:N.plantHeadSignature?"Selected":"Not selected"})]})]})]})})]})]})]}),s.jsx(gi,{open:o,onOpenChange:u,children:s.jsxs(ri,{className:"max-w-md",children:[s.jsx(si,{children:s.jsx(ii,{children:"Delivery Challan Versions"})}),s.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:te?.map(q=>s.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${q.id===ie?.id?"bg-red-50 border-red-200":"hover:bg-slate-50"}`,onClick:()=>{r(`/revira/projects/${e}/delivery-challan/${q.id}`),u(!1)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center px-3 h-7 bg-[#d92134] text-white rounded font-bold text-sm mb-1 w-fit",children:q.revision}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(q.createdAt).toLocaleDateString()})]}),te&&te.length>1&&s.jsx(Me,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:U=>{U.stopPropagation(),$({open:!0,title:"Delete Delivery Challan Version?",description:`Are you sure you want to delete version ${q.revision}?`,onConfirm:()=>Oe.mutate(q.id)})},"data-testid":`button-delete-version-${q.id}`,children:s.jsx(lr,{className:"w-4 h-4"})})]})},q.id))})]})}),s.jsx(gi,{open:c,onOpenChange:f,children:s.jsxs(ri,{className:"sm:max-w-xl",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Delivery Challan by Email"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Email id(s)"}),s.jsx(Je,{value:S.to,onChange:q=>k(U=>({...U,to:q.target.value})),placeholder:"sample@domain.com, sample2@domain.com","data-testid":"input-send-email-to-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Subject for email"}),s.jsx(Je,{value:S.subject,onChange:q=>k(U=>({...U,subject:q.target.value})),placeholder:"Email subject","data-testid":"input-send-email-subject-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Body message"}),s.jsx(Or,{value:S.message,onChange:q=>k(U=>({...U,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-email-message-delivery-challan"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:p,"data-testid":"button-send-email-cancel-delivery-challan",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:Jt,disabled:p,"data-testid":"button-send-email-submit-delivery-challan",children:p?"Sending...":"Submit"})]})]})]})}),s.jsx(gi,{open:y,onOpenChange:j,children:s.jsxs(ri,{className:"sm:max-w-lg",children:[s.jsx(si,{children:s.jsx(ii,{children:"Send Delivery Challan on WhatsApp"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Mobile Number(s)"}),s.jsx(Je,{value:A.mobile,onChange:q=>I(U=>({...U,mobile:q.target.value})),placeholder:"919876543210, 918888777666","data-testid":"input-send-whatsapp-mobile-delivery-challan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-600",children:"Message body"}),s.jsx(Or,{value:A.message,onChange:q=>I(U=>({...U,message:q.target.value})),className:"min-h-[120px]","data-testid":"input-send-whatsapp-message-delivery-challan"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:x,"data-testid":"button-send-whatsapp-cancel-delivery-challan",children:"Cancel"}),s.jsx(Me,{type:"button",onClick:J,disabled:x,"data-testid":"button-send-whatsapp-submit-delivery-challan",children:x?"Sending...":"Submit"})]})]})]})}),s.jsx(Hh,{open:R.open,onOpenChange:q=>{q||$({open:!1,title:"",description:"",onConfirm:null})},title:R.title,description:R.description,onConfirm:()=>{R.onConfirm?.(),$({open:!1,title:"",description:"",onConfirm:null})},confirmLabel:"Delete",confirmTestId:"confirm-delete-delivery-challan-action",cancelTestId:"cancel-delete-delivery-challan-action"})]})}const Uv=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],B5=t=>Uv.find(e=>e.value===t)?.label||t;function Y7(){const{id:t}=ed(),e=Number(t),[,n]=Va(),{data:r}=Ra(),{toast:a}=Ha(),[o,u]=P.useState(""),[c,f]=P.useState(!1),[p,m]=P.useState(!1),[y,j]=P.useState(null),[x,D]=P.useState(null),[S,k]=P.useState(null),[A,I]=P.useState({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""}),[R,$]=P.useState({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""}),N=(L,oe)=>{if(L.size>5*1024*1024){a({title:"File too large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}const ve=new FileReader;ve.onloadend=()=>{oe(typeof ve.result=="string"?ve.result:"")},ve.readAsDataURL(L)},xe=L=>{const oe=L.target.files?.[0];oe&&N(oe,ve=>I(ye=>({...ye,attachmentUrl:ve})))},re=L=>{const oe=L.target.files?.[0];oe&&N(oe,ve=>$(ye=>({...ye,attachmentUrl:ve})))},K=L=>L?L.startsWith("data:")?"Open Attachment":L:"-",W=async(L,oe)=>{if(!(L.headers.get("content-type")||"").includes("application/json"))throw new Error(oe);return L.json()},{data:he,isLoading:z}=Bn({queryKey:["/revira/api/projects",e],queryFn:async()=>{const L=await fetch(`/revira/api/projects/${e}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch project");return L.json()},enabled:Number.isFinite(e)&&e>0}),{data:E}=Bn({queryKey:["/revira/api/clients",he?.clientId],queryFn:async()=>{const L=await fetch(`/revira/api/clients/${he?.clientId}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch client");return L.json()},enabled:!!he?.clientId}),{data:Q}=Bn({queryKey:["/revira/api/projects",e,"ledger","budget"],queryFn:async()=>{const L=await fetch(`/revira/api/projects/${e}/ledger/budget`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch budget");return W(L,"Ledger budget API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),{data:X=[],isLoading:ie}=Bn({queryKey:["/revira/api/projects",e,"ledger","entries"],queryFn:async()=>{const L=await fetch(`/revira/api/projects/${e}/ledger/entries`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch ledger entries");return W(L,"Ledger entries API is unavailable. Please restart backend.")},enabled:Number.isFinite(e)&&e>0}),Ce=Mr({mutationFn:async()=>{const L=Number(String(o).replace(/,/g,"").trim()),oe=Number.isFinite(L)?L:0,ve=await jn("PUT",`/revira/api/projects/${e}/ledger/budget`,{projectValue:String(oe)});return W(ve,"Ledger budget API is unavailable. Please restart backend.")},onSuccess:L=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","budget"]}),u(String(Number(L?.projectValue||0))),a({title:"Budget saved",description:"Project budget updated successfully."})},onError:L=>{a({title:"Error",description:L.message||"Failed to save budget",variant:"destructive"})}}),te=Mr({mutationFn:async({id:L,payload:oe})=>{if(L){const ye=await jn("PUT",`/revira/api/ledger-entries/${L}`,oe);await W(ye,"Ledger update API is unavailable. Please restart backend.");return}const ve=await jn("POST",`/revira/api/projects/${e}/ledger/entries`,oe);await W(ve,"Ledger create API is unavailable. Please restart backend.")},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),f(!1),m(!1),j(null),D(null),a({title:"Entry saved",description:"Ledger entry saved in database."})},onError:L=>{a({title:"Error",description:L.message||"Failed to add entry",variant:"destructive"})}}),ae=Mr({mutationFn:async L=>{await jn("DELETE",`/revira/api/ledger-entries/${L}`)},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/projects",e,"ledger","entries"]}),k(null),a({title:"Entry deleted",description:"Ledger entry deleted successfully."})},onError:L=>{a({title:"Error",description:L.message||"Failed to delete entry",variant:"destructive"})}});P.useEffect(()=>{Q&&Q.projectValue!==void 0&&Q.projectValue!==null&&u(String(Number(Q.projectValue)))},[Q?.projectValue]);const Ne=P.useMemo(()=>{const L=X.filter(ye=>ye.entryType==="expense").reduce((ye,be)=>ye+(Number(be.amount)||0),0),oe=X.filter(ye=>ye.entryType==="receipt").reduce((ye,be)=>ye+(Number(be.amount)||0),0),ve=Number(Q?.projectValue||0);return{totalBudget:ve,totalExpenses:L,totalReceived:oe,balanceAmount:oe-L,remainingBudget:ve-L}},[X,Q]),Re=P.useMemo(()=>{const L=[...X].sort((ye,be)=>{const Le=new Date(ye.entryDate).getTime(),Oe=new Date(be.entryDate).getTime();return Le!==Oe?Le-Oe:ye.id-be.id});let oe=0;const ve={};return L.forEach(ye=>{const be=Number(ye.amount)||0;oe+=ye.entryType==="expense"?-be:be,ve[ye.id]=oe}),[...X].sort((ye,be)=>{const Le=new Date(ye.entryDate).getTime(),Oe=new Date(be.entryDate).getTime();return Le!==Oe?Oe-Le:be.id-ye.id}).map(ye=>({...ye,runningBalance:ve[ye.id]||0}))},[X]),ne=()=>{if(!A.entryDate||!A.category||!A.description||!A.amount){a({title:"Missing fields",description:"Fill date, category, description and amount.",variant:"destructive"});return}te.mutate({id:y||void 0,payload:{entryDate:A.entryDate,entryType:"expense",category:A.category,description:A.description,amount:A.amount,paymentMode:A.paymentMode,remarks:"",reference:A.reference,attachmentUrl:A.attachmentUrl}}),I({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},O=()=>{if(!R.entryDate||!R.amount){a({title:"Missing fields",description:"Fill received date and amount.",variant:"destructive"});return}te.mutate({id:x||void 0,payload:{entryDate:R.entryDate,entryType:"receipt",category:"Client Receipt",description:"Payment received from client",amount:R.amount,paymentMode:R.paymentMode,remarks:R.remarks,reference:R.reference,receivedAgainst:R.receivedAgainst,chequeNumber:R.paymentMode==="cheque"?R.chequeNumber:"",bankName:R.paymentMode==="cheque"?R.bankName:"",chequeDate:R.paymentMode==="cheque"?R.chequeDate:"",utrNumber:"",attachmentUrl:R.attachmentUrl}}),$({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})};return z?s.jsx(Ks,{user:r,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):he?s.jsx(Ks,{user:r,children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6 px-1 sm:px-0",children:[s.jsx("div",{className:"flex items-start sm:items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>n("/revira/projects"),children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"Project Ledger"}),s.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 break-words",children:[he.projectName," ",E?`- ${E.name}`:""]})]})]})}),s.jsxs(kn,{className:"border-[#eeb7b7]",children:[s.jsx(rs,{className:"bg-slate-50",children:s.jsx(ss,{className:"text-[#d92134]",children:"Budget Initialization"})}),s.jsx(Tn,{className:"pt-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500",children:"Project Cost / Project Value"}),s.jsx(Je,{type:"number",value:o,onChange:L=>u(L.target.value),placeholder:Q?.projectValue||"0.00","data-testid":"input-ledger-budget"})]}),s.jsx(Me,{className:"w-full md:w-auto",onClick:()=>Ce.mutate(),disabled:Ce.isPending,"data-testid":"button-save-ledger-budget",children:Ce.isPending?"Saving...":"Save Budget"}),s.jsxs("div",{className:"text-sm text-slate-600 md:text-right",children:["Current Budget: ",s.jsxs("span",{className:"font-semibold",children:["Rs. ",Number(Q?.projectValue||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 gap-3",children:[s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Budget"}),s.jsxs("p",{className:"text-lg font-bold",children:["Rs. ",Ne.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Expenses"}),s.jsxs("p",{className:"text-lg font-bold text-red-600",children:["Rs. ",Ne.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Received"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs. ",Ne.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Balance (Received - Expenses)"}),s.jsxs("p",{className:`text-lg font-bold ${Ne.balanceAmount>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",Ne.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Remaining Budget"}),s.jsxs("p",{className:`text-lg font-bold ${Ne.remainingBudget>=0?"text-green-600":"text-red-600"}`,children:["Rs. ",Ne.remainingBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),s.jsxs(kn,{children:[s.jsx(rs,{children:s.jsx(ss,{className:"text-base",children:"Add Ledger Entries"})}),s.jsxs(Tn,{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(gi,{open:c,onOpenChange:f,children:[s.jsx(Ph,{asChild:!0,children:s.jsxs(Me,{className:"w-full sm:w-auto","data-testid":"button-open-expense-dialog",onClick:()=>{j(null),I({entryDate:new Date().toISOString().split("T")[0],category:"",description:"",amount:"",paymentMode:"cash",reference:"",attachmentUrl:""})},children:[s.jsx($A,{className:"w-4 h-4 mr-2"})," Add Expense"]})}),s.jsxs(ri,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(si,{children:s.jsx(ii,{children:"Add Expense"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{type:"date",value:A.entryDate,onChange:L=>I({...A,entryDate:L.target.value})}),s.jsx(Je,{placeholder:"Expense category/type",value:A.category,onChange:L=>I({...A,category:L.target.value})})]}),s.jsx(Or,{placeholder:"Description / remarks",value:A.description,onChange:L=>I({...A,description:L.target.value})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{type:"number",placeholder:"Amount",value:A.amount,onChange:L=>I({...A,amount:L.target.value})}),s.jsxs(Ml,{value:A.paymentMode,onValueChange:L=>I({...A,paymentMode:L}),children:[s.jsx(ol,{children:s.jsx(Bl,{placeholder:"Mode of payment"})}),s.jsx(ll,{children:Uv.map(L=>s.jsx(va,{value:L.value,children:L.label},L.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{placeholder:"Reference / bill no.",value:A.reference,onChange:L=>I({...A,reference:L.target.value})}),s.jsx(Je,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:xe})]}),A.attachmentUrl?s.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,s.jsx(Me,{onClick:ne,disabled:te.isPending,className:"w-full","data-testid":"button-add-expense",children:te.isPending?"Saving...":y?"Update Expense":"Save Expense"})]})]})]}),s.jsxs(gi,{open:p,onOpenChange:m,children:[s.jsx(Ph,{asChild:!0,children:s.jsxs(Me,{variant:"outline",className:"w-full sm:w-auto","data-testid":"button-open-receipt-dialog",onClick:()=>{D(null),$({entryDate:new Date().toISOString().split("T")[0],amount:"",receivedAgainst:"",paymentMode:"neft",remarks:"",reference:"",chequeNumber:"",bankName:"",chequeDate:"",attachmentUrl:""})},children:[s.jsx(VA,{className:"w-4 h-4 mr-2"})," Add Client Receipt"]})}),s.jsxs(ri,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[s.jsx(si,{children:s.jsx(ii,{children:"Add Client Receipt"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{type:"date",value:R.entryDate,onChange:L=>$({...R,entryDate:L.target.value})}),s.jsx(Je,{type:"number",placeholder:"Amount received",value:R.amount,onChange:L=>$({...R,amount:L.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{placeholder:"Received against (milestone/invoice/term)",value:R.receivedAgainst,onChange:L=>$({...R,receivedAgainst:L.target.value})}),s.jsxs(Ml,{value:R.paymentMode,onValueChange:L=>$({...R,paymentMode:L}),children:[s.jsx(ol,{children:s.jsx(Bl,{placeholder:"Mode of receipt"})}),s.jsx(ll,{children:Uv.map(L=>s.jsx(va,{value:L.value,children:L.label},L.value))})]})]}),R.paymentMode==="cheque"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx(Je,{placeholder:"Cheque number",value:R.chequeNumber,onChange:L=>$({...R,chequeNumber:L.target.value})}),s.jsx(Je,{placeholder:"Bank name",value:R.bankName,onChange:L=>$({...R,bankName:L.target.value})}),s.jsx(Je,{type:"date",value:R.chequeDate,onChange:L=>$({...R,chequeDate:L.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{placeholder:"Reference details",value:R.reference,onChange:L=>$({...R,reference:L.target.value})}),s.jsx(Je,{type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:re})]}),R.attachmentUrl?s.jsx("p",{className:"text-xs text-slate-500",children:"Attachment selected"}):null,s.jsx(Or,{placeholder:"Remarks",value:R.remarks,onChange:L=>$({...R,remarks:L.target.value})}),s.jsx(Me,{onClick:O,disabled:te.isPending,className:"w-full","data-testid":"button-add-receipt",children:te.isPending?"Saving...":x?"Update Receipt":"Save Receipt"})]})]})]})]})]}),s.jsxs(kn,{children:[s.jsx(rs,{children:s.jsxs(ss,{className:"text-base flex items-center gap-2",children:[s.jsx(fm,{className:"w-4 h-4"})," Ledger View"]})}),s.jsxs(Tn,{className:"p-0",children:[s.jsx("div",{className:"md:hidden p-3 space-y-3",children:ie?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):Re.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No ledger entries yet."}):Re.map(L=>{const oe=Number(L.amount)||0;return s.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"text-xs text-slate-500",children:L.entryDate}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`text-xs font-semibold ${L.entryType==="expense"?"text-red-600":"text-green-600"}`,children:L.entryType==="expense"?"Expense":"Receipt"}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{L.entryType==="expense"?(j(L.id),I({entryDate:L.entryDate,category:L.category,description:L.description,amount:String(Number(L.amount)||0),paymentMode:L.paymentMode,reference:L.reference||"",attachmentUrl:L.attachmentUrl||""}),f(!0)):(D(L.id),$({entryDate:L.entryDate,amount:String(Number(L.amount)||0),receivedAgainst:L.receivedAgainst||"",paymentMode:L.paymentMode,remarks:L.remarks||"",reference:L.reference||"",chequeNumber:L.chequeNumber||"",bankName:L.bankName||"",chequeDate:L.chequeDate||"",attachmentUrl:L.attachmentUrl||""}),m(!0))},children:s.jsx(Vu,{className:"w-3 h-3"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600",onClick:()=>k(L),disabled:ae.isPending,children:s.jsx(lr,{className:"w-3 h-3"})})]})]}),s.jsx("div",{className:"text-sm font-medium text-slate-800",children:L.category}),s.jsx("div",{className:"text-xs text-slate-500",children:L.description}),s.jsxs("div",{className:"text-xs text-slate-600",children:["Mode: ",B5(L.paymentMode)]}),L.receivedAgainst?s.jsxs("div",{className:"text-xs text-slate-600",children:["Against: ",L.receivedAgainst]}):null,s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-500",children:"Amount"}),s.jsxs("span",{className:L.entryType==="expense"?"text-red-600 font-semibold":"text-green-600 font-semibold",children:["Rs. ",oe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-500",children:"Running Balance"}),s.jsxs("span",{className:L.runningBalance>=0?"text-green-700 font-semibold":"text-red-700 font-semibold",children:["Rs. ",L.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(L.remarks||L.reference||L.utrNumber||L.chequeNumber||L.attachmentUrl)&&s.jsxs("div",{className:"pt-1 border-t text-xs text-slate-600 space-y-1",children:[L.remarks?s.jsxs("div",{children:["Remarks: ",L.remarks]}):null,L.reference?s.jsxs("div",{children:["Ref: ",L.reference]}):null,L.utrNumber?s.jsxs("div",{children:["UTR: ",L.utrNumber]}):null,L.chequeNumber?s.jsxs("div",{children:["Cheque: ",L.chequeNumber]}):null,L.attachmentUrl?s.jsxs("div",{children:["Attach:"," ",s.jsx("a",{className:"text-blue-600 underline",href:L.attachmentUrl,target:"_blank",rel:"noreferrer",children:K(L.attachmentUrl)})]}):null]})]},L.id)})}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left",children:"Date"}),s.jsx("th",{className:"p-3 text-left",children:"Type"}),s.jsx("th",{className:"p-3 text-left",children:"Category / Particulars"}),s.jsx("th",{className:"p-3 text-left",children:"Payment Mode"}),s.jsx("th",{className:"p-3 text-right",children:"Debit"}),s.jsx("th",{className:"p-3 text-right",children:"Credit"}),s.jsx("th",{className:"p-3 text-left",children:"Remarks"}),s.jsx("th",{className:"p-3 text-left",children:"Reference / Attachment"}),s.jsx("th",{className:"p-3 text-right",children:"Running Balance"}),s.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),s.jsx("tbody",{children:ie?s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"Loading..."})}):Re.length===0?s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-slate-500",colSpan:10,children:"No ledger entries yet."})}):Re.map(L=>{const oe=Number(L.amount)||0;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:L.entryDate}),s.jsx("td",{className:`p-3 font-semibold ${L.entryType==="expense"?"text-red-600":"text-green-600"}`,children:L.entryType==="expense"?"Expense":"Receipt"}),s.jsxs("td",{className:"p-3",children:[s.jsx("div",{className:"font-medium",children:L.category}),s.jsx("div",{className:"text-xs text-slate-500",children:L.description}),L.receivedAgainst?s.jsxs("div",{className:"text-xs text-slate-500",children:["Against: ",L.receivedAgainst]}):null]}),s.jsx("td",{className:"p-3",children:B5(L.paymentMode)}),s.jsx("td",{className:"p-3 text-right text-red-600",children:L.entryType==="expense"?oe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),s.jsx("td",{className:"p-3 text-right text-green-600",children:L.entryType==="receipt"?oe.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),s.jsx("td",{className:"p-3",children:L.remarks||"-"}),s.jsxs("td",{className:"p-3",children:[s.jsx("div",{children:L.reference||"-"}),L.utrNumber?s.jsxs("div",{className:"text-xs text-slate-500",children:["UTR: ",L.utrNumber]}):null,L.chequeNumber?s.jsxs("div",{className:"text-xs text-slate-500",children:["Cheque: ",L.chequeNumber]}):null,L.attachmentUrl?s.jsxs("div",{className:"text-xs text-slate-500",children:["Attach:"," ",s.jsx("a",{className:"text-blue-600 underline",href:L.attachmentUrl,target:"_blank",rel:"noreferrer",children:K(L.attachmentUrl)})]}):null]}),s.jsx("td",{className:`p-3 text-right font-semibold ${L.runningBalance>=0?"text-green-700":"text-red-700"}`,children:L.runningBalance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(Me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{L.entryType==="expense"?(j(L.id),I({entryDate:L.entryDate,category:L.category,description:L.description,amount:String(Number(L.amount)||0),paymentMode:L.paymentMode,reference:L.reference||"",attachmentUrl:L.attachmentUrl||""}),f(!0)):(D(L.id),$({entryDate:L.entryDate,amount:String(Number(L.amount)||0),receivedAgainst:L.receivedAgainst||"",paymentMode:L.paymentMode,remarks:L.remarks||"",reference:L.reference||"",chequeNumber:L.chequeNumber||"",bankName:L.bankName||"",chequeDate:L.chequeDate||"",attachmentUrl:L.attachmentUrl||""}),m(!0))},children:s.jsx(Vu,{className:"w-3.5 h-3.5"})}),s.jsx(Me,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-600",onClick:()=>k(L),disabled:ae.isPending,children:s.jsx(lr,{className:"w-3.5 h-3.5"})})]})})]},L.id)})})]})}),s.jsxs("div",{className:"border-t bg-slate-50 p-3 text-sm flex flex-wrap gap-4",children:[s.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[s.jsx(WA,{className:"w-4 h-4"})," Total Budget: Rs. ",Ne.totalBudget.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:"font-semibold text-red-600",children:["Total Expenses: Rs. ",Ne.totalExpenses.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:"font-semibold text-green-600",children:["Total Received: Rs. ",Ne.totalReceived.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("span",{className:`font-semibold ${Ne.balanceAmount>=0?"text-green-700":"text-red-700"}`,children:[s.jsx(BA,{className:"w-4 h-4 inline mr-1"})," Balance: Rs. ",Ne.balanceAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),s.jsx(gi,{open:!!S,onOpenChange:L=>!L&&k(null),children:s.jsxs(ri,{className:"sm:max-w-md",children:[s.jsxs(si,{children:[s.jsx(ii,{children:"Delete Ledger Entry?"}),s.jsx(Zu,{children:S?`Are you sure you want to delete this ${S.entryType} entry dated ${S.entryDate}? This action cannot be undone.`:"This action cannot be undone."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Me,{type:"button",variant:"outline",autoFocus:!0,onClick:()=>k(null),disabled:ae.isPending,"data-testid":"button-cancel-delete-ledger-entry",children:"Cancel"}),s.jsx(Me,{type:"button",variant:"destructive",onClick:()=>S&&ae.mutate(S.id),disabled:ae.isPending,"data-testid":"button-confirm-delete-ledger-entry",children:ae.isPending?"Deleting...":"Delete"})]})]})})]})}):s.jsx(Ks,{user:r,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Project not found"}),s.jsx(Me,{onClick:()=>n("/projects"),className:"mt-4",children:"Back to Projects"})]})})}const X7=[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"neft",label:"NEFT"},{value:"imps",label:"IMPS"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],Wp=t=>Number(t||0)||0;function J7(){const{id:t}=ed(),e=Number(t),[,n]=Va(),{data:r}=Ra(),{toast:a}=Ha(),[o,u]=P.useState(!1),[c,f]=P.useState({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),{data:p,isLoading:m}=Bn({queryKey:["/revira/api/clients",e],queryFn:async()=>{const re=await fetch(`/revira/api/clients/${e}`,{credentials:"include"});if(!re.ok)throw new Error("Failed to load client");return re.json()},enabled:Number.isFinite(e)&&e>0}),{data:y=[],isLoading:j}=Bn({queryKey:["/revira/api/client-ledger/projects",e],queryFn:async()=>{const re=await fetch("/revira/api/projects",{credentials:"include"});if(!re.ok)throw new Error("Failed to load projects");return(await re.json()).filter(W=>W.clientId===e)},enabled:Number.isFinite(e)&&e>0}),{data:x=[],isLoading:D}=Bn({queryKey:["/revira/api/client-ledger/invoices",e],queryFn:async()=>{const re=await fetch("/revira/api/invoices",{credentials:"include"});if(!re.ok)throw new Error("Failed to load invoices");const K=await re.json(),W=new Set(y.map(he=>he.id));return K.filter(he=>W.has(he.projectId))},enabled:y.length>0}),{data:S=[],isLoading:k}=Bn({queryKey:["/revira/api/client-ledger/receipts",e,y.map(re=>re.id).join(",")],queryFn:async()=>(await Promise.all(y.map(async K=>{const W=await fetch(`/revira/api/projects/${K.id}/ledger/entries`,{credentials:"include"});return W.ok?(await W.json()).filter(z=>z.entryType==="receipt"):[]}))).flat(),enabled:y.length>0}),A=Mr({mutationFn:async()=>{if(!c.projectId)throw new Error("Select a project");if(!c.entryDate||!c.amount)throw new Error("Date and amount are required");const re={entryDate:c.entryDate,entryType:"receipt",category:"Client Receipt",description:"Amount received from client",amount:c.amount,paymentMode:c.paymentMode,remarks:c.remarks,reference:c.reference,receivedAgainst:c.receivedAgainst,chequeNumber:"",bankName:"",chequeDate:"",utrNumber:"",attachmentUrl:""};await jn("POST",`/revira/api/projects/${c.projectId}/ledger/entries`,re)},onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/client-ledger/receipts",e]}),u(!1),f({projectId:"",entryDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"neft",reference:"",remarks:"",receivedAgainst:""}),a({title:"Saved",description:"Received amount has been added."})},onError:re=>{a({title:"Error",description:re.message||"Failed to save",variant:"destructive"})}}),I=P.useMemo(()=>{const re=new Map;return y.forEach(K=>re.set(K.id,K)),re},[y]),R=P.useMemo(()=>y.map(re=>{const K=x.filter(he=>he.projectId===re.id).reduce((he,z)=>he+Wp(z.grandTotal),0),W=S.filter(he=>he.projectId===re.id).reduce((he,z)=>he+Wp(z.amount),0);return{projectId:re.id,projectName:re.projectName,debit:K,credit:W,balance:K-W}}),[y,x,S]),$=P.useMemo(()=>{const re=R.reduce((W,he)=>W+he.debit,0),K=R.reduce((W,he)=>W+he.credit,0);return{debit:re,credit:K,balance:re-K}},[R]),N=P.useMemo(()=>{const re=x.map(W=>({date:new Date(W.createdAt),dateText:new Date(W.createdAt).toLocaleDateString("en-GB"),particulars:`Invoice ${W.invoiceNumber} - ${I.get(W.projectId)?.projectName||"Project"}`,vchType:"Sales",vchNo:W.invoiceNumber||String(W.id),debit:Wp(W.grandTotal),credit:0})),K=S.map(W=>({date:new Date(W.entryDate),dateText:new Date(W.entryDate).toLocaleDateString("en-GB"),particulars:`Receipt - ${I.get(W.projectId)?.projectName||"Project"}`,vchType:"Receipt",vchNo:W.reference||String(W.id),debit:0,credit:Wp(W.amount)}));return[...re,...K].sort((W,he)=>W.date.getTime()-he.date.getTime())},[x,S,I]),xe=()=>{const re=new un({orientation:"portrait",unit:"mm",format:"a4"}),K=12,he=210-K*2;let z=15;re.setFont("helvetica","bold"),re.setFontSize(14),re.text(`Client Ledger - ${p?.name||"Client"}`,K,z),z+=7,re.setFont("helvetica","normal"),re.setFontSize(10),re.text(`Date: ${new Date().toLocaleDateString("en-GB")}`,K,z),z+=7;const E=[{key:"date",label:"Date",width:24},{key:"part",label:"Particulars",width:68},{key:"type",label:"Vch Type",width:24},{key:"no",label:"Vch No.",width:26},{key:"debit",label:"Debit",width:24},{key:"credit",label:"Credit",width:24}],Q=()=>{re.setFont("helvetica","bold"),re.setFontSize(9);let Ce=K;E.forEach(te=>{re.text(te.label,Ce+1,z),Ce+=te.width}),z+=2,re.line(K,z,K+he,z),z+=4};Q(),re.setFont("helvetica","normal"),re.setFontSize(9),N.forEach(Ce=>{z>276&&(re.addPage(),z=15,Q(),re.setFont("helvetica","normal"));let te=K;[Ce.dateText,Ce.particulars,Ce.vchType,Ce.vchNo,Ce.debit>0?Ce.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):"",Ce.credit>0?Ce.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}):""].forEach((Ne,Re)=>{const ne=E[Re],O=ne.key==="debit"||ne.key==="credit";re.text(String(Ne),O?te+ne.width-1:te+1,z,{align:O?"right":"left"}),te+=ne.width}),z+=5}),z+=2,re.line(K+he-48,z,K+he,z),z+=5,re.setFont("helvetica","bold"),re.text(`Total Debit: ${$.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,K+he-2,z,{align:"right"}),z+=5,re.text(`Total Credit: ${$.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,K+he-2,z,{align:"right"}),z+=5;const X=$.balance>=0?"Closing Balance (Dr)":"Closing Balance (Cr)";re.text(`${X}: ${Math.abs($.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,K+he-2,z,{align:"right"});const ie=`ClientLedger_${p?.name?.replace(/\s+/g,"_")||"Client"}_${new Date().toISOString().slice(0,10)}.pdf`;re.save(ie)};return m||j?s.jsx(Ks,{user:r,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):p?s.jsx(Ks,{user:r,children:s.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Me,{variant:"ghost",size:"icon",onClick:()=>n("/revira/clients"),children:s.jsx(df,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(fm,{className:"h-6 w-6 text-[#d92134]"}),"Client Ledger"]}),s.jsx("p",{className:"text-sm text-slate-500",children:p.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(gi,{open:o,onOpenChange:u,children:[s.jsx(Ph,{asChild:!0,children:s.jsxs(Me,{className:"bg-[#d92134] hover:bg-[#b91c2c]","data-testid":"button-add-client-receipt",children:[s.jsx(sl,{className:"h-4 w-4 mr-2"}),"Add Received Amount"]})}),s.jsxs(ri,{className:"sm:max-w-xl",children:[s.jsx(si,{children:s.jsx(ii,{children:"Add Received Amount"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Ml,{value:c.projectId,onValueChange:re=>f(K=>({...K,projectId:re})),children:[s.jsx(ol,{children:s.jsx(Bl,{placeholder:"Select project"})}),s.jsx(ll,{children:y.map(re=>s.jsx(va,{value:String(re.id),children:re.projectName},re.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(Je,{type:"date",value:c.entryDate,onChange:re=>f(K=>({...K,entryDate:re.target.value}))}),s.jsx(Je,{type:"number",placeholder:"Amount",value:c.amount,onChange:re=>f(K=>({...K,amount:re.target.value}))})]}),s.jsxs(Ml,{value:c.paymentMode,onValueChange:re=>f(K=>({...K,paymentMode:re})),children:[s.jsx(ol,{children:s.jsx(Bl,{placeholder:"Payment mode"})}),s.jsx(ll,{children:X7.map(re=>s.jsx(va,{value:re.value,children:re.label},re.value))})]}),s.jsx(Je,{placeholder:"Received against",value:c.receivedAgainst,onChange:re=>f(K=>({...K,receivedAgainst:re.target.value}))}),s.jsx(Je,{placeholder:"Reference / voucher no.",value:c.reference,onChange:re=>f(K=>({...K,reference:re.target.value}))}),s.jsx(Or,{placeholder:"Remarks",value:c.remarks,onChange:re=>f(K=>({...K,remarks:re.target.value}))}),s.jsx(Me,{onClick:()=>A.mutate(),className:"w-full",disabled:A.isPending,children:A.isPending?"Saving...":"Save Receipt"})]})]})]}),s.jsxs(Me,{variant:"outline",onClick:xe,"data-testid":"button-export-client-ledger-pdf",children:[s.jsx(Ih,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Debit (Invoices)"}),s.jsxs("p",{className:"text-xl font-bold text-red-600",children:["Rs. ",$.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Credit (Received)"}),s.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rs. ",$.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}),s.jsx(kn,{children:s.jsxs(Tn,{className:"p-4",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Closing Balance"}),s.jsxs("p",{className:`text-xl font-bold ${$.balance>=0?"text-red-700":"text-green-700"}`,children:["Rs. ",Math.abs($.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",$.balance>=0?"Dr":"Cr"]})]})})]}),s.jsxs(kn,{children:[s.jsx(rs,{children:s.jsx(ss,{children:"Project-wise Ledger Summary"})}),s.jsx(Tn,{className:"p-0 overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left",children:"Project"}),s.jsx("th",{className:"p-3 text-right",children:"Debit (Invoice)"}),s.jsx("th",{className:"p-3 text-right",children:"Credit (Received)"}),s.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),s.jsx("tbody",{children:D||k?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"Loading..."})}):R.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-slate-500",children:"No projects found for this client."})}):R.map(re=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-3",children:re.projectName}),s.jsx("td",{className:"p-3 text-right text-red-600",children:re.debit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx("td",{className:"p-3 text-right text-green-600",children:re.credit.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsxs("td",{className:`p-3 text-right font-semibold ${re.balance>=0?"text-red-700":"text-green-700"}`,children:[Math.abs(re.balance).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})," ",re.balance>=0?"Dr":"Cr"]})]},re.projectId))})]})})]})]})}):s.jsx(Ks,{user:r,children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Client not found"}),s.jsx(Me,{onClick:()=>n("/revira/clients"),className:"mt-4",children:"Back to Clients"})]})})}const eF=zE.extend({logoUrl:M.string().min(1,"Logo URL is required").max(5e5,"Logo data too large"),headerUrl:M.string().min(1,"Header URL is required").max(5e5,"Header data too large"),footerUrl:M.string().min(1,"Footer URL is required").max(5e5,"Footer data too large"),stampUrl:M.string().min(1,"Stamp URL is required").max(5e5,"Stamp data too large"),storeKeeperSignUrl:M.string().max(5e5,"Store Keeper signature data too large"),qcEnggSignUrl:M.string().max(5e5,"Qc Engg. signature data too large"),storeInchargeSignUrl:M.string().max(5e5,"Store Incharge signature data too large"),plantHeadSignUrl:M.string().max(5e5,"Plant Head signature data too large"),primaryColor:M.string().min(4,"Primary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),secondaryColor:M.string().min(4,"Secondary color is required").regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),email:M.string().email("Valid email is required")});function tF(){const{toast:t}=Ha(),{data:e}=Ra(),n=P.useRef(null),r=gf({resolver:vf(eF),defaultValues:{logoUrl:"https://reviranexgen.com/assets/logo-with-name.png",headerUrl:"https://reviranexgen.com/assets/header.jpg",footerUrl:"https://reviranexgen.com/assets/footer.jpg",stampUrl:"https://reviranexgen.com/assets/stamp.png",storeKeeperSignUrl:"",qcEnggSignUrl:"",storeInchargeSignUrl:"",plantHeadSignUrl:"",primaryColor:"#da2032",secondaryColor:"#2f3591",entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",companyGstin:"07AAPCR3026H1ZA",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:a,isLoading:o}=Bn({queryKey:["/revira/api/branding"]});P.useEffect(()=>{a&&r.reset({logoUrl:a.logoUrl,headerUrl:a.headerUrl,footerUrl:a.footerUrl,stampUrl:a.stampUrl,storeKeeperSignUrl:a.storeKeeperSignUrl||"",qcEnggSignUrl:a.qcEnggSignUrl||"",storeInchargeSignUrl:a.storeInchargeSignUrl||"",plantHeadSignUrl:a.plantHeadSignUrl||"",primaryColor:a.primaryColor,secondaryColor:a.secondaryColor,entityName:a.entityName,cin:a.cin,companyGstin:a.companyGstin,website:a.website,email:a.email,headOfficeAddress:a.headOfficeAddress,workshopAddress:a.workshopAddress})},[a,r]);const u=Mr({mutationFn:async R=>(await jn("PUT","/revira/api/branding",R)).json(),onSuccess:R=>{r.reset({logoUrl:R.logoUrl,headerUrl:R.headerUrl,footerUrl:R.footerUrl,stampUrl:R.stampUrl,storeKeeperSignUrl:R.storeKeeperSignUrl||"",qcEnggSignUrl:R.qcEnggSignUrl||"",storeInchargeSignUrl:R.storeInchargeSignUrl||"",plantHeadSignUrl:R.plantHeadSignUrl||"",primaryColor:R.primaryColor,secondaryColor:R.secondaryColor,entityName:R.entityName,cin:R.cin,companyGstin:R.companyGstin,website:R.website,email:R.email,headOfficeAddress:R.headOfficeAddress,workshopAddress:R.workshopAddress}),Gn.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Branding updated",description:"Your branding settings have been saved successfully."})},onError:R=>{t({title:"Error",description:R.message||"Failed to update branding",variant:"destructive"})}}),c=R=>{u.mutate(R)};if(o)return s.jsx(Ks,{user:e,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const f=r.watch("logoUrl"),p=r.watch("headerUrl"),m=r.watch("footerUrl"),y=r.watch("stampUrl"),j=r.watch("storeKeeperSignUrl"),x=r.watch("qcEnggSignUrl"),D=r.watch("storeInchargeSignUrl"),S=r.watch("plantHeadSignUrl"),k=r.watch("primaryColor"),A=r.watch("secondaryColor"),I=R=>$=>{const N=$.target.files?.[0];if(N){if(N.size>500*1024){t({title:"File too large",description:"Please upload an image smaller than 500KB",variant:"destructive"});return}const xe=new FileReader;xe.onloadend=()=>{const re=xe.result;r.setValue(R,re,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},xe.readAsDataURL(N)}};return s.jsx(Ks,{user:e,children:s.jsx(xf,{...r,children:s.jsxs("form",{onSubmit:r.handleSubmit(c),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 text-white shadow-lg",children:s.jsx(lv,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage your company branding and identity"})]})]}),s.jsxs(Me,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-primary to-primary/90","data-testid":"button-save-branding",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),u.isPending?"Saving...":"Save Changes"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(kn,{children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(A2,{className:"w-5 h-5"}),"Company Logo"]}),s.jsx(Yc,{children:"Upload or provide a URL for your company logo (max 500KB)"})]}),s.jsx(Tn,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-full max-w-xs h-32 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:f?s.jsx("img",{src:f,alt:"Company Logo",className:"max-h-full max-w-full object-contain p-2","data-testid":"img-logo-preview"}):s.jsxs("div",{className:"text-slate-400 text-center",children:[s.jsx(A2,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"No logo uploaded"})]})}),s.jsxs("div",{className:"w-full space-y-3",children:[s.jsx(cr,{control:r.control,name:"logoUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Logo URL"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"https://example.com/logo.png","data-testid":"input-logo-url"})}),s.jsx(ar,{})]})}),s.jsx("div",{className:"text-center text-sm text-slate-500",children:"or"}),s.jsx("input",{type:"file",ref:n,onChange:I("logoUrl"),accept:"image/*",className:"hidden","data-testid":"input-logo-file"}),s.jsxs(Me,{type:"button",variant:"outline",className:"w-full",onClick:()=>n.current?.click(),"data-testid":"button-upload-logo",children:[s.jsx(Hc,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]})]})})]}),s.jsxs(kn,{children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(lv,{className:"w-5 h-5"}),"Brand Colors"]}),s.jsx(Yc,{children:"Set your primary and secondary brand colors"})]}),s.jsx(Tn,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(cr,{control:r.control,name:"primaryColor",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Primary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:R.value,onChange:R.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-primary-color"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"#da2032",className:"flex-1","data-testid":"input-primary-color-text"})})]}),s.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:k}}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"secondaryColor",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Secondary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:R.value,onChange:R.onChange,className:"w-12 h-10 rounded border cursor-pointer","data-testid":"input-secondary-color"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"#2f3591",className:"flex-1","data-testid":"input-secondary-color-text"})})]}),s.jsx("div",{className:"h-8 rounded-md shadow-inner",style:{backgroundColor:A}}),s.jsx(ar,{})]})})]})})]}),s.jsxs(kn,{className:"lg:col-span-2",children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(Vc,{className:"w-5 h-5"}),"Document Assets"]}),s.jsx(Yc,{children:"Header, footer, and stamp images for documents (max 500KB each)"})]}),s.jsx(Tn,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:p?s.jsx("img",{src:p,alt:"Header",className:"max-h-full max-w-full object-contain","data-testid":"img-header-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No header"]})}),s.jsx(cr,{control:r.control,name:"headerUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Header Image"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"https://example.com/header.jpg","data-testid":"input-header-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"header-file",onChange:I("headerUrl"),accept:"image/*",className:"hidden","data-testid":"input-header-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("header-file")?.click(),"data-testid":"button-upload-header",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload Header"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:m?s.jsx("img",{src:m,alt:"Footer",className:"max-h-full max-w-full object-contain","data-testid":"img-footer-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No footer"]})}),s.jsx(cr,{control:r.control,name:"footerUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Footer Image"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"https://example.com/footer.jpg","data-testid":"input-footer-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"footer-file",onChange:I("footerUrl"),accept:"image/*",className:"hidden","data-testid":"input-footer-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("footer-file")?.click(),"data-testid":"button-upload-footer",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload Footer"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:y?s.jsx("img",{src:y,alt:"Stamp & Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-stamp-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(zA,{className:"w-6 h-6 mx-auto mb-1"}),"No stamp"]})}),s.jsx(cr,{control:r.control,name:"stampUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Company Stamp & Signature"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"https://example.com/stamp.png","data-testid":"input-stamp-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"stamp-file",onChange:I("stampUrl"),accept:"image/*",className:"hidden","data-testid":"input-stamp-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("stamp-file")?.click(),"data-testid":"button-upload-stamp",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload Stamp"]})]})]})})]}),s.jsxs(kn,{className:"lg:col-span-2",children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(Vc,{className:"w-5 h-5"}),"Signatures"]}),s.jsx(Yc,{children:"Upload signature images for Gate Pass roles (max 500KB each)"})]}),s.jsx(Tn,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:j?s.jsx("img",{src:j,alt:"Store Keeper Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-keeper-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(cr,{control:r.control,name:"storeKeeperSignUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Store Keeper"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"Signature URL","data-testid":"input-store-keeper-sign-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"store-keeper-sign-file",onChange:I("storeKeeperSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-keeper-sign-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-keeper-sign-file")?.click(),"data-testid":"button-upload-store-keeper-sign",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:x?s.jsx("img",{src:x,alt:"Qc Engg. Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-qc-engg-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(cr,{control:r.control,name:"qcEnggSignUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Qc Engg."}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"Signature URL","data-testid":"input-qc-engg-sign-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"qc-engg-sign-file",onChange:I("qcEnggSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-qc-engg-sign-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("qc-engg-sign-file")?.click(),"data-testid":"button-upload-qc-engg-sign",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:D?s.jsx("img",{src:D,alt:"Store Incharge Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-store-incharge-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(cr,{control:r.control,name:"storeInchargeSignUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Store Incharge"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"Signature URL","data-testid":"input-store-incharge-sign-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"store-incharge-sign-file",onChange:I("storeInchargeSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-store-incharge-sign-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("store-incharge-sign-file")?.click(),"data-testid":"button-upload-store-incharge-sign",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center bg-slate-50 overflow-hidden",children:S?s.jsx("img",{src:S,alt:"Plant Head Signature",className:"max-h-full max-w-full object-contain","data-testid":"img-plant-head-sign-preview"}):s.jsxs("div",{className:"text-slate-400 text-center text-sm",children:[s.jsx(Vc,{className:"w-6 h-6 mx-auto mb-1"}),"No signature"]})}),s.jsx(cr,{control:r.control,name:"plantHeadSignUrl",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Plant Head"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"Signature URL","data-testid":"input-plant-head-sign-url"})}),s.jsx(ar,{})]})}),s.jsx("input",{type:"file",id:"plant-head-sign-file",onChange:I("plantHeadSignUrl"),accept:"image/*",className:"hidden","data-testid":"input-plant-head-sign-file"}),s.jsxs(Me,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("plant-head-sign-file")?.click(),"data-testid":"button-upload-plant-head-sign",children:[s.jsx(Hc,{className:"w-3 h-3 mr-2"}),"Upload"]})]})]})})]}),s.jsxs(kn,{className:"lg:col-span-2",children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(Jv,{className:"w-5 h-5"}),"Registry Data Core"]}),s.jsx(Yc,{children:"Company registration and legal information"})]}),s.jsx(Tn,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(cr,{control:r.control,name:"entityName",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Entity Registered Identity"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"cin",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Corporate Registration (CIN)"}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"website",render:({field:R})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(zb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"companyGstin",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Company GST No."}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"07AAPCR3026H1ZA","data-testid":"input-company-gstin"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"email",render:({field:R})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),s.jsx(ir,{children:s.jsx(Je,{...R,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),s.jsx(ar,{})]})})]})})]}),s.jsxs(kn,{className:"lg:col-span-2",children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(ru,{className:"w-5 h-5"}),"Locations"]}),s.jsx(Yc,{children:"Head office and workshop addresses"})]}),s.jsx(Tn,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(cr,{control:r.control,name:"headOfficeAddress",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Head Office (H.O)"}),s.jsx(ir,{children:s.jsx(Or,{...R,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-head-office-address"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:r.control,name:"workshopAddress",render:({field:R})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Workshop"}),s.jsx(ir,{children:s.jsx(Or,{...R,placeholder:"Flat No. 302, 3rd Floor Rajat Residency...",rows:3,"data-testid":"input-workshop-address"})}),s.jsx(ar,{})]})})]})})]})]})]})})})}const nF=M.object({entityName:M.string().min(1,"Entity name is required"),cin:M.string().min(1,"CIN is required"),website:M.string().min(1,"Website is required"),email:M.string().email("Valid email is required"),headOfficeAddress:M.string().min(1,"Head office address is required"),workshopAddress:M.string().min(1,"Workshop address is required")});function rF(){const{toast:t}=Ha(),{data:e}=Ra(),n=gf({resolver:vf(nF),defaultValues:{entityName:"Revira NexGen Structure Pvt. Ltd.",cin:"U16222DL2025PTC459465",website:"www.reviranexgen.com",email:"info@reviranexgen.com",headOfficeAddress:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",workshopAddress:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023"}}),{data:r,isLoading:a}=Bn({queryKey:["/revira/api/branding"]});P.useEffect(()=>{r&&n.reset({entityName:r.entityName,cin:r.cin,website:r.website,email:r.email,headOfficeAddress:r.headOfficeAddress,workshopAddress:r.workshopAddress})},[r,n]);const o=Mr({mutationFn:async c=>(await jn("PUT","/revira/api/branding",{...r,...c})).json(),onSuccess:()=>{Gn.invalidateQueries({queryKey:["/revira/api/branding"]}),t({title:"Settings updated",description:"Your company registry data has been saved successfully."})},onError:c=>{t({title:"Error",description:c.message||"Failed to update settings",variant:"destructive"})}}),u=c=>{o.mutate(c)};return a?s.jsx(Ks,{user:e,children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#da2032]"})})}):s.jsx(Ks,{user:e,children:s.jsx(xf,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(u),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-xl bg-[#da2032] text-white shadow-lg",children:s.jsx(Jv,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Manage company registry information"})]})]}),s.jsxs(Me,{type:"submit",disabled:o.isPending,className:"bg-[#da2032] hover:bg-[#c41b2b]","data-testid":"button-save-settings",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),o.isPending?"Saving...":"Save Changes"]})]}),s.jsxs(kn,{children:[s.jsxs(rs,{children:[s.jsxs(ss,{className:"flex items-center gap-2",children:[s.jsx(Ta,{className:"w-5 h-5"}),"Company Registry Data Core"]}),s.jsx(Yc,{children:"Company registration and legal information"})]}),s.jsx(Tn,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(cr,{control:n.control,name:"entityName",render:({field:c})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Entity Registered Identity"}),s.jsx(ir,{children:s.jsx(Je,{...c,placeholder:"Revira NexGen Structure Pvt. Ltd.","data-testid":"input-entity-name"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:n.control,name:"website",render:({field:c})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(zb,{className:"w-4 h-4"}),"Universal Digital Hub (Website)"]}),s.jsx(ir,{children:s.jsx(Je,{...c,placeholder:"www.reviranexgen.com","data-testid":"input-website"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:n.control,name:"cin",render:({field:c})=>s.jsxs(rr,{children:[s.jsx(sr,{children:"Corporate Registration (CIN)"}),s.jsx(ir,{children:s.jsx(Je,{...c,placeholder:"U16222DL2025PTC459465","data-testid":"input-cin"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:n.control,name:"email",render:({field:c})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"w-4 h-4"}),"Master Digital Channel (Email)"]}),s.jsx(ir,{children:s.jsx(Je,{...c,placeholder:"info@reviranexgen.com","data-testid":"input-email"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:n.control,name:"workshopAddress",render:({field:c})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(ru,{className:"w-4 h-4"}),"Nagpur Regional Hub"]}),s.jsx(ir,{children:s.jsx(Or,{...c,placeholder:"Flat No. 302, 3rd Floor Rajat Residency, Subharambha Society Near Toll Naka, Dabha, Nagpur 440023",rows:3,"data-testid":"input-nagpur-address"})}),s.jsx(ar,{})]})}),s.jsx(cr,{control:n.control,name:"headOfficeAddress",render:({field:c})=>s.jsxs(rr,{children:[s.jsxs(sr,{className:"flex items-center gap-2",children:[s.jsx(ru,{className:"w-4 h-4"}),"Delhi Strategic H.O."]}),s.jsx(ir,{children:s.jsx(Or,{...c,placeholder:"28, E2 Block, Shivram Park Nangloi Delhi - 110041",rows:3,"data-testid":"input-delhi-address"})}),s.jsx(ar,{})]})})]})})]})]})})})}function sF(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 p-4",children:s.jsx(kn,{className:"w-full max-w-md border-slate-200 shadow-xl",children:s.jsxs(Tn,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(RA,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"The page you are looking for does not exist or has been moved."}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx(Y5,{href:"/revira",children:s.jsx(Me,{className:"bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/20",children:"Return Home"})})})]})})})}function ga({component:t}){const{data:e,isLoading:n}=Ra();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx(ov,{className:"w-8 h-8 animate-spin text-primary"})}):e?s.jsx(t,{}):s.jsx(tC,{to:"/revira"})}function iF(){return s.jsxs(eC,{children:[s.jsx($i,{path:"/revira",component:b8}),s.jsx($i,{path:"/revira/dashboard",children:s.jsx(ga,{component:IL})}),s.jsx($i,{path:"/revira/clients",children:s.jsx(ga,{component:BL})}),s.jsx($i,{path:"/revira/projects",children:s.jsx(ga,{component:vD})}),s.jsx($i,{path:"/revira/users",children:s.jsx(ga,{component:MD})}),s.jsx($i,{path:"/revira/projects/:projectId/quotation/:quotationId",children:s.jsx(ga,{component:I5})}),s.jsx($i,{path:"/revira/projects/:projectId/quotation",children:s.jsx(ga,{component:I5})}),s.jsx($i,{path:"/revira/projects/:id/invoice/:invoiceId",children:s.jsx(ga,{component:F5})}),s.jsx($i,{path:"/revira/projects/:id/invoice",children:s.jsx(ga,{component:F5})}),s.jsx($i,{path:"/revira/projects/:id/gate-pass/:gatePassId",children:s.jsx(ga,{component:O5})}),s.jsx($i,{path:"/revira/projects/:id/gate-pass",children:s.jsx(ga,{component:O5})}),s.jsx($i,{path:"/revira/projects/:id/delivery-challan/:deliveryChallanId",children:s.jsx(ga,{component:M5})}),s.jsx($i,{path:"/revira/projects/:id/delivery-challan",children:s.jsx(ga,{component:M5})}),s.jsx($i,{path:"/revira/projects/:id/ledger",children:s.jsx(ga,{component:Y7})}),s.jsx($i,{path:"/revira/clients/:id/ledger",children:s.jsx(ga,{component:J7})}),s.jsx($i,{path:"/revira/branding",children:s.jsx(ga,{component:tF})}),s.jsx($i,{path:"/revira/settings",children:s.jsx(ga,{component:rF})}),s.jsx($i,{component:sF})]})}function aF(){return s.jsx(wC,{client:Gn,children:s.jsx(e6,{children:s.jsxs(WE,{children:[s.jsx(iF,{}),s.jsx(P_,{})]})})})}D3.createRoot(document.getElementById("root")).render(s.jsx(aF,{}));export{Yr as _,oF as c,q5 as g};
